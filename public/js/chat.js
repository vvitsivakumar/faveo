webpackJsonp([11],{3179:function(t,e,a){t.exports=a(3180)},3180:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(38),i=(a.n(n),a(11)),r=a(27),s=a(31),o=a.n(s),c=a(3181),l=a.n(c),d=a(3194),p=a.n(d),u=(a(24),{path:"/chat",component:o.a,name:"Chat",redirect:"/chat/settings",children:[{path:"settings",component:l.a,name:"Chat Settings",meta:{title:"chat-integrations",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"chat_settings"}}},{path:":id/edit",component:p.a,name:"Chat Edit",meta:{title:"chat-integrations",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"chat_settings",to:"/chat"},active:"edit_chat"}}}]});r.a.addRoutes([u]);new Vue({el:"#chat-settings",store:i.a})},3181:function(t,e,a){var n=a(0)(a(3184),a(3193),!1,function(t){a(3182)},null,null);t.exports=n.exports},3182:function(t,e,a){var n=a(3183);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("37b932b9",n,!0,{})},3183:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".mr-2{margin-right:5px}.name{width:15%!important}.name,.url{word-break:break-all}.url{width:39%!important}.action,.status{width:10%!important;word-break:break-all}.department,.helptopic{width:13%!important;word-break:break-all}",""])},3184:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(7),i=(a(6),a(3)),r=(a.n(i),a(4)),s=a(15),o=a.n(s),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};o.a.component("table-actions-clone",a(3185)),o.a.component("table-actions-actual",a(20)),o.a.component("click-to-copy",a(3188)),e.default={data:function(){return{apiUrl:"chat/api/chats",loading:!1,columns:["name","url","department","helptopic","status","action"],options:{},duration:4e3}},computed:c({},Object(n.b)(["formattedTime","formattedDate"])),methods:{subString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(r.r)(t,e)}},beforeMount:function(){this.options={headings:{name:"Name",url:"URL",status:"Status",action:"Action",helptopic:"HelpTopic",department:"Department"},columnsClasses:{name:"name",url:"url",status:"status",action:"action",department:"department",helptopic:"helptopic"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{url:"click-to-copy",department:function(t,e,a){return e.department?e.department.name:"--"},helptopic:function(t,e,a){return e.helptopic?e.helptopic.name:"--"},status:"table-actions-clone",action:"table-actions-actual"},requestAdapter:function(t){return{sort_field:t.orderBy?t.orderBy:"id",sort_order:t.ascending?"desc":"asc",search_term:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(t){var e=t.data;return{data:e.data.chats.map(function(t){return t.edit_url="/chat/"+t.id+"/edit",t.textToCopy=t.url,t}),count:e.data.total}},sortable:["name","department","helptopic"],filterable:["name","department","helptopic"],pagination:{chunk:5,nav:"fixed",edge:!0}}},components:{alert:a(5),"data-table":a(14)}}},3185:function(t,e,a){var n=a(0)(a(3186),a(3187),!1,null,null,null);t.exports=n.exports},3186:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(35),i=a.n(n),r=a(6);e.default={components:{"status-switch":i.a},props:["data"],methods:{onChange:function(t,e){this.statusChange(e)},statusChange:function(t){axios.get("chat/api/status/"+t).then(function(t){Object(r.b)(t,"dataTableModal"),window.eventHub.$emit("refreshData")}).catch(function(t){Object(r.a)(t,"dataTableModal")})}}}},3187:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-group"},[e("status-switch",{key:Math.random(),attrs:{name:this.data.id,value:this.data.status,onChange:this.onChange}})],1)},staticRenderFns:[]}},3188:function(t,e,a){var n=a(0)(a(3191),a(3192),!1,function(t){a(3189)},"data-v-41ad8620",null);t.exports=n.exports},3189:function(t,e,a){var n=a(3190);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("5154ad12",n,!0,{})},3190:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".url-paragraph[data-v-41ad8620]{display:inline!important}.green[data-v-41ad8620]{color:green}.unstyled-button[data-v-41ad8620]{border:none;padding:0;background:none;outline:none!important}",""])},3191:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(54),i=a.n(n),r=a(4);e.default={name:"click-to-copy",description:"Reusable component which handles copying of text content to clipboard on click.",props:{data:{type:Object,required:!0}},data:function(){return{copied:!1}},methods:{copyToClipboard:function(){i()(this.data.textToCopy),this.copied=!0,this.showCopyIconAfterCopying()},subString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return Object(r.r)(t,e)},showCopyIconAfterCopying:function(){var t=this;setTimeout(function(){t.copied=!1},5e3)}}}},3192:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"wrapping-div"},[a("p",{staticClass:"text-left url-paragraph"},[t._v(t._s(t.data.textToCopy?t.subString(t.data.textToCopy,50):"--"))]),t._v(" "),t.data.textToCopy?a("button",{staticClass:"pull-right unstyled-button",attrs:{title:"Click to copy"},on:{click:function(e){return e.preventDefault(),t.copyToClipboard.apply(null,arguments)}}},[a("i",{class:t.copied?"glyphicon glyphicon-ok green":"fa fa-clipboard"})]):t._e()])])},staticRenderFns:[]}},3193:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"dataTableModal"}}),t._v(" "),a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(" "+t._s(t.lang("chat_settings")))])]),t._v(" "),a("div",{staticClass:"card-body",attrs:{id:"chat-view"}},[a("data-table",{attrs:{url:t.apiUrl,dataColumns:t.columns,option:t.options,scroll_to:"chat-view"}})],1)])],1)},staticRenderFns:[]}},3194:function(t,e,a){var n=a(0)(a(3197),a(3198),!1,function(t){a(3195)},null,null);t.exports=n.exports},3195:function(t,e,a){var n=a(3196);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("0ac9fa9a",n,!0,{})},3196:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".search{display:none!important}",""])},3197:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),i=a.n(n),r=a(6),s=a(7),o=a(4),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default={data:function(){return{departmentUrl:"api/dependency/departments?meta=true",helptopicUrl:"api/dependency/help-topics?meta=true",secret_key:"",secret_key_required:!1,department:"",helptopic:"",required:!0,url:"",depUrlBit:"",helpUrlBit:"",name:"",script:"",additional_secret_keys:"",id:""}},computed:c({},Object(s.b)(["formattedTime","formattedDate"])),watch:{department:function(t){t&&(this.depUrlBit=t.id,this.generateUrl())},helptopic:function(t){t&&(this.helpUrlBit=t.id,this.generateUrl())}},methods:{onChange:function(t,e){this[e]=t},generateUrl:function(){this.url=this.basePath()+"/chat/"+this.name+"/"+this.depUrlBit+"/"+this.helpUrlBit},submit:function(){var t=this;i.a.put("chat/api/update/"+this.id,{department:this.department,helptopic:this.helptopic,secret_key:this.secret_key,url:this.url,script:this.script,additional_secret_keys:this.additional_secret_keys}).then(function(e){t.$store.dispatch("unsetValidationError"),Object(r.b)(e,"chatEdit"),setTimeout(function(){return t.$router.push({name:"Chat Settings"})},3e3)}).catch(function(t){Object(r.a)(t,"chatEdit")})},getChatId:function(t){var e=this;i.a.get("/chat/api/validate/"+t).then(function(t){e.id=t.data.data,e.getChatDetails()})},getChatDetails:function(){var t=this;i.a.get("/chat/api/chats?ids[]="+this.id).then(function(e){var a=e.data.data.chats[0];t.department=a.department,t.helptopic=a.helptopic,t.url=a.url,t.secret_key=a.secret_key,t.secret_key_required=!!a.secret_key_required,t.name=a.short,t.script=a.script,t.additional_secret_keys=a.additional_secret_keys})}},beforeMount:function(){this.getChatId(Object(o.p)(window.location.pathname))},components:{"text-field":a(12),"dynamic-select":a(13),alert:a(5)}}},3198:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"chatEdit"}}),t._v(" "),a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v("\n                "+t._s(t.lang("edit"))+"    \n            ")])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("dynamic-select",{attrs:{name:"department",classname:"col-sm-6",apiEndpoint:t.departmentUrl,multiple:!1,prePopulate:!1,label:t.lang("department"),value:t.department,onChange:t.onChange,required:t.required,clearable:!1}}),t._v(" "),a("dynamic-select",{attrs:{name:"helptopic",classname:"col-sm-6",apiEndpoint:t.helptopicUrl,multiple:!1,prePopulate:!1,label:t.lang("helptopic"),value:t.helptopic,onChange:t.onChange,required:t.required,clearable:!1}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("url"),onChange:t.onChange,value:t.url,type:"text",name:"url",disabled:!0,classname:"col-sm-6",hint:t.lang("url_hint"),id:"url"}}),t._v(" "),a("text-field",{attrs:{label:t.lang("secret_key"),onChange:t.onChange,value:t.secret_key,type:"text",name:"secret_key",classname:"col-sm-6",disabled:!t.secret_key_required,hint:t.lang("secret_key_hint"),id:"secret_key",required:t.required}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("additional_secret_keys"),onChange:t.onChange,value:t.additional_secret_keys,name:"additional_secret_keys",classname:"col-sm-12",rows:"2",type:"textarea",hint:t.lang("additional_secret_keys_hint"),id:"additional_secret_keys"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("chat_widget_script"),onChange:t.onChange,value:t.script,name:"script",classname:"col-sm-12",rows:"6",type:"textarea",hint:t.lang("chat_widget_script_hint"),id:"script"}})],1)]),t._v(" "),a("div",{staticClass:"card-footer"},[a("button",{staticClass:"btn btn-primary",on:{click:t.submit}},[a("i",{staticClass:"fas fa-save"}),t._v(" "+t._s(t.lang("save"))+"\n\n            ")])])])],1)},staticRenderFns:[]}}},[3179]);