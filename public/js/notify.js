webpackJsonp([9],{4405:function(t,e,a){t.exports=a(4406)},4406:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(38),s=(a.n(n),a(11)),i=a(27),l=a(31),o=a.n(l),r=a(4407),c=a.n(r),d=a(4412),u=a.n(d),p=a(4418),m=a.n(p),h=a(4421),v=a.n(h),f=a(4424),g=a.n(f),_=a(4429),b=a.n(_),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C="function"==typeof Symbol&&"symbol"===y(Symbol.iterator)?function(t){return void 0===t?"undefined":y(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":y(t)},w=(a(24),{path:"/notify/manage",component:o.a,name:"Notify",redirect:"/notify/manage/alerts",children:[{path:"channels",component:c.a,name:"TemplateSettings",meta:{title:"channels",crumb:{link:{name:"admin_panel",to:"/"},active:"channels"}}},{path:"channels/:channel/template-sets",component:u.a,name:"TemplateSetList",meta:{identifier:"template_sets",title:"template-sets",crumb:{link:{name:"admin_panel",to:"/"},parent_link:{name:"channels",to:"/notify/manage/channels"},active:":channel"}}},{path:"channels/:channel/template-sets/:id/templates",component:m.a,name:"TemplatesList",meta:{identifier:"templates",title:"template-sets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"channels",to:"/notify/manage/channels"},parent_link:{name:":channel",to:"/notify/manage/channels/:channel/template-sets"},active:"set :id"}}},{path:"channels/:channel/template-sets/:set/templates/:id",component:v.a,name:"TemplateEdit",meta:{identifier:"template_edit",title:"templates",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"channels",to:"/notify/manage/channels"},parent_link:{name:"set :set",to:"/notify/manage/channels/:channel/template-sets/:set/templates"},active:"template :id"}}},{path:"alerts",component:g.a,name:"AlertSettings",meta:{title:"alerts-settings",crumb:{link:{name:"admin_panel",to:"/"},active:"alerts-settings"}}},{path:"in-app",component:b.a,name:"InAppSettings",meta:{title:"manage-in-app-logs",crumb:{link:{name:"admin_panel",to:"/"},active:"manage-in-app-logs"}}}]});i.a.addRoutes([w]),i.a.beforeEach(function(t,e,a){if(void 0!==t.meta.identifier){t.meta.crumb={template_sets:{link:{name:"admin_panel",to:"/"},parent_link:{name:"channels",to:"/notify/manage/channels"},active:":channel"},templates:{link:{name:"admin_panel",to:"/"},root_link:{name:"channels",to:"/notify/manage/channels"},parent_link:{name:":channel",to:"/notify/manage/channels/:channel/template-sets"},active:"set :id"},template_edit:{link:{name:"admin_panel",to:"/"},root_link:{name:"channels",to:"/notify/manage/channels"},parent_link:{name:"set :set",to:"/notify/manage/channels/:channel/template-sets/:set/templates"},active:"template :id"}}[t.meta.identifier],Object.keys(t.params).forEach(function(e){!function t(e,a,n){Object.keys(n).forEach(function(s){"string"==typeof n[s]?n[s]=n[s].replace(e,a):"object"==C(n[s])&&t(e,a,n[s])})}(":"+e,t.params[e],t.meta)})}a()});new Vue({el:"#app-notify",store:s.a})},4407:function(t,e,a){var n=a(0)(a(4410),a(4411),!1,function(t){a(4408)},"data-v-47efaf53",null);t.exports=n.exports},4408:function(t,e,a){var n=a(4409);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("a76c7b66",n,!0,{})},4409:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".settingiconblue[data-v-47efaf53]{padding-top:.5rem;padding-bottom:.5rem}.settingdivblue[data-v-47efaf53]{width:80px;height:80px;margin:0 auto;text-align:center;border:5px solid #c4d8e4;border-radius:100%;padding-top:5px}.settingdivblue span[data-v-47efaf53]{margin-top:3px}.fw_400[data-v-47efaf53]{font-weight:400}.settingiconblue p[data-v-47efaf53]{text-align:center;font-size:16px;word-wrap:break-word;font-variant:small-caps;font-weight:500;line-height:30px}",""])},4410:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(6),s=a(3),i=a.n(s);e.default={name:"template-index",data:function(){return{channels:null,pageLoad:!0,plugin:null}},beforeMount:function(){this.plugin=new URL(location.href).searchParams.get("plugin"),this.getNotificationChannels()},methods:{getNotificationChannels:function(){var t=this;i.a.get("notify/api/notification-channels").then(function(e){t.pageLoad=!1,t.channels=e.data.data,Object(n.b)(e,"template-index")}).catch(function(e){t.pageLoad=!1,Object(n.a)(e,"template-index")})}},components:{alert:a(5),"custom-loader":a(9),loader:a(8)}}},4411:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"template-index"}}),t._v(" "),t.pageLoad?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:4e3}})],1):a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans("notifications-channels")))])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},t._l(t.channels,function(e){return a("div",{staticClass:"col-md-2 col-sm-6"},[a("div",{staticClass:"settingiconblue"},[a("div",{staticClass:"settingdivblue"},[a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans(e.desc_lang_key),expression:"trans(channel.desc_lang_key)"}],attrs:{to:"/notify/manage/channels/"+e.channel+"/template-sets"+(t.plugin?"?plugin="+t.plugin:"")}},[a("span",{staticClass:"fa-stack fa-2x"},[a("i",{class:[e.icon,"fa-stack-1x"]})])])],1),t._v(" "),a("div",{staticClass:"text-center text-sm fw_400"},[t._v(t._s(t.trans(e.channel)))])])])}),0)])])],1)},staticRenderFns:[]}},4412:function(t,e,a){var n=a(0)(a(4413),a(4417),!1,null,null,null);t.exports=n.exports},4413:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(15),s=a.n(n),i=a(3),l=a.n(i),o=a(7),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};s.a.component("table-actions",a(20)),e.default={name:"template-set-list-index",data:function(){return{apiUrl:"notify/api/template-sets",plugin:null,channel:null,columns:["name","active","template_language","department","actions"],showModal:!1,languages:[],options:{}}},computed:r({},Object(o.b)(["formattedTime"])),beforeMount:function(){var t=this,e=new URL(location.href);this.plugin=e.searchParams.get("plugin");var a=e.pathname.substring(0,e.pathname.lastIndexOf("/"));this.channel=a.substring(a.lastIndexOf("/")+1),this.apiUrl=this.apiUrl+"?channel="+this.channel,this.getLanguagesMenu(),this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{name:"template-list-name",active:"template-list-active",template_language:"template-list-language",department:"template-list-department",actions:"template-list-actions"},texts:{filter:"",limit:""},templates:{active:function(t,e){return t("a",{},[t("span",{attrs:{class:e.active?"btn btn-success btn-xs":"btn btn-danger btn-xs"}},e.active?"Active":"Inactive")])},department:function(t,e){return e.department?e.department.name:"--"},actions:"table-actions"},sortable:["name","active","template_language"],filterable:["name","template_language"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter:function(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=e.data;return{data:a.data.data.map(function(e){return e.status_toggle_url=t.basePath()+"/notify/api/template-sets/change-status/"+e.id,e.view_url="/notify/manage/channels/"+t.channel+"/template-sets/"+e.id+"/templates"+(t.plugin?"?plugin="+t.plugin:""),e.delete_url=t.basePath()+"/notify/api/delete-template-sets/"+e.id,e.active_status=e.active,e}),count:a.data.total}}}},methods:{toggleModal:function(){this.showModal=!this.showModal},onClose:function(){this.showModal=!1},getLanguagesMenu:function(){var t=this;l.a.get("api/dependency/languages?meta=true").then(function(e){t.languages=e.data.data.languages.map(function(t,e){return{name:t.name+" ("+t.translation+")",value:t.locale}})}).catch(function(t){})}},components:{"data-table":a(14),alert:a(5),"template-set-create-modal":a(4414)}}},4414:function(t,e,a){var n=a(0)(a(4415),a(4416),!1,null,null,null);t.exports=n.exports},4415:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),s=a.n(n),i=a(11),l=a(16),o=a(4);var r=a(6);e.default={name:"template-set-create-modal",data:function(){return{isLoading:!1,name:"",template_language:[],department_id:[],parent_template_set:[],containerStyle:{width:"800px"}}},props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},apiUrl:{type:String},languages:{type:Array,required:!0,default:function(){return[]}}},methods:{onChange:function(t,e){this[e]=t||""},onSubmit:function(){var t=this;if(this.isValidInputs()){var e={name:this.name,parent_template_set:this.parent_template_set.id,department_id:this.department_id?this.department_id.id:null,template_language:this.template_language.value};this.isLoading=!0,s.a.post("notify/api/template-sets/create",e).then(function(e){t.isLoading=!1,t.onClose(),Object(r.b)(e,"template-set-list-index"),window.eventHub.$emit("refreshData")}).catch(function(e){Object(r.a)(e,"template-set-create-modal"),t.isLoading=!1})}},isValidInputs:function(){var t=function(t){var e={name:[t.name,"isRequired"],template_language:[t.template_language,"isRequired"],parent_template_set:[t.parent_template_set,"isRequired"]},a=new l.Validator(o.u).validate(e),n=a.errors,s=a.isValid;return i.a.dispatch("setValidationError",n),{errors:n,isValid:s}}(this.$data);t.errors;return t.isValid}},components:{alert:a(5),modal:a(10),"dynamic-select":a(13),"text-field":a(12),loader:a(8)}}},4416:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showModal?a("modal",{attrs:{showModal:!0,onClose:function(){return t.showModal=!1},containerStyle:t.containerStyle}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.lang("create_set")))])]),t._v(" "),a("div",{attrs:{slot:"alert"},slot:"alert"},[a("alert",{attrs:{componentName:"template-set-create-modal"}})],1),t._v(" "),t.isLoading?t._e():a("div",{attrs:{slot:"fields"},slot:"fields"},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("name"),value:t.name,type:"text",name:"name",onChange:t.onChange,classname:"col-sm-6",required:!0}}),t._v(" "),a("dynamic-select",{attrs:{id:"parent_template_set",name:"parent_template_set",classname:"col-sm-6",apiEndpoint:t.apiUrl,label:t.lang("template_set_to_clone"),hint:t.lang("select_template_set_to_clone"),required:!0,multiple:!1,value:t.parent_template_set,onChange:t.onChange}})],1),t._v(" "),a("div",{staticClass:"row"},[a("dynamic-select",{attrs:{id:"department_id",name:"department_id",classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",label:t.lang("template_department"),hint:t.lang("select_template_department"),value:t.department_id,multiple:!1,onChange:t.onChange}}),t._v(" "),a("dynamic-select",{attrs:{id:"template_language",name:"template_language",classname:"col-sm-6",elements:t.languages,label:t.lang("template_language"),required:!0,multiple:!1,value:t.template_language,onChange:t.onChange}})],1)]),t._v(" "),t.isLoading?a("div",{staticClass:"row",attrs:{slot:"fields"},slot:"fields"},[a("loader",{attrs:{"animation-duration":4e3,color:"#1d78ff"}})],1):t._e(),t._v(" "),a("div",{attrs:{slot:"controls"},slot:"controls"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.onSubmit}},[t._v("\n                       "+t._s(t.lang("create"))+"\n                    ")])])]):t._e()],1)},staticRenderFns:[]}},4417:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"template-set-list-index"}}),t._v(" "),a("div",{staticClass:"card card-light "},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title",attrs:{id:"template-set-index"}},[t._v(t._s(t.trans("list_of_templates_sets")))]),t._v(" "),a("div",{staticClass:"card-tools"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("create_set"),expression:"trans('create_set')"}],staticClass:"btn btn-tool",on:{click:t.toggleModal}},[a("i",{staticClass:"glyphicon glyphicon-plus"})])])]),t._v(" "),a("div",{staticClass:"card-body",attrs:{id:"template-set-list"}},[a("data-table",{attrs:{url:t.apiUrl,dataColumns:t.columns,option:t.options,scroll_to:"template-set-index"}})],1)]),t._v(" "),a("transition",{attrs:{name:"modal"}},[t.showModal?a("template-set-create-modal",{attrs:{showModal:t.showModal,onClose:t.onClose,languages:t.languages,apiUrl:t.apiUrl}}):t._e()],1)],1)},staticRenderFns:[]}},4418:function(t,e,a){var n=a(0)(a(4419),a(4420),!1,null,null,null);t.exports=n.exports},4419:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),s=a.n(n),i=a(15),l=a.n(i),o=(a(7),a(4)),r=a(6);l.a.component("table-actions",a(20)),e.default={name:"templates-list-index",data:function(){return{plugin:null,id:null,channel:"",pageLoadnig:!0,list:[]}},beforeMount:function(){var t=new URL(location.href);this.plugin=t.searchParams.get("plugin"),this.id=Object(o.p)(window.location.pathname),this.channel=location.href.substring(location.href.indexOf("channels/")+9,location.href.indexOf("/template-sets")),this.getTemplatesList()},methods:{getTemplatesList:function(){var t=this,e="notify/api/templates?set_id="+this.id+(this.plugin?"&plugin="+this.plugin:"");s.a.get(e).then(function(e){t.list=e.data.data,t.pageLoadnig=!1,Object(r.b)(e,"template-edit")}).catch(function(e){t.pageLoadnig=!1,Object(r.a)(e,"template-edit")})}},components:{alert:a(5),"custom-loader":a(9),loader:a(8),"tool-tip":a(22)}}},4420:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"templates-list-index"}}),t._v(" "),t.pageLoadnig?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:4e3}})],1):a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans("templates")))])]),t._v(" "),0==t.list.length?a("div",{staticClass:"card-body"},[a("center",[a("p",[t._v(t._s(t.trans("no_data_found")))])])],1):a("div",{staticClass:"card-body"},[a("ul",{staticClass:"nav nav-tabs",attrs:{id:"custom-content-below-tab",role:"tablist"}},t._l(t.list,function(e,n,s){return a("li",{class:["nav-item"]},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans(n+"_desc_key"),expression:"trans(name+'_desc_key')"}],class:["nav-link",0===s?"active":""],attrs:{id:n+"-tab","data-toggle":"pill",href:"#"+n,role:"tab","aria-controls":n,"aria-selected":"true"}},[t._v(t._s(t.trans(n+"_lang_key")))])])}),0),t._v(" "),a("div",{staticClass:"tab-content",attrs:{id:"custom-content-below-tabContent"}},t._l(t.list,function(e,n,s){return a("div",{class:["tab-pane","fade",0===s?"active show":""],attrs:{id:n,role:"tabpanel","aria-labelledby":n}},[a("table",{staticClass:"table table-bordered table-condensed"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v(t._s(t.trans("name")))]),t._v(" "),a("th",{staticStyle:{width:"70%"}},[t._v(t._s(t.trans("description")))]),t._v(" "),a("th",{staticStyle:{width:"10%"}},[t._v(t._s(t.trans("actions")))])])]),t._v(" "),a("tbody",t._l(e,function(e){return a("tr",[a("td",{staticStyle:{width:"20%"}},[t._v(t._s(t.trans(e.template)))]),t._v(" "),a("td",{staticStyle:{width:"70%"}},[t._v(t._s(t.trans(e.desc_lang_key)))]),t._v(" "),a("td",{staticStyle:{width:"10%"}},[a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("edit"),expression:"trans('edit')"}],staticClass:"btn btn-primary",attrs:{to:"/notify/manage/channels/"+t.channel+"/template-sets/"+t.id+"/templates/"+e.templates[0].id}},[a("i",{staticClass:"fas fa-edit"})])],1)])}),0)])])}),0)])])],1)},staticRenderFns:[]}},4421:function(t,e,a){var n=a(0)(a(4422),a(4423),!1,null,null,null);t.exports=n.exports},4422:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(6),s=a(4),i=a(3),l=a.n(i),o=a(11),r=a(16);var c=a(9),d=a.n(c);e.default={name:"template-edit",data:function(){return{template:null,id:null,showsubject:!1,isDisabled:!1,loading:!1,variable:!1,name:"",content:"",subject:""}},beforeMount:function(){this.id=Object(s.p)(window.location.pathname),this.getTemplateDetails()},methods:{getTemplateDetails:function(){var t=this;this.toggleLoaders(!0),l.a.get("/notify/api/get-template/"+this.id).then(function(e){t.template=e.data.data,t.showsubject=1==t.template.variable,t.name=t.template.name,t.subject=t.template.subject,t.content=t.template.content,t.variable=1==t.template.variable,t.toggleLoaders(!1),Object(n.b)(e,"template-edit")}).catch(function(e){t.toggleLoaders(!1),Object(n.a)(e,"template-edit")})},onChange:function(t,e){this[e]=t},submit:function(){var t=this;if(this.isValidInputs()){this.toggleLoaders(!0);var e={subject:this.subject,variable:this.variable,content:this.content};l.a.patch("notify/api/update-template/"+this.id,e).then(function(e){t.toggleLoaders(!1),Object(n.b)(e,"template-edit")}).catch(function(e){t.toggleLoaders(!1),Object(n.a)(e,"template-edit")})}},toggleLoaders:function(t){this.loading=t,this.isDisabled=t},isValidInputs:function(){var t=function(t){var e={subject:[t.subject,"isRequired"],content:[t.content,"isRequired"]},a=new r.Validator(s.u).validate(e),n=a.errors,i=a.isValid;return o.a.dispatch("setValidationError",n),{errors:n,isValid:i}}(this.$data);t.errors;return t.isValid}},components:{"text-field":a(12),alert:a(5),"tool-tip":a(22),"custom-loader":a(9),loader:d.a}}},4423:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"template-edit"}}),t._v(" "),t.loading?a("loader"):t._e(),t._v(" "),a("div",{staticClass:"card card-light"},[t.template?a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans(t.name)))])]):t._e(),t._v(" "),a("div",{staticClass:"card-body"},[t.template?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("p",{staticClass:"lead"},[t._v(t._s(t.trans(t.template.template_name)))])])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans("list-of-available-shot-codes")))]),t._v(" "),a("div",{staticClass:"card-tools"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("collapse-list"),expression:"trans('collapse-list')"}],staticClass:"btn btn-tool",attrs:{"data-card-widget":"collapse","data-toggle":"tooltip"}},[a("i",{staticClass:"fas fa-minus"})])])]),t._v(" "),a("div",{staticClass:"card-body col-md-12"},[a("div",{staticClass:"alert alert-info alert-dismissable"},[a("i",{staticClass:"fas  fa-info-circle"}),t._v(" "),a("span",[t._v(t._s(t.trans("template-short-code-tips")))]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-hidden":"true"}},[t._v("×")])]),t._v(" "),a("div",[t.template?a("ul",{staticClass:"list-inline"},t._l(t.template.shortCodes,function(e,n){return a("li",{staticClass:"list-inline-item",staticStyle:{width:"23%"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.trans(e),expression:"trans(description)",modifiers:{right:!0}}],attrs:{"data-placement":"right"}},[t._v(t._s(n))])])}),0):t._e()])])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 form-group"},[t.showsubject?a("text-field",{attrs:{label:t.trans("subject"),value:t.subject,type:"text",name:"subject",onChange:t.onChange,classname:"col-sm-6",required:!0}}):t._e(),t._v(" "),a("tiny-editor-with-validation",{attrs:{value:t.content,type:"text",onChange:t.onChange,name:"content",label:t.trans("content"),required:!0,classname:"col-sm-12 width55",lang:"en",convertURLs:!1}})],1)])]),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitter",disabled:t.isDisabled},on:{click:t.submit}},[a("i",{staticClass:"fas fa-save",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.trans("submit"))+"\n            ")])])])],1)},staticRenderFns:[]}},4424:function(t,e,a){var n=a(0)(a(4427),a(4428),!1,function(t){a(4425)},"data-v-20ad01a0",null);t.exports=n.exports},4425:function(t,e,a){var n=a(4426);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("5b6d61c4",n,!0,{})},4426:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".active[data-v-20ad01a0]{color:#797a7a}.inactive[data-v-20ad01a0]{color:#c5c5c5}",""])},4427:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(6),s=a(4),i=a(3),l=a.n(i),o=a(9),r=a.n(o),c=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],n=!0,s=!1,i=void 0;try{for(var l,o=t[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){s=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={name:"alert-settings",data:function(){return{isDisabled:!1,loading:!1,alerts:null,setAlerts:null}},beforeMount:function(){this.id=Object(s.p)(window.location.pathname),this.getAlerts()},methods:{checkAlertIsSet:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<t.length;a++){var n=this.setAlerts[t[a].associate_id].join();if(n.includes(e))return!0;if(""!=n&&!e)return!0}return!1},onChange:function(t,e){t?this.enableAllChannelsForAlert(e):this.toggleAllChannelsForAlert(e,!0)},enableAllChannelsForAlert:function(t){for(var e=0;e<this.alerts[t].associates.length;e++)if(this.setAlerts[this.alerts[t].associates[e].associate_id].length>0)return!1;this.toggleAllChannelsForAlert(t,!1)},toggleAllChannelsForAlert:function(t,e){var a=this;this.alerts[t].allowedChannels.forEach(function(n){a.toggleChannelForAlert(e,a.alerts[t].associates,n.id)})},toggleChannelForAlert:function(t,e,a){var n=this;e.forEach(function(e){n.toggleChannel(t,e.associate_id,a)})},toggleChannel:function(t,e,a){var n=this.setAlerts[e].indexOf(a);n>-1&&this.setAlerts[e].splice(n,1),t||this.setAlerts[e].push(a)},toggleLoaders:function(t){this.loading=t,this.isDisabled=t},updateSetAlerts:function(){var t={},e=!0,a=!1,n=void 0;try{for(var s,i=Object.entries(this.alerts)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var l=s.value,o=c(l,2);o[0];o[1].associates.forEach(function(e){var a=[],n=e.associate_id;e.channels.length>0&&(a=e.channels),t[n]=a})}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}this.setAlerts=t},getAlerts:function(){var t=this;this.toggleLoaders(!0),l.a.get("/notify/api/base-alerts").then(function(e){t.alerts=e.data.data,t.updateSetAlerts(),t.toggleLoaders(!1),Object(n.b)(e,"alert-settings")}).catch(function(e){t.toggleLoaders(!1),Object(n.a)(e,"alert-settings")})},formatAlertFormData:function(){var t=[],e=function(e,a){var n={};n.associate=e,n.channels=[],a.forEach(function(t,e){n.channels[e]={channel_id:t}}),t.push(n)},a=!0,n=!1,s=void 0;try{for(var i,l=Object.entries(this.setAlerts)[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var o=i.value,r=c(o,2);e(r[0],r[1])}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}return t},submit:function(){var t=this;this.toggleLoaders(!0);var e={alerts:this.formatAlertFormData()};l.a.patch("notify/api/base-alerts",e).then(function(e){t.toggleLoaders(!1),Object(n.b)(e,"alert-settings")}).catch(function(e){t.toggleLoaders(!1),Object(n.a)(e,"alert-settings")})}},components:{alert:a(5),checkbox:a(39),"tool-tip":a(22),"custom-loader":a(9),"status-switch":a(35),loader:r.a}}},4428:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"alert-settings"}}),t._v(" "),t.loading?a("loader"):t._e(),t._v(" "),t.alerts?a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans("alerts")))])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 form-group"},[a("table",{staticClass:"table table-sm",staticStyle:{"text-align":"center"}},[a("tbody",t._l(t.alerts,function(e,n){return a("tr",{staticClass:"align-middle"},[a("td",{staticStyle:{"vertical-align":"middle",width:"5%"}},[a("status-switch",{attrs:{name:n,value:t.checkAlertIsSet(e.associates),classname:"btn-tool",onChange:t.onChange}})],1),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle",width:"10%"}},[a("table",{staticClass:"table table-borderless table-sm"},t._l(e.allowedChannels,function(n){return a("tr",[a("td",{staticStyle:{"vertical-align":"middle"}},[a("i",{class:[n.icon,t.checkAlertIsSet(e.associates,n.id)?"active":"inactive"],staticStyle:{"pointer-events":"initial",cursor:"pointer"},on:{click:function(a){t.toggleChannelForAlert(t.checkAlertIsSet(e.associates,n.id),e.associates,n.id)}}})])])}),0)]),t._v(" "),a("td",{staticStyle:{"vertical-align":"middle","text-align":"left"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.trans(e.name))+" "),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans(e.description),expression:"trans(alert.description)"}]},[a("i",{staticClass:"fas fa-info-circle"})])]),t._v(" "),a("td",[a("table",{staticClass:"table table-borderless table-sm"},t._l(e.associates,function(n){return a("tr",{staticStyle:{"width=":"100%"}},[a("td",{staticStyle:{"text-align":"right"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans(n.description),expression:"trans(person.description)"}]},[t._v(t._s(t.trans(n.name)))])]),t._v(" "),t._l(e.allowedChannels,function(e){return a("td",{staticStyle:{width:"5%","text-align":"left"}},[a("i",{class:[e.icon,t.setAlerts[n.associate_id].includes(e.id)?"active":"inactive"],staticStyle:{"pointer-events":"initial",cursor:"pointer"},attrs:{"aria-hidden":"true"},on:{click:function(a){t.toggleChannel(t.setAlerts[n.associate_id].includes(e.id),n.associate_id,e.id)}}})])})],2)}),0)])])}),0)])])])]),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitter",disabled:t.isDisabled},on:{click:t.submit}},[a("i",{staticClass:"fas fa-save",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.trans("submit"))+"\n            ")])])]):t._e()],1)},staticRenderFns:[]}},4429:function(t,e,a){var n=a(0)(a(4430),a(4431),!1,null,null,null);t.exports=n.exports},4430:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(11),s=a(16),i=a(4);var l=a(6),o=a(3),r=a.n(o);e.default={name:"inapp-settings",data:function(){return{pageLoad:!1,loading:!1,days_to_delete:"",showModal:!1,only_read:!1}},methods:{isValid:function(){var t=function(t){var e={days_to_delete:[t.days_to_delete,"isRequired",{"minValue(1)":"Invalid input."}]},a=new s.Validator(i.u).validate(e),l=a.errors,o=a.isValid;return n.a.dispatch("setValidationError",l),{errors:l,isValid:o}}(this.$data),e=(t.errors,t.isValid);return e},onChange:function(t,e){this[e]=t},onSubmit:function(){var t=this;if(this.isValid()){this.pageLoad=!0;var e={};e.days_to_delete=this.days_to_delete,e.only_read=this.only_read,r.a.delete("/api/clear-notifications",{data:e}).then(function(e){t.pageLoad=!1,Object(l.b)(e,"inapp-settings"),t.days_to_delete="",t.only_read=!1}).catch(function(e){t.pageLoad=!1,Object(l.a)(e,"inapp-settings")})}},triggerEvent:function(t){13===(t.which||t.keyCode)&&this.onSubmit()}},components:{loader:a(8),modal:a(10),alert:a(5),"number-field":a(29),checkbox:a(39),"custom-loader":a(9)}}},4431:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"inapp-settings"}}),t._v(" "),a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.trans("notification_settings")))])]),t._v(" "),a("div",{staticClass:"card-body"},[[a("div",{staticClass:"row"},[a("number-field",{attrs:{label:t.trans("noti_msg1"),value:t.days_to_delete,name:"days_to_delete",onChange:t.onChange,classname:"col-sm-6",keyupListener:t.triggerEvent,type:"number",required:!0,placeholder:"n",hint:t.trans("noti_msg2")}})],1),t._v(" "),a("div",{staticClass:"row"},[a("checkbox",{attrs:{id:"delete-read",name:"only_read",value:t.only_read,label:t.trans("delete_noti"),onChange:t.onChange,classname:"col-md-12",hint:t.trans("delete_only_read_tooltip")}})],1)]],2),t._v(" "),a("div",{staticClass:"card-footer"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.onSubmit()}}},[a("i",{staticClass:"fas fa-trash"}),t._v(" "+t._s(t.trans("delete"))+"\n\t\t\t\t")])])]),t._v(" "),t.pageLoad?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:4e3}})],1):t._e()],1)},staticRenderFns:[]}}},[4405]);