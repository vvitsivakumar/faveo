webpackJsonp([21],{4367:function(t,e,a){t.exports=a(4368)},4368:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(38),n=(a.n(i),a(11)),o=(a(58),a(27)),s=a(31),l=a.n(s),r=a(4369),c=a.n(r),d=a(4372),u=a.n(d),p=(a(24),{path:"/location",component:l.a,name:"Locations",redirect:"/location/list",children:[{path:"list",name:"Location Index",component:c.a,meta:{title:"location",crumb:{link:{name:"admin_panel",to:"/"},active:"location"}}},{path:"create",name:"Location Create",component:u.a,meta:{title:"location",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"location",to:"/location"},active:"create"}}},{path:":id/edit",name:"Location Edit",component:u.a,meta:{title:"location",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"location",to:"/location"},active:"edit"}}}]});o.a.addRoutes([p]),n.a.dispatch("deleteUser"),n.a.dispatch("updateUser");new Vue({el:"#app-location",store:n.a})},4369:function(t,e,a){var i=a(0)(a(4370),a(4371),!1,null,null,null);t.exports=i.exports},4370:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"locations-index",data:function(){return{columns:["title","phone","address","action"],apiUrl:"/api/location-list",options:{}}},beforeMount:function(){var t=this;this.options={headings:{action:"Actions"},texts:{filter:"",limit:""},templates:{phone:function(t,e){return e.phone?e.phone:"--"},address:function(t,e){return e.address?e.address:"--"},action:"data-table-actions"},sortable:["title","phone","address"],filterable:["title","phone","address"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter:function(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=e.data;return{data:a.data.locations.map(function(e){return e.edit_url="/location/"+e.id+"/edit",e.delete_url=t.basePath()+"/api/location/delete/"+e.id,e}),count:a.data.total}}}},components:{alert:a(5),"data-table":a(14),"faveo-box":a(17)}}},4371:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-12",attrs:{id:"locations-list"}},[e("alert",{attrs:{componentName:"dataTableModal"}}),this._v(" "),e("faveo-box",{attrs:{title:this.trans("list_of_locations")}},[e("div",{staticClass:"card-tools",attrs:{slot:"customActions"},slot:"customActions"},[e("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.trans("create_location"),expression:"trans('create_location')"}],staticClass:"btn btn-tool",attrs:{to:"/location/create"}},[e("i",{staticClass:"fas fa-plus"})])],1),this._v(" "),e("data-table",{attrs:{url:this.apiUrl,dataColumns:this.columns,option:this.options,scroll_to:"locations-list"}})],1)],1)},staticRenderFns:[]}},4372:function(t,e,a){var i=a(0)(a(4373),a(4374),!1,null,null,null);t.exports=i.exports},4373:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),n=a.n(i),o=a(6),s=a(4),l=a(11),r=a(16);e.default={name:"location-create-edit",description:"Location create edit page",data:function(){return{page_title:"create_location",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,location_id:"",title:"",phone:"",address:"",state_id:"",country_id:"",city:"",pincode:""}},computed:{stateEndpoint:function(){return this.country_id?"/api/dependency/states?supplements="+this.country_id.id:"/api/dependency/states?supplements="}},beforeMount:function(){var t=window.location.pathname;this.getValues(t)},methods:{getValues:function(t){var e=Object(s.p)(t);t.indexOf("edit")>=0?(this.page_title="edit_location",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(e)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues:function(t){var e=this;this.loading=!0,n.a.get("/api/location/"+t).then(function(t){e.loading=!1,e.hasDataPopulated=!0;var a=t.data.data.location;e.location_id=a.id,e.title=a.title,e.phone=a.phone,e.address=a.address,e.city=a.city,e.country_id=a.country,e.state_id=a.state,e.pincode=a.pin_code}).catch(function(t){e.loading=!1,Object(o.a)(t,"location-create-edit")})},isValid:function(){var t=function(t){var e=t.title,a=t.phone,i=t.address,n={title:[e,"isRequired",{"max(50)":"The title should be less than 50 characters."}],phone:[a,{"max(15)":"The phone should be less than 15 characters."}],pincode:[t.pincode,{"max(15)":"The pincode should be less than 15 characters."}],address:[i,{"max(50)":"The address should be less than 50 characters."}],city:[t.city,{"max(50)":"The city should be less than 50 characters."}]},o=new r.Validator(s.u).validate(n),c=o.errors,d=o.isValid;return l.a.dispatch("setValidationError",c),{errors:c,isValid:d}}(this.$data),e=(t.errors,t.isValid);return e},onChange:function(t,e){this[e]=t,"country_id"==e&&(this.state_id="")},onSubmit:function(){var t=this;if(this.isValid()){this.loading=!0;var e={};e.title=this.title,this.phone&&(e.phone=this.phone),this.address&&(e.address=this.address),this.country_id&&(e.country_id=this.country_id.id),this.state_id&&this.country_id&&(e.state_id=this.state_id.id),this.city&&(e.city=this.city),this.pincode&&(e.pincode=this.pincode);var a="/api/location";"edit_location"==this.page_title&&(a="/api/location-update/"+this.location_id),n.a.post(a,e).then(function(e){t.loading=!1,Object(o.b)(e,"location-create-edit"),t.location_id?t.getInitialValues(t.location_id):setTimeout(function(){t.$router.push({name:"Location Index"})},3e3)}).catch(function(e){t.loading=!1,Object(o.a)(e,"location-create-edit")})}},triggerEvent:function(t){13===(t.which||t.keyCode)&&this.onSubmit()}},components:{alert:a(5),"custom-loader":a(9),"text-field":a(12),"number-field":a(29),"dynamic-select":a(13),"faveo-box":a(17)}}},4374:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[!t.hasDataPopulated||t.loading?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:4e3}})],1):t._e(),t._v(" "),a("alert",{attrs:{componentName:"location-create-edit"}}),t._v(" "),t.hasDataPopulated?a("faveo-box",{attrs:{title:t.trans(t.page_title)}},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("title"),value:t.title,type:"text",name:"title",onChange:t.onChange,keyupListener:t.triggerEvent,classname:"col-sm-6",required:!0}}),t._v(" "),a("number-field",{attrs:{label:t.trans("phone"),value:t.phone,name:"phone",onChange:t.onChange,keyupListener:t.triggerEvent,classname:"col-sm-6",type:"number",required:!1}})],1),t._v(" "),a("div",{staticClass:"row"},[a("dynamic-select",{attrs:{label:t.trans("country"),multiple:!1,name:"country_id",classname:"col-sm-6",clearable:!!t.country_id,apiEndpoint:"/api/dependency/country-codes?limit=all",value:t.country_id,onChange:t.onChange,required:!1,strlength:"40"}}),t._v(" "),a("dynamic-select",{attrs:{label:t.trans("state"),multiple:!1,name:"state_id",classname:"col-sm-6",required:!1,strlength:"40",apiEndpoint:t.stateEndpoint,value:t.state_id,onChange:t.onChange,clearable:!!t.state_id,disabled:!t.country_id}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("city"),value:t.city,type:"text",name:"city",onChange:t.onChange,keyupListener:t.triggerEvent,classname:"col-sm-6",required:!1}}),t._v(" "),a("text-field",{attrs:{label:t.trans("pincode"),value:t.pincode,type:"text",name:"pincode",onChange:t.onChange,keyupListener:t.triggerEvent,classname:"col-sm-6",required:!1}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("address"),value:t.address,type:"textarea",name:"address",onChange:t.onChange,keyupListener:t.triggerEvent,classname:"col-sm-12"}})],1),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"submit_btn"},on:{click:function(e){return t.onSubmit()}}},[a("i",{class:t.iconClass}),t._v(" "+t._s(t.trans(t.btnName))+"\n\t\t\t\t")])])]):t._e()],1)},staticRenderFns:[]}}},[4367]);