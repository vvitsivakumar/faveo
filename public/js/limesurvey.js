webpackJsonp([26],{4375:function(t,e,s){t.exports=s(4376)},4376:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(11),a=s(27),i=s(31),r=s.n(i),l=s(4377),o=s.n(l),u=(s(24),{path:"/lime-survey",component:r.a,name:"LimeSurvey",redirect:"/lime-survey/settings",children:[{path:"settings",component:o.a,name:"LimeSurvey Settings",meta:{title:"limesurvey",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"limesurvey_settings"}}}]});a.a.addRoutes([u]),new Vue({el:"#lime-survey-settings",store:n.a})},4377:function(t,e,s){var n=s(0)(s(4378),s(4379),!1,null,null,null);t.exports=n.exports},4378:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),a=s.n(n),i=s(6),r=s(11),l=s(16),o=s(4);e.default={name:"lime-survey-settings",data:function(){return{loading:!0,survey_link:"",haspopulated:!1,statuses:[]}},beforeMount:function(){this.getLimeSurveyLink()},methods:{onChange:function(t,e){this[e]=t},getLimeSurveyLink:function(){var t=this;this.loading=!0,a.a.get("/lime-survey/api/get-survey-link").then(function(e){t.loading=!1,t.haspopulated=!0,t.survey_link=e.data.data.link||"",t.statuses=e.data.data.statuses}).catch(function(e){t.loading=!1,t.haspopulated=!1,Object(i.a)(e,"lime-survey-settings")})},isValid:function(){var t=function(t){var e={survey_link:[t.survey_link,"isRequired"]},s=new l.Validator(o.u).validate(e),n=s.errors,a=s.isValid;return r.a.dispatch("setValidationError",n),{errors:n,isValid:a}}(this.$data),e=(t.errors,t.isValid);return e},onSubmit:function(){var t=this;if(this.isValid()){this.loading=!0;var e={};e.survey_link=this.survey_link,this.statuses.length>0&&(e.statuses=this.statuses.map(function(t){return t.id})),a.a.post("/lime-survey/api/post-survey-link",e).then(function(e){Object(i.b)(e,"lime-survey-settings"),t.getLimeSurveyLink()}).catch(function(e){t.loading=!1,t.haspopulated=!0,Object(i.a)(e,"lime-survey-settings")})}}},components:{"text-field":s(12),"faveo-box":s(17),alert:s(5),"custom-loader":s(9),"dynamic-select":s(13)}}},4379:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-12"},[s("alert",{attrs:{componentName:"lime-survey-settings"}}),t._v(" "),t.loading?s("div",[s("custom-loader",{attrs:{loadingSpeed:4e3}})],1):t._e(),t._v(" "),t.haspopulated?s("faveo-box",{attrs:{title:t.trans("limesurvey_settings")}},[s("div",{staticClass:"row"},[s("text-field",{staticClass:"col-sm-12",attrs:{label:t.trans("survey_link"),type:"text",value:t.survey_link,name:"survey_link",required:!0,onChange:t.onChange}}),t._v(" "),s("dynamic-select",{attrs:{label:t.trans("select_status"),multiple:!0,name:"statuses",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/statuses",value:t.statuses,onChange:t.onChange,required:!1,hint:t.trans("limesurvey_settings_status_tooltip")}})],1),t._v(" "),s("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[s("button",{staticClass:"btn btn-primary",attrs:{slot:"actions",type:"button",disabled:t.loading},on:{click:function(e){return t.onSubmit()}},slot:"actions"},[s("i",{staticClass:"fa fa-save"}),t._v(" "+t._s(t.trans("save"))+"\n\t\t\t\t")])])]):t._e()],1)},staticRenderFns:[]}}},[4375]);