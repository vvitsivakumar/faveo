webpackJsonp([13],{307:function(t,e,a){var n=a(0)(a(3165),a(3166),!1,function(t){a(3163)},null,null);t.exports=n.exports},3155:function(t,e,a){t.exports=a(3156)},3156:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(11),s=a(27),i=a(31),o=a.n(i),l=a(3157),r=a.n(l),d=(a(24),{path:"/whatsapp",component:o.a,name:"Whatsapp",redirect:"/whatsapp/settings",children:[{path:"settings",component:r.a,name:"Whatsapp Settings",meta:{title:"whatsapp_config",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"whatsapp_settings"}}}]});s.a.addRoutes([d]),new Vue({el:"#whatsapp",store:n.a})},3157:function(t,e,a){var n=a(0)(a(3160),a(3171),!1,function(t){a(3158)},null,null);t.exports=n.exports},3158:function(t,e,a){var n=a(3159);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("054a7442",n,!0,{})},3159:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".whatsapp-action,.whatsapp-name,.whatsapp-number{max-width:250px;word-break:break-all}#whatsapp-view .VueTables .table-responsive{overflow-x:auto}#whatsapp-view .VueTables .table-responsive>table{width:-webkit-max-content;width:-moz-max-content;width:max-content;min-width:100%;max-width:-webkit-max-content;max-width:-moz-max-content;max-width:max-content;overflow:auto!important}.whatsapp-active{width:9%!important;word-break:break-all}.uri-copy{margin-top:30px}",""])},3160:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(15),s=a.n(n),i=a(17),o=a.n(i),l=a(273),r=a.n(l),d=a(54),p=a.n(d);s.a.component("whatsapp-table-actions",a(3161)),s.a.component("switch-whatsapp-action",a(3168)),e.default={name:"whatsapp-number-settings",data:function(){return{apiUrl:"whatsapp/api/WhatsappNumberList",columns:["name","business_phone","department.name","status","actions"],options:{},showModal:!1,title:"whatsapp_create",business_phone:"",copied:!1}},beforeMount:function(){var t=this;this.webhook_url=this.basePath()+"/whatsapp",this.options={headings:{name:"Name",business_phone:"Whatsapp Number",status:"Status","department.name":"Department",actions:"Actions"},columnsClasses:{name:"whatsapp-name",business_phone:"whatsapp-number",status:"whatsapp-active",department:"Department",actions:"whatsapp-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{status:"switch-whatsapp-action",actions:"whatsapp-table-actions"},requestAdapter:function(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=e.data;return{data:a.data.map(function(e){return e.delete_url=t.basePath()+"/whatsapp/api/WhatsappNumberDelete/"+e.id,e}),count:a.data.length}},sortable:[],filterable:!1,pagination:{chunk:5,nav:"fixed",edge:!0}}},methods:{onCopy:function(){var t=this;p()(this.webhook_url),this.copied=!0,setTimeout(function(){t.copied=!1},5e3)},addWhatsApp:function(){this.showModal=!0},onClose:function(){this.showModal=!1,this.$store.dispatch("unsetValidationError"),this.$store.dispatch("unsetAlert")}},components:{LabelCreateEdit:r.a,alert:a(5),"data-table":a(14),"Whatsapp-create-edit-modal":a(307),"faveo-box":o.a,"text-field":a(12)}}},3161:function(t,e,a){var n=a(0)(a(3162),a(3167),!1,null,null,null);t.exports=n.exports},3162:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"whatsapp-table-actions",props:{data:{type:Object,required:!0}},data:function(){return{showDeleteModal:!1,showEditModal:!1,title:"whatsapp_number_edit"}},methods:{onModal:function(t){this[t]=!0,this.$store.dispatch("unsetAlert")},onClose:function(){this.showEditModal=!1,this.showDeleteModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"delete-modal":a(45),"whatsapp-create-edit-modal":a(307)}}},3163:function(t,e,a){var n=a(3164);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("a04e495a",n,!0,{})},3164:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"#whatsapp-settings{max-height:400px;overflow-y:auto;overflow-x:hidden}",""])},3165:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(6),s=a(3),i=a.n(s),o=a(11),l=a(16),r=a(4);e.default={mixins:[{data:function(){return{template:"",password:"password",name:"",sid:"",token:"",business_phone:"",webhook_url:"",app_exists:!1,required:!0,loading:!1,isLoading:!1,loadingSpeed:4e3,elements_new_ticket:[{name:"One Day",value:1},{name:"Five Days",value:5},{name:"Ten Days",value:10},{name:"Fifteen Days",value:15},{name:"Thirty Days",value:30}],containerStyle:{width:"500px"},elements_is_image_inline:[{name:"Yes",value:1},{name:"No",value:0}],new_ticket_interval:{name:"One Day",value:"1"},is_image_inline:{name:"Yes",value:1}}},methods:{resetFields:function(){this.name="",this.sid="",this.token="",this.business_phone="",this.is_image_inline={name:"Yes",value:1},this.new_ticket_interval="",this.template=""}}}],name:"whatsapp-create-edit-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},title:{type:String,default:""},app_id:{type:String|Number,default:""}},data:function(){return{containerStyle:{width:"800px"},loading:!1,isDisabled:!1,name:"",auth_token:"",account_sid:"",department:"",iconClass:"fas fa-save",btnName:"save"}},beforeMount:function(){this.app_id&&(this.iconClass="fas fa-sync",this.btnName="update",this.getData())},methods:{getData:function(){var t=this;this.loading=!0,this.isDisabled=!0,i.a.get("/whatsapp/api/WhatsappNumberList/"+this.app_id).then(function(e){t.loading=!1,t.isDisabled=!1,t.name=e.data.data[0].name,t.token=e.data.data[0].token,t.sid=e.data.data[0].sid,t.business_phone=e.data.data[0].business_phone,t.is_image_inline=t.filterValues(t.elements_is_image_inline,e.data.data[0].is_image_inline),t.new_ticket_interval=t.filterValues(t.elements_new_ticket,e.data.data[0].new_ticket_interval),t.template=e.data.data[0].template,t.department=e.data.data[0].department.name}).catch(function(e){t.isDisabled=!1,t.loading=!1,Object(n.a)(e,"whatsapp-create-edit")})},filterValues:function(t,e){return t.filter(function(t){if(t.value==e)return t})[0]},onChange:function(t,e){this[e]=t},isValid:function(){var t=function(t){var e={name:[t.name,"isRequired"],sid:[t.sid,"isRequired"],token:[t.token,"isRequired"],business_phone:[t.business_phone,"isRequired"]},a=new l.Validator(r.u).validate(e),n=a.errors,s=a.isValid;return o.a.dispatch("setValidationError",n),{errors:n,isValid:s}}(this.$data),e=(t.erros,t.isValid);return e},onSubmit:function(){var t=this;if(this.isValid()){this.loading=!0,this.isDisabled=!0;var e={};e.token=this.token,e.name=this.name,e.business_phone=this.business_phone,e.is_image_inline=this.is_image_inline.value,e.new_ticket_interval=this.new_ticket_interval.value,e.sid=this.sid,e.template=this.template,e.dept_id=this.department?this.department.id:null,i.a.post("/whatsapp/api/createOrUpdate/"+this.app_id,e).then(function(e){t.loading=!1,t.isDisabled=!1,Object(n.b)(e,"whatsapp-create-edit"),setTimeout(function(){window.eventHub.$emit("refreshData"),t.onClose()},2e3)}).catch(function(e){t.isDisabled=!1,Object(n.a)(e,"whatsapp-create-edit"),t.loading=!1})}}},components:{modal:a(10),"text-field":a(12),alert:a(5),loader:a(8),"custom-loader":a(9),"dynamic-select":a(13),"data-table":a(14)}}},3166:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showModal?a("modal",{staticClass:"scrollable-area",attrs:{showModal:t.showModal,onClose:t.onClose,containerStyle:t.containerStyle}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.trans(t.title)))])]),t._v(" "),a("div",{attrs:{slot:"alert"},slot:"alert"},[a("alert",{attrs:{componentName:"whatsapp-create-edit"}})],1),t._v(" "),t.loading?t._e():a("div",{attrs:{slot:"fields",id:"whatsapp-settings"},slot:"fields"},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("name"),onChange:t.onChange,value:t.name,type:"text",name:"name",required:t.required,classname:"col-sm-6",hint:t.lang("name_hint"),id:"name"}}),t._v(" "),a("text-field",{attrs:{label:t.lang("account_sid"),onChange:t.onChange,value:t.sid,type:"text",name:"sid",required:t.required,classname:"col-sm-6",hint:t.lang("sid_hint"),id:"sid"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("auth_token"),onChange:t.onChange,value:t.token,type:"password",name:"token",required:t.required,classname:"col-sm-6",hint:t.lang("token_hint"),id:"token"}}),t._v(" "),a("text-field",{attrs:{label:t.lang("business_phone"),onChange:t.onChange,value:t.business_phone,type:"text",name:"business_phone",required:t.required,classname:"col-sm-6",hint:t.lang("business_phone_hint"),id:"business_phone"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("dynamic-select",{attrs:{name:"new_ticket_interval",classname:"col-sm-4",elements:t.elements_new_ticket,multiple:!1,prePopulate:!1,label:t.lang("new_ticket_interval"),value:t.new_ticket_interval,onChange:t.onChange,searchable:!1,clearable:!1}}),t._v(" "),a("dynamic-select",{staticStyle:{"margin-top":"auto"},attrs:{label:t.lang("which_department"),multiple:!1,name:"department",strlength:"40",classname:"col-sm-4",apiEndpoint:"/api/dependency/departments",value:t.department,onChange:t.onChange,clearable:!!t.department}}),t._v(" "),a("dynamic-select",{attrs:{name:"is_image_inline",classname:"col-sm-4",elements:t.elements_is_image_inline,multiple:!1,prePopulate:!1,label:t.lang("is_image_inline"),value:t.is_image_inline,onChange:t.onChange,searchable:!1,clearable:!1}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("approved_template_for_whatsapp"),onChange:t.onChange,value:t.template,type:"textarea",name:"template",classname:"col-sm-12",hint:t.lang("approved_template_hint"),id:"template",disabled:!0}})],1)]),t._v(" "),a("div",{attrs:{slot:"controls",id:"controls"},slot:"controls"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isDisabled},on:{click:function(e){return t.onSubmit()}}},[a("i",{class:t.iconClass}),t._v(" "+t._s(t.trans(t.btnName))+"\n    ")])]),t._v(" "),t.loading?a("div",{staticClass:"row",attrs:{slot:"fields"},slot:"fields"},[a("loader",{attrs:{"animation-duration":4e3,color:"#1d78ff",size:60}})],1):t._e()]):t._e()},staticRenderFns:[]}},3167:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.lang("edit"),expression:"lang('edit')"}],staticClass:"btn btn-default table_btn",on:{click:function(e){return t.onModal("showEditModal")}}},[a("i",{staticClass:"fas fa-edit"})]),t._v(" "),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.lang("delete"),expression:"lang('delete')"}],staticClass:"btn btn-default table_btn",on:{click:function(e){return t.onModal("showDeleteModal")}}},[a("i",{staticClass:"fas fa-trash"})]),t._v(" "),a("transition",{attrs:{name:"modal"}},[t.showEditModal?a("whatsapp-create-edit-modal",{attrs:{onClose:t.onClose,showModal:t.showEditModal,title:t.title,app_id:t.data.id}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"modal"}},[t.showDeleteModal?a("delete-modal",{attrs:{onClose:t.onClose,showModal:t.showDeleteModal,deleteUrl:t.data.delete_url}}):t._e()],1)],1)},staticRenderFns:[]}},3168:function(t,e,a){var n=a(0)(a(3169),a(3170),!1,null,null,null);t.exports=n.exports},3169:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(35),s=a.n(n),i=a(6);e.default={components:{"status-switch":s.a},props:["data"],methods:{onChange:function(t,e){this.statusChange(e)},statusChange:function(t){axios.get("whatsapp/api/status/"+t).then(function(t){Object(i.b)(t,"dataTableModal"),window.eventHub.$emit("refreshData")}).catch(function(t){Object(i.a)(t,"dataTableModal")})}}}},3170:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-group"},[e("status-switch",{key:Math.random(),attrs:{name:this.data.business_phone,value:this.data.active,onChange:this.onChange}})],1)},staticRenderFns:[]}},3171:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12"},[a("alert",{attrs:{componentName:"dataTableModal"}}),t._v(" "),a("faveo-box",{attrs:{title:t.trans("whats_app_number_list")}},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("webhook_url"),value:t.webhook_url,type:"text",name:"webhook_url",classname:"col-sm-5",hint:t.lang("webhook_url_hint"),id:"webhook_url",disabled:!0}}),t._v(" "),a("div",{staticClass:"col-sm-1"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.copied?t.trans("clipboard-copy-message"):t.trans("click-to-copy"),expression:"!copied ? trans('click-to-copy') : trans('clipboard-copy-message')"}],staticClass:"btn btn-default uri-copy",on:{click:function(e){return e.preventDefault(),t.onCopy()}}},[a("span",{class:t.copied?"fas fa-check text-green":"fa fa-clipboard",attrs:{id:"eye"}})])])],1),t._v(" "),a("div",{staticClass:"card-tools",attrs:{slot:"headerMenu"},slot:"headerMenu"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("add_whatsapp_number"),expression:"trans('add_whatsapp_number')"}],staticClass:"btn btn-tool",on:{click:function(e){return t.addWhatsApp()}}},[a("i",{staticClass:"fas fa-plus"})])]),t._v(" "),a("div",{attrs:{id:"whatsapp-view"}},[a("data-table",{attrs:{url:t.apiUrl,dataColumns:t.columns,option:t.options,scroll_to:"whatsapp-view"}})],1)]),t._v(" "),a("transition",{attrs:{name:"modal"}},[t.showModal?a("Whatsapp-create-edit-modal",{attrs:{onClose:t.onClose,showModal:t.showModal,title:t.title}}):t._e()],1)],1)},staticRenderFns:[]}}},[3155]);