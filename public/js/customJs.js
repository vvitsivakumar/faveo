webpackJsonp([19],{4354:function(t,e,a){t.exports=a(4355)},4355:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(11),s=a(27),i=a(31),r=a.n(i),o=a(4356),c=a.n(o),l=a(4359),u=a.n(l),m=(a(24),{path:"/custom-js",component:r.a,name:"CustomJS",redirect:"/custom-js/settings",children:[{path:"settings",component:c.a,name:"CustomJs Settings",meta:{title:"custom-js",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"custom-js"}}},{path:"create",component:u.a,name:"CustomJs Create",meta:{title:"custom-js",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-js",to:"/custom-js"},active:"create"}}},{path:"edit/:id",component:u.a,name:"CustomJs Edit",meta:{title:"custom-js",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-js",to:"/custom-js"},active:"edit"}}}]});s.a.addRoutes([m]),new Vue({el:"#custom-js",store:n.a})},4356:function(t,e,a){var n=a(0)(a(4357),a(4358),!1,null,null,null);t.exports=n.exports},4357:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(15),s=a.n(n),i=a(17),r=a.n(i),o=a(14),c=a.n(o),l=a(20),u=a.n(l),m=a(5),d=a.n(m),p=a(7),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};s.a.component("table-actions",u.a),e.default={name:"CustomCssIndex",components:{FaveoBox:r.a,DataTable:c.a,Alert:d.a},computed:h({},Object(p.b)(["formattedTime","formattedDate"])),data:function(){return{apiUrl:"get-custom-js",loading:!1,columns:["name","fired_at","fire","action"],options:{}}},methods:{addPage:function(){this.redirect("/custom-js/create")}},beforeMount:function(){var t=this;this.options={headings:{name:"Name",fired_at:"Fired at",fire:"Status",action:"Actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{fired_at:function(t,e){return e.formatted_fired_at?e.formatted_fired_at:e.fired_at},fire:function(t,e){return t("a",{},[t("span",{attrs:{class:e.fire?"btn btn-success btn-xs":"btn btn-danger btn-xs"}},e.fire?"Active":"Inactive")])},action:"table-actions"},requestAdapter:function(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=e.data;return{data:a.message.data.map(function(e){return e.delete_url=t.basePath()+"/custom-js/delete/"+e.id,e.edit_url="/custom-js/edit/"+e.id,e}),count:a.message.total}},sortable:["name","fired_at","fire"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0}}}}},4358:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main col-sm-12"},[e("alert",{attrs:{componentName:"dataTableModal"}}),this._v(" "),e("faveo-box",{attrs:{title:this.lang("custom-js")}},[e("div",{staticClass:"card-tools",attrs:{slot:"headerMenu"},slot:"headerMenu"},[e("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.lang("add"),expression:"lang('add')"}],staticClass:"btn btn-tool",attrs:{to:"/custom-js/create"}},[e("i",{staticClass:"fas fa-plus"})])],1),this._v(" "),e("div",{staticClass:"row",attrs:{id:"custom-js-view"}},[e("data-table",{staticClass:"col-sm-12",attrs:{url:this.apiUrl,dataColumns:this.columns,option:this.options,scroll_to:"custom-js-view"}})],1)])],1)},staticRenderFns:[]}},4359:function(t,e,a){var n=a(0)(a(4360),a(4361),!1,null,null,null);t.exports=n.exports},4360:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(26),s=a.n(n),i=a(12),r=a.n(i),o=a(17),c=a.n(o),l=a(19),u=a.n(l),m=a(3),d=a.n(m),p=a(5),h=a.n(p),f=a(9),v=a.n(f),g=a(6),b=a(25),_=a.n(b);function j(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(s,i){try{var r=e[s](i),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}e.default={name:"CustomJsCreateEdit",components:{"text-field":r.a,"faveo-box":c.a,"radio-button":u.a,alert:h.a,loader:v.a,"static-select":_.a},data:function(){return{name:"",fired_at:"",firedAtElements:[{id:"adminlayout",name:this.lang("adminlayout")},{id:"agentlayout",name:this.lang("agentlayout")},{id:"clientlayout",name:this.lang("clientlayout")}],radioOptions:[{name:"Active",value:1},{name:"Inactive",value:0}],isDisabled:!1,script:"",fire:1,loading:!1,idForEdit:0,parameter:"",parameterElementsList:[]}},mounted:function(){this.idForEdit&&this.getDetailsForEdit()},beforeMount:function(){this.setparameterElementsList(),this.setDefaultProps()},computed:{componentTitle:function(){return this.idForEdit?this.lang("custom_js_edit"):this.lang("custom_js_create")},parameterElements:function(){return"adminlayout"==this.fired_at&&Object.keys(this.parameterElementsList).length?this.parameterElementsList.admin:"agentlayout"==this.fired_at&&Object.keys(this.parameterElementsList).length?this.parameterElementsList.agent:"clientlayout"==this.fired_at&&Object.keys(this.parameterElementsList).length?this.parameterElementsList.client:[]}},methods:{onChange:function(t,e){this[e]=t,"fired_at"==e&&(this.parameter="")},submit:function(){var t=j(s.a.mark(function t(){var e,a,n,i,r=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e=void 0,a=void 0,n={fired_at:this.fired_at,script:this.script,name:this.name,fire:this.fire,parameter:this.parameter},this.idForEdit?(e="custom-js/edit/"+this.idForEdit,a="PATCH"):(e="custom-js/create",a="POST"),t.prev=4,t.next=7,d.a.request({method:a,url:e,data:n});case 7:i=t.sent,this.$store.dispatch("unsetValidationError"),Object(g.b)(i,"customJs"),this.idForEdit?"adminlayout"==this.fired_at&&this.redirect(window.location.href.replace(this.basePath(),"")):"adminlayout"==this.fired_at?(this.redirect("/admin/custom-js/settings"),setTimeout(function(){r.$router.push({name:"CustomJs Settings"})},3e3)):setTimeout(function(){r.$router.push({name:"CustomJs Settings"})},3e3),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),Object(g.a)(t.t0,"customJs");case 16:return t.prev=16,this.loading=!1,t.next=20,this.getDetailsForEdit();case 20:return t.finish(16);case 21:case"end":return t.stop()}},t,this,[[4,13,16,21]])}));return function(){return t.apply(this,arguments)}}(),getDetailsForEdit:function(){var t=j(s.a.mark(function t(){var e,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("custom-js/details/"+this.idForEdit);case 3:e=t.sent,a=e.data,this.updateStatesWithData(a.data),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),updateStatesWithData:function(t){var e=this,a=this.$data;Object.keys(t).map(function(n){a.hasOwnProperty(n)&&(e[n]=t[n])})},setDefaultProps:function(){var t=location.href;if(t.includes("edit")){var e=t.split("/").length;this.idForEdit=t.split("/")[e-1]}},setparameterElementsList:function(){var t=j(s.a.mark(function t(){var e,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("custom-js/get-routes");case 3:e=t.sent,a=e.data,this.parameterElementsList=a.data,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}()}}},4361:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12",attrs:{id:"main"}},[a("alert",{attrs:{componentName:"customJs"}}),t._v(" "),t.loading?a("loader"):t._e(),t._v(" "),a("faveo-box",{attrs:{title:t.componentTitle}},[a("div",{staticClass:"row"},[a("text-field",{attrs:{name:"name",value:t.name,"on-change":t.onChange,label:t.lang("name"),type:"text",required:!0,classname:"col-sm-4"}}),t._v(" "),a("static-select",{attrs:{name:"fired_at",value:t.fired_at,"on-change":t.onChange,label:t.lang("fired_at"),elements:t.firedAtElements,required:!0,classname:"col-sm-4"}}),t._v(" "),a("static-select",{attrs:{name:"parameter",value:t.parameter,"on-change":t.onChange,label:t.lang("parameter"),elements:t.parameterElements,required:!0,classname:"col-sm-4",hint:t.lang("select_url_description")}})],1),t._v(" "),a("div",{staticClass:"row"},[a("radio-button",{attrs:{options:t.radioOptions,label:t.lang("fire-javascript"),name:"fire",value:t.fire,onChange:t.onChange,classname:"col-sm-4"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{value:t.script,name:"script",type:"textarea","on-change":t.onChange,classname:"col-sm-12",label:t.lang("script"),required:!0,rows:"6",hint:t.lang("customjs_script_hint")}})],1),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitter",disabled:t.isDisabled},on:{click:t.submit}},[a("i",{staticClass:"fas fa-save",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.lang("submit"))+"\n           ")])])])],1)},staticRenderFns:[]}}},[4354]);