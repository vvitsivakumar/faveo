import{_ as S,e as A,s as I,F as B,L as k,a as T,C as U,b as N,A as z,M as R,c as D,d as O}from"../chunks/bootstrap.js";import{a as b,r as u,c,b as P,d as h,w as x,T as j,F as C,o as i,e as p,f as s,t as f,g as v,h as H,i as K,v as q,n as Z,p as G,j as J,S as Q,k as W,l as X}from"../chunks/vendor.js";import{C as V,P as Y,M as ee,r as M}from"../chunks/clientRouter.js";import{B as te}from"../chunks/BarcodeModal.js";import{s as ae,F as se,f as oe}from"../chunks/FileManager.js";import{D as ne}from"../chunks/DataTableActions.js";import"../chunks/LoginLogs.js";import"../chunks/approvalTicketRules.js";const re={props:{layoutDetails:{type:Object,default:()=>{}},authInfo:{type:[Object,Array],default:()=>[]},is2faEnforced:{type:[Boolean,String,Number],default:""},isUpdatedVersion:{type:[Boolean,Number],default:!1},whiteLabel:{type:Boolean,default:!1}},data(){return{updatedAuth:this.authInfo,showModal:!1,linkStyle:{color:this.layoutDetails.portal.client_header_color},buttonStyle:{borderColor:this.layoutDetails.portal.client_button_border_color,backgroundColor:this.layoutDetails.portal.client_button_color}}},mixins:[ae],created(){window.emitter.on("updateProfileData",this.updateAuthData),window.emitter.on("updateEditData",this.updateUserDetails)},beforeMount(){this.getScripts("clientlayout"),this.updateFactor(),this.$store.dispatch("updateUserData",this.authInfo)},computed:{layout(){return this.$store.dispatch("clientLayoutActions",this.layoutDetails),this.layoutDetails}},watch:{$route(e,t){this.fireScripts(e.path),this.updateFactor(),this.$store.dispatch("unsetAlert")}},methods:{updateFactor(e){Array.isArray(this.updatedAuth.user_data)||this.is2faEnforced&&!this.updatedAuth.user_data.is_2fa_enabled&&(this.showModal=!0)},updateAuthData(e){this.updatedAuth=e,this.updateFactor()},onClose(e){(this.is2faEnforced&&this.updatedAuth.user_data.is_2fa_enabled||!this.is2faEnforced||e==="2faDone")&&(this.showModal=!1),this.$store.dispatch("unsetValidationError")},updateUserDetails(){this.$Progress.start(),b.get("/api/get-auth-info").then(e=>{this.updatedAuth=e.data.data,this.updateFactor(),this.$Progress.finish()}).catch(e=>{this.$Progress.fail()})}},components:{"barcode-modal":te}};function ie(e,t,a,m,o,r){const l=u("router-view"),d=u("barcode-modal");return i(),c(C,null,[o.showModal?h("",!0):(i(),P(l,{key:0,auth:o.updatedAuth,layout:r.layout,isUpdatedVersion:a.isUpdatedVersion,whiteLabel:a.whiteLabel},null,8,["auth","layout","isUpdatedVersion","whiteLabel"])),o.showModal?(i(),P(j,{key:1,name:"modal"},{default:x(()=>[p(d,{onClose:r.onClose,showModal:o.showModal,from:"client",color:a.layoutDetails.portal.client_header_color,buttonStyle:o.buttonStyle,linkStyle:o.linkStyle},null,8,["onClose","showModal","color","buttonStyle","linkStyle"])]),_:1})):h("",!0)],64)}const le=S(re,[["render",ie]]);const ce={props:{laravelConfig:{type:Object,default:()=>{}}},data(){return{inputArr:[{current:"first",next:"second",previous:null,value:""},{current:"second",next:"third",previous:"first",value:""},{current:"third",next:"forth",previous:"second",value:""},{current:"forth",next:null,previous:"third",value:""}],loading:!1,hasDataPopulated:!1,verify:!1}},beforeMount(){this.getValues()},methods:{getValues(){this.$Progress.start(),b.get("/api/licenseError").then(e=>{this.hasDataPopulated=!0,this.verify=!0,this.$Progress.finish()}).catch(e=>{this.$Progress.fail(),this.hasDataPopulated=!0,A(e,"License");var t=e.response.data.message;t.includes("not")||t.includes("expired")?this.verify=!0:this.redirect("/")})},handleBackspace(e){if(event.keyCode===8&&!e.value.length&&e.previous){const t=this.$refs[e.previous][0];t&&(t.setSelectionRange(this.$refs[e.previous][0].value.length,this.$refs[e.previous][0].value.length),t.focus())}},onInput(e){if(e.value.length===4&&e.next&&!this.$refs[e.next][0].value){let t=this.$refs[e.next][0];t.setSelectionRange(t.value.length,t.value.length),t.focus()}},onPaste(e){event.preventDefault();const t=event.clipboardData.getData("text/plain");if(!t)return;const a=this.sanitizeText(t),m=this.inputArr[e],r=4-m.value.length;m.value+=a.substring(0,r);let l=r;for(let d=e+1;d<this.inputArr.length&&l<a.length;d++){const y=this.inputArr[d],_=Math.min(4,a.length-l);y.value=a.substring(l,l+_),l+=_}this.focusNextField(e)},focusNextField(e){for(let t=e;t<this.inputArr.length;t++){const a=this.inputArr[t];if(!a.value||a.value.length!==4||!a.next){this.$nextTick(()=>this.focusField(t));break}}},focusField(e){const t=this.$refs[this.inputArr[e].current][0];t.focus(),t.selectionStart=t.value.length,t.selectionEnd=t.value.length},sanitizeText(e){return e.trim().replace(/[^A-Za-z0-9]/g,"")},isValid(){const{errors:e,isValid:t}=validateLicenseSettings(this.$data);return!!t},onSubmit(){if(this.$refs.licenseErrorPage.validate()){this.$Progress.start(),this.loading=!0;const e={};for(let t in this.inputArr)e[this.inputArr[t].current]=this.inputArr[t].value;b.post("/licenseVerification",e).then(t=>{this.loading=!1,I(t,"License"),this.redirect("/"),this.$Progress.finish()}).catch(t=>{this.loading=!1,A(t,"License"),this.$Progress.fail()})}}},components:{"client-panel-loader":V}},F=e=>(G("data-v-255758c7"),e=e(),J(),e),de={class:"row"},ue={id:"content",class:"site-content col-sm-12"},pe={key:0},he={key:1},fe={key:2,class:"hentry"},me={class:"entry-header text-center"},_e={class:"entry-title"},ge={class:"entry-content clearfix"},ve={class:"text-center"},ye=F(()=>s("a",{href:"https://billing.faveohelpdesk.com",target:"_blank"},"billing.faveohelpdesk.com",-1)),be={class:"text-center"},xe={class:"container text-center"},we=["name","id","onUpdate:modelValue","onInput","onPaste","onKeydown"],Ae={key:0,id:"dash"},Pe={class:"text-center"},Se=["disabled"],ke=F(()=>s("i",{class:"fa fa-save"},null,-1));function De(e,t,a,m,o,r){const l=u("client-panel-loader"),d=u("loader"),y=u("alert"),_=u("ValidationProvider"),L=u("ValidationObserver");return i(),c("div",de,[s("div",ue,[o.loading?(i(),c("div",pe,[p(l,{size:60})])):h("",!0),o.hasDataPopulated?h("",!0):(i(),c("div",he,[p(d,{size:60})])),p(y,{componentName:"License"}),o.verify?(i(),c("article",fe,[s("header",me,[s("h3",_e,f(e.lang("licenseCode")),1)]),s("div",ge,[s("p",ve,[v(f(e.lang("find_your_license_code"))+" ",1),ye]),s("p",be,[s("b",null,f(e.lang("please_enter_your_license_code_for"))+" "+f(a.laravelConfig),1)]),p(L,{ref:"licenseErrorPage",onSubmit:r.onSubmit},{default:x(({values:Me,errors:Fe,validate:Le})=>[s("p",xe,[(i(!0),c(C,null,H(o.inputArr,(n,$)=>(i(),c("span",{key:n.current},[p(_,{name:n.current,rules:"required",modelValue:n.value,"onUpdate:modelValue":w=>n.value=w},{default:x(({field:w,errorMessage:E,meta:$e,classes:Ee})=>[K(s("input",{class:Z(["form-control inline_block text-uppercase",E?"field-danger":""]),type:"text",name:n.current,id:n.current,ref_for:!0,ref:n.current,"onUpdate:modelValue":g=>n.value=g,onInput:g=>r.onInput(n),maxlength:"4",size:"4",onPaste:g=>r.onPaste($),onKeydown:g=>r.handleBackspace(n)},null,42,we),[[q,n.value]]),v("  "),n.next?(i(),c("span",Ae,"-")):h("",!0),v("  ")]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]))),128))]),s("p",Pe,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.invalid,id:"validate_license"},[ke,v(" "+f(e.lang("submit")),1)],8,Se)])]),_:1},8,["onSubmit"])])])):h("",!0)])])}const Ce=S(ce,[["render",De],["__scopeId","data-v-255758c7"]]);app.component("star-rating",Q);app.component("fulfilling-bouncing-circle-spinner",W);const Ve=X();app.use(Ve);app.component("faveo-image-element",B);app.component("reuse-loader",k);app.component("faveo-box",T);app.component("loader",k);app.component("custom-loader",U);app.component("client-panel-renderer",le);app.component("client-panel-loader",V);app.component("reset-password",Y);app.component("meta-component",ee);app.component("license-error",Ce);app.component("form-renderer",N);app.component("alert",z);app.component("modal",R);app.component("data-table",ne);app.config.globalProperties.$filters={truncate(e,t){return e.length>t?e.substr(0,t-1)+"…":e}};setTimeout(()=>{app.use(M),app.use(D),app.mount("#app-client-panel")},1e3);window.addRoutes=e=>{M.addRoutes(e)};app.component("file-manager",se);D.registerModule("fm",oe);app.component("file-manager-container",O);
