import{_ as u,b as h,A as g,M as b,C as E,L as w,a as y,F as M,c as i,d as F}from"../chunks/bootstrap.js";import{r as l,c as _,b as d,d as p,w as C,T as A,F as I,o as s,e as S,S as B}from"../chunks/vendor.js";import{B as v}from"../chunks/BarcodeModal.js";import{s as P,F as x,f as L}from"../chunks/FileManager.js";import{R as V}from"../chunks/FormGenerator.js";import{C as T}from"../chunks/Loader.js";import{D as R}from"../chunks/DataTableActions.js";import{r}from"../chunks/agentRouter.js";import"../chunks/AdminNavigationBar.js";import"../chunks/HelpSection.js";import"../chunks/LoginLogs.js";import"../chunks/TicketsIndex.js";import"../chunks/approvalTicketRules.js";import"../chunks/PermaLink.js";const k={props:{authInfo:{type:Object,default:()=>{}},companyInfo:{type:Object,default:()=>{}},portalInfo:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},dummyInstall:{type:[Boolean,String],default:""},isMailConfigured:{type:[Boolean,String],default:""},is2faEnforced:{type:[Boolean,String],default:""},is2faEnabled:{type:[Boolean,String],default:""},isUpdatedVersion:{type:[Boolean,Number],default:!1}},data(){return{updatedAuth:this.authInfo,updatedPortal:this.portalInfo,isFactorEnable:this.is2faEnabled,showModal:!1,agentScripts:[]}},mixins:[P],watch:{$route(t,a){this.fireScripts(t.path,"agentlayout"),this.is2faEnforced&&!this.isFactorEnable&&(this.showModal=!0),this.$store.dispatch("unsetAlert"),this.$store.dispatch("unsetValidationError")}},beforeMount(){this.getScripts("agentlayout"),this.is2faEnforced&&!this.isFactorEnable&&(this.showModal=!0)},created(){window.emitter.on("updateAgentProfile",this.updateProfile),window.emitter.on("updateEditData",this.updateFactor)},methods:{updateFactor(t){this.isFactorEnable=t,this.is2faEnforced&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateProfile(t){Object.keys(this.updatedAuth.user_data).forEach(a=>this.updatedAuth.user_data[a]=t[a]||this.updatedAuth.user_data[a])},onClose(t){(this.is2faEnforced&&this.isFactorEnable||!this.is2faEnforced||t==="2faDone")&&(this.showModal=!1),this.$store.dispatch("unsetValidationError")}},components:{"barcode-modal":v}};function U(t,a,e,n,o,c){const f=l("router-view"),m=l("barcode-modal");return s(),_(I,null,[o.showModal?p("",!0):(s(),d(f,{key:0,auth:o.updatedAuth,company:e.companyInfo,portal:e.portalInfo,whiteLabel:e.whiteLabel,tag:e.tag,version:e.version,dummyInstall:e.dummyInstall,isMailConfigured:e.isMailConfigured,isFAEnforced:e.is2faEnforced,isFAEnabled:e.is2faEnabled,isUpdatedVersion:e.isUpdatedVersion},null,8,["auth","company","portal","whiteLabel","tag","version","dummyInstall","isMailConfigured","isFAEnforced","isFAEnabled","isUpdatedVersion"])),o.showModal?(s(),d(A,{key:1,name:"modal"},{default:C(()=>[S(m,{onClose:c.onClose,showModal:o.showModal},null,8,["onClose","showModal"])]),_:1})):p("",!0)],64)}const j=u(k,[["render",U]]);app.component("star-rating",B);app.component("agent-panel-renderer",j);app.component("form-renderer",h);app.component("recurring-tickets-index",V);app.component("alert",g);app.component("modal",b);app.component("loader",T);app.component("custom-loader",E);app.component("reuse-loader",w);app.component("faveo-box",y);app.component("faveo-image-element",M);app.component("data-table",R);r.beforeEach((t,a,e)=>{if(sessionStorage.getItem("user_role")!="user")e();else{let n=window.axios.defaults.baseURL;t.fullPath.includes("/thread/")&&(n+=t.fullPath),window.location.href=n}});i.dispatch("setRatingTypes");setTimeout(()=>{app.use(r),app.use(i),app.mount("#app-agent")},1e3);r.beforeEach((t,a,e)=>{app.config.globalProperties.$Progress.start(),e()});r.afterEach(()=>{setTimeout(()=>{app.config.globalProperties.$Progress.finish()},1e3)});app.component("file-manager",x);i.registerModule("fm",L);app.component("file-manager-container",F);
