import{_ as g,e as d,s as k,R as q}from"../chunks/bootstrap.js";import{r as v,A as b}from"../chunks/adminRouter.js";import{a as u,r as n,o as a,c as s,e as c,f as r,t as _,d as i,g as y}from"../chunks/vendor.js";import"../chunks/FormGenerator.js";import"../chunks/AdminNavigationBar.js";import"../chunks/DataTableActions.js";import"../chunks/HelpSection.js";const C={name:"crt-workflow-settings",data(){return{hasDataPopulated:!1,loading:!0,pageLoad:!1,crtworkflow_requester_and_cc:"",ccOptions:[{name:"yes",value:1},{name:"no",value:0}],reqOptions:[{name:"ticket_requester_and_cc",value:"ticket_requester_and_cc"},{name:"recur_requester_and_cc",value:"recur_requester_and_cc"}]}},beforeMount(){this.getValues()},methods:{getValues(){u.get("/api/crtworkflow/settings").then(e=>{this.hasDataPopulated=!0,this.loading=!1,this.crtworkflow_requester_and_cc=e.data.data.crtworkflow_requester_and_cc}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,d(e,"crt")})},onChange(e,t){this[t]=e},onSubmit(){let e={};e.crtworkflow_requester_and_cc=this.crtworkflow_requester_and_cc,this.pageLoad=!0,u.post("/api/crtworkflow/settings",e).then(t=>{this.pageLoad=!1,k(t,"crt"),this.getValues()}).catch(t=>{this.pageLoad=!1,d(t,"crt")})}},components:{"radio-button":q}},D={class:"col-sm-12"},L={class:"card card-light"},P={class:"card-header"},R={class:"card-title"},V={class:"card-body"},S={key:0,class:"row"},N={key:1,class:"row"},T={key:0,class:"card-footer"},B=r("i",{class:"fas fa-sync-alt"},null,-1),O={key:0,class:"row"};function W(e,t,M,j,o,l){const p=n("alert"),m=n("reuse-loader"),h=n("radio-button"),f=n("custom-loader");return a(),s("div",D,[c(p,{componentName:"crt"}),r("div",L,[r("div",P,[r("h3",R,_(e.trans("settings")),1)]),r("div",V,[!o.hasDataPopulated||o.loading?(a(),s("div",S,[c(m,{"animation-duration":4e3,size:60})])):i("",!0),o.hasDataPopulated?(a(),s("div",N,[c(h,{options:o.reqOptions,label:e.trans("select_requester_of_ticket"),name:"crtworkflow_requester_and_cc",value:o.crtworkflow_requester_and_cc,onChange:l.onChange,classname:"form-group col-sm-12",hint:e.trans("crtworkflow_requester_and_cc_tooltip")},null,8,["options","label","value","onChange","hint"])])):i("",!0)]),o.hasDataPopulated?(a(),s("div",T,[r("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>l.onSubmit&&l.onSubmit(...w))},[B,y(" "+_(e.trans("update")),1)])])):i("",!0)]),o.pageLoad?(a(),s("div",O,[c(f,{duration:4e3})])):i("",!0)])}const A=g(C,[["render",W]]);let H={path:"/crtworkflow",component:b,name:"CRTWorkflow",redirect:"/crtworkflow/settings",children:[{path:"settings",component:A,name:"CRTWorkflow Settings",meta:{title:"crtworkflow_settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"crtworkflow"}}}]};v.addRoute(H);window.emitter.on("workflow-action-dispatch",function(e){let t={default:1,title:"RecurTicket",display_for_agent:!0,required_for_agent:!0,label:"Create recur ticket",value:"",type:"select",unique:"recur_list_ids",options:[],api_info:"url:=api/dependency/recur-tickets??paginate=true"};e.push(t)});
