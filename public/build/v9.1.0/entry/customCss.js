import{_ as v,j as x,R as F,S as A,s as S,e as T}from"../chunks/bootstrap.js";import{r as q,A as P}from"../chunks/adminRouter.js";import{a as B}from"../chunks/DataTableActions.js";import{r as n,q as C,o as r,c as f,e as i,w as m,f as c,i as y,b as E,a as g,d as N,g as O,t as M}from"../chunks/vendor.js";import"../chunks/FormGenerator.js";import"../chunks/AdminNavigationBar.js";import"../chunks/HelpSection.js";const V={name:"CustomCssIndex",data(){return{apiUrl:"get-custom-css",loading:!1,columns:["name","fired_at","fire","action"],options:{}}},beforeMount(){const t=this;this.options={headings:{name:t.lang("name"),fired_at:t.lang("fired_at"),fire:t.lang("status"),action:t.lang("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{fire:function(e,s){if(s.fire==1)return t.h("span",{class:"btn btn-success btn-xs"},"Active");if(s.fire==0)return t.h("span",{class:"btn btn-danger btn-xs"},"Inactive")},fired_at:function(e,s){return s.formatted_fired_at?s.formatted_fired_at:s.fired_at},action:(e,s)=>t.h(B,{data:s})},requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"id","sort-order":e.ascending?"desc":"asc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.message.data.map(s=>(s.delete_url=t.basePath()+"/custom-css/delete/"+s.id,s.edit_url="/custom-css/edit/"+s.id,s)),count:e.message.total}},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0}}}},I={class:"main col-sm-12"},L={class:"card-tools"},j=c("i",{class:"glyphicon glyphicon-plus"},null,-1),H={class:"row",id:"custom-css-view"};function R(t,e,s,o,a,l){const d=n("alert"),p=n("router-link"),u=n("data-table"),_=n("faveo-box"),h=C("tooltip");return r(),f("div",I,[i(d,{componentName:"dataTableModal"}),i(_,{title:t.lang("custom-css")},{headerMenu:m(()=>[c("div",L,[y((r(),E(p,{class:"btn btn-tool",to:"/custom-css/create"},{default:m(()=>[j]),_:1})),[[h,t.lang("create_custom_css")]])])]),default:m(()=>[c("div",H,[i(u,{url:a.apiUrl,dataColumns:a.columns,option:a.options,scroll_to:"custom-css-view",class:"col-sm-12"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"])])}const U=v(V,[["render",R]]),W={name:"CustomCssCreateEdit",components:{"text-field":x,"radio-button":F,"static-select":A},data(){return{name:"",fired_at:"",firedAtElements:[{id:"adminlayout",name:"Admin Layout"},{id:"agentlayout",name:"Agent Layout"},{id:"clientlayout",name:"Client Layout"}],radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],isDisabled:!1,script:"",fire:1,loading:!1,idForEdit:0}},beforeMount(){this.setDefaultProps()},mounted(){this.idForEdit&&this.getDetailsForEdit()},computed:{componentTitle(){return this.idForEdit?this.lang("custom_css_edit"):this.lang("custom_css_create")}},methods:{setDefaultProps(){let t=location.href;if(t.includes("edit")){let e=t.split("/").length;this.idForEdit=t.split("/")[e-1]}},onChange(t,e){this[e]=t},async submit(){this.loading=!0;let t,e,s={fired_at:this.fired_at,script:this.script,name:this.name,fire:this.fire};this.idForEdit?(t=`custom-css/edit/${this.idForEdit}`,e="PATCH"):(t="custom-css/create",e="POST");try{let o=await g.request({method:e,url:t,data:s});this.$store.dispatch("unsetValidationError"),S(o,"customCss"),this.idForEdit?this.redirect(window.location.href.replace(this.basePath(),"")):this.fired_at=="adminlayout"?this.redirect("/admin/custom-css/settings"):setTimeout(()=>{this.$router.push({name:"CustomCss Settings"})},2e3)}catch(o){T(o,"customCss")}finally{this.loading=!1,await this.getDetailsForEdit()}},async getDetailsForEdit(){try{let{data:t}=await g.get(`custom-css/${this.idForEdit}`);this.updateStatesWithData(t.message)}catch{}},updateStatesWithData(t){const e=this,s=this.$data;Object.keys(t).map(o=>{s.hasOwnProperty(o)&&(e[o]=t[o])})}}},$={id:"main",class:"col-sm-12"},z={class:"row"},G={class:"row"},J={class:"card-footer"},K=["disabled"],Q=c("i",{class:"fas fa-save","aria-hidden":"true"},null,-1);function X(t,e,s,o,a,l){const d=n("alert"),p=n("custom-loader"),u=n("text-field"),_=n("static-select"),h=n("radio-button"),k=n("faveo-box"),D=C("focus-first-input");return r(),f("div",$,[i(d,{componentName:"customCss"}),a.loading?(r(),E(p,{key:0})):N("",!0),i(k,{title:l.componentTitle},{actions:m(()=>[c("div",J,[c("button",{type:"button",id:"submitter",onClick:e[0]||(e[0]=(...w)=>l.submit&&l.submit(...w)),class:"btn btn-primary",disabled:a.isDisabled},[Q,O(" "+M(t.lang("submit")),1)],8,K)])]),default:m(()=>[y((r(),f("div",z,[i(u,{name:"name",value:a.name,"on-change":l.onChange,placehold:t.lang("enter_a_value"),label:t.lang("name"),type:"text",required:!0,classname:"col-sm-4"},null,8,["value","on-change","placehold","label"]),i(_,{name:"fired_at",value:a.fired_at,"on-change":l.onChange,label:t.lang("fired_at"),elements:a.firedAtElements,required:!0,classname:"col-sm-4"},null,8,["value","on-change","label","elements"]),i(h,{options:a.radioOptions,label:t.lang("fire-css"),name:"fire",value:a.fire,onChange:l.onChange,classname:"col-sm-4"},null,8,["options","label","value","onChange"])])),[[D]]),c("div",G,[i(u,{value:a.script,name:"script",type:"textarea","on-change":l.onChange,placehold:t.lang("enter_a_value"),classname:"col-sm-12",label:t.lang("script"),required:!0,rows:"6"},null,8,["value","on-change","placehold","label"])])]),_:1},8,["title"])])}const b=v(W,[["render",X]]);let Y={path:"/custom-css",component:P,name:"CustomCSS",redirect:"/custom-css/settings",children:[{path:"settings",component:U,name:"CustomCss Settings",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"custom-css"}}},{path:"create",component:b,name:"CustomCss Create",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-css",to:"/custom-css"},active:"create"}}},{path:"edit/:id",component:b,name:"CustomCss Edit",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-css",to:"/custom-css"},active:"edit"}}}]};q.addRoute(Y);
