import{_ as w,s as C,e as f,R as V,V as P,l as I,c as g,k as S,j as W}from"../chunks/bootstrap.js";import{a as y,r as n,o as l,c as d,e as r,f as i,t as h,d as c,b as T,g as q,u as N,m as B,q as $,i as D,w as L,n as A}from"../chunks/vendor.js";import{r as M,A as U}from"../chunks/adminRouter.js";import{S as E,C as O}from"../chunks/FormGenerator.js";import{a as R}from"../chunks/DataTableActions.js";import"../chunks/HelpSection.js";import"../chunks/AdminNavigationBar.js";const z={name:"timetrack-settings",beforeMount(){this.getInitialValues()},data:()=>({additional:0,hasDataPopulated:!1,loading:!0,pageLoad:!1,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],require_thread_worktime:"",require_worktime_type_field:"",show_worktime_type_field:"",typeDisable:!1}),methods:{getInitialValues(){y.get("/time-track/get-settings").then(e=>{this.loading=!1,this.hasDataPopulated=!0,this.additional=e.data.data.additional?1:0,this.require_thread_worktime=e.data.data.require_thread_worktime?1:0,this.show_worktime_type_field=e.data.data.show_worktime_type_field?1:0,this.typeDisable=!this.show_worktime_type_field,this.require_worktime_type_field=e.data.data.require_worktime_type_field?1:0}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t==="show_worktime_type_field"&&(this.require_worktime_type_field=e?this.require_worktime_type_field:0,this.typeDisable=!e)},onSubmit(){this.pageLoad=!0;const e={};e.additional=this.additional?1:0,e.require_thread_worktime=this.require_thread_worktime,e.show_worktime_type_field=this.show_worktime_type_field?1:0,e.require_worktime_type_field=this.show_worktime_type_field?this.require_worktime_type_field:0,y.post("/time-track",e).then(t=>{this.pageLoad=!1,C(t),this.getInitialValues()}).catch(t=>{this.pageLoad=!1,f(t)})}},components:{"status-switch":E,"radio-button":V,checkbox:O}},F={class:"col-sm-12"},H={class:"card card-light"},j={class:"card-header"},G={class:"card-title"},J={class:"card-body"},K={key:0,class:"row"},Q={key:1,class:"row"},X={class:"card-footer"},Y=i("i",{class:"fas fa-save"},null,-1),Z={key:0,class:"row"};function x(e,t,a,k,o,s){const p=n("alert"),_=n("reuse-loader"),m=n("radio-button"),u=n("checkbox"),b=n("custom-loader");return l(),d("div",F,[r(p),i("div",H,[i("div",j,[i("h3",G,h(e.trans("time-track-settings")),1)]),i("div",J,[!e.hasDataPopulated||e.loading?(l(),d("div",K,[r(_,{"animation-duration":4e3,size:60})])):c("",!0),e.hasDataPopulated?(l(),d("div",Q,[r(m,{options:e.radioOptions,label:e.trans("timetype_visible"),name:"show_worktime_type_field",value:e.show_worktime_type_field,onChange:s.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),r(m,{options:e.radioOptions,label:e.trans("make_timetype_required"),name:"require_worktime_type_field",value:e.require_worktime_type_field,onChange:s.onChange,classname:"form-group col-sm-4",disabled:e.typeDisable},null,8,["options","label","value","onChange","disabled"]),r(m,{options:e.radioOptions,label:e.trans("worktime_field_required"),name:"require_thread_worktime",value:e.require_thread_worktime,onChange:s.onChange,classname:"form-group col-sm-4",hint:e.trans("require_thread_worktime_tooltip")},null,8,["options","label","value","onChange","hint"])])):c("",!0)]),i("div",X,[e.hasDataPopulated?(l(),T(u,{key:0,name:"additional",value:e.additional,label:e.lang("timetrack_application_level"),onChange:s.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])):c("",!0),i("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=Ce=>s.onSubmit())},[Y,q(" "+h(e.trans("save")),1)])])]),e.pageLoad?(l(),d("div",Z,[r(b,{duration:4e3})])):c("",!0)])}const ee=w(z,[["render",x]]);const te={name:"worktime-type-list",description:"Worktime type lists table component",setup(){const e=N();return{formattedTime:B(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","updated_at","action"],options:{},apiUrl:"/api/worktime-type-list?meta=1"}),beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},columnsClasses:{name:"worktime-type-name",created_at:"worktime-type-created",updated_at:"worktime-type-updated"},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:(t,a)=>e.h(R,{data:a})},sortable:["name","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/time-track/worktime-type/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/worktime-type/"+a.id,a)),count:t.data.total}}}}},ae={class:"col-sm-12"},ie={class:"card card-light worktime-type-table"},oe={class:"card-header"},se={id:"worktime-type-list",class:"card-title"},re={class:"card-tools"},ne=i("span",{class:"glyphicon glyphicon-plus"},null,-1),le={class:"card-body",id:"worktime-type-table"};function de(e,t,a,k,o,s){const p=n("alert"),_=n("router-link"),m=n("data-table"),u=$("tooltip");return l(),d("div",ae,[r(p,{componentName:"dataTableModal"}),i("div",ie,[i("div",oe,[i("h3",se,h(e.trans("list_of_worktime_types")),1),i("div",re,[D((l(),T(_,{class:"btn btn-tool",to:"/time-track/worktime-type/create"},{default:L(()=>[ne]),_:1})),[[u,e.trans("add-worktime-type")]])])]),i("div",le,[r(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"license-type-list"},null,8,["url","dataColumns","option"])])])])}const me=w(te,[["render",de]]);function ce(e){const{name:t}=e;var a={name:[t,"isRequired"]};const k=new P(I),{errors:o,isValid:s}=k.validate(a);return g.dispatch("setValidationError",o),{errors:o,isValid:s}}const pe={name:"worktime-type-create-edit",data(){return{title:"create_worktime_type",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,worktime_type_id:"",name:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=S(e);t?(this.title="edit_worktime_type",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,y.get("/api/worktime-type/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.name=t.data.data.name,this.worktime_type_id=t.data.data.id}).catch(t=>{this.loading=!1,f(t,"worktime-type-create-edit"),setTimeout(()=>{this.$router.push({name:"WorktimeType Index"})},3e3)})},isValid(){const{errors:e,isValid:t}=ce(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name;let t="/api/worktime-type/"+this.worktime_type_id;y.post(t,e).then(a=>{this.loading=!1,C(a,"worktime-type-create-edit"),this.worktime_type_id||setTimeout(()=>{this.$router.push({name:"WorktimeType Index"})},3e3)}).catch(a=>{this.loading=!1,f(a,"worktime-type-create-edit")})}}},components:{"text-field":W}},_e={class:"col-sm-12"},ue={key:0,class:"row"},he={key:1,class:"card card-light"},ke={class:"card-header"},ye={class:"card-title"},fe={class:"card-body"},we={class:"row"},ge={class:"card-footer"};function be(e,t,a,k,o,s){const p=n("custom-loader"),_=n("alert"),m=n("text-field"),u=$("focus-first-input");return l(),d("div",_e,[!o.hasDataPopulated||o.loading?(l(),d("div",ue,[r(p,{duration:4e3})])):c("",!0),r(_,{componentName:"worktime-type-create-edit"}),o.hasDataPopulated?(l(),d("div",he,[i("div",ke,[i("h3",ye,h(e.trans(o.title)),1)]),i("div",fe,[D((l(),d("div",we,[r(m,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:s.onChange,classname:"col-sm-6",required:!0},null,8,["label","value","onChange"])])),[[u]])]),i("div",ge,[i("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=b=>s.onSubmit())},[i("i",{class:A(o.iconClass)},null,2),q(" "+h(e.trans(o.btnName)),1)])])])):c("",!0)])}const v=w(pe,[["render",be]]);let ve={path:"/time-track",component:U,name:"TimeTrack",redirect:"/time-track/settings",children:[{path:"settings",component:ee,name:"TimeTrack Settings",meta:{title:"time-track",crumb:{link:{name:"admin_panel",to:"/"},active:"time-track"}}},{path:"worktime-type",component:me,name:"WorktimeType Index",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},active:"worktime_type"}}},{path:"worktime-type/create",component:v,name:"WorktimeType Create",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"worktime_type",to:"/time-track/worktime-type"},active:"create"}}},{path:"worktime-type/:id/edit",component:v,name:"WorktimeType Edit",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"worktime_type",to:"/time-track/worktime-type"},active:"edit"}}}]};M.addRoute(ve);g.dispatch("deleteUser");g.dispatch("updateUser");
