import{V as z,l as w,c as S,_ as y,S as V,R as q,j as D,D as N,s as R,e as Z}from"../chunks/bootstrap.js";import{a1 as t,r as v,q as B,o as k,c as f,e as r,f as d,i as A,n as E,g as H,t as O,a as P}from"../chunks/vendor.js";import{r as T,A as j}from"../chunks/adminRouter.js";import"../chunks/FormGenerator.js";import"../chunks/AdminNavigationBar.js";import"../chunks/DataTableActions.js";import"../chunks/HelpSection.js";function F(n){const{username:c,password:l,domain:e}=n;let i={username:[c,"isRequired"],password:[l,"isRequired"],domain:[e,"isRequired"]};const u=new z(w),{errors:o,isValid:a}=u.validate(i);return S.dispatch("setValidationError",o),{errors:o,isValid:a}}const L={name:"ZendeskSettings",components:{StaticSelect:V,RadioButton:q,TextField:D,DynamicSelect:N},setup(){const n=t(""),c=t("save"),l=t(""),e=t(""),i=t(""),u=t("fas fa-save"),o=t([]),a=t(0),g=t([{name:"Enable",value:1},{name:"Disable",value:0}]),m=t(!1),p=(h,s)=>{s in b&&(b[s].value=h)},_=()=>{const{errors:h,isValid:s}=F({username:n.value,password:l.value,domain:e.value,createdat_number:i.value,zendesk_status:o.value,status:a.value});return s},C=()=>{if(_()){m.value=!0;const h={username:n.value,password:l.value,domain:e.value,konwledge_base:a.value,created_at:i.value,status:o.value.map(s=>s.id)};P.post("/zendesk/credentials/store",h).then(s=>{m.value=!1,R(s,"zendesk")}).catch(s=>{m.value=!1,Z(s,"zendesk")})}},b={username:n,password:l,domain:e,createdat_number:i,zendesk_status:o,status:a};return{username:n,btnName:c,password:l,domain:e,createdat_number:i,iconClass:u,zendesk_status:o,status:a,radioOptions:g,loading:m,zendeskStatus:[{id:"new",name:"New"},{id:"open",name:"Open"},{id:"pending",name:"Pending"},{id:"hold",name:"Hold"},{id:"solved",name:"Solved"},{id:"closed",name:"Closed"}],onChange:p,onSubmit:C}}},M={class:"col-sm-12"},G={class:"card card-light"},I={class:"card-body"},J={class:"row"},K={class:"row"},Q={class:"row"},U={class:"card-footer"};function W(n,c,l,e,i,u){const o=v("alert"),a=v("text-field"),g=v("radio-button"),m=v("dynamic-select"),p=B("focus-first-input");return k(),f("div",M,[r(o,{componentName:"zendesk"}),d("div",G,[d("div",I,[A((k(),f("div",J,[r(a,{label:n.trans("user_name"),value:e.username,type:"text",name:"username",onChange:e.onChange,classname:"col-sm-6",required:!0,hint:n.trans("user-name-hint")},null,8,["label","value","onChange","hint"]),r(a,{label:n.trans("password"),value:e.password,type:"password",name:"password",onChange:e.onChange,hint:n.trans("password-hint"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","hint"])])),[[p]]),d("div",K,[r(a,{label:n.lang("zendesk-domain"),name:"domain",classname:"col-sm-6",value:e.domain,onChange:e.onChange,required:!0,hint:n.trans("domain-hint")},null,8,["label","value","onChange","hint"]),r(g,{options:e.radioOptions,label:n.lang("knowledge-base"),name:"status",value:e.status,onChange:e.onChange,classname:"form-group col-sm-4",hint:n.trans("zendesk-kb-hint")},null,8,["options","label","value","onChange","hint"])]),d("div",Q,[r(m,{label:n.lang("zendesk_status"),multiple:!0,name:"zendesk_status",elements:e.zendeskStatus,classname:"col-sm-6",value:e.zendesk_status,onChange:e.onChange,required:!1,strlength:45,hint:n.lang("zendesk-status-hint")},null,8,["label","elements","value","onChange","hint"]),r(a,{label:n.trans("created_at"),value:e.createdat_number,type:"number",name:"createdat_number",hint:n.trans("zendesk-created-hint"),onChange:e.onChange,classname:"col-sm-6"},null,8,["label","value","hint","onChange"])])]),d("div",U,[d("button",{type:"button",onClick:c[0]||(c[0]=(..._)=>e.onSubmit&&e.onSubmit(..._)),class:"btn btn-primary"},[d("span",{class:E(e.iconClass)},null,2),H("Â "+O(n.trans(e.btnName)),1)])])])])}const X=y(L,[["render",W]]);let Y={path:"/zendesk",component:j,name:"Zendesk Settings",redirect:"zendesk/settings",children:[{path:"settings",component:X,name:"Archive Settings",meta:{title:"Zendesk Settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"Zendesk Settings"}}}]};T.addRoute(Y);
