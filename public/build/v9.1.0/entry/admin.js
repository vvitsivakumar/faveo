import{f as x,_ as C,g as H,T as R,l as ie,s as ae,e as oe,c as U,b as le,A as ne,M as de,C as se,L as re,a as ce,F as ue,d as fe}from"../chunks/bootstrap.js";import{r as p,c as l,b as D,d as m,w as B,T as K,F as w,o,e as b,u as P,m as L,q as z,i as g,f as a,h as S,t as h,p as A,j as E,n as J,v as O,s as q,x as me,y as I,g as $,z as _e,_ as G,A as W,B as pe,a as Y,D as Q,C as he}from"../chunks/vendor.js";import{F as ge,r as j}from"../chunks/adminRouter.js";import{B as be}from"../chunks/BarcodeModal.js";import{s as ye,F as ve,f as Fe}from"../chunks/FileManager.js";import{C as De}from"../chunks/Loader.js";import{D as Ce}from"../chunks/DataTableActions.js";import"../chunks/FormGenerator.js";import"../chunks/AdminNavigationBar.js";import"../chunks/HelpSection.js";const ke={automator:null},we={getAutomatorData:e=>e.automator,getAutomatorDataByKey:e=>function(t){return e.automator[t]},getAutomatorRules:e=>e.automator.rules,getAutomatorActions:e=>e.automator.actions,getSelectedActionKeys:e=>e.automator.actions.map(t=>t.field?t.field.key:""),getSelectedRuleKeys:e=>e.automator.rules.map(t=>t.field?t.field.key:"")},Se={createNewAutomatorInstance:(e,t)=>e.automator=t||new ge,destroyAutomatorInstance:e=>e.automator=null,setAutomatorDataByKey:(e,{key:t,value:i})=>e.automator[t]=i,addNewElementToAutomatorProperty:(e,{key:t,value:i})=>e.automator[t].push(i),deleteElementFromAutomator:(e,{key:t,index:i})=>{if(typeof i>"u"){console.error(`Can't delete ${t} having index undefined`);return}e.automator[t+"s"].splice(i,1)},onCategoryChange:(e,{key:t,index:i,value:r})=>e.automator[t][i]=r,onRelationChange:(e,{key:t,index:i,relation:r})=>e.automator[t][i].relation=r,onFieldChange:(e,{key:t,index:i,field:r})=>{if(!x(r))e.automator[t][i].field=null;else{let c=JSON.parse(JSON.stringify(r));c._id=e.automator[t][i]._id,e.automator[t][i].field=c}e.automator[t][i][t]=[],e.automator[t][i].value=null},updateEventData:(e,{index:t,value:i})=>e.automator.events[t]=i,updateEnforcerList:(e,{key:t,affectedUnique:i,formFieldUnique:r,enforcerList:c,value:n,isMultiple:u,itemToRemove:s,appendValue:f})=>{const d=t+"s";v(e.automator[d]);function v(y){for(let F=0;F<y.length;F++){if(y[F]._id===i&&y[F].field.key===r){x(s)?k(s,y[F][d]):u?y[F][d].push(...c):y[F][d]=c,y[F].value=f?f+" "+n:n;break}x(y[F][d])&&v(y[F][d])}}function k(y,F){y.nodes&&y.nodes.forEach(_=>{const T=F.findIndex(te=>te.field.key===_.key);T>-1&&F.splice(T,1)})}},updateActionEmail:(e,{index:t,key:i,value:r})=>e.automator.actions[t].action_email[i]=r},Oe={createNewAutomatorInstance:({commit:e},t)=>e("createNewAutomatorInstance",t),destroyAutomatorInstance:({commit:e})=>e("destroyAutomatorInstance"),setAutomatorDataByKey:({commit:e},t)=>e("setAutomatorDataByKey",t),addNewElementToAutomatorProperty:({commit:e},t)=>e("addNewElementToAutomatorProperty",t),deleteElementFromAutomator:({commit:e},t)=>e("deleteElementFromAutomator",t),onCategoryChange:({commit:e},t)=>e("onCategoryChange",t),onRelationChange:({commit:e},t)=>e("onRelationChange",t),onFieldChange:({commit:e},t)=>e("onFieldChange",t),updateEventData:({commit:e},t)=>e("updateEventData",t),updateEnforcerList:({commit:e},t)=>e("updateEnforcerList",t),removeElementFromEnforcerList:({commit:e},t)=>e("removeElementFromEnforcerList",t),updateActionEmail:({commit:e},t)=>e("updateActionEmail",t)},$e={state:ke,getters:we,mutations:Se,actions:Oe},Ae={formMenus:[],formFields:[],formSections:[],formCategoryType:"ticket",isDisableDraging:!1,clonableForm:""},Ee={getFormMenus(e){return e.formMenus},getFormFields(e){return e.formFields},getFormSections(e){return e.formSections},getClonedForm(e){return e.clonableForm},getFormCategoryType(e){return e.formCategoryType},isDisableDraging(e){return e.isDisableDraging}},Be={updateFormMenu(e,t){e.formMenus=[...t]},updateFormFields(e,t){e.formFields=[...t]},updateFormSections(e,t){e.formSections=[...t]},updateCloneableFormData(e,t){e.clonableForm=t},updateFormCategoryType(e,t){e.formCategoryType=t},updateIsDisableDraging(e,t){e.isDisableDraging=t}},Ie={updateFormFields:({commit:e},t)=>{e("updateFormFields",t)},updateFormSections:({commit:e},t)=>{e("updateFormSections",t)},updateCloneableFormData:({commit:e},t)=>{e("updateCloneableFormData",t)}},Te={state:Ae,getters:Ee,mutations:Be,actions:Ie},Me={name:"admin-panel-renderer",props:{authInfo:{type:Object,default:()=>{}},companyInfo:{type:Object,default:()=>{}},portalInfo:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},dummyInstall:{type:[Boolean,String,Number],default:""},isMailConfigured:{type:[Boolean,String,Number],default:""},is2faEnforced:{type:[Boolean,String,Number],default:""},is2faEnabled:{type:[Boolean,String,Number],default:""},isUpdatedVersion:{type:[Boolean,Number,String],default:!1}},data(){return{updatedAuth:this.authInfo,loading:!1,updatedPortal:this.portalInfo,updatedCompany:this.companyInfo,counter:0,showModal:!1,isFactorEnforce:this.is2faEnforced,isFactorEnable:this.is2faEnabled}},mixins:[ye],watch:{$route(e,t){this.fireScripts(e.path,"adminlayout"),!this.isFactorEnable&&this.isFactorEnforce&&(this.showModal=!0),this.$store.dispatch("unsetAlert"),this.$store.dispatch("unsetValidationError")}},beforeMount(){this.getScripts("adminlayout"),this.isFactorEnforce&&!this.isFactorEnable&&(this.showModal=!0)},created(){window.emitter.on("updateAgentProfile",this.updateProfile),window.emitter.on("companySettingsUpdated",this.updateCompany),window.emitter.on("securitySettingsUpdated",this.updateEnforce),window.emitter.on("updateEditData",this.updateFactor)},methods:{updateEnforce(e){this.isFactorEnforce=e,this.isFactorEnforce&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateFactor(e){this.isFactorEnable=e,this.isFactorEnforce&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateCompany(){axios.get("/api/admin/layout").then(e=>{this.updatedCompany=e.data.data.company,this.updatedPortal=e.data.data.portal,this.counter+=1}).catch(e=>{this.loading=!1})},updateProfile(e){Object.keys(this.updatedAuth.user_data).forEach(t=>this.updatedAuth.user_data[t]=e[t]||this.updatedAuth.user_data[t])},onClose(e){(this.isFactorEnforce&&this.isFactorEnable||!this.isFactorEnforce||e==="2faDone")&&(this.showModal=!1),this.$store.dispatch("unsetValidationError")}},components:{"barcode-modal":be}};function Ve(e,t,i,r,c,n){const u=p("router-view"),s=p("barcode-modal");return o(),l(w,null,[!c.loading&&!c.showModal?(o(),D(u,{auth:c.updatedAuth,company:c.updatedCompany,portal:c.updatedPortal,whiteLabel:i.whiteLabel,tag:i.tag,version:i.version,dummyInstall:i.dummyInstall,isMailConfigured:i.isMailConfigured,key:c.counter,isUpdatedVersion:i.isUpdatedVersion},null,8,["auth","company","portal","whiteLabel","tag","version","dummyInstall","isMailConfigured","isUpdatedVersion"])):m("",!0),c.showModal?(o(),D(K,{key:1,name:"modal"},{default:B(()=>[b(s,{onClose:n.onClose,showModal:c.showModal},null,8,["onClose","showModal"])]),_:1})):m("",!0)],64)}const xe=C(Me,[["render",Ve]]);const Le={setup(){const e=P();return{menuItems:L(()=>e.getters.getFormMenus),categoryType:L(()=>e.getters.getFormCategoryType)}},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!1},selectedOption:{type:[String,Object],required:!1}},data:()=>({}),methods:{removeElementAt(){window.emitter.emit("onRemoveElement",{fieldData:this.fieldData,reference_id:this.fieldData.reference_id,reference_type:this.fieldData.reference_type})},canAddChild(){return this.categoryType!="ticket"&&this.categoryType!="user"&&this.fieldData.label=="Department"?!1:typeof this.selectedOption!="string"&&x(this.selectedOption)}}},N=e=>(A("data-v-8a3916d1"),e=e(),E(),e),Ue={title:""},je=N(()=>a("i",{class:"fa-solid fa-gear","aria-hidden":"true"},null,-1)),qe=[je],Pe={key:0,class:"dropdown"},Ne={class:"btn btn-default","data-toggle":"dropdown"},He=N(()=>a("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1)),Re=[He],Ke={class:"dropdown-menu",role:"menu","aria-labelledby":"dropdownMenu"},ze=["onClick"],Je={class:"nav-link text-dark",href:"javascript:void(0);"},Ge=N(()=>a("i",{class:"fa-solid fa-trash","aria-hidden":"true"},null,-1)),We=[Ge];function Ye(e,t,i,r,c,n){const u=z("tooltip");return o(),l("div",Ue,[g((o(),l("button",{class:"btn btn-default",onClick:t[0]||(t[0]=s=>i.onEditFormField(i.fieldData))},qe)),[[u,e.lang("edit")]]),n.canAddChild()?(o(),l("span",Pe,[g((o(),l("button",Ne,Re)),[[u,e.lang("add_child")]]),a("ul",Ke,[(o(!0),l(w,null,S(r.menuItems,(s,f)=>(o(),l("li",{key:s.id,onClick:d=>i.onChildClick(f,i.selectedOption),class:"nav-item"},[a("a",Je,h(s.title),1)],8,ze))),128))])])):m("",!0),i.fieldData.is_deletable?g((o(),l("button",{key:1,class:"btn btn-danger",onClick:t[1]||(t[1]=s=>n.removeElementAt())},We)),[[u,e.lang("delete")]]):m("",!0)])}const M=C(Le,[["render",Ye],["__scopeId","data-v-8a3916d1"]]);const Qe={props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({imageUrl:"/themes/default/client/images/enterarrow.png"}),computed:{getUniqueKey:function(){return this.fieldData.title+"_"+this.fieldData.id}}},Xe={class:"form-field-label"},Ze=["src"],et=["name"],tt={class:"error-block is-danger"};function it(e,t,i,r,c,n){const u=p("ValidationProvider"),s=z("tooltip");return o(),l("div",Xe,[i.isChild?(o(),l("img",{key:0,id:"enter-arrow",width:"16",height:"16",src:e.basePathVersion()+e.imageUrl,alt:""},null,8,Ze)):m("",!0),b(u,{name:n.getUniqueKey,rules:"required",modelValue:i.fieldData.labels_for_form_field[0].label,"onUpdate:modelValue":t[1]||(t[1]=f=>i.fieldData.labels_for_form_field[0].label=f),modelModifiers:{trim:!0}},{default:B(({field:f,errorMessage:d,meta:v,classes:k})=>[g(a("input",{type:"text",name:n.getUniqueKey,"onUpdate:modelValue":t[0]||(t[0]=y=>i.fieldData.labels_for_form_field[0].label=y),class:J(d?"field-danger":"")},null,10,et),[[s,e.lang("tap_to_edit")],[O,i.fieldData.labels_for_form_field[0].label,void 0,{trim:!0}]]),a("div",null,[g(a("small",null,[a("span",tt,h(d),1)],512),[[q,d]])])]),_:1},8,["name","modelValue"])])}const V=C(Qe,[["render",it],["__scopeId","data-v-a013cabe"]]);const at={components:{"form-field-actions":M,"fb-form-field-label":V},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({}),computed:{getSimpleFieldPlaceholder:function(){let e="short_text";return this.fieldData.title==="Attachments"?e="attach_file":this.fieldData.type==="email"?e="email@example.com":this.fieldData.title==="Asset Image"?e="asset_image":this.fieldData.title==="Api"&&(e="api_endpoint"),e}},methods:{isSimpleField(){return["text","number","date","email","file","image","taggable","float"].indexOf(this.fieldData.type)>-1}}},ot=e=>(A("data-v-45b789e9"),e=e(),E(),e),lt={class:"row form-field"},nt={class:"col-md-3"},dt={class:"col-md-6"},st=["id","placeholder"],rt=["id","placeholder"],ct={class:"col-md-3",style:{display:"flex"}},ut=ot(()=>a("span",{class:"space-filler"},null,-1)),ft={class:"form-field-actions-btn"};function mt(e,t,i,r,c,n){const u=p("fb-form-field-label"),s=p("form-field-actions");return o(),l("div",lt,[a("div",nt,[b(u,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",dt,[n.isSimpleField()||i.fieldData.title==="Api"?(o(),l("input",{key:0,id:"short-text-input"+i.fieldData.id,class:"form-control",type:"text",placeholder:e.lang(n.getSimpleFieldPlaceholder),disabled:""},null,8,st)):m("",!0),i.fieldData.type=="textarea"||i.fieldData.type=="htmltextarea"?(o(),l("textarea",{key:1,id:"long-text-input"+i.fieldData.id,class:"form-control",rows:"1",placeholder:e.lang("long_text"),disabled:""},null,8,rt)):m("",!0)]),a("div",ct,[ut,a("div",ft,[b(s,{"on-edit-form-field":i.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const _t=C(at,[["render",mt],["__scopeId","data-v-45b789e9"]]);const pt={name:"FBSelect",components:{"form-field-actions":M,"fb-form-field-label":V},props:{fieldData:{type:Object,required:!0},isDisabled:{type:Boolean,default:()=>!1},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:"Select option"}),beforeMount(){this.getDepartmentHelptopicOptions()},methods:{getDepartmentHelptopicOptions(){if(this.fieldData.title==="Help Topic"||this.fieldData.title==="Department"){this.selectedOption="Select option";const e=this.getApiConfigObj(),t={meta:!0,limit:"all","sort-order":"asc","sort-field":"id",config:!0};axios.get(e.apiUrl,{params:t}).then(i=>{this.fieldData.options=[],i.data.data[e.dataKay].map(c=>{const n={id:c.id,value:c.id,labels:[{id:null,language:"en",label:c.name}],nodes:c.nodes,sort_order:0};this.fieldData.options.push(n)})})}},getApiConfigObj(){let e={};return this.fieldData.title==="Help Topic"?(e.apiUrl="api/dependency/help-topics",e.dataKay="help_topics"):this.fieldData.title==="Department"&&(e.apiUrl="api/dependency/departments",e.dataKay="departments"),e},showNestedFields(e,t){return typeof t>"u"&&(t=this.selectedOption),t&&t.id===e.id}},watch:{fieldData:function(e,t){this.fieldData.options&&this.fieldData.options.length===0&&this.getDepartmentHelptopicOptions()}}},X=e=>(A("data-v-82fe7c99"),e=e(),E(),e),ht={class:"row form-field"},gt={class:"col-md-3"},bt={class:"col-md-6"},yt=["disabled"],vt=X(()=>a("option",{selected:""},"Select option",-1)),Ft=["value"],Dt={class:"col-md-3",style:{display:"flex"}},Ct=X(()=>a("span",{class:"space-filler"},null,-1)),kt={class:"form-field-actions-btn"},wt={key:0};function St(e,t,i,r,c,n){const u=p("fb-form-field-label"),s=p("form-field-actions"),f=p("draggable-form-field-item");return o(),l("div",null,[a("div",ht,[a("div",gt,[b(u,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",bt,[g(a("select",{id:"select-field-id",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=d=>e.selectedOption=d),disabled:i.isDisabled},[vt,(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("option",{key:d.id,value:d},h(d.labels[0].label),9,Ft))),128))],8,yt),[[me,e.selectedOption]])]),a("div",Dt,[Ct,a("div",kt,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",wt,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{key:d.id,class:"item-sub"},[n.showNestedFields(d)?(o(),D(f,{key:0,list:d.nodes,isChild:!0,keyVal:d.id},null,8,["list","keyVal"])):m("",!0)]))),128))])):m("",!0)])}const Ot=C(pt,[["render",St],["__scopeId","data-v-82fe7c99"]]);const $t={name:"FBCheckbox",components:{"form-field-actions":M,"fb-form-field-label":V},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:[]}),methods:{showNestedFields(e,t){return typeof t>"u"&&(t=this.selectedOption),!!(t&&t.id===e.id)}}},Z=e=>(A("data-v-c8d47deb"),e=e(),E(),e),At={class:"row form-field"},Et={class:"col-md-3"},Bt={class:"col-md-6 from-check"},It={key:0},Tt=["for"],Mt=["id","name","value","disabled"],Vt={key:1},xt=Z(()=>a("label",{for:"checkbox_preview",style:{color:"#9a9a9a"}},[a("input",{disabled:"",type:"checkbox",name:"checkbox_preview",id:"checkbox_preview"}),$(" Add option ")],-1)),Lt=[xt],Ut={class:"col-md-3",style:{display:"flex"}},jt=Z(()=>a("span",{class:"space-filler"},null,-1)),qt={class:"form-field-actions-btn"},Pt={key:0};function Nt(e,t,i,r,c,n){const u=p("fb-form-field-label"),s=p("form-field-actions"),f=p("draggable-form-field-item");return o(),l("div",null,[a("div",At,[a("div",Et,[b(u,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Bt,[i.fieldData.options.length>0?(o(),l("div",It,[(o(!0),l(w,null,S(i.fieldData.options,(d,v)=>(o(),l("div",{class:"checkbox",key:v},[a("label",{for:"checkbox_"+d.id},[g(a("input",{type:"checkbox",class:"form-check-input",id:"checkbox_"+d.id,name:i.fieldData.id,value:d,"onUpdate:modelValue":t[0]||(t[0]=k=>e.selectedOption=k),disabled:i.fieldData.default},null,8,Mt),[[I,e.selectedOption]]),$(" "+h(d.labels[0].label),1)],8,Tt)]))),128))])):(o(),l("div",Vt,Lt))]),a("div",Ut,[jt,a("div",qt,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",Pt,[(o(!0),l(w,null,S(e.selectedOption,(d,v)=>(o(),l("div",{key:v},[(o(!0),l(w,null,S(i.fieldData.options,k=>(o(),l("div",{key:k.id,class:"item-sub"},[n.showNestedFields(k,d)?(o(),D(f,{key:0,list:k.nodes,isChild:!0,keyVal:k.id},null,8,["list","keyVal"])):m("",!0)]))),128))]))),128))])):m("",!0)])}const Ht=C($t,[["render",Nt],["__scopeId","data-v-c8d47deb"]]);const Rt={name:"FBRadio",components:{"form-field-actions":M,"fb-form-field-label":V},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:null}),methods:{showNestedFields(e,t){return!!(t&&t.id===e.id)}}},ee=e=>(A("data-v-4e381187"),e=e(),E(),e),Kt={class:"row form-field"},zt={class:"col-md-3"},Jt={class:"col-md-6 form-radio"},Gt={key:0},Wt=["for"],Yt=["name","id","value"],Qt={key:1},Xt=ee(()=>a("label",{for:"radio_preview",style:{color:"#9a9a9a"}},[a("input",{disabled:"",type:"radio",name:"radio_preview",id:"radio_preview"}),$(" Add option ")],-1)),Zt=[Xt],ei={class:"col-md-3",style:{display:"flex"}},ti=ee(()=>a("span",{class:"space-filler"},null,-1)),ii={class:"form-field-actions-btn"},ai={key:0};function oi(e,t,i,r,c,n){const u=p("fb-form-field-label"),s=p("form-field-actions"),f=p("draggable-form-field-item");return o(),l("div",null,[a("div",Kt,[a("div",zt,[b(u,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Jt,[i.fieldData.options.length>0?(o(),l("div",Gt,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{class:"radio",key:d.id},[a("label",{for:"radio_"+d.id},[g(a("input",{type:"radio",class:"form-check-input",name:i.fieldData.id,id:"radio_"+d.id,"onUpdate:modelValue":t[0]||(t[0]=v=>e.selectedOption=v),value:d},null,8,Yt),[[_e,e.selectedOption]]),$(" "+h(d.labels[0].label),1)],8,Wt)]))),128))])):(o(),l("div",Qt,Zt))]),a("div",ei,[ti,a("div",ii,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",ai,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{key:d.id,class:"item-sub"},[e.selectedOption&&e.selectedOption.id===d.id?(o(),D(f,{key:0,list:d.nodes,isChild:!0,keyVal:d.id},null,8,["list","keyVal"])):m("",!0)]))),128))])):m("",!0)])}const li=C(Rt,[["render",oi],["__scopeId","data-v-4e381187"]]);const ni={components:{"form-field-actions":M},props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({imageUrl:"/themes/default/client/images/enterarrow.png"}),methods:{onEditFormField(){this.$router.push({path:this.fieldData.edit_url})}}},di=e=>(A("data-v-905362b0"),e=e(),E(),e),si={class:"row form-field"},ri={class:"col-md-3 form-field-label"},ci=["src"],ui=["value"],fi={class:"col-md-6"},mi=["placeholder"],_i={class:"col-md-3",style:{display:"flex"}},pi=di(()=>a("span",{class:"space-filler"},null,-1)),hi={class:"form-field-actions-btn"};function gi(e,t,i,r,c,n){const u=p("form-field-actions");return o(),l("div",si,[a("div",ri,[i.isChild?(o(),l("img",{key:0,width:"16",height:"16",id:"enter-arrow",src:e.basePathVersion()+e.imageUrl,alt:""},null,8,ci)):m("",!0),a("input",{type:"text",readonly:"",value:i.fieldData.name},null,8,ui)]),a("div",fi,[a("input",{class:"form-control",type:"text",placeholder:e.lang("this_is_form_group"),disabled:""},null,8,mi)]),a("div",_i,[pi,a("div",hi,[b(u,{"on-edit-form-field":n.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const bi=C(ni,[["render",gi],["__scopeId","data-v-905362b0"]]);const yi={components:{"form-field-actions":M,"fb-form-field-label":V},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({})},vi=e=>(A("data-v-b05da910"),e=e(),E(),e),Fi={class:"row form-field"},Di={class:"col-md-3"},Ci={class:"col-md-6"},ki=["id","placeholder"],wi={class:"col-md-3",style:{display:"flex"}},Si=vi(()=>a("span",{class:"space-filler"},null,-1)),Oi={class:"form-field-actions-btn"};function $i(e,t,i,r,c,n){const u=p("fb-form-field-label"),s=p("form-field-actions");return o(),l("div",Fi,[a("div",Di,[b(u,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Ci,[a("input",{id:"short-text-input"+i.fieldData.id,class:"form-control",type:"text",placeholder:i.fieldData.description,disabled:""},null,8,ki)]),a("div",wi,[Si,a("div",Oi,[b(s,{"on-edit-form-field":i.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const Ai=C(yi,[["render",$i],["__scopeId","data-v-b05da910"]]),Ei={name:"api-info-block",props:{formFieldData:{type:Object,required:!0},updateApiInfo:{type:Function,required:!0}},data:()=>({apiInfoObj:null}),beforeMount(){this.apiInfoObj=H.convertStringOfPropertiesToObject(this.formFieldData.api_info)},methods:{onChange:G.debounce(function(){this.updateApiInfo(H.convertObjectOfPropertiesToString(this.apiInfoObj))},350)},components:{"tool-tip":R}},Bi={class:"row p-2"},Ii={class:"col-md-8",style:{"padding-top":"10px"}},Ti={for:"apiendpoint"},Mi={class:"input-group",style:{width:"100%"}},Vi={class:"col-md-4",style:{"padding-top":"10px"}},xi={for:"apiendpoint"},Li={class:"input-group",style:{width:"100%"}};function Ui(e,t,i,r,c,n){const u=p("tool-tip");return o(),l("div",Bi,[a("div",Ii,[a("label",Ti,h(e.lang("api_endpoint")),1),b(u,{message:e.lang("api_endpoint_is_the_url"),size:"small"},null,8,["message"]),a("div",Mi,[g(a("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":t[0]||(t[0]=s=>e.apiInfoObj.url=s),onInput:t[1]||(t[1]=s=>n.onChange()),placeholder:"https://testapi.com/my/api/path"},null,544),[[O,e.apiInfoObj.url,void 0,{trim:!0}]])])]),a("div",Vi,[a("label",xi,h(e.lang("property_to_map")),1),b(u,{message:e.lang("this_property_will_get_saved_when_user_submit_the_form"),size:"small"},null,8,["message"]),a("div",Li,[g(a("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":t[2]||(t[2]=s=>e.apiInfoObj.key=s),onInput:t[3]||(t[3]=s=>n.onChange()),placeholder:"id"},null,544),[[O,e.apiInfoObj.key,void 0,{trim:!0}]])])])])}const ji=C(Ei,[["render",Ui]]);const qi={name:"FB-configuration-settings",setup(){const e=P();return{formCategoryType:L(()=>e.getters.getFormCategoryType)}},props:{formFieldData:{type:Object,required:!0}},data:()=>({defaultCategories:["ticket","organisation","user","asset","change","license"]}),methods:{onCheckboxClick(e){this.formFieldData[e]=!1},updateApiInfo(e){this.formFieldData.api_info=e},isAgentConfig(e){return this.formCategoryType==="group"?!0:this.defaultCategories.includes(this.formCategoryType)?e.is_agent_config:!1}},components:{"tool-tip":R,"api-info-block":ji}},Pi={class:"row mt-2 p-2"},Ni={key:0,class:"col-md-6"},Hi={class:"form-check"},Ri={class:"form-check-label",for:"display-for-agent"},Ki={key:0,class:"form-check"},zi=["disabled"],Ji={class:"form-check-label",for:"required-for-agent"},Gi={key:1,class:"col-md-6"},Wi={class:"form-check"},Yi={key:0,class:"form-check"},Qi=["disabled"],Xi={class:"form-check-label",for:"required-for-clinet"},Zi={key:1,class:"col-md-12",style:{"padding-top":"10px"}},ea={for:"shortcode"},ta={key:2,class:"col-md-12",style:{"padding-top":"10px"}},ia={for:"description"},aa=["placeholder"],oa={class:"d-flex"},la={key:0,class:"col-md-6"},na={class:"form-check"},da={for:"add-media-cb"},sa={key:1,class:"col-md-6"},ra={class:"form-check"},ca={for:"form-tooltip"},ua={key:0,class:"col-md-12",style:{"padding-top":"10px"}},fa=["href"];function ma(e,t,i,r,c,n){const u=p("api-info-block"),s=p("tool-tip");return o(),l("div",null,[a("div",Pi,[n.isAgentConfig(i.formFieldData)?(o(),l("div",Ni,[a("label",null,h(e.lang("agent")),1),a("div",Hi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[0]||(t[0]=f=>i.formFieldData.display_for_agent=f),id:"display-for-agent",onClick:t[1]||(t[1]=f=>n.onCheckboxClick("required_for_agent"))},null,512),[[I,i.formFieldData.display_for_agent]]),a("label",Ri,h(e.lang("display_in_form")),1)]),i.formFieldData.title!=="Captcha"?(o(),l("div",Ki,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[2]||(t[2]=f=>i.formFieldData.required_for_agent=f),disabled:!i.formFieldData.display_for_agent&&i.formFieldData.title!=="Captcha",id:"required-for-agent"},null,8,zi),[[I,i.formFieldData.required_for_agent]]),a("label",Ji,h(e.lang("required_when_submitting_the_form")),1)])):m("",!0)])):m("",!0),(e.defaultCategories.includes(r.formCategoryType)?i.formFieldData.title!=="CC"&&i.formFieldData.title!=="Assigned"&&i.formFieldData.is_user_config:i.formFieldData.title!=="CC"&&i.formFieldData.title!=="Assigned")?(o(),l("div",Gi,[a("label",null,h(e.lang("client")),1),a("div",Wi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[3]||(t[3]=f=>i.formFieldData.display_for_user=f),id:"display-for-client"},null,512),[[I,i.formFieldData.display_for_user]]),a("label",{class:"form-check-label",for:"display-for-client",onClick:t[4]||(t[4]=f=>n.onCheckboxClick("required_for_user"))},h(e.lang("display_in_form")),1)]),i.formFieldData.title!=="Captcha"?(o(),l("div",Yi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[5]||(t[5]=f=>i.formFieldData.required_for_user=f),disabled:!i.formFieldData.display_for_user&&i.formFieldData.title!=="Captcha",id:"required-for-clinet"},null,8,Qi),[[I,i.formFieldData.required_for_user]]),a("label",Xi,h(e.lang("required_when_submitting_the_form")),1)])):m("",!0)])):m("",!0)]),i.formFieldData.title==="Api"?(o(),D(u,{key:0,"form-field-data":i.formFieldData,"update-api-info":n.updateApiInfo},null,8,["form-field-data","update-api-info"])):m("",!0),i.formFieldData.default?m("",!0):(o(),l("div",Zi,[a("label",ea,h(e.lang("shortcode")),1),b(s,{message:e.lang("ticket_custom_field_shortcode_value"),size:"small"},null,8,["message"]),g(a("input",{type:"text",name:"shortcode",id:"shortcode",onKeydown:t[6]||(t[6]=W(pe(()=>{},["prevent"]),["space"])),class:"form-control","onUpdate:modelValue":t[7]||(t[7]=f=>i.formFieldData.shortcode=f)},null,544),[[O,i.formFieldData.shortcode]])])),i.formFieldData.title!="Captcha"?(o(),l("div",ta,[a("label",ia,h(e.lang("description")),1),g(a("textarea",{name:"description",id:"description",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=f=>i.formFieldData.labels_for_form_field[0].description=f),placeholder:e.lang("form_field_tooltip_description_message")},null,8,aa),[[O,i.formFieldData.labels_for_form_field[0].description]])])):m("",!0),a("div",null,[a("div",oa,[i.formFieldData.title=="Description"&&i.formFieldData.title!="Captcha"&&r.formCategoryType=="ticket"?(o(),l("div",la,[a("div",na,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"add-media-cb","onUpdate:modelValue":t[9]||(t[9]=f=>i.formFieldData.media_option=f)},null,512),[[I,i.formFieldData.media_option]]),a("label",da,h(e.lang("can_agent_add_media")),1)])])):m("",!0),i.formFieldData.title!="Captcha"?(o(),l("div",sa,[a("div",ra,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"form-tooltip","onUpdate:modelValue":t[10]||(t[10]=f=>i.formFieldData.show_description_under_form_field=f)},null,512),[[I,i.formFieldData.show_description_under_form_field]]),a("label",ca,h(e.lang("show_description_under_form_field")),1)])])):m("",!0)]),i.formFieldData.title==="Captcha"?(o(),l("div",ua,[a("p",null,[a("strong",null,[$(h(e.lang("captcha_config_message"))+" ",1),a("a",{href:e.basePath()+"/recaptcha",target:"_new",style:{"text-decoration":"underline"}},h(e.lang("here")),9,fa)])])])):m("",!0)])])}const _a=C(qi,[["render",ma],["__scopeId","data-v-bf454f1d"]]);const pa={name:"language-dropdown",data(){return{languageList:[],isLoading:!1}},methods:{getLanguageList(){this.isLoading=!0,Y.get("api/dependency/languages?meta=true").then(e=>{this.languageList=e.data.data.languages.sort((t,i)=>t.name<i.name?-1:i.name<t.name?1:0)}).catch(e=>{this.languageList=[]}).finally(()=>{this.isLoading=!1})},getLocalFlag(e){return this.basePathVersion()+"/themes/default/common/images/flags/"+e+".png"},changeFlag(e){let t={};t.language=e,this.$emit("getflag",t)}}},ha=e=>(A("data-v-d6b771b7"),e=e(),E(),e),ga={class:"language-menu"},ba=ha(()=>a("span",{class:"caret"},null,-1)),ya={class:"dropdown-menu dropdown-menu-lg language-dropdown","aria-labelledby":"language-list-dropdown"},va={key:0,class:"nav-item mt-2"},Fa=["onClick"],Da=["src"];function Ca(e,t,i,r,c,n){const u=p("loader");return o(),l("div",ga,[a("button",{class:"btn btn-default dropdown-toggle",type:"button",id:"language-list-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:t[0]||(t[0]=s=>n.getLanguageList())},[$(h(e.lang("add_new_language"))+" ",1),ba]),a("ul",ya,[c.isLoading?(o(),l("li",va,[b(u,{size:30})])):(o(!0),l(w,{key:1},S(c.languageList,s=>(o(),l("li",{key:s.id,class:"nav-item"},[a("a",{href:"javascript:void(0)",onClick:f=>n.changeFlag(s.locale),class:"nav-link text-dark"},[a("img",{src:n.getLocalFlag(s.locale)},null,8,Da),$(" "+h(s.name),1)],8,Fa)]))),128))])])}const ka=C(pa,[["render",Ca],["__scopeId","data-v-d6b771b7"]]);const wa={name:"FB-add-language",components:{"language-dropdown":ka},props:{formFieldData:{type:Object,required:!0}},data:()=>({}),computed:{canChangeLanguageForOptions(){return!["Department","Help Topic"].includes(this.formFieldData.title)}},methods:{assignNewLanguage(e){const t=this.getCurrentTimestamp();e.form_identifier=t,e.id=t,this.formFieldData.options&&this.canChangeLanguageForOptions&&this.formFieldData.options.forEach(i=>{e.label=i.labels[0].label,this.isLangPresentAlready(i.labels,e.language)||i.labels.push(new Object(Object.assign({},e)))}),this.isLangPresentAlready(this.formFieldData.labels_for_form_field,e.language)||(e.label=this.formFieldData.labels_for_form_field[0].label,e.description=this.formFieldData.labels_for_form_field[0].description,this.formFieldData.labels_for_form_field.push(new Object(Object.assign({},e))))},getLocalFlag(e){return this.basePathVersion()+"/themes/default/common/images/flags/"+e+".png"},isLangPresentAlready(e,t){return G.findIndex(e,i=>i.language===t)>-1},getCurrentTimestamp(){return new Date().getTime()}}},Sa={class:"col-md-12 language-menu-dropdown"},Oa={class:"col-md-12 add-language-box"},$a={class:"label-word-break"},Aa={class:"li-child"},Ea=["for"],Ba=["src"],Ia={class:"form-field-label"},Ta=["name","onUpdate:modelValue"],Ma=["name","onUpdate:modelValue"],Va={key:0,style:{display:"inline-flex"}},xa={class:"label-word-break"},La={class:"li-child"},Ua=["for"],ja=["src"],qa={class:"form-field-label"},Pa=["name","onUpdate:modelValue"];function Na(e,t,i,r,c,n){const u=p("language-dropdown");return o(),l("div",null,[a("div",Sa,[b(u,{onGetflag:n.assignNewLanguage},null,8,["onGetflag"])]),a("div",Oa,[a("label",$a,[a("strong",null,h(i.formFieldData.labels_for_form_field[0].label),1)]),a("div",Aa,[(o(!0),l(w,null,S(i.formFieldData.labels_for_form_field,(s,f)=>(o(),l("div",{key:f},[a("div",null,[a("label",{style:{float:"left"},for:s.label+"_"+f},[a("img",{src:n.getLocalFlag(s.language)},null,8,Ba),$("  ")],8,Ea),a("div",Ia,[g(a("input",{name:s.label+"_"+f,type:"text","onUpdate:modelValue":d=>s.label=d},null,8,Ta),[[O,s.label]]),g(a("textarea",{class:"form-control col-md-12 textarea",placeholder:"Description",name:s.description+"_"+f,type:"text","onUpdate:modelValue":d=>s.description=d},null,8,Ma),[[O,s.description]])])])]))),128))]),i.formFieldData.options&&i.formFieldData.options.length>0&&n.canChangeLanguageForOptions?(o(),l("span",Va,[(o(!0),l(w,null,S(i.formFieldData.options,(s,f)=>(o(),l("li",{class:"add-language-li",key:f},[a("label",xa,[a("strong",null,h(s.labels[0].label),1)]),a("ul",La,[(o(!0),l(w,null,S(s.labels,(d,v)=>(o(),l("li",{key:v},[a("div",null,[a("label",{style:{float:"left"},for:d.label+"_"+v},[a("img",{src:n.getLocalFlag(d.language)},null,8,ja),$("  ")],8,Ua),a("div",qa,[g(a("input",{name:d.label+"_"+v,type:"text","onUpdate:modelValue":k=>d.label=k},null,8,Pa),[[O,d.label]])])])]))),128))])]))),128))])):m("",!0)])])}const Ha=C(wa,[["render",Na],["__scopeId","data-v-3e296d8e"]]);const Ra={props:{formFieldData:{type:Object,required:!0}},data:()=>({})},Ka=["placeholder"],za=["placeholder"];function Ja(e,t,i,r,c,n){return o(),l("div",null,[a("div",null,[a("label",null,h(e.lang("pattern_regex")),1),g(a("input",{type:"text",class:"form-input-box","onUpdate:modelValue":t[0]||(t[0]=u=>i.formFieldData.pattern=u),placeholder:e.lang("pattern_help_message")},null,8,Ka),[[O,i.formFieldData.pattern]])]),a("div",null,[a("label",null,h(e.lang("validation_message")),1),i.formFieldData.labels_for_validation[0]?g((o(),l("input",{key:1,type:"text",class:"form-input-box","onUpdate:modelValue":t[1]||(t[1]=u=>i.formFieldData.labels_for_validation[0].label=u)},null,512)),[[O,i.formFieldData.labels_for_validation[0].label]]):(o(),l("input",{key:0,type:"text",class:"form-input-box",placeholder:e.lang("regex_with_validation_message")},null,8,za))])])}const Ga=C(Ra,[["render",Ja],["__scopeId","data-v-09fddb11"]]);const Wa={name:"",props:{optionIndex:{type:Number,required:!0},value:{type:String,required:!0}},data:()=>({isEditMode:!1,editedValue:""}),beforeMount(){this.editedValue=this.value},methods:{onDoubleClick(){this.isEditMode=!0,this.$nextTick(()=>{this.$refs["editWorkplace_"+this.optionIndex].focus()})},onDelete(){this.$emit("on-delete",this.optionIndex)},onCancelEdit(){this.isEditMode=!1},updateValue(){this.isEditMode=!1,this.editedValue===""&&(this.editedValue=this.value),this.$emit("on-update",{newValue:this.editedValue,index:this.optionIndex})}}},Ya={class:"option-box"},Qa=["title"];function Xa(e,t,i,r,c,n){return o(),l("div",Ya,[g(a("span",{onDblclick:t[0]||(t[0]=u=>n.onDoubleClick())},h(i.value),545),[[q,!e.isEditMode]]),g(a("input",{ref:"editWorkplace_"+i.optionIndex,"onUpdate:modelValue":t[1]||(t[1]=u=>e.editedValue=u),onKeyup:t[2]||(t[2]=W(u=>n.updateValue(),["enter"]))},null,544),[[q,e.isEditMode],[O,e.editedValue,void 0,{trim:!0}]]),$("  "),a("i",{class:"fa fa-times fa__fb",id:"delete-option","aria-hidden":"true",onClick:t[3]||(t[3]=u=>e.isEditMode?n.onCancelEdit():n.onDelete()),title:e.isEditMode?e.lang("cancel"):e.lang("delete")},null,8,Qa)])}const Za=C(Wa,[["render",Xa],["__scopeId","data-v-7e7623cc"]]);const eo={name:"form-builder-setting-modal",props:{fieldData:{type:Object,required:!0},isShowSettingModal:{type:Boolean,default:!1},onCloseSettingModal:{type:Function},title:{type:String,default:""}},data:()=>({isLoading:!1,containerStyle:{width:"800px"},fieldSettingData:null,newOption:"",currentTab:"",addOptionInputHelp:""}),computed:{tabsToShow:function(){const e=[{id:0,value:"configuration",show:!0},{id:1,value:"addOption",show:!0},{id:2,value:"validation",show:!0},{id:3,value:"language",show:!0}];this.isHideConfigurationTab()&&(e[0].show=!1),this.isHideAddOptionTab()&&(e[1].show=!1),this.isHideValidationTab()&&(e[2].show=!1),this.isHideLanguageTab()&&(e[3].show=!1);const t=e.filter(i=>i.show);return this.currentTab=t.length!==0?t[0].value:"",t}},beforeMount(){this.fieldSettingData=JSON.parse(JSON.stringify(this.fieldData))},methods:{isHideLanguageTab(){return this.fieldSettingData.title==="Captcha"},isHideConfigurationTab(){return!this.fieldSettingData.is_agent_config&&!this.fieldSettingData.is_user_config?!0:["First Name","Last Name","Requester"].includes(this.fieldSettingData.title)},isHideValidationTab(){return!((this.fieldSettingData.type==="text"||this.fieldSettingData.type==="textarea"||this.fieldSettingData.type==="htmltextarea")&&!this.fieldSettingData.default)},isHideAddOptionTab(){const e=["Department","Help Topic"];return!["select","radio","select2","checkbox","multiselect"].includes(this.fieldSettingData.type)||e.includes(this.fieldSettingData.title)||this.fieldSettingData.default||this.fieldSettingData.title==="Api"},updateOptionValue(e){this.isOptionAlreadyExist(e.newValue)||(this.fieldSettingData.options[e.index].labels[0].label=e.newValue)},deleteOption(e){if(this.fieldSettingData.options.length===1){this.$store.dispatch("setAlert",{type:"danger",message:ie("option_can_not_be_empty_alert_msg"),component_name:"form-builder-setting-modal"});return}const t=this.fieldSettingData.options[e].id;t&&t.toString().length<13?confirm("Are you sure you want to delete?")&&(this.isLoading=!0,Y.delete("api/delete-form-data/form-option/"+t).then(r=>{window.emitter.emit("getFormDataFromServer"),this.fieldSettingData.options.splice(e,1),ae(r,"form-builder-setting-modal")}).catch(r=>{oe(r,"form-builder-setting-modal")}).finally(()=>{this.isLoading=!1})):this.fieldSettingData.options.splice(e,1)},addNewOption(e){if(!this.newOption){this.addOptionInputHelp="";return}if(this.addOptionInputHelp="Press enter to add",e.keyCode===13){if(this.addOptionInputHelp="",this.isOptionAlreadyExist(this.newOption)){this.newOption="";return}const t=this.getOptionDataObj();this.fieldData.type==="checkbox"&&(t.checked=!1),Array.isArray(t)?t.forEach(i=>{setTimeout(()=>{i.id=new Date().getTime(),i.form_identifier=new Date().getTime(),this.fieldSettingData.options.push(i)},1)}):this.fieldSettingData.options.push(t),this.newOption=""}},getOptionDataObj(){if(this.newOption.indexOf(",")>-1){let e=this.newOption.split(","),t=[];for(let i in e)t.push(this.updateOption(e[i]));return t}else return this.updateOption(this.newOption)},updateOption(e){const t=this.getCurrentTimestamp();return{id:t,form_identifier:t,labels:[{id:null,language:"en",label:e}],nodes:[],sort_order:0}},isOptionAlreadyExist(e){for(let t=0;t<this.fieldSettingData.options.length;t++){const i=this.fieldSettingData.options[t].labels;for(let r=0;r<i.length;r++)if(i[r].language==="en"&&i[r].label.toLowerCase()===e.toLowerCase()){const c=document.createElement("div");return c.innerText=e,this.$store.dispatch("setAlert",{type:"danger",message:`Option [${c.innerHTML}] already present.`,component_name:"form-builder-setting-modal"}),!0}}return!1},onTabChange(e){this.$store.dispatch("unsetAlert"),this.currentTab=e},onApply(){window.emitter.emit("formFieldSettingsApplied",this.fieldSettingData)},getCurrentTimestamp(){return new Date().getTime()}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{"FB-configuration-settings":_a,"FB-add-language":Ha,"FB-field-validation":Ga,"draggable-element":Q,"nested-field-option":Za}},to=e=>(A("data-v-e18bdaa1"),e=e(),E(),e),io={draggable:"false"},ao={class:"modal-title"},oo={class:"modal-width"},lo={key:0,class:"nav nav-tabs",role:"tablist"},no=["id"],so=["onClick"],ro={key:1},co={key:1},uo={class:"mt-2 mb-2"},fo={key:0,style:{color:"orangered"}},mo={class:"table"},_o={id:"horizontal-list"},po={class:"col-sm-12"},ho={class:"input-box-li"},go=["placeholder"],bo={key:0,class:"add-option-loader float-right"},yo={key:2},vo={class:"alert alert-info",role:"alert"},Fo={key:0},Do=to(()=>a("i",{class:"fas fa-check"},null,-1));function Co(e,t,i,r,c,n){const u=p("alert"),s=p("FB-configuration-settings"),f=p("nested-field-option"),d=p("draggable-element"),v=p("loader"),k=p("FB-field-validation"),y=p("FB-add-language"),F=p("modal");return o(),l("div",io,[i.isShowSettingModal?(o(),D(F,{key:0,showModal:i.isShowSettingModal,onClose:i.onCloseSettingModal,containerStyle:e.containerStyle},{title:B(()=>[a("div",null,[a("h4",ao,h(e.lang(i.title)+"("+e.fieldSettingData.labels_for_form_field[0].label+")"),1)])]),fields:B(()=>[a("div",oo,[b(u,{componentName:"form-builder-setting-modal"}),n.tabsToShow.length?(o(),l("ul",lo,[(o(!0),l(w,null,S(n.tabsToShow,_=>(o(),l("li",{class:"nav-item",key:_.id,id:_.id},[a("a",{href:"javascript:void(0)",class:J(["nav-link",e.currentTab===_.value?"active":""]),onClick:T=>n.onTabChange(_.value),"data-toggle":"pill",role:"tab"},h(e.lang(_.value)),11,so)],8,no))),128))])):m("",!0),n.tabsToShow.length?(o(),l("div",ro,[e.currentTab==="configuration"?(o(),D(s,{key:0,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0),e.currentTab==="addOption"?(o(),l("div",co,[a("div",null,[a("label",uo,[$(h(e.lang("options"))+":",1),e.addOptionInputHelp?(o(),l("small",fo,"("+h(e.addOptionInputHelp)+")",1)):m("",!0)]),a("div",mo,[a("ul",_o,[a("div",po,[b(d,{modelValue:e.fieldSettingData.options,"onUpdate:modelValue":t[0]||(t[0]=_=>e.fieldSettingData.options=_)},{item:B(({element:_,index:T})=>[(o(),l("li",{key:_.id},[b(f,{"option-index":T,value:_.labels[0].label,onOnDelete:n.deleteOption,onOnUpdate:n.updateOptionValue},null,8,["option-index","value","onOnDelete","onOnUpdate"])]))]),_:1},8,["modelValue"])]),a("li",ho,[g(a("input",{ref:"addOptionInput",type:"text",placeholder:e.lang("add_new_option"),class:"form-control add-option","onUpdate:modelValue":t[1]||(t[1]=_=>e.newOption=_),onKeyup:t[2]||(t[2]=_=>n.addNewOption(_))},null,40,go),[[O,e.newOption,void 0,{trim:!0}]])]),e.isLoading?(o(),l("li",bo,[b(v,{size:20})])):m("",!0)])])])])):m("",!0),e.currentTab==="validation"?(o(),D(k,{key:2,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0),e.currentTab==="language"?(o(),D(y,{key:3,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0)])):(o(),l("div",yo,[a("div",vo,h(e.lang("this_field_is_not_editable")),1)]))])]),controls:B(()=>[n.tabsToShow.length?(o(),l("div",Fo,[a("button",{type:"button",class:"btn btn-primary pull-right",onClick:t[3]||(t[3]=_=>n.onApply())},[Do,$(" "+h(e.lang("apply")),1)])])):m("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):m("",!0)])}const ko=C(eo,[["render",Co],["__scopeId","data-v-e18bdaa1"]]);const wo={name:"draggable-form-field-item",components:{FBSimpleFields:_t,FBSelect:Ot,FBCheckbox:Ht,FBRadio:li,"form-group-field":bi,FBCustom:Ai,"form-builder-setting-modal":ko,"draggable-element":Q},setup(){const e=P();return{isDisableDraging:L(()=>e.getters.isDisableDraging)}},props:{value:{type:Array,default:null},list:{type:Array,default:null},isChild:{type:Boolean,default:()=>!1},keyVal:{type:[String,Number],default:""}},data:function(){return{isDragInProgress:!1,menuItems:null,selectedFormFieldObject:null,showSettingModal:!1}},beforeMount(){this.menuItems=this.$store.getters.getFormMenus},created(){window.emitter.on("formFieldSettingsApplied",this.onCloseSettingModal)},computed:{dragOptions(){return{animation:200,group:this.isChild?"faveo-form-builder-"+(this.keyVal?this.keyVal:Math.random()):"faveo-form-builder",disabled:!1,ghostClass:"ghost"}},originalValue(){return this.value?this.value:this.list}},methods:{dragChangeEventEmitter(e){this.$emit("input",e)},isSimpleFields(e){return["text","number","date","email","file","image","textarea","htmltextarea","taggable","float"].indexOf(e.type)>-1},isDisableSelectBox(e){return e.default===1&&e.title!=="Help Topic"&&e.title!=="Department"},onChildClick(e,t){let i=JSON.parse(JSON.stringify(this.menuItems));const r=this.getCurrentTimestamp();if(i[e].form_identifier=r,i[e].id=r,Array.isArray(t))for(let c=0;c<t.length;c++)t[c].nodes.push(i[e]);else t.nodes.push(i[e])},onShowSettingModal(e){this.selectedFormFieldObject=e,this.$store.commit("updateIsDisableDraging",!0),this.showSettingModal=!0},onCloseSettingModal(){this.$store.commit("updateIsDisableDraging",!1),this.showSettingModal=!1},getCurrentTimestamp(){return new Date().getTime()}}},So={class:"main-div__formbuilder"},Oo=["title"];function $o(e,t,i,r,c,n){const u=p("FBSimpleFields"),s=p("FBSelect"),f=p("FBCheckbox"),d=p("FBRadio"),v=p("form-group-field"),k=p("FBCustom"),y=p("draggable-element"),F=p("form-builder-setting-modal");return o(),l("div",So,[b(y,he(n.dragOptions,{"component-data":{tag:"div",type:"transition-group",name:e.isDragInProgress?null:"flip-list"},class:"item-container",list:n.originalValue,onStart:t[0]||(t[0]=_=>e.isDragInProgress=!0),onEnd:t[1]||(t[1]=_=>e.isDragInProgress=!1),onInput:n.dragChangeEventEmitter,"empty-insert-threshold":230,disabled:r.isDisableDraging,itemKey:"id"}),{item:B(({element:_,index:T})=>[(o(),l("div",{class:"item-group form-field-element",title:e.lang("move"),key:_.groupid||_.id},[n.isSimpleFields(_)||_.title==="Api"?(o(),D(u,{key:0,"field-data":_,"on-edit-form-field":n.onShowSettingModal,isChild:i.isChild},null,8,["field-data","on-edit-form-field","isChild"])):m("",!0),_.title!=="Api"&&(_.type==="api"||_.type==="select"||_.type==="select2"||_.type==="multiselect")?(o(),D(s,{key:1,"field-data":_,isDisabled:n.isDisableSelectBox(_),"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","isDisabled","on-edit-form-field","on-child-click","isChild"])):m("",!0),_.type=="checkbox"?(o(),D(f,{key:2,"field-data":_,"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","on-edit-form-field","on-child-click","isChild"])):m("",!0),_.type=="radio"?(o(),D(d,{key:3,"field-data":_,"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","on-edit-form-field","on-child-click","isChild"])):m("",!0),_.type=="group"?(o(),D(v,{key:4,"field-data":_,isChild:i.isChild},null,8,["field-data","isChild"])):m("",!0),_.type=="custom"?(o(),D(k,{key:5,"field-data":_,"on-edit-form-field":n.onShowSettingModal,isChild:i.isChild},null,8,["field-data","on-edit-form-field","isChild"])):m("",!0)],8,Oo))]),_:1},16,["component-data","list","onInput","disabled"]),b(K,{name:"modal"},{default:B(()=>[e.showSettingModal?(o(),D(F,{key:0,title:"settings",onCloseSettingModal:n.onCloseSettingModal,isShowSettingModal:e.showSettingModal,"field-data":e.selectedFormFieldObject},null,8,["onCloseSettingModal","isShowSettingModal","field-data"])):m("",!0)]),_:1})])}const Ao=C(wo,[["render",$o],["__scopeId","data-v-793eb0ff"]]);U.registerModule("faveoAutomator",$e);U.registerModule("formBuilderStore",Te);app.component("admin-panel-renderer",xe);app.component("draggable-form-field-item",Ao);app.component("form-renderer",le);app.component("alert",ne);app.component("modal",de);app.component("loader",De);app.component("custom-loader",se);app.component("reuse-loader",re);app.component("faveo-box",ce);app.component("faveo-image-element",ue);app.component("data-table",Ce);j.beforeEach((e,t,i)=>{if(sessionStorage.getItem("user_role")=="admin")i();else{let r=window.axios.defaults.baseURL;e.fullPath.includes("/thread/")&&(r+=e.fullPath),window.location.href=r}});setTimeout(()=>{app.use(j),app.use(U),app.mount("#app-admin")},1e3);j.beforeEach((e,t,i)=>{app.config.globalProperties.$Progress.start(),i()});j.afterEach(()=>{setTimeout(()=>{app.config.globalProperties.$Progress.finish()},1e3)});app.component("file-manager",ve);U.registerModule("fm",Fe);app.component("file-manager-container",fe);
