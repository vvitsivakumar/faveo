import{_ as v,D as g,T as A,s as y,e as f}from"../chunks/bootstrap.js";import{r as O,A as b}from"../chunks/adminRouter.js";import{a as p,r as l,o as r,c,e as n,d as D,w as d,f as e,B as C,g as S,t as k}from"../chunks/vendor.js";import"../chunks/FormGenerator.js";import"../chunks/AdminNavigationBar.js";import"../chunks/DataTableActions.js";import"../chunks/HelpSection.js";const E={name:"AdhocApprovalSettings",components:{"dynamic-select":g,"tool-tip":A},mounted(){this.getStatus()},data(){return{statusOnApprove:null,statusOnDeny:null,apiEndpoint:"adhoc-approval/api/statuses",loading:!1,loadingAnimationDuration:4e3}},methods:{onChange(t,a){this[a]=t},submit(){this.loading=!0,p.post(this.apiEndpoint,{status_on_approve:this.statusOnApprove?this.statusOnApprove.id:null,status_on_deny:this.statusOnDeny?this.statusOnDeny.id:null}).then(t=>{y(t,"adhocApprovalSettings")}).catch(t=>{f(t,"adhocApprovalSettings")}).finally(()=>{this.loading=!1,this.getStatus()})},getStatus(){p.get(this.apiEndpoint).then(({data:t})=>{let a=t.data;this.statusOnApprove=a.statusOnApproveJson,this.statusOnDeny=a.statusOnDenyJson}).catch(t=>{})}}},w={class:"col-sm-12"},N={key:0,class:"row"},B={class:"row"},T={class:"card-footer"},V=e("i",{class:"fas fa-save"},null,-1);function x(t,a,M,L,o,s){const u=l("alert"),m=l("custom-loader"),i=l("dynamic-select"),h=l("faveo-box");return r(),c("div",w,[n(u,{componentName:"adhocApprovalSettings"}),o.loading===!0?(r(),c("div",N,[n(m,{duration:o.loadingAnimationDuration},null,8,["duration"])])):D("",!0),n(h,{title:t.lang("adhoc_approval_card_header")},{actions:d(()=>[e("div",T,[e("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=C((..._)=>s.submit&&s.submit(..._),["prevent"]))},[V,S(" "+k(t.lang("adhoc_approval_save")),1)])])]),default:d(()=>[e("div",null,[e("div",B,[n(i,{name:"statusOnApprove",value:o.statusOnApprove,label:t.lang("adhoc_approval_status_on_approve"),onChange:s.onChange,classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses"},null,8,["value","label","onChange"]),n(i,{name:"statusOnDeny",value:o.statusOnDeny,label:t.lang("adhoc_approval_status_on_deny"),onChange:s.onChange,classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses"},null,8,["value","label","onChange"])])])]),_:1},8,["title"])])}const H=v(E,[["render",x]]);let J={path:"/adhoc-approval",component:b,name:"AdhocApproval",redirect:"/adhoc-approval/settings",children:[{path:"settings",component:H,name:"AdhocApproval Settings",meta:{title:"adhoc_approval",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"adhoc_approval"}}}]};O.addRoute(J);
