import{r as g,o as a,c as o,f as s,e as x,b,w as C,g as y,t as c,ax as F,a as A,q as L,F as d,n as u,i as S,d as f,B as R,h as k,p as E,j}from"./vendor.js";import{_ as w,p as B,f as U,e as I}from"./bootstrap.js";const V={props:{auth:{type:Object,default:()=>{}},from:{type:String,default:""}},computed:{sidebarStyle(){return this.isRtlLayout?{"margin-right":"-8px"}:{"margin-left":"-8px"}},fullName(){return this.auth.user_data.full_name},profilePic(){return this.auth.user_data.profile_pic}},methods:{subString(t){return B(t,20)}}},z={class:"sidebar",id:"scroll-bar"},M={class:"user-panel pt-3 pb-3 mb-3 d-flex"},T={class:"image"},q={class:"info"},H=["title","href"];function G(t,i,e,N,r,n){const h=g("faveo-image-element"),m=g("router-link");return a(),o("div",z,[s("div",M,[s("div",T,[x(h,{id:"sidebar-profile-img","source-url":n.profilePic,classes:["img-circle elevation-2"],"alternative-text":"User Image"},null,8,["source-url"])]),s("div",q,[e.from=="agent"?(a(),b(m,{key:0,class:"profile_name",to:"/profile"},{default:C(()=>[y(c(n.subString(n.fullName)),1)]),_:1})):(a(),o("a",{key:1,class:"d-block",title:n.fullName,href:t.basePath()+"/panel/profile"},c(n.subString(n.fullName)),9,H))])]),F(t.$slots,"default",{},void 0,!0)])}const O=w(V,[["render",G],["__scopeId","data-v-ce91aa62"]]);const J={name:"navigation",props:{navigation:{type:Object,default:()=>{}},toggleParent:{type:Function,default:()=>{}},from:{type:String,default:""}},data(){return{menuOpened:!1,active:!1}},mounted(){this.markNavigationActiveIfRequired()},methods:{toggleActive(){this.active=!0,this.menuOpened=!0,this.toggleParent()},isActive(t){if(this.getCurrentRouteUrl()==t.redirectUrl)return!0},onNavigationClick(t){t.redirectUrl&&t.redirectUrl.includes("tickets?show")&&window.emitter.emit("refreshTicketPage"),this.active=t.redirectUrl?!1:this.active,this.markNavigationActiveIfRequired(),t.routeString=="auth/logout"&&A.post("/auth/logout").then(i=>{window.location.replace(i.data.data)}).catch(i=>{}),U(t.hasChildren)&&(this.menuOpened=!this.menuOpened)},getLink(t){return U(t.hasChildren)?"javascript:void(0);":t.routeString=="panel/dashboard"||t.routeString=="admin/home"||t.routeString=="client/home"||t.routeString=="auth/logout"||t.routeString=="horizon"||t.routeString=="__clockwork/app"?t.redirectUrl:t.redirectUrl.replace(this.basePath(),"")},getCurrentRouteUrl(){return window.location.href},subStr(t,i){return B(t,parseInt(i))},markNavigationActiveIfRequired(){(this.getCurrentRouteUrl().replace("/panel","")==this.navigation.redirectUrl||this.getCurrentRouteUrl().replace("/admin","")==this.navigation.redirectUrl)&&(this.active=!0,this.toggleParent())}},watch:{active(t){return t&&setTimeout(()=>{let i=document.getElementsByClassName("exact-active");if(i!==void 0&&i.length)i[i.length-1].scrollIntoView({behavior:"smooth",block:"end"});else{let e=document.getElementsByClassName("active-navigation-element");e!==void 0&&e[e.length-1].scrollIntoView({behavior:"smooth"})}},10),t}},computed:{tooltipContent(){return this.navigation.hasCount&&this.navigation.name.length>16||!this.navigation.hasCount&&this.navigation.name.length>22?this.navigation.name:""}}},K=t=>(E("data-v-5c10c007"),t=t(),j(),t),Q={key:0,class:"nav-item"},W=["href"],X={key:0,class:"right badge badge-success",id:"nav_count"},Y={key:0,class:"right badge badge-success",id:"nav_count"},Z=["href"],$={key:0,class:"right badge badge-success",id:"nav_count"},ee=K(()=>s("i",{class:"right fas fa-angle-left"},null,-1));function te(t,i,e,N,r,n){const h=g("router-link"),m=g("navigation",!0),v=L("tooltip");return e.navigation.hasChildren?(a(),o("li",{key:1,class:u(["nav-item has-treeview",{"menu-open":r.menuOpened}])},[s("a",{href:"javascript:;",class:u(["nav-link",{active:r.active}]),id:"nav_child",onClick:i[3]||(i[3]=R(l=>n.onNavigationClick(e.navigation),["stop"]))},[s("i",{class:u("nav-icon "+e.navigation.iconClass)},null,2),S((a(),o("p",null,[y(c(e.navigation.name.length>22?n.subStr(e.navigation.name,22):e.navigation.name)+" ",1),ee])),[[v,n.tooltipContent]])],2),s("ul",{class:u(["nav nav-treeview",[{displayMenu:r.menuOpened,hideMenu:!r.menuOpened}]])},[(a(!0),o(d,null,k(e.navigation.children,(l,p)=>(a(),b(m,{navigation:l,key:p,toggleParent:n.toggleActive,from:e.from},null,8,["navigation","toggleParent","from"]))),128))],2)],2)):(a(),o("li",Q,[e.navigation.routeString!="panel/dashboard"&&e.navigation.routeString!="admin/home"&&e.navigation.routeString!="client/home"&&e.navigation.routeString!="auth/logout"&&e.navigation.routeString!="horizon"&&e.navigation.routeString!="__clockwork/app"?(a(),o(d,{key:0},[e.navigation.open_new_tab?(a(),o("a",{key:0,class:u(["nav-link",{"active active-navigation-element":r.active}]),href:t.basePath()+"/admin"+n.getLink(e.navigation),onClick:i[0]||(i[0]=l=>n.onNavigationClick(e.navigation))},[s("i",{class:u("nav-icon "+e.navigation.iconClass)},null,2),S((a(),o("p",null,[y(c(e.navigation.hasCount?n.subStr(e.navigation.name,16):n.subStr(e.navigation.name,20))+" ",1),t.boolean(e.navigation.hasCount)?(a(),o("span",X,c(e.navigation.count),1)):f("",!0)])),[[v,n.tooltipContent]])],10,W)):(a(),b(h,{key:1,class:u(["nav-link",{"active-navigation-element active":r.active}]),to:n.getLink(e.navigation),onClick:i[1]||(i[1]=l=>n.onNavigationClick(e.navigation))},{default:C(()=>[s("i",{class:u("nav-icon "+e.navigation.iconClass)},null,2),S((a(),o("p",null,[y(c(e.navigation.hasCount?n.subStr(e.navigation.name,16):n.subStr(e.navigation.name,22))+" ",1),t.boolean(e.navigation.hasCount)?(a(),o("span",Y,c(e.navigation.count),1)):f("",!0)])),[[v,n.tooltipContent]])]),_:1},8,["class","to"]))],64)):(a(),o("a",{key:1,class:u(["nav-link",{"active active-navigation-element":r.active}]),href:n.getLink(e.navigation),onClick:i[2]||(i[2]=l=>n.onNavigationClick(e.navigation))},[s("i",{class:u("nav-icon "+e.navigation.iconClass)},null,2),S((a(),o("p",null,[y(c(e.navigation.hasCount?n.subStr(e.navigation.name,16):n.subStr(e.navigation.name,22))+" ",1),t.boolean(e.navigation.hasCount)?(a(),o("span",$,c(e.navigation.count),1)):f("",!0)])),[[v,n.tooltipContent]])],10,Z))]))}const P=w(J,[["render",te],["__scopeId","data-v-5c10c007"]]);const ae={name:"agent-navigation-bar",description:"Agent Navigation Bar on agent panel",props:{auth:{type:Object,default:()=>{}},from:{type:String,default:""}},data(){return{navigationArray:[],loading:!0,counter:0,refreshNav:!1}},watch:{$route(t,i){this.counter+=1}},beforeMount(){window.emitter.on("refreshTicket",this.refreshSidebar),window.emitter.on("updateAgentSidebar",this.refreshSidebar),window.emitter.on("updateNavActive",()=>{this.refreshNav=!0}),this.getDataFromServer()},methods:{refreshSidebar(){this.getDataFromServer()},getDataFromServer(){A.get("/api/agent/navigation").then(t=>{this.loading=!1,this.navigationArray=t.data.data,this.refreshNav&&setTimeout(()=>{this.counter+=1,this.refreshNav=!1},400)}).catch(t=>{this.loading=!1,I(t)})}},components:{navigation:P,"navigation-layout":O}},ne={class:"mt-2",style:{"margin-bottom":"60px"}},ie={key:0,class:"agent-navigation"},oe={class:"nav nav-pills nav-sidebar flex-column nav-child-indent","data-widget":"treeview",role:"menu","data-accordion":"false"},re={class:"nav-header"};function se(t,i,e,N,r,n){const h=g("reuse-loader"),m=g("navigation"),v=g("navigation-layout");return a(),b(v,{auth:e.auth,from:e.from,key:r.counter},{default:C(()=>[s("nav",ne,[r.loading?(a(),o("div",ie,[x(h,{size:40})])):f("",!0),s("ul",oe,[(a(!0),o(d,null,k(r.navigationArray,(l,p)=>(a(),o(d,null,[s("li",re,c(l.name.toUpperCase()),1),(a(!0),o(d,null,k(l.navigations,(_,D)=>(a(),o(d,null,[_.name?(a(),b(m,{navigation:_,key:_.name,from:e.from},null,8,["navigation","from"])):f("",!0)],64))),256))],64))),256))])])]),_:1},8,["auth","from"])}const _e=w(ae,[["render",se]]);const le={name:"admin-navigation-bar",description:"Admin Navigation Bar on admin panel",props:{auth:{type:Object,default:()=>{}},from:{type:String,default:""}},data(){return{navigationArray:[],loading:!0,counter:0}},watch:{$route(t,i){this.counter+=1}},created(){window.emitter.on("updateSideNav",this.refreshSidebar)},beforeMount(){this.getDataFromServer()},methods:{refreshSidebar(){this.getDataFromServer()},getDataFromServer(){A.get("/api/admin/navigation").then(t=>{this.loading=!1,this.navigationArray=t.data.data,this.navigationArray.forEach(i=>{i.main_navigation||i.navigations.forEach(e=>{e.open_new_tab=!0})})}).catch(t=>{this.loading=!1,I(t)})}},components:{navigation:P,"navigation-layout":O}},ce={class:"mt-2",style:{"margin-bottom":"60px"}},ue={key:0,class:"admin-navigation"},de={class:"nav nav-pills nav-sidebar flex-column nav-child-indent","data-widget":"treeview",role:"menu","data-accordion":"false"},ge={class:"nav-header"};function ve(t,i,e,N,r,n){const h=g("reuse-loader"),m=g("navigation"),v=g("navigation-layout");return a(),b(v,{auth:e.auth,from:e.from,key:r.counter},{default:C(()=>[s("nav",ce,[r.loading?(a(),o("div",ue,[x(h,{size:40})])):f("",!0),s("ul",de,[(a(!0),o(d,null,k(r.navigationArray,(l,p)=>(a(),o(d,null,[s("li",ge,c(l.name.toUpperCase()),1),(a(!0),o(d,null,k(l.navigations,(_,D)=>(a(),o(d,null,[_.name?(a(),b(m,{navigation:_,key:_.name,from:e.from},null,8,["navigation","from"])):f("",!0)],64))),256))],64))),256))])])]),_:1},8,["auth","from"])}const fe=w(le,[["render",ve]]);export{fe as A,_e as a};
