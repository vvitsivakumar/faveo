import{r as h,c as l,F as M,h as P,f as s,e as u,G as N,g as p,t as r,d,w as y,b as C,o as n,n as O,T as R,K as Tt,p as q,j as E,q as U,i as v,a as S,u as x,m as B,B as fe,D as et,v as de,A as Re,s as _e,ab as ze,af as At,ak as Ot,ag as Lt,ah as Pt,ae as Ut,ac as $t,ad as Ft,at as Vt,aj as qt,al as Et,x as tt,y as st,V as G,W as ce,$ as at,au as Rt,_ as zt,av as Bt,aw as Nt}from"./vendor.js";import{A as jt,c as Wt,d as Kt,e as Ht,I as Yt,H as xt,U as Jt,f as ot,D as Be,g as Gt,h as nt,i as it,M as lt,j as rt,S as Se,R as Qt,F as me,k as Zt,N as Xt}from"./FormGenerator.js";import{H as es}from"./HelpSection.js";import{_ as T,p as X,e as L,T as dt,s as V,V as K,l as j,c as H,M as ts,j as te,D as Q,N as be,S as ye,R as ne,X as ct,P as ss,f as ae,q as ve,v as as,w as os,Y as ns,Z as ht,k as ie,G as is,r as ls,$ as rs,a0 as Ye}from"./bootstrap.js";import{c as Ne,a as oe,e as ds}from"./DataTableActions.js";import{v as cs,R as ut,L as _t}from"./LoginLogs.js";import{B as hs}from"./BarcodeModal.js";import{b as us,A as je,c as _s}from"./TicketsIndex.js";import{T as Ie}from"./PermaLink.js";const ms={name:"agent-panel-layout",props:{auth:{type:Object,default:()=>{}},company:{type:Object,default:()=>{}},portal:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},isMailConfigured:{type:Boolean,default:!0},isFAEnforced:{type:[Boolean,Number],default:!1},dummyInstall:{type:Boolean,default:!1},isUpdatedVersion:{type:[Boolean,Number],default:!1}},components:{"agent-nav-bar":jt,"agent-side-bar":Wt,"agent-bread-crumbs":Kt,"agent-footer":Ht,"help-widget":es},data(){return{selectedOption:"1 Day",alertWrapper:0,alertData:"",alertContent:"",searchCron:!1,isAnyMigration:!1}},beforeMount(){this.checkForUpdate(),this.checkSearchCronCommand()},updated(){this.logAlertWrapperHeight()},mounted(){this.logAlertWrapperHeight(),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize)},methods:{layoutLoaded(){window.emitter.emit("layout-loaded")},getAlertBackgroundColor(e){const t="#ffc107",c=parseInt(t.slice(1,3),16)+e*10,o=parseInt(t.slice(3,5),16)+e*10,i=parseInt(t.slice(5,7),16)+e*10,_=g=>Math.min(255,Math.max(0,g));return`rgb(${_(c)}, ${_(o)}, ${_(i)})`},async checkForUpdate(){try{const e=await axios.post("/display-pop-ups");this.alertData=e.data.map(o=>({...o,selectedOption:"1 Day",topPosition:0}));const t=[];for(const o of this.alertData)try{const i={value:o.description},_=await axios.post("/give-me-read",i);t.push(_.data)}catch(i){console.log(i),t.push("")}this.alertData.forEach((o,i)=>{o.description=t[i]});const c=(await axios.get("/get-days")).data.data;for(const o of this.alertData){const i=o.id.toString();if(c.hasOwnProperty(i)){const _=c[i];o.selectedOption=_===1?"1 Day":`${_} Days`}}this.alertContent=this.alertData,await this.logAlertWrapperHeight()}catch(e){console.log(e)}},onCloseAlert(e){Array.isArray(this.alertContent)||(this.alertContent=[]);const t=this.alertContent.findIndex(o=>o.id===e.id);t>-1&&this.alertContent.splice(t,1);const a={};a.pop_id=e.id;let c=parseInt(e.selectedOption.match(/\d+/)[0],10);a.days=c=c,a.user_id=this.auth.user_data.id,axios.post("/post-days",a).then(o=>{this.checkForUpdate()}).catch(o=>{console.log(o)})},logAlertWrapperHeight(){this.$nextTick(()=>{const e=this.$refs.alertWrapperElements;if(e){let t=0;e.forEach((a,c)=>{if(a){const o=a.clientHeight;t+=o;const i=t-o;this.alertContent[c].topPosition=i}}),this.alertWrapper=t}})},onWindowResize(){this.logAlertWrapperHeight()},updateSelectedOption(e,t){e.selectedOption=t},checkSearchCronCommand(){axios.get("check/search-cron").then(e=>{this.searchCron=e.data.data.cron_status,this.isAnyMigration=e.data.data.is_any_migration}).catch(e=>{this.searchCron=!1,this.isAnyMigration=!1})}}},pe=e=>(q("data-v-3633cfb9"),e=e(),E(),e),ps=["onClick"],gs={class:"row"},fs={class:"col-sm-12 alert-description"},bs={class:"col-sm-10"},ys=pe(()=>s("span",{style:{"vertical-align":"1px"}},[s("i",{class:"fas fa-warning"})],-1)),vs=["innerHTML"],ws=["href"],ks=["href"],Cs=pe(()=>s("span",{style:{"vertical-align":"1px"}},[s("i",{class:"fas fa-warning"})],-1)),Ds=["innerHTML"],Ms={class:"remind-select float-right"},Ss=pe(()=>s("label",{class:"remind-option"},r("Remind me after : "),-1)),Is={class:"btn-group"},Ts={class:"dropdown-menu option-container"},As=["onClick"],Os=["onClick"],Ls=["onClick"],Ps={class:"content-wrapper"},Us={class:"content"},$s={class:"container-fluid"},Fs={key:0,class:"alert alert-info alert-dismissible"},Vs=pe(()=>s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),qs=pe(()=>s("i",{class:"fas fa-warning"},null,-1)),Es=["href"],Rs={key:1,class:"alert alert-warning"},zs=pe(()=>s("i",{class:"fas fa-warning"},null,-1)),Bs=["href"],Ns={key:2,class:"alert alert-warning"},js=pe(()=>s("i",{class:"fas fa-spinner"},null,-1)),Ws={class:"row"},Ks={id:"monitoring-system-status"};function Hs(e,t,a,c,o,i){const _=h("agent-nav-bar"),g=h("agent-side-bar"),m=h("agent-bread-crumbs"),f=h("alert"),w=h("router-view"),D=h("vue-progress-bar"),A=h("agent-footer"),k=h("help-widget");return n(),l(M,null,[(n(!0),l(M,null,P(o.alertContent,(b,F)=>(n(),l("div",{key:F},[b.use===1?(n(),l("div",{key:0,ref_for:!0,ref:"alertWrapperElements",class:"alert-warning alert-wrapper mb-0 pt-2 pl-3 pb-1",style:N({top:b.topPosition+"px",backgroundColor:i.getAlertBackgroundColor(F),zIndex:F===o.alertContent.length-1?9999:99999999})},[s("button",{type:"button",onClick:z=>i.onCloseAlert(b),class:"close pt-2 pl-4 pr-3",id:"alert_close"},"×",8,ps),s("div",gs,[s("div",fs,[s("div",bs,[a.auth.user_data.role=="admin"?(n(),l(M,{key:0},[ys,s("span",{innerHTML:b.description},null,8,vs),p("  "),b.pop_name==="update"&&b.link?(n(),l("a",{key:0,class:"update-conent",href:b.link+"admin/check-updates"},[s("b",null,r(e.trans("click-here-to-update")),1)],8,ws)):d("",!0),b.pop_name==="renew"&&b.link?(n(),l("a",{key:1,class:"update-conent",href:b.link},[s("b",null,r(e.trans("click-here-to-renew")),1)],8,ks)):d("",!0)],64)):(n(),l(M,{key:1},[Cs,s("span",{innerHTML:b.description},null,8,Ds)],64))]),s("div",Ms,[Ss,p("  "),s("div",Is,[s("button",{type:"button",class:"dropdown-toggle select-button alert-warning btn btn-outline",style:N([{backgroundColor:i.getAlertBackgroundColor(F)},{"margin-right":"0px !important"}]),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r(b.selectedOption),5),s("div",Ts,[s("div",{class:O(["dropdown-item option-select",{alertDay:b.selectedOption==="1 Day"}]),onClick:z=>i.updateSelectedOption(b,"1 Day")},"1 Day",10,As),s("div",{class:O(["dropdown-item option-select",{alertDay:b.selectedOption==="3 Days"}]),onClick:z=>i.updateSelectedOption(b,"3 Days")},"3 Days",10,Os),s("div",{class:O(["dropdown-item option-select",{alertDay:b.selectedOption==="7 Days"}]),onClick:z=>i.updateSelectedOption(b,"7 Days")},"7 Days",10,Ls)])])])])])],4)):d("",!0)]))),128)),s("div",{class:"wrapper",style:N({top:o.alertContent?this.alertWrapper+"px !important":""})},[u(_,{style:N({top:o.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,portal:a.portal},null,8,["style","auth","portal"]),u(g,{style:N({top:o.alertContent?this.alertWrapper+"px !important":""}),alertWrapper:o.alertWrapper,alertData:o.alertContent,auth:a.auth,company:a.company,portal:a.portal},null,8,["style","alertWrapper","alertData","auth","company","portal"]),s("div",Ps,[u(m),s("div",Us,[s("div",$s,[u(f,{componentName:"layout"}),a.dummyInstall?(n(),l("div",Fs,[Vs,qs,a.auth.user_data.role=="admin"?(n(),l(M,{key:0},[p(r(e.trans("dummy_data_installation_message"))+" ",1),s("a",{href:e.basePath()+"/admin/clean-dummy-data"},r(e.trans("click"))+" ",9,Es),p(r(e.trans("clear-dummy-data")),1)],64)):(n(),l(M,{key:1},[p(r(e.trans("clear-dummy-data-agent-message")),1)],64))])):d("",!0),!a.dummyInstall&&!a.isMailConfigured?(n(),l("div",Rs,[p("  "),zs,p("  "),a.auth.user_data.role=="admin"?(n(),l(M,{key:0},[p(r(e.trans("system-outgoing-incoming-mail-not-configured"))+" ",1),s("a",{href:e.basePath()+"/admin/email/create"},r(e.trans("confihure-the-mail-now")),9,Bs)],64)):(n(),l(M,{key:1},[p(r(e.trans("system-mail-not-configured-agent-message")),1)],64))])):d("",!0),!a.dummyInstall&&(o.searchCron||o.isAnyMigration)?(n(),l("div",Ns,[p("  "),js,p("  "+r(o.isAnyMigration?e.trans("module-migration"):e.trans("search-cron-running")),1)])):d("",!0),s("div",Ws,[u(w,null,{default:y(({Component:b,route:F})=>[u(R,{name:"fade"},{default:y(()=>[(n(),C(Tt(b),{key:F.fullPath,auth:a.auth,isFAEnforced:a.isFAEnforced},null,8,["auth","isFAEnforced"]))]),_:2},1024)]),_:1}),u(D,{class:"color-shift-progress-bar"})])])])]),u(A,{company:a.company,whiteLabel:a.whiteLabel,tag:a.tag,version:a.version,lang:a.auth.user_data.user_language},null,8,["company","whiteLabel","tag","version","lang"]),a.whiteLabel?d("",!0):(n(),C(k,{key:0})),s("div",Ks,r(i.layoutLoaded()),1)],4)],64)}const le=T(ms,[["render",Hs],["__scopeId","data-v-3633cfb9"]]);const Ys={name:"data-widget",props:{dataWidgetData:{type:Array,default:()=>[]},widgetClass:{type:Array,default:()=>["col-md-4","col-sm-6","col-xs-12"]}},data:()=>({}),methods:{subString(e,t){return X(e,t)}}},xs={key:0,class:"row"},Js={class:"info-box"},Gs={class:"info-box-content"},Qs={class:"info-box-text"},Zs={class:"info-box-number"};function Xs(e,t,a,c,o,i){const _=h("router-link"),g=U("tooltip");return a.dataWidgetData&&a.dataWidgetData.length?(n(),l("div",xs,[(n(!0),l(M,null,P(a.dataWidgetData,(m,f)=>(n(),l("div",{class:O(a.widgetClass),key:f},[u(_,{to:m.redirectTo?decodeURIComponent(m.redirectTo.replace(e.basePath(),"")):"",rel:"noopener",id:"dark-text",class:"text-dark",style:N({cursor:m.redirectTo?"pointer":"auto"})},{default:y(()=>[s("div",Js,[m.icon_class?(n(),l("span",{key:0,class:O(["info-box-icon",m.is_default?"bg-light box-icon-color":""]),style:N({background:m.icon_color})},[s("i",{class:O(m.icon_class)},null,2)],6)):d("",!0),v((n(),l("div",Gs,[s("span",Qs,r(i.subString(m.key,50)),1),s("span",Zs,r(m.value),1)])),[[g,m.key+": "+m.value]])])]),_:2},1032,["to","style"])],2))),128))])):d("",!0)}const ea=T(Ys,[["render",Xs],["__scopeId","data-v-39453b0a"]]);const ta={name:"dashboard-top-widgets",data:()=>({dataWidgetData:null,hasDataFetched:!1}),props:{topWidgetCount:{type:Number,default:3}},beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(){this.$store.dispatch("startLoader",this.$options.name),S.get("api/agent/dashboard-report/top-widget").then(e=>{this.dataWidgetData=e.data.data}).catch(e=>{L(e,"dashboard-page")}).finally(()=>{this.hasDataFetched=!0,this.$store.dispatch("stopLoader",this.$options.name)})}},components:{"data-widget":ea}},sa=e=>(q("data-v-92eee3e7"),e=e(),E(),e),aa={class:"top-widget"},oa={key:0,class:"row"},na=sa(()=>s("div",{class:"data-widget-box-skeleton"},null,-1)),ia=[na];function la(e,t,a,c,o,i){const _=h("data-widget");return n(),l("div",aa,[e.dataWidgetData?d("",!0):(n(),l("div",oa,[(n(!0),l(M,null,P(a.topWidgetCount,g=>(n(),l("div",{class:"col-12 col-sm-6 col-md-3",key:g},ia))),128))])),e.dataWidgetData&&e.hasDataFetched?(n(),C(_,{key:1,"data-widget-data":e.dataWidgetData,"widget-class":["col-md-3","col-sm-6","col-12"]},null,8,["data-widget-data"])):d("",!0)])}const ra=T(ta,[["render",la],["__scopeId","data-v-92eee3e7"]]),da={name:"dashboard-help",props:{helplink:{type:String,default:""},description:{type:String,default:""}},data:()=>({}),components:{"tool-tip":dt}},ca={key:0},ha=["href"];function ua(e,t,a,c,o,i){const _=h("tool-tip");return a.helplink||a.description?(n(),l("span",ca,[a.helplink?(n(),l("a",{key:0,href:a.helplink,target:"__blank"},[u(_,{slot:"headerTooltip",message:a.description,size:"medium"},null,8,["message"])],8,ha)):d("",!0),!a.helplink&&a.description?(n(),C(_,{key:1,slot:"headerTooltip",message:a.description,size:"medium"},null,8,["message"])):d("",!0)])):d("",!0)}const ge=T(da,[["render",ua]]);const _a={name:"dashboard-recent-activities",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},data:()=>({notificationData:[],page:1,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getLink(e){return e.includes("/import-tracking/")?e.replace(this.basePath(),this.basePath()+"/admin"):e},checkUrl(e){e.includes("/export/download")?S.get(e).then(t=>{let a=e.replace(this.basePath(),"");this.redirect(a)}).catch(t=>{L(t,"dashboard-page")}):window.open(e.includes("/import-tracking/")?e.replace(this.basePath(),this.basePath()+"/admin"):e)},handleContextMenu(e){e.includes("/export/download")&&event.preventDefault()},getDataFromServer(e,t=!1,a=""){this.loading=!0,S.get("api/in-app/auth/notifications"+a,{params:{page:this.page}}).then(c=>{this.updateData(c.data.data,e,t),this.loading=!1}).catch(c=>{this.loading=!1,L(c,"dashboard-page")})},updateData(e,t,a){a?this.notificationData=e:this.notificationData.push(...e),t&&t.loaded(),e.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0},refreshData(){this.hasDataFetched=!1,this.page=1,this.notificationData=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":ge}},Te=e=>(q("data-v-7240ebbf"),e=e(),E(),e),ma={class:"card card-light dashboard-widget-box"},pa={class:"card-header"},ga={class:"card-title"},fa=Te(()=>s("i",{class:"far fa-bell","aria-hidden":"true"},null,-1)),ba={class:"card-tools"},ya=Te(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),va=[ya],wa={key:0,class:"card-body scrollable-area"},ka={class:"products-list product-list-in-card"},Ca={class:"product-img"},Da={class:"product-info fw-400",style:{"padding-top":"1rem"}},Ma={class:"row"},Sa={class:"col-sm-2"},Ia={class:"col-sm-8"},Ta=["href","onClick","onContextmenu"],Aa=["innerHTML"],Oa={class:"col-md-2"},La={class:"float-right"},Pa=Te(()=>s("span",null,null,-1)),Ua=Te(()=>s("span",null,null,-1)),$a={key:1,class:"no-data-section"};function Fa(e,t,a,c,o,i){const _=h("faveo-image-element"),g=h("infinite-loading"),m=U("tooltip");return n(),l("div",ma,[s("div",pa,[s("h3",ga,[fa,p(" "+r(e.lang("recent_activities")),1)]),s("div",ba,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=f=>i.refreshData())},va,2)),[[m,e.lang("refresh")]])])]),e.notificationData.length>0?(n(),l("div",wa,[s("ul",ka,[(n(!0),l(M,null,P(e.notificationData,f=>(n(),l("li",{class:"item",key:f.id},[s("div",Ca,[u(_,{id:"user_img_"+f.id,"source-url":f.notified_by?f.notified_by.profile_pic:e.basePathVersion()+"/themes/default/common/images/system.png","default-image":"system.png",classes:["img-circle"],"alternative-text":"activity.notified_by ? activity.notified_by.full_name: 'Elea'"},null,8,["id","source-url"])]),s("div",Da,[s("div",Ma,[s("div",Sa,r(f.notified_by?f.notified_by.full_name:"Elea"),1),s("div",Ia,[s("a",{class:"product-title fw-400",href:i.getLink(f.action_link),onClick:fe(w=>i.checkUrl(f.action_link),["prevent"]),onContextmenu:w=>i.handleContextMenu(f.action_link),target:"_blank"},[s("span",{innerHTML:f.notify_message},null,8,Aa)],40,Ta)]),s("div",Oa,[s("span",La,r(c.formattedTime(f.created_at)),1)])])])]))),128)),u(g,{onInfinite:i.getDataFromServer},{spinner:y(()=>[Pa]),complete:y(()=>[Ua]),_:1},8,["onInfinite"])])])):d("",!0),e.hasDataFetched&&e.notificationData.length===0?(n(),l("div",$a,r(e.lang("no_data_available")),1)):d("",!0)])}const Va=T(_a,[["render",Fa],["__scopeId","data-v-7240ebbf"]]);const qa={name:"dashboard-todo",data:()=>({todoList:[],newTodoText:"",editMode:!1,editTodoIndex:void 0,page:1,loading:!1,showModal:!1,deleteUrl:""}),beforeMount(){this.getTodoList()},created(){window.emitter.on("taskUpdated",()=>{this.getTodoList(null,"success",!0)})},methods:{getTodoList(e,t,a=!1){a&&(this.page=1,this.todoList=[]),this.loading=!0,S.get("api/agent/todo-list?page="+this.page).then(c=>{t&&(V(t,"dashboard-page"),this.loading=!1),c.data.data.data.length?(this.page++,this.todoList=[...this.todoList,...c.data.data.data],e&&e.loaded(),this.loading=!1):(e&&e.complete(),this.loading=!1)}).catch(c=>{L(c,"dashboard-page"),this.loading=!1}).finally(()=>{setTimeout(()=>{this.$refs.todoInput.focus()},1)})},editTodoName(){if(typeof this.editTodoIndex<"u"){let e=JSON.parse(JSON.stringify(this.todoList));e[this.editTodoIndex].name=this.newTodoText,this.updateTodo(e).then(t=>{V(t,"dashboard-page"),this.todoList[this.editTodoIndex].name=this.newTodoText,this.newTodoText="",this.editMode=!1,this.loading=!1}).catch(t=>{this.loading=!1,L(t,"dashboard-page")})}},onTodoMarkClick(e){this.todoList[e].status=this.getNextState(this.todoList[e].status),this.updateTodo(this.todoList).then(t=>{V(t,"dashboard-page"),this.loading=!1}).catch(t=>{L(t,"dashboard-page"),this.loading=!1})},getTodoMarkerTitle(e){return this.trans("click_to_change_status")+`${this.trans(this.getNextState(e))}`},getNextState(e){return{pending:"in-progress","in-progress":"completed",completed:"pending",Open:"In-progress","In-progress":"Closed",Closed:"Open"}[e]},onReorder(){this.updateTodo(this.todoList).then(e=>{V(e,"dashboard-page"),this.loading=!1}).catch(e=>{L(e,"dashboard-page"),this.loading=!1})},addNewTodo(){S.post("api/agent/create-todo",{name:this.newTodoText}).then(e=>{this.newTodoText="",this.getTodoList(null,e,!0)}).catch(e=>{L(e,"dashboard-page")})},deleteTodo(e){this.deleteUrl="api/agent/todo/"+e,this.showModal=!0},onClose(){this.showDeleteModal=!1,this.showAssociateModal=!1,this.showModal=!1},updateTodo(e){return this.loading=!0,S.post("api/agent/update-todos",{todos:e})},onEditTodo(e){this.editMode=!0,this.editTodoIndex=e,this.newTodoText=this.todoList[e].name,this.$refs.todoInput.focus()},cancelEditMode(){this.editMode=!1,this.newTodoText="",this.editTodoIndex=void 0}},components:{"delete-modal":Ne,"draggable-element":et}},re=e=>(q("data-v-e3c1efec"),e=e(),E(),e),Ea={class:"card card-light dashboard-widget-box"},Ra={class:"card-header border-0"},za={class:"card-title"},Ba=re(()=>s("i",{class:"fas fa-list-ul"},null,-1)),Na={key:0,class:"card-tools"},ja={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Wa=re(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),Ka=[Wa],Ha={class:"card-body"},Ya={class:"row"},xa=["placeholder"],Ja={class:"col-md-3"},Ga=re(()=>s("i",{class:"fas fa-times"},null,-1)),Qa={key:0,class:"no-todo-section"},Za={key:1,class:"scrollable-area mt-2"},Xa={class:"list-group-item todo_item"},eo={class:"row"},to={class:"col-sm-9"},so={key:0,class:"todo-mark"},ao=re(()=>s("i",{class:"fas fa-lock fa-lg","aria-hidden":"true",style:{color:"grey"}},null,-1)),oo=["onClick"],no=re(()=>s("i",{class:"far fa-clock fa-lg","aria-hidden":"true",style:{color:"red"}},null,-1)),io=[no],lo=["onClick"],ro=re(()=>s("i",{class:"fas fa-check-circle fa-lg","aria-hidden":"true",style:{color:"orange"}},null,-1)),co=[ro],ho=["onClick"],uo=re(()=>s("i",{class:"fas fa-check-circle fa-lg","aria-hidden":"true",style:{color:"green"}},null,-1)),_o=[uo],mo={class:"todo-tools col-sm-3 text-right"},po=["onClick"],go=["onClick"],fo=re(()=>s("span",null,null,-1)),bo=re(()=>s("span",null,null,-1));function yo(e,t,a,c,o,i){const _=h("draggable-element"),g=h("infinite-loading"),m=h("delete-modal"),f=U("tooltip");return n(),l(M,null,[s("div",Ea,[s("div",Ra,[s("h3",za,[Ba,p(" "+r(e.lang("todo")),1)]),e.loading?(n(),l("div",Na,[v((n(),l("button",ja,Ka)),[[f,e.lang("refresh")]])])):d("",!0)]),s("div",Ha,[s("div",Ya,[s("div",{class:O(e.editMode?"col-md-9":"col-md-12")},[v(s("input",{class:"form-control",ref:"todoInput",autocomplete:"off",placeholder:e.lang("todo_placeholder"),autofocus:"","onUpdate:modelValue":t[0]||(t[0]=w=>e.newTodoText=w),onKeyup:t[1]||(t[1]=Re(w=>e.editMode?i.editTodoName():i.addNewTodo(),["enter"]))},null,40,xa),[[de,e.newTodoText,void 0,{trim:!0}]])],2),s("div",Ja,[e.editMode?v((n(),l("button",{key:0,type:"button",class:"btn btn-default pull-right todo_edit_btn",onClick:t[2]||(t[2]=(...w)=>i.cancelEditMode&&i.cancelEditMode(...w))},[Ga,p(" "+r(e.lang("cancel")),1)])),[[f,e.lang("cancel_editing")]]):d("",!0)])]),e.todoList.length===0?(n(),l("div",Qa,[s("blockquote",null,'" '+r(e.lang("todo_quote"))+' "',1)])):(n(),l("div",Za,[u(_,{class:"list-group",tag:"ul",list:e.todoList,onEnd:i.onReorder,itemKey:"id"},{item:y(({element:w,index:D})=>[s("li",Xa,[s("div",eo,[s("div",to,[w.is_private?v((n(),l("span",so,[ao,p(" ")])),[[f,e.trans("private_task")]]):d("",!0),v((n(),l("span",{class:"todo-mark",onClick:A=>i.onTodoMarkClick(D)},io,8,oo)),[[_e,["pending","Open"].includes(w.status)],[f,i.getTodoMarkerTitle(w.status)]]),v((n(),l("span",{class:"todo-mark",onClick:A=>i.onTodoMarkClick(D)},co,8,lo)),[[_e,["in-progress","In-progress"].includes(w.status)],[f,i.getTodoMarkerTitle(w.status)]]),v((n(),l("span",{class:"todo-mark",onClick:A=>i.onTodoMarkClick(D)},_o,8,ho)),[[_e,["completed","Closed"].includes(w.status)],[f,i.getTodoMarkerTitle(w.status)]]),s("span",{class:"text todo-text",style:N(["completed","Closed"].includes(w.status)?{"text-decoration":"line-through"}:{})},r(w.name),5),v(s("span",{class:"badge badge-danger text-lowercase ml-1"},r(e.lang(w.status)),513),[[_e,["pending","Open"].includes(w.status)]]),v(s("span",{class:"badge badge-info text-lowercase ml-1"},r(e.lang(w.status)),513),[[_e,["in-progress","In-progress"].includes(w.status)]]),v(s("span",{class:"badge badge-success text-lowercase ml-1"},r(e.lang(w.status)),513),[[_e,["completed","Closed"].includes(w.status)]])]),s("div",mo,[v(s("i",{class:"fas fa-trash",onClick:A=>i.deleteTodo(w.id,D),style:{cursor:"pointer",color:"red"},"aria-hidden":"true"},null,8,po),[[f,e.lang("remove")]]),p("  "),v(s("i",{class:"fas fa-pencil-alt",onClick:A=>i.onEditTodo(D),style:{cursor:"pointer"},"aria-hidden":"true"},null,8,go),[[f,e.lang("edit")]])])])])]),_:1},8,["list","onEnd"]),u(g,{onInfinite:i.getTodoList,ref:"infiniteLoading"},{spinner:y(()=>[fo]),complete:y(()=>[bo]),_:1},8,["onInfinite"])]))])]),e.showModal?(n(),C(m,{key:0,onClose:i.onClose,showModal:e.showModal,deleteUrl:e.deleteUrl,alertComponentName:"dashboard-page"},null,8,["onClose","showModal","deleteUrl"])):d("",!0)],64)}const vo=T(qa,[["render",yo],["__scopeId","data-v-e3c1efec"]]);const wo={name:"dashboard-system-analysis",data:()=>({sysAnalysisData:null,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(e=""){this.loading=!0,S.get("api/agent/dashboard-report/system-analysis"+e).then(t=>{this.sysAnalysisData=t.data.data,this.hasDataFetched=!0,this.loading=!1}).catch(t=>{this.loading=!1,L(t,"dashboard-page")}).finally(()=>{this.hasDataFetched=!0})},refreshData(){this.hasDataFetched=!1,this.page=1,this.notificationData=[],this.getDataFromServer("?refresh=1")}},components:{"dashboard-help":ge}},mt=e=>(q("data-v-f100d15e"),e=e(),E(),e),ko={class:"card card-light dashboard-widget-box"},Co={class:"card-header"},Do={class:"card-title"},Mo=mt(()=>s("i",{class:"fas fa-desktop","aria-hidden":"true"},null,-1)),So={class:"card-tools"},Io=mt(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),To=[Io],Ao={key:0,class:"card-body scrollable-area"},Oo={class:"system-analysis-list"},Lo={class:"nav flex-column"},Po=["innerHTML"];function Uo(e,t,a,c,o,i){const _=h("dashboard-help"),g=U("tooltip");return n(),l("div",ko,[s("div",Co,[e.sysAnalysisData?(n(),l(M,{key:0},[s("h3",Do,[Mo,p(" "+r(e.sysAnalysisData.title),1)]),u(_,{helplink:e.sysAnalysisData.helpLink,description:e.sysAnalysisData.description},null,8,["helplink","description"])],64)):d("",!0),s("div",So,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=m=>i.refreshData())},To,2)),[[g,e.lang("refresh")]])])]),e.sysAnalysisData?(n(),l("div",Ao,[(n(!0),l(M,null,P(e.sysAnalysisData.data,(m,f)=>(n(),l("div",{key:f},[s("div",Oo,[s("ul",Lo,[(n(!0),l(M,null,P(m.attributes,(w,D)=>(n(),l("li",{key:D},[p(r(m.title)+" ",1),s("span",{class:"float-right badge bg-blue",innerHTML:w.value},null,8,Po)]))),128))])])]))),128))])):d("",!0)])}const $o=T(wo,[["render",Uo],["__scopeId","data-v-f100d15e"]]);const Fo={name:"dashboard-require-immediate-action",data:()=>({ticketData:{title:"",data:[]},page:1,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,c=a.parseFromString(e,"text/html");return t=="href"?c.getElementById("hyper_link")[t].replace(this.basePath(),""):c.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,S.get("api/agent/dashboard-report/require-immediate-action"+a,{params:{page:this.page}}).then(c=>{this.updateData(c.data.data,e,t),this.loading=!1}).catch(c=>{this.loading=!1,L(c,"dashboard-page")})},updateData(e,t,a){this.ticketData.title=e.title,this.ticketData.description=e.description,this.ticketData.helplink=e.helpLink,a?this.ticketData.data=e.data:this.ticketData.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0},refreshData(){this.ticketData.data=[],this.page=1,this.hasDataFetched=!1,this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":ge}},Ae=e=>(q("data-v-0e58448c"),e=e(),E(),e),Vo={class:"card card-light dashboard-widget-box"},qo={class:"card-header with-border"},Eo={class:"card-title"},Ro=Ae(()=>s("i",{class:"fas fa-exclamation-triangle text-red","aria-hidden":"true"},null,-1)),zo={class:"card-tools"},Bo=Ae(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),No=[Bo],jo={key:0,class:"card-body scrollable-area"},Wo={class:"products-list product-list-in-card pl-2 pr-2"},Ko={class:"product-info"},Ho={class:"fw-500"},Yo={key:0,class:"badge badge-info"},xo={key:1,class:"badge badge-warning"},Jo={class:"float-right"},Go=["innerHTML"],Qo=Ae(()=>s("span",null,null,-1)),Zo=Ae(()=>s("span",null,null,-1)),Xo={key:1,class:"no-data-section"};function en(e,t,a,c,o,i){const _=h("dashboard-help"),g=h("router-link"),m=h("infinite-loading"),f=U("tooltip");return n(),l("div",Vo,[s("div",qo,[e.hasDataFetched&&e.ticketData.title?(n(),l(M,{key:0},[s("h3",Eo,[Ro,p(" "+r(e.ticketData.title),1)]),u(_,{helplink:e.ticketData.helpLink,description:e.ticketData.description},null,8,["helplink","description"])],64)):d("",!0),s("div",zo,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=w=>i.refreshData())},No,2)),[[f,e.lang("refresh")]])])]),e.ticketData.data.length>0?(n(),l("div",jo,[s("ul",Wo,[(n(!0),l(M,null,P(e.ticketData.data,(w,D)=>(n(),l("li",{class:"item",key:D},[s("div",Ko,[s("span",Ho,[u(g,{to:i.getRoute(w.title,"href"),class:O(i.getRoute(w.title,"className"))},{default:y(()=>[p(r(i.getRoute(w.title,"textContent")),1)]),_:2},1032,["to","class"])]),p("   "),w.metaData.assigned_to_me?(n(),l("span",Yo,r(e.lang("assigned_to_me")),1)):d("",!0),p("  "),w.metaData.reopened?(n(),l("span",xo,r(e.lang("reopened")),1)):d("",!0),s("div",Jo,[(n(!0),l(M,null,P(w.attributes,(A,k)=>(n(),l("div",{key:k,class:"float-right"},[A.value?(n(),l("div",{key:0,class:O(w.metaData.overdue?"text-danger":"")},[p(r(A.key)+": ",1),s("span",{innerHTML:A.value},null,8,Go)],2)):d("",!0)]))),128))])])]))),128)),u(m,{onInfinite:i.getDataFromServer},{spinner:y(()=>[Qo]),complete:y(()=>[Zo]),_:1},8,["onInfinite"])])])):d("",!0),e.hasDataFetched&&e.ticketData.data.length===0?(n(),l("div",Xo,r(e.lang("no_data_available")),1)):d("",!0)])}const tn=T(Fo,[["render",en],["__scopeId","data-v-0e58448c"]]);const sn={name:"dashboard-agent-summary",data:()=>({agentsData:{title:"",data:[]},page:1,hasDataFetched:!1,refresh:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,c=a.parseFromString(e,"text/html");return t=="href"?c.getElementById("hyper_link")[t].replace(this.basePath(),""):c.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,S.get("api/agent/dashboard-report/manager/agent-analysis"+a,{params:{page:this.page}}).then(c=>{this.updateData(c.data.data,e,t),this.loading=!1}).catch(c=>{this.loading=!1,this.refresh=!1,L(c,"dashboard-page",this.$options.name)})},updateData(e,t,a){this.agentsData.title=e.title,this.agentsData.description=e.description,this.agentsData.helplink=e.helpLink,a?this.agentsData.data=e.data:this.agentsData.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0,this.refresh=!1},refreshData(){this.refresh=!0,this.hasDataFetched=!1,this.page=1,this.agentsData.data=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":ge}},Oe=e=>(q("data-v-7476d157"),e=e(),E(),e),an={class:"card card-light dashboard-widget-box"},on={class:"card-header"},nn={class:"card-title"},ln=Oe(()=>s("i",{class:"fas fa-user","aria-hidden":"true"},null,-1)),rn={class:"card-tools"},dn=Oe(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),cn=[dn],hn={key:0,class:"card-body scrollable-area"},un={class:"products-list product-list-in-card"},_n={key:0,class:"product-info"},mn={class:"row"},pn={class:"col-md-7"},gn={class:"product-img"},fn={style:{"padding-left":"5rem","padding-top":"1.0rem"}},bn={class:"float-right col-md-5"},yn={style:{padding:"0.3rem"}},vn={class:"attribute-value-text float-right"},wn=Oe(()=>s("span",null,null,-1)),kn=Oe(()=>s("span",null,null,-1)),Cn={key:1,class:"no-data-section"};function Dn(e,t,a,c,o,i){const _=h("dashboard-help"),g=h("faveo-image-element"),m=h("router-link"),f=h("infinite-loading"),w=U("tooltip");return n(),l("div",an,[s("div",on,[e.hasDataFetched&&e.agentsData.title?(n(),l(M,{key:0},[s("h3",nn,[ln,p(" "+r(e.agentsData.title),1)]),u(_,{helplink:e.agentsData.helpLink,description:e.agentsData.description},null,8,["helplink","description"])],64)):d("",!0),s("div",rn,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=D=>i.refreshData())},cn,2)),[[w,e.lang("refresh")]])])]),e.agentsData.data.length>0?(n(),l("div",hn,[s("ul",un,[(n(!0),l(M,null,P(e.agentsData.data,(D,A)=>(n(),l("li",{class:"item",key:A},[D.title?(n(),l("div",_n,[s("div",mn,[s("div",pn,[s("div",gn,[u(g,{id:"user_img_"+A,"source-url":D.picture,classes:["img-circle"],"alternative-text":""},null,8,["id","source-url"])]),s("div",fn,[s("span",null,[u(m,{to:i.getRoute(D.title,"href"),class:O(i.getRoute(D.title,"className"))},{default:y(()=>[p(r(i.getRoute(D.title,"textContent")),1)]),_:2},1032,["to","class"])])])]),s("div",bn,[(n(!0),l(M,null,P(D.attributes,(k,b)=>(n(),l("div",{key:b},[s("div",yn,[p(r(k.key)+": ",1),s("span",vn,[u(m,{to:i.getRoute(k.value,"href"),class:O(i.getRoute(k.value,"className"))},{default:y(()=>[p(r(i.getRoute(k.value,"textContent")),1)]),_:2},1032,["to","class"])])])]))),128))])])])):d("",!0)]))),128)),u(f,{onInfinite:i.getDataFromServer},{spinner:y(()=>[wn]),complete:y(()=>[kn]),_:1},8,["onInfinite"])])])):d("",!0),e.hasDataFetched&&e.agentsData&&e.agentsData.data&&e.agentsData.data.length===0&&!e.refresh?(n(),l("div",Cn,r(e.lang("no_data_available")),1)):d("",!0)])}const Mn=T(sn,[["render",Dn],["__scopeId","data-v-7476d157"]]);const Sn={name:"dashboard-department-summary",data:()=>({departmentSummary:{title:"",data:[]},hasDataFetched:!1,page:1,refresh:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,c=a.parseFromString(e,"text/html");return t=="href"?c.getElementById("hyper_link")[t].replace(this.basePath(),""):c.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,S.get("api/agent/dashboard-report/manager/department-analysis"+a,{params:{page:this.page}}).then(c=>{this.updateData(c.data.data,e,t),this.loading=!1}).catch(c=>{this.refresh=!1,this.loading=!1,L(c,"dashboard-page",this.$options.name)})},updateData(e,t,a){this.departmentSummary.title=e.title,this.departmentSummary.description=e.description,this.departmentSummary.helplink=e.helpLink,a?this.departmentSummary.data=e.data:this.departmentSummary.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0,this.refresh=!1},refreshData(){this.refresh=!0,this.hasDataFetched=!1,this.page=1,this.departmentSummary.data=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":ge}},Le=e=>(q("data-v-d4e46146"),e=e(),E(),e),In={class:"card card-light dashboard-widget-box"},Tn={class:"card-header"},An={class:"card-title"},On=Le(()=>s("i",{class:"fas fa-sitemap","aria-hidden":"true"},null,-1)),Ln={class:"card-tools"},Pn=Le(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),Un=[Pn],$n={key:0,class:"card-body scrollable-area"},Fn={class:"widget-user-header",style:{padding:"0px"}},Vn={class:"widget-user-username widget-name"},qn={class:"card-footer p-0"},En={class:"nav flex-column bg-white"},Rn={class:"nav-link"},zn={class:"float-right badge bg-primary font-14 pad-0"},Bn=Le(()=>s("span",null,null,-1)),Nn=Le(()=>s("span",null,null,-1)),jn={key:1,class:"no-data-section"};function Wn(e,t,a,c,o,i){const _=h("dashboard-help"),g=h("router-link"),m=h("infinite-loading"),f=U("tooltip");return n(),l("div",In,[s("div",Tn,[e.departmentSummary.title?(n(),l(M,{key:0},[s("h3",An,[On,p(" "+r(e.lang(e.departmentSummary.title)),1)]),u(_,{helplink:e.departmentSummary.helpLink,description:e.departmentSummary.description},null,8,["helplink","description"])],64)):d("",!0),s("div",Ln,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=w=>i.refreshData())},Un,2)),[[f,e.lang("refresh")]])])]),e.departmentSummary.data.length>0?(n(),l("div",$n,[(n(!0),l(M,null,P(e.departmentSummary.data,(w,D)=>(n(),l("div",{class:"card card-widget widget-user-2 shadow-0",key:D},[s("div",Fn,[s("h3",Vn,r(w.title),1)]),s("div",qn,[s("ul",En,[(n(!0),l(M,null,P(w.attributes,(A,k)=>(n(),l("li",{class:"nav-item",key:k},[s("a",Rn,[p(r(A.key)+" ",1),s("span",zn,[u(g,{to:i.getRoute(A.value,"href"),class:O(i.getRoute(A.value,"className"))},{default:y(()=>[p(r(i.getRoute(A.value,"textContent")),1)]),_:2},1032,["to","class"])])])]))),128))])])]))),128)),u(m,{onInfinite:i.getDataFromServer},{spinner:y(()=>[Bn]),complete:y(()=>[Nn]),_:1},8,["onInfinite"])])):d("",!0),e.hasDataFetched&&e.departmentSummary.data.length===0&&!e.refresh?(n(),l("div",jn,r(e.lang("no_data_available")),1)):d("",!0)])}const Kn=T(Sn,[["render",Wn],["__scopeId","data-v-d4e46146"]]);const Hn={name:"dashboard-agent-performance-widget",data:()=>({topAgentData:null,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(e=""){this.loading=!0,S.get("api/agent/dashboard-report/agent-performance-widget"+e).then(t=>{this.topAgentData=t.data.data,this.hasDataFetched=!0,this.loading=!1}).catch(t=>{L(t,"dashboard-page"),this.loading=!1}).finally(()=>{this.hasDataFetched=!0})},getProgressBarClass(e){return e>=90?"progress-bar progress-bar-green":e>=70?"progress-bar progress-bar-aqua":e>=50?"progress-bar progress-bar-yellow":"progress-bar progress-bar-red"},getProgressBarStyle(e){return e===null&&(e=0),{width:e+"%"}},refreshData(){this.hasDataFetched=!1,this.getDataFromServer("?refresh=1")}},components:{"dashboard-help":ge}},We=e=>(q("data-v-c75d8502"),e=e(),E(),e),Yn={class:"card card-light dashboard-widget-box"},xn={class:"card-header"},Jn={class:"card-title"},Gn=We(()=>s("i",{class:"far fa-star","aria-hidden":"true"},null,-1)),Qn=We(()=>s("sup",{style:{"font-size":"14px"}},[s("span",{class:"badge badge-info"},"Beta")],-1)),Zn={class:"card-tools"},Xn=We(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),ei=[Xn],ti={key:0,class:"card-body scrollable-area"},si=["title"],ai={class:"progress-text"},oi={class:"progress-number"},ni={class:"progress sm"};function ii(e,t,a,c,o,i){const _=h("dashboard-help"),g=U("tooltip");return n(),l("div",Yn,[s("div",xn,[e.hasDataFetched&&e.topAgentData?(n(),l(M,{key:0},[s("h3",Jn,[Gn,p(" "+r(e.topAgentData.title),1)]),u(_,{helplink:e.topAgentData.helpLink,description:e.topAgentData.description},null,8,["helplink","description"]),p("  "),Qn],64)):d("",!0),s("div",Zn,[v((n(),l("button",{type:"button",class:O(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=m=>i.refreshData())},ei,2)),[[g,e.lang("refresh")]])])]),e.hasDataFetched&&e.topAgentData?(n(),l("div",ti,[(n(!0),l(M,null,P(e.topAgentData.data,(m,f)=>(n(),l("div",{class:"col-md-12",style:{"padding-bottom":"0.8rem"},key:f},[s("div",{class:"progress-group",title:m.description},[s("span",ai,r(m.key),1),s("span",oi,[s("b",null,r(m.value?m.value+"%":""),1)]),s("div",ni,[s("div",{class:O(i.getProgressBarClass(m.value)),style:N(i.getProgressBarStyle(m.value))},null,6)])],8,si)]))),128))])):d("",!0)])}const li=T(Hn,[["render",ii],["__scopeId","data-v-c75d8502"]]);function ri(e){const{module:t,name:a,category:c,tickets_view:o}=e;let i={module:[t,"isRequired"],name:[a,"isRequired"]};t&&(i.category=[c,"isRequired"],i.tickets_view=[o,"isRequired"]);const _=new K(j),{errors:g,isValid:m}=_.validate(i);return H.dispatch("setValidationError",g),{errors:g,isValid:m}}const di={labels:["Low","Medium","Normal","Warning"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:[40,20,80,10]}]},ci={responsive:!0,maintainAspectRatio:!1,plugins:{legend:!1}},hi={labels:["Low","Medium","Normal","Warning","High","Emergency"],datasets:[{label:"Dataset",data:[10,20,30,40,50,60],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)"]}]},ui={responsive:!0,plugins:{legend:!1}},_i=[{label:"immediate_ticket_1",link:"javascript:;",overdue:!0,dueTime:"immediate_ticket_1_time"},{label:"immediate_ticket_2",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_2_time"},{label:"immediate_ticket_3",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_3_time"},{label:"immediate_ticket_4",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_4_time"}],mi=[{imageUrl:"",agentType:"agent",message:"recent_activity_msg_1",date:"2022-10-19"},{imageUrl:"",agentType:"admin",message:"recent_activity_msg_2",date:"2022-01-02"},{imageUrl:"",agentType:"admin",message:"recent_activity_msg_3",date:"2023-12-14"},{imageUrl:"",agentType:"agent",message:"recent_activity_msg_4",date:"2024-01-24"}],pi=[{imageUrl:"",name:"agent",reopenedTickets:12,overdueTickets:34},{imageUrl:"",name:"admin",reopenedTickets:25,overdueTickets:46}],gi=[{name:"support",summaryMessage:"dept_summary_msg_1",badgeValue:34},{name:"development",summaryMessage:"dept_summary_msg_2",badgeValue:6}],fi=[{message:"agent_performance_msg_1",percent:50},{message:"agent_performance_msg_2",percent:10},{message:"agent_performance_msg_3",percent:60},{message:"agent_performance_msg_4",percent:5}],bi=[{message:"summary_msg_1",value:6e3},{message:"summary_msg_2",value:34},{message:"summary_msg_3",value:567},{message:"summary_msg_4",value:9},{message:"summary_msg_5",value:107}],yi=Object.freeze(Object.defineProperty({__proto__:null,agentPerformances:fi,agentSummary:pi,barChartData:hi,barChartOptions:ui,departmentSummaries:gi,donutChartData:di,donutChartOptions:ci,immediateTickets:_i,recentActivities:mi,systemAnalysisSummaries:bi},Symbol.toStringTag,{value:"Module"})),vi={name:"basic-delete-modal",description:"Basic delete modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},deleteUrl:{type:String,default:""},alert:{type:String,default:""},redirectUrl:{type:String,default:""},updateList:{type:Function,default:()=>{}},from:{type:String,default:""}},data(){return{isDisabled:!1,loading:!1,containerStyle:{width:"500px"}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,S.delete(this.deleteUrl).then(e=>{this.from==="widget"?(window.emitter.emit("reloadTopWidgets"),window.emitter.emit("updateAgentSidebar")):this.updateList(),this.loading=!1,this.isDisabled=!0,V(e,this.alert),this.onClose(),this.redirectUrl&&setTimeout(()=>this.$router.push({path:this.redirectUrl}),3e3)}).catch(e=>{this.loading=!1,this.onClose(),L(e,this.alert)})}},components:{Modal:ts}},wi={class:"modal-title"},ki={key:0},Ci={key:1},Di={key:2,class:"row"},Mi=["disabled"],Si=s("i",{class:"fas fa-trash"},null,-1);function Ii(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",wi,r(e.trans("delete")),1)]),fields:y(()=>[!o.loading&&a.from==="charts"?(n(),l("span",ki,r(e.trans("are_you_sure_you_want_to_delete")),1)):d("",!0),!o.loading&&a.from==="widget"?(n(),l("span",Ci,r(e.trans("are_you_sure_you_want_to_delete_this_widget")),1)):d("",!0),o.loading?(n(),l("div",Di,[u(_,{duration:4e3})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...m)=>i.onSubmit&&i.onSubmit(...m)),class:"btn btn-danger",disabled:o.isDisabled},[Si,p(" "+r(e.trans("delete")),1)],8,Mi)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Ti=T(vi,[["render",Ii]]);ze.register(At,Ot,Lt,Pt,Ut,$t,Ft,Vt);const Ai={name:"dashboard-edit",components:{TextField:te,DynamicSelect:Q,NumberField:be,StaticSelect:ye,Bar:qt,Doughnut:Et,BasicDeleteModal:Ti,ToolTip:dt},props:{closeEditDash:{type:Function}},computed:{dashConfig(){return{...yi}}},data(){return{dashboardWidget:"",dashboardWidgetData:[],moduleLoad:!1,showModal:!1,selectedWidget:"",cache:0,loading:!1,modalTitle:"",chart_type:"bar_chart",module:"",name:"",category:"",tickets_view:"",viewOptions:[],categoryOptions:[],optionsLoading:!1,dashboardCharts:[],showDeleteModal:!1,deleteUrl:"",editChartId:"",viewOptionStatus:[],widgetsData:[],deleteWidgetKey:!1,showWidgetDeleteModal:!1,from:"",refreshWidgets:!1}},beforeMount(){this.getEditableWidgets(),this.getAddedCharts()},created(){window.emitter.on("reloadTopWidgets",()=>this.refreshWidgets=!0)},beforeUnmount(){this.closeEditDash(!0)},watch:{refreshWidgets(e,t){e===!0&&this.getDashboardWidgets(),this.refreshWidgets=!1}},methods:{onChartRemove(e,t){let a=null;this.showDeleteModal=!0,this.from=t,t==="widget"&&(a=e.startsWith("filter_")?e.replace("filter_",""):e),this.deleteUrl=t==="charts"?"/service-desk/api/delete/dashboard-widgets/"+e:"/api/agent/ticket-filter/"+a},onChartModalClose(){this.showDeleteModal=!1,this.deleteUrl="",this.resetChartData()},isValid(){const{errors:e,isValid:t}=ri(this.$data);return t},onSaveChart(){if(this.isValid()){this.loading=!0;let e={};const{assigned:t,only_assigned:a,only_unassigned:c,status_id:o}=this.viewOptions.find(i=>i.status_options===this.tickets_view);e.module_id=this.module.id,e.status_id=o,e.categorized_by=this.category,e.assigned=t,e.chart_type=this.chart_type,e.only_assigned=a,e.only_unassigned=c,e.cache=this.cache?parseInt(this.cache):0,e.name=this.name,e.dashboard_module=this.dashboardWidgetData.find(i=>i.key==="dashboard-charts"),this.editChartId&&(e.id=this.editChartId),S.post("/service-desk/api/store/chart",e).then(i=>{this.loading=!1,this.showModal=!1,this.getAddedCharts(),this.resetChartData(),V(i,"dashboard-page")}).catch(i=>{L(i,"dashboard-page"),this.loading=!1})}},resetChartData(){this.chart_type="bar_chart",this.module="",this.name="",this.category="",this.tickets_view="",this.editChartId=""},getAddedCharts(){S.get("/service-desk/api/get/dashboard-charts").then(e=>{this.dashboardCharts=e.data.data}).catch(e=>{this.dashboardCharts=[]})},onChange(e,t){this[t]=e||"",t==="module"&&(e?(this.getCategoryAndOptions(e.id,""),this.tickets_view="",this.category=""):(this.viewOptions=[],this.categoryOptions=[],this.name="")),(t==="category"||t==="tickets_view")&&(this.name=this.viewOptions.find(a=>a.status_options===this.tickets_view).status_options+" by "+this.categoryOptions.find(a=>a.column_name===this.category).name)},getCategoryAndOptions(e,t){this.optionsLoading=!0;let a=t==="edit"?e.module_id:e;S.get("/service-desk/api/widget-options/list/"+a).then(c=>{const{options:o,categorizedBy:i}=c.data.data;if(this.viewOptions=o,this.categoryOptions=i,this.viewOptionStatus=this.viewOptions.map(m=>m.status_options),t==="edit"){let m=this.viewOptions.find(f=>f.status_id===e.status_id&&f.assigned===e.assigned&&f.only_assigned===e.only_assigned&&f.only_unassigned===e.only_unassigned);this.tickets_view=m.status_options,this.category=e.categorized_by}else this.tickets_view=o[0].status_options,this.category=i[0].column_name;const _=this.viewOptions.find(m=>m.status_options===this.tickets_view),g=this.categoryOptions.find(m=>m.column_name===this.category);this.name=this.name||`${_.status_options} by ${g.name}`,this.optionsLoading=!1,this.$store.dispatch("unsetValidationError")}).catch(c=>{this.viewOptions=[],this.categoryOptions=[],this.optionsLoading=!1})},updateDashboardWidgets(e){this.loading=!0;let t={};t.module_id=this.dashboardWidget.id,t.sub_module=this.dashboardWidgetData.filter(a=>a.key!=="dashboard-charts").map(a=>({id:a.id,display:a.display?1:0,cache:a.display?parseInt(a.cache):0})),S.post("/update/sub-module",t).then(a=>{this.loading=!1,this.closeEditDash(!0),V(a,"dashboard-page")}).catch(a=>{L(a,"dashboard-page"),this.loading=!1})},onInput(){if(this.cache.toString().length<=3)return!0;this.cache=this.cache.toString().substring(0,this.cache.toString().length-1)},checkValue(e){e=e||window.event;let t=e.which?e.which:e.keyCode;if(t>31&&(t<48||t>57))e.preventDefault();else return!0},onPaste(e){e=e||window.event,e.preventDefault()},onSave(){this.showModal=!1,this.selectedWidget.display=!0,this.selectedWidget.cache=this.cache},onRemove(e){e.display=!1,e.cache=0},onAdd(e){this.cache=0,this.selectedWidget=e,e.key==="ticket-widget"&&this.getDashboardWidgets(),e.key==="dashboard-charts"?(this.showModal=!0,this.modalTitle="add"):this.onSave()},onEdit(e,t=""){this.cache=e.cache,this.selectedWidget=e,t==="chart"&&(this.editChartId=e.id,this.chart_type=e.chart_type,this.module=e.module,this.name=e.name,this.getCategoryAndOptions(e,"edit"),this.selectedWidget.key="dashboard-charts",this.selectedWidget.label="dashboard-charts"),this.showModal=!0,this.modalTitle="update"},onClose(){this.selectedWidget="",this.resetChartData(),this.showModal=!1},onMouseEnter(e){e.showOnlyIcon=!0},onMouseLeave(e){e.showOnlyIcon=!1},getEditableWidgets(){this.editDash=!0,this.moduleLoad=!0,S.get("/api/modules").then(e=>{this.dashboardWidget=e.data.data.helpdesk.find(t=>t.key=="Dashboard"),S.get(this.dashboardWidget.key_url).then(t=>{this.dashboardWidgetData=t.data.message.map(a=>({...a,display:a.display?a.display:!1,cache:a.cache?a.cache:0,showOnlyIcon:!1})),this.dashboardWidgetData.forEach(a=>{a.key==="ticket-widget"&&a.display&&this.getDashboardWidgets()}),this.moduleLoad=!1}).catch(t=>{this.moduleLoad=!1,this.editDash=!1})}).catch(e=>{this.moduleLoad=!1,this.editDash=!1})},getDashboardWidgets(){S.get("api/agent/dashboard-report/top-widget").then(e=>{this.widgetsData=e.data.data}).catch(e=>{L(e,"dashboard-page")}).finally(()=>{this.moduleLoad=!1})},subString(e,t){return X(e,t)}}},ee=e=>(q("data-v-89fe95a9"),e=e(),E(),e),Oi={key:1,class:"row"},Li={class:"row mb-3 text-right"},Pi={class:"col-sm-12"},Ui=ee(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),$i=ee(()=>s("i",{class:"fas fa-times"},null,-1)),Fi={class:"row"},Vi={class:"col-sm-9"},qi={class:"card card-light"},Ei={class:"card-header"},Ri={class:"card-title"},zi={class:"card-body"},Bi={class:"row"},Ni={class:"card card-light shadow"},ji={class:"card-header"},Wi={class:"card-title"},Ki={class:"card-tools"},Hi={class:"badge bg-primary"},Yi=["onClick"],xi=ee(()=>s("i",{class:"fas fa-pencil-alt"},null,-1)),Ji=[xi],Gi=["onClick"],Qi=ee(()=>s("i",{class:"fas fa-times"},null,-1)),Zi=[Qi],Xi={class:"card-body mh-255"},el={key:0,class:"row"},tl={class:"info-box pr-0"},sl={class:"info-box-content"},al={class:"info-box-text"},ol={class:"info-box-number"},nl=["onClick"],il=ee(()=>s("i",{class:"fas fa-trash-alt trash-color mb-5"},null,-1)),ll=[il],rl={key:1,class:"products-list product-list-in-card pl-2 pr-2"},dl={class:"fw-500"},cl=["href"],hl={key:0,class:"badge badge-danger"},ul={class:"float-right"},_l={class:"float-right"},ml={class:"text-danger"},pl=ee(()=>s("span",null,"→",-1)),gl={key:3,class:"products-list product-list-in-card"},fl={class:"product-img"},bl={class:"fw-400"},yl={class:"row"},vl={class:"col-sm-2"},wl={class:"col-sm-7"},kl={href:"javascript:;"},Cl={class:"col-md-3"},Dl={class:"float-right"},Ml={key:4,class:"products-list product-list-in-card"},Sl={class:"row"},Il={class:"col-md-2"},Tl={class:"product-img"},Al={class:"col-sm-4 mt-2"},Ol={href:"javascript:;"},Ll={class:"float-right col-md-6"},Pl={style:{padding:"0.3rem"}},Ul={class:"float-right"},$l={href:"javascript:;",class:"badge bg-blue"},Fl={style:{padding:"0.3rem"}},Vl={class:"float-right"},ql={href:"javascript:;",class:"badge bg-blue"},El={class:"widget-user-header p-0"},Rl={class:"widget-user-username widget-name"},zl={class:"card-footer p-0"},Bl={class:"nav flex-column bg-white"},Nl={class:"nav-item"},jl={class:"nav-link"},Wl={class:"float-right"},Kl={href:"javascript:;",class:"badge bg-blue"},Hl={class:"progress-group"},Yl={class:"progress-text"},xl={class:"progress-number"},Jl={class:"progress sm"},Gl={class:"system-analysis-list"},Ql={class:"nav flex-column"},Zl={class:"float-right badge bg-blue"},Xl={class:"col-sm-6"},er={class:"card card-light shadow"},tr={class:"card-header"},sr={class:"card-title"},ar={class:"card-tools"},or={class:"badge bg-primary"},nr=["onClick"],ir=ee(()=>s("i",{class:"fas fa-pencil-alt"},null,-1)),lr=[ir],rr=["onClick"],dr=ee(()=>s("i",{class:"fas fa-times"},null,-1)),cr=[dr],hr={class:"card-body h-255"},ur={class:"col-sm-3"},_r={class:"card card-light"},mr={class:"card-header"},pr={class:"card-title"},gr={class:"card-body"},fr={key:0,class:"row"},br=["onMouseenter","onMouseleave","onClick"],yr={class:"info-box bg-light"},vr={class:"info-box-content"},wr={class:"info-box-text text-center text-muted"},kr={key:1,class:"fas fa-plus fa-2x"},Cr={class:"modal-title"},Dr={class:"row"},Mr={class:"col-sm-4"},Sr={class:"form-group"},Ir=ee(()=>s("label",null,"Chart Type",-1)),Tr=ee(()=>s("option",{value:"bar_chart"},"Bar Chart",-1)),Ar=ee(()=>s("option",{value:"donut_chart"},"Donut Chart",-1)),Or=[Tr,Ar],Lr={class:"col-sm-4"},Pr={class:"form-group"},Ur={class:"row"},$r={key:1,class:"row"},Fr=ee(()=>s("i",{class:"fas fa-check"},null,-1)),Vr=ee(()=>s("i",{class:"fas fa-check"},null,-1));function qr(e,t,a,c,o,i){const _=h("custom-loader"),g=h("reuse-loader"),m=h("faveo-image-element"),f=h("Bar"),w=h("Doughnut"),D=h("tool-tip"),A=h("dynamic-select"),k=h("static-select"),b=h("text-field"),F=h("modal"),z=h("BasicDeleteModal"),Y=U("tooltip"),ue=U("focus-first-input");return n(),l("div",null,[o.loading?(n(),C(_,{key:0,duration:4e3})):d("",!0),o.moduleLoad?(n(),l("div",Oi,[u(g,{"animation-duration":4e3,size:60})])):(n(),l(M,{key:2},[s("div",Li,[s("div",Pi,[s("button",{type:"button",class:"btn btn-primary btn-md",onClick:t[0]||(t[0]=(...I)=>i.updateDashboardWidgets&&i.updateDashboardWidgets(...I))},[Ui,p(" "+r(e.trans("update")),1)]),s("button",{type:"button",class:"btn btn-danger btn-md",onClick:t[1]||(t[1]=(...I)=>a.closeEditDash&&a.closeEditDash(...I))},[$i,p(" "+r(e.trans("cancel")),1)])])]),s("div",Fi,[s("div",Vi,[s("div",qi,[s("div",Ei,[s("h3",Ri,r(e.trans("added_widgets")),1)]),s("div",zi,[s("div",Bi,[(n(!0),l(M,null,P(o.dashboardWidgetData.filter(I=>I.display&&I.key!=="dashboard-charts"),I=>(n(),l("div",{class:O({"col-sm-12":I.key==="ticket-widget","col-sm-6":I.key!=="ticket-widget"}),key:I.id},[s("div",Ni,[s("div",ji,[s("h3",Wi,r(e.trans(I.label)),1),s("div",Ki,[v((n(),l("span",Hi,[p(r(I.cache),1)])),[[Y,e.trans("cache")]]),v((n(),l("button",{type:"button",class:"btn btn-tool",onClick:$=>i.onEdit(I)},Ji,8,Yi)),[[Y,e.trans("edit")]]),v((n(),l("button",{type:"button",class:"btn btn-tool",onClick:$=>i.onRemove(I)},Zi,8,Gi)),[[Y,e.trans("remove")]])])]),s("div",Xi,[I.key==="ticket-widget"?(n(),l("div",el,[(n(!0),l(M,null,P(o.widgetsData,$=>(n(),l("div",{class:"col-sm-4",key:$.id},[s("div",tl,[$.icon_class?(n(),l("span",{key:0,class:O(["info-box-icon",$.is_default?"bg-light box-icon-color":""]),style:N({background:$.icon_color})},[s("i",{class:O($.icon_class)},null,2)],6)):d("",!0),v((n(),l("div",sl,[s("span",al,r(i.subString($.key,50)),1),s("span",ol,r($.value),1)])),[[Y,$.key+": "+$.value]]),$.is_deletable&&$.widget_type!=="Service Desk"?v((n(),l("button",{key:1,type:"button",onClick:W=>i.onChartRemove($.id,"widget"),class:"btn btn-tool"},ll,8,nl)),[[Y,e.trans("delete")]]):d("",!0)])]))),128))])):d("",!0),I.key==="immediate-action"?(n(),l("ul",rl,[(n(!0),l(M,null,P(i.dashConfig.immediateTickets,($,W)=>(n(),l("li",{class:"item",key:W},[s("span",dl,[s("a",{href:$.link},r(e.trans($.label)),9,cl)]),p("   "),$.overdue?(n(),l("span",hl,r(e.trans("overdue")),1)):d("",!0),s("div",ul,[s("div",_l,[s("div",ml,[p(r(e.trans("due_at"))+": ",1),s("span",null,r(e.trans($.dueTime)),1)])])])]))),128))])):d("",!0),I.key==="todo"?(n(),l(M,{key:2},[pl,p(" "),s("i",null,r(e.trans("todo_msg")),1)],64)):d("",!0),I.key==="recent-activities"?(n(),l("ul",gl,[(n(!0),l(M,null,P(i.dashConfig.recentActivities,($,W)=>(n(),l("li",{class:"item",key:W},[s("div",fl,[u(m,{"source-url":$.imageUrl,classes:["img-circle img-30"],id:"recent_img"+(W+1)},null,8,["source-url","id"])]),s("div",bl,[s("div",yl,[s("div",vl,r(e.trans($.agentType)),1),s("div",wl,[s("a",kl,[s("span",null,r(e.trans($.message)),1)])]),s("div",Cl,[s("span",Dl,r($.date),1)])])])]))),128))])):d("",!0),I.key==="agent-summary"?(n(),l("ul",Ml,[(n(!0),l(M,null,P(i.dashConfig.agentSummary,($,W)=>(n(),l("li",{class:"item",key:W},[s("div",Sl,[s("div",Il,[s("div",Tl,[u(m,{"source-url":$.imageUrl,classes:["img-circle"],id:"agent_sum_img"+(W+1)},null,8,["source-url","id"])])]),s("div",Al,[s("span",null,[s("a",Ol,r(e.trans($.name)),1)])]),s("div",Ll,[s("div",null,[s("div",Pl,[p(r(e.trans("reopened_tickets"))+": ",1),s("span",Ul,[s("a",$l,r($.reopenedTickets),1)])]),s("div",Fl,[p(r(e.trans("overdue-tickets"))+": ",1),s("span",Vl,[s("a",ql,r($.overdueTickets),1)])])])])])]))),128))])):d("",!0),I.key==="department-summary"?(n(!0),l(M,{key:5},P(i.dashConfig.departmentSummaries,($,W)=>(n(),l("div",{class:"card card-widget widget-user-2 shadow-0",key:W},[s("div",El,[s("h3",Rl,r(e.trans($.name)),1)]),s("div",zl,[s("ul",Bl,[s("li",Nl,[s("a",jl,[p(r(e.trans($.summaryMessage))+" ",1),s("span",Wl,[s("a",Kl,r($.badgeValue),1)])])])])])]))),128)):d("",!0),I.key==="agent-performance"?(n(!0),l(M,{key:6},P(i.dashConfig.agentPerformances,($,W)=>(n(),l("div",{class:"col-md-12",key:W},[s("div",Hl,[s("span",Yl,r(e.trans($.message)),1),s("span",xl,[s("b",null," "+r($.percent)+"%",1)]),s("div",Jl,[s("div",{class:"progress-bar progress-bar-red",style:N({width:$.percent+"%"})},null,4)])])]))),128)):d("",!0),I.key==="system-summary"?(n(!0),l(M,{key:7},P(i.dashConfig.systemAnalysisSummaries,($,W)=>(n(),l("div",{key:W},[s("div",Gl,[s("ul",Ql,[s("li",null,[p(r(e.trans($.message))+" ",1),s("span",Zl,r($.value),1)])])])]))),128)):d("",!0)])])],2))),128)),o.dashboardCharts&&o.dashboardCharts.length?(n(!0),l(M,{key:0},P(o.dashboardCharts,I=>(n(),l("div",Xl,[s("div",er,[s("div",tr,[s("h3",sr,r(e.trans(I.name)),1),s("div",ar,[v((n(),l("span",or,[p(r(I.cache),1)])),[[Y,e.trans("cache")]]),v((n(),l("button",{type:"button",class:"btn btn-tool",onClick:$=>i.onEdit(I,"chart")},lr,8,nr)),[[Y,e.trans("edit")]]),v((n(),l("button",{type:"button",class:"btn btn-tool",onClick:$=>i.onChartRemove(I.id,"charts")},cr,8,rr)),[[Y,e.trans("remove")]])])]),s("div",hr,[I.chart_type==="bar_chart"?(n(),C(f,{key:0,id:I.id+"my-chart-id",options:i.dashConfig.barChartOptions,data:i.dashConfig.barChartData},null,8,["id","options","data"])):d("",!0),I.chart_type==="donut_chart"?(n(),C(w,{key:1,id:I.id+"my-chart-id",data:i.dashConfig.donutChartData,options:i.dashConfig.donutChartOptions},null,8,["id","data","options"])):d("",!0)])])]))),256)):d("",!0)])])])]),s("div",ur,[s("div",_r,[s("div",mr,[s("h3",pr,r(e.trans("add_widgets")),1)]),s("div",gr,[o.dashboardWidgetData.length?(n(),l("div",fr,[(n(!0),l(M,null,P(o.dashboardWidgetData.filter(I=>I.key==="dashboard-charts"||!I.display),I=>(n(),l("div",{class:"col-sm-12",key:I.id},[s("a",{href:"javascript:;",onMouseenter:$=>i.onMouseEnter(I),onMouseleave:$=>i.onMouseLeave(I),onClick:$=>i.onAdd(I),onDragstart:t[2]||(t[2]=fe(()=>{},["prevent"]))},[s("div",yr,[s("div",vr,[s("span",wr,[I.showOnlyIcon?(n(),l("i",kr)):(n(),l(M,{key:0},[p(r(e.trans(I.label)),1)],64))])])])],40,br)]))),128))])):d("",!0),o.showModal?(n(),C(F,{key:1,showModal:!0,onClose:i.onClose,containerStyle:{width:o.selectedWidget.key==="dashboard-charts"?"800px":"500px"}},{title:y(()=>[s("h4",Cr,r(e.trans(o.modalTitle))+" "+r(e.trans("dashboard-charts")),1)]),fields:y(()=>[o.selectedWidget.key==="dashboard-charts"?(n(),l(M,{key:0},[s("div",Dr,[s("div",Mr,[s("div",Sr,[Ir,v(s("select",{"onUpdate:modelValue":t[3]||(t[3]=I=>o.chart_type=I),class:"form-control"},Or,512),[[tt,o.chart_type]])])]),s("div",Lr,[s("div",Pr,[s("label",null,r(e.trans("dashboard_cache")),1),u(D,{message:e.trans("widget-cache"),size:"medium"},null,8,["message"]),v(s("input",{type:"number",min:"0","onUpdate:modelValue":t[4]||(t[4]=I=>o.cache=I),max:"999",class:"form-control",onInput:t[5]||(t[5]=(...I)=>i.onInput&&i.onInput(...I)),onKeypress:t[6]||(t[6]=(...I)=>i.checkValue&&i.checkValue(...I)),onPaste:t[7]||(t[7]=(...I)=>i.onPaste&&i.onPaste(...I))},null,544),[[de,o.cache]])])]),u(A,{name:"module",classname:"col-sm-4",apiEndpoint:"/service-desk/api/modules/list?dashboard=1",label:e.trans("module"),value:o.module,multiple:!1,onChange:i.onChange,required:!0},null,8,["label","value","onChange"])]),s("div",Ur,[o.module?(n(),l(M,{key:0},[o.optionsLoading?(n(),C(g,{key:0,"animation-duration":4e3,size:30})):(n(),l(M,{key:1},[u(A,{name:"tickets_view",classname:"col-sm-4",elements:o.viewOptionStatus,multiple:!1,label:o.module.name+" "+e.trans("view"),value:o.tickets_view,onChange:i.onChange,required:!0},null,8,["elements","label","value","onChange"]),u(k,{label:e.trans("categorized_by"),elements:o.categoryOptions,hideEmptySelect:!0,name:"category",onChange:i.onChange,value:o.category,classname:"col-sm-3","bind-value-key":"column_name",required:!0},null,8,["label","elements","onChange","value"]),o.optionsLoading?d("",!0):(n(),C(b,{key:0,label:e.trans("widget_label"),value:o.name,type:"text",name:"name",onChange:i.onChange,classname:"col-sm-5",required:!0},null,8,["label","value","onChange"]))],64))],64)):d("",!0)])],64)):v((n(),l("div",$r,[s("label",null,r(e.trans("dashboard_cache")),1),u(D,{message:e.trans("widget-cache"),size:"medium"},null,8,["message"]),v(s("input",{type:"number",min:"0","onUpdate:modelValue":t[8]||(t[8]=I=>o.cache=I),max:"999",class:"form-control",onInput:t[9]||(t[9]=(...I)=>i.onInput&&i.onInput(...I)),onKeypress:t[10]||(t[10]=(...I)=>i.checkValue&&i.checkValue(...I)),onPaste:t[11]||(t[11]=(...I)=>i.onPaste&&i.onPaste(...I))},null,544),[[de,o.cache]])])),[[ue]])]),controls:y(()=>[o.selectedWidget.key==="dashboard-charts"?(n(),l("button",{key:0,type:"button",onClick:t[12]||(t[12]=(...I)=>i.onSaveChart&&i.onSaveChart(...I)),class:"btn btn-primary"},[Fr,p("  "+r(e.trans(o.modalTitle)),1)])):(n(),l("button",{key:1,type:"button",onClick:t[13]||(t[13]=(...I)=>i.onSave&&i.onSave(...I)),class:"btn btn-primary"},[Vr,p("  "+r(e.trans(o.modalTitle)),1)]))]),_:1},8,["onClose","containerStyle"])):d("",!0)])])])])],64)),u(R,{name:"modal"},{default:y(()=>[o.showDeleteModal?(n(),C(z,{key:0,onClose:i.onChartModalClose,from:o.from,showModal:o.showDeleteModal,deleteUrl:o.deleteUrl,updateList:i.getAddedCharts,alert:"dashboard-page"},null,8,["onClose","from","showModal","deleteUrl","updateList"])):d("",!0)]),_:1})])}const Er=T(Ai,[["render",qr],["__scopeId","data-v-89fe95a9"]]);const Rr={name:"dashboard-page",setup(){const e=x();return{showLoader:B(()=>e.getters.showLoader)}},data:()=>({userRoles:[],topWidgetCount:3,hasDataPopulated:!1,loading:!1,counter:0,widgetKeys:[],editDash:!1,isAdminEnabled:!0}),beforeMount(){this.getDashData()},created(){window.emitter.on("editDash",e=>{this.editDash=e})},methods:{dashboardMounted(){window.emitter.emit("dashboard-mounted")},closeEditView(e=!1){this.editDash=!1,window.emitter.emit("edit-dashboard",!0),e&&this.getDashData()},reloadDashboard(){this.counter+=1},getDashData(){this.loading=!0,S.get("/api/agent/dashboard-data/"+this.$route.meta.title).then(e=>{this.userRoles=e.data.data.roles,this.widgetKeys=e.data.data.widget.map(t=>t.key),this.topWidgetCount=e.data.data.count,this.isAdminEnabled=!!e.data.data.is_enabled,window.emitter.emit("isAdminEnabled",this.isAdminEnabled),this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.userRoles=[],this.topWidgetCount=0,this.loading=!1})}},beforeDestroy(){this.$store.dispatch("forceStopLoader")},components:{"dashboard-top-widgets":ra,"dashboard-recent-activities":Va,"dashboard-todo":vo,"dashboard-system-analysis":$o,"dashboard-requires-immediate-action":tn,"dashboard-agent-summary":Mn,"dashboard-department-summary":Kn,"dashboard-agent-performance-widget":li,"dashboard-edit":Er}},zr=e=>(q("data-v-9d28b12a"),e=e(),E(),e),Br={class:"row mb-3 d-none"},Nr={class:"col-sm-12"},jr=zr(()=>s("i",{class:"fas fa-sync"},null,-1)),Wr=[jr],Kr={key:0,class:"row"},Hr={key:0,class:"col-md-12"},Yr={key:1,class:"col-md-6"},xr={key:2,class:"col-md-6"},Jr={key:3,class:"col-md-6"},Gr={key:4,class:"col-md-6"},Qr={key:5,class:"col-md-6"},Zr={key:6,class:"col-md-6"},Xr={key:7,class:"col-md-6"},ed={key:1,id:"dashboard-chart-container"},td={key:2,class:"row"};function sd(e,t,a,c,o,i){const _=h("alert"),g=h("dashboard-edit"),m=h("dashboard-top-widgets"),f=h("dashboard-requires-immediate-action"),w=h("dashboard-todo"),D=h("dashboard-agent-summary"),A=h("dashboard-department-summary"),k=h("dashboard-recent-activities"),b=h("dashboard-agent-performance-widget"),F=h("dashboard-system-analysis"),z=h("reuse-loader");return n(),l("div",{class:"col-sm-12",key:e.counter},[u(_,{componentName:"dashboard-page"}),e.editDash?(n(),C(g,{key:0,closeEditDash:i.closeEditView},null,8,["closeEditDash"])):(n(),l(M,{key:1},[s("div",Br,[s("div",Nr,[s("button",{class:"btn bth-default",id:"dashboard_refresh",onClick:t[0]||(t[0]=(...Y)=>i.reloadDashboard&&i.reloadDashboard(...Y))},Wr)])]),e.hasDataPopulated?(n(),l("div",Kr,[e.widgetKeys.includes("ticket-widget")?(n(),l("div",Hr,[u(m,{"top-widget-count":e.topWidgetCount},null,8,["top-widget-count"])])):d("",!0),e.widgetKeys.includes("immediate-action")?(n(),l("div",Yr,[u(f)])):d("",!0),e.widgetKeys.includes("todo")?(n(),l("div",xr,[u(w)])):d("",!0),e.widgetKeys.includes("agent-summary")?(n(),l("div",Jr,[u(D)])):d("",!0),e.widgetKeys.includes("department-summary")?(n(),l("div",Gr,[u(A)])):d("",!0),e.widgetKeys.includes("recent-activities")?(n(),l("div",Qr,[u(k)])):d("",!0),e.widgetKeys.includes("agent-performance")?(n(),l("div",Zr,[u(b)])):d("",!0),e.widgetKeys.includes("system-summary")?(n(),l("div",Xr,[u(F)])):d("",!0)])):d("",!0),e.widgetKeys.includes("dashboard-charts")?(n(),l("div",ed,r(i.dashboardMounted()),1)):d("",!0),e.loading?(n(),l("div",td,[u(z,{"animation-duration":4e3,size:60})])):d("",!0)],64))])}const ad=T(Rr,[["render",sd],["__scopeId","data-v-9d28b12a"]]);function od(e){const{first_name:t}=e;let a={first_name:[t,"isRequired"]};const c=new K(j),{errors:o,isValid:i}=c.validate(a);return H.dispatch("setValidationError",o),{errors:o,isValid:i}}const nd={name:"agent-profie-edit",description:"Agent Profile Edit Page",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},data(){return{loading:!1,hasDataPopulated:!1,isDisabled:!1,passDisabled:!1,first_name:"",last_name:"",email:"",country_code:91,mobile:"",phone_number:"",phone_country_code:91,ext:"",profile_pic:"",not_accept_ticket:0,types:[],agent_sign:"",location:"",radioOptions:[{name:"yes",value:0},{name:"no",value:1}],labelStyle:{display:"none"},labelCss:{visibility:"hidden",margin:"auto"},old_password:"",new_password:"",confirm_password:"",profileData:"",two_factor:!1,showModal:!1,removeModal:!1,iso:"",phone_iso:"",selectedImage:""}},created(){window.emitter.on("updateEditData",this.getData)},beforeMount(){this.getData()},methods:{getData(e){this.loading=!0,S.get("/api/profile/info").then(t=>{this.profileData=t.data.data,window.emitter.emit("updateSmsToggleButton",this.profileData),this.updateStatesWithData(t.data.data),e=="update"&&window.emitter.emit("updateAgentProfile",t.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(c=>{a.hasOwnProperty(c)&&(t[c]=e[c])}),this.two_factor=e.is_2fa_enabled,this.mobile=this.mobile==="Not available"?"":this.mobile,this.country_code=this.country_code===""?91:this.country_code,this.phone_number=this.phone_number==="Not available"?"":this.phone_number,this.phone_country_code=this.phone_country_code===""?91:this.phone_country_code},onChange(e,t){t==="profile_pic"?(this.profile_pic=e.image,this.selectedImage=e):this[t]=e},getCountCode(e){this.country_code=e},getCountIso(e){this.iso=e},getPCountCode(e){this.phone_country_code=e},getPCountIso(e){this.phone_iso=e},isValid(){const{errors:e,isValid:t}=od(this.$data);return!!t},isPasswordValid(){const{errors:e,isValid:t}=cs(this.$data);return!!t},onSubmit(){if(this.isValid()){this.isDisabled=!0,this.loading=!0;var e=new FormData;if(e.append("first_name",this.first_name),e.append("last_name",this.last_name),e.append("country_code",this.country_code?this.country_code:null),e.append("iso",this.iso?this.iso:null),e.append("mobile",this.mobile),e.append("ext",this.ext?this.ext:""),e.append("phone_country_code",this.phone_country_code?this.phone_country_code:null),e.append("phone_iso",this.phone_iso?this.phone_iso:null),e.append("phone_number",this.phone_number?this.phone_number:""),this.selectedImage?e.append("profile_pic",this.selectedImage.file,this.selectedImage.name):e.append("profile_pic",null),e.append("location",this.location?this.location.id:""),e.append("agent_sign",this.agent_sign?this.agent_sign:""),e.append("not_accept_ticket",this.not_accept_ticket),this.types!=="")for(var t in this.types)e.append("type["+t+"]",this.types[t].id);e.append("_method","PATCH"),S.post("/agent-profile",e).then(a=>{V(a,"edit_agent_profile"),this.isDisabled=!1,this.loading=!1,this.getData("update")}).catch(a=>{this.loading=!1,this.isDisabled=!1,L(a,"edit_agent_profile")})}},onUpdatePassword(){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{6,20}$/,t=e.exec(this.new_password);if(this.isPasswordValid())if(this.old_password!==this.new_password)if(t)if(this.new_password===this.confirm_password){this.passDisabled=!0,this.loading=!0;var a=new FormData;a.append("old_password",this.old_password),a.append("new_password",this.new_password),a.append("confirm_password",this.confirm_password),a.append("_method","PATCH"),S.post("/agent-profile-password/"+this.profileData.id,a).then(c=>{this.old_password="",this.new_password="",this.confirm_password="",this.loading=!1,this.passDisabled=!1,V(c,"edit_agent_profile")}).catch(c=>{this.loading=!1,this.passDisabled=!1,L(c,"edit_agent_profile")})}else this.$store.dispatch("setValidationError",{confirm_password:"Password does not match"});else this.$store.dispatch("setValidationError",{new_password:"Password must have 8 characters and contain at least one Uppercase, one lowercase, one number and one special character"});else this.$store.dispatch("setValidationError",{new_password:"new password is same as old. Please choose a different password"})},profileBoxVisible(){window.emitter.emit("profile-box-mounted",{alert:"edit_agent_profile",twoFAStatus:this.profileData.is_2fa_enabled})},onClose(){this.showModal=!1,this.removeModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"text-field":te,"radio-button":ne,"number-field":be,phoneWithCountryCode:ct,"dynamic-select":Q,"image-upload":Yt,"barcode-modal":hs,"remove-modal":ut,"login-logs":_t}},id={class:"col-sm-12"},ld={key:0,class:"row"},rd={class:"row"},dd={key:0,class:"col-md-6"},cd={class:"card card-light"},hd={class:"card-header"},ud={class:"card-title"},_d={class:"card-body"},md={class:"text-center"},pd={class:"row"},gd={class:"card-footer"},fd=["disabled"],bd=s("i",{class:"fas fa-sync"},null,-1),yd={key:1,class:"col-md-6"},vd={class:"card card-light"},wd={class:"card-header"},kd={class:"card-title"},Cd={class:"card-body"},Dd={class:"card-footer"},Md=["disabled"],Sd=s("i",{class:"fas fa-sync"},null,-1),Id={class:"card card-light"},Td={class:"card-header"},Ad={class:"card-title"},Od={class:"card-body"},Ld={class:"row"},Pd={class:"col-md-9"},Ud=["src"],$d={class:"col-md-3"},Fd=["disabled"],Vd=s("i",{class:"fas fa-toggle-on"},null,-1),qd=s("i",{class:"fas fa-power-off"},null,-1),Ed={id:"profile-view-boxes"};function Rd(e,t,a,c,o,i){const _=h("alert"),g=h("custom-loader"),m=h("image-upload"),f=h("text-field"),w=h("dynamic-select"),D=h("phoneWithCountryCode"),A=h("number-field"),k=h("tiny-editor"),b=h("radio-button"),F=h("login-logs"),z=h("barcode-modal"),Y=h("remove-modal"),ue=U("tooltip");return n(),l("div",id,[u(_,{componentName:"edit_agent_profile"}),!o.hasDataPopulated||o.loading?(n(),l("div",ld,[u(g,{duration:4e3})])):d("",!0),s("div",rd,[o.hasDataPopulated?(n(),l("div",dd,[s("div",cd,[s("div",hd,[s("h3",ud,r(e.lang("profile")),1)]),s("div",_d,[s("div",md,[u(m,{label:e.lang("profile_pic"),value:o.profile_pic,name:"profile_pic",onChange:i.onChange,labelStyle:o.labelStyle,labelCss:o.labelCss,buttonName:"change"},null,8,["label","value","onChange","labelStyle","labelCss"])]),u(f,{label:e.lang("first_name"),value:o.first_name,type:"text",name:"first_name",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,autofocus:!0},null,8,["label","value","onChange","placehold"]),u(f,{label:e.lang("last_name"),value:o.last_name,type:"text",name:"last_name",onChange:i.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),o.types.length>0?(n(),C(w,{key:0,label:e.lang("type"),multiple:!0,name:"types",required:!1,apiEndpoint:"/api/dependency/types",value:o.types,onChange:i.onChange,clearable:!!o.types,disabled:!0},null,8,["label","value","onChange","clearable"])):d("",!0),u(f,{label:e.lang("email"),value:o.email,type:"text",name:"email",onChange:i.onChange,placehold:e.lang("enter_email_addresses"),disabled:!0},null,8,["label","value","onChange","placehold"]),o.location?(n(),C(w,{key:1,label:e.lang("location"),multiple:!1,name:"location",apiEndpoint:"/api/dependency/locations",value:o.location,onChange:i.onChange,clearable:!!o.location,disabled:!0},null,8,["label","value","onChange","clearable"])):d("",!0),s("div",pd,[u(D,{id:"phone_number",classname:"col-sm-9",name:"phone_number",onChange:i.onChange,value:o.phone_number,countryCode:o.phone_country_code,countryIso:o.phone_iso,onCountCode:i.getPCountCode,onCountIso:i.getPCountIso,labelName:"phone_number",apiUrl:"/api/dependency/country-codes?time="+Date.now()},null,8,["onChange","value","countryCode","countryIso","onCountCode","onCountIso","apiUrl"]),u(A,{label:e.lang("ext"),value:o.ext,name:"ext",classname:"col-sm-3",onChange:i.onChange,type:"number"},null,8,["label","value","onChange"])]),u(D,{id:"mobile",name:"mobile",onChange:i.onChange,value:o.mobile,countryCode:o.country_code,onCountCode:i.getCountCode,countryIso:o.iso,onCountIso:i.getCountIso},null,8,["onChange","value","countryCode","onCountCode","countryIso","onCountIso"]),u(k,{value:o.agent_sign,type:"text",onChange:i.onChange,name:"agent_sign",label:e.lang("agent_sign"),classname:"",lang:"en"},null,8,["value","onChange","label"]),u(b,{options:o.radioOptions,label:e.lang("for_auto_assign_accept_tickets"),name:"not_accept_ticket",value:o.not_accept_ticket,onChange:i.onChange,classname:"form-group"},null,8,["options","label","value","onChange"])]),s("div",gd,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=I=>i.onSubmit()),disabled:o.isDisabled},[bd,p(" "+r(e.lang("update")),1)],8,fd)])])])):d("",!0),o.hasDataPopulated?(n(),l("div",yd,[s("div",vd,[s("div",wd,[s("h3",kd,r(e.lang("change_password")),1)]),s("div",Cd,[u(f,{label:e.lang("old_password"),value:o.old_password,type:"password",name:"old_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"]),u(f,{label:e.lang("new_password"),value:o.new_password,type:"password",name:"new_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,id:"new_password"},null,8,["label","value","onChange","placehold"]),u(f,{label:e.lang("confirm_password"),value:o.confirm_password,type:"password",name:"confirm_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,id:"confirm_password"},null,8,["label","value","onChange","placehold"])]),s("div",Dd,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=I=>i.onUpdatePassword()),disabled:o.passDisabled},[Sd,p(" "+r(e.lang("update")),1)],8,Md)])]),s("div",Id,[s("div",Td,[s("h3",Ad,r(e.lang("2fa_setup")),1)]),s("div",Od,[s("div",Ld,[s("div",Pd,[s("span",null,[s("img",{class:"img-responsive img-circle img-sm",src:e.basePathVersion()+"/themes/default/common/images/authenticator.png",alt:"A",id:"auth_img"},null,8,Ud),p(" "+r(o.two_factor?"2-Step Verification is ON since "+c.formattedTime(o.profileData.google2fa_activation_date):e.lang("authenticator_app")),1)])]),s("div",$d,[o.two_factor?d("",!0):v((n(),l("button",{key:0,type:"button",class:"btn btn-primary float-right",onClick:t[2]||(t[2]=I=>o.showModal=!0),disabled:o.profileData.is_otp_verification_enabled},[Vd,p(" "+r(e.lang("turn_on")),1)],8,Fd)),[[ue,e.lang("google_2fa_tooltip_for_status_"+!o.profileData.is_otp_verification_enabled)]]),o.two_factor?(n(),l("button",{key:1,type:"button",class:"btn btn-danger float-right",onClick:t[3]||(t[3]=I=>o.removeModal=!0)},[qd,p(" "+r(e.lang("turn_off")),1)])):d("",!0)])]),s("div",Ed,r(i.profileBoxVisible()),1)])]),u(F,{userId:o.profileData.id,showBtn:!0},null,8,["userId"]),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(z,{key:0,onClose:i.onClose,showModal:o.showModal},null,8,["onClose","showModal"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.removeModal?(n(),C(Y,{key:0,onClose:i.onClose,showModal:o.removeModal,alertName:"edit_agent_profile"},null,8,["onClose","showModal"])):d("",!0)]),_:1})])):d("",!0)])])}const zd=T(nd,[["render",Rd]]);const Bd={name:"inbox-layout",description:"Inbox layout Component",props:{from:{type:String,default:""}},data(){return{ticketPage:"",counter:0}},created(){window.emitter.on("refreshTicketPage",this.reloadPage)},beforeMount(){if(this.from)this.ticketPage="filter";else{let e=JSON.parse('{"'+decodeURIComponent(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}');this.ticketPage=e["show[]"]}},methods:{reloadPage(){this.counter+=1}},components:{"tickets-index":us}},Nd={class:"col-sm-12"};function jd(e,t,a,c,o,i){const _=h("tickets-index");return n(),l("div",Nd,[(n(),C(_,{selectedColor:e.headerColor,ticketPage:o.ticketPage,key:o.counter},null,8,["selectedColor","ticketPage"]))])}const Ee=T(Bd,[["render",jd]]);const Wd={name:"column-list",data(){return{loading:!1,hasDataPopulated:!1,columns:[],column:{},apiUrl:"",next_page:!0,showLoader:!1,max_count:0,saveColumnsData:[]}},props:{tableColumns:{type:Array,required:!0},reportId:{type:Number,default:null},columnId:{type:Number,default:null}},beforeMount(){this.hasDataPopulated=!1,this.saveColumnsData=this.tableColumns,this.tableColumns.length>0&&this.getInitialColumns()},methods:{saveColumns(){this.columns.forEach((e,t)=>{e.order=t+1}),this.saveColumnsData.forEach(e=>{let t=this.columns.find(a=>a.id===e.id);t&&(e.order=t.order)}),this.saveColumnsData.sort((e,t)=>e.order-t.order),this.reportId?this.apiUrl="api/agent/report-columns/"+this.reportId:this.apiUrl="/user-export-columns",this.loading=!0,S.post(this.apiUrl,this.saveColumnsData).then(e=>{window.emitter.emit("onColumnUpdate",this.saveColumnsData),V(e,"dataTableModal")}).catch(e=>{L(e,"dataTableModal")}).finally(()=>{this.loading=!1})},onLabelClick(e,t){this.saveColumnsData.length===1&&element.is_visible||(t.is_visible=!t.is_visible,this.handelSaveColumns(t)),this.preventToCloseBox(e)},preventToCloseBox(e){e.stopPropagation()},checkBoxClicked(e){e.is_visible=!e.is_visible,this.handelSaveColumns(e)},getInitialColumns(){this.columns=[],this.page=1,this.getColumns()},getColumns(e,t=!1){this.showLoader=!0,S.get("api/agent/report-columns/paginate/"+this.columnId,{params:{page:this.page}}).then(a=>{this.max_count=a.data.data.max_count,t?this.columns=a.data.data.report_columns.data:this.columns.push(...a.data.data.report_columns.data),this.columns.map(c=>{c.is_visible=!!c.is_visible}),e&&e.loaded(),this.next_page=a.data.data.report_columns.next_page_url!==null,this.next_page?this.page++:e&&e.complete(),this.showLoader=!1}).catch(a=>{this.showLoader=!1,L(a,"dataTableModal")})},handelSaveColumns(e){const t=this.saveColumnsData.findIndex(a=>a.id===e.id);t===-1&&e.is_visible?this.saveColumnsData.push(e):t!==-1&&!e.is_visible&&this.saveColumnsData.splice(t,1)}},components:{"draggable-element":et}},we=e=>(q("data-v-527a4793"),e=e(),E(),e),Kd={id:"column-list"},Hd={class:"btn-group float-right"},Yd={type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu-columns"},xd=we(()=>s("i",{class:"fas fa-columns"},null,-1)),Jd={class:"dropdown-menu dropdown-menu-lg dropdown-menu-right","aria-labelledby":"dropdown-menu-columns",id:"scrollable-ul"},Gd=["onClick","value","disabled","onUpdate:modelValue"],Qd=["onClick","title"],Zd=we(()=>s("i",{class:"fas fa-arrows-alt-v","aria-hidden":"true"},null,-1)),Xd=[Zd],ec=we(()=>s("span",null,null,-1)),tc=we(()=>s("span",null,null,-1)),sc={key:1,class:"mb-3"},ac={class:"column-list-btn-element",slot:"footer"},oc=["disabled"],nc=we(()=>s("i",{class:"fas fa-sync"},null,-1));function ic(e,t,a,c,o,i){const _=h("draggable-element"),g=h("infinite-loading"),m=h("reuse-loader"),f=h("custom-loader"),w=U("tooltip");return n(),l("span",Kd,[s("div",Hd,[s("button",Yd,[xd,p(" "+r(e.lang("columns")),1)]),s("div",Jd,[u(_,{list:o.columns,handle:".drag-btn",class:"report-column-element",itemKey:"id"},{item:y(({element:D,index:A})=>[(n(),l("a",{href:"javascript:;",class:"dropdown-item report-column-list",key:D.id},[v(s("input",{type:"checkbox",class:"form-check-input",onClick:k=>i.checkBoxClicked(D),value:D.key,disabled:o.saveColumnsData.length===1&&D.is_visible,"onUpdate:modelValue":k=>D.is_visible=k},null,8,Gd),[[st,D.is_visible],[w,o.saveColumnsData.length===1&&D.is_visible?e.trans("atleast_one_column_needs_to_be_selected"):""]]),s("span",{onClick:k=>i.onLabelClick(k,D),class:"column-label",title:D.hover?D.hover:D.label},"  "+r(e.getSubString(D.label,30)),9,Qd),s("span",{class:"float-right margin-horizontal-5 drag-btn",title:"Move this column",onClick:t[0]||(t[0]=(...k)=>i.preventToCloseBox&&i.preventToCloseBox(...k))},Xd)]))]),_:1},8,["list"]),o.next_page?(n(),C(g,{key:0,onInfinite:i.getColumns},{spinner:y(()=>[ec]),complete:y(()=>[tc]),_:1},8,["onInfinite"])):d("",!0),o.showLoader?(n(),l("div",sc,[u(m,{"animation-duration":4e3,size:20})])):d("",!0),s("div",ac,[v((n(),l("button",{type:"button",id:"save-columns",class:"btn btn-sm btn-primary",onClick:t[1]||(t[1]=(...D)=>i.saveColumns&&i.saveColumns(...D)),disabled:o.saveColumnsData.length>o.max_count},[nc,p(" "+r(e.lang("apply")),1)],8,oc)),[[w,o.saveColumnsData.length>o.max_count&&!o.showLoader?e.trans("column-tooltip")+o.max_count+" "+e.trans("columns"):""]])])])]),o.loading&&o.hasDataPopulated?(n(),C(f,{key:0})):d("",!0)])}const lc=T(Wd,[["render",ic],["__scopeId","data-v-527a4793"]]),rc={setup(){const e=x();return{customFormattedTime:B(()=>e.getters.customFormattedTime)}},props:["data","keyName","timestampFormat"]},dc=["innerHTML"];function cc(e,t,a,c,o,i){return n(),l("span",{innerHTML:c.customFormattedTime(a.data[a.keyName],a.timestampFormat)},null,8,dc)}const hc=T(rc,[["render",cc]]);const uc={name:"asset-image-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},imageSrc:{type:String,default:""}},data(){return{modalWidth:"80%"}},methods:{onImageLoad(){const e=this.$refs.imageContainer.clientWidth;this.modalWidth=`${e}px`}}},_c=e=>(q("data-v-744b1215"),e=e(),E(),e),mc={key:0,class:"modal"},pc={class:"modal-header"},gc=_c(()=>s("span",{"aria-hidden":"true",id:"modal_close"},"×",-1)),fc=[gc],bc={class:"modal-bodyy"},yc={class:"image-container",ref:"imageContainer"},vc=["src"];function wc(e,t,a,c,o,i){return a.showModal?(n(),l("div",mc,[s("div",{class:"overlay",onClick:t[0]||(t[0]=(..._)=>a.onClose&&a.onClose(..._))}),s("div",{class:"modal-content",style:N({width:o.modalWidth})},[s("div",pc,[s("button",{type:"button",class:"close-button",onClick:t[1]||(t[1]=(..._)=>a.onClose&&a.onClose(..._))},fc)]),s("div",bc,[s("div",yc,[s("img",{src:a.imageSrc,alt:"Asset Image",class:"img-fluid",onLoad:t[2]||(t[2]=(..._)=>i.onImageLoad&&i.onImageLoad(..._))},null,40,vc)],512)])],4)])):d("",!0)}const kc=T(uc,[["render",wc],["__scopeId","data-v-744b1215"]]);const Cc={name:"AssetImage",components:{AssetImageModal:kc},data(){return{showImage:!1}},props:{data:{type:Object,required:!0}},methods:{onClose(){this.showImage=!1}}},Dc={key:0},Mc={key:1,class:"asset_image"},Sc=["src"];function Ic(e,t,a,c,o,i){const _=h("asset-image-modal");return n(),l(M,null,[a.data.asset_image===null?(n(),l("div",Dc,r("--"))):(n(),l("div",Mc,[s("img",{href:"javascript:;",onClick:t[0]||(t[0]=g=>o.showImage=!0),src:a.data.asset_image.view_url,class:"assetimage"},null,8,Sc)])),o.showImage&&a.data.asset_image.view_url?(n(),C(_,{key:2,onClose:i.onClose,showModal:o.showImage,"image-src":a.data.asset_image.view_url},null,8,["onClose","showModal","image-src"])):d("",!0)],64)}const Tc=T(Cc,[["render",Ic],["__scopeId","data-v-03ecfde5"]]);const Ac={class:"name-container"},Oc={class:"name"},Lc={class:"name-status"},Pc={key:0,class:"badge badge-danger"},Uc={__name:"DataTableNameWithStatus",props:{data:{type:Object,required:!0}},setup(e){const t=e,a=B(()=>{switch(t.data.status){case"Open":return"badge-success";case"Closed":return"badge-danger";case"In-progress":return"badge-warning";default:return"badge-default"}}),c=B(()=>new Date().toISOString()>t.data.end_date);return(o,i)=>{const _=h("router-link"),g=U("tooltip");return n(),l("div",Ac,[s("div",Oc,[u(_,{class:"redirect-link",to:e.data.view_url},{default:y(()=>[v((n(),l("span",null,[p(r(e.data.name),1)])),[[g,e.data.name]])]),_:1},8,["to"])]),s("div",Lc,[s("span",{class:O(["badge",a.value])},r(e.data.status),3),p("  "),c.value?(n(),l("span",Pc,r(o.lang("task-plugin-overdue")),1)):d("",!0)])])}}},$c=T(Uc,[["__scopeId","data-v-3666978e"]]);const Fc={name:"SimpleTableListElements",props:["data","index","column"],data(){return{limit:2,isReadMore:!0}},computed:{listElements:function(){let e=this.data[this.column];return e?e.slice(0,this.limit):[]},displayShowAllButton:function(){return this.isReadMore&&this.data[this.column].length>2},urlTarget(){return this.data.listElementObj.redirectUrl?"_blank":""}},methods:{readMore(){this.isReadMore=!1,this.limit=this.data[this.column].length},readLess(){this.isReadMore=!0,this.limit=2},url(e){return this.data.listElementObj.redirectUrl?this.data.listElementObj.redirectUrl.replace(this.basePath(),"")+e.id:""}}},Vc={class:"element-list-box"},qc={key:0},Ec=["href"],Rc={key:2,href:"javascript:;"};function zc(e,t,a,c,o,i){const _=h("router-link");return n(),l("div",Vc,[i.listElements.length===0?(n(),l("span",qc,"--")):d("",!0),i.listElements.length>0?(n(),l(M,{key:1},[(n(!0),l(M,null,P(i.listElements,g=>(n(),l("div",{key:g.id},[g.url&&g.url.includes("admin")?(n(),l("a",{key:0,href:g.url},r(g.name),9,Ec)):g.url?(n(),C(_,{key:1,to:g.url},{default:y(()=>[p(r(g.name),1)]),_:2},1032,["to"])):(n(),l("a",Rc,r(g.name),1))]))),128)),s("div",null,[i.displayShowAllButton?(n(),l("button",{key:0,class:"btn btn-default btn-xs",onClick:t[0]||(t[0]=(...g)=>i.readMore&&i.readMore(...g))},r(e.trans("show_all")),1)):d("",!0),o.isReadMore?d("",!0):(n(),l("button",{key:1,class:"btn btn-default btn-xs",onClick:t[1]||(t[1]=(...g)=>i.readLess&&i.readLess(...g))},r(e.trans("show_less")),1))])],64)):d("",!0)])}const Bc=T(Fc,[["render",zc],["__scopeId","data-v-52cb4c93"]]);const Nc={data(){return{columnNames:[],options:{},templateObject:{}}},props:{dataUrl:{type:String,required:!0},columns:{type:Object,required:!0},tickets:{type:Function,default:()=>[]},columnsMeta:{type:Array,required:!0},filterParams:{type:Object,required:!0},staticColumns:{type:Array,default:()=>[]},reportType:{type:String,default:""},show_pagination:{type:Boolean,default:!1},showNameWithStatus:{type:Boolean,default:!1},deleteMessage:{type:String,default:""}},beforeMount(){this.prepareDynamicComponents(),this.updateColumnNames(),this.updateOptions()},methods:{prepareDynamicComponents(){this.columnsMeta.map(e=>{let t=e.key.replace(/\./g,"-");if(e.is_html){let a=e.key.split(".");this.getHyperlinkInstance(t,e.key,a[0])}if(e.is_timestamp){let a=ss(e.timestamp_format);this.getTimestampInstance(t,e.key,a)}})},updateColumnNames(){this.columnNames=Object.keys(this.columns),this.staticColumns.length&&this.staticColumns.map(e=>{e=="id"?this.columnNames.unshift(e):this.columnNames.push(e)})},sortableFields(){let e=[];return this.columnsMeta.map(t=>{t.is_sortable&&e.push(t.key)}),e},getHyperlinkInstance(e,t,a){this.templateObject[t]=(c,o,i)=>{if(this.showNameWithStatus){if(t==="name")return this.h($c,{data:o});if(["tickets.url","changes.url","users.url","teams.url"].includes(t))return this.h(Bc,{data:o,index:i,column:a})}else return this.h(xt,{data:o,keyName:t,colName:a})}},getTimestampInstance(e,t,a){this.templateObject[t]=(c,o)=>this.h(hc,{data:o,keyName:t,timestampFormat:a})},updateOptions(){const e=this.reportType,t=this.deleteMessage;this.options={headings:this.columns?{...this.columns,id:"Id",user_actions:this.trans("user_actions"),asset_image:this.trans("asset_image"),actions:this.trans("actions"),active:this.trans("active"),info:this.trans("info"),status:this.trans("status")}:null,perPageValues:[10,25,50,100,200,500],sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{user_actions:(a,c)=>this.h(Jt,{data:c}),asset_image:(a,c)=>this.h(Tc,{data:c}),actions:(a,c)=>this.h(oe,{data:c}),active(a,c){return c.active==="YES"?"Yes":"No"},info:(a,c)=>this.h(ot,{data:c}),status:(a,c)=>this.h(Be,{data:c}),...this.templateObject},texts:{filter:"",limit:""},responseAdapter({data:a}){window.emitter.emit("dataCount",a.data.total),window.emitter.emit("responseData",a);let c=e?a.data[e]:a.data.data;return Array.isArray(c)&&(c=c.map(o=>(t&&t.trim()!==""&&(o.deleteMessage=t),o))),{data:c,count:a.data.total}},requestAdapter:a=>{let c={"sort-field":a.orderBy,"sort-order":a.ascending?"desc":"asc","search-query":a.query.trim(),limit:a.limit};return this.show_pagination||(c.page=a.page),{...c,...this.filterParams}},columnsClasses:{ticket_number:"ticket_number",subject:"subject",periods:"periods",version:"version",persons:"persons",actions:"actions"},sortable:this.sortableFields(),filterable:!0}}},watch:{filterParams(){window.emitter.emit("refreshData")},columns(){this.prepareDynamicComponents(),this.updateColumnNames(),this.updateOptions(),window.emitter.emit("refreshData")}}},jc={id:"dynamic-datatable-container"};function Wc(e,t,a,c,o,i){const _=h("data-table");return n(),l("div",jc,[u(_,{id:"dynamic-datatable",url:a.dataUrl,dataColumns:o.columnNames,option:o.options,tickets:a.tickets,show_pagination:a.show_pagination,scroll_to:"dynamic-datatable"},null,8,["url","dataColumns","option","tickets","show_pagination"])])}const Kc=T(Nc,[["render",Wc]]);function Hc(e){let{parentUser:t,childUser:a}=e;t==null&&(t="");var c={parentUser:[t,"isRequired"],childUser:[a,"isRequired"]};const o=new K(j),{errors:i,isValid:_}=o.validate(c);return H.dispatch("setValidationError",i),{errors:i,isValid:_}}const Yc={name:"merge-user-modal",description:"Merge user Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:Number|String,default:""},onClose:{type:Function},componentTitle:{type:String,default:"timeline"},reloadUsers:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,size:60,merge_reason:"",title:"",parentUser:"",childUser:"",user:"",id:!1,page:1,pageSize:10,parent_users:[],parentUsersLoaded:!1,childUsersLoaded:!1,initialParentUsers:[],initialChildUsers:[]}},computed:{parentUsers(){return Array.isArray(this.parent_users)?this.initialChildUsers&&this.initialChildUsers.length>0?this.parent_users.filter(e=>!this.initialChildUsers.some(t=>t.id===e.id)):this.parent_users:[]},childUsers(){return this.initialParentUsers?this.parent_users.filter(e=>e.id!==this.initialParentUsers.id):this.userId?this.parent_users.filter(e=>e.id!==this.userId):this.parent_users},dynamicSelectEndpoint(){return`/api/dependency/users?page=${this.page}&per_page=${this.pageSize}&supplements[no_email]=user-only`}},methods:{isValid(){const{errors:e,isValid:t}=Hc(this.$data);return t},mergeUser(e,t){const a={page:e,per_page:this.pageSize,"supplements[no_email]":"user-only"};S.get("/api/dependency/users",{params:a}).then(c=>{this.loading=!1;const o=c.data.data.users;for(var i in o)o[i].value=o[i].email,o[i].id=o[i].id,o[i].name=o[i].name;t?(this.initialParentUsers=o,this.parentUsersLoaded=!0):(this.child_users=[...this.child_users,...o.filter(_=>!this.child_users.some(g=>g.id===_.id))],this.childUsersLoaded=!0)}).catch(c=>{this.loading=!1,L(c,this.componentTitle)})},onChange(e,t){this[t]=e,this.isValid(),(t==="parentUser"||t==="childUser")&&(e&&this.isValid(),e==null&&this.isValid())},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={parent_id:this.parentUser?this.parentUser.id:this.userId,reason:this.merge_reason,_method:"PATCH",children_id:this.childUser.map(t=>t.id)};S.post("/merge-users",e).then(t=>{this.loading=!1,V(t,"merge-user-modal"),setTimeout(()=>{this.onClose(),this.reloadUsers()},2e3)}).catch(t=>{this.loading=!1,this.isDisabled=!1,L(t,"merge-user-modal")})}}},watch:{showModal(e){e&&(this.page=1,this.child_users=[],this.mergeUser(this.page,!0))},childUser(e){e&&e.length>0&&this.mergeUser(1,!1)},page(e){e>1&&this.child_users.length<this.pageSize*(e-1)&&this.mergeUser(e,!1)}},components:{textField:te,staticSelect:ye,dynamicSelect:Q}},xc={class:"modal-title"},Jc={key:0,id:"merge_content"},Gc={class:"alert alert-warning"},Qc=s("i",{class:"fas fa-warning"},null,-1),Zc={key:0,class:"row"},Xc={key:1,class:"row"},eh={class:"row"},th={key:1,class:"row",slot:"fields"},sh=["disabled"],ah=s("i",{class:"fas fa-check"},null,-1);function oh(e,t,a,c,o,i){const _=h("alert"),g=h("dynamic-select"),m=h("text-field"),f=h("reuse-loader"),w=h("modal");return a.showModal?(n(),C(w,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle,id:o.id},{title:y(()=>[s("h4",xc,r(e.lang("merge_users")),1)]),alert:y(()=>[u(_,{componentName:"merge-user-modal"})]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",Jc,[s("div",Gc,[Qc,p(" "+r(e.trans("caution-merge-users")),1)]),this.userId?(n(),l("div",Xc,[u(g,{name:"childUser",label:e.lang("select_users"),value:o.childUser,elements:i.childUsers,onChange:i.onChange,classname:"col-sm-12",apiEndpoint:i.dynamicSelectEndpoint,multiple:!0,required:!0,strlength:"30",loadOnScroll:!0},null,8,["label","value","elements","onChange","apiEndpoint"])])):(n(),l("div",Zc,[u(g,{name:"parentUser",label:e.lang("select-parent-user"),value:o.parentUser,elements:i.parentUsers,onChange:i.onChange,classname:"col-sm-6",apiEndpoint:i.dynamicSelectEndpoint,required:!0,strlength:"30",multiple:!1},null,8,["label","value","elements","onChange","apiEndpoint"]),u(g,{name:"childUser",label:e.lang("select_users"),value:o.childUser,elements:i.childUsers,onChange:i.onChange,classname:"col-sm-6",apiEndpoint:i.dynamicSelectEndpoint,multiple:!0,required:!0,strlength:"30",loadOnScroll:!0},null,8,["label","value","elements","onChange","apiEndpoint"])])),s("div",eh,[u(m,{label:e.lang("merge-reason"),value:o.merge_reason,type:"textarea",name:"merge_reason",onChange:i.onChange,classname:"col-sm-12"},null,8,["label","value","onChange"])])])),o.loading?(n(),l("div",th,[u(f,{"animation-duration":4e3,color:"#1d78ff",size:o.size},null,8,["size"])])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...D)=>i.onSubmit&&i.onSubmit(...D)),class:"btn btn-primary",disabled:o.isDisabled},[ah,p(" "+r(e.lang("proceed")),1)],8,sh)]),_:1},8,["showModal","onClose","containerStyle","id"])):d("",!0)}const pt=T(Yc,[["render",oh]]);const nh={name:"user-directory",description:"User list component",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},data(){return{queryParameter:this.$route.query,params:"",hasDataPopulated:!1,isShowFilter:!1,showMergeUSerModal:!1,visibleColumns:{},apiUrl:"user-export-data",columns:[],options:{},filterParams:{},staticColumns:["info","user_actions"],filterOptions:[{section:[{name:"userType",url:"",elements:[{id:"all",name:"All",queryPerm:"roles[0]=user&roles[1]=agent"},{id:"active_users",name:"Active users",queryPerm:"roles[0]=user&active=1"},{id:"deactivated_users",name:"Deactivated users",queryPerm:"roles[0]=user&active=0"},{id:"all_users",name:"All users",queryPerm:"roles[0]=user"},{id:"active_agents",name:"Active agents",queryPerm:"roles[0]=agent&active=1"},{id:"deactivated_agents",name:"Deactivated agents",queryPerm:"roles[0]=agent&active=0"},{id:"all_agents",name:"All agents",queryPerm:"roles[0]=agent"},{id:"all_active",name:"Activate Users and Agents",queryPerm:"roles[0]=user&roles[1]=agent&active=1"},{id:"all_deactive",name:"Dectivated Users and Agents",queryPerm:"roles[0]=user&roles[1]=agent&active=0"}],isMultiple:!1,isPrepopulate:!1,label:"user_type",value:{id:"active",name:"Active users",queryPerm:"roles[0]=user&roles[1]=agent&active=1"},className:"col-sm-3",strlength:25},{name:"departments",url:"api/dependency/departments",elements:[],isMultiple:!0,isPrepopulate:!1,label:"departments",value:"",className:"col-sm-3",strlength:25},{name:"teams",url:"api/dependency/teams",elements:[],isMultiple:!0,isPrepopulate:!1,label:"teams",value:"",className:"col-sm-3",strlength:25}]},{section:[{name:"organizations",url:"api/dependency/organizations",elements:[],isMultiple:!0,isPrepopulate:!1,label:"organizations",value:"",className:"col-sm-3",strlength:25},{name:"created_at",type:"date",label:["created_between","created_in"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0,isCustom:!1}]}],newReportId:"",dataCount:"",showIcon:!1}},beforeMount(){this.queryParameter.hasOwnProperty("label_ids")&&(this.apiUrl=`user-export-data?label_ids=${this.queryParameter.label_ids}`),this.queryParameter.hasOwnProperty("dt")&&this.handleDownload(this.queryParameter.dt),this.getColumns()},created(){window.emitter.on("onColumnUpdate",this.onColumnUpdate),window.emitter.on("dataCount",this.handleDataCount)},methods:{getColumns(){this.hasDataPopulated=!1,S.get("api/agent/report-config/user-report").then(e=>{this.hasDataPopulated=!0,this.newReportId=e.data.data.id,this.columnData=e.data.data.sub_reports,this.columnData.forEach(t=>{this.columns=t.columns}),this.columns.map(t=>{t.is_visible=!!t.is_visible}),this.updateVisibleColumns()}).catch(e=>{this.hasDataPopulated=!0,this.columns=[],L(e)})},onColumnUpdate(e){this.columns=e,this.updateVisibleColumns()},updateVisibleColumns(){this.visibleColumns={},this.columns.map(e=>{ae(e.is_visible)&&(this.visibleColumns[e.key]=e.label)})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.apiUrl="/user-export-data",this.filterOptions=this.filterOptions.map(function(e){return e.value="",e})},applyFilter(e){let t="/user-export-data?",a="";if(e.userType?(this.filterOptions[0].value=e.userType,a=e.userType.queryPerm+"&"):a="roles[0]=user&roles[1]=agent&",e.departments&&(a=this.commonMethod(0,1,"dept-ids",e.departments,a)),e.teams&&(a=this.commonMethod(0,2,"team-ids",e.teams,a)),e.organizations&&(a=this.commonMethod(1,0,"org-ids",e.organizations,a)),e.created_at){e=e.created_at;let c="";if(e.includes("last"))c=e;else{let o=G(e[0]).format("YYYY-MM-DD HH:mm:ss"),i=G(e[1]).format("YYYY-MM-DD HH:mm:ss");c="date::"+o+"~"+i}a+="created_at="+c+"&"}a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1,this.params=this.reformatExportData(a)},reformatExportData(e){const t=e.split("&").reduce((c,o)=>{const[i,_]=o.split("=");return c[i]=_,c},{}),a={};for(const c in t){const o=c.match(/([a-zA-Z_-]+)\[(\d+)\]/);if(o){const[i,_,g]=o;a[_]=a[_]||[],a[_][g]=t[c]}else c==="created_at"&&(a[c]=t[c])}return a},commonMethod(e,t,a,c,o){var i;return i=o,this.filterOptions[e].section[t].value=c,c.forEach(function(_,g){i+=a+"["+g+"]="+_.id+"&"}),i},toggleFilterView(){this.isShowFilter=!this.isShowFilter},mergeUSerModal(){this.showMergeUSerModal=!0},onClose(){this.showMergeUSerModal=!1,this.$store.dispatch("unsetValidationError"),window.emitter.emit("onColumnUpdate",this.columns),window.emitter.emit("refreshData")},handleDownload(e){S.get("user/export/download/"+e).then(t=>{let a=t.data.data.href,c=document.createElement("a");if(c.href=a,document.body.appendChild(c),c.setAttribute("download",this.generateFileNameFromPath(a)),c.click(),V(t,"dataTableModal"),history.pushState){let o=`${window.location.protocol}//${window.location.host}${window.location.pathname}`;window.history.pushState({path:o},"",o)}}).catch(t=>{L(t,"dataTableModal")})},generateFileNameFromPath(e){let t=e.split("/");return t[t.length-1]},handleDataCount(e){this.showIcon=!!e,this.dataCount=e},triggerExport(){const e={...this.params,total:this.dataCount};S.post("/api/agent/report-export/"+this.newReportId,e).then(t=>{V(t,"dataTableModal")}).catch(t=>{L(t,"dataTableModal")})}},components:{"user-column-list":lc,"advance-filter":Gt,"dynamic-datatable":Kc,"merge-user-modal":pt}},ih={class:"col-sm-12",id:"user_list"},lh={key:0,class:"card card-light"},rh={class:"card-header"},dh={class:"card-title"},ch={class:"card-tools"},hh=s("i",{class:"glyphicon glyphicon-plus"},null,-1),uh=s("i",{class:"fas fa-paper-plane"},null,-1),_h=[uh],mh=s("i",{class:"glyphicon glyphicon-filter"},null,-1),ph=[mh],gh=s("i",{class:"fas fa-code-merge"},null,-1),fh=[gh],bh={class:"card-body",id:"my_user"};function yh(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("merge-user-modal"),f=h("advance-filter"),w=h("user-column-list"),D=h("dynamic-datatable"),A=U("tooltip");return n(),l("div",ih,[u(_,{componentName:"dataTableModal"}),o.hasDataPopulated?(n(),l("div",lh,[s("div",rh,[s("h3",dh,r(e.trans("list_of_contacts")),1),s("div",ch,[v((n(),C(g,{class:"btn btn-tool",to:"/user/create"},{default:y(()=>[hh]),_:1})),[[A,e.trans("create_contact")]]),o.showIcon?v((n(),l("button",{key:0,class:"btn btn-tool",onClick:t[0]||(t[0]=(...k)=>i.triggerExport&&i.triggerExport(...k)),href:"javascript:;"},_h)),[[A,e.trans("export")]]):d("",!0),v((n(),l("button",{class:"btn btn-tool",onClick:t[1]||(t[1]=(...k)=>i.toggleFilterView&&i.toggleFilterView(...k)),href:"javascript:;"},ph)),[[A,e.trans("filter")]]),v((n(),l("button",{type:"button",class:"btn btn-tool",href:"javascript:;",onClick:t[2]||(t[2]=k=>i.mergeUSerModal()),id:"merge_users"},fh)),[[A,e.trans("merge_users")]]),u(R,{name:"modal"},{default:y(()=>[o.showMergeUSerModal?(n(),C(m,{key:0,onClose:i.onClose,showModal:o.showMergeUSerModal},null,8,["onClose","showModal"])):d("",!0)]),_:1})])]),s("div",bh,[v(u(f,{id:"filter-box",metaData:o.filterOptions,onSelectedFilters:i.selectedFilters},null,8,["metaData","onSelectedFilters"]),[[_e,o.isShowFilter]]),(n(!0),l(M,null,P(e.columnData,k=>(n(),l("section",{key:k},[u(w,{"table-columns":k.columns,reportId:k.id,columnId:o.newReportId},null,8,["table-columns","reportId","columnId"]),o.columns.length?(n(),C(D,{key:0,columns:o.visibleColumns,filterParams:o.filterParams,columnsMeta:o.columns,"data-url":o.apiUrl,staticColumns:o.staticColumns},null,8,["columns","filterParams","columnsMeta","data-url","staticColumns"])):d("",!0)]))),128))])])):d("",!0)])}const vh=T(nh,[["render",yh]]);const wh={name:"user-export",description:"User export component",data(){return{date_range:"",start:"",end:"",loading:!1}},methods:{getPickers(){const e=this;let t=new Date;return[{text:"Today",onClick(){return e.onChange([t,t],"date_range")}},{text:"Yesterday",onClick(){return e.onChange([new Date(Date.now()-864e5),new Date(Date.now()-864e5)],"date_range")}},{text:"Last 7 days",onClick(){return e.onChange([new Date(Date.now()-864e5*7),t],"date_range")}},{text:"Last 30 days",onClick(){return e.onChange([new Date(Date.now()-864e5*30),t],"date_range")}},{text:"Next 7 days",onClick(){return e.onChange([t,new Date(Date.now()+864e5*7)],"date_range")}},{text:"Next 30 days",onClick(){return e.onChange([t,new Date(Date.now()+864e5*30)],"date_range")}},{text:"This month",onClick(){return e.onChange([new Date(t.getFullYear(),t.getMonth(),1),new Date(t.getFullYear(),t.getMonth()+1,0)],"date_range")}},{text:"Last month",onClick(){return e.onChange([new Date(t.getFullYear(),t.getMonth()-1,1),new Date(t.getFullYear(),t.getMonth()-1+1,0)],"date_range")}}]},onChange(e,t){this[t]=e,this.start=e[0]!==null?G(e[0]).format("YYYY-MM-DD"):"",this.end=e[1]!==null?G(e[1]).format("YYYY-MM-D"):""},onSubmit(){this.start?(this.loading=!0,S.get("/user-export-download?start_date="+this.start+"&end_date="+this.end).then(e=>{this.$store.dispatch("setAlert",{type:"success",message:e.data.message,component_name:"UserExport"}),this.loading=!1}).catch(e=>{this.loading=!1,L(e,"UserExport")})):this.$store.dispatch("setAlert",{type:"danger",message:"Please select the date range",component_name:"UserExport"})}},components:{"date-time-field":ve}},kh=e=>(q("data-v-a66cc7b3"),e=e(),E(),e),Ch={class:"col-sm-12"},Dh={class:"card card-light"},Mh={class:"card-header"},Sh={class:"card-title"},Ih={class:"card-body"},Th={key:0,class:"row"},Ah=kh(()=>s("i",{class:"fas fa-save"},null,-1)),Oh={key:1,class:"row"},Lh={class:"col-md-12 col-sm-12 col-12"};function Ph(e,t,a,c,o,i){const _=h("alert"),g=h("date-time-field"),m=h("reuse-loader");return n(),l("div",Ch,[u(_,{componentName:"UserExport"}),s("div",Dh,[s("div",Mh,[s("h3",Sh,r(e.lang("users")),1)]),s("div",Ih,[o.loading?d("",!0):(n(),l("div",Th,[u(g,{label:e.lang("select_date_range"),value:o.date_range,type:"date",name:"date_range",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-sm-6",clearable:!0,editable:!0,disabled:!1,pickers:i.getPickers()},null,8,["label","value","onChange","pickers"]),s("a",{class:"btn btn-primary",onClick:t[0]||(t[0]=f=>i.onSubmit()),id:"range-submit",href:"javascript:;"},[Ah,p(" "+r(e.lang("submit")),1)])])),o.loading?(n(),l("div",Oh,[s("div",Lh,[u(m,{"animation-duration":4e3,size:60})])])):d("",!0)])])])}const Uh=T(wh,[["render",Ph],["__scopeId","data-v-a66cc7b3"]]);const $h={name:"edit-ticket-modal",description:"Edit Ticket modal Component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""}},data(){return{formUniqueKey:"",submitFormInProgress:!1,scenario:"create",panel:"agent",showForm:!1,formSelected:!1,fetchFormFieldApi:"",selectedForm:""}},beforeMount(){this.getDefaultFormValue()},mixins:[as],methods:{getDefaultFormValue(){axios.get("/from/forms/organisation").then(e=>{this.selectedForm=e.data.data.data[0],this.updateFetchApi()}).catch(e=>{L(e,"faveo-form")})},updateFetchApi(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey),this.$store.dispatch("unsetValidationError"),this.fetchFormFieldApi="/render/form?id="+this.selectedForm.id+"&mode=render",setTimeout(()=>{this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario||"create"}),this.formSelected=!0},1)},popUpSubmit(){document.getElementById("organization-submit-button").click()},formSubmit(e,t){this.$store.dispatch("setRecaptchaKey",t),this.onSubmit({user_id:this.userId})},afterSubmit(e){window.emitter.emit("reset-captcha"),setTimeout(()=>{window.emitter.emit("refreshUserData",!0),this.onClose()},1e3)},showModalMethod(){this.showForm=!0},onClose(){this.showForm=!1}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{"form-with-captcha":os}},gt=e=>(q("data-v-88ca273d"),e=e(),E(),e),Fh={id:"create-org",class:"float-right"},Vh=gt(()=>s("i",{class:"fas fa-edit"},null,-1)),qh={id:"modal_body"},Eh=["disabled"],Rh=gt(()=>s("i",{class:"fas fa-sync"},null,-1));function zh(e,t,a,c,o,i){const _=h("custom-loader"),g=h("loader"),m=h("alert"),f=h("form-renderer"),w=h("ValidationObserver"),D=h("form-with-captcha"),A=h("modal"),k=U("tooltip");return n(),l("div",Fh,[o.submitFormInProgress?(n(),C(_,{key:0})):d("",!0),v((n(),l("a",{"data-toggle":"modal",onClick:t[0]||(t[0]=(...b)=>i.showModalMethod&&i.showModalMethod(...b)),href:"javascript:;",type:"button","data-target":"#modal_body",class:"btn btn-link pl-0 pr-0"},[p("   "),Vh,p(" | ")])),[[k,e.lang("create")]]),o.showForm?(n(),C(A,{key:1,showModal:o.showForm,onClose:i.onClose},{title:y(()=>[s("h4",null,r(e.lang("create_organization")),1)]),fields:y(()=>[e.showLoader?(n(),C(g,{key:0})):d("",!0),s("div",qh,[u(m,{componentName:"faveo-form"}),o.formUniqueKey&&o.formSelected?(n(),C(D,{key:0,loading:!e.showLoader,btnClass:"btn btn-primary pull-right",btnName:"submit",componentName:"faveo-form",btn_id:"organization-submit-button",formSubmit:i.formSubmit,page:"organisation_create_agent",recaptchaContainerClass:"mt-2",disableSubmit:o.submitFormInProgress},{fields:y(()=>[u(w,{ref:"faveoFormObserver"},{default:y(({values:b,errors:F,validate:z})=>[(n(),C(f,{key:o.formUniqueKey,fetchFormFieldApi:o.fetchFormFieldApi,category:"organisation",scenario:o.scenario,panel:o.panel,isInlineForm:!1,formUniqueKey:o.formUniqueKey},null,8,["fetchFormFieldApi","scenario","panel","formUniqueKey"]))]),_:1},512)]),_:1},8,["loading","formSubmit","disableSubmit"])):d("",!0)])]),controls:y(()=>[e.showLoader?d("",!0):(n(),l("button",{key:0,type:"button",class:"btn btn-primary pull-right",disabled:o.submitFormInProgress,onClick:t[1]||(t[1]=b=>i.popUpSubmit())},[Rh,p(" "+r(e.trans("update")),1)],8,Eh))]),_:1},8,["showModal","onClose"])):d("",!0)])}const Bh=T($h,[["render",zh],["__scopeId","data-v-88ca273d"]]);function Nh(e){const{email:t,mobile:a,modal:c}=e;let o={};c==="email_verified"&&(o.email=[t,"isRequired","isEmail"]),c==="mobile_verified"&&(o.mobile=[a,"isRequired"]);const i=new K(j),{errors:_,isValid:g}=i.validate(o);return H.dispatch("setValidationError",_),{errors:_,isValid:g}}const jh={name:"user-modal",description:"User Modal component",props:{showModal:{type:Boolean,default:!1},userData:{type:Object,default:()=>{}},onClose:{type:Function},title:{type:String,default:""}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},mobile:this.userData.mobile==="Not available"?"":this.userData.mobile,email:this.userData.email,country_code:this.userData.country_code===""||this.userData.country_code===0?91:this.userData.country_code,loading:!1,modal:this.title,data:{},iso:this.userData.iso}},methods:{getCountCode(e){this.country_code=e},getCountIso(e){this.iso=e},onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=Nh(this.$data);return!!t},onSubmit(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.data.id=this.userData.id,this.modal==="email_verified"&&(this.data.email=this.email),this.modal==="mobile_verified"&&(this.data.country_code=this.country_code,this.data.iso=this.iso,this.data.mobile=this.mobile),S.post("/manual-verify",this.data).then(e=>{window.emitter.emit("refreshUserData"),V(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,L(e,"user-view"),this.onClose()}))}},components:{"text-field":te,phoneWithCountryCode:ct}},Wh={class:"modal-title"},Kh={key:0,class:"row"},Hh={key:1,class:"row"},Yh=["disabled"],xh=s("i",{class:"fas fa-check"},null,-1);function Jh(e,t,a,c,o,i){const _=h("text-field"),g=h("phoneWithCountryCode"),m=h("reuse-loader"),f=h("modal"),w=U("focus-first-input");return a.showModal?(n(),C(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",Wh,r(a.title=="email_verified"?e.lang("email_verify"):e.lang("mobile-verify")),1)]),fields:y(()=>[o.loading?d("",!0):v((n(),l("div",Kh,[a.title==="email_verified"?(n(),C(_,{key:0,label:e.lang("email"),value:o.email,type:"email",name:"email",onChange:i.onChange,classname:"col-sm-12",required:!0},null,8,["label","value","onChange"])):d("",!0),a.title==="mobile_verified"?(n(),C(g,{key:1,id:"mobile",classname:"col-sm-12",name:"mobile",onChange:i.onChange,value:o.mobile,countryCode:o.country_code,onCountCode:i.getCountCode,required:!0,countryIso:o.iso,onCountIso:i.getCountIso},null,8,["onChange","value","countryCode","onCountCode","countryIso","onCountIso"])):d("",!0)])),[[w]]),o.loading?(n(),l("div",Hh,[u(m,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...D)=>i.onSubmit&&i.onSubmit(...D)),class:"btn btn-primary",disabled:o.isDisabled},[xh,p(" "+r(e.lang("update_and_verify")),1)],8,Yh)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Gh=T(jh,[["render",Jh]]);const Qh={name:"contract-name",description:"Contract name component.",props:{data:{type:Object,required:!0}},data(){return{showDelete:!1,deleteObj:"",loading:!1}},methods:{removeOrgDept(e){this.showDelete=!0,this.deleteObj=e},onRemoveConfirm(){this.loading=!0,S.delete("/api/user/remove_user_department/"+this.data.user_id+"/"+this.data.org_id+"/"+this.deleteObj.id).then(e=>{this.loading=!1,this.deleteObj="",V(e,"dept_remove"),setTimeout(()=>{this.showDelete=!1,window.emitter.emit("orgDeptRemoved"),this.$store.dispatch("unsetAlert")},2e3)}).catch(e=>{L(e,"dept_remove")})}}},ft=e=>(q("data-v-628f1481"),e=e(),E(),e),Zh={class:"org-link-dept"},Xh={class:"link_badge"},eu=["onClick"],tu=ft(()=>s("i",{class:"fas fa-times"},null,-1)),su=[tu],au={class:"modal-title"},ou={key:1},nu=ft(()=>s("i",{class:"fas fa-unlink"},null,-1));function iu(e,t,a,c,o,i){const _=h("alert"),g=h("reuse-loader"),m=h("modal");return n(),l("div",Zh,[a.data.departments.length?(n(!0),l(M,{key:0},P(a.data.departments,f=>(n(),l("span",Xh,[p(r(f.name)+" ",1),s("a",{href:"javascript:;",class:"text-muted",onClick:w=>i.removeOrgDept(f)},su,8,eu)]))),256)):(n(),l(M,{key:1},[p("--")],64)),o.showDelete?(n(),C(m,{key:2,showModal:o.showDelete,onClose:()=>o.showDelete=!1,containerStyle:{width:"500px"}},{title:y(()=>[s("h4",au,r(e.lang("detach")),1)]),alert:y(()=>[u(_,{componentName:"dept_remove"})]),fields:y(()=>[o.loading?(n(),C(g,{key:0})):d("",!0),o.loading?d("",!0):(n(),l("span",ou,r(e.lang("are_you_sure")),1))]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=f=>i.onRemoveConfirm()),class:"btn btn-primary"},[nu,p(" "+r(e.lang("detach")),1)])]),_:1},8,["showModal","onClose"])):d("",!0)])}const lu=T(Qh,[["render",iu],["__scopeId","data-v-628f1481"]]);const ru={name:"product-assets",description:"Product asset Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},userId:{type:[String,Number],default:""},deptCondition:{type:[Boolean,Number],default:!1}},data(){return{columns:this.deptCondition?["organization","organization_Departments","action"]:["organization","action"],options:{},apiUrl:"api/user/get_organization_with_department/"+this.userId,containerStyle:{width:"950px"},loading:!1,counter:0}},created(){window.emitter.on("orgDeptRemoved",this.refreshLink)},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{organization:j("organisation"),organization_Departments:j("organisation_departments")},texts:{filter:"",limit:""},columnsClasses:{organization:"org-linked-organization",departments:"org-linked-department"},templates:{organization:function(t,a){return e.h(ce,{to:"/organizations/"+a.org_id},a.organization)},organization_Departments:(t,a)=>e.h(lu,{data:a}),action:(t,a)=>e.h(oe,{data:a})},sortable:[],filterable:!1,pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return window.emitter.emit("linkedOrgTotal",t.data.total),{data:t.data.data.map(a=>(a.delete_url=e.basePath()+"/api/remove-user-org/"+e.userId+"/"+a.org_id,a.alertComponentName="org-linked-datatable",a.deleteicon="fas fa-unlink",a.deleteTip="detach",a.deleteTitle="detach",a)),count:t.data.total}}}},methods:{refreshLink(){this.counter+=1}}},du={class:"modal-title"},cu={class:"height-limit",id:"org-linked-table"},hu={key:0,class:"row"};function uu(e,t,a,c,o,i){const _=h("alert"),g=h("data-table"),m=h("custom-loader"),f=h("modal");return a.showModal?(n(),C(f,{showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle,key:o.counter},{title:y(()=>[s("h4",du,r(a.deptCondition?e.trans("linked_org_dept"):e.trans("linked_org")),1)]),fields:y(()=>[s("div",cu,[u(_,{componentName:"org-linked-datatable"}),u(g,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"org-linked-list"},null,8,["url","dataColumns","option"])]),o.loading?(n(),l("div",hu,[u(m,{duration:4e3})])):d("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const _u=T(ru,[["render",uu]]);function mu(e){const{organizations:t}=e;let a={organizations:[t,"isRequired"]};const c=new K(j),{errors:o,isValid:i}=c.validate(a);return H.dispatch("setValidationError",o),{errors:o,isValid:i}}const pu={name:"org-modal",description:"Organization Modal component",props:{showModal:{type:Boolean,default:!1},title:{type:String,default:""},orgId:{type:[String,Number],default:""},userId:{type:[String,Number],default:""},onClose:{type:Function},deptCondition:{type:[Boolean,Number]}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,organizations:[],org_dept:[],org_dept_api:"",btnName:this.title==="assign"?"assign":"remove",btnClass:this.title==="assign"?"btn btn-primary":"btn btn-danger",iconClass:this.title==="assign"?"fas fa-hand-point-right":"fas fa-unlink"}},methods:{onSubmit(){if(this.title==="assign"){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};if(e.organisation=this.organizations.map(t=>t.id),this.org_dept.length){e.organisation_department=this.org_dept.map(a=>a.id);let t=[];for(let a in this.org_dept)t.push(JSON.stringify({org_dept:this.org_dept[a].id,org_id:this.org_dept[a].org_id}));e.related=t}else e.organisation_department=[],e.related=[];S.post("/api/user-org-assign/"+this.userId,e).then(t=>{V(t,"org-assign-modal"),this.afterSuccess()}).catch(t=>{L(t,"org-assign-modal"),this.afterResponse()})}}else this.loading=!0,this.isDisabled=!0,S.delete("/api/remove-user-org/"+this.userId+"/"+this.orgId).then(e=>{V(e,"user-view"),this.afterSuccess()}).catch(e=>{L(e,"user-view"),this.afterResponse()})},afterSuccess(){this.afterResponse(),setTimeout(()=>{window.emitter.emit("refreshUserData","org_link"),this.onClose()},3e3)},afterResponse(){this.loading=!1,this.isDisabled=!1},isValid(){const{errors:e,isValid:t}=mu(this.$data);return!!t},onChange(e,t){if(this[t]=e,t==="organizations"){this.org_dept="";var a=[];if(e.length>0){for(var c in e)a.push(e[c].id);this.org_dept_api="/org/department/search?org_id="+a}}}},components:{"dynamic-select":Q}},gu={class:"modal-title"},fu={key:0},bu={key:1,class:"row"},yu={key:2,class:"row"},vu=["disabled"];function wu(e,t,a,c,o,i){const _=h("alert"),g=h("dynamic-select"),m=h("reuse-loader"),f=h("modal");return a.showModal?(n(),C(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",gu,r(e.lang(a.title)),1)]),alert:y(()=>[u(_,{componentName:"org-assign-modal"})]),fields:y(()=>[a.title==="remove"&&!o.loading?(n(),l("div",fu,[s("span",null,r(e.lang("are_you_sure_you_want_to_remove")),1)])):d("",!0),a.title==="assign"&&!o.loading?(n(),l("div",bu,[u(g,{label:e.lang("organizations"),multiple:!0,name:"organizations",classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations",value:o.organizations,onChange:i.onChange,required:!0},null,8,["label","value","onChange"]),a.deptCondition?(n(),C(g,{key:0,label:e.lang("organization_department"),multiple:!0,name:"org_dept",classname:"col-sm-12",apiEndpoint:o.org_dept_api,value:o.org_dept,onChange:i.onChange,required:!1},null,8,["label","apiEndpoint","value","onChange"])):d("",!0)])):d("",!0),o.loading?(n(),l("div",yu,[u(m,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...w)=>i.onSubmit&&i.onSubmit(...w)),class:O(o.btnClass),disabled:o.isDisabled},[s("i",{class:O(o.iconClass)},null,2),p(" "+r(e.lang(o.btnName)),1)],10,vu)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const ku=T(pu,[["render",wu]]);const Cu={name:"user-label",description:"User label component",props:{userObj:{type:Object,default:()=>{}},reloadDetails:{type:Function}},data(){return{labels:"",loading:!0,checked:!1,selectedLabels:[],show_loader:!1,search:""}},beforeMount(){this.getSelectedLabels()},methods:{getSelectedLabels(){this.userObj.labels&&this.userObj.labels.forEach(e=>{this.selectedLabels.push(e.title)})},subString(e){return X(e,30)},onCreate(){this.redirect("/labels/create")},onCancel(){var e=document.getElementById("label-dropdown");e.classList.remove("show"),this.loading=!1},onClick(e){if(this.selectedLabels.includes(e)){for(var t in this.selectedLabels)if(this.selectedLabels[t]===e){this.selectedLabels.splice(t,1);break}}else this.selectedLabels.push(e)},getLabels(e){S.get("/api/dependency/labels?limit=all&meta=true&limit-by-status=false&search-query="+e).then(t=>{this.loading=!1,this.labels=t.data.data.labels}).catch(t=>{this.loading=!1})},onSubmit(){this.loading=!0;const e={};e.user_id=this.userObj.id,e.labels=this.selectedLabels,S.post("/labels-user",e).then(t=>{window.emitter.emit("refreshUserData"),this.onCancel(),this.loading=!1,V(t,"user-view")}).catch(t=>{this.onCancel(),this.loading=!1,L(t,"user-view")})}}},Pe=e=>(q("data-v-1a0f4e31"),e=e(),E(),e),Du={id:"labels-div",class:"btn-group"},Mu=Pe(()=>s("i",{class:"fas fa-edit"},null,-1)),Su=Pe(()=>s("span",{class:"caret"},null,-1)),Iu=[Mu,Su],Tu={key:0},Au=["placeholder"],Ou=["onClick"],Lu={id:"label_title"},Pu={key:0},Uu={class:"text-center"},$u={class:"label_button"},Fu=Pe(()=>s("i",{class:"fas fa-times"},null,-1)),Vu=Pe(()=>s("i",{class:"fas fa-check"},null,-1));function qu(e,t,a,c,o,i){const _=h("loader"),g=U("tooltip");return n(),l("div",Du,[v((n(),l("button",{class:"btn btn-xs btn-default","data-toggle":"dropdown",id:"labels-button",onClick:t[0]||(t[0]=m=>i.getLabels(o.search))},Iu)),[[g,e.lang("Labels")]]),s("ul",{id:"label-dropdown",class:"dropdown-menu label_menu",onClick:t[5]||(t[5]=m=>m.stopPropagation())},[o.loading?(n(),l("li",Tu,[u(_,{size:30,duration:4e3,color:"#1d78ff"})])):d("",!0),o.loading?d("",!0):(n(),l(M,{key:1},[s("li",null,[v(s("input",{type:"search",class:"form-control mb-1",name:"label",placeholder:e.lang("search"),"onUpdate:modelValue":t[1]||(t[1]=m=>o.search=m),onInput:t[2]||(t[2]=m=>i.getLabels(o.search))},null,40,Au),[[de,o.search]])]),(n(!0),l(M,null,P(o.labels,m=>(n(),l(M,null,[m.status||o.selectedLabels.includes(m.name)?(n(),l("li",{key:0,class:O(["labels",{active:o.selectedLabels.includes(m.name)}]),onClick:f=>i.onClick(m.name)},[s("div",{class:"color mr-2",id:"label_color",style:N({backgroundColor:m.color})},null,4),v((n(),l("label",Lu,[p(r(i.subString(m.name)),1)])),[[g,e.lang(m.name)]]),o.selectedLabels.includes(m.name)?(n(),l("i",{key:0,class:O(["fas fa-times",{cancel_ar:e.isRtlLayout,cancel:!e.isRtlLayout}])},null,2)):d("",!0)],10,Ou)):d("",!0)],64))),256)),o.labels.length===0?(n(),l("li",Pu,[s("p",Uu,r(e.lang("no_results_found")),1)])):d("",!0),s("li",$u,[s("button",{class:O(["btn btn-xs btn-default",{right:e.isRtlLayout,left:!e.isRtlLayout}]),onClick:t[3]||(t[3]=m=>i.onCancel())},[Fu,p(" "+r(e.lang("cancel")),1)],2),s("button",{class:O(["btn btn-xs btn-primary left",{left:e.isRtlLayout,right:!e.isRtlLayout}]),onClick:t[4]||(t[4]=m=>i.onSubmit())},[Vu,p(" "+r(e.lang("apply")),1)],2)])],64))])])}const Eu=T(Cu,[["render",qu],["__scopeId","data-v-1a0f4e31"]]);const Ru={name:"user-details",description:"User details  page",props:{data:{type:[Object,String],default:""}},data(){return{loading:!1,showOrgModal:!1,userData:"",labels:"",orgModalTitle:"",orgId:"",modalTitle:"",showModal:!1,ban:this.data.ban,obj:{},usernameContent:"",emailContent:"",isShowUsername:!1,isShowEmail:!1,showLinkedModal:!1,linkedOrg:this.data.organizations,editVisibilty:!1,showAll:!1,showAllteams:!1,showAlltypes:!1,visibleTeams:[],visibleDepartments:[],visibleTypes:[]}},beforeMount(){this.data.label_field&&this.data.label_field.length>0&&(this.editVisibilty=this.data.label_field[0].display_for_agent)},created(){window.emitter.on("linkedOrgTotal",this.updateLength),this.allDepartments=this.data.departments||[],this.visibleDepartments=this.allDepartments.slice(0,2),this.allTeams=this.data.teams||[],this.visibleTeams=this.allTeams.slice(0,2),this.allTypes=this.data.types||[],this.visibleTypes=this.allTypes.slice(0,2)},computed:{showLocation(){return this.data.role!=="user"?!0:!!this.data.location}},mounted(){this.usernameContent=this.data.user_name,this.emailContent=this.data.email},methods:{showAllDepartments(){this.visibleDepartments=this.allDepartments,this.showAll=!0},showLessDepartments(){this.visibleDepartments=this.allDepartments.slice(0,2),this.showAll=!1},showAllTeams(){this.visibleTeams=this.allTeams,this.showAllteams=!0},showLessTeams(){this.visibleTeams=this.allTeams.slice(0,2),this.showAllteams=!1},showAllTypes(){this.visibleTypes=this.allTypes,this.showAlltypes=!0},showLessTypes(){this.visibleTypes=this.allTypes.slice(0,2),this.showAlltypes=!1},updateLength(e){e||(this.linkedOrg=[])},subString(e,t=20){return X(e,t)},formattedPhone(e){if(e.phone_number&&e.phone_number!=="Not available"){var t=e.ext?"-"+e.ext:" ";return e.phone_country_code||e.phone_number?"+"+e.phone_country_code+" "+this.subString(e.phone_number)+t:this.subString(e.phone_number)}else return"---"},formattedMobile(e){return e.mobile&&e.mobile!=="Not available"?e.mobile.includes(" ")?"+"+this.subString(e.mobile):e.country_code?"+"+e.country_code+" "+this.subString(e.mobile):this.subString(e.mobile):"---"},onClose(){this.showModal=!1,this.showOrgModal=!1,this.showLinkedModal=!1,this.$store.dispatch("unsetValidationError")},userModal(e){this.showModal=!this.data[e],this.modalTitle=e},commonMethod(e,t){e==="/settings/user/status"&&(this.obj.settings_status=t),this.obj.user_id=this.data.id,S.post(e,this.obj).then(a=>{this.loading=!1,window.emitter.emit("refreshUserData"),V(a,"user-view")}).catch(a=>{this.loading=!1,L(a,"user-view")})},orgClick(e,t){this.orgId=t,this.showOrgModal=!0,this.orgModalTitle=e},copyMethod(e,t){let a=document.createElement("input");a.type="text",a.value=t,document.body.appendChild(a),a.select(),document.execCommand("Copy"),e==="username"?this.isShowUsername=!0:this.isShowEmail=!0,document.body.removeChild(a),setTimeout(()=>{this.isShowUsername=!1,this.isShowEmail=!1},1e3)}},components:{"org-modal":ku,"org-linked-modal":_u,"user-modal":Gh,"user-label":Eu,"org-create-modal":Bh}},Ue=e=>(q("data-v-859da97d"),e=e(),E(),e),zu={class:"card card-light card-outline"},Bu={key:0,id:"load",class:"row"},Nu={key:1,class:"card-body box-profile"},ju={class:"text-center"},Wu={class:"profile-username text-center"},Ku={class:"text-muted text-center"},Hu=["id"],Yu={class:"list-group list-group-unbordered mb-3"},xu={class:"list-group-item"},Ju={class:"Username"},Gu={class:"float-right"},Qu={key:0,class:"copyClip"},Zu=Ue(()=>s("i",{class:"far fa-copy"},null,-1)),Xu={class:"list-group-item"},e_={class:"float-right"},t_={key:0,class:"copyClip"},s_=Ue(()=>s("i",{class:"far fa-copy"},null,-1)),a_={key:0,class:"list-group-item"},o_={class:"float-right"},n_={class:"list-group-item"},i_={class:"float-right text-capitalize text-green"},l_={key:1,class:"list-group-item"},r_={class:"float-right"},d_={class:"list-group-item"},c_={class:"float-right"},h_={key:2,class:"list-group-item"},u_={class:"float-right"},__={key:3,class:"list-group-item"},m_={class:"float-right"},p_={key:4,class:"list-group-item"},g_={id:"refresh-org"},f_={class:"float-right"},b_=Ue(()=>s("i",{class:"fas fa-tasks"},null,-1)),y_={key:1,class:"float-right"},v_=Ue(()=>s("i",{class:"fas fa-eye"},null,-1)),w_=[v_],k_={key:5,class:"list-group-item"},C_={id:"refresh-org"},D_={key:0,class:"float-right"},M_={key:1,class:"department-list float-right"},S_=["href"],I_={key:0},T_={key:6,class:"list-group-item"},A_={id:"refresh-team"},O_={key:0,class:"float-right"},L_={key:1,class:"department-list float-right"},P_=["href"],U_={key:0},$_={key:7,class:"list-group-item"},F_={id:"refresh-team"},V_={key:0,class:"float-right"},q_={key:1,class:"department-list float-right"},E_={key:0},R_={key:8,class:"list-group-item"},z_={class:"list-group-item"},B_={key:0,class:"float-right cursor-pointer"},N_={key:0,style:{color:"#3c8dbc"}},j_={key:1},W_={key:1,class:"float-right cursor-pointer"};function K_(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("faveo-image-element"),m=h("user-label"),f=h("org-create-modal"),w=h("org-modal"),D=h("org-linked-modal"),A=h("user-modal"),k=U("tooltip");return n(),l("div",zu,[o.loading||!a.data?(n(),l("div",Bu,[u(_,{"animation-duration":4e3,size:40})])):d("",!0),a.data&&!o.loading?(n(),l("div",Nu,[s("div",ju,[u(g,{id:"userimg","source-url":a.data.profile_pic,classes:["profile-user-img img-fluid img-circle"],"alternative-text":"User Image"},null,8,["source-url"])]),v((n(),l("h3",Wu,[p(r(i.subString(a.data.full_name)),1)])),[[k,a.data.full_name]]),s("p",Ku,[v(s("span",{class:O([{success:a.data.email_verified==1,danger:a.data.email_verified!=1},"fas fa-envelope"]),onClick:t[0]||(t[0]=b=>i.userModal("email_verified"))},null,2),[[k,a.data.email_verified==1?e.lang("user_email_is_verified"):e.lang("user_has_not_verified_email")]]),v(s("span",{class:O([{success:a.data.mobile_verified==1,danger:a.data.mobile_verified!=1},"fas fa-mobile-alt"]),onClick:t[1]||(t[1]=b=>i.userModal("mobile_verified"))},null,2),[[k,a.data.mobile_verified==1?e.lang("user_mobile_is_verified"):e.lang("user_has_not_verified_mobile")]]),v(s("span",{class:O([{success:a.data.is_2fa_enabled==1,danger:a.data.is_2fa_enabled!=1},"fas fa-shield-alt"]),id:"2fa_status_user__"+a.data.id},null,10,Hu),[[k,a.data.is_2fa_enabled==1?e.lang("user_enabled_2fa"):e.lang("user_not_enabled_2fa")]])]),s("ul",Yu,[s("li",xu,[s("div",Ju,[s("b",null,r(e.trans("user_name")),1),s("div",Gu,[v((n(),l("a",null,[p(r(i.subString(a.data.user_name)),1)])),[[k,a.data.user_name]]),o.isShowUsername?(n(),l("span",Qu,r(e.lang("copied")),1)):d("",!0),v((n(),l("button",{class:"btn btn-link pl-0 pr-0",onClick:t[2]||(t[2]=fe(b=>i.copyMethod("username",a.data.user_name),["prevent"]))},[p("  "),Zu])),[[k,e.lang("copy")]])])])]),s("li",Xu,[s("b",null,r(e.trans("email")),1),s("div",e_,[v((n(),l("a",null,[p(r(i.subString(a.data.email)),1)])),[[k,a.data.email]]),o.isShowEmail?(n(),l("span",t_,r(e.lang("copied")),1)):d("",!0),v((n(),l("button",{class:"btn btn-link pl-0 pr-0",onClick:t[3]||(t[3]=fe(b=>i.copyMethod("email",a.data.email),["prevent"]))},[p("  "),s_])),[[k,e.lang("copy")]])])]),a.data.role==="user"&&o.editVisibilty?(n(),l("li",a_,[s("b",null,r(e.trans("labels")),1),p("  "),s("div",o_,[(n(!0),l(M,null,P(a.data.labels,(b,F)=>v((n(),l("a",{target:"_blank",class:"badge mr-1",style:N({backgroundColor:b.color,color:"#FFF"})},[p(r(i.subString(b.title)),1)],4)),[[k,e.trans(b.title)]])),256))]),u(m,{userObj:a.data,reloadDetails:e.reloadData},null,8,["userObj","reloadDetails"])])):d("",!0),s("li",n_,[s("b",null,r(e.lang("role")),1),v((n(),l("a",i_,[p(r(i.subString(a.data.role)),1)])),[[k,a.data.role]])]),a.data.role!=="user"?(n(),l("li",l_,[s("b",null,r(e.lang("work_phone")),1),v((n(),l("a",r_,[p(r(i.formattedPhone(a.data)),1)])),[[k,a.data.phone_number?a.data.phone_number:""]])])):d("",!0),s("li",d_,[s("b",null,r(e.lang("mobile")),1),v((n(),l("a",c_,[p(r(i.formattedMobile(a.data)),1)])),[[k,a.data.mobile?a.data.mobile:""]])]),a.data.role!=="user"?(n(),l("li",h_,[s("b",null,r(e.lang("agent_time_zone")),1),v((n(),l("a",u_,[p(r(a.data.timezone?i.subString(a.data.timezone.name):"---"),1)])),[[k,a.data.timezone?a.data.timezone.name:""]])])):d("",!0),i.showLocation?(n(),l("li",__,[s("b",null,r(e.lang("location")),1),v((n(),l("a",m_,[p(r(a.data.location?i.subString(a.data.location.title):"---"),1)])),[[k,a.data.location?a.data.location.title:""]])])):d("",!0),a.data.role==="user"?(n(),l("li",p_,[s("div",g_,[s("b",null,r(e.lang("organisation")),1),o.linkedOrg.length===0&&!a.data.processing_account_disabling?(n(),l(M,{key:0},[s("div",f_,[v((n(),l("button",{class:"btn btn-link pl-0 pr-0",onClick:t[4]||(t[4]=b=>i.orgClick("assign")),href:"javascript:;"},[p("  "),b_])),[[k,e.lang("Assign")]])]),u(f,{showModal:o.showOrgModal,userId:a.data.id},null,8,["showModal","userId"])],64)):(n(),l("div",y_,[v((n(),l("button",{class:"btn btn-link link-eye",onClick:t[5]||(t[5]=b=>o.showLinkedModal=!0),href:"javascript:;"},w_)),[[k,e.lang("view_linked_org")]])]))])])):d("",!0),a.data.role!=="user"?(n(),l("li",k_,[s("div",C_,[s("b",null,r(e.lang("departments")),1),a.data.departments.length===0?(n(),l("a",D_,"---")):(n(),l("ul",M_,[(n(!0),l(M,null,P(o.visibleDepartments,(b,F)=>(n(),l("li",{key:b.id},[v((n(),l("a",{href:e.basePath()+"/admin/department/"+b.id},[p(r(i.subString(b.name,10)),1)],8,S_)),[[k,b.name]])]))),128)),a.data.departments.length>2?(n(),l("div",I_,[o.showAll?(n(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[6]||(t[6]=(...b)=>i.showLessDepartments&&i.showLessDepartments(...b))},r(e.lang("view_less")),1)):v((n(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[7]||(t[7]=(...b)=>i.showAllDepartments&&i.showAllDepartments(...b))},[p(r(e.lang("view_all")),1)])),[[k,e.trans("view_all_departments")]])])):d("",!0)]))])])):d("",!0),a.data.role!=="user"?(n(),l("li",T_,[s("div",A_,[s("b",null,r(e.lang("teams")),1),p("      "),a.data.teams.length===0?(n(),l("a",O_,"---")):(n(),l("ul",L_,[(n(!0),l(M,null,P(o.visibleTeams,(b,F)=>(n(),l("li",null,[v((n(),l("a",{href:e.basePath()+"/admin/team/"+b.id},[p(r(i.subString(b.name,10)),1)],8,P_)),[[k,b.name]])]))),256)),a.data.teams.length>2?(n(),l("div",U_,[o.showAllteams?(n(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[8]||(t[8]=(...b)=>i.showLessTeams&&i.showLessTeams(...b))},r(e.lang("view_less")),1)):v((n(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[9]||(t[9]=(...b)=>i.showAllTeams&&i.showAllTeams(...b))},[p(r(e.lang("view_all")),1)])),[[k,e.trans("view_all_teams")]])])):d("",!0)]))])])):d("",!0),a.data.role!=="user"?(n(),l("li",$_,[s("div",F_,[s("b",null,r(e.lang("type")),1),p("      "),a.data.types.length===0?(n(),l("a",V_,"---")):(n(),l("ul",q_,[(n(!0),l(M,null,P(o.visibleTypes,(b,F)=>(n(),l("li",null,[v((n(),l("a",null,[p(r(i.subString(b.name,10)),1)])),[[k,b.name]])]))),256)),a.data.types.length>2?(n(),l("div",E_,[o.showAlltypes?(n(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[10]||(t[10]=(...b)=>i.showLessTypes&&i.showLessTypes(...b))},r(e.lang("view_less")),1)):v((n(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[11]||(t[11]=(...b)=>i.showAllTypes&&i.showAllTypes(...b))},[p(r(e.lang("view_all")),1)])),[[k,e.trans("view_all_types")]])])):d("",!0)]))])])):d("",!0),a.data.role==="user"?(n(),l("li",R_,[s("b",null,r(e.lang("address")),1),p("      "),v((n(),l("p",null,[p(r(a.data.internal_note),1)])),[[k,a.data.internal_note]])])):d("",!0),(n(!0),l(M,null,P(a.data.custom_field_values,b=>(n(),l("li",z_,[s("b",null,r(b.label),1),p("      "),Array.isArray(b.value)?(n(),l("span",B_,[(n(!0),l(M,null,P(b.value,(F,z)=>(n(),l(M,null,[v((n(),l("a",null,[p(r(F),1)])),[[k,F]]),z!==b.value.length-1?(n(),l("span",N_,", ")):(n(),l("span",j_," "))],64))),256))])):v((n(),l("a",W_,[p(r(i.subString(b.value,15)),1)])),[[k,b.value]])]))),256))])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showOrgModal?(n(),C(w,{key:0,onClose:i.onClose,showModal:o.showOrgModal,title:o.orgModalTitle,orgId:o.orgId,userId:a.data.id,deptCondition:a.data.OrganizationDepartmentStatus},null,8,["onClose","showModal","title","orgId","userId","deptCondition"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showLinkedModal?(n(),C(D,{key:0,onClose:i.onClose,showModal:o.showLinkedModal,userId:a.data.id,deptCondition:a.data.OrganizationDepartmentStatus},null,8,["onClose","showModal","userId","deptCondition"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(A,{key:0,onClose:i.onClose,showModal:o.showModal,title:o.modalTitle,userData:a.data},null,8,["onClose","showModal","title","userData"])):d("",!0)]),_:1})])}const H_=T(Ru,[["render",K_],["__scopeId","data-v-859da97d"]]);function Y_(e){const{departments:t}=e;let a={departments:[t,"isRequired"]};const c=new K(j),{errors:o,isValid:i}=c.validate(a);return H.dispatch("setValidationError",o),{errors:o,isValid:i}}const x_={name:"org-modal",description:"Organization Modal component",props:{role:{type:String,default:""},role_to:{type:String,default:""},showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function},dept:{type:Array,default:()=>[]},user:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,departments:this.dept}},computed:{apiUrl(){return"/role-change-"+this.role_to+"/"}},methods:{onSubmit(){(this.role_to=="user"||this.isValid())&&this.changeRole()},changeRole(){this.loading=!0,this.isDisabled=!0;const e={};if(this.role_to!=="user"){var t=[];for(var a in this.departments)t.push(this.departments[a].id);e.primary_department=t}S.post(this.apiUrl+this.userId,e).then(c=>{V(c,"user-view"),this.afterSuccess()}).catch(c=>{L(c,"user-view"),this.afterResponse()})},afterSuccess(){this.afterResponse(),window.emitter.emit("refreshUserData"),window.emitter.emit("UserTicketsrefreshData"),window.emitter.emit("UserTicketsuncheckCheckbox"),window.emitter.emit("refreshUserReport")},afterResponse(){this.loading=!1,this.isDisabled=!1,this.onClose()},isValid(){const{errors:e,isValid:t}=Y_(this.$data);return!!t},onChange(e,t){this[t]=e}},components:{"dynamic-select":Q}},J_={class:"modal-title"},G_={key:0},Q_={key:1,class:"row"},Z_={key:2,class:"row"},X_=["disabled"],em=s("i",{class:"fas fa-check"},null,-1);function tm(e,t,a,c,o,i){const _=h("dynamic-select"),g=h("reuse-loader"),m=h("modal");return a.showModal?(n(),C(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",J_,r(e.lang("role_change"))+" "+r(a.role)+" to "+r(a.role_to),1)]),fields:y(()=>[a.role_to==="user"&&!o.loading?(n(),l("div",G_,[s("span",null,[p(r(e.lang("changing_role_to_user"))+" ",1),s("b",null,r(a.user.user_name?a.user.user_name:a.user.email),1),p(". "+r(e.lang("do_you_want_to_proceed_to_change_their_role_to_user")),1)])])):d("",!0),!o.loading&&a.role_to!=="user"?(n(),l("div",Q_,[u(_,{label:e.lang("departments"),multiple:!0,name:"departments",classname:"col-sm-12",apiEndpoint:"/api/dependency/departments",value:o.departments,onChange:i.onChange,required:!0},null,8,["label","value","onChange"])])):d("",!0),o.loading?(n(),l("div",Z_,[u(g,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:o.isDisabled},[em,p(" "+r(e.lang("proceed")),1)],8,X_)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const sm=T(x_,[["render",tm]]);const am={name:"password-modal",description:"Password Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,password:"",class_name:"form-control",text_class:"",statusText:"",styleObj:{},bar_class:""}},methods:{triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()},mouseoverPass(){var e=document.getElementById("changepassword1");e.type==="password"?(e.type="text",document.getElementById("eyeIcons").classList.remove("fa-eye-slash"),document.getElementById("eyeIcons").classList.add("fa-eye")):(e.type="password",document.getElementById("eyeIcons").classList.remove("fa-eye"),document.getElementById("eyeIcons").classList.add("fa-eye-slash"))},keyUp(e){this.statusText=this.checkStrLength(e)},checkStrLength(e){let t=ns(e);return t==="null"?(t="Please enter a password",this.class_name="form-control is-invalid",this.text_class="text-red",this.bar_class="bg-danger",this.styleObj={width:"0%"}):t==="too_short"||t==="your_password_must_be_8_character"?(this.class_name="form-control is-invalid",this.text_class="text-red",this.bar_class="bg-danger",this.styleObj={width:e.length<7?e.length/.6+"%":"25%"}):t==="weak"?(t="your_password_must_be_8_character",this.class_name="form-control is-invalid",this.text_class="text-danger",this.bar_class="bg-danger",this.styleObj={width:"50%"}):(this.class_name="form-control is-valid",this.text_class="text-success",this.bar_class="bg-success",this.styleObj={width:"100%"}),t},getRandomPass(){this.class_name="form-control",this.text_class="",this.bar_class="",this.statusText="",this.styleObj={},S.get("/get/random/password").then(e=>{this.password=e.data.data}).catch(e=>{this.password=""})},onSubmit(){if(this.password.length<8)return this.class_name="form-control is-invalid",this.text_class="text-red",this.bar_class="bg-danger",this.styleObj={width:this.password.length/.6+"%"},this.statusText="your_password_must_be_8_character";if(this.password.match(/^(?=\S*[a-z])(?=\S*[A-Z])(?=\S*\d)(?=\S*[^\w\s])\S{8,}/)){this.loading=!0,this.isDisabled=!0;const e={};e.change_password=this.password,S.post("/changepassword/"+this.userId,e).then(t=>{V(t,"user-view"),this.afterSuccess()}).catch(t=>{L(t,"user-view"),this.afterResponse()})}},afterSuccess(){this.afterResponse(),window.emitter.emit("refreshUserData")},afterResponse(){this.loading=!1,this.isDisabled=!1,this.onClose()}}},$e=e=>(q("data-v-1fdf1fb0"),e=e(),E(),e),om={class:"modal-title"},nm={key:0,class:"row"},im={class:"col-sm-12 form-group",id:"register"},lm=$e(()=>s("span",{class:"text-red"}," *",-1)),rm=$e(()=>s("i",{class:"fas fa-key"},"  ",-1)),dm={class:"input-group"},cm={class:"input-group-append"},hm={class:"input-group-text"},um=$e(()=>s("i",{id:"eyeIcons",class:"fas fa-eye-slash"},null,-1)),_m=[um],mm={class:"pass-status"},pm={key:0,class:"progress progress-sm"},gm={key:1,class:"row"},fm=["disabled"],bm=$e(()=>s("i",{class:"fas fa-check"},null,-1));function ym(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal"),m=U("focus-first-input");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",om,r(e.lang("change_password")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",nm,[s("div",im,[s("label",null,r(e.lang("new_password")),1),lm,s("button",{class:"btn btn-sm btn-default float-right",id:"random",onClick:t[0]||(t[0]=f=>i.getRandomPass())},[rm,p(r(e.lang("password_generator")),1)]),v((n(),l("div",dm,[v(s("input",{type:"password",class:O(o.class_name),name:"change_password",id:"changepassword1","onUpdate:modelValue":t[1]||(t[1]=f=>o.password=f),onKeyup:[t[2]||(t[2]=f=>i.keyUp(o.password)),t[3]||(t[3]=Re((...f)=>i.triggerEvent&&i.triggerEvent(...f),["enter"]))]},null,34),[[de,o.password]]),s("div",cm,[s("span",hm,[s("a",{id:"basic-addon",onClick:t[4]||(t[4]=f=>i.mouseoverPass())},_m)])])])),[[m]]),s("div",mm,[s("span",{class:O(o.text_class),id:"demo"},r(e.lang(o.statusText)),3),o.bar_class?(n(),l("div",pm,[s("div",{class:O(["progress-bar progress-bar-striped",o.bar_class]),role:"progressbar",style:N(o.styleObj)},null,6)])):d("",!0)])])])),o.loading?(n(),l("div",gm,[u(_,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[5]||(t[5]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:o.isDisabled},[bm,p(" "+r(e.lang("proceed")),1)],8,fm)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const vm=T(am,[["render",ym],["__scopeId","data-v-1fdf1fb0"]]);function wm(e){let t={};e.condition=="change_assignee"&&(t.assign=[e.assign,"isRequired"]),e.req_condition=="change_owner"&&(t.req_assign=[e.req_assign,"isRequired"]);const a=new K(j),{errors:c,isValid:o}=a.validate(t);return H.dispatch("setValidationError",c),{errors:c,isValid:o}}const km={name:"deactivate-modal",description:"Deactivate Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function},role:{type:String,default:""},user:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,containerStyle:{width:"650px"},radioOptions:[{name:"unassign_all_open_tickets",value:"surrender"},{name:"change_assignee",value:"change_assignee"}],loading:!1,condition:"surrender",assign:"",labelStyle:{display:"none"},data:{},req_condition:"close",req_assign:"",reqOptions:[{name:"close_all_open_tickets",value:"close"},{name:"change_requester",value:"change_owner"}],userAPI:this.role==="user"?"/api/dependency/users?meta=true&supplements=user-only":"/api/dependency/users?deactivate_id="+this.userId+"&meta=true",userEndpoint:this.role==="user"?"/api/dependency/users?meta=true&supplements=user-only":"/api/dependency/users?deactivate_id="+this.userId+"&meta=true&supplements=agent-admin-only"}},methods:{onChange(e,t){this[t]=e,this.req_assign=this.req_condition=="close"?"":this.req_assign,this.assign=this.condition=="surrender"?"":this.assign},isValid(){const{errors:e,isValid:t}=wm(this.$data);return!!t},onSubmit(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.data.action_on_owned_tickets=this.req_condition,this.req_assign&&(this.data.set_owner_to=this.req_assign.id),this.data.action_on_assigned_tickets=this.condition,this.assign&&(this.data.set_assignee_to=this.assign.id),S.post("/api/account/deactivate/"+this.userId,this.data).then(e=>{window.emitter.emit("refreshUserData","deactivate"),V(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,L(e,"user-deactivate")}))}},components:{"radio-button":ne,"dynamic-select":Q}},ke=e=>(q("data-v-8a7fd542"),e=e(),E(),e),Cm={class:"modal-title"},Dm={key:0},Mm=ke(()=>s("br",null,null,-1)),Sm=ke(()=>s("br",null,null,-1)),Im={class:"row"},Tm={key:1},Am={id:"bold"},Om=ke(()=>s("br",null,null,-1)),Lm=ke(()=>s("br",null,null,-1)),Pm={class:"row"},Um={key:2,class:"row"},$m=["disabled"],Fm=ke(()=>s("i",{class:"fas fa-trash"},null,-1));function Vm(e,t,a,c,o,i){const _=h("alert"),g=h("radio-button"),m=h("dynamic-select"),f=h("reuse-loader"),w=h("modal");return a.showModal?(n(),C(w,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{alert:y(()=>[u(_,{componentName:"user-deactivate"})]),title:y(()=>[s("h4",Cm,r(e.lang("deactivate")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",Dm,[s("b",null,[p(r(e.lang("what_should_happen_to_tickets_requested_by"))+" ",1),s("i",null,r(a.user.meta_name?a.user.meta_name:a.user.email),1),p(" ? ")]),Mm,Sm,s("div",Im,[u(g,{options:o.reqOptions,label:e.lang("Options"),name:"req_condition",value:o.req_condition,onChange:i.onChange,classname:"form-group col-sm-12",labelStyle:o.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),o.req_condition=="change_owner"?(n(),C(m,{key:0,multiple:!1,name:"req_assign",label:e.lang("select_owner"),classname:"col-sm-12",value:o.req_assign,onChange:i.onChange,apiEndpoint:o.userAPI,required:!0,clearable:!!o.req_assign,strlength:"50",labelStyle:o.labelStyle},null,8,["label","value","onChange","apiEndpoint","clearable","labelStyle"])):d("",!0)])])),a.role!="user"?(n(),l("div",Tm,[s("b",Am,[p(r(e.lang("what_should_happen_to_tickets_assigned_to"))+" ",1),s("i",null,r(a.user.meta_name?a.user.meta_name:a.user.email),1),p(" ?")]),Om,Lm,s("div",Pm,[u(g,{options:o.radioOptions,label:e.lang("Options"),name:"condition",value:o.condition,onChange:i.onChange,classname:"form-group col-sm-12",labelStyle:o.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),o.condition=="change_assignee"?(n(),C(m,{key:0,label:e.lang("assign"),multiple:!1,labelStyle:o.labelStyle,name:"assign",classname:"col-sm-12",apiEndpoint:o.userEndpoint,strlength:"50",value:o.assign,onChange:i.onChange,required:!0,clearable:!!o.assign},null,8,["label","labelStyle","apiEndpoint","value","onChange","clearable"])):d("",!0)])])):d("",!0),o.loading?(n(),l("div",Um,[u(f,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...D)=>i.onSubmit&&i.onSubmit(...D)),class:"btn btn-danger",disabled:o.isDisabled},[Fm,p(" "+r(e.lang("deactivate")),1)],8,$m)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const qm=T(km,[["render",Vm],["__scopeId","data-v-8a7fd542"]]);const Em={name:"agent-tickets",description:"Agent panel tickets page",setup(){const e=x();return{getUserData:B(()=>e.getters.getUserData)}},props:{data:{type:Object,default:()=>{}},afterAction:{type:Function,default:()=>{}},dept:{type:Array,default:()=>[]},role:{type:String,default:""},id:{type:[String,Number],default:""},user:{type:Object,default:()=>{}},two_factor:{type:[Boolean,Number],default:!1},disabled_process:{type:[Boolean,Number],default:!1},permissions:{type:Array,default:()=>[]},reloadDetails:{type:Function}},data(){return{currentTabId:1,category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],showModal:!1,statusList:"",showMergeModal:!1,showAssignModal:!1,showRoleModal:!1,showPasswordModal:!1,showDeactivateModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"UserTickets",apiUrl:"",showDisable2FA:!1,ticketTabData:{},statusLoader:!1,statusDiv:0,allEntries:[],showPermissionModal:!1,showDiv:!0,showMergeUSerModal:!1}},beforeMount(){this.category="open",this.getCount()},computed:{updatedPermissions(){return this.permissions},userRole(){return sessionStorage.getItem("user_role")}},created(){window.emitter.on("refreshUserActions",this.updateActionsDiv)},methods:{reloadData(e){this.afterAction(e)},updateActionsDiv(){this.showDiv=!1,setTimeout(()=>{this.showDiv=!0},1e3)},userActionDivMounted(){let e={};e.user_id=this.id,e.permissions=this.updatedPermissions,e.labels=this.labels,window.emitter.emit("user-permission-mounted",e)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:ht(this.ticketId),limit:"all"};S.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_tickets"),component_name:"UserTickets"})},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_tickets"),component_name:"UserTickets"}),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,S.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_more_tickets"),component_name:"UserTickets"}))},tickets(e){this.category=e.id,this.apiUrl=e.url},changeRole(e){this.role_to=e,this.showRoleModal=!0},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.showRoleModal=!1,this.showPasswordModal=!1,this.showDeactivateModal=!1,this.showDisable2FA=!1,this.showPermissionModal=!1,this.showMergeUSerModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?",a=window.location.pathname.split("/");a[a.length-2]==="user"?(e="owner-ids[]="+this.id,t+=e):(e="assignee-ids[]="+this.id,t+=e),S.get(t).then(c=>{this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var o in c.data.data)if(c.data.data.hasOwnProperty(o)){let i={id:o,title:o,count:c.data.data[o]};switch(i.title){case"open":i.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":i.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":i.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":i.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(i)}this.tickets(this.tabs[0])}).catch(c=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},mergeUSerModal(){this.showMergeUSerModal=!0}},components:{"agent-tickets-table":nt,"change-status-modal":it,"merge-ticket-modal":lt,"assign-ticket-modal":rt,"user-role-modal":sm,"password-change-modal":vm,"user-deactivate-modal":qm,"remove-modal":ut,"merge-user-modal":pt}},se=e=>(q("data-v-26fc5ec3"),e=e(),E(),e),Rm={id:"agent-tickets-table"},zm={class:"row"},Bm={class:"col-md-12"},Nm={class:"card card-light card-outline"},jm={class:"card-header border-0"},Wm={key:0,class:"float-right user_view"},Km={key:0,id:"users-action-div",class:"inline-block"},Hm=se(()=>s("i",{class:"fas fa-male"},"  ",-1)),Ym=se(()=>s("i",{class:"fa-solid fa-user-tie"},"  ",-1)),xm=se(()=>s("i",{class:"fa-solid fa-user-gear"},"  ",-1)),Jm=se(()=>s("i",{class:"fas fa-edit"},"  ",-1)),Gm=se(()=>s("i",{class:"fas fa-edit"},"  ",-1)),Qm=se(()=>s("i",{class:"fas fa-lock"},"  ",-1)),Zm=se(()=>s("i",{class:"fas fa-trash"},"  ",-1)),Xm=se(()=>s("i",{class:"fas fa-ban"},"  ",-1)),ep={class:"card-body"},tp={key:0},sp={class:"nav nav-tabs",role:"tablist"},ap={class:"nav-item"},op=["onClick"],np={class:"badge badge-primary"},ip={class:"tab-content"},lp={class:"active tab-pane",role:"tabpanel"},rp={class:"mt-3"},dp=se(()=>s("i",{class:"fas fa-code-branch"},null,-1)),cp=se(()=>s("i",{class:"fas fa-exchange-alt"},null,-1)),hp={key:0,class:"dropdown-menu status-list"},up={key:0,class:"row"},_p=["onClick"],mp={key:1,class:"dropdown-item",href:"javascript:;"},pp=se(()=>s("i",{class:"far fa-hand-point-right"},null,-1)),gp={id:"my_tic"},fp={key:1,class:"row"};function bp(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("reuse-loader"),f=h("agent-tickets-table"),w=h("change-status-modal"),D=h("merge-ticket-modal"),A=h("assign-ticket-modal"),k=h("user-role-modal"),b=h("password-change-modal"),F=h("user-deactivate-modal"),z=h("remove-modal"),Y=h("merge-user-modal"),ue=U("tooltip");return n(),l("div",Rm,[s("div",zm,[s("div",Bm,[u(_,{componentName:"UserTickets"})])]),s("div",Nm,[s("div",jm,[a.role&&!a.disabled_process?(n(),l("div",Wm,[o.showDiv?(n(),l(M,{key:0},[a.role==="user"?(n(),l("div",Km,r(i.userActionDivMounted()),1)):d("",!0)],64)):d("",!0),c.getUserData&&c.getUserData.user_data.id!=a.id?(n(),l(M,{key:1},[a.role!=="user"?(n(),l("button",{key:0,type:"button",class:"btn btn-xs btn-default",onClick:t[0]||(t[0]=I=>i.changeRole("user")),id:"user_role"},[Hm,p(r(e.lang("change_role_to_user")),1)])):d("",!0),a.role!=="agent"?(n(),l("button",{key:1,type:"button",class:"btn btn-xs btn-default",onClick:t[1]||(t[1]=I=>i.changeRole("agent")),id:"agent_role"},[Ym,p(r(e.lang("change_role_to_agent")),1)])):d("",!0),a.role!=="admin"&&i.userRole==="admin"?(n(),l("button",{key:2,type:"button",class:"btn btn-xs btn-default",onClick:t[2]||(t[2]=I=>i.changeRole("admin")),id:"admin_role"},[xm,p(r(e.lang("change_role_to_admin")),1)])):d("",!0)],64)):d("",!0),a.role=="user"?(n(),C(g,{key:2,to:"/user/"+a.id+"/edit",class:"btn btn-xs btn-default"},{default:y(()=>[Jm,p(r(e.lang("edit")),1)]),_:1},8,["to"])):(n(),C(g,{key:3,to:"/agent/"+a.id+"/edit",class:"btn btn-xs btn-default"},{default:y(()=>[Gm,p(r(e.lang("edit")),1)]),_:1},8,["to"])),c.getUserData&&c.getUserData.user_data.id!=a.id?(n(),l("button",{key:4,type:"button",class:"btn btn-xs btn-default",onClick:t[3]||(t[3]=I=>o.showPasswordModal=!0),id:"show_pass"},[Qm,p(r(e.lang("change_password")),1)])):d("",!0),c.getUserData&&c.getUserData.user_data.id!=a.id?(n(),l("button",{key:5,type:"button",class:"btn btn-xs btn-default",onClick:t[4]||(t[4]=I=>o.showDeactivateModal=!0),id:"deactive_pop"},[Zm,p(r(e.lang("deactivate")),1)])):d("",!0),a.two_factor?(n(),l("button",{key:6,type:"button",class:"btn btn-xs btn-default",onClick:t[5]||(t[5]=I=>o.showDisable2FA=!0)},[Xm,p(r(e.lang("disable_2fa")),1)])):d("",!0)])):d("",!0)]),s("div",ep,[o.hasDataPopulated?(n(),l("div",tp,[o.loading?d("",!0):(n(),l(M,{key:0},[s("ul",sp,[(n(!0),l(M,null,P(o.tabs,I=>(n(),l("li",ap,[s("a",{class:O(["nav-link",{active:o.category===I.id}]),"data-toggle":"pill",role:"tab",href:"javascript:;",onClick:$=>i.tickets(I),id:"tickets_tab"},[p(r(e.lang(I.title))+" ",1),s("span",np,r(I.count),1)],10,op)]))),256))]),s("div",ip,[s("div",lp,[s("div",rp,[s("button",{type:"button",onClick:t[6]||(t[6]=I=>i.mergeTicket()),class:"btn btn-xs btn-default",id:"merge_ticket"},[dp,p(" "+r(e.lang("merge")),1)]),(n(),l("div",{class:"btn-group",key:o.statusDiv},[v((n(),l("button",{type:"button",class:"btn btn-xs btn-default dropdown-toggle","data-toggle":"dropdown",onClick:t[7]||(t[7]=I=>i.getStatusList()),id:"status"},[cp,p(" "+r(e.lang("change_status")),1)])),[[ue,e.lang("change_status")]]),o.ticketId.length>0?(n(),l("div",hp,[o.statusLoader?(n(),l("div",up,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:30})])):d("",!0),o.statusLoader?d("",!0):(n(),l(M,{key:1},[o.statusList&&o.statusList.length>0?(n(!0),l(M,{key:0},P(o.statusList,I=>(n(),l("a",{class:"dropdown-item",onClick:$=>i.getStatus(I),href:"javascript:;",id:"change_status"},[s("i",{class:O(I.icon),style:N({color:I.icon_color})},null,6),p("  "+r(I.name),1)],8,_p))),256)):d("",!0),o.statusList&&o.statusList.length===0?(n(),l("a",mp,r(e.lang("no-records")),1)):d("",!0)],64))])):d("",!0)])),o.ticketId.length>0?(n(),l("button",{key:0,type:"button",onClick:t[8]||(t[8]=I=>o.showAssignModal=!0),class:"btn btn-xs btn-default",id:"assign_ticket"},[pp,p(" "+r(e.lang("assign")),1)])):d("",!0)]),s("div",gp,[(n(),C(f,{category:o.category,id:a.id,tickets:i.ticketsData,key:o.category,apiUrl:o.apiUrl,componentTitle:o.componentTitle,scroll_to:"agent-tickets-table",allTickets:i.allData},null,8,["category","id","tickets","apiUrl","componentTitle","allTickets"]))])])])],64))])):d("",!0),!o.hasDataPopulated&&o.loading?(n(),l("div",fp,[u(m,{"animation-duration":4e3,size:60})])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(w,{key:0,onClose:i.onClose,showModal:o.showModal,statusIds:e.statusIds,ticketIds:o.ticketId,status:o.change_status,componentTitle:o.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showMergeModal?(n(),C(D,{key:0,onClose:i.onClose,showModal:o.showMergeModal,parent_tickets:o.parent_tickets,ticketIds:o.ticketId,componentTitle:o.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showAssignModal?(n(),C(A,{key:0,onClose:i.onClose,showModal:o.showAssignModal,ticketIds:o.ticketId,componentTitle:o.componentTitle,tickets:o.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showRoleModal?(n(),C(k,{key:0,onClose:i.onClose,showModal:o.showRoleModal,role_to:o.role_to,role:a.role,userId:a.id,dept:a.dept,user:a.user},null,8,["onClose","showModal","role_to","role","userId","dept","user"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showPasswordModal?(n(),C(b,{key:0,onClose:i.onClose,showModal:o.showPasswordModal,userId:a.id},null,8,["onClose","showModal","userId"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showDeactivateModal?(n(),C(F,{key:0,onClose:i.onClose,showModal:o.showDeactivateModal,userId:a.id,role:a.role,user:a.user},null,8,["onClose","showModal","userId","role","user"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showDisable2FA?(n(),C(z,{key:0,onClose:i.onClose,showModal:o.showDisable2FA,alertName:"user-view",id:a.id,from:"user_view"},null,8,["onClose","showModal","id"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showMergeUSerModal?(n(),C(Y,{key:0,onClose:i.onClose,showModal:o.showMergeUSerModal,userId:a.id},null,8,["onClose","showModal","userId"])):d("",!0)]),_:1})])])])}const yp=T(Em,[["render",bp],["__scopeId","data-v-26fc5ec3"]]);const vp={name:"user-report",description:"User report page",props:{id:{type:[String,Number],default:""},name:{type:String,default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!1,cardOpen:!1}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600},apiEndPoint(){let e=window.location.pathname.split("/");return e[e.length-2]==="user"?this.apiUrl+"?view_as=user":this.apiUrl}},created(){window.emitter.on("refreshUserReport",this.getChartData)},methods:{toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getChartData()},onChange(e,t){let a=e.filter(o=>o),c="";a.length&&(c="date::"+a.map(o=>G(o).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=c,e&&this.getChartData()},getChartData(){this.loading=!0,S.get(this.apiEndPoint,{params:{"user_ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(i=>(i={tension:.5,label:i.label,fill:!1,borderColor:i.border_color,pointBackgroundColor:i.point_background_color,backgroundColor:i.background_color,data:i.data},i));let c=t.map(i=>i.data).map(function(i){return Math.max.apply(Math,i)}),o=Math.max.apply(null,c)<10?1:"";this.$nextTick(()=>{var i=document.getElementById("trafficBar").getContext("2d"),_={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(g,m){return""},display:function(g){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:o}}}}};new ze(i,_)})}},components:{"date-time-field":ve}},Ke=e=>(q("data-v-6b4e4808"),e=e(),E(),e),wp={id:"user_report_div"},kp={class:"card card-light"},Cp={class:"card-title"},Dp={class:"card-tools"},Mp={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Sp=Ke(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),Ip=[Sp],Tp={type:"button",class:"btn btn-tool"},Ap={key:0,class:"card-body"},Op={class:"row"},Lp={class:"row"},Pp={key:0,class:"col-md-12 col-sm-12 col-xs-12"},Up=Ke(()=>s("canvas",{id:"trafficBar"},null,-1)),$p=[Up],Fp=Ke(()=>s("hr",{class:"visible-xs-block"},null,-1));function Vp(e,t,a,c,o,i){const _=h("alert"),g=h("date-time-field"),m=U("tooltip");return n(),l("div",wp,[u(_,{componentName:"UserReport"}),s("div",kp,[s("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...f)=>i.toggleCard&&i.toggleCard(...f))},[v((n(),l("h3",Cp,[p(r(e.lang("report_of"))+" "+r(a.name),1)])),[[m,e.lang("report")]]),s("div",Dp,[o.loading?v((n(),l("button",Mp,Ip)),[[m,e.lang("refresh")]]):d("",!0),s("button",Tp,[s("i",{class:O([{"fas fa-angle-up":o.cardOpen,"fas fa-angle-down":!o.cardOpen},"fs-25"])},null,2)])])]),o.cardOpen?(n(),l("div",Ap,[s("div",Op,[u(g,{label:e.lang("select_date_range"),place:e.lang("select_date_range"),value:o.date,type:"date",name:"date",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-xs-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","place","value","onChange","after"])]),s("div",Lp,[o.loading?d("",!0):(n(),l("div",Pp,$p)),Fp])])):d("",!0)])])}const qp=T(vp,[["render",Vp],["__scopeId","data-v-6b4e4808"]]),Ep={name:"restor-modal",description:"Restore Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,S.post("api/account/restore/"+this.userId).then(e=>{window.emitter.emit("refreshUserData"),V(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,L(e,"user-view"),this.onClose()})}}},Rp={class:"modal-title"},zp={key:0},Bp={key:1,class:"row"},Np=["disabled"],jp=s("i",{class:"fas fa-sync"},null,-1);function Wp(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",Rp,r(e.lang("restore-account")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",zp,[s("span",null,r(e.lang("are_you_sure")),1)])),o.loading?(n(),l("div",Bp,[u(_,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...m)=>i.onSubmit&&i.onSubmit(...m)),class:"btn btn-primary",disabled:o.isDisabled},[jp,p(" "+r(e.lang("restore")),1)],8,Np)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Kp=T(Ep,[["render",Wp]]);function Hp(e){let t={};e.condition=="change_owner"&&(t.assign=[e.assign,"isRequired"]);const a=new K(j),{errors:c,isValid:o}=a.validate(t);return H.dispatch("setValidationError",c),{errors:c,isValid:o}}const Yp={name:"user-delete-modal",description:"User Delete Modal component",props:{showModal:{type:Boolean,default:!1},userData:{type:Object,default:()=>{}},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1,labelStyle:{display:"none"},data:{},condition:"nothing",assign:"",reqOptions:[{name:"do_nothing",value:"nothing"},{name:"delete_permanently",value:"delete"},{name:"change_requester",value:"change_owner"}]}},methods:{onChange(e,t){this[t]=e,this.assign=this.condition=="change_owner"?this.assign:""},isValid(){const{errors:e,isValid:t}=Hp(this.$data);return t},onSubmit(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.data.action_on_owned_tickets=this.condition,this.assign&&(this.data.set_owner_to=this.assign.id),S.delete("/api/account/delete/"+this.userData.id,{data:this.data}).then(e=>{window.emitter.emit("refreshUserData","delete-modal"),V(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,L(e,"user-delete")}))}},components:{"radio-button":ne,"dynamic-select":Q}},xp={key:0,class:"user-del"},Jp={id:"bold"},Gp=s("br",null,null,-1),Qp={key:1,class:"row"},Zp=["disabled"],Xp=s("i",{class:"fas fa-trash"},null,-1);function eg(e,t,a,c,o,i){const _=h("alert"),g=h("radio-button"),m=h("dynamic-select"),f=h("reuse-loader"),w=h("modal");return a.showModal?(n(),C(w,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{alert:y(()=>[u(_,{componentName:"user-delete"})]),title:y(()=>[s("h4",null,r(e.lang("delete")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",xp,[s("b",Jp,r(e.lang("what_should_happen_to_tickets_owned_by"))+" "+r(a.userData.user_name?a.userData.user_name:a.userData.email)+"?",1),Gp,u(g,{options:o.reqOptions,label:e.lang("Options"),name:"condition",value:o.condition,onChange:i.onChange,classname:"form-group col-xs-12",labelStyle:o.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),o.condition=="change_owner"?(n(),C(m,{key:0,multiple:!1,name:"assign",label:e.lang("select_owner"),classname:"col-xs-12",value:o.assign,onChange:i.onChange,apiEndpoint:"/api/dependency/users?meta=true",required:!0,clearable:!!o.assign,strlength:"50",labelStyle:o.labelStyle},null,8,["label","value","onChange","clearable","labelStyle"])):d("",!0)])),o.loading?(n(),l("div",Qp,[u(f,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...D)=>i.onSubmit&&i.onSubmit(...D)),class:"btn btn-danger",disabled:o.isDisabled},[Xp,p(" "+r(e.lang("delete")),1)],8,Zp)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const tg=T(Yp,[["render",eg]]);const sg={name:"user-view",description:"User view page",props:{authInfo:{type:Object,default:()=>{}}},data(){return{userId:"",loading:!0,userData:"",location:"",showModal:!1,showDeleteModal:!1}},created(){window.emitter.on("refreshUserData",this.refreshUserDetails),window.emitter.on("updateEditData",this.refreshUserDetails)},beforeMount(){const e=window.location.pathname;let t=e.split("/");this.location=t[t.length-2],this.userId=ie(e),this.getInitialValues(this.userId)},methods:{refreshUserDetails(e=""){e?setTimeout(()=>{this.loading=!0,this.getInitialValues(this.userId)},2e3):this.getInitialValues(this.userId)},getInitialValues(e){S.get("/api/get-user/view/"+e).then(t=>{this.userData=t.data.data,this.userData.processing_account_disabling&&this.$store.dispatch("setAlert",{type:"warning",duration:5e5,message:j("processing_account_disabling"),component_name:"user-view"}),this.loading=!1}).catch(t=>{this.loading=!1,L(t,"layout"),this.redirect("/panel/dashboard")})},userPageVisible(){window.emitter.emit("user-page-mounted",{disableLoader:"true"})},userBoxVisible(){window.emitter.emit("user-box-mounted",{user_id:this.userId,from:"user",user:this.userData,disableLoader:"true"})},onClose(){this.showModal=!1,this.showDeleteModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"user-details":H_,"user-tickets":yp,"user-report":qp,"user-restore-modal":Kp,"user-delete-modal":tg,"login-logs":_t}},ag=e=>(q("data-v-cbbc3b79"),e=e(),E(),e),og={class:"col-sm-12"},ng={class:"row"},ig={class:"col-md-12"},lg={key:0,class:"row"},rg={class:"col-md-4"},dg={class:"col-md-8"},cg={key:1,id:"user-page-table"},hg={id:"user-view-table"},ug={key:1,class:"col-md-12"},_g={class:"row"},mg={class:"col-md-12",style:{"margin-top":"-15px"}},pg={id:"page",class:"hfeed site"},gg={class:"hentry error404 text-center"},fg=ag(()=>s("h1",{class:"error-title"},[s("i",{class:"fa fa-user-times text-info",style:{color:"grey"}})],-1)),bg={class:"entry-title text-muted"},yg={key:0,class:"entry-content clearfix"},vg={key:1,class:"row"};function wg(e,t,a,c,o,i){const _=h("alert"),g=h("user-details"),m=h("user-tickets"),f=h("login-logs"),w=h("user-report"),D=h("reuse-loader"),A=h("user-restore-modal"),k=h("user-delete-modal");return n(),l("div",og,[s("div",ng,[s("div",ig,[u(_,{componentName:"user-view"})])]),!o.loading&&o.userData?(n(),l("div",lg,[o.userData.active?(n(),l(M,{key:0},[s("div",rg,[u(g,{data:o.userData},null,8,["data"])]),s("div",dg,[o.userId?(n(),C(m,{key:0,id:o.userId,role:o.userData.role,dept:o.userData.departments,user:o.userData,two_factor:o.userData.is_2fa_enabled,disabled_process:o.userData.processing_account_disabling,permissions:o.userData.permissions},null,8,["id","role","dept","user","two_factor","disabled_process","permissions"])):d("",!0),u(f,{userId:o.userId},null,8,["userId"]),o.location==="user"?(n(),l("div",cg,r(i.userPageVisible()),1)):d("",!0),s("div",hg,r(i.userBoxVisible()),1),o.userId?(n(),C(w,{key:2,id:o.userId,name:o.userData.full_name},null,8,["id","name"])):d("",!0)])],64)):(n(),l("div",ug,[s("div",_g,[s("div",mg,[s("div",pg,[s("article",gg,[fg,s("h2",bg,r(o.userData.is_delete?e.lang("user-account-deleted"):e.lang("user-account-deactivated")),1),o.userData.is_delete?d("",!0):(n(),l("div",yg,[s("p",null,[s("button",{type:"button",class:"btn btn-primary btn-xs",onClick:t[0]||(t[0]=b=>o.showModal=!0)},r(e.lang("restore-account")),1),s("button",{type:"button",class:"btn btn-primary btn-xs",onClick:t[1]||(t[1]=b=>o.showDeleteModal=!0)},r(e.lang("delete_account")),1)])]))])])])])]))])):d("",!0),o.loading?(n(),l("div",vg,[u(D,{"animation-duration":4e3,size:60})])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(A,{key:0,onClose:i.onClose,showModal:o.showModal,userId:o.userId},null,8,["onClose","showModal","userId"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showDeleteModal?(n(),C(k,{key:0,onClose:i.onClose,showModal:o.showDeleteModal,userData:o.userData},null,8,["onClose","showModal","userData"])):d("",!0)]),_:1})])}const bt=T(sg,[["render",wg],["__scopeId","data-v-cbbc3b79"]]);const kg={name:"organizations-directory",description:"Organization list component",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},data(){return{apiUrl:"/org-list-data",columns:["name","phone","active_users_count","labels","created_at","updated_at","action"],options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),phone:this.trans("phone"),active_users_count:this.trans("members_count"),labels:this.trans("labels"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},columnsClasses:{name:"organization-name",phone:"organization-phone",active_users_count:"organization-members",labels:"Labels",created_at:"organization-created",updated_at:"organization-updated",action:"organization-action"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},phone(t,a){return a.phone===" Not available"?"---":a.phone},name:function(t,a){return e.h(ce,{to:"/organizations/"+a.id},a.name)},member_count:function(t,a){return a.active_users_count},labels:function(t,a){let c="";return a.labels.map(function(o){c=c+o.title+", "}),c=c.slice(0,-2),c},action:(t,a)=>e.h(oe,{data:a})},sortable:["name","phone","active_users_count","created_at","updated_at"],filterable:["name","phone","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy,order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.edit_url="/organizations/"+a.id+"/edit",a.view_url="/organizations/"+a.id,a.delete_url=e.basePath()+"/org/delete/"+a.id,a)),count:t.message.total}}}}},Cg={id:"org-list",class:"col-sm-12"},Dg={class:"card card-light"},Mg={class:"card-header"},Sg={class:"card-title"},Ig={class:"card-tools"},Tg=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Ag={class:"card-body",id:"my_orgs"};function Og(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=U("tooltip");return n(),l("div",Cg,[u(_,{componentName:"dataTableModal"}),s("div",Dg,[s("div",Mg,[s("h3",Sg,r(e.lang("organization_list")),1),s("div",Ig,[v((n(),C(g,{class:"btn-tool",to:"/organizations/create"},{default:y(()=>[Tg]),_:1})),[[f,e.lang("create_organization")]])])]),s("div",Ag,[u(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"org-list"},null,8,["url","dataColumns","option"])])])])}const Lg=T(kg,[["render",Og]]),Pg={name:"org-manager-modal",description:"Assign Manger to Organization Modal component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},managerList:{type:Array,default:()=>[]}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,managers:this.managerList}},methods:{onChange(e,t){this[t]=e,this.isDisabled=e===""},onSubmit(){this.loading=!0,this.isDisabled=!0;let e=[];for(var t in this.managers)e.push(this.managers[t].id);var a={user:e};S.post("/add/organization/manager?org_id="+this.orgId,a).then(c=>{this.loading=!1,this.isDisabled=!0,V(c,"org-view"),window.emitter.emit("refreshOrgData"),this.onClose()}).catch(c=>{this.loading=!1,this.isDisabled=!1,L(c,"org-view"),this.onClose()})}},components:{"dynamic-select":Q}},Ug={class:"modal-title"},$g={key:0,class:"row"},Fg={key:1,class:"row"},Vg=["disabled"],qg=s("i",{class:"fa fa-check"},null,-1);function Eg(e,t,a,c,o,i){const _=h("dynamic-select"),g=h("reuse-loader"),m=h("modal");return a.showModal?(n(),C(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",Ug,r(e.lang("assign_manager")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",$g,[u(_,{label:e.lang("select_manager"),multiple:!0,name:"managers",classname:"col-sm-12",apiEndpoint:"/search/organization/manager/"+a.orgId,value:o.managers,onChange:i.onChange},null,8,["label","apiEndpoint","value","onChange"])])),o.loading?(n(),l("div",Fg,[u(g,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=f=>i.onSubmit()),class:"btn btn-primary",id:"submit_btn",disabled:o.isDisabled},[qg,p(" "+r(e.lang("assign")),1)],8,Vg)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Rg=T(Pg,[["render",Eg]]);const zg={setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},props:{data:{type:[Object,String],default:""},orgData:{type:[String,Number],default:""},managerList:{type:Array,default:()=>[]}},data(){return{showModal:!1,loading:!1,labels:"",orgImage:"",editVisibilty:!1}},beforeMount(){this.orgData.label_field&&this.orgData.label_field.length>0&&(this.editVisibilty=this.orgData.label_field[0].display_for_agent),this.orgImage=this.orgData.logo?this.orgData.logo:this.basePathVersion()+"/themes/default/common/images/org.png"},methods:{subString(e,t=15){return X(e,t)},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"org-manager-modal":Rg}},yt=e=>(q("data-v-43e35b87"),e=e(),E(),e),Bg={class:"card card-light card-outline"},Ng={key:0,class:"row"},jg={key:1,class:"card-body box-profile"},Wg={class:"text-center"},Kg={class:"profile-username text-center"},Hg={class:"text-muted text-center"},Yg=yt(()=>s("i",{class:"fas fa-edit"},null,-1)),xg={class:"list-group list-group-unbordered mb-3"},Jg={class:"list-group-item"},Gg={class:"float-right"},Qg={class:"list-group-item"},Zg={class:"float-right"},Xg={class:"list-group-item"},ef={class:"float-right"},tf={key:0,class:"list-group-item"},sf={class:"float-right"},af={class:"list-group-item"},of={class:"float-right"},nf={class:"list-group-item"},lf={key:0,class:"float-right cursor-pointer"},rf={key:0,style:{color:"#3c8dbc"}},df={key:1,class:"float-right cursor-pointer"},cf=yt(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1));function hf(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("faveo-image-element"),m=h("router-link"),f=h("org-manager-modal"),w=U("tooltip");return n(),l("div",Bg,[o.loading||!a.orgData?(n(),l("div",Ng,[u(_,{"animation-duration":4e3,size:40})])):d("",!0),a.orgData&&!o.loading?(n(),l("div",jg,[s("div",Wg,[u(g,{id:"org_img","source-url":o.orgImage,classes:["profile-user-img img-fluid img-circle"],"alternative-text":"Org Image"},null,8,["source-url"])]),v((n(),l("h3",Kg,[p(r(i.subString(a.orgData.name,20)),1)])),[[w,a.orgData.name]]),s("p",Hg,r(e.trans("organisation")),1),v((n(),C(m,{to:"/organizations/"+a.orgData.id+"/edit",class:"btn btn-primary btn-block"},{default:y(()=>[Yg,p(" "+r(e.trans("edit")),1)]),_:1},8,["to"])),[[w,e.trans("edit")]]),s("ul",xg,[s("li",Jg,[s("label",null,r(e.trans("domain")),1),v((n(),l("a",Gg,[p(r(i.subString(a.orgData.domain?a.orgData.domain:"---",20)),1)])),[[w,a.orgData.domain]])]),s("li",Qg,[s("label",null,r(e.trans("address")),1),v((n(),l("a",Zg,[p(r(i.subString(a.orgData.address?a.orgData.address:"---",30)),1)])),[[w,a.orgData.address]])]),s("li",Xg,[s("label",null,r(e.trans("phone")),1),v((n(),l("a",ef,[p(r(i.subString(a.orgData.phone?a.orgData.phone:"---",20)),1)])),[[w,a.orgData.phone]])]),o.editVisibilty?(n(),l("li",tf,[s("b",null,r(e.trans("labels")),1),s("div",sf,[(n(!0),l(M,null,P(a.orgData.labels,(D,A)=>v((n(),l("a",{target:"_blank",class:"badge mr-1",style:N({backgroundColor:D.color,color:"#FFF"})},[p(r(i.subString(D.title)),1)],4)),[[w,e.trans(D.title)]])),256))])])):d("",!0),s("li",af,[s("label",null,r(e.trans("description")),1),v((n(),l("a",of,[p(r(i.subString(a.orgData.internal_notes?a.orgData.internal_notes:"---",30)),1)])),[[w,a.orgData.internal_notes]])]),(n(!0),l(M,null,P(a.orgData.custom_field_values,D=>(n(),l("li",nf,[s("label",null,r(D.label),1),Array.isArray(D.value)?(n(),l("div",lf,[(n(!0),l(M,null,P(D.value,(A,k)=>(n(),l(M,null,[v((n(),l("a",null,[p(r(A),1)])),[[w,A]]),k!==D.value.length-1?(n(),l("span",rf,", ")):d("",!0)],64))),256))])):v((n(),l("a",df,[p(r(i.subString(D.value,30)),1)])),[[w,D.value]])]))),256))]),s("a",{href:"javascript:;",class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=D=>o.showModal=!0)},[cf,p(" "+r(e.trans("add_manager")),1)])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(f,{key:0,onClose:i.onClose,showModal:o.showModal,orgId:a.orgData.id,managerList:a.managerList},null,8,["onClose","showModal","orgId","managerList"])):d("",!0)]),_:1})])}const uf=T(zg,[["render",hf],["__scopeId","data-v-43e35b87"]]);const _f={name:"",description:"",props:{manager:{type:Object,default:()=>{}}},methods:{subString(e,t=15){return X(e,t)}}},mf=e=>(q("data-v-474cc5f4"),e=e(),E(),e),pf={class:"card card-widget widget-user-2"},gf={class:"widget-user-header bg-warning"},ff={class:"widget-user-image"},bf=mf(()=>s("i",{class:"fas fa-edit"},null,-1)),yf={class:"widget-user-username"},vf={class:"widget-user-desc fs-14"},wf={class:"card-footer p-0"},kf={class:"nav flex-column"},Cf={class:"nav-item"},Df={href:"javascript:;",class:"nav-link text-dark"},Mf={class:"float-right"},Sf={class:"nav-item"},If={href:"javascript:;",class:"nav-link text-dark"},Tf={class:"float-right"};function Af(e,t,a,c,o,i){const _=h("faveo-image-element"),g=h("router-link"),m=U("tooltip");return n(),l("div",pf,[s("div",gf,[s("div",ff,[u(_,{id:"org_man","source-url":a.manager.profile_pic,classes:["img-circle elevation-2"],"alternative-text":"User Avatar"},null,8,["source-url"])]),v((n(),C(g,{to:"/user/"+a.manager.id+"/edit",class:"float-right"},{default:y(()=>[bf]),_:1},8,["to"])),[[m,e.lang("edit")]]),v((n(),l("h3",yf,[p(r(i.subString(a.manager.full_name)),1)])),[[m,a.manager.full_name]]),s("h5",vf,r(e.lang("organization_manager")),1)]),s("div",wf,[s("ul",kf,[s("li",Cf,[s("a",Df,[p(r(e.lang("email"))+" ",1),v((n(),l("span",Mf,[p(r(a.manager.email?a.manager.email:"---"),1)])),[[m,a.manager.email]])])]),s("li",Sf,[s("a",If,[p(r(e.lang("mobile"))+" ",1),v((n(),l("span",Tf,[p(r(a.manager.mobile?a.manager.mobile:"---"),1)])),[[m,a.manager.mobile]])])])])])])}const Of=T(_f,[["render",Af],["__scopeId","data-v-474cc5f4"]]),Lf={name:"org-user-modal",description:"Add User to Organization Modal Component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},usersList:{type:Array,default:()=>[]}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,users:this.usersList}},methods:{onChange(e,t){this[t]=e,this.isDisabled=e===""},onSubmitUser(){this.loading=!0,this.isDisabled=!0;let e={};e.user=this.users.map(t=>t.id),S.post("api/org-user-assign/"+this.orgId,e).then(t=>{this.loading=!1,this.isDisabled=!0,V(t,"org-view"),window.emitter.emit("OrgMembersrefreshData"),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,L(t,"org-view"),this.onClose()})}},components:{"dynamic-select":Q}},Pf={class:"modal-title"},Uf={key:0,class:"row"},$f={key:1,class:"row"},Ff=["disabled"],Vf=s("i",{class:"fas fa-check"},null,-1);function qf(e,t,a,c,o,i){const _=h("dynamic-select"),g=h("reuse-loader"),m=h("modal");return a.showModal?(n(),C(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",Pf,r(e.trans("attach_contacts")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",Uf,[u(_,{label:e.trans("select_contact"),multiple:!0,name:"users",data_key:"users","option-label":"meta_name",classname:"col-sm-12",apiEndpoint:"/api/admin/get-users-list?roles[0]=user&active=1",value:o.users,onChange:i.onChange},null,8,["label","value","onChange"])])),o.loading?(n(),l("div",$f,[u(g,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=fe(f=>i.onSubmitUser(),["prevent"])),class:"btn btn-primary",id:"submit_btn",disabled:o.isDisabled},[Vf,p(" "+r(e.trans("attach")),1)],8,Ff)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Ef=T(Lf,[["render",qf]]);const Rf={name:"org-members",description:"Organization members list",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},props:{data:{type:Object,default:()=>{}},id:{type:[String,Number],default:""},name:{type:String,default:"Organization"},orgData:{type:Object,default:()=>{}},usersList:{type:Array,default:()=>[]},reloadDetails:{type:Function},disableLoader:{type:Boolean,default:!1}},data(){return{showModal:!1,columns:["name","user_name","email","labels","phone_number","info","action"],options:{},apiUrl:"/api/admin/get-users-list?org-ids[0]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.lang("name"),user_name:this.lang("user_name"),email:this.lang("email"),labels:this.lang("labels"),phone_number:this.lang("mobile"),info:this.lang("account_info"),action:this.lang("actions")},columnsClasses:{user_name:"org-name",email:"org-email",phone_number:"org-phone"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h(ce,{to:"/user/"+a.id},a.name)},user_name:function(t,a){return e.h(ce,{to:"/user/"+a.id},a.user_name)},phone_number(t,a){return a.phone===" Not available"||!a.phone?"---":a.phone},email(t,a){return a.email?a.email:"---"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},labels:function(t,a){let c="";return a.labels.map(function(o){c=c+o.title+", "}),c=c.slice(0,-2),c},info:(t,a)=>e.h(ot,{data:a}),action:(t,a)=>e.h(oe,{data:a})},sortable:["user_name","email","phone_number","active","ban","updated_at"],filterable:["user_name","email","phone_number","active","ban","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"updated_at",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users.map(a=>(a.from="agent",a.edit_url="/user/"+a.id+"/edit",a.view_url="/user/"+a.id,a)),count:t.data.total}}}},watch:{orgData:{handler(e){e&&window.emitter.emit("OrgMembersrefreshData")},immediate:!0}},methods:{reloadData(e){this.afterAction(e)},subString(e,t=15){return X(e,t)},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},handelLoader(e){this.loading=e}},components:{"org-user-modal":Ef}},zf={id:"org_members"},Bf={class:"card card-light"},Nf={class:"card-header"},jf={class:"card-title"},Wf={class:"card-tools"},Kf={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Hf=s("i",{class:"fas fa-sync-alt"},null,-1),Yf=[Hf],xf=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Jf=s("i",{class:"fas fa-users"},null,-1),Gf=[Jf],Qf={class:"card-body"};function Zf(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=h("org-user-modal"),w=U("tooltip");return n(),l("div",zf,[u(_,{componentName:"OrgMembers"}),s("div",Bf,[s("div",Nf,[v((n(),l("h3",jf,[p(r(e.trans("contacts_of"))+" "+r(i.subString(a.name,40)),1)])),[[w,e.trans("contacts_of")+" "+a.name]]),s("div",Wf,[o.loading?v((n(),l("button",Kf,Yf)),[[w,e.lang("refresh")]]):d("",!0),v((n(),C(g,{to:"/user/create",class:"btn-tool"},{default:y(()=>[xf]),_:1})),[[w,e.trans("create_contact")]]),v((n(),l("a",{href:"javascript:;",onClick:t[0]||(t[0]=D=>o.showModal=!0)},Gf)),[[w,e.trans("attach_contacts")]])])]),s("div",Qf,[u(m,{url:o.apiUrl,ref:"membersTable",dataColumns:o.columns,disableLoader:a.disableLoader,onLoaderState:i.handelLoader,option:o.options,scroll_to:"org_members",componentTitle:"OrgMembers"},null,8,["url","dataColumns","disableLoader","onLoaderState","option"])])]),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(f,{key:0,onClose:i.onClose,showModal:o.showModal,orgId:a.orgData.id,usersList:a.usersList},null,8,["onClose","showModal","orgId","usersList"])):d("",!0)]),_:1})])}const Xf=T(Rf,[["render",Zf]]);function eb(e){const{org_deptname:t,business_hours:a}=e;let c={org_deptname:[t,"isRequired","max(20)"],business_hours:[a]};const o=new K(j),{errors:i,isValid:_}=o.validate(c);return H.dispatch("setValidationError",i),{errors:i,isValid:_}}const tb={name:"org-dept-modal",description:"Organization Department Modal component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},deptId:{type:[String,Number],default:""}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,manager:"",org_deptname:"",business_hours:"",label:this.trans("organization_department_name").length>=31?this.trans("organization_department_name").substring(0,30).concat("..."):this.trans("organization_department_name")}},beforeMount(){this.deptId&&this.getInitialValues(this.deptId)},methods:{getInitialValues(e){this.loading=!0,S.get("/api/org-department-list/"+e).then(t=>{this.loading=!1,this.org_deptname=t.data.data.org_deptname,this.business_hours=t.data.data.business_hour,this.manager=t.data.data.manager}).catch(t=>{this.loading=!1})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=eb(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};e.org_deptname=this.org_deptname,e.business_hours_id=this.business_hours?this.business_hours.id:"",e.org_dept_manager=this.manager?this.manager.id:"",e.org_id=this.orgId,this.deptId&&(e.org_dept_id=this.deptId),S.post("/create-update-org-dept",e).then(t=>{this.loading=!1,this.isDisabled=!0,V(t,"OrgDepartmentsdataTableModal"),window.emitter.emit("OrgDepartmentsrefreshData"),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,L(t,"org-dept")})}}},components:{"dynamic-select":Q,"text-field":te}},sb={class:"modal-title"},ab={key:0},ob={class:"row"},nb={key:1,class:"row"},ib=["disabled"],lb=s("i",{class:"fa fa-check"},null,-1);function rb(e,t,a,c,o,i){const _=h("alert"),g=h("text-field"),m=h("dynamic-select"),f=h("reuse-loader"),w=h("modal"),D=U("focus-first-input");return a.showModal?(n(),C(w,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",sb,r(e.lang("organization_department")),1)]),alert:y(()=>[u(_,{componentName:"org-dept"})]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",ab,[v((n(),l("div",ob,[u(g,{label:o.label,value:o.org_deptname,type:"text",name:"org_deptname",onChange:i.onChange,classname:"col-sm-4",required:!0},null,8,["label","value","onChange"]),u(m,{label:e.lang("business_hours"),multiple:!1,name:"business_hours",strlength:"15",classname:"col-sm-4",apiEndpoint:"/api/dependency/business-hours",value:o.business_hours,onChange:i.onChange,clearable:!!o.business_hours},null,8,["label","value","onChange","clearable"]),u(m,{label:e.lang("organization_department_manager"),multiple:!1,name:"manager",classname:"col-sm-4",apiEndpoint:"/search/organization/manager/"+a.orgId,value:o.manager,strlength:"15",onChange:i.onChange,clearable:!!o.manager},null,8,["label","apiEndpoint","value","onChange","clearable"])])),[[D]])])),o.loading?(n(),l("div",nb,[u(f,{"animation-duration":4e3,size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=A=>i.onSubmit()),class:"btn btn-primary",id:"submit_btn",disabled:o.isDisabled},[lb,p(" "+r(e.lang("proceed")),1)],8,ib)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const vt=T(tb,[["render",rb]]);const db={name:"org-dept-user-modal",description:"Organization department user modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},orgId:{type:[Number,String],default:""},deptId:{type:[Number,String],default:""}},data(){return{isDisabled:!1,containerStyle:{width:"950px"},loading:!1,size:60,apiUrl:"/org-dept-user-list/"+this.orgId+"/"+this.deptId,columns:["first_name","email"],options:{}}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{first_name:this.lang("name"),email:this.lang("email")},templates:{first_name(t,a){return e.h(ce,{to:"/user/"+a.id},a.full_name?a.full_name:a.user_name)}},sortable:["first_name","email"],filterable:["first_name","email"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.detach=!0,a)),count:t.message.total}}}}},cb={id:"org-dept-user-list"},hb={class:"modal-title"},ub={class:"height-limit"};function _b(e,t,a,c,o,i){const _=h("data-table"),g=h("modal");return n(),l("div",cb,[a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",hb,r(e.lang("list_of_users")),1)]),fields:y(()=>[s("div",ub,[u(_,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"org-dept-user-list",componentTitle:"OrgDeptUserList"},null,8,["url","dataColumns","option"])])]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)])}const mb=T(db,[["render",_b]]),pb={name:"data-table-actions",description:"Contains edit, delete and view buttons as group which can be used as a component as whole. It is built basically for displaying edit, delete and view button in a datable.",props:{data:{type:Object,required:!0}},data(){return{showModal:!1,showEditModal:!1,showUserList:!1,disabled:""}},created(){this.disabled=ae(this.data.is_default)},methods:{onClose(){this.showModal=!1,this.showEditModal=!1,this.showUserList=!1,this.$store.dispatch("unsetValidationError")}},components:{"delete-modal":Ne,"edit-org-dept":vt,"org-dept-user":mb}},gb={class:"block"},fb=s("i",{class:"fas fa-edit"},null,-1),bb=[fb],yb=s("i",{class:"fas fa-list"},null,-1),vb=[yb],wb=s("i",{class:"fas fa-trash"},null,-1),kb=[wb];function Cb(e,t,a,c,o,i){const _=h("delete-modal"),g=h("org-dept-user"),m=h("edit-org-dept"),f=U("tooltip");return n(),l("div",gb,[v((n(),l("a",{class:"btn btn-primary",onClick:t[0]||(t[0]=w=>o.showEditModal=!0),href:"javascript:;"},bb)),[[f,e.lang("edit")]]),v((n(),l("a",{class:"btn btn-primary",onClick:t[1]||(t[1]=w=>o.showUserList=!0),href:"javascript:;"},vb)),[[f,e.lang("user_list_modal")]]),v((n(),l("a",{class:"btn btn-danger",onClick:t[2]||(t[2]=w=>o.showModal=!0),href:"javascript:;"},kb)),[[f,e.lang("delete")]]),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(_,{key:0,onClose:i.onClose,showModal:o.showModal,deleteUrl:a.data.delete_url,componentTitle:"OrgDepartments",alertComponentName:"OrgDepartmentsdataTableModal"},null,8,["onClose","showModal","deleteUrl"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showUserList?(n(),C(g,{key:0,onClose:i.onClose,showModal:o.showUserList,deptId:a.data.id,orgId:a.data.orgId},null,8,["onClose","showModal","deptId","orgId"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showEditModal?(n(),C(m,{key:0,onClose:i.onClose,showModal:o.showEditModal,deptId:a.data.id,orgId:a.data.orgId},null,8,["onClose","showModal","deptId","orgId"])):d("",!0)]),_:1})])}const Db=T(pb,[["render",Cb]]);const Mb={name:"org-departments",description:"Organization departments list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["org_deptname","business_hours_id","org_dept_manager","action"],options:{},apiUrl:"/org-dept-list/"+this.id,showModal:!1,cardOpen:!1,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{org_deptname:e.lang("list_of_org_department"),business_hours_id:e.lang("business_hours"),org_dept_manager:e.lang("organization_department_manager"),action:e.lang("actions")},columnsClasses:{org_deptname:"org-dept",business_hours_id:"org-hours",org_dept_manager:"org-dept-manger"},texts:{filter:"",limit:""},templates:{business_hours_id(t,a){return a.business_hour?a.business_hour.name:"---"},org_dept_manager(t,a){return a.manager?e.h(ce,{to:"/user/"+a.manager.id},a.manager.full_name):"---"},action:(t,a)=>e.h(Db,{data:a})},sortable:["org_deptname","business_hours_id","org_dept_manager"],filterable:["org_deptname","business_hours_id","org_dept_manager"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"updated_at",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.delete_url=e.basePath()+"/delete-org-dept/"+a.id,a.orgId=e.id,a)),count:t.message.total}}}},methods:{toggleCard(){this.cardOpen=!this.cardOpen},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},handelLoader(e){this.loading=e}},components:{"org-dept-modal":vt}},Sb={id:"org_departments"},Ib={class:"card card-light"},Tb={class:"card-header"},Ab={class:"card-title"},Ob={class:"card-tools"},Lb={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Pb=s("i",{class:"fas fa-sync-alt"},null,-1),Ub=[Pb],$b=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Fb=[$b],Vb={key:0,class:"card-body"};function qb(e,t,a,c,o,i){const _=h("alert"),g=h("data-table"),m=h("org-dept-modal"),f=U("tooltip");return n(),l("div",Sb,[u(_,{componentName:"OrgDepartmentsdataTableModal"}),s("div",Ib,[s("div",Tb,[s("h3",Ab,r(e.lang("list_of_org_department")),1),s("div",Ob,[o.cardOpen&&o.loading?v((n(),l("button",Lb,Ub)),[[f,e.lang("refresh")]]):d("",!0),o.cardOpen?v((n(),l("a",{key:1,class:"btn-tool",onClick:t[0]||(t[0]=w=>o.showModal=!0),href:"javascript:;"},Fb)),[[f,e.lang("add_department")]]):d("",!0),s("button",{type:"button",class:"btn btn-tool",onClick:t[1]||(t[1]=(...w)=>i.toggleCard&&i.toggleCard(...w))},[s("i",{class:O([{"fas fa-angle-up":o.cardOpen,"fas fa-angle-down":!o.cardOpen},"fs-25"])},null,2)])])]),o.cardOpen?(n(),l("div",Vb,[u(g,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"org_departments",componentTitle:"OrgDepartments",disableLoader:a.disableLoader,onLoaderState:i.handelLoader},null,8,["url","dataColumns","option","disableLoader","onLoaderState"])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(m,{key:0,onClose:i.onClose,showModal:o.showModal,orgId:a.id},null,8,["onClose","showModal","orgId"])):d("",!0)]),_:1})])])}const Eb=T(Mb,[["render",qb]]);const Rb={name:"org-tickets",description:"Organization tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Organization"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],showModal:!1,statusList:"",showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"OrgTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return X(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:ht(this.ticketId),limit:"all"};S.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert(this.lang("please_select_tickets")),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,S.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="organization-ids[]="+this.id,t+=e,S.get(t).then(a=>{this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var c in a.data.data)if(a.data.data.hasOwnProperty(c)){let o={id:c,title:c,count:a.data.data[c]};switch(o.title){case"open":o.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":o.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":o.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":o.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(o)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"org-tickets-table":nt,"change-status-modal":it,"merge-ticket-modal":lt,"assign-ticket-modal":rt}},Fe=e=>(q("data-v-f10aa4e7"),e=e(),E(),e),zb={id:"org-tickets-table"},Bb={class:"row"},Nb={class:"col-md-12"},jb={class:"card card-light"},Wb={class:"card-header"},Kb={class:"card-title"},Hb={key:0,class:"card-tools"},Yb={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},xb=Fe(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),Jb=[xb],Gb={class:"card-body"},Qb={key:0,class:"nav-tabs-custom"},Zb={class:"nav nav-tabs"},Xb={class:"nav-item"},ey=["onClick"],ty={class:"badge badge-primary"},sy={class:"tab-content"},ay={class:"active tab-pane",id:"activity"},oy={class:"mt-3"},ny=Fe(()=>s("i",{class:"fas fa-code-branch"},null,-1)),iy=Fe(()=>s("i",{class:"fas fa-exchange-alt"},null,-1)),ly={key:0,class:"dropdown-menu status-list"},ry={key:0,class:"row"},dy=["onClick"],cy={key:1,class:"dropdown-item",href:"javascript:;"},hy=Fe(()=>s("i",{class:"far fa-hand-point-right"},null,-1)),uy={id:"my_tic"};function _y(e,t,a,c,o,i){const _=h("alert"),g=h("reuse-loader"),m=h("org-tickets-table"),f=h("change-status-modal"),w=h("merge-ticket-modal"),D=h("assign-ticket-modal"),A=U("tooltip");return n(),l("div",zb,[s("div",Bb,[s("div",Nb,[u(_,{componentName:"OrgTickets"})])]),s("div",jb,[s("div",Wb,[s("h3",Kb,r(e.lang("tickets_of"))+" "+r(i.subString(a.name,40)),1),o.loading?(n(),l("div",Hb,[v((n(),l("button",Yb,Jb)),[[A,e.lang("refresh")]])])):d("",!0)]),s("div",Gb,[o.hasDataPopulated?(n(),l("div",Qb,[s("ul",Zb,[(n(!0),l(M,null,P(o.tabs,k=>(n(),l("li",Xb,[s("a",{class:O(["nav-link",{active:o.category===k.id}]),href:"javascript:;","data-toggle":"pill",role:"tab",onClick:b=>i.tickets(k),id:"tickets_tab"},[p(r(e.lang(k.title))+" ",1),s("span",ty,r(k.count),1)],10,ey)]))),256))]),s("div",sy,[s("div",ay,[s("div",oy,[s("button",{type:"button",onClick:t[0]||(t[0]=k=>i.mergeTicket()),class:"btn btn-xs btn-default",id:"merge_ticket"},[ny,p(" "+r(e.lang("merge")),1)]),(n(),l("div",{class:"btn-group",key:o.statusDiv},[v((n(),l("button",{type:"button",class:"btn btn-xs btn-default dropdown-toggle","data-toggle":"dropdown",onClick:t[1]||(t[1]=k=>i.getStatusList()),id:"status"},[iy,p(" "+r(e.lang("change_status")),1)])),[[A,e.lang("change_status")]]),o.ticketId.length>0?(n(),l("div",ly,[o.statusLoader?(n(),l("div",ry,[u(g,{"animation-duration":4e3,color:"#1d78ff",size:30})])):d("",!0),o.statusLoader?d("",!0):(n(),l(M,{key:1},[o.statusList&&o.statusList.length>0?(n(!0),l(M,{key:0},P(o.statusList,k=>(n(),l("a",{class:"dropdown-item",onClick:b=>i.getStatus(k),href:"javascript:;",id:"change_status"},[s("i",{class:O(k.icon),style:N({color:k.icon_color})},null,6),p("  "+r(k.name),1)],8,dy))),256)):d("",!0),o.statusList&&o.statusList.length===0?(n(),l("a",cy,r(e.lang("no-records")),1)):d("",!0)],64))])):d("",!0)])),o.ticketId.length>0?(n(),l("button",{key:0,type:"button",onClick:t[2]||(t[2]=k=>o.showAssignModal=!0),class:"btn btn-xs btn-default",id:"assign_ticket"},[hy,p(" "+r(e.lang("assign")),1)])):d("",!0)]),s("div",uy,[(n(),C(m,{category:o.category,id:a.id,tickets:i.ticketsData,key:o.category,apiUrl:o.apiUrl,componentTitle:o.componentTitle,scroll_to:"org-tickets-table",from:"org",disableLoader:a.disableLoader,onLoaderValue:i.handelLoader,allTickets:i.allData},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","onLoaderValue","allTickets"]))])])])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(f,{key:0,onClose:i.onClose,showModal:o.showModal,statusIds:e.statusIds,ticketIds:o.ticketId,status:o.change_status,componentTitle:o.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showMergeModal?(n(),C(w,{key:0,onClose:i.onClose,showModal:o.showMergeModal,parent_tickets:o.parent_tickets,ticketIds:o.ticketId,componentTitle:o.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[o.showAssignModal?(n(),C(D,{key:0,onClose:i.onClose,showModal:o.showAssignModal,ticketIds:o.ticketId,componentTitle:o.componentTitle,tickets:o.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):d("",!0)]),_:1})])])])}const my=T(Rb,[["render",_y],["__scopeId","data-v-f10aa4e7"]]);const py={name:"user-report",description:"User report page",props:{id:{type:[String,Number],default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,cardOpen:!1}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getChartData()},onChange(e,t){let a=e.filter(o=>o),c="";a.length&&(c="date::"+a.map(o=>G(o).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=c,e&&this.getChartData()},getChartData(){this.loading=!0,S.get(this.apiUrl,{params:{"organization-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(i=>(i={label:i.label,tension:.5,fill:!1,borderColor:i.border_color,pointBackgroundColor:i.point_background_color,backgroundColor:i.background_color,data:i.data},i));let c=t.map(i=>i.data).map(function(i){return Math.max.apply(Math,i)}),o=Math.max.apply(null,c)<10?1:"";this.$nextTick(()=>{var i=document.getElementById("trafficBar").getContext("2d"),_={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(g,m){return""},display:function(g){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:o}}}}};new ze(i,_)})}},components:{"date-time-field":ve}},He=e=>(q("data-v-7c2b2a27"),e=e(),E(),e),gy={class:"org-tic-report"},fy={class:"card card-light"},by={class:"card-title"},yy={class:"card-tools"},vy={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},wy=He(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),ky=[wy],Cy={type:"button",class:"btn btn-tool"},Dy={key:0,class:"card-body"},My={class:"row"},Sy={class:"row"},Iy={key:0,class:"col-md-12 col-sm-12 col-12"},Ty=He(()=>s("canvas",{id:"trafficBar"},null,-1)),Ay=[Ty],Oy=He(()=>s("hr",{class:"visible-xs-block"},null,-1));function Ly(e,t,a,c,o,i){const _=h("alert"),g=h("date-time-field"),m=U("tooltip");return n(),l("div",gy,[u(_,{componentName:"UserReport"}),s("div",fy,[s("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...f)=>i.toggleCard&&i.toggleCard(...f))},[v((n(),l("h3",by,[p(r(e.lang("report")),1)])),[[m,e.lang("report")]]),s("div",yy,[o.loading&&o.cardOpen?v((n(),l("button",vy,ky)),[[m,e.lang("refresh")]]):d("",!0),s("button",Cy,[s("i",{class:O([{"fas fa-angle-up":o.cardOpen,"fas fa-angle-down":!o.cardOpen},"fs-25"])},null,2)])])]),o.cardOpen?(n(),l("div",Dy,[s("div",My,[u(g,{label:e.lang("select_date_range"),place:e.lang("select_date_range"),value:o.date,type:"date",name:"date",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","place","value","onChange","after"])]),s("div",Sy,[o.loading?d("",!0):(n(),l("div",Iy,Ay)),Oy])])):d("",!0)])])}const Py=T(py,[["render",Ly],["__scopeId","data-v-7c2b2a27"]]),Uy={name:"DetachModal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,required:!0},detachParams:{type:Object,required:!0},detachUrl:{type:String,required:!0},detachType:{type:String,default:"task_ticket"},eventToFireAfterSuccess:{type:String,default:"updateTaskAssociates"},detachIconClass:{type:String,default:"fa fa-unlink"},detachAction:{type:String,default:"detach"}},data(){return{containerStyle:{width:"500px"},isDisabled:!1,loading:!1,category:""}},created(){this.category=this.$store.getters.getTaskAssociateCategory},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,S.delete(this.detachUrl,{params:this.detachParams}).then(e=>{V(e,this.alertComponentName),window.emitter.emit(this.eventToFireAfterSuccess),this.category==="associated_changes"?window.emitter.emit("TaskAssociatedChangerefreshData"):this.category==="associated_tickets"&&window.emitter.emit("TaskAssociatedTicketrefreshData"),this.onClose(),this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1,this.onClose(),L(e,this.alertComponentName)})}}},$y={class:"modal-title"},Fy={key:0},Vy={key:1,class:"row"},qy=["disabled"];function Ey(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",$y,r(e.trans(`${a.detachAction}_${a.detachType}`)),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",Fy,[s("span",null,r(e.trans(`task_${a.detachAction}_confirm`)),1)])),o.loading?(n(),l("div",Vy,[u(_,{"animation-duration":4e3,color:"#1d78ff",size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=m=>i.onSubmit()),class:"btn btn-danger",disabled:o.isDisabled},[s("i",{class:O(a.detachIconClass)},null,2),p("  "+r(e.trans(`${a.detachAction}_${a.detachType}`)),1)],8,qy)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Ry=T(Uy,[["render",Ey]]),zy={name:"OrgDetachModal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},categoryId:{type:Number,required:!0},orgId:{type:Number,required:!0}},data(){return{containerStyle:{width:"500px"},isDisabled:!1,loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,S.delete("/form-category/detach-org/"+this.categoryId+"/"+this.orgId).then(e=>{V(e,"org-view"),window.emitter.emit("hideOrganizationForms"),this.onClose(),this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1,this.onClose(),L(e,"org-view"),window.emitter.emit("hideOrganizationForms")})}}},By={class:"modal-title"},Ny={key:0},jy={key:1,class:"row"},Wy=["disabled"],Ky=s("i",{class:"fa fa-unlink"},null,-1);function Hy(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",By,r(e.trans("detach_organization_form")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("div",Ny,[s("span",null,r(e.trans("category_detach_confirmation_message")),1)])),o.loading?(n(),l("div",jy,[u(_,{"animation-duration":4e3,color:"#1d78ff",size:60})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=m=>i.onSubmit()),class:"btn btn-danger",disabled:o.isDisabled},[Ky,p("  "+r(e.trans("detach")),1)],8,Wy)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Yy=T(zy,[["render",Hy]]);const xy={name:"org-forms",description:"Organization Forms",props:{id:{type:String,required:!0}},computed:{...at(["formattedTime","formattedDate"])},created(){window.emitter.on("hideOrganizationForms",()=>{this.showCardBody=!1})},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),type:this.trans("type"),updated_at:this.trans("updated_at"),action:this.trans("action")},columnsClasses:{name:"form-name",type:"form-type",updated_at:"form-updated_at"},texts:{filter:"",limit:""},templates:{name(t,a){return a.name},type(t,a){return a.type},updated_at(t,a){return e.formattedTime(a.updated_at)},action(t,a){let c=e.h("i",{class:"fa fa-unlink"});const i={class:"btn btn-primary",title:a.id===1?this.trans("default_field_is_not_detachable"):this.trans("detach"),onClick:()=>{a.id!==1&&e.onDetach(a.id)}};return a.id===1&&(i.style="cursor: not-allowed; background-color:grey"),e.h("a",i,[c])}},sortable:[],pagination:{chunk:5,nav:"scroll"},requestAdapter(){return{paginate:1}},responseAdapter({data:t}){return{data:t.data.data,count:t.data.data.length}}}},data(){return{showCardBody:!1,detachUrl:"",detachParams:{},showDetachModal:!1,categoryId:0,options:{},apiUrl:"/api/dependency/form-categories?organization="+this.id,columns:["name","type","updated_at","action"]}},methods:{onDetach(e){this.categoryId=e,this.showDetachModal=!0},onClose(){this.showDetachModal=!1}},components:{OrgDetachModal:Yy,DetachModal:Ry}},Jy={id:"org-forms",class:"card card-light"},Gy={class:"card-title"},Qy={class:"card-tools"},Zy={type:"button",class:"btn btn-tool"},Xy={key:0,class:"card-body"},ev={class:"tab-content"},tv={class:"active tab-pane"};function sv(e,t,a,c,o,i){const _=h("data-table"),g=h("OrgDetachModal");return n(),l("div",Jy,[s("div",{class:"card-header pointer",onClick:t[0]||(t[0]=m=>o.showCardBody=!o.showCardBody)},[s("h3",Gy,r(e.lang("list_of_form_categories")),1),s("div",Qy,[s("button",Zy,[s("i",{class:O([{"fas fa-angle-up":o.showCardBody,"fas fa-angle-down":!o.showCardBody},"fs-25"])},null,2)])])]),o.showCardBody?(n(),l("div",Xy,[s("div",ev,[s("div",tv,[u(_,{url:o.apiUrl,dataColumns:o.columns,option:o.options},null,8,["url","dataColumns","option"])])])])):d("",!0),s("div",null,[u(R,{name:"modal"},{default:y(()=>[u(g,{showModal:o.showDetachModal,"org-id":a.id,"category-id":o.categoryId,onClose:i.onClose},null,8,["showModal","org-id","category-id","onClose"])]),_:1})])])}const av=T(xy,[["render",sv],["__scopeId","data-v-865514a3"]]);const ov={name:"org-view",description:"Organization view page",props:{authInfo:{type:Object,default:()=>{}}},data(){return{orgId:"",org_id:"",orgData:"",orgManagers:[],location:"",loading:!0,counter:0}},created(){window.emitter.on("refreshOrgData",this.refreshOrgDetails)},beforeMount(){const e=window.location.pathname;let t=e.split("/");this.location=t[t.length-2],this.orgId=ie(e),this.getInitialValues(this.orgId)},methods:{refreshOrgDetails(e=""){e?setTimeout(()=>{this.loading=!0,this.getInitialValues(this.orgId)},2e3):this.getInitialValues(this.orgId,!0)},getInitialValues(e,t){S.get("/api/organization/view/"+e+"?date="+Date.now()).then(a=>{this.orgData=a.data.data.organization,this.orgManagers=a.data.data.manager,t&&(this.counter+=1),this.loading=!1}).catch(a=>{this.loading=!1,L(a,"org-view"),this.redirect("/panel/dashboard")})},orgPageVisible(){window.emitter.emit("org-page-mounted",{org_id:this.orgId,from:"org",disableLoader:"true"})},orgPageMounted(){window.emitter.emit("org-page-mounted",{org_id:this.orgId,from:"org",disableLoader:"true"})}},components:{OrgForms:av,"org-details":uf,"org-managers":Of,"org-members":Xf,"org-departments":Eb,"org-tickets":my,"org-report":Py}},nv={class:"col-sm-12"},iv={class:"row"},lv={class:"col-md-12"},rv={key:0,class:"row"},dv={class:"col-md-8"},cv={id:"org-page-div"},hv={id:"org-page-table"},uv={key:1,class:"row"};function _v(e,t,a,c,o,i){const _=h("alert"),g=h("org-details"),m=h("org-managers"),f=h("org-members"),w=h("org-tickets"),D=h("org-departments"),A=h("org-forms"),k=h("org-report"),b=h("reuse-loader");return n(),l("div",nv,[s("div",iv,[s("div",lv,[u(_,{componentName:"org-view"})])]),!o.loading&&o.orgData?(n(),l("div",rv,[(n(),l("div",{class:"col-md-4",key:o.counter},[u(g,{orgData:o.orgData,managerList:o.orgManagers},null,8,["orgData","managerList"]),o.orgManagers.length>0?(n(!0),l(M,{key:0},P(o.orgManagers,F=>(n(),C(m,{key:F.id,manager:F},null,8,["manager"]))),128)):d("",!0)])),s("div",dv,[o.orgId?(n(),C(f,{key:0,id:o.orgId,name:o.orgData.name,disableLoader:"true",orgData:o.orgData},null,8,["id","name","orgData"])):d("",!0),o.orgId?(n(),C(w,{key:1,id:o.orgId,disableLoader:"true",name:o.orgData.name},null,8,["id","name"])):d("",!0),o.orgData.OrganizationDepartmentStatus?(n(),C(D,{key:2,disableLoader:"true",id:o.orgId},null,8,["id"])):d("",!0),o.orgData.loggedInUserRole==="admin"?(n(),C(A,{key:3,id:o.orgId},null,8,["id"])):d("",!0),s("div",cv,r(i.orgPageMounted()),1),s("div",hv,r(i.orgPageVisible()),1),o.orgId?(n(),C(k,{key:4,id:o.orgId,name:o.orgData.name},null,8,["id","name"])):d("",!0)])])):(n(),l("div",uv,[u(b,{"animation-duration":4e3,size:60})]))])}const mv=T(ov,[["render",_v],["__scopeId","data-v-4882d256"]]);const pv={name:"canned-list",description:"Canned response list",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},props:{auth:{type:Object,default:()=>{}}},data(){return{columns:["title","created_by","created_at","updated_by","updated_at","action"],options:{},apiUrl:"api/canned/list",componentName:"canned-response-index"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{title:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),created_by:this.trans("created_by"),updated_by:this.trans("updated_by"),action:this.trans("action")},columnsClasses:{title:"canned-name",created_by:"canned-author",created_at:"canned-created",updated_by:"canned-update",updated_at:"canned-updated",action:"canned-action"},texts:{filter:"",limit:""},templates:{created_by:function(t,a){return a.created_by?e.h(ce,{to:"/user/"+a.user_id},a.created_by):"--"},updated_by:function(t,a){return a.updated_by?e.h(ce,{to:"/user/"+a.updated_by_id},a.updated_by):"--"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},created_at:function(t,a){return e.formattedTime(a.created_at)},action:(t,a)=>e.auth.user_data.role==="admin"||e.auth.user_data.id===a.user_id?e.h(oe,{data:a,componentTitle:this.componentName}):e.h(oe,{data:a,isAuthorAdminEditOrDeleteEnabled:!0,componentTitle:this.componentName})},sortable:["title","created_by","updated_by","created_at","updated_at"],filterable:["title","created_by","updated_by","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"updated_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.from="agent",a.canned_edit_url="/canned/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/canned/delete/"+a.id,e.auth.user_data.id!==a.user_id&&(a.is_not_deletable=!0,a.delete_tip="you_cant_delete"),a)),count:t.data.total}}}}},gv={id:"canned_response",class:"col-sm-12"},fv={class:"card card-light"},bv={class:"card-header"},yv={class:"card-title"},vv={class:"card-tools"},wv=s("i",{class:"glyphicon glyphicon-plus"},null,-1),kv={class:"card-body",id:"my_canned"};function Cv(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=U("tooltip");return n(),l("div",gv,[u(_,{componentName:"dataTableModal"}),s("div",fv,[s("div",bv,[s("h3",yv,r(e.lang("canned_response")),1),s("div",vv,[v((n(),C(g,{to:"/canned/create",class:"btn-tool"},{default:y(()=>[wv]),_:1})),[[f,e.lang("create_canned_response")]])])]),s("div",kv,[u(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,componentTitle:o.componentName,scroll_to:"canned_response"},null,8,["url","dataColumns","option","componentTitle"])])])])}const Dv=T(pv,[["render",Cv]]);function Mv(e){const{title:t,departments:a,share:c}=e;let o={title:[t,"isRequired"]};e.share&&(o.departments=[e.departments,"isRequired"]);const i=new K(j),{errors:_,isValid:g}=i.validate(o);return H.dispatch("setValidationError",_),{errors:_,isValid:g}}const Sv={name:"canned-page",description:"Canned create and edit page",data:()=>({title:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!1,message:"",classname:"form-group",show_err:!1,page_title:"create_canned_response",iconClass:"fas fa-save",btnName:"save",canned_id:"",share:!1,departments:[],attachments:[],inline:[],shortCodesLoader:!1,shortcodes:[]}),beforeMount(){const e=window.location.pathname;this.getValues(e),this.getShortCodes()},methods:{getShortCodes(){this.shortCodesLoader=!0,S.get("/api/getTicketSetting/pdfShortCodes?forCannedResponse=1").then(e=>{this.shortCodesLoader=!1,this.shortcodes=e.data.data}).catch(e=>{this.shortCodesLoader=!1,L(e,"canned-create-edit")})},getAttachments(e){this.attachments=e},getInlineImages(e){this.inline=e},getValues(e){const t=ie(e);e.indexOf("edit")>=0?(this.page_title="edit_canned_response",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,S.get("/api/canned/edit/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.canned_id=e,this.updateStatesWithData(t.data.data)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!1,L(t,"canned-create-edit"),setTimeout(()=>this.$router.push({name:"Canned Response Index"}),2e3)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(c=>{a.hasOwnProperty(c)&&(t[c]=e[c])})},isValid(){const{errors:e,isValid:t}=Mv(this.$data);return!!t},onSubmit(){if(this.classname=this.message===""?"form-group has-error":"form-group",this.show_err=this.message==="",this.isValid()&&this.message!==""){this.loadingSpeed=8e3,this.loading=!0;const a={};this.canned_id!=""&&(a.canned_id=this.canned_id),a.title=this.title,a.message=this.message,a.attachment=this.attachments,a.inline=this.inline;var e=[];for(var t in this.departments)e.push(this.departments[t].id);a["d_id[]"]=e,a.share=this.share,S.post("/api/agent/canned-response",a).then(c=>{this.loading=!1,V(c,"canned-create-edit"),this.canned_id===""?setTimeout(()=>this.$router.push({name:"Canned Response Index"}),3e3):this.getInitialValues(this.canned_id)}).catch(c=>{this.loading=!1,L(c,"canned-create-edit")})}},onChange(e,t){this[t]=e}},components:{"text-field":te,"dynamic-select":Q,"add-media":je}},wt=e=>(q("data-v-e633a1af"),e=e(),E(),e),Iv={class:"col-sm-12"},Tv={key:0,class:"row"},Av={key:1,class:"card card-light"},Ov={class:"card-header"},Lv={class:"card-title"},Pv={class:"card-body"},Uv={class:"row"},$v={class:"col-md-12"},Fv={class:"card card-light"},Vv={class:"card-header"},qv={class:"card-title"},Ev={class:"card-body col-md-12"},Rv={key:0,class:"row"},zv={key:1},Bv={class:"alert alert-info alert-dismissable"},Nv=wt(()=>s("i",{class:"fas fa-info-circle"},null,-1)),jv=wt(()=>s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),Wv={key:0,class:"list-inline"},Kv={class:"list-inline-item",style:{width:"23%"}},Hv={"data-placement":"right"},Yv={class:"row"},xv={class:"row"},Jv={class:"row"},Gv={class:"col-sm-12"},Qv={class:"label_align",name:"share"},Zv={class:"card-footer"},Xv=["disabled"];function e1(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("reuse-loader"),f=h("text-field"),w=h("add-media"),D=h("dynamic-select"),A=U("tooltip"),k=U("focus-first-input");return n(),l("div",Iv,[e.hasDataPopulated===!1||e.loading===!0?(n(),l("div",Tv,[u(_,{duration:e.loadingSpeed},null,8,["duration"])])):d("",!0),u(g,{componentName:"canned-create-edit"}),e.hasDataPopulated===!0?(n(),l("div",Av,[s("div",Ov,[s("h3",Lv,r(e.lang(e.page_title)),1)]),s("div",Pv,[s("div",Uv,[s("div",$v,[s("div",Fv,[s("div",Vv,[s("h3",qv,r(e.trans("list-of-available-shot-codes")),1)]),s("div",Ev,[e.shortCodesLoader?(n(),l("div",Rv,[u(m,{"animation-duration":4e3,size:60})])):(n(),l("div",zv,[s("div",Bv,[Nv,p("  "),s("span",null,r(e.trans("template-short-code-tips")),1),jv]),e.shortcodes.length?(n(),l("ul",Wv,[(n(!0),l(M,null,P(e.shortcodes,b=>(n(),l("li",Kv,[v((n(),l("span",Hv,[p(r(b.shortcode),1)])),[[A,e.trans(b.desc_lang_key),void 0,{right:!0}]])]))),256))])):d("",!0)]))])])])]),v((n(),l("div",Yv,[u(f,{label:e.lang("title"),value:e.title,type:"text",name:"title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[k]]),s("div",xv,[u(w,{attachments:e.attachments,inlineFile:e.inline,description:e.message,classname:e.classname,name:"message",show_error:e.show_err,onAttach:i.getAttachments,onInline:i.getInlineImages,onInput:i.onChange,page_name:"canned",chunkApi:"/chunk/upload/public",filesApi:"/media/files/public"},null,8,["attachments","inlineFile","description","classname","show_error","onAttach","onInline","onInput"])]),s("div",Jv,[s("div",Gv,[s("label",Qv,[v(s("input",{class:"checkbox_align",type:"checkbox",name:"share",id:"share","onUpdate:modelValue":t[0]||(t[0]=b=>e.share=b)},null,512),[[st,e.share]]),p("  "+r(e.lang("share-response-with-department")),1)])]),e.share?(n(),C(D,{key:0,label:e.lang("departments"),multiple:!0,name:"departments",required:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:e.departments,onChange:i.onChange},null,8,["label","value","onChange"])):d("",!0)])]),s("div",Zv,[s("button",{type:"button",onClick:t[1]||(t[1]=b=>i.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[s("span",{class:O(e.iconClass)},null,2),p(" "+r(e.lang(e.btnName)),1)],8,Xv)])])):d("",!0)])}const xe=T(Sv,[["render",e1],["__scopeId","data-v-e633a1af"]]),t1={name:"kb-delete-modal",description:"Kb delete modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},apiUrl:{type:String,default:""},alert:{type:String,default:""},redirectUrl:{type:String,default:""},updateKb:{type:Function,default:()=>{}}},data(){return{isDisabled:!1,loading:!1,containerStyle:{width:"500px"}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,S.delete(this.apiUrl).then(e=>{this.updateKb(),this.loading=!1,this.isDisabled=!0,V(e,this.alert),window.emitter.emit("updateCommentsList"),this.onClose(),this.redirectUrl&&setTimeout(()=>this.$router.push({path:this.redirectUrl}),3e3)}).catch(e=>{this.loading=!1,this.onClose(),L(e,this.alert)})}}},s1={class:"modal-title"},a1={key:0},o1={key:1,class:"row"},n1=["disabled"],i1=s("i",{class:"fas fa-trash"},null,-1);function l1(e,t,a,c,o,i){const _=h("reuse-loader"),g=h("modal");return a.showModal?(n(),C(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:y(()=>[s("h4",s1,r(e.lang("delete")),1)]),fields:y(()=>[o.loading?d("",!0):(n(),l("span",a1,r(e.lang("are_you_sure_you_want_to_delete")),1)),o.loading?(n(),l("div",o1,[u(_,{duration:4e3})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...m)=>i.onSubmit&&i.onSubmit(...m)),class:"btn btn-danger",disabled:o.isDisabled},[i1,p(" "+r(e.lang("delete")),1)],8,n1)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Ce=T(t1,[["render",l1]]);const r1={setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),timeFormat:B(()=>e.getters.timeFormat)}},props:{article:{type:Object,default:()=>{}},status:{type:[String,Number,Boolean],default:1},updateKb:{type:Function,default:()=>{}}},data(){return{slug:"",showModal:!1,isRtl:!1}},created(){this.$store.dispatch("commentFilterData",{}),this.isRtl=ae(sessionStorage.getItem("is_rtl"))},methods:{publishDate(e){if(e){let t=new Date(e).toISOString();return G(t).format(this.timeFormat)}},subString(e,t=10){return X(e,t)},viewArticle(e){this.$store.dispatch("setArticleId",e)},deleteMethod(e){this.slug=e,this.showModal=!0},onClose(){this.showModal=!1},convert(e){if(e)return e.length>250?e.replace(/(<\/?(?:a|p|blockquote)[^>]*>)|<[^>]+>/ig,"").substring(0,250)+"....":e.replace(/(<\/?(?:a|p|blockquote)[^>]*>)|<[^>]+>/ig,"")},allComments(e,t){const a={to:"all",id:e,name:t};this.$store.dispatch("commentFilterData",a),this.$router.push({path:"/article/comment",name:"KB Article Comments",params:{from:a}})},pendingComments(e,t){const a={to:"unapprove",id:e,name:t};this.$store.dispatch("commentFilterData",a),this.$router.push({path:"/article/comment",name:"KB Article Comments",params:{from:a}})}},components:{"delete-modal":Ce}},Z=e=>(q("data-v-83473f31"),e=e(),E(),e),d1={class:"article-index-box"},c1={class:"timeline mt-20"},h1={id:"article_div"},u1={class:"timeline-item",id:"article_item"},_1={class:"time"},m1=Z(()=>s("i",{class:"far fa-clock"},null,-1)),p1={class:"timeline-header"},g1=["href"],f1={class:"fas fa-question-circle cursor text-primary"},b1={class:"p-3"},y1=Z(()=>s("i",{class:"fas fa-user mr-1 mb-2"},null,-1)),v1={class:"text-muted"},w1=Z(()=>s("hr",null,null,-1)),k1=Z(()=>s("i",{class:"fas fa-newspaper mr-1 mb-2"},null,-1)),C1={class:"text-muted"},D1=Z(()=>s("i",{class:"far fa-circle"},null,-1)),M1=Z(()=>s("hr",null,null,-1)),S1=Z(()=>s("i",{class:"fas fa-tags mr-1 mb-2"},null,-1)),I1={class:"text-muted"},T1=Z(()=>s("i",{class:"far fa-circle"},null,-1)),A1=Z(()=>s("hr",null,null,-1)),O1=["innerHTML"],L1=["innerHTML"],P1={class:"timeline-footer bt-1"},U1=Z(()=>s("i",{class:"fas fa-edit"},null,-1)),$1=["href"],F1=Z(()=>s("i",{class:"fas fa-eye"},null,-1)),V1=Z(()=>s("i",{class:"fas fa-trash"},null,-1)),q1=Z(()=>s("i",{class:"far fa-comment-dots"},null,-1)),E1={class:"badge badge-danger article-badge"},R1=Z(()=>s("i",{class:"far fa-comments ml-1"},null,-1));function z1(e,t,a,c,o,i){const _=h("popover"),g=h("router-link"),m=h("delete-modal"),f=U("tooltip");return n(),l("div",d1,[s("div",c1,[s("div",h1,[s("div",u1,[s("span",_1,[m1,p(" "+r(i.publishDate(a.article.publish_time)),1)]),s("h3",p1,[v((n(),l("a",{href:e.basePath()+"/show/"+a.article.slug},[p(r(a.article.name),1)],8,g1)),[[f,a.article.name]]),u(_,{arrow:"",placement:"right"},{content:y(()=>[s("div",b1,[a.article.author?(n(),l(M,{key:0},[s("strong",null,[y1,p(" "+r(e.lang("author")),1)]),p("   "),v((n(),l("p",v1,[p(r(a.article.author.full_name?a.article.author.full_name:a.article.author.user_name),1)])),[[f,a.article.author.full_name?a.article.author.full_name:a.article.author.user_name]]),w1],64)):d("",!0),a.article.categories.length>0?(n(),l(M,{key:1},[s("strong",null,[k1,p(" "+r(e.lang("categories")),1)]),p("   "),(n(!0),l(M,null,P(a.article.categories.slice(0,20),(w,D)=>v((n(),l("p",C1,[D1,p(" "+r(i.subString(w.name,25)),1)])),[[f,w.name]])),256)),M1],64)):d("",!0),a.article.tags.length>0?(n(),l(M,{key:2},[s("strong",null,[S1,p(" "+r(e.lang("tags")),1)]),p("   "),(n(!0),l(M,null,P(a.article.tags.slice(0,20),(w,D)=>v((n(),l("p",I1,[T1,p(" "+r(w.name),1)])),[[f,w.name]])),256)),A1],64)):d("",!0)])]),default:y(()=>[p("   "),v(s("i",f1,null,512),[[f,e.lang("click_to_see_details")]])]),_:1})]),a.article.summary?(n(),l("div",{key:0,class:"timeline-body",innerHTML:a.article.summary},null,8,O1)):(n(),l("div",{key:1,class:"timeline-body",innerHTML:i.convert(a.article.description)},null,8,L1)),s("div",P1,[v((n(),C(g,{to:"/article/"+a.article.id+"/edit",class:"btn btn-xs btn-default text-dark"},{default:y(()=>[U1,p(" "+r(e.lang("edit")),1)]),_:1},8,["to"])),[[f,e.lang("edit")]]),a.status?v((n(),l("a",{key:0,target:"_blank",href:e.basePath()+"/show/"+a.article.slug,class:"btn btn-xs btn-default text-dark",onClick:t[0]||(t[0]=w=>i.viewArticle(a.article.id))},[F1,p(" "+r(e.lang("view")),1)],8,$1)),[[f,e.lang("view")]]):d("",!0),v((n(),l("a",{href:"javascript:;",class:"btn btn-xs btn-default text-dark",onClick:t[1]||(t[1]=w=>i.deleteMethod(a.article.slug))},[V1,p(" "+r(e.lang("delete")),1)])),[[f,e.lang("delete")]]),s("span",{style:N({float:o.isRtl?"left":"right"})},[v((n(),l("a",{href:"javascript:;",onClick:t[2]||(t[2]=w=>i.pendingComments(a.article.id,a.article.name))},[q1,s("span",E1,r(a.article.pending_comments_count>9?"9+":a.article.pending_comments_count),1)])),[[f,e.lang("pending_comments")]]),p("   "),v((n(),l("a",{href:"javascript:;",class:O({"rtl-padding":o.isRtl,"ltr-padding":!o.isRtl&&a.article.pending_comments_count>9}),onClick:t[3]||(t[3]=w=>i.allComments(a.article.id,a.article.name))},[R1,p(" ("+r(a.article.all_comments_count)+") "+r(e.lang("comments")),1)],2)),[[f,e.lang("total_comments")]])],4)])])])]),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(m,{key:0,onClose:i.onClose,showModal:o.showModal,alert:"ArticlesIndex",apiUrl:"/article/delete/"+o.slug,updateKb:a.updateKb},null,8,["onClose","showModal","apiUrl","updateKb"])):d("",!0)]),_:1})])}const B1=T(r1,[["render",z1],["__scopeId","data-v-83473f31"]]);const N1={props:["name1","value1","name2","value2"],data(){return{sortingMenu:[{name:this.name1,value:this.value1,class:"fas fa-sort"},{name:this.name2,value:this.value2,class:"fas fa-sort"}]}},created(){this.name2==null&&(this.sortingMenu=[{name:this.name1,value:this.value1,class:"fas fa-sort"}])},methods:{sort(e,t){this.$emit("sort",e)}}},j1={class:"btn-group",style:{display:"inline-block","margin-left":"10px"}},W1={class:"btn btn-default dropdown-toggle sortval",type:"button","data-toggle":"dropdown",style:{"background-color":"#fff"}},K1={class:"dropdown-menu dropdown-menu-right",style:{"z-index":"9999"}},H1={class:"dropdown-header"},Y1=["onClick"];function x1(e,t,a,c,o,i){return n(),l("div",j1,[s("button",W1,r(e.lang("sort-by")),1),s("div",K1,[s("span",H1,r(e.lang("sorting_menu")),1),(n(!0),l(M,null,P(o.sortingMenu,(_,g)=>(n(),l("a",{class:"dropdown-item",onClick:m=>i.sort(_,g),href:"javascript:;",id:"sort"},[s("i",{class:O(_.class)},null,2),p(" "+r(e.lang("sort-by"))+" "+r(e.lang(_.name)),1)],8,Y1))),256))])])}const kt=T(N1,[["render",x1],["__scopeId","data-v-59a73d14"]]),J1={props:["ticketper"],data(){return{ticketPer:this.ticketper}},methods:{ticketCount(e){this.$emit("message",e)}}},G1={style:{display:"inline-block"}},Q1=s("option",{value:"10"},"10",-1),Z1=s("option",{value:"25"},"25",-1),X1=s("option",{value:"50"},"50",-1),ew=s("option",{value:"100"},"100",-1),tw=[Q1,Z1,X1,ew];function sw(e,t,a,c,o,i){return n(),l("div",G1,[v(s("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=_=>o.ticketPer=_),onChange:t[1]||(t[1]=_=>i.ticketCount(o.ticketPer))},tw,544),[[tt,o.ticketPer]])])}const Ct=T(J1,[["render",sw]]);const aw={data(){return{articleList:"",paramsObj:{},length:0,perpage:10,pagination:1,records:0,loading:!0,pageLoader:!1,search:"",status:1,show:!1,filterOptions:[{section:[{name:"categories",url:"/api/dependency/categories",label:"categories"},{name:"tags",url:"/api/dependency/tags",label:"tags"},{name:"visible_to",type:"static-select",label:"visible_to",elements:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"LoggedIn Users"},{id:"agents",name:"Agents"},{id:"organization_members",name:"Organization Members"}]}]},{section:[{name:"type",type:"static-select",label:"type",elements:[{name:"Published",id:1},{name:"Draft",id:0}]},{name:"author_ids",url:"/api/dependency/agents",label:"author"},{name:"organization_ids",url:"/api/dependency/organizations",label:"organizations"}]},{section:[{name:"created_at",type:"date",label:["created_at","created_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0},{name:"published_at",type:"date",label:["published_at","published_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0}]}],isShowFilter:!1,appliedFilters:{},filterParams:{},isRtl:!1}},beforeMount(){this.commonApi(),this.getKbStatus(),this.filterData()},created(){window.emitter.on("updateFilter",this.updateFilter),this.isRtl=ae(sessionStorage.getItem("is_rtl"))},computed:{searchFilter:{get(){return this.search},set(e){this.search=e,this.pageLoader=!0,this.paramsObj["search-query"]=e,this.commonApi(this.paramsObj)}}},methods:{updateFilter(e){this.filterOptions.map(function(t){t.section.map(function(a){e.name==a.name&&(a.value=e.value)})})},updateFilterMeta(e){this.filterOptions.map(function(t){t.section.map(function(a){a.value=e[a.name]?e[a.name]:""})})},filterData(){this.filterOptions.map(function(e){e.section.map(function(t){t.elements=t.type==="static-select"?t.elements:[],t.isMultiple=t.type!=="static-select",t.isPrepopulate=!1,t.value="",t.className="col-sm-4"})})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.pageLoader=!0,this.commonApi(),this.filterOptions=this.filterOptions.map(function(e){return e.section.map(function(t){t.elements=t.type==="static-select"?t.elements:[],t.isMultiple=t.type!=="static-select",t.isPrepopulate=!1,t.value="",t.className="col-sm-4"}),e})},applyFilter(e){this.updateFilterMeta(e),this.pageLoader=!0,this.appliedFilters=e;let t=is(this.filterOptions,e);t[t.length-1]==="&"&&(t=t.slice(0,-1)),t=t.split("&").reduce(function(a,c,o){let i=c.split("=");return i[0]&&i[1]&&(a[i[0].replace(/\s+/g,"")]=i[1].trim()),a},{}),this.filterParams=t,this.commonApi(t,"filter"),this.isShowFilter=!1},toggleFilterView(){this.isShowFilter=!this.isShowFilter},updateKbList(){this.loading=!0,this.paramsObj.page=this.pagination,this.commonApi(this.paramsObj)},getKbStatus(){S.get("kb/settings/getvalue").then(({data:e})=>{this.status=e.data.kbsettings.status}).catch(e=>{this.status=0})},commonApi(e,t=""){var a=t==="filter"?{...this.paramsObj,...e}:{...this.filterParams,...e};S.get("/get-articles",{params:a}).then(c=>{this.loading=!1,this.pageLoader=!1,this.articleList=c.data.message.data,c.data.message.total==0&&(this.show=!0),this.records=c.data.message.total,this.perpage=c.data.message.per_page,this.length=c.data.message.total}).catch(c=>{this.loading=!1,this.pageLoader=!1,L(c,"ArticlesIndex")})},handlePageCount(e){this.pageLoader=!0,this.pagination=1,this.paramsObj.pagination=e,setTimeout(()=>{this.commonApi(this.paramsObj)},100)},sorting(e){this.pageLoader=!0,this.paramsObj["sort-by"]=e.value,this.commonApi(this.paramsObj)},refresh(){this.pagination=1},pageChanged(){this.pageLoader=!0;var e=document.getElementById("kb-articles");e.scrollIntoView({behavior:"smooth"}),this.paramsObj.page=this.pagination,this.commonApi(this.paramsObj)}},components:{"articles-box":B1,"kb-sorting":kt,"data-per-page":Ct,"kb-filter":ds}},Dt=e=>(q("data-v-8ecf1243"),e=e(),E(),e),ow={class:"col-sm-12"},nw={class:"card card-light"},iw={class:"card-header"},lw={class:"card-title"},rw={class:"card-tools"},dw=Dt(()=>s("span",{class:"glyphicon glyphicon-filter"},null,-1)),cw=[dw],hw=Dt(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1)),uw={class:"card-body",id:"kb-articles"},_w={key:1,class:"row"},mw={class:"col-md-4"},pw={class:"col-md-8"},gw={style:{"line-height":"2"}},fw=["placeholder"],bw={key:2,class:"mt-2"},yw={key:0,class:"float-right"},vw={key:1},ww={style:{"text-align":"center"}},kw={key:3,class:"row"},Cw={key:4,class:"row"};function Dw(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("kb-filter"),f=h("data-per-page"),w=h("kb-sorting"),D=h("articles-box"),A=h("uib-pagination"),k=h("reuse-loader"),b=h("custom-loader"),F=U("tooltip");return n(),l("div",ow,[u(_,{componentName:"ArticlesIndex"}),s("div",nw,[s("div",iw,[s("h3",lw,r(e.lang("list_of_articles")),1),s("div",rw,[v((n(),l("a",{class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...z)=>i.toggleFilterView&&i.toggleFilterView(...z))},cw)),[[F,e.lang("filter")]]),v((n(),C(g,{to:"/article/create",class:"btn-tool"},{default:y(()=>[hw]),_:1})),[[F,e.lang("create_article")]])])]),s("div",uw,[o.isShowFilter?(n(),C(m,{key:0,id:"kb-filter-box",metaData:o.filterOptions,appliedFilters:o.appliedFilters,onSelectedFilters:i.selectedFilters},null,8,["metaData","appliedFilters","onSelectedFilters"])):d("",!0),o.loading?d("",!0):(n(),l("div",_w,[s("div",mw,[o.records>0?(n(),l(M,{key:0},[u(f,{ticketper:o.perpage,onMessage:i.handlePageCount},null,8,["ticketper","onMessage"]),u(w,{name1:"Published time",value1:"publish_time",name2:"Article name",value2:"name",onSort:i.sorting},null,8,["onSort"])],64)):d("",!0)]),s("div",pw,[s("div",{style:N({float:o.isRtl?"left":"right"})},[s("span",gw,r(e.lang("search"))+": ",1),v(s("input",{id:"search",type:"text",class:"form-control search-field","onUpdate:modelValue":t[1]||(t[1]=z=>i.searchFilter=z),placeholder:e.lang("search_here"),onKeyup:t[2]||(t[2]=(...z)=>i.refresh&&i.refresh(...z))},null,40,fw),[[de,i.searchFilter]])],4)])])),o.loading?d("",!0):(n(),l("div",bw,[o.records>0?(n(),l(M,{key:0},[(n(!0),l(M,null,P(o.articleList,z=>(n(),C(D,{key:z.id,article:z,status:o.status,updateKb:i.updateKbList},null,8,["article","status","updateKb"]))),128)),o.records>10?(n(),l("div",yw,[u(A,{records:o.records,modelValue:o.pagination,"onUpdate:modelValue":t[3]||(t[3]=z=>o.pagination=z),class:"pagination","boundary-links":!0,"per-page":o.perpage,onPaginate:t[4]||(t[4]=z=>i.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])])):d("",!0)],64)):d("",!0),o.show&&o.records==0?(n(),l("div",vw,[s("p",ww,r(e.lang("no-data-to-show")),1)])):d("",!0)])),o.loading?(n(),l("div",kw,[u(k)])):d("",!0),o.pageLoader?(n(),l("div",Cw,[u(b)])):d("",!0)])])])}const Mw=T(aw,[["render",Dw],["__scopeId","data-v-8ecf1243"]]);function Sw(e){const{name:t,category:a,author:c,visible_to:o,publish_time:i,slug:_,summary:g,organization_id:m}=e;let f={name:[t,"isRequired"],category:[a,"isRequired"],author:[c,"isRequired"],visible_to:[o,"isRequired"],publish_time:[i,"isRequired"],slug:[_,"isRequired"],summary:[g,"isRequired"]};e.visible_to==="organization_members"&&(f.organization_id=[e.organization_id,"isRequired"]);const w=new K(j),{errors:D,isValid:A}=w.validate(f);return H.dispatch("setValidationError",D),{errors:D,isValid:A}}const Iw={components:{Treeselect:Rt,"form-field-template":ls},props:{label:{type:String,required:!0},name:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},classname:{type:String,default:""},onChange:{type:Function,Required:!0},hint:{type:String,default:""},required:{type:Boolean,default:!1},id:{type:[String,Number],default:"static-select"},labelStyle:{type:Object,default:function(){return{}}},strlength:{type:[String,Number],default:3},disabled:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,default:!0},apiEndpoint:{type:String,default:null},apiParameters:{type:[Object,Map],default:()=>{}},placeholder:{type:String,default:"Search or Select"},valueFormat:{type:String,default:"object"},placeHolder:{type:String,default:"Search or Select"},elements:{type:Array,default(){return[]}}},data(){return{selectedValue:this.value,treeselectOptions:[],isFetchingOptions:!1,observer:null,nextPageUrl:"",searchQuery:void 0,isLoading:!1,listElements:[],page:0,searching:!1}},computed:{hasNextPage(){return!!(this.nextPageUrl!==null&&this.apiEndpoint)}},watch:{apiEndpoint(e,t){ae(e)&&this.flushAndRestart()},apiParameters(e,t){ae(e)&&this.flushAndRestart()},value(e){this.selectedValue=e||null}},beforeMount(){this.listElements=this.elements?this.elements:[]},mounted(){this.apiEndpoint&&this.flushAndRestart(),this.selectedValue=this.value?this.value:null},methods:{subString(e){return X(e,parseInt(this.strlength))},async connectObserver(){this.hasNextPage&&(await this.$nextTick(),this.observer.observe(this.$refs.treeSelectLoader))},disconnectObserver(){this.observer&&this.observer.disconnect()},flushAndRestart(e=""){this.disconnectObserver(),this.resetProperties(e),this.observer=new IntersectionObserver(this.infiniteScroll)},onSearch(e){this.searchQuery=e,this.page=1,this.searching=!0,this.search()},search:zt.debounce(function(){this.apiEndpoint?this.getListFromServer(!0):this.searching=!1},350),getListFromServer(e,t){ae(this.apiEndpoint)&&(this.isLoading=!0,S.get(this.apiEndpoint,{params:this.getApiParams()}).then(a=>{this.postApiResponseOperations(a.data.data,e,t)}).catch(a=>{this.nextPageUrl=null,L(a)}).finally(()=>{this.isLoading=!1,this.searching=!1}))},async postApiResponseOperations(e,t,a){try{if(this.nextPageUrl=e.next_page_url,t)this.listElements=e.data;else{if(a){var c=a.offsetParent;if(c)var o=a.offsetParent.scrollTop}this.listElements.push(...e.data),await this.$nextTick(),a&&c&&(c.scrollTop=o)}}catch(i){console.error(i)}},getApiParams(){let e=ae(this.apiParameters)?this.apiParameters:{};e instanceof Map&&(e=rs(e));let t=JSON.parse(JSON.stringify(e));return t["search-query"]=this.searchQuery,t.page=this.page||void 0,t.paginate=1,t},infiniteScroll([{isIntersecting:e,target:t}]){e&&(this.page+=1,this.getListFromServer(!1,t))},resetProperties(e=""){this.listElements=[],this.page=0,this.observer=null,this.nextPageUrl="",this.searchQuery=void 0,this.isLoading=!1,e!="update"&&(this.selectedValue=null)},normalizer(e){return{id:e.id,label:e.name,children:e.children&&e.children.length?e.children:0}}}},Tw=e=>(q("data-v-82775357"),e=e(),E(),e),Aw={key:0,class:"vue-treeselect__tip vue-treeselect__no-options-tip"},Ow=Tw(()=>s("div",{class:"vue-treeselect__icon-container"},[s("span",{class:"vue-treeselect__icon-warning"})],-1)),Lw={class:"vue-treeselect__tip-text vue-treeselect__no-options-tip-text"},Pw={key:1,ref:"treeSelectLoader",class:"loader-area"};function Uw(e,t,a,c,o,i){const _=h("loader"),g=h("treeselect"),m=h("form-field-template"),f=U("tooltip");return n(),C(m,{label:a.label,name:a.name,classname:a.classname,hint:a.hint,required:a.required,labelStyle:a.labelStyle},{default:y(()=>[u(g,{modelValue:o.selectedValue,"onUpdate:modelValue":[t[0]||(t[0]=w=>o.selectedValue=w),t[1]||(t[1]=w=>a.onChange(o.selectedValue,a.name))],value:o.selectedValue,name:a.name,options:o.listElements,"show-count":!0,multiple:a.multiple,onSearchChange:i.onSearch,normalizer:i.normalizer,"value-format":a.valueFormat,onOpen:i.connectObserver,onClose:i.disconnectObserver,"always-open":!1,"max-height":200,noOptionsText:"",noResultsText:"",placeholder:a.placeHolder,"search-nested":!0,flat:!0},{"option-label":y(({node:w})=>[v((n(),l("span",null,[p(r(i.subString(w.label)),1)])),[[f,w.label]])]),"after-list":y(w=>[!o.isLoading&&!o.listElements.length&&!o.searching?(n(),l("div",Aw,[Ow,s("span",Lw,r(e.lang("no_options_available")),1)])):d("",!0),i.hasNextPage||o.searching?(n(),l("div",Pw,[u(_,{duration:4e3,size:25})],512)):d("",!0)]),_:1},8,["modelValue","value","name","options","multiple","onSearchChange","normalizer","value-format","onOpen","onClose","placeholder"])]),_:1},8,["label","name","classname","hint","required","labelStyle"])}const Ve=T(Iw,[["render",Uw],["__scopeId","data-v-82775357"]]);function $w(e){const{description:t,name:a,display_order:c,slug:o}=e;let i={description:[t,"isRequired"],name:[a,"isRequired"],display_order:[c,"isRequired"],slug:[o,"isRequired"]};const _=new K(j),{errors:g,isValid:m}=_.validate(i);return H.dispatch("setValidationError",g),{errors:g,isValid:m}}function Fw(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(250)":j("tag_name_should_be_less_than_250_characters")}]};const c=new K(j),{errors:o,isValid:i}=c.validate(a);return H.dispatch("setValidationError",o),{errors:o,isValid:i}}const Vw={name:"article-modal",description:"Article modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},newCategory:{type:Function},newTag:{type:Function},title:{type:String},id:{type:[String,Number],default:""}},data:()=>({btnName:"save",iconClass:"fas fa-save",btnClass:"btn btn-primary",isDisabled:!1,description:"",loading:!1,size:60,color:"#1d78ff",apiUrl:"",lang_locale:"",radioOptions:[{name:"active",value:1}],status:1,name:"",display_order:"",modalStyle:{width:"850px"},parent_category:null,slug:"",link:"",buttonVisible:!1}),beforeMount(){this.iconClass=this.title==="delete"?"fas fa-trash":"fas fa-save",this.btnClass=this.title==="delete"?"btn btn-danger":"btn btn-primary",this.btnName=this.title==="delete"?"delete":"save",this.modalStyle.width=this.title==="delete"?"500px":"850px"},methods:{isValid(){const{errors:e,isValid:t}=$w(this.$data);return!!t},isTagValid(){const{errors:e,isValid:t}=Fw(this.$data);return!!t},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),c=a.replace(/_+/g,"");this.link=c.replace(/\s+/g,"-"),this.slug=e}},initialState(){this.loading=!1,this.isDisabled=!1,this.name="",this.description="",this.display_order=""},onSubmit(){switch(this.title){case"delete":this.deleteMethod();break;case"new_tag":this.createNewTag();break;case"new_category":this.createNewCategory();break}},deleteMethod(){this.loading=!0,this.isDisabled=!0,S.delete("/article/delete/"+this.id).then(e=>{this.afterSuccess(e),setTimeout(()=>this.$router.push({name:"KB Article"}),3e3)}).catch(e=>{this.afterFailure(e)})},createNewTag(){if(this.isTagValid()){this.loading=!0,this.isDisabled=!0;const e={};e.name=this.name,e.kb=1,S.post("/api/tag",e).then(t=>{this.getNewTag(this.name),this.afterSuccess(t)}).catch(t=>{this.afterFailure(t)})}},refreshSlug(e){this.link=e},createNewCategory(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,S.post("/api/category/create",{name:this.name,description:this.description,status:this.status,display_order:this.display_order,parent:this.parent_category?this.parent_category.id:"",slug:this.link}).then(e=>{this.getNewCategory(this.name),this.afterSuccess(e)}).catch(e=>{this.afterFailure(e)}))},afterSuccess(e){this.loading=!1,this.isDisabled=!0,V(e,"article-create"),this.initialState(),this.onClose()},afterFailure(e){this.loading=!1,this.isDisabled=!1,L(e)},getNewTag(e){S.get("/api/dependency/tags?search-query="+e).then(t=>{let a=Ye(t.data.data.tags,"name",e);this.newTag(a)})},getNewCategory(e){S.get("/api/dependency/categories?search-query="+e).then(t=>{let a=Ye(t.data.data.kb_category,"name",e);this.newCategory(a)})}},components:{"text-field":te,"number-field":be,"radio-button":ne,"tree-select":Ve,"perma-link":Ie}},qw={class:"modal-title"},Ew={class:"row"},Rw={class:"row"},zw={class:"row"},Bw={key:1,class:"row"},Nw={key:2},jw={key:3,class:"row"},Ww=["disabled"];function Kw(e,t,a,c,o,i){const _=h("alert"),g=h("text-field"),m=h("perma-link"),f=h("tree-select"),w=h("number-field"),D=h("radio-button"),A=h("custom-loader"),k=h("modal"),b=U("focus-first-input");return a.showModal?(n(),C(k,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.modalStyle},{title:y(()=>[s("h4",qw,r(e.lang(a.title)),1)]),alert:y(()=>[u(_)]),fields:y(()=>[a.title==="new_category"?(n(),l(M,{key:0},[v((n(),l("div",Ew,[u(g,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(m,{label:e.trans("perma_link"),value:e.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,from:"category",classname:"col-sm-6",required:!0,link:e.link,disabled:e.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[b]]),s("div",Rw,[u(f,{label:e.trans("parent"),multiple:!1,name:"parent_category",classname:"col-sm-6",apiEndpoint:"/api/dependency/categories",value:e.parent_category,onChange:i.onChange,placeHolder:e.trans("search_or_select"),required:!1,strlength:"45"},null,8,["label","value","onChange","placeHolder"]),u(w,{label:e.lang("display_order"),value:e.display_order,name:"display_order",classname:"col-sm-3",onChange:i.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),u(D,{options:e.radioOptions,label:e.lang("status"),name:"status",value:e.status,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),s("div",zw,[u(g,{label:e.lang("description"),value:e.description,type:"textarea",name:"description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])],64)):d("",!0),a.title==="new_tag"?v((n(),l("div",Bw,[u(g,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])),[[b]]):d("",!0),a.title==="delete"?(n(),l("div",Nw,[s("span",null,r(e.lang("are_you_sure_you_want_to_delete")),1)])):d("",!0),e.loading===!0?(n(),l("div",jw,[u(A,{duration:4e3})])):d("",!0)]),controls:y(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=F=>i.onSubmit()),class:O(e.btnClass),disabled:e.isDisabled},[s("i",{class:O(e.iconClass)},null,2),p(" "+r(e.lang(e.btnName)),1)],10,Ww)]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const Hw=T(Vw,[["render",Kw]]);const Yw={name:"template-modal",props:{showModal:{type:Boolean,required:!0},onClose:{type:Function,required:!0},modalTitle:{type:String,required:!0}},data:()=>({modalStyle:{width:"70vw"},previewBody:"<p>Select one template to see the preview!</p>",template:"",isLoading:!1}),methods:{onChange(e,t){this[t]=e,t==="template"&&(e?this.getAndUpdateTemplateBody(e.id):this.previewBody="<p>Select one template to see the preview!</p>")},getAndUpdateTemplateBody(e){this.isLoading=!0,S.get("/article/template/"+e).then(t=>{this.previewBody=t.data.data.description}).catch(t=>{this.previewBody=`<div class="alert alert-danger" role="alert">${t}</div>`}).finally(()=>{this.isLoading=!1})},templateOperation(e){this.template!==""&&window.emitter.emit("applyTemplate",{operation:e,data:this.previewBody})}},components:{"dynamic-select":Q}},Mt=e=>(q("data-v-3c1f3105"),e=e(),E(),e),xw={class:"modal-title"},Jw={class:"row"},Gw={class:"col-sm-9"},Qw={for:"preview-panel"},Zw={class:"panel",id:"preview-panel"},Xw={class:"panel-body body-max-height"},ek=["innerHTML"],tk=["disabled"],sk=Mt(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1)),ak=["disabled"],ok=Mt(()=>s("i",{class:"fas fa-exchange-alt"},null,-1));function nk(e,t,a,c,o,i){const _=h("alert"),g=h("dynamic-select"),m=h("custom-loader"),f=h("modal");return a.showModal?(n(),C(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.modalStyle},{alert:y(()=>[u(_,{componentName:"templateModal"})]),title:y(()=>[s("h4",xw,r(e.lang(a.modalTitle)),1)]),fields:y(()=>[s("div",Jw,[u(g,{label:e.lang("template"),multiple:!1,name:"template",classname:"col-sm-3",apiEndpoint:"/api/dependency/article-templates",value:e.template,onChange:i.onChange,placeholder:e.lang("search_or_select"),clearable:!!e.template,strlength:"30"},null,8,["label","value","onChange","placeholder","clearable"]),s("div",Gw,[e.isLoading?(n(),C(m,{key:0,duration:4e3})):d("",!0),s("label",Qw,r(e.lang("preview")),1),s("div",Zw,[s("div",Xw,[s("blockquote",{innerHTML:e.previewBody},null,8,ek)])])])])]),controls:y(()=>[s("div",null,[s("button",{class:"btn btn-primary",disabled:!e.template,onClick:t[0]||(t[0]=w=>i.templateOperation("append"))},[sk,p(" "+r(e.lang("append")),1)],8,tk),s("button",{class:"btn btn-primary",disabled:!e.template,onClick:t[1]||(t[1]=w=>i.templateOperation("overwrite"))},[ok,p(" "+r(e.lang("overwrite")),1)],8,ak)])]),_:1},8,["showModal","onClose","containerStyle"])):d("",!0)}const ik=T(Yw,[["render",nk],["__scopeId","data-v-3c1f3105"]]);const lk={name:"article-revisions",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate),customFormattedTime:B(()=>e.getters.customFormattedTime)}},props:{articleId:{type:[String,Number],default:""},from:{type:String,default:""},versionId:{type:[String,Number],default:""}},data(){return{revisionData:[],page:1,showLoader:!1,articleNum:this.articleId}},beforeMount(){this.getRevisions()},created(){window.emitter.on("updateRevisionsData",this.updateRevisions)},watch:{showLoader(e,t){return this.showLoader=e,e}},methods:{subString(e,t=30){return X(e,t)},goToRevision(e){this.$router.push({path:"/article/revision/"+this.articleId+"/"+e})},formatTime(e){const t=this.customFormattedTime(e,"YYYY-MM-DD HH:mm:ss"),a=G(new Date).format("YYYY-MM-DD HH:mm:ss"),c=G(a,"YYYY-MM-DD HH:mm:ss").diff(G(t,"YYYY-MM-DD HH:mm:ss")),o=Math.floor(c/(24*60*60*1e3)),i=c%(24*60*60*1e3),_=Math.floor(i/(60*60*1e3)),g=c%(60*60*1e3),m=Math.floor(g/(60*1e3)),f=c%(60*1e3),w=Math.floor(f/1e3);return o?o+" days ago":!o&&_?_+" hours ago":!o&&!_&&m?m+" minutes ago":w+" seconds ago"},updateRevisions(){this.showLoader=!0,this.revisionData=[],this.page=1,setTimeout(()=>{this.getRevisions(void 0,!0)},1e3)},getRevisions(e,t=!1){this.showLoader=!0,this.articleNum=this.articleId?this.articleId:ie(window.location.pathname),S.get("/api/article/get-version-data/"+this.articleNum,{params:{page:this.page}}).then(a=>{t?this.revisionData=a.data.message.data:this.revisionData.push(...a.data.message.data),e&&e.loaded(),a.data.message.data.length<10&&e&&e.complete(),this.page++}).catch(a=>{L(a,"article-create"),this.revisionData=[]}).finally(()=>{this.showLoader=!1})}}},De=e=>(q("data-v-6eda2f83"),e=e(),E(),e),rk={class:"card card-light"},dk={class:"card-header"},ck={class:"card-title"},hk={class:"card-tools"},uk={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},_k=De(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),mk=[_k],pk={key:0},gk={class:"todo-list"},fk=["onClick"],bk={class:"badge badge-secondary"},yk={key:0,class:"text"},vk={class:"float-right"},wk=De(()=>s("i",{class:"far fa-clock"},null,-1)),kk=["onClick"],Ck={class:"badge badge-secondary"},Dk={key:0,class:"text"},Mk=De(()=>s("i",{class:"far fa-clock"},null,-1)),Sk={class:"float-right"},Ik=De(()=>s("span",null,null,-1)),Tk=De(()=>s("span",null,null,-1)),Ak={key:1},Ok={class:"text-center"};function Lk(e,t,a,c,o,i){const _=h("infinite-loading"),g=U("tooltip");return n(),l("div",rk,[s("div",dk,[s("h3",ck,r(e.trans("versions")),1),s("div",hk,[o.showLoader?(n(),l("button",uk,mk)):d("",!0)])]),s("div",{class:O(["card-body",a.from=="revision"?"scrollable-rev":"scrollable-revisions"]),id:"revision_scroll"},[o.revisionData.length>0?(n(),l("div",pk,[s("ul",gk,[(n(!0),l(M,null,P(o.revisionData,(m,f)=>(n(),l(M,null,[a.from=="revision"?(n(),l("li",{key:0,class:O(["pointer",a.versionId==m.id?"bg-primary":""]),onClick:w=>i.goToRevision(m.id)},[s("span",bk,r(m.version_number),1),m.user?v((n(),l("span",yk,[p(r(i.subString(m.user.full_name,10)),1)])),[[g,m.user.full_name]]):d("",!0),p("  "),v((n(),l("small",vk,[wk,p(" "+r(i.formatTime(m.created_at)),1)])),[[g,c.formattedTime(m.created_at)]])],10,fk)):(n(),l("li",{key:1,class:"pointer",onClick:w=>i.goToRevision(m.id)},[s("span",Ck,r(m.version_number),1),m.user?v((n(),l("span",Dk,[p(r(i.subString(m.user.full_name)),1)])),[[g,m.user.full_name]]):d("",!0),p("  "),s("small",null,[Mk,p(" "+r(i.formatTime(m.created_at)),1)]),s("small",Sk,r(c.formattedTime(m.created_at)),1)],8,kk))],64))),256))]),u(_,{onInfinite:i.getRevisions,ref:"infiniteLoading"},{spinner:y(()=>[Ik]),complete:y(()=>[Tk]),_:1},8,["onInfinite"])])):d("",!0),!o.showLoader&&!o.revisionData.length?(n(),l("div",Ak,[s("h6",Ok,r(e.trans("no-records")),1)])):d("",!0)],2)])}const St=T(lk,[["render",Lk],["__scopeId","data-v-6eda2f83"]]);const Pk={name:"article-page",description:"article create and edit page",props:{auth:{type:Object,default:()=>{}}},data:()=>({showModal:!1,name:"",link:"",category:[],author:"",template:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!1,slug:"",radioOptions:[{name:"published",value:1},{name:"draft",value:0}],type:1,visibility_options:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"Logged in Users"},{id:"agents",name:"Agents"},{id:"organization_members",name:"Organization Members"}],visible_to:"",buttonVisible:!1,publish_time:new Date,timeOptions:{start:"00:00",step:"00:30",end:"23:30"},seo_title:"",meta_description:"",description:"",seoDesStyle:{width:"0%"},seoDesClass:"",seoStyle:{width:"0%"},seoClass:"",classname:"form-group",progStart:"progress-bar progress-bar-primary progress-bar-striped",progWarn:"progress-bar progress-bar-warning progress-bar-striped",progSuc:"progress-bar progress-bar-success progress-bar-striped",progDan:"progress-bar progress-bar-danger progress-bar-striped",show_err:!1,title:"create_new_article",iconClass:"fas fa-save",btnName:"save",article_id:"",modal_title:"",tag_id:[],showTemplateModal:!1,is_comment_enabled:!0,showComments:!1,summary:"",organization_id:"",showRevisions:!0,showConfirmationModal:!1,message:"article-alert-message",beforeConfirmation:"",buttonName:"Confirm",header:"Overwrite"}),beforeMount(){const e=window.location.pathname;this.getValues(e),this.getCommentStatus();const t=e.split("/");t[t.length-1]!=="edit"&&(this.author={id:this.auth.user_data.id,name:this.auth.user_data.first_name+" "+this.auth.user_data.last_name,email:this.auth.user_data.email,profile_pic:this.auth.user_data.profile_pic})},created(){window.emitter.on("applyTemplate",this.applyTemplate),window.emitter.on("updateConfirmation",this.updatingConfirmation)},methods:{getValues(e){const t=ie(e);e.indexOf("edit")>=0?(this.title="edit_article",this.iconClass="fas fa-sync",this.btnName="update",this.buttonVisible=!0,this.hasDataPopulated=!1,this.article_id=t,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getCommentStatus(){S.get("/kb/settings/getvalue").then(e=>{this.showComments=e.data.data.kbsettings.is_comment_enabled}).catch(e=>{this.showComments=!1})},getInitialValues(e){this.loading=!0,S.get("/api/edit/article/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.article_id=e,this.updateStatesWithData(t.data.message),this.tag_id=t.data.message.article.tags}).catch(t=>{this.loading=!1,L(t,"article-create"),setTimeout(()=>{this.$router.push("/article/list")},4e3)})},updateStatesWithData(e){var t=e.article;this.link=t.slug,this.seoTitleProgress(t.seo_title),this.metaProgress(t.meta_description);const a=this,c=this.$data;Object.keys(e.article).map(o=>{c.hasOwnProperty(o)&&(a[o]=e.article[o])}),this.publish_time=new Date(this.publish_time).toString(),this.seo_title=t.seo_title===""?t.name:t.seo_title,this.meta_description=t.meta_description===""?t.description:t.meta_description,this.summary=this.summary?this.summary.replace(/<br>/g,`
`):"",this.organization_id=t.organization},isValid(){const{errors:e,isValid:t}=Sw(this.$data);return!!t},modalMethod(e){this.showModal=!0,this.modal_title=e,this.$store.dispatch("unsetValidationError")},onSubmit(){if(this.classname=this.description===""?"form-group has-error":"form-group",this.show_err=this.description==="",this.isValid()&&this.description!==""){this.loadingSpeed=8e3,this.loading=!0;var e=new FormData;this.article_id!=""&&e.append("articleid",this.article_id),e.append("name",this.name),e.append("slug",this.link),e.append("description",this.description),e.append("category_id",this.category.map(a=>a.id)),this.visible_to==="organization_members"?e.append("organization_id",this.organization_id?this.organization_id.id:""):e.append("organization_id",""),this.showComments&&e.append("is_comment_enabled",this.is_comment_enabled?1:0),this.tag_id.length>0&&e.append("tag_id",this.tag_id.map(a=>a.id)),e.append("author",this.author.id),this.template!=""&&this.template!=null?e.append("template",this.template.id):e.append("template",""),e.append("publish_time",new Date(this.publish_time).toUTCString()),e.append("visible_to",this.visible_to),e.append("type",this.type),e.append("seo_title",this.seo_title),e.append("meta_description",this.meta_description),e.append("summary",this.summary.replace(/\r?\n/g,"<br>"));const t={headers:{"Content-Type":"multipart/form-data"}};S.post("/article",e,t).then(a=>{this.loading=!1,this.showRevisions=!1,V(a,"article-create"),this.article_id===""?setTimeout(()=>this.$router.push({name:"KB Article"}),3e3):(this.getInitialValues(this.article_id),setTimeout(()=>{this.showRevisions=!0},1500))}).catch(a=>{this.loading=!1,L(a,"article-create")})}},newCategory(e){this.category.push(e)},newTag(e){this.tag_id.push(e)},refreshSlug(e){this.link=e},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),c=a.replace(/_+/g,"");this.link=c.replace(/\s+/g,"-"),this.slug=e}t==="publish_time"&&(this.publish_time=G(e).format("YYYY-MM-DD HH:mm:ss")),t==="seo_title"&&this.seoTitleProgress(e),t==="meta_description"&&this.metaProgress(e),t==="author"&&(this[t]=e===null?"":e),t==="visible_to"&&e!="organization_members"&&(this.organization_id="")},templateData(e){this.description=e},seoTitleProgress(e){this.seoStyle.width=e.length/.6+"%";var t=e.length;this.seoClass=t>60?this.progDan:t>25&&t<=50?this.progSuc:t>50&&t<=60?this.progWarn:this.progStart},metaProgress(e){this.seoDesStyle.width=e.length/1.6+"%";var t=e.length;this.seoDesClass=t>160?this.progDan:t>80&&t<=120?this.progSuc:t>120&&t<=160?this.progWarn:this.progStart},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1,this.showConfirmationModal=!1},applyTemplate(e){e.operation==="append"?this.description+=e.data:e.operation==="overwrite"&&(this.showConfirmationModal=!0,this.beforeConfirmation=e.data),this.onTemplateModalClose()},updatingConfirmation(){this.description=this.beforeConfirmation},onTemplateModalClose(){this.showTemplateModal=!1}},components:{"delete-modal":Ne,"text-field":te,"perma-link":Ie,"dynamic-select":Q,"tree-select":Ve,"add-media":je,"radio-button":ne,"static-select":ye,"date-time-field":ve,"article-modal":Hw,"template-modal":ik,"status-switch":Se,"article-revisions":St}},Me=e=>(q("data-v-2f461c35"),e=e(),E(),e),Uk={class:"col-sm-12"},$k={key:0,class:"row"},Fk={key:1,class:"card card-light"},Vk={class:"card-header"},qk={class:"card-title"},Ek={class:"card-tools"},Rk=["href","target","disabled"],zk=Me(()=>s("i",{class:"fas fa-eye"},null,-1)),Bk=[zk],Nk=Me(()=>s("i",{class:"fas fa-trash"},null,-1)),jk=[Nk],Wk={href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},Kk=Me(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1)),Hk=[Kk],Yk={class:"dropdown-menu dropdown-menu-right",role:"menu"},xk={class:"card-body"},Jk={class:"row"},Gk={class:"row"},Qk={class:"row"},Zk={key:0,class:"col-sm-3"},Xk={for:"status"},e0=Me(()=>s("br",null,null,-1)),t0={class:"ml_7"},s0=Me(()=>s("i",{class:"fas fa-align-left","aria-hidden":"true"},null,-1)),a0={class:"row"},o0={class:"row"},n0={class:"card card-light"},i0={class:"card-header"},l0={class:"card-title"},r0={class:"card-body"},d0={class:"row"},c0={class:"progress sm col-md-12 p-0",id:"prog"},h0={class:"row"},u0={class:"progress sm col-md-12 p-0",id:"prog"},_0={key:0,class:"col-sm-6"},m0={class:"card-footer"},p0=["disabled"];function g0(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("text-field"),f=h("perma-link"),w=h("tree-select"),D=h("dynamic-select"),A=h("status-switch"),k=h("add-media"),b=h("static-select"),F=h("date-time-field"),z=h("radio-button"),Y=h("article-revisions"),ue=h("article-modal"),I=h("template-modal"),$=h("delete-modal"),W=U("tooltip"),It=U("focus-first-input");return n(),l("div",Uk,[e.hasDataPopulated===!1||e.loading===!0?(n(),l("div",$k,[u(_,{duration:e.loadingSpeed},null,8,["duration"])])):d("",!0),u(g,{componentName:"article-create"}),e.hasDataPopulated===!0?(n(),l("div",Fk,[s("div",Vk,[s("h3",qk,r(e.trans(e.title)),1),s("div",Ek,[e.buttonVisible?v((n(),l("a",{key:0,id:"view_article",class:"btn btn-tool",type:"button",href:e.type?e.basePath()+"/show/"+e.link:"javascript:;",target:e.type?"_blank":"",disabled:!e.type},Bk,8,Rk)),[[W,e.trans("view")]]):d("",!0),e.buttonVisible?v((n(),l("button",{key:1,id:"delete_article",class:"btn btn-tool",type:"button",onClick:t[0]||(t[0]=qe=>i.modalMethod("delete"))},jk)),[[W,e.trans("delete")]]):d("",!0),e.buttonVisible?d("",!0):(n(),l(M,{key:2},[v((n(),l("a",Wk,Hk)),[[W,e.trans("add_fields")]]),s("div",Yk,[s("a",{class:"dropdown-item text-dark",onClick:t[1]||(t[1]=qe=>i.modalMethod("new_category")),href:"javascript:;",id:"add_category"},r(e.trans("add_category")),1),s("a",{class:"dropdown-item text-dark",onClick:t[2]||(t[2]=qe=>i.modalMethod("new_tag")),href:"javascript:;"},r(e.trans("add_tag")),1)])],64))])]),s("div",xk,[v((n(),l("div",Jk,[u(m,{label:e.lang("name"),value:e.name,type:"text",name:e.showModal?"article_name":"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","name","onChange","placehold"]),u(f,{label:e.trans("perma_link"),value:e.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,classname:"col-sm-6",required:!0,link:e.link,disabled:e.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[It]]),s("div",Gk,[u(w,{label:e.trans("category"),multiple:!0,name:"category",classname:"col-sm-4",apiEndpoint:"/api/dependency/categories",value:e.category,onChange:i.onChange,placeHolder:e.lang("search_or_select"),required:!0,strlength:"25",valueFormat:"array"},null,8,["label","value","onChange","placeHolder"]),u(D,{label:e.trans("author"),multiple:!1,name:"author",classname:"col-sm-4",apiEndpoint:"/api/dependency/agents?meta=true",value:e.author,onChange:i.onChange,required:!0,clearable:!!e.author,strlength:"25"},null,8,["label","value","onChange","clearable"]),u(D,{label:e.trans("tags"),multiple:!0,name:"tag_id",classname:"col-sm-4",apiEndpoint:"/api/dependency/tags",value:e.tag_id,onChange:i.onChange,required:!1,strlength:"25",hint:e.trans("relevant_tags_search")},null,8,["label","value","onChange","hint"])]),s("div",Qk,[u(m,{label:e.trans("summary"),value:e.summary,type:"textarea",name:"summary",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-9",required:!0},null,8,["label","value","onChange","placehold"]),e.showComments?(n(),l("div",Zk,[s("label",Xk,r(e.trans("allow_comments")),1),e0,u(A,{name:"is_comment_enabled",value:e.is_comment_enabled,onChange:i.onChange,classname:"float-left",bold:!0},null,8,["value","onChange"])])):d("",!0)]),s("div",t0,[u(k,{description:e.description,classname:e.classname,show_error:e.show_err,page_name:"kb",name:"description",chunkApi:"/chunk/upload/public",filesApi:"/media/files/public",onInput:i.onChange},{template:y(()=>[s("button",{id:"article__template__button",class:"btn btn-default",onClick:t[3]||(t[3]=()=>e.showTemplateModal=!0)},[s0,p(" "+r(e.trans("select_template")),1)])]),_:1},8,["description","classname","show_error","onInput"])]),s("div",a0,[u(b,{label:e.trans("visibility"),elements:e.visibility_options,name:"visible_to",value:e.visible_to,classname:"col-sm-3",onChange:i.onChange,required:!0},null,8,["label","elements","value","onChange"]),e.visible_to==="organization_members"?(n(),C(D,{key:0,label:e.trans("organization"),multiple:!1,name:"organization_id",classname:"col-sm-3",apiEndpoint:"/api/dependency/organizations",value:e.organization_id,onChange:i.onChange,required:!0,strlength:"20"},null,8,["label","value","onChange"])):d("",!0),u(F,{label:e.trans("publish_immediately"),value:e.publish_time,type:"datetime",name:"publish_time",onChange:i.onChange,"time-picker-options":e.timeOptions,required:!0,format:"MMMM DD YYYY HH:mm",classname:"col-sm-3",clearable:!1,disabled:!1},null,8,["label","value","onChange","time-picker-options"]),u(z,{options:e.radioOptions,label:e.trans("status"),name:"type",value:e.type,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),s("div",o0,[s("div",{class:O(e.buttonVisible?"col-sm-6":"col-sm-12")},[s("div",n0,[s("div",i0,[s("h3",l0,r(e.trans("seo")),1)]),s("div",r0,[s("div",d0,[u(m,{label:e.trans("seo_title"),value:e.seo_title,type:"text",name:"seo_title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),s("div",c0,[s("div",{class:O(e.seoClass),style:N(e.seoStyle)},null,6)])]),s("div",h0,[u(m,{label:e.trans("description"),value:e.meta_description,type:"textarea",name:"meta_description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),s("div",u0,[s("div",{class:O(e.seoDesClass),style:N(e.seoDesStyle)},null,6)])])])])],2),e.buttonVisible&&e.showRevisions?(n(),l("div",_0,[u(Y,{articleId:e.article_id},null,8,["articleId"])])):d("",!0)])]),s("div",m0,[s("button",{type:"button",onClick:t[4]||(t[4]=qe=>i.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[s("span",{class:O(e.iconClass)},null,2),p(" "+r(e.trans(e.btnName)),1)],8,p0)]),u(R,{name:"modal"},{default:y(()=>[e.showModal?(n(),C(ue,{key:0,category:e.category,newCategory:i.newCategory,onClose:i.onClose,newTag:i.newTag,showModal:e.showModal,title:e.modal_title,id:e.link},null,8,["category","newCategory","onClose","newTag","showModal","title","id"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[e.showTemplateModal?(n(),C(I,{key:0,onClose:i.onTemplateModalClose,showModal:e.showTemplateModal,"modal-title":e.trans("select_template")},null,8,["onClose","showModal","modal-title"])):d("",!0)]),_:1}),u(R,{name:"modal"},{default:y(()=>[e.showConfirmationModal?(n(),C($,{key:0,onClose:i.onClose,showModal:e.showConfirmationModal,from:"template",modalMessage:e.message,buttonText:e.buttonName,header:e.header},null,8,["onClose","showModal","modalMessage","buttonText","header"])):d("",!0)]),_:1})])):d("",!0)])}const Je=T(Pk,[["render",g0],["__scopeId","data-v-2f461c35"]]);const f0={name:"article-version-details",data(){return{articleId:"",versionId:"",loading:!1,versionDetails:"",pageLoad:!1}},beforeMount(){let a=window.location.pathname.split("/").filter(function(c){return parseInt(c)==c});this.articleId=a[0],this.versionId=a[1],this.getVersionDetails()},methods:{restoreVersion(){this.pageLoad=!0,S.get("/api/article/restore-version/"+this.articleId+"/"+this.versionId).then(e=>{V(e,"article-version"),this.pageLoad=!1,setTimeout(()=>{this.$router.push({path:"/article/"+this.articleId+"/edit"})},2e3)}).catch(e=>{L(e,"article-version"),this.pageLoad=!1})},getVersionDetails(){this.loading=!0,S.get("/api/article/version/"+this.articleId+"/"+this.versionId).then(e=>{this.versionDetails=e.data.message,this.loading=!1}).catch(e=>{this.loading=!1,this.versionDetails=""})}},components:{"article-revisions":St}},b0=e=>(q("data-v-3fc3140f"),e=e(),E(),e),y0={class:"col-sm-12"},v0={key:0,class:"row"},w0={class:"row"},k0={class:"card card-light"},C0={class:"card-header"},D0={class:"card-title"},M0={key:0,class:"card-tools"},S0=b0(()=>s("i",{class:"fas fa-reply"},null,-1)),I0={class:"card-body scrollable-article"},T0={key:0,class:"row"},A0={key:1,class:"row"},O0={class:"col-sm-2"},L0={class:"col-sm-10"},P0=["innerHTML"],U0={class:"col-sm-2"},$0={class:"col-sm-10"},F0=["innerHTML"],V0={class:"col-sm-2"},q0={class:"col-sm-10"},E0=["innerHTML"],R0={key:0,class:"col-sm-4"};function z0(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("reuse-loader"),f=h("article-revisions");return n(),l("div",y0,[o.pageLoad?(n(),l("div",v0,[u(_)])):d("",!0),u(g,{componentName:"article-version"}),s("div",w0,[s("div",{class:O(o.loading?"col-sm-12":"col-sm-8")},[s("div",k0,[s("div",C0,[s("h3",D0,r(e.trans("article")),1),!o.loading&&o.versionDetails.is_restore?(n(),l("div",M0,[s("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=w=>i.restoreVersion())},[S0,p("  "+r(e.trans("restore")),1)])])):d("",!0)]),s("div",I0,[o.loading?(n(),l("dl",T0,[u(m,{"animation-duration":4e3,size:60})])):d("",!0),o.loading?d("",!0):(n(),l("dl",A0,[o.versionDetails&&o.versionDetails.mod_contents.name?(n(),l(M,{key:0},[s("dt",O0,r(e.trans("name")),1),s("dd",L0,[s("h5",null,[s("span",{innerHTML:o.versionDetails.mod_contents.name},null,8,P0)])])],64)):d("",!0),o.versionDetails&&o.versionDetails.mod_contents.summary?(n(),l(M,{key:1},[s("dt",U0,r(e.trans("summary")),1),s("dd",$0,[s("span",{innerHTML:o.versionDetails.mod_contents.summary},null,8,F0)])],64)):d("",!0),o.versionDetails&&o.versionDetails.mod_contents.description?(n(),l(M,{key:2},[s("dt",V0,r(e.trans("description")),1),s("dd",q0,[s("span",{innerHTML:o.versionDetails.mod_contents.description},null,8,E0)])],64)):d("",!0)]))])])],2),o.loading?d("",!0):(n(),l("div",R0,[u(f,{articleId:o.articleId,from:"revision",versionId:o.versionId},null,8,["articleId","versionId"])]))])])}const B0=T(f0,[["render",z0],["__scopeId","data-v-3fc3140f"]]);const N0={setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},props:{comment:{type:Object,default:()=>{}},updateList:{type:Function,default:()=>{}}},data(){return{isDisabled:!1,showModal:!1,commentId:"",loading:!1}},methods:{subString(e,t=10){return X(e,t)},viewArticle(e){this.$store.dispatch("setArticleId",e)},updateStatus(e){let t=this.comment.status?"/unapprove/"+e:"/published/"+e;this.loading=!0,this.isDisabled=!0,axios.get(t).then(a=>{this.isDisabled=!1,this.loading=!1,this.updateList(),V(a,"CommentsIndex")}).catch(a=>{this.isDisabled=!1,this.loading=!1,L(res,"CommentsIndex")})},deleteMethod(e){this.commentId=e,this.showModal=!0},onClose(){this.showModal=!1}},components:{"delete-modal":Ce}},he=e=>(q("data-v-2a1fc1bc"),e=e(),E(),e),j0={class:"article-comment-box"},W0={class:"timeline"},K0={id:"comment_div"},H0={class:"timeline-item",id:"comment_item"},Y0={class:"time"},x0=he(()=>s("i",{class:"far fa-clock"},null,-1)),J0={class:"timeline-header"},G0={href:"javascript:;"},Q0={class:"fas fa-question-circle cursor text-primary"},Z0={class:"p-3"},X0=he(()=>s("i",{class:"fas fa-user"},null,-1)),eC={href:"javascript:;"},tC=he(()=>s("i",{class:"fas fa-envelope"},null,-1)),sC={href:"javascript:;"},aC={key:0},oC=he(()=>s("i",{class:"fas fa-globe"},null,-1)),nC=["href"],iC=he(()=>s("i",{class:"fas fa-newspaper"},null,-1)),lC=["href"],rC=["innerHTML"],dC={class:"timeline-footer bt-1"},cC=["disabled"],hC=he(()=>s("i",{class:"fas fa-check"},null,-1)),uC=["href"],_C=he(()=>s("i",{class:"fas fa-eye"},null,-1)),mC=he(()=>s("i",{class:"fas fa-trash"},null,-1)),pC={key:0,class:"row"};function gC(e,t,a,c,o,i){const _=h("faveo-image-element"),g=h("popover"),m=h("custom-loader"),f=h("delete-modal"),w=U("tooltip");return n(),l("div",j0,[s("div",W0,[s("div",K0,[s("div",H0,[s("span",Y0,[x0,p(" "+r(c.formattedTime(a.comment.created_at)),1)]),s("h3",J0,[u(_,{id:"proimg","source-url":a.comment.profile_pic,classes:["img-circle img-bordered-sm img-30"],"alternative-text":"User Image"},null,8,["source-url"]),v((n(),l("a",G0,[p(" "+r(a.comment.name)+" ",1)])),[[w,a.comment.name]]),u(g,{click:"",arrow:"",placement:"right"},{content:y(()=>[s("div",Z0,[s("p",null,[X0,p("  "),v((n(),l("span",eC,[p(r(i.subString(a.comment.name,25)),1)])),[[w,a.comment.name]])]),s("p",null,[tC,p("  "),v((n(),l("span",sC,[p(r(i.subString(a.comment.email,25)),1)])),[[w,a.comment.email]])]),a.comment.website!=""?(n(),l("p",aC,[oC,p("  "),v((n(),l("a",{href:a.comment.website,target:"_blank"},[p(r(i.subString(a.comment.website,25)),1)],8,nC)),[[w,a.comment.website]])])):d("",!0)])]),default:y(()=>[v(s("i",Q0,null,512),[[w,e.lang("click_to_see_details")]])]),_:1})]),s("div",{class:O(["timeline-body",{"bg-comment":!a.comment.status}])},[s("h6",null,[iC,p("  "),s("a",{href:e.basePath()+"/show/"+a.comment.article[0].slug,target:"_blank"},r(a.comment.article[0].name),9,lC)]),s("p",{innerHTML:a.comment.comment},null,8,rC)],2),s("div",dC,[v((n(),l("a",{disabled:o.isDisabled,onClick:t[0]||(t[0]=D=>i.updateStatus(a.comment.id)),class:"btn btn-default btn-xs text-dark",href:"javascript:;"},[hC,p(" "+r(a.comment.status?e.lang("unapprove"):e.lang("approve")),1)],8,cC)),[[w,a.comment.status?e.lang("unapprove"):e.lang("approve")]]),v((n(),l("a",{onClick:t[1]||(t[1]=D=>i.viewArticle(a.comment.article[0].id)),target:"_blank",class:"btn btn-xs btn-default text-dark",href:e.basePath()+"/show/"+a.comment.article[0].slug},[_C,p(" "+r(e.lang("view")),1)],8,uC)),[[w,e.lang("view")]]),v((n(),l("a",{href:"javascript:;",class:"btn btn-xs btn-default text-dark",onClick:t[2]||(t[2]=D=>i.deleteMethod(a.comment.id))},[mC,p(" "+r(e.lang("delete")),1)])),[[w,e.lang("delete")]])])])])]),o.loading?(n(),l("div",pC,[u(m)])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(f,{key:0,onClose:i.onClose,showModal:o.showModal,alert:"CommentsIndex",apiUrl:"/comment/delete/"+o.commentId},null,8,["onClose","showModal","apiUrl"])):d("",!0)]),_:1})])}const fC=T(N0,[["render",gC],["__scopeId","data-v-2a1fc1bc"]]);const bC={setup(){const e=x();return{getCommentFilterData:B(()=>e.getters.getCommentFilterData)}},data(){return{comments_List:[],paramsObj:{},length:0,from:this.getCommentFilterData,perpage:10,pagination:1,records:0,loading:!0,search:"",show:!1,tab:"",calloutText:"",callOutStyle:{display:"none"},filter:2,tabs:[{id:2,title:"all",count:0},{id:1,title:"approved",count:0},{id:0,title:"unapproved",count:0}],commentFilterData:{},pageLoader:!1,isRtl:!1}},created(){this.isRtl=ae(sessionStorage.getItem("is_rtl")),window.emitter.on("updateCommentsList",this.updateData),this.from&&this.from.id!==void 0&&(this.commentFilterData=this.from,this.commentFilterData.to==="all"?(this.filter=2,this.callOutStyle.display="block"):this.commentFilterData.to==="unapprove"?(this.filter=0,this.callOutStyle.display="block"):this.filter=1)},beforeMount(){if(this.from)if(this.from.id){this.calloutText="Comments of ";const e={condition:this.from.to,article_id:this.from.id,filter_by:this.filter};this.commonApi(e)}else this.commonApi();else this.commonApi()},computed:{searchFilter:{get(){return this.search},set(e){this.pageLoader=!0,this.search=e,this.paramsObj["search-option"]=e,this.from?this.from.id!==void 0?this.commonFunction("search-option",e):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)}}},methods:{updateData(){this.pagination=1,this.search="",this.loading=!0,this.paramsObj={},this.commonApi(this.paramsObj)},commonApi(e){var t=e;S.get("/get-comment",{params:t}).then(a=>{this.loading=!1,this.pageLoader=!1,this.comments_List=a.data.message.data,a.data.message.total==0&&(this.show=!0),this.records=a.data.message.total,this.perpage=a.data.message.per_page,this.tabs[0].count=a.data.data.all,this.tabs[1].count=a.data.data.approved,this.tabs[2].count=a.data.data.pending,this.length=a.data.message.total}).catch(a=>{this.pageLoader=!1,this.loading=!1})},handlePageCount(e){this.pageLoader=!0,this.pagination=1,this.paramsObj.pagination=e,setTimeout(()=>{this.from?this.from.id!==void 0?this.commonFunction("pagination",e):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},100)},sorting(e){this.pageLoader=!0,this.show=!1,this.paramsObj["sort-by"]=e.value,this.from?this.from.id!==void 0?this.commonFunction("sort-by",e.value):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},refresh(){this.pagination=1},comments(e){this.pageLoader=!0,this.tab=e,this.paramsObj.filter_by=e,this.pagination=1,this.paramsObj.page=1,this.from?this.from.id!==void 0?this.commonFunction("filter-by",e):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},pageChanged(){this.pageLoader=!0;var e=document.getElementById("kb-comments");e.scrollIntoView({behavior:"smooth"}),this.paramsObj.page=this.pagination,this.from?this.from.id!==void 0?this.commonFunction("page",this.pagination):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},commonFunction(e,t){e==="filter-by"&&(this.filter=t);const a={condition:this.from.to,article_id:this.from.id,filter_by:this.filter};e==="filter-by"?a.page=1:a[e]=t,this.commonApi(a)},seeAll(){this.pageLoader=!0,this.$store.dispatch("commentFilterData",{}),this.paramsObj={},this.paramsObj.filter_by=this.filter,this.pagination=1,this.paramsObj.page=1,this.commonApi(this.paramsObj),this.callOutStyle.display="none"}},components:{"comments-box":fC,"kb-sorting":kt,"data-per-page":Ct}},yC={class:"col-sm-12"},vC={class:"card card-light"},wC={class:"card-header"},kC={class:"card-title"},CC={class:"card-body",id:"kb-comments"},DC={key:0,class:"row"},MC={class:"col-md-4"},SC={class:"col-md-8"},IC={style:{"line-height":"2"}},TC=["placeholder"],AC={key:1,class:"mt-2"},OC={key:0,id:"call"},LC={class:"nav nav-tabs",role:"tablist"},PC={class:"nav-item"},UC=["onClick"],$C={class:"badge bg-yellow"},FC={class:"tab-content"},VC={class:"active tab-pane mt-4"},qC={key:0,class:"float-right comment-page"},EC={key:1},RC={class:"p-3",style:{"text-align":"center"}},zC={key:2,class:"row"},BC={key:2,class:"row"};function NC(e,t,a,c,o,i){const _=h("alert"),g=h("data-per-page"),m=h("kb-sorting"),f=h("comments-box"),w=h("uib-pagination"),D=h("custom-loader"),A=h("reuse-loader");return n(),l("div",yC,[u(_,{componentName:"CommentsIndex"}),s("div",vC,[s("div",wC,[s("h3",kC,r(e.lang("list_of_comments")),1)]),s("div",CC,[o.loading?d("",!0):(n(),l("div",DC,[s("div",MC,[o.records>0?(n(),l(M,{key:0},[u(g,{ticketper:o.perpage,onMessage:i.handlePageCount},null,8,["ticketper","onMessage"]),u(m,{name1:"created_time",value1:"created_at",onSort:i.sorting},null,8,["onSort"])],64)):d("",!0)]),s("div",SC,[s("div",{style:N({float:o.isRtl?"left":"right"})},[s("span",IC,r(e.lang("search"))+": ",1),v(s("input",{id:"search",type:"text",class:"form-control search-field","onUpdate:modelValue":t[0]||(t[0]=k=>i.searchFilter=k),placeholder:e.lang("search_here"),onKeyup:t[1]||(t[1]=(...k)=>i.refresh&&i.refresh(...k))},null,40,TC),[[de,i.searchFilter]])],4)])])),o.loading?d("",!0):(n(),l("div",AC,[s("div",{class:"callout callout-info bg-light",style:N(o.callOutStyle)},[o.from&&o.from.name?(n(),l("span",OC,[s("p",null,[p(r(o.calloutText)+" ",1),s("b",null,r(o.from.name),1),p(".   ")]),s("a",{id:"all",href:"javascript:;",onClick:t[2]||(t[2]=(...k)=>i.seeAll&&i.seeAll(...k))},r(e.lang("click_to_see_all")),1)])):d("",!0)],4),s("ul",LC,[(n(!0),l(M,null,P(o.tabs,k=>(n(),l("li",PC,[s("a",{class:O(["nav-link",{active:o.filter===k.id}]),"data-toggle":"pill",role:"tab",href:"javascript:;",onClick:b=>i.comments(k.id),id:"comment_tab"},[p(r(e.lang(k.title))+" ",1),s("span",$C,r(k.count),1)],10,UC)]))),256))]),s("div",FC,[s("div",VC,[o.records>0?(n(),l(M,{key:0},[(n(!0),l(M,null,P(o.comments_List,k=>(n(),C(f,{key:k.id,comment:k,updateList:i.updateData},null,8,["comment","updateList"]))),128)),o.records>10?(n(),l("div",qC,[u(w,{records:o.records,modelValue:o.pagination,"onUpdate:modelValue":t[3]||(t[3]=k=>o.pagination=k),class:"pagination","boundary-links":!0,"per-page":o.perpage,onPaginate:t[4]||(t[4]=k=>i.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])])):d("",!0)],64)):d("",!0),o.show&&o.records==0?(n(),l("div",EC,[s("p",RC,r(e.lang("no-data-to-show")),1)])):d("",!0),o.pageLoader?(n(),l("div",zC,[u(D)])):d("",!0)])])])),o.loading?(n(),l("div",BC,[u(A)])):d("",!0)])])])}const jC=T(bC,[["render",NC],["__scopeId","data-v-356ac102"]]);function WC(e){const{name:t,description:a}=e;let c={name:[t,"isRequired"],description:[a,"isRequired"]};const o=new K(j),{errors:i,isValid:_}=o.validate(c);return H.dispatch("setValidationError",i),{errors:i,isValid:_}}const KC={name:"article-template",description:"Article Template component",data(){return{name:"",status:1,description:"",radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],classname:"form-group",show_err:!1,title:"create_new_article_template",iconClass:"fas fa-save",btnName:"save",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,template_id:"",buttonVisible:!1,showModal:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ie(e);e.indexOf("edit")>=0?(this.title="edit_article_template",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.buttonVisible=!0,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,S.get("/api/articletemplate/edit/"+e).then(t=>{this.template_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.template)}).catch(t=>{L(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(c=>{a.hasOwnProperty(c)&&(t[c]=e[c])})},isValid(){const{errors:e,isValid:t}=WC(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;const e={};this.template_id!=""&&(e.id=this.template_id),e.name=this.name,e.status=this.status,e.description=this.description,S.post("/article/post/template",e).then(t=>{this.loading=!1,V(t,"template-create"),this.template_id===""?setTimeout(()=>this.$router.push({name:"KB Article Template List"}),3e3):this.getInitialValues(this.template_id)}).catch(t=>{this.loading=!1,L(t,"template-create")})}},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":te,"radio-button":ne,"template-modal":Ce}},HC={class:"col-sm-12"},YC={key:0,class:"row"},xC={key:1,class:"card card-light"},JC={class:"card-header"},GC={class:"card-title"},QC={class:"card-tools"},ZC=s("i",{class:"fas fa-trash"},null,-1),XC=[ZC],eD={class:"card-body"},tD={class:"row"},sD={class:"row"},aD={class:"card-footer"},oD=["disabled"];function nD(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("text-field"),f=h("radio-button"),w=h("tiny-editor"),D=h("template-modal"),A=U("tooltip"),k=U("focus-first-input");return n(),l("div",HC,[!o.hasDataPopulated||o.loading?(n(),l("div",YC,[u(_,{duration:o.loadingSpeed},null,8,["duration"])])):d("",!0),u(g,{componentName:"template-create"}),o.hasDataPopulated?(n(),l("div",xC,[s("div",JC,[s("h3",GC,r(e.lang(o.title)),1),s("div",QC,[o.buttonVisible?v((n(),l("a",{key:0,class:"btn-tool",onClick:t[0]||(t[0]=b=>o.showModal=!0),href:"javascript:;"},XC)),[[A,e.lang("delete")]]):d("",!0)])]),s("div",eD,[v((n(),l("div",tD,[u(m,{label:e.lang("name"),value:o.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(f,{options:o.radioOptions,label:e.lang("status"),name:"status",value:o.status,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])),[[k]]),s("div",sD,[u(w,{value:o.description,type:"text",onChange:i.onChange,name:"description",label:e.lang("description"),classname:"col-sm-12",required:!0,lang:"en"},null,8,["value","onChange","label"])])]),s("div",aD,[s("button",{type:"button",id:"submit_btn",onClick:t[1]||(t[1]=b=>i.onSubmit()),disabled:o.loading,class:"btn btn-primary"},[s("i",{class:O(o.iconClass)},null,2),p(" "+r(e.lang(o.btnName)),1)],8,oD)])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(D,{key:0,onClose:i.onClose,showModal:o.showModal,apiUrl:"/article/deletetemplate/"+o.template_id,alert:"template-create",redirectUrl:"/article/alltemplate/list"},null,8,["onClose","showModal","apiUrl"])):d("",!0)]),_:1})])}const Ge=T(KC,[["render",nD]]);const iD={name:"article-template-index",description:"Article template table component",data:()=>({columns:["name","status","action"],options:{},apiUrl:"/articletemplate/index"}),beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),action:this.trans("actions"),status:this.trans("status")},templates:{status:(t,a)=>e.h(Be,{data:a}),action:(t,a)=>e.h(oe,{data:a})},columnsClasses:{name:"template-name",status:"template-status",action:"template-action"},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.edit_url="/article/template/"+a.id+"/edit",a.delete_url=e.basePath()+"/article/deletetemplate/"+a.id,a.active=a.active=="1"?"active":"inactive",a)),count:t.message.total}}}}},lD={id:"template-index",class:"col-sm-12"},rD={class:"card card-light"},dD={class:"card-header"},cD={class:"card-title"},hD={class:"card-tools"},uD=s("i",{class:"glyphicon glyphicon-plus"},null,-1),_D={class:"card-body",id:"my_art_templates"};function mD(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=U("tooltip");return n(),l("div",lD,[u(_,{componentName:"dataTableModal"}),s("div",rD,[s("div",dD,[s("h3",cD,r(e.lang("list_of_article_template")),1),s("div",hD,[v((n(),C(g,{class:"btn-tool",to:"/article/create/template"},{default:y(()=>[uD]),_:1})),[[f,e.lang("create_template")]])])]),s("div",_D,[u(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"template-index"},null,8,["url","dataColumns","option"])])])])}const pD=T(iD,[["render",mD]]);function gD(e){const{pagination:t}=e;let a={pagination:[t,"isRequired","minValue(10)","maxValue(15)"]};const c=new K(j),{errors:o,isValid:i}=c.validate(a);return H.dispatch("setValidationError",o),{errors:o,isValid:i}}const fD={data(){return{kbsettings:{},status:null,pagination:null,loading:!1,is_comment_enabled:!1}},beforeMount(){this.commonApi()},methods:{onChange(e,t){this[t]=e},commonApi(){this.loading=!0,S.get("kb/settings/getvalue").then(e=>{this.loading=!1,this.kbsettings=e.data.data.kbsettings,this.status=this.kbsettings.status,this.pagination=this.kbsettings.pagination,this.is_comment_enabled=this.kbsettings.is_comment_enabled}).catch(e=>{this.loading=!1})},isValid(){const{errors:e,isValid:t}=gD(this.$data);return t},postData(){if(this.isValid()){this.loading=!0;const e={};e.pagination=this.pagination,e.status=this.status?1:0,e.is_comment_enabled=this.is_comment_enabled?1:0,S.post("postsettings",e).then(t=>{this.$store.dispatch("setAlert",{type:"success",message:"Settings saved successfully",component_name:"KbSettings"}),this.commonApi(),this.loading=!1}).catch(t=>{this.loading=!1})}}},components:{"status-switch":Se,"number-field":be}},bD={class:"col-sm-12"},yD={class:"card card-light"},vD={class:"card-header"},wD={class:"card-title"},kD={class:"card-body"},CD={class:"row"},DD={class:"form-group col-sm-2"},MD={for:"status"},SD=s("span",{style:{color:"red"}}," *",-1),ID=s("br",null,null,-1),TD={class:"form-group col-sm-3"},AD={for:"status"},OD=s("br",null,null,-1),LD={key:0,class:"row"},PD={class:"card-footer"},UD=s("i",{class:"fas fa-save"},null,-1);function $D(e,t,a,c,o,i){const _=h("alert"),g=h("number-field"),m=h("status-switch"),f=h("custom-loader"),w=U("focus-first-input");return n(),l("div",bD,[u(_,{componentName:"KbSettings"}),s("div",yD,[s("div",vD,[s("h3",wD,r(e.lang("kb-settings")),1)]),s("div",kD,[v((n(),l("div",CD,[u(g,{label:e.lang("number_of_elements_to_display"),value:o.pagination,name:"pagination",classname:"col-sm-6",required:!0,onChange:i.onChange,placeholder:"n",type:"number",hint:e.lang("number_of_elements_to_display_in_kb")},null,8,["label","value","onChange","hint"]),s("div",DD,[s("label",MD,r(e.lang("status")),1),SD,ID,u(m,{name:"status",value:o.status,onChange:i.onChange,classname:"float-left",bold:!0},null,8,["value","onChange"])]),s("div",TD,[s("label",AD,r(e.lang("kb_comments")),1),OD,u(m,{name:"is_comment_enabled",value:o.is_comment_enabled,onChange:i.onChange,classname:"float-left",bold:!0},null,8,["value","onChange"])])])),[[w]]),o.loading?(n(),l("div",LD,[u(f,{"animation-duration":4e3,size:60})])):d("",!0)]),s("div",PD,[s("button",{id:"post",onClick:t[0]||(t[0]=(...D)=>i.postData&&i.postData(...D)),class:"btn btn-primary"},[UD,p(" "+r(e.lang("save")),1)])])])])}const FD=T(fD,[["render",$D]]);const VD={name:"category-index",description:"Category table component",data:()=>({columns:["name","description","status","display_order","action"],options:{},apiUrl:"/api/get-category-data"}),beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),description:this.trans("description"),action:this.trans("actions"),display_order:this.trans("display_order"),status:this.trans("status")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{description:function(t,a){return e.h("div",{title:a.description.replace(/(<([^>]+)>)/g,""),innerHTML:a.description.length>100?a.description.substring(0,100)+"...":a.description})},status:(t,a)=>e.h(Be,{data:a}),action:(t,a)=>e.h(oe,{data:a})},columnsClasses:{name:"category-name",description:"category-desc",action:"category-action",display_order:"category-order",status:"category-status"},sortable:["name","description","status","display_order"],filterable:["name","description","status","display_order"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.client_view_url=a.status?e.basePath()+"/category-list/"+a.slug:"javascript:;",a.edit_url="/category/"+a.id+"/edit",a.delete_url="/category/delete/"+a.id,a)),count:t.message.total}}}}},qD={id:"category-index",class:"col-sm-12"},ED={class:"card card-light"},RD={class:"card-header"},zD={class:"card-title"},BD={class:"card-tools"},ND=s("i",{class:"glyphicon glyphicon-plus"},null,-1),jD={class:"card-body",id:"my_category"};function WD(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=U("tooltip");return n(),l("div",qD,[u(_,{componentName:"dataTableModal"}),s("div",ED,[s("div",RD,[s("h3",zD,r(e.lang("all_category")),1),s("div",BD,[v((n(),C(g,{class:"btn-tool",to:"/category/create"},{default:y(()=>[ND]),_:1})),[[f,e.lang("create_category")]])])]),s("div",jD,[u(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"category-index"},null,8,["url","dataColumns","option"])])])])}const KD=T(VD,[["render",WD]]);function HD(e){const{name:t,display_order:a,description:c,slug:o}=e;let i={name:[t,"isRequired"],display_order:[a,"isRequired"],description:[c,"isRequired"],slug:[o,"isRequired"]};const _=new K(j),{errors:g,isValid:m}=_.validate(i);return H.dispatch("setValidationError",g),{errors:g,isValid:m}}const YD={name:"article-template",description:"Article Template component",data(){return{name:"",status:1,description:"",display_order:"",radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],classname:"form-group",show_err:!1,title:"create_new_category",iconClass:"fas fa-save",btnName:"save",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,category_id:"",buttonVisible:!1,showModal:!1,slug:"",link:"",parent_category:null,endPoint:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ie(e);e.indexOf("edit")>=0?(this.title="edit_category",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.buttonVisible=!0,this.endPoint="/api/dependency/categories?category_id="+t,this.getInitialValues(t)):(this.endPoint="/api/dependency/categories",this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,S.get("/api/edit/category/"+e).then(t=>{this.category_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.category)}).catch(t=>{L(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){this.link=e.slug;const t=this,a=this.$data;Object.keys(e).map(c=>{a.hasOwnProperty(c)&&(t[c]=e[c])})},isValid(){const{errors:e,isValid:t}=HD(this.$data);return!!t},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),c=a.replace(/_+/g,"");this.link=c.replace(/\s+/g,"-"),this.slug=e}},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;const e={};this.category_id!=""&&(e.id=this.category_id),e.name=this.name,e.status=this.status,e.description=this.description,e.display_order=this.display_order,e.slug=this.link,e.parent=this.parent_category?this.parent_category.id:"",S.post("/api/category/create",e).then(t=>{this.loading=!1,V(t,"category-create"),this.category_id===""?setTimeout(()=>this.$router.push({name:"KB Category Index"}),3e3):this.getInitialValues(this.category_id)}).catch(t=>{this.loading=!1,L(t,"category-create")})}},refreshSlug(e){this.link=e},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":te,"number-field":be,"radio-button":ne,"category-modal":Ce,"perma-link":Ie,"tree-select":Ve}},xD={class:"col-sm-12"},JD={key:0,class:"row"},GD={key:1,class:"card card-light"},QD={class:"card-header"},ZD={class:"card-title"},XD={class:"card-tools"},e2=["disabled","href","target"],t2=s("i",{class:"fa fa-eye"},null,-1),s2=[t2],a2=s("i",{class:"fas fa-trash"},null,-1),o2=[a2],n2={class:"card-body"},i2={class:"row"},l2={class:"row"},r2={class:"row"},d2={class:"card-footer"},c2=["disabled"];function h2(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("text-field"),f=h("perma-link"),w=h("tree-select"),D=h("number-field"),A=h("radio-button"),k=h("category-modal"),b=U("tooltip"),F=U("focus-first-input");return n(),l("div",xD,[o.hasDataPopulated===!1||o.loading===!0?(n(),l("div",JD,[u(_,{duration:o.loadingSpeed},null,8,["duration"])])):d("",!0),u(g,{componentName:"category-create"}),o.hasDataPopulated===!0?(n(),l("div",GD,[s("div",QD,[s("h3",ZD,r(e.lang(o.title)),1),s("div",XD,[o.buttonVisible?v((n(),l("a",{key:0,id:"view_category",class:"btn-tool",disabled:!o.status,href:o.status?e.basePath()+"/category-list/"+o.link:"javascript:;",target:o.status?"_blank":""},s2,8,e2)),[[b,e.lang("view")]]):d("",!0),o.buttonVisible?v((n(),l("a",{key:1,id:"delete_category",class:"btn-tool",onClick:t[0]||(t[0]=z=>o.showModal=!0),href:"javascript:;"},o2)),[[b,e.lang("delete")]]):d("",!0)])]),s("div",n2,[v((n(),l("div",i2,[u(m,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(f,{label:e.trans("perma_link"),value:o.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,from:"category",classname:"col-sm-6",required:!0,link:o.link,disabled:o.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[F]]),s("div",l2,[u(w,{label:e.trans("parent"),multiple:!1,name:"parent_category",classname:"col-sm-6",apiEndpoint:o.endPoint,value:o.parent_category,onChange:i.onChange,placeHolder:e.trans("search_or_select"),required:!1,strlength:"45"},null,8,["label","apiEndpoint","value","onChange","placeHolder"]),u(D,{label:e.lang("display_order"),value:o.display_order,name:"display_order",classname:"col-sm-3",onChange:i.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),u(A,{options:o.radioOptions,label:e.lang("status"),name:"status",value:o.status,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),s("div",r2,[u(m,{label:e.lang("description"),value:o.description,type:"textarea",name:"description",rows:"8",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])]),s("div",d2,[s("button",{type:"button",id:"submit_btn",onClick:t[1]||(t[1]=z=>i.onSubmit()),disabled:o.loading,class:"btn btn-primary"},[s("i",{class:O(o.iconClass)},null,2),p(" "+r(e.lang(o.btnName)),1)],8,c2)])])):d("",!0),u(R,{name:"modal"},{default:y(()=>[o.showModal?(n(),C(k,{key:0,onClose:i.onClose,showModal:o.showModal,apiUrl:"/category/delete/"+o.category_id,alert:"category-create",redirectUrl:"/category"},null,8,["onClose","showModal","apiUrl"])):d("",!0)]),_:1})])}const Qe=T(YD,[["render",h2]]);const u2={name:"pages-index",description:"Pages table component",setup(){const e=x();return{formattedTime:B(()=>e.getters.formattedTime),formattedDate:B(()=>e.getters.formattedDate)}},data:()=>({columns:["name","status","created_at","action"],options:{},apiUrl:"api/get-pages-data"}),beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),action:this.trans("actions"),status:this.trans("status"),created_at:this.trans("created_at")},columnsClasses:{name:"page-name",action:"page-action",created_at:"page-created",status:"page-status"},templates:{status:function(t,a){let c=e.h("span",{class:a.status===1?"btn btn-success btn-xs":"btn btn-danger btn-xs"},a.status===1?"published":"draft");return e.h("a",{},[c])},action:(t,a)=>e.h(oe,{data:a}),created_at(t,a){return e.formattedTime(a.created_at)}},sortable:["name","status","created_at"],filterable:["name","status","created_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.client_view_url=a.status?e.basePath()+"/pages/"+a.slug:"javascript:;",a.edit_url="/page/"+a.id+"/edit",a.delete_url="/page/delete/"+a.id,a)),count:t.message.total}}}}},_2={id:"pages-index",class:"col-sm-12"},m2={class:"card card-light"},p2={class:"card-header"},g2={class:"card-title"},f2={class:"card-tools"},b2=s("i",{class:"glyphicon glyphicon-plus"},null,-1),y2={class:"card-body",id:"my_pages"};function v2(e,t,a,c,o,i){const _=h("alert"),g=h("router-link"),m=h("data-table"),f=U("tooltip");return n(),l("div",_2,[u(_,{componentName:"dataTableModal"}),s("div",m2,[s("div",p2,[s("h3",g2,r(e.lang("list_of_pages")),1),s("div",f2,[v((n(),C(g,{class:"btn-tool",to:"/page/create"},{default:y(()=>[b2]),_:1})),[[f,e.lang("create_pages")]])])]),s("div",y2,[u(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"pages-index"},null,8,["url","dataColumns","option"])])])])}const w2=T(u2,[["render",v2]]);function k2(e){const{name:t,visible_to:a,slug:c}=e;let o={name:[t,"isRequired"],visible_to:[a,"isRequired"],slug:[c,"isRequired"]};const i=new K(j),{errors:_,isValid:g}=i.validate(o);return H.dispatch("setValidationError",_),{errors:_,isValid:g}}const C2={name:"kb-page-component",description:"page create and edit page",data:()=>({showModal:!1,name:"",link:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,slug:"",radioOptions:[{name:"published",value:1},{name:"draft",value:0}],status:1,visibility_options:[{name:"public",value:1},{name:"private",value:0}],visibility:1,buttonVisible:!1,seo_title:"",meta_description:"",description:"",seoDesStyle:{width:"0%"},seoDesClass:"",seoStyle:{width:"0%"},seoClass:"",classname:"form-group",progStart:"progress-bar progress-bar-primary progress-bar-striped",progWarn:"progress-bar progress-bar-warning progress-bar-striped",progSuc:"progress-bar progress-bar-success progress-bar-striped",progDan:"progress-bar progress-bar-danger progress-bar-striped",show_err:!1,title:"create_new_page",iconClass:"fas fa-save",btnName:"save",page_id:"",modal_title:""}),beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ie(e);e.indexOf("edit")>=0?(this.title="edit_page",this.iconClass="fas fa-sync",this.btnName="update",this.buttonVisible=!0,this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,S.get("/api/edit/page/"+e).then(t=>{this.page_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.page)}).catch(t=>{L(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){this.link=e.slug,this.seoTitleProgress(e.seo_title),this.metaProgress(e.meta_description);const t=this,a=this.$data;Object.keys(e).map(c=>{a.hasOwnProperty(c)&&(t[c]=e[c])}),this.seo_title=e.seo_title===""?e.name:e.seo_title,this.meta_description=e.meta_description===""?e.description:e.meta_description},isValid(){const{errors:e,isValid:t}=k2(this.$data);return!!t},modalMethod(e){this.showModal=!0,this.$store.dispatch("unsetValidationError")},onSubmit(){if(this.classname=this.description===""?"form-group has-error":"form-group",this.show_err=this.description==="",this.isValid()&&this.description!=""){this.loadingSpeed=8e3,this.loading=!0;var e=new FormData;this.page_id!=""&&e.append("pageid",this.page_id),e.append("name",this.name),e.append("slug",this.link),e.append("description",this.description),e.append("visibility",this.visibility),e.append("status",this.status),e.append("seo_title",this.seo_title),e.append("meta_description",this.meta_description);const t={headers:{"Content-Type":"multipart/form-data"}};S.post("/api/page/create",e,t).then(a=>{this.loading=!1,V(a,"page-create"),this.page_id===""?setTimeout(()=>this.$router.push({name:"KB Pages Index"}),3e3):this.getInitialValues(this.page_id)}).catch(a=>{this.loading=!1,L(a,"page-create")})}},onChange(e,t){if(this[t]=e,t==="name"||t==="slug"){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),c=a.replace(/_+/g,"");this.link=c.replace(/\s+/g,"-"),this.slug=e}t==="seo_title"&&this.seoTitleProgress(e),t==="meta_description"&&this.metaProgress(e)},seoTitleProgress(e){this.seoStyle.width=e.length/.6+"%";var t=e.length;this.seoClass=t>60?this.progDan:t>25&&t<=50?this.progSuc:t>50&&t<=60?this.progWarn:this.progStart},metaProgress(e){this.seoDesStyle.width=e.length/1.6+"%";var t=e.length;this.seoDesClass=t>160?this.progDan:t>80&&t<=120?this.progSuc:t>120&&t<=160?this.progWarn:this.progStart},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":te,"perma-link":Ie,"add-media":je,"radio-button":ne,"static-select":ye,"page-modal":Ce}},D2={class:"col-sm-12"},M2={key:0,class:"row"},S2={key:1,class:"card card-light"},I2={class:"card-header"},T2={class:"card-title"},A2={class:"card-tools"},O2=["href","target","disabled"],L2=s("i",{class:"fas fa-eye"},null,-1),P2=[L2],U2=s("i",{class:"fas fa-trash"},null,-1),$2=[U2],F2={class:"card-body"},V2={class:"row"},q2={class:"ml_7"},E2={class:"row"},R2={class:"card card-light"},z2={class:"card-header"},B2={class:"card-title"},N2={class:"card-body"},j2={class:"row"},W2={class:"progress sm col-md-12 p-0",id:"prog"},K2={class:"row"},H2={class:"progress sm col-md-12 p-0",id:"prog"},Y2={class:"card-footer"},x2=["disabled"];function J2(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("text-field"),f=h("perma-link"),w=h("add-media"),D=h("radio-button"),A=h("page-modal"),k=U("tooltip"),b=U("focus-first-input");return n(),l("div",D2,[!e.hasDataPopulated||e.loading?(n(),l("div",M2,[u(_,{duration:e.loadingSpeed},null,8,["duration"])])):d("",!0),u(g,{componentName:"page-create"}),e.hasDataPopulated===!0?(n(),l("div",S2,[s("div",I2,[s("h3",T2,r(e.lang(e.title)),1),s("div",A2,[e.buttonVisible?v((n(),l("a",{key:0,id:"view_page",class:"btn btn-tool",type:"button",href:e.status?e.basePath()+"/pages/"+e.link:"javascript:;",target:e.status?"_blank":"",disabled:!e.status},P2,8,O2)),[[k,e.lang("view")]]):d("",!0),e.buttonVisible?v((n(),l("button",{key:1,id:"delete_page",class:"btn btn-tool",type:"button",onClick:t[0]||(t[0]=F=>i.modalMethod("delete_page"))},$2)),[[k,e.lang("delete")]]):d("",!0)])]),s("div",F2,[v((n(),l("div",V2,[u(m,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(f,{label:e.lang("perma_link"),value:e.slug,name:"slug",onChange:i.onChange,classname:"col-sm-6",required:!0,link:e.link},null,8,["label","value","onChange","link"])])),[[b]]),s("div",q2,[u(w,{description:e.description,classname:e.classname,show_error:e.show_err,page_name:"page",name:"description",onInput:i.onChange,chunkApi:"/chunk/upload/public",filesApi:"/media/files/public"},null,8,["description","classname","show_error","onInput"])]),s("div",E2,[u(D,{options:e.visibility_options,label:e.lang("visibility"),name:"visibility",value:e.visibility,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),u(D,{options:e.radioOptions,label:e.lang("status"),name:"status",value:e.status,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",R2,[s("div",z2,[s("h3",B2,r(e.lang("seo")),1)]),s("div",N2,[s("div",j2,[u(m,{label:e.lang("seo_title"),value:e.seo_title,type:"text",name:"seo_title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),s("div",W2,[s("div",{class:O(e.seoClass),style:N(e.seoStyle)},null,6)])]),s("div",K2,[u(m,{label:e.lang("description"),value:e.meta_description,type:"textarea",name:"meta_description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),s("div",H2,[s("div",{class:O(e.seoDesClass),style:N(e.seoDesStyle)},null,6)])])])])]),s("div",Y2,[s("button",{type:"button",onClick:t[1]||(t[1]=(...F)=>i.onSubmit&&i.onSubmit(...F)),disabled:e.loading,class:"btn btn-primary"},[s("span",{class:O(e.iconClass)},null,2),p(" "+r(e.lang(e.btnName)),1)],8,x2)]),u(R,{name:"modal"},{default:y(()=>[e.showModal?(n(),C(A,{key:0,onClose:i.onClose,showModal:e.showModal,apiUrl:"/page/delete/"+e.page_id,alert:"page-create",redirectUrl:"/page"},null,8,["onClose","showModal","apiUrl"])):d("",!0)]),_:1})])):d("",!0)])}const Ze=T(C2,[["render",J2]]);const G2={name:"search-result",components:{"status-switch":Se},data(){return{searchResults:"",tabs:[],tab:this.$route&&this.$route.query&&this.$route.query.type,loading:!0,next_cursor:"",selectAllText:"",tickets:[],contacts:[],articles:[],filterParams:[],searchedText:"",showLoader:!1,searchBy:[],apiUrl:"",ticketCount:"",contactCount:"",articleCount:""}},beforeMount(){this.$route&&this.$route.query&&this.$route.query.type&&this.getCountsAndData()},mounted(){this.updateSelectAllText(),this.$nextTick(()=>{this.$refs.searchInput&&setTimeout(()=>{this.$refs.searchInput.focus()},100)})},computed:{...at(["formattedDate"])},methods:{preventToCloseBox(e){e.stopPropagation()},subString(e,t=30){return X(e,t)},callFilterData(){this.getFilterParams(),this.updateSelectAllText()},onChange(e,t){this[t]=e;const a=this.searchBy.find(c=>c.id===t);if(a)if(e)this.filterParams.includes(a.id)||this.filterParams.push(a.id);else{const c=this.filterParams.indexOf(a.id);c>-1&&this.filterParams.splice(c,1)}this.updateSelectAllText()},toggleSelectAll(){this.selectAllText==="Select All"?(this.selectAllText="Deselect All",this.searchBy.forEach(e=>{e.is_selected=!0,this.filterParams.includes(e.id)||this.filterParams.push(e.id)})):(this.selectAllText="Select All",this.searchBy.forEach(e=>{e.is_selected=!1;const t=this.filterParams.indexOf(e.id);t>-1&&this.filterParams.splice(t,1)}))},updateSelectAllText(){this.filterParams.length===0?this.selectAllText="Select All":this.filterParams.length===this.searchBy.length?this.selectAllText="Deselect All":this.selectAllText="Deselect All"},getFilterParams(){this.showLoader=!0,S.get("/agent/search-preferences").then(e=>{this.searchBy=e.data.data,this.showLoader=!1,this.filterParams=[];for(const t of this.searchBy)t.is_selected&&this.filterParams.push(t.id);this.updateSelectAllText()}).catch(e=>{this.showLoader=!1,L(e)})},saveFilters(){this.searchedText===""&&this.$route.query.endpoint===""&&(this.tabs=[{id:"tickets",title:"Tickets",count:0},{id:"contacts",title:"Contacts",count:0},{id:"articles",title:"Articles",count:0}],this.ticketCount=0,this.contactCount=0,this.articleCount=0);const e={"filter-ids":[...this.filterParams]};this.loading=!0,S.post("/agent/search-preferences",e).then(t=>{this.loading=!1,this.searchedText.length===0&&this.$route&&this.$route.query&&this.$route.query.type?(this[this.tab]=[],this.getCountsAndData()):this.searchData(),V(t,"search-result")}).catch(t=>{this.loading=!1,L(t,"search-result")})},async getCountsAndData(){try{await this.getCounts(),await this.getDataFromServer()}catch(e){this.handleError(e)}},async getCounts(){try{if(this.loading=!0,this.searchedText){let t=encodeURIComponent(this.searchedText);this.apiUrl=`/search-all?search-query=${t}`}else this.$route.query.endpoint=this.$route.query.endpoint.replace(`category[]=${this.$route.query.type}`,""),this.apiUrl=this.$route.query.endpoint;const e=await S.get(this.apiUrl);this.searchResults=e.data.data,this.ticketCount=this.searchResults.tickets?this.searchResults.tickets.total:0,this.contactCount=this.searchResults.contacts?this.searchResults.contacts.total:0,this.articleCount=this.searchResults.articles?this.searchResults.articles.total:0,this.tabs=[{id:"tickets",title:"Tickets",count:this.searchResults.tickets?this.searchResults.tickets.total:0},{id:"contacts",title:"Contacts",count:this.searchResults.contacts?this.searchResults.contacts.total:0},{id:"articles",title:"Articles",count:this.searchResults.articles?this.searchResults.articles.total:0}],this.loading=!1}catch(e){this.loading=!1,L(e)}},searchData(){this.searchedText.length>0&&(this.$route.query.endpoint="",this[this.tab]=[],this.next_cursor="",this.getCountsAndData())},loadData(e){e!==this.tab&&(this.tab=e,this.next_cursor="",this.tickets=[],this.contacts=[],this.articles=[],this.searchedText===""&&this.$route.query.endpoint===""&&(this.tabs=[{id:"tickets",title:"Tickets",count:0},{id:"contacts",title:"Contacts",count:0},{id:"articles",title:"Articles",count:0}],this.ticketCount=0,this.contactCount=0,this.articleCount=0),(this.searchedText||this.$route.query.endpoint)&&this.getCountsAndData())},async getDataFromServer(e){try{this.loading=!0;let t={cursor:this.next_cursor};if(this.searchedText){let o=encodeURIComponent(this.searchedText);this.apiUrl=`/search-all?search-query=${o}&category[]=${this.tab}`}else this.$route.query.endpoint=this.$route.query.endpoint.replace(`category[]=${this.$route.query.type}`,""),this.apiUrl=this.$route.query.endpoint,t["category[]"]=this.tab;const a=await S.get(this.apiUrl,{params:t}),c=a.data.data[this.tab].data.data;this[this.tab].push(...c),e&&e.loaded(),c.length<10&&e&&e.complete(),this.next_cursor=a.data.data[this.tab].data.next_cursor,this.loading=!1}catch{this[this.tab]=[],this.loading=!1}}}},J=e=>(q("data-v-549ec731"),e=e(),E(),e),Q2={class:"col-sm-12 mb-2"},Z2={class:"input-group input-group-lg"},X2=["placeholder"],eM={class:"input-group-append search-icon"},tM=J(()=>s("i",{class:"fa fa-search"},null,-1)),sM=[tM],aM={class:"col-sm-12"},oM={key:0,class:"row"},nM={class:"card card-light"},iM={class:"card-body"},lM={class:"nav nav-tabs",role:"tablist"},rM={class:"nav-item text-md"},dM=["onClick"],cM={class:"badge bg-yellow"},hM={id:"filter-list",class:"search-filter"},uM={class:"btn-group float-right"},_M=J(()=>s("i",{class:"fas fa-cog filter-icon pt-2"},null,-1)),mM=[_M],pM={class:"dropdown-menu dropdown-menu-xl dropdown-menu-right dropdown-position"},gM={key:0,class:"mb-1 mt-1"},fM={key:1,class:"card search-by"},bM={class:"card-body pt-2 pb-2 pr-1"},yM={class:"scrollable-ul",id:"activity_scroll"},vM=J(()=>s("hr",null,null,-1)),wM={class:"card-footer p-2"},kM=J(()=>s("i",{class:"fas fa-save"},null,-1)),CM={class:"btn btn-default pt-1 pb-1"},DM=J(()=>s("i",{class:"fas fa-times"},null,-1)),MM={class:"tab-content"},SM={class:"active tab-pane mt-4 scrollable-area"},IM={class:"row ticket-box"},TM={class:"col-md-12 col-sm-12 col-12"},AM={id:"tickets-expanded"},OM={class:"unanswered"},LM={id:"ticket_user",style:{width:"1%"}},PM={class:"user-image"},UM={class:"name td-ticket-details"},$M={class:"text-gray"},FM={key:0,class:"text-primary"},VM={class:"text-primary"},qM={class:"td-ticket-status hideForList"},EM={class:"source-icon hideForList text-muted text-xs"},RM=J(()=>s("i",{class:"far fa-clock mr-1"},null,-1)),zM=J(()=>s("span",null,null,-1)),BM=J(()=>s("span",null,null,-1)),NM={key:1,class:"text-center"},jM={class:"mailbox-messages mailinbox"},WM={class:"row ticket-box"},KM={class:"col-md-12 col-sm-12 col-12"},HM={id:"tickets-expanded"},YM={class:"unanswered"},xM={id:"ticket_user",style:{width:"1%"}},JM={class:"user-image"},GM={class:"name td-ticket-emails"},QM={class:"text-gray"},ZM={class:"td-username"},XM={class:"text-primary"},eS={class:"source-icon hideForList text-muted text-xs"},tS=J(()=>s("i",{class:"far fa-clock mr-1"},null,-1)),sS=J(()=>s("span",null,null,-1)),aS=J(()=>s("span",null,null,-1)),oS={key:1,class:"text-center"},nS={class:"row ticket-box"},iS={class:"col-md-12 col-sm-12 col-12"},lS={id:"tickets-expanded"},rS={class:"unanswered"},dS=J(()=>s("td",{id:"ticket_user",style:{width:"1%"}},[s("a",{href:"javascript:;"},[s("span",{class:"fa-stack fa-2x"},[s("i",{class:"fas fa-newspaper fa-stack-1x"})])])],-1)),cS={class:"name td-ticket-details articles"},hS=["href"],uS={class:"text-primary"},_S={class:"source-icon hideForList text-muted text-xs"},mS=J(()=>s("i",{class:"far fa-clock mr-1"},null,-1)),pS=J(()=>s("span",null,null,-1)),gS=J(()=>s("span",null,null,-1)),fS={key:1,class:"text-center"};function bS(e,t,a,c,o,i){const _=h("alert"),g=h("custom-loader"),m=h("reuse-loader"),f=h("status-switch"),w=h("faveo-image-element"),D=h("router-link"),A=h("infinite-loading"),k=U("tooltip");return n(),l(M,null,[s("div",Q2,[u(_,{componentName:"search-result"}),s("div",Z2,[v(s("input",{"onUpdate:modelValue":t[0]||(t[0]=b=>o.searchedText=b),type:"search",ref:"searchInput",class:"form-control form-control-lg",placeholder:e.trans("search"),onKeyup:t[1]||(t[1]=Re(b=>i.searchData(),["enter"])),autofocus:""},null,40,X2),[[de,o.searchedText,void 0,{trim:!0}]]),s("div",eM,[s("button",{type:"submit",class:"btn btn-lg btn-default",onClick:t[2]||(t[2]=b=>i.searchData())},sM)])])]),s("div",aM,[o.loading?(n(),l("div",oM,[u(g,{duration:4e3})])):d("",!0),s("div",nM,[s("div",iM,[s("ul",lM,[(n(!0),l(M,null,P(o.tabs,b=>(n(),l("li",rM,[s("a",{class:O(["nav-link",{active:e.$route.query.type===b.id}]),"data-toggle":"pill",role:"tab",href:"javascript:;",onClick:F=>i.loadData(b.id)},[p(r(b.title)+" ",1),s("span",cM,r(b.count),1)],10,dM)]))),256)),s("div",hM,[s("div",uM,[s("span",{type:"button",class:"dropdown-toggle pr-4","data-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu",onClick:t[3]||(t[3]=b=>i.callFilterData())},mM),s("div",pM,[o.showLoader?(n(),l("div",gM,[u(m,{"animation-duration":6e3,size:30})])):d("",!0),o.showLoader?d("",!0):(n(),l("div",fM,[s("div",{class:"card-header",onClick:t[5]||(t[5]=(...b)=>i.preventToCloseBox&&i.preventToCloseBox(...b))},[s("div",null,[s("b",null,r(e.trans("search_by")),1),p(),s("a",{class:"select-btn float-right",onClick:t[4]||(t[4]=(...b)=>i.toggleSelectAll&&i.toggleSelectAll(...b))},r(o.selectAllText),1)])]),s("div",bM,[s("div",yM,[(n(!0),l(M,null,P(o.searchBy,b=>(n(),l("div",{key:b,onClick:t[6]||(t[6]=(...F)=>i.preventToCloseBox&&i.preventToCloseBox(...F))},[p(r(b.label)+" ",1),u(f,{name:b.id,onChange:i.onChange,value:b.is_selected,classname:"toggle_button float-right"},null,8,["name","onChange","value"]),p(),vM]))),128))])]),s("div",wM,[s("div",{class:"btn btn-primary float-right pt-1 pb-1",onClick:t[7]||(t[7]=b=>i.saveFilters())},[kM,p(" "+r(e.trans("save")),1)]),s("div",CM,[DM,p(" "+r(e.trans("cancel")),1)])])]))])])])]),s("div",MM,[s("div",SM,[o.tab==="tickets"?(n(),l(M,{key:0},[o.tickets&&o.tickets.length?(n(),l(M,{key:0},[(n(!0),l(M,null,P(o.tickets,b=>(n(),l("div",{key:b,class:"mailbox-messages mailinbox"},[s("div",IM,[s("div",TM,[s("table",AM,[s("tbody",null,[s("tr",OM,[s("td",LM,[s("div",PM,[u(w,{id:"size-30","source-url":b.user.profile_pic,"img-width":35,"img-height":35,"alternative-text":"User Image"},null,8,["source-url"])])]),s("td",UM,[v((n(),C(D,{to:b.view_url,id:"first_thread_title"},{default:y(()=>[s("span",$M," [#"+r(b.ticket_number)+"]",1),p("   "),b.first_thread&&b.first_thread.title?(n(),l("span",FM,r(b.first_thread.title.length>30?b.first_thread.title.substring(0,30)+"...":b.first_thread&&b.first_thread.title?b.first_thread.title:"---"),1)):d("",!0),s("span",VM," ("+r(b.thread_count)+") ",1)]),_:2},1032,["to"])),[[k,b.first_thread&&b.first_thread.title?b.first_thread.title:"---"]])]),s("td",qM,[s("span",{class:"badge text-white font-weight-lighter",style:N({background:b.priority.priority_color+"!important"})},r(b.priority.name),5)]),s("td",null,[v(s("i",{class:O(b.statuses.icon),id:"ticket-source-icon",style:N({color:b.statuses.icon_color})},null,6),[[k,e.lang("ticket_is")+b.statuses.name]]),v(s("i",{class:O([b.sources.css_class,"pl-3"]),id:"ticket-source-icon"},null,2),[[k,e.lang("ticket_is_generated_via")+b.sources.name]])]),s("td",EM,[RM,p(r(e.formattedDate(b.created_at)),1)])])])])])])]))),128)),o.next_cursor?(n(),C(A,{key:0,onInfinite:i.getDataFromServer},{spinner:y(()=>[zM]),complete:y(()=>[BM]),_:1},8,["onInfinite"])):d("",!0)],64)):d("",!0),!o.loading&&o.ticketCount===0?(n(),l("div",NM,r(e.trans("no-records")),1)):d("",!0)],64)):d("",!0),o.tab==="contacts"?(n(),l(M,{key:1},[o.contacts&&o.contacts.length?(n(),l(M,{key:0},[(n(!0),l(M,null,P(o.contacts,b=>(n(),l("div",jM,[s("div",WM,[s("div",KM,[s("table",HM,[s("tbody",null,[s("tr",YM,[s("td",xM,[s("div",JM,[u(w,{id:"size-30","source-url":b.profile_pic,"img-width":35,"img-height":35,"alternative-text":"User Image"},null,8,["source-url"])])]),s("td",GM,[u(D,{to:b.view_url,id:"contact_name"},{default:y(()=>[s("span",QM,"["+r(b.email?b.email:b.user_name?b.user_name.slice(0,12)+"...":b.user_name)+"]",1),p("   ")]),_:2},1032,["to"])]),s("td",ZM,[u(D,{to:b.view_url,id:"contact_name"},{default:y(()=>[v((n(),l("span",XM,[p(r(b.full_name),1)])),[[k,b.full_name]])]),_:2},1032,["to"])]),s("td",null,[v(s("i",{class:O([{success:b.email_verified===!0,danger:b.email_verified===!1},"fas fa-envelope"]),id:"ticket-source-icon"},null,2),[[k,b.email_verified===!0?e.lang("user email is verified"):e.lang("user has not verified email")]]),v(s("i",{class:O([{success:b.mobile_verified===!0,danger:b.mobile_verified===!1},"fas fa-mobile-alt pl-3"]),id:"ticket-source-icon"},null,2),[[k,b.mobile_verified===!0?e.lang("user mobile is verified"):e.lang("user has not verified mobile")]])]),s("td",eS,[tS,p(r(e.formattedDate(b.created_at)),1)])])])])])])]))),256)),o.next_cursor?(n(),C(A,{key:0,onInfinite:i.getDataFromServer},{spinner:y(()=>[sS]),complete:y(()=>[aS]),_:1},8,["onInfinite"])):d("",!0)],64)):d("",!0),!o.loading&&o.contactCount===0?(n(),l("div",oS,r(e.trans("no-records")),1)):d("",!0)],64)):d("",!0),o.tab==="articles"?(n(),l(M,{key:2},[o.articles&&o.articles.length?(n(),l(M,{key:0},[(n(!0),l(M,null,P(o.articles,b=>(n(),l("div",{key:b,class:"mailbox-messages mailinbox"},[s("div",nS,[s("div",iS,[s("table",lS,[s("tbody",null,[s("tr",rS,[dS,s("td",cS,[s("a",{href:e.basePath()+b.view_url,target:"_blank"},[v((n(),l("span",uS,[p(r(b.name),1)])),[[k,b.name]])],8,hS)]),s("td",_S,[mS,p(r(e.formattedDate(b.publish_time)),1)])])])])])])]))),128)),o.next_cursor?(n(),C(A,{key:0,onInfinite:i.getDataFromServer},{spinner:y(()=>[pS]),complete:y(()=>[gS]),_:1},8,["onInfinite"])):d("",!0)],64)):d("",!0),!o.loading&&o.articleCount===0?(n(),l("div",fS,r(e.trans("no-records")),1)):d("",!0)],64)):d("",!0)])])])])])],64)}const yS=T(G2,[["render",bS],["__scopeId","data-v-549ec731"]]);function vS(e){let t={schedule:[e.schedule,"isRequired"],delivery_time:[e.delivery_time,"isRequired"],notify_persons:[e.notify_persons,"isRequired"],subject:[e.subject,"isRequired"]};e.schedule!=="daily"&&(t.day=[e.day,"isRequired"]);const a=new K(j),{errors:c,isValid:o}=a.validate(t);return H.dispatch("setValidationError",c),{errors:c,isValid:o}}const wS={name:"CreateEditSchedule",components:{TreeSelect:Ve,"dynamic-select":Q,"date-time-field":ve,"static-select":ye,"text-field":te,"radio-button":ne,"status-switch":Se},props:{auth:{type:Object,default:()=>{}}},data(){return{moment:G,hasDataPopulated:!1,loading:!1,schedule_List:[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],schedule:"daily",timeOptions:{start:"00:00:00",step:"00:30:00",end:"23:30:00"},delivery_time:"",day_List:[{id:"Monday",name:"Monday"},{id:"Tuesday",name:"Tuesday"},{id:"Wednesday",name:"Wednesday"},{id:"Thursday",name:"Thursday"},{id:"Friday",name:"Friday"},{id:"Saturday",name:"Saturday"},{id:"Sunday",name:"Sunday"}],day:[],Monthly:[...Array.from({length:31},(e,t)=>({id:(t+1).toString(),name:(t+1).toString()}))],subject:"",description:"",notify_persons:[],exportOptions:[{name:"CSV",value:"csv"},{name:"Excel",value:"xlsx"}],ext:"csv",labelStyle:{display:"none"},url:"",btnName:"save",title:"create_schedule",iconClass:"fas fa-save",scheduledData:[],scheduleId:"",reportId:"",notifyPerson:!1,edit:!1,clearable:!0,status:!0,hideExt:!1}},beforeMount(){const t=window.location.href.split("/");this.notify_persons=[{id:this.auth.user_data.id,name:this.auth.user_data.first_name+" "+this.auth.user_data.last_name,email:this.auth.user_data.email,profile_pic:this.auth.user_data.profile_pic}],this.scheduleId=ie(this.currentPath());let a;t.includes("edit")?(this.edit=!0,a=t[t.length-4],this.reportId=t[t.length-3],this.url="api/schedule-report/"+this.reportId,this.btnName="update",this.title="edit_schedule",this.iconClass="fas fa-sync",this.hasDataPopulated=!1,this.getInitialValues()):(this.url="api/schedule-report/"+this.scheduleId,this.hasDataPopulated=!0,this.loading=!1,a=t[t.length-2]),this.reportType=a;var c=this.reportType.split("-");this.subject=c.map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),this.description=`Here is your ${this.schedule.replace(/^\w/,o=>o.toUpperCase())} ${this.subject}`,this.scheduledData=this.$route.query.params,this.hideExt=!!this.$route.query.type},methods:{onChange(e,t){this[t]=e,t==="schedule"&&(e==="weekly"||e==="monthly")&&(this.day=[])},onChangeDeliveryTime(e){const t=G(e,"HH:mm");this.delivery_time=t},isValid(){const{errors:e,isValid:t}=vS(this.$data);return t},getInitialValues(){this.loading=!0,axios.get("get/individual_schedule_report/"+this.scheduleId).then(e=>{this.loading=!1,this.hasDataPopulated=!0;let t=e.data.data;this.subject=t.subject,this.description=t.description,this.schedule=t.type,this.execution_time=t.execution_time,this.hideExt=t.extension==="pdf",this.ext=t.extension,this.day=t.periods,this.status=t.status,this.notify_persons=t.notify_persons,this.delivery_time=G(t.execution_time,"YYYY-MM-DDTHH:mm:ss.SSSSSS[Z]")}).catch(e=>{L(e,"CreateEditSchedule"),this.loading=!1})},onSubmit(){if(this.isValid()){this.loading=!0;const e=new Date(this.delivery_time),t={hour:"2-digit",minute:"2-digit",hour12:!1},a=e.toLocaleTimeString("en-US",t),c=new FormData,o={type:this.schedule,execution_time:a,subject:this.subject,description:this.description,extension:this.hideExt?"pdf":this.ext,status:this.status?1:0};for(const _ in o)c.append(_,o[_]);this.scheduledData&&c.append("payload",this.scheduledData),this.schedule==="daily"&&c.append("periods[0]",this.schedule);let i=!1;if(this.notify_persons&&Object.keys(this.notify_persons).length>0)for(const _ in this.notify_persons)this.notify_persons[_].id&&typeof this.notify_persons[_].id=="number"&&(i=!0,c.append(`notify_persons[${_}]`,this.notify_persons[_].id));if(i||c.append("notify_persons[0]",this.notify_persons.id),this.schedule!=="daily"&&this.day!=="")for(const _ in this.day)this.day[_].id&&(typeof this.day[_].id=="string"||typeof this.day[_].id=="number")&&c.append(`periods[${_}]`,this.day[_].id);this.edit&&c.append("id",this.scheduleId),axios.post(this.url,c).then(_=>{V(_,"CreateEditSchedule"),this.loading=!1,setTimeout(()=>{this.$router.push({name:"AllScheduleList"})},3e3)}).catch(_=>{L(_,"CreateEditSchedule"),this.loading=!1})}}}},kS={class:"col-sm-12"},CS={key:0,class:"row"},DS={key:1,class:"card card-light"},MS={class:"card-header"},SS={class:"card-title"},IS={class:"card-body"},TS={class:"row"},AS={class:"row"},OS={key:0,class:"col-sm-6"},LS={for:"status"},PS={class:"card-footer"};function US(e,t,a,c,o,i){const _=h("custom-loader"),g=h("alert"),m=h("static-select"),f=h("tree-select"),w=h("date-time-field"),D=h("dynamic-select"),A=h("text-field"),k=h("tiny-editor"),b=h("radio-button"),F=h("status-switch"),z=U("focus-first-input");return n(),l("div",kS,[!o.hasDataPopulated||o.loading?(n(),l("div",CS,[u(_,{duration:4e3})])):d("",!0),u(g,{componentName:"CreateEditSchedule"}),o.hasDataPopulated?(n(),l("div",DS,[s("div",MS,[s("div",SS,r(e.trans(o.title)),1)]),s("div",IS,[v((n(),l("div",TS,[u(m,{label:e.trans("schedule_by"),elements:o.schedule_List,"hide-empty-select":!0,name:"schedule",value:o.schedule,classname:"col-sm-6",onChange:i.onChange},null,8,["label","elements","value","onChange"]),o.schedule==="weekly"?(n(),C(f,{key:0,name:"day",label:e.trans("weekly"),elements:o.day_List,multiple:!0,classname:"col-sm-6",required:!0,onChange:i.onChange,value:o.day,valueFormat:"array",strlength:"50"},null,8,["label","elements","onChange","value"])):d("",!0),o.schedule==="monthly"?(n(),C(f,{key:1,name:"day",label:e.trans("monthly"),elements:o.Monthly,multiple:!0,classname:"col-sm-6",required:!0,onChange:i.onChange,value:o.day,valueFormat:"array"},null,8,["label","elements","onChange","value"])):d("",!0),u(w,{label:e.trans("execute_at"),value:o.moment(o.delivery_time,"HH:mm"),required:!0,name:"delivery_time",type:"time",onChange:i.onChangeDeliveryTime,"time-picker-options":o.timeOptions,format:"HH:mm",place:"select_time_to_generate_report",checkManual:!0,classname:"col-sm-6"},null,8,["label","value","onChange","time-picker-options"]),u(D,{label:e.trans("notify_assign"),multiple:!0,required:!0,name:"notify_persons",classname:"col-sm-6",apiEndpoint:"/api/dependency/agents?meta=true",value:o.notify_persons,onChange:i.onChange,strlength:"25",auth:a.auth},null,8,["label","value","onChange","auth"])])),[[z]]),u(A,{label:e.trans("subject"),value:o.subject,type:"text",name:"subject",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"]),u(k,{value:o.description,type:"text",onChange:i.onChange,name:"description",label:e.lang("description"),classname:"col-sm-12",required:!0,lang:"en",id:"problem_editor"},null,8,["value","onChange","label"]),s("div",AS,[o.hideExt?d("",!0):(n(),l("div",OS,[u(b,{label:e.trans("export_as:"),onChange:i.onChange,options:o.exportOptions,required:!0,value:o.ext,name:"ext"},null,8,["label","onChange","options","value"])])),s("div",{class:O(["col-sm-6",o.hideExt?"pl-3":""])},[s("label",LS,r(e.trans("status")),1),u(F,{name:"status",value:o.status,onChange:i.onChange,bold:!0},null,8,["value","onChange"])],2)])]),s("div",PS,[s("button",{type:"button",onClick:t[0]||(t[0]=Y=>i.onSubmit()),class:"btn btn-primary"},[s("i",{class:O(o.iconClass)},null,2),p(" "+r(e.trans(o.btnName)),1)])])])):d("",!0)])}const Xe=T(wS,[["render",US],["__scopeId","data-v-1ad7227e"]]);let $S={path:"/canned",component:le,name:"CannedResponse",redirect:"/canned/list",children:[{path:"list",name:"Canned Response Index",component:Dv,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},active:"canned_response"}}},{path:"create",name:"Canned Response Create",component:xe,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"canned_response",to:"/canned"},active:"create"}}},{path:":id/edit",name:"Canned Response Edit",component:xe,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"canned_response",to:"/canned"},active:"edit"}}}]},FS={path:"/category",component:le,name:"Category",redirect:"/category/list",children:[{path:"list",name:"KB Category Index",component:KD,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},active:"category"}}},{path:"create",name:"KB Category Create",component:Qe,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"category",to:"/category"},active:"create"}}},{path:":id/edit",name:"KB Category Edit",component:Qe,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"category",to:"/category"},active:"edit"}}}]},VS={path:"/article",component:le,name:"Knowledgebase",redirect:"/article/list",children:[{path:"list",name:"KB Article",component:Mw,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},active:"article"}}},{path:"create",name:"KB Article Create",component:Je,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"create"}}},{path:":id/edit",name:"KB Article Edit",component:Je,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"edit"}}},{path:"revision/:articleId/:versionId",name:"KB Article Revision",component:B0,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"revisions"}}},{path:"comment",name:"KB Article Comments",component:jC,props:!0,meta:{title:"comments",crumb:{link:{name:"dashboard",to:"/"},active:"comments"}}},{path:"create/template",name:"KB Article Template Create",component:Ge,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article_template",to:"/article/alltemplate/list"},active:"create"}}},{path:"template/:id/edit",name:"KB Article Template Edit",component:Ge,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article_template",to:"/article/alltemplate/list"},active:"edit"}}},{path:"alltemplate/list",name:"KB Article Template List",component:pD,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},active:"article_template"}}}]},qS={path:"/page",component:le,name:"KB Page",redirect:"/page/list",children:[{path:"list",name:"KB Pages Index",component:w2,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},active:"pages"}}},{path:"create",name:"KB Page Create",component:Ze,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"pages",to:"/page"},active:"create"}}},{path:":id/edit",name:"KB Page Edit",component:Ze,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"pages",to:"/page"},active:"edit"}}}]},ES={path:"/kb",component:le,name:"Knowledgebase Settings",redirect:"/kb/settings",children:[{path:"settings",name:"KB Settings",component:FD,meta:{title:"kb-settings",crumb:{link:{name:"dashboard",to:"/"},active:"settings"}}}]},RS={path:"/user",component:le,name:"Users",redirect:"/user/list",children:[{path:"list",name:"User Directory",component:vh,meta:{title:"user_directory",crumb:{link:{name:"dashboard",to:"/"},active:"user_directory"}}},{path:"create",name:"User Create",component:me,props:{category:"requester",panel:"agent"},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"create"}}},{path:"export",name:"User Export",component:Uh,meta:{title:"export_user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"export_user"}}},{path:":id",name:"User View",component:bt,meta:{title:"profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"viewing_as_user_profile"}}},{path:":id/edit",name:"User Edit",component:me,props:{category:"requester",panel:"agent",showViewButton:!0},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"edit"}}}]},zS={path:"/organizations",component:le,name:"Organizations",redirect:"/organizations/list",children:[{path:"list",name:"Organization Directory",component:Lg,meta:{title:"organization_directory",crumb:{link:{name:"dashboard",to:"/"},active:"organization_directory"}}},{path:"create",name:"Organization Create",component:me,props:{category:"organisation",panel:"agent"},meta:{title:"organisation",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"create"}}},{path:":id",name:"Organization View",component:mv,meta:{title:"organization_profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"organization_profile"}}},{path:":id/edit",name:"Organizations Edit",component:me,props:{category:"organisation",panel:"agent",showViewButton:!0},meta:{title:"organisation",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"edit"}}}]},BS={path:"/reports/schedule/",component:le,name:"Schedule",redirect:"add/:type/:id",children:[{path:"add/:type/:id",name:"Schedule Add",component:Xe,meta:{title:"Schedule",crumb:{link:{name:"dashboard",to:"/"},active:"create"}}},{path:":type/:id/edit/:id",name:"Schedule Edit",component:Xe,meta:{title:"Schedule",crumb:{link:{name:"dashboard",to:"/"},active:"edit"}}}]},NS=[{path:"/",component:le,redirect:"/dashboard",name:"Dashboard Layout",children:[{path:"dashboard",name:"Dashboard",component:ad,meta:{title:"dashboard",crumb:{active:"dashboard"}}},{path:"agent/recur/list",name:"Recurring Tickets",component:Qt,meta:{title:"recurring",crumb:{link:{name:"dashboard",to:"/"},active:"ticket_recurring"}}},{path:"agent/ticket/recur",name:"Recurring Tickets Create",component:me,props:{category:"ticket",panel:"agent",scenario:"recur",recur_mode:"create"},meta:{title:"ticket_recurring",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"ticket_recurring",to:"/agent/recur/list"},active:"create"}}},{path:"agent/recur/:id/edit",name:"Recurring Tickets Edit",component:me,props:{category:"ticket",panel:"agent",scenario:"recur",recur_mode:"edit"},meta:{title:"ticket_recurring",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"ticket_recurring",to:"/agent/recur/list"},active:"edit"}}},{path:"profile",name:"Profile",component:zd,meta:{title:"view-profile",crumb:{link:{name:"dashboard",to:"/"},active:"my_profile"}}},{path:"newticket",name:"NewTicket",component:me,props:{category:"ticket",panel:"agent"},meta:{title:"tickets",crumb:{link:{name:"dashboard",to:"/"},root:"tickets",active:"create_ticket"}}},{path:"tickets",name:"Tickets Index",component:Ee,meta:{title:"",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"tickets/:type/:id",name:"Tickets widget Index",component:Ee,props:{from:"filter"},meta:{title:"from_report",crumb:{link:{name:"dashboard",to:"/"},active:"from_report"}}},{path:"thread/:id",name:"Tickets Timeline",component:_s,props:{from:"timeline"},meta:{title:"ticket-details",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"tickets/filter/:id",name:"Filter Tickets Index",component:Ee,props:{from:"filter"},meta:{title:"filter",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"agent/:id",name:"Agent View",component:bt,meta:{title:"profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"viewing_as_agent_profile"}}},{path:"agent/:id/edit",name:"Agent Edit",component:Zt,props:{isCalledFromUserDirectoryPage:!0},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"edit"}}},{path:"search-results",name:"Search Results",component:yS,meta:{title:"search",crumb:{active:"search"}}}]},RS,zS,$S,VS,ES,FS,qS,BS,{path:"/:pathMatch(.*)*",name:"404",component:Xt}];const ZS=Bt({history:Nt(),inkActiveClass:"",linkExactActiveClass:"exact-active",routes:NS,scrollBehavior(e,t,a){return{top:0}}});export{le as A,Ry as C,$c as D,Bc as S,Kc as a,kc as b,ea as c,ZS as r,lc as u};
