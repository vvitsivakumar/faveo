import{a as A,r as u,q as Z,o as l,c as i,f as a,t as n,e as d,w,i as z,n as c,y as fe,g as f,d as h,G as C,F as I,h as O,p as j,j as M,b as P,v as ct,B as qe,V as He,k as Rt,$ as W,T as te,ax as _e,ay as zt,Z as Nt,a4 as dt,K as Ut,s as Bt,az as qt,x as ut,A as Ht,a8 as Le,u as We,a1 as E,a9 as _t,a3 as Ce,m as Ke,a2 as K,a6 as Wt,av as Kt,aw as Gt}from"./vendor.js";import{V as ge,l as L,c as he,_ as S,e as B,j as Q,a1 as Ve,F as be,p as Y,D as Se,s as G,M as Ge,h as De,R as Qt,N as Jt,X as Zt,C as je,a0 as Yt,Z as Xt,G as ea,A as ta,f as Ue,k as aa,a as oa,t as Pe,a2 as sa}from"./bootstrap.js";import{v as la,R as ia,L as na}from"./LoginLogs.js";import{B as ra}from"./BarcodeModal.js";import{e as ca,D as Qe,a as lt}from"./DataTableActions.js";import{A as da,v as ua,a as ht}from"./approvalTicketRules.js";function gt(e){const{user_name:s,password:o}=e;let m={user_name:[s,"isRequired"],password:[o,"isRequired","max(50)","min(2)"]};const t=new ge(L),{errors:r,isValid:g}=t.validate(m);return he.dispatch("setValidationError",r),{errors:r,isValid:g}}const _a={name:"login-component",description:"Login fields component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,base:this.auth.system_url,providerData:[],user_name:"",password:"",redirectUrl:"",buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},linkStyle:{color:this.layout.portal.client_header_color},loads:"",loading:!1,pageLoad:!1,allow_register:this.layout.user_registration.status,locale:this.layout.language,redirectPath:"",componentName:"page-login",labelStyle:{display:"none"},remember:!0,socialLoginBoxStyle:{}}},beforeMount(){this.$Progress.start(),this.loading=!0,this.pageLoad=!0,A.get("api/active-providers").then(e=>{this.providerData=e.data.data,this.loading=!1,this.pageLoad=!1,this.$Progress.finish()}).catch(e=>{this.loading=!1,this.pageLoad=!1,this.$Progress.fail()}),window.emitter.on("login-box-loader",e=>{this.loading=e})},methods:{loginBoxVisible(){window.emitter.emit("login-box-mounted",{providerData:this.providerData,login_type:"login"})},onRegister(){this.$router.push("/auth/register")},onChange(e,s){this[s]=e},isValid(){const{errors:e,isValid:s}=gt(this.$data);return s},socialRedirect(e){window.location.href=this.base+"/social/login/redirect/"+e},oneLoginRedirect(e){window.location.href=e.login_url},onSubmit(e,s,o){if(this.isValid()){this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const m={email:this.user_name,password:this.password,remember:this.remember};m[e]=s,o&&(m.third_party_basic=o),window.emitter.emit("login-data-submitting",m),A.post("login",m).then(t=>{this.redirectUrl=t.data.data.redirect_url,this.isDisabled=!0,this.isLoginDisabled=!0,this.loading=!1,this.redirectPath=localStorage.getItem("redirectPath"),this.redirectUrl=="verify-2fa"?(this.$Progress.finish(),this.$router.push({name:"Verify2FA",params:{pp:JSON.stringify(t.data.data.PPAuth),remember:this.remember}})):this.redirectPath&&this.redirectPath.includes("/rating/")?window.location.href=this.redirectPath:this.redirectPath?window.location.href=this.base+"/mytickets":(this.$store.dispatch("setEmail",t.data.data.email),this.redirectUrl=="/"?window.location.href=this.base:this.redirectUrl.includes("verify-email")?(this.$Progress.finish(),this.$router.push({path:"/verify-email",name:"EmailVerify"})):this.redirect("/"+this.redirectUrl)),window.emitter.emit("login-success",t)}).catch(t=>{this.isDisabled=!1,this.loading=!1,B(t,this.componentName),this.$Progress.fail(),t.response&&t.response.data&&t.response.data.message["g-recaptcha-response"]&&this.$store.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:this.componentName}),window.emitter.emit("login-failure",t)})}},triggerEvent(e){var s=e.which||e.keyCode;if(s===13){window.emitter.emit("logging-in-with-enter-key");let o=document.getElementById("default-login-button");o.style.display!="none"&&o.click()}},thirdpartyLogin(e,s){window.emitter.on("login-data-submitting",o=>{e&&(o.third_party_basic=s)}),document.getElementById("default-login-button").click()},providerClass(e){return["facebook","google","github","twitter","linkedin-openid","bitbucket"].includes(e)?"btn-social":"non-social-btn"}},components:{"text-field":Q,"form-with-captcha":Ve}},ha=e=>(j("data-v-86b41c50"),e=e(),M(),e),ga={key:0,class:"col-md-6 offset-md-3 form-helper"},ma={class:"login-box",style:{width:"auto"},valign:"center"},pa={class:"form-border"},ya={class:"login_title",slot:"title"},fa={class:"row"},ba={class:"col-sm-12"},va={key:0,id:"login_loader"},ka={class:"form-group"},wa={id:"default-login"},Ca={id:"login-box"},Sa=["disabled"],Da=ha(()=>a("br",null,null,-1)),Pa=["onClick"],Ia={key:1},Aa=["onClick"],Ta=["id"],Oa=["onClick","id"],xa={key:1};function La(e,s,o,m,t,r){const g=u("text-field"),p=u("custom-loader"),b=u("router-link"),y=u("form-with-captcha"),v=Z("focus-first-input");return l(),i("div",null,[t.pageLoad?h("",!0):(l(),i("div",ga,[a("div",ma,[a("div",pa,[a("h3",ya,n(e.lang("login_to_start_your_session")),1),d(y,{btnClass:"login-button btn btn-custom btn-block btn-flat mt-2",btnStyle:t.buttonStyle,btnName:"login",iconClass:"",formSubmit:r.onSubmit,page:"login_page",componentName:t.componentName,btn_id:"default-login-button"},{fields:w(()=>[a("div",fa,[z((l(),i("div",ba,[d(g,{layout:o.layout,inputStyle:t.inputStyle,labelStyle:t.labelStyle,label:e.lang("username"),value:t.user_name,type:"text",name:"user_name",keyupListener:r.triggerEvent,onChange:r.onChange,placehold:e.lang("email_username_placeholder"),classname:"",required:!0,id:"login_form_user_name"},null,8,["layout","inputStyle","labelStyle","label","value","keyupListener","onChange","placehold"]),d(g,{labelStyle:t.labelStyle,layout:o.layout,inputStyle:t.inputStyle,label:e.lang("password"),value:t.password,type:"password",name:"password",keyupListener:r.triggerEvent,onChange:r.onChange,placehold:e.lang("password"),classname:"",required:!0,id:"login_form_password"},null,8,["labelStyle","layout","inputStyle","label","value","keyupListener","onChange","placehold"]),a("div",{class:c(["pull-left",{float1:t.locale==="ar"}]),id:"remember_me"},[z(a("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=k=>t.remember=k),name:"remember",id:"login_form_remeber"},null,512),[[fe,t.remember]]),f(" "+n(e.lang("remember")),1)],2)])),[[v]]),t.loading?(l(),i("div",va,[d(p,{duration:4e3,color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0)])]),actions:w(()=>[a("div",ka,[a("div",wa,[d(b,{to:"/password/email",id:"default-forgot-password",style:C(t.linkStyle),class:c({float1:t.locale==="ar"})},{default:w(()=>[f(n(e.lang("forgot_password"))+"? ",1)]),_:1},8,["style","class"])]),a("div",Ca,n(r.loginBoxVisible()),1),t.allow_register==1?(l(),i("button",{key:0,id:"default-register-button",class:"btn btn-custom btn-block btn-flat",onClick:s[1]||(s[1]=(...k)=>r.onRegister&&r.onRegister(...k)),style:C(t.buttonStyle),disabled:t.isDisabled},n(e.lang("create_an_account")),13,Sa)):h("",!0),Da,(l(!0),i(I,null,O(t.providerData.saml_meta_settings.directory_settings,k=>(l(),i("div",null,[a("button",{class:"btn btn-custom btn-block btn-flat",style:C(t.buttonStyle),onClick:D=>r.oneLoginRedirect(k),id:"OneLogin"},n(k.login_button_label)+" login",13,Pa)]))),256)),t.providerData.basic_auth_providers?(l(),i("div",Ia,[(l(!0),i(I,null,O(t.providerData.basic_auth_providers,k=>(l(),i("div",null,[a("button",{class:"btn btn-custom btn-block btn-flat",style:C(t.buttonStyle),onClick:D=>r.thirdpartyLogin("third_party_basic",k),id:"OneLogin"},n(k)+" login",13,Aa)]))),256))])):h("",!0),t.loading?h("",!0):(l(!0),i(I,{key:2},O(t.providerData.providers,k=>(l(),i("div",{style:C(t.socialLoginBoxStyle)},[a("ul",{class:c(["list-unstyled",{padd:t.locale==="ar"}]),style:{width:"100%"}},[a("li",{id:"social-"+k},[a("button",{class:c(["btn btn-block btn-flat",r.providerClass(k),"btn-"+(k==="linkedin-openid"?"linkedin":k)]),onClick:D=>r.socialRedirect(k),id:"client_signin_provider-"+k},[a("span",{class:c("fab fa-"+(k==="linkedin-openid"?"linkedin":k))},null,2),f(" "+n(e.lang("sign_in_with"))+" "+n(k==="linkedin-openid"?"LinkedIn":k),1)],10,Oa)],8,Ta)],2)],4))),256))])]),_:1},8,["btnStyle","formSubmit","componentName"])])])])),t.pageLoad?(l(),i("div",xa,[d(p,{duration:4e3,color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0)])}const mt=S(_a,[["render",La],["__scopeId","data-v-86b41c50"]]);const Va={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},language:{type:String,default:""}},methods:{subIsActive(e){if(e==="billing"){let s=this.$route.path.split("/");return s[s.length-1].includes(e)}}}},ja={key:0},$a={key:1};function Ma(e,s,o,m,t,r){const g=u("router-link");return l(),i("li",{class:c(["nav-item dropdown",[{active:r.subIsActive("billing")},{float:o.language=="ar"}]])},[a("a",{class:c(["dropdown-toggle nav-link",{active:r.subIsActive("billing")}]),id:"navbarDropdownBill",role:"button","data-toggle":"","aria-haspopup":"true","aria-expanded":"false"},n(e.lang("billing")),3),a("ul",{class:c(["dropdown-menu",{nav_dropdown:o.language=="ar"}]),role:"menu","aria-labelledby":"dropdownMenu",id:"bill_nav_dropdown"},[a("li",null,[d(g,{class:c(["dropdown-item",{align:o.language=="ar"}]),to:"/billing-package-list",id:"bill_purchase"},{default:w(()=>[f(n(e.lang("purchage")),1)]),_:1},8,["class"])]),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("li",ja,[d(g,{class:c(["dropdown-item",{align:o.language=="ar"}]),to:"/billing-user-packages",id:"bill_packages"},{default:w(()=>[f(n(e.lang("my_packages")),1)]),_:1},8,["class"])])),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("li",$a,[d(g,{class:c(["dropdown-item",{align:o.language=="ar"}]),to:"/billing-user-invoices",id:"bill_invoices"},{default:w(()=>[f(n(e.lang("my_invoices")),1)]),_:1},8,["class"])]))],2)],2)}const Ea=S(Va,[["render",Ma],["__scopeId","data-v-db8ac51e"]]),Fa={name:"billing-mobile-menu",description:"Billing mobile menu component",props:{auth:{type:Object,default:()=>{}}}},Ra={label:"Billing"},za={value:"/billing-package-list"},Na={key:0,value:"/billing-user-packages"},Ua={key:1,value:"/biling-user-invoices"};function Ba(e,s,o,m,t,r){return l(),i("optgroup",Ra,[a("option",za," "+n(e.lang("purchage")),1),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("option",Na," "+n(e.lang("my_packages")),1)),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("option",Ua," "+n(e.lang("my_invoices")),1))])}const qa=S(Fa,[["render",Ba]]);const Ha={props:{layout_data:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},language:{type:String,default:""}},data(){return{buttonStyle:{backgroundColor:this.layout_data.portal.client_button_color,borderColor:this.layout_data.portal.client_button_border_color},image:this.auth.user_data.profile_pic,role:this.auth.user_data.role,first_name:this.auth.user_data.first_name}},created(){window.emitter.on("updateUserData",this.updateData)},methods:{subIsActive(e){if(e==="profile")return this.$route.path==="/client-profile"},updateData(e){this.image=e.profile_pic,this.role=e.role,this.first_name=e.first_name},logout(){this.$Progress.start(),A.post("/auth/logout").then(e=>{localStorage.setItem("redirectPath",""),this.$Progress.finish(),this.redirect("/")}).catch(e=>{this.$Progress.fail(),this.redirect("/")})}},components:{"faveo-image-element":be}},Wa={class:"banner-wrapper user-data text-center clearfix",id:"profile_dropdown"},Ka=["title"],Ga={class:"banner-content",id:"dropdown_content"},Qa=["href"];function Ja(e,s,o,m,t,r){const g=u("faveo-image-element"),p=u("router-link");return l(),i("li",{class:c(["nav-item dropdown",[{float:o.language=="ar"},{active:r.subIsActive("profile")}]])},[a("a",{class:c(["dropdown-toggle nav-link",{active:r.subIsActive("profile")}]),id:"navbarDropdownProfile",role:"button","data-toggle":"","aria-haspopup":"true","aria-expanded":"false",href:"javascript:;"},n(e.lang("my_profile")),3),a("ul",{class:c(["dropdown-menu",{nav_dropdown:o.language=="ar"}]),role:"menu","aria-labelledby":"dropdownMenu"},[a("li",null,[a("div",Wa,[d(g,{id:"user_avatar","source-url":t.image,classes:["avatar"],"alternative-text":"User Image","img-width":70,"img-height":70},null,8,["source-url"]),a("div",null,[a("strong",null,n(e.lang("hello")),1)]),a("p",{class:"banner-title ellipsize_first_name h4",title:t.first_name},n(t.first_name),9,Ka),a("div",Ga,[a("button",{class:"btn btn-custom btn-sm text-white profile_btn",style:C(t.buttonStyle),onClick:s[0]||(s[0]=b=>r.logout()),id:"client_logout"},n(e.lang("log_out")),5),t.role=="user"?(l(),P(p,{key:0,to:"/client-profile",style:C(t.buttonStyle),id:"client_profile",class:"btn btn-custom btn-sm text-white profile_btn"},{default:w(()=>[f(n(e.lang("profile")),1)]),_:1},8,["style"])):(l(),i("a",{key:1,class:"btn btn-custom btn-sm text-white profile_btn",href:e.basePath()+"/panel/dashboard",style:C(t.buttonStyle),id:"client_dashboard"},n(e.lang("dashboard")),13,Qa))])])])],2)],2)}const Za=S(Ha,[["render",Ja],["__scopeId","data-v-06ef9c71"]]);const Ya={name:"client-panel-logo",description:"Client panel logo component",props:{layout:{type:[Object,String],default:()=>{}}},data(){return{link_color:""}},beforeMount(){this.link_color=this.layout.portal.client_header_color}},Xa=["src"];function eo(e,s,o,m,t,r){const g=u("router-link");return l(),i("div",{id:"logo",class:c([{float:o.layout.language=="ar"},"navbar-brand brand site-logo text-center"])},[o.layout.company.use_logo=="1"?(l(),P(g,{key:0,to:"/",rel:"home",id:"client_logo_img"},{default:w(()=>[a("img",{src:o.layout.company.logo,alt:"User Image",style:{"max-width":"300px","max-height":"127px"}},null,8,Xa)]),_:1})):(l(),P(g,{key:1,to:"/",id:"client_logo_title",style:C([t.link_color!=="null"?{color:t.link_color}:{color:"#b00"}])},{default:w(()=>[f(n(o.layout.system.name!==""?o.layout.system.name:"SUPPORT CENTER"),1)]),_:1},8,["style"]))],2)}const to=S(Ya,[["render",eo],["__scopeId","data-v-33e036a5"]]);const ao={name:"client-panel-navigation",description:"Client panel navigation component",props:{layout:{type:[String,Object],default:""},auth:{type:[String,Object],default:""}},data(){return{navigation:[],language:"",create_ticket:!1,base:"",url:"",pages:[],orgs:[],languages:[],key:"",local:"",isBillingEnabled:!1}},computed:{langSorted(){return _.orderBy(this.languages,"name","asc")}},watch:{},beforeMount(){this.language=this.layout.language,this.create_ticket=parseInt(this.layout.allow_users_to_create_ticket.status),this.base=this.auth.system_url,this.url=this.layout.cdn?"https://hermescdn.co.in":this.base,this.kb_status=this.layout.kb_settings.status,this.pages=this.layout.pages,this.orgs=this.layout.organization?this.layout.organization:[],this.isBillingEnabled=this.layout.billing_settings.active,axios.get("api/dependency/languages?meta=true").then(e=>{this.languages=e.data.data.languages}).catch(e=>{}),this.local=this.language,this.key=this.$route.fullPath,this.navigateTo()},created(){},mounted(){var e=document.createElement("script");e.type="text/javascript",e.src=this.basePathVersion()+"/themes/default/client/js/min/client.min.js",document.getElementsByTagName("head")[0].appendChild(e);var s=this.layout.portal.client_header_color,o=document.createElement("style");o.type="text/css",o.innerHTML=".navbar-nav>li>a.active,.navbar-nav>li>a:hover,.navbar-nav>li>a:focus,.site-navigation li > a:hover{border-top:0px !important; color:"+s+"!important;}";var m=document.createElement("style");m.type="text/css",m.innerHTML=".navbar-nav>li.nav-item.active,.navbar-nav>li.nav-item:hover,.navbar-nav>li.nav-item:focus{border-top:3px solid "+s+"!important; color:"+s+"!important;}",document.getElementsByTagName("head")[0].appendChild(o),document.getElementsByTagName("head")[0].appendChild(m);var t=document.createElement("link");t.rel="icon",t.href=this.layout.icon!=null?this.layout.icon:this.basePathVersion()+"/themes/default/common/images/favicon.ico",document.getElementsByTagName("head")[0].appendChild(t)},methods:{subIsActive(e,s=!1){let o=this.$route.path.split("/");return s?this.$route.path.includes(e):e==="pages"?e===o[o.length-2]:e==="organizations"?e===o[o.length-3]:e===this.$route.path},changeLang(e){this.$Progress.start(),axios.post("api/user-language?locale="+e).then(s=>{this.$Progress.finish(),window.location.reload()})},subString(e){return Y(e,15)},languageTo(){this.changeLang(this.local)},navigateTo(){this.$router.push(this.key).catch(()=>{})}},components:{login:mt,"billing-menu":Ea,"billing-mobile-nav":qa,"field-after-login":Za,"client-panel-logo":to}},pt=e=>(j("data-v-7cc8f048"),e=e(),M(),e),oo={id:"navbar",class:"site-navigation navbar navbar-expand-lg navbar-light"},so=pt(()=>a("button",{class:"navbar-toggler custom-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"fas fa-bars"})],-1)),lo={class:"collapse navbar-collapse links",id:"navbarSupportedContent"},io=pt(()=>a("span",{class:"sr-only"},"(current)",-1)),no={class:"dropdown-toggle nav-link",id:"navbarDropdownLang",role:"button","data-toggle":"","aria-haspopup":"true","aria-expanded":"false"},ro=["src"],co=["id","onClick"],uo=["src"];function _o(e,s,o,m,t,r){const g=u("client-panel-logo"),p=u("router-link"),b=u("billing-menu"),y=u("field-after-login");return l(),i("nav",oo,[d(g,{layout:o.layout},null,8,["layout"]),so,a("div",lo,[a("ul",{class:c(["navbar-nav navbar-menu site-navigate",[t.language==="ar"?"mr-auto float":"ml-auto"]])},[a("li",{class:c(["nav-item",[{active:r.subIsActive("/")},{float:t.language=="ar"}]])},[d(p,{to:"/",class:"nav-link",id:"client_header_home_link"},{default:w(()=>[f(n(e.lang("home"))+" ",1),io]),_:1})],2),t.create_ticket===1||t.create_ticket===0&&!Array.isArray(o.auth.user_data)?(l(),i("li",{key:0,class:c(["nav-item",[{active:r.subIsActive("/create-ticket")},{float:t.language=="ar"}]])},[d(p,{to:"/create-ticket",class:"nav-link",id:"client_create_ticket"},{default:w(()=>[f(n(e.lang("submit_a_ticket")),1)]),_:1})],2)):h("",!0),e.kb_status?(l(),i("li",{key:1,class:c(["nav-item dropdown",[{active:r.subIsActive("/knowledgebase")},{float:t.language=="ar"}]])},[d(p,{to:"/knowledgebase",class:"dropdown-toggle nav-link",id:"client_kb_link",role:"button","data-toggle":"","aria-haspopup":"true","aria-expanded":"false"},{default:w(()=>[f(n(e.lang("knowledge_base")),1)]),_:1}),a("ul",{class:c(["dropdown-menu",{nav_dropdown:t.language==="ar"}]),role:"menu","aria-labelledby":"dropdownMenu"},[a("li",null,[d(p,{to:"/category-list",class:c([{align:t.language=="ar"},"dropdown-item"]),id:"client_kb_categories"},{default:w(()=>[f(n(e.lang("categories")),1)]),_:1},8,["class"])]),a("li",null,[d(p,{to:"/article-list",class:c([{align:t.language=="ar"},"dropdown-item"]),id:"client_kb_articles"},{default:w(()=>[f(n(e.lang("articles")),1)]),_:1},8,["class"])])],2)],2)):h("",!0),e.kb_status&&t.pages.length!==0?(l(),i("li",{key:2,class:c(["nav-item dropdown",[{active:r.subIsActive("pages")},{float:t.language=="ar"}]])},[a("a",{class:c(["dropdown-toggle nav-link",{active:r.subIsActive("pages")}]),id:"navbarDropdownPage",role:"button","data-toggle":"","aria-haspopup":"true","aria-expanded":"false"},n(e.lang("pages")),3),a("ul",{class:c(["dropdown-menu page-menu",{nav_dropdown:t.language=="ar"}]),role:"menu","aria-labelledby":"dropdownMenu"},[(l(!0),i(I,null,O(t.pages,v=>(l(),i("li",null,[d(p,{to:{name:"Pages",params:{slug:v.slug}},class:c([{align:t.language=="ar"},"dropdown-item"]),id:"client_kb_page"+v.slug},{default:w(()=>[f(n(r.subString(v.name)),1)]),_:2},1032,["to","class","id"])]))),256))],2)],2)):h("",!0),t.isBillingEnabled?(l(),P(b,{key:3,layout:o.layout,auth:o.auth,language:t.language},null,8,["layout","auth","language"])):h("",!0),!Array.isArray(o.auth.user_data)&&t.orgs.length>0?(l(),i("li",{key:4,class:c(["nav-item dropdown",[{active:r.subIsActive("organizations")},{float:t.language=="ar"}]])},[a("a",{class:c(["dropdown-toggle nav-link",{active:r.subIsActive("organizations")}]),id:"navbarDropdownOrg","data-toggle":"","aria-haspopup":"true","aria-expanded":"false",role:"button"},n(e.lang("organizations")),3),a("ul",{class:c(["dropdown-menu page-menu",{nav_dropdown:t.language=="ar"}]),role:"menu","aria-labelledby":"dropdownMenu"},[(l(!0),i(I,null,O(t.orgs,v=>(l(),i("li",null,[d(p,{to:{name:"Organizations",params:{org_id:v.id}},id:"client_org"+v.id,class:c([{align:t.language=="ar"},"dropdown-item"])},{default:w(()=>[f(n(r.subString(v.name)),1)]),_:2},1032,["to","id","class"])]))),256))],2)],2)):h("",!0),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("li",{key:5,class:c(["nav-item",[{float:t.language=="ar"},{active:r.subIsActive("/mytickets",!0)}]])},[d(p,{to:"/mytickets",class:"nav-link",id:"client_my_tickets"},{default:w(()=>[f(n(e.lang("my_tickets")),1)]),_:1})],2)),Array.isArray(o.auth.user_data)?h("",!0):(l(),P(y,{key:6,layout_data:o.layout,auth:o.auth,language:t.language},null,8,["layout_data","auth","language"])),Array.isArray(o.auth.user_data)?(l(),i("li",{key:7,class:c(["nav-item",[{float:t.language=="ar"},{active:r.subIsActive("/auth/login")}]])},[d(p,{to:"/auth/login",class:"nav-link",id:"client_login"},{default:w(()=>[f(n(e.lang("login")),1)]),_:1})],2)):h("",!0),a("li",{class:c(["nav-item dropdown",{float:t.language=="ar"}])},[a("a",no,[a("img",{src:t.url+"/"+e.appVersion+"/themes/default/common/images/flags/"+t.language+".png",alt:"no"},null,8,ro)]),a("ul",{class:c(["dropdown-menu",t.language=="ar"?"nav_lang_dropdown":"lang_dropdown-menu"]),role:"menu","aria-labelledby":"dropdownMenu",id:"lang_ul"},[(l(!0),i(I,null,O(r.langSorted,v=>(l(),i("li",{class:c({float:v=="ar"})},[a("a",{class:"lang dropdown-item",id:"client_lang_"+v.locale,onClick:k=>r.changeLang(v.locale)},[a("img",{src:t.url+"/"+e.appVersion+"/themes/default/common/images/flags/"+v.locale+".png",alt:"no"},null,8,uo),f("   "+n(v.name)+"  ‏("+n(v.translation)+")‏ ",1)],8,co)],2))),256))],2)],2)],2)])])}const ho=S(ao,[["render",_o],["__scopeId","data-v-7cc8f048"]]);const go={name:"client-panel-header-search",description:"Client panel search component",props:{layout:{type:Object,default:()=>{}}},data(){return{search:"",inputStyle:{borderColor:this.layout.portal.client_input_field_color},language:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},iconStyle:{borderColor:this.layout.portal.client_button_border_color,color:this.layout.portal.client_button_color},category:"",tag:"",case_sensitive:!1,name:!1,description:!1,searchOpen:!1,componentKey:0,search_class:"form_border"}},watch:{"$route.path"(e,s){e!="/search"&&(this.search="",this.name=!1,this.description=!1,this.case_sensitive=!1,this.category="",this.tag="")},name(e,s){e&&setTimeout(()=>{document.getElementById("title_and_article").checked=!1,document.getElementById("title_and_article").disabled=!0,this.description=!1},1)},description(e,s){e&&setTimeout(()=>{document.getElementById("title_only").checked=!1,document.getElementById("title_only").disabled=!0,this.name=!1},1)}},created(){window.emitter.on("doingSearch",this.onClickOutside),window.emitter.on("cropModalChanged",this.updateClass)},methods:{updateClass(e){this.search_class=e},onClickOutside(e){this.searchOpen=!1},onChange(e,s){this[s]=e},showAdv(){this.searchOpen=!0},searchOnClick(){if(this.componentKey+=1,this.search){let e={};e.name=this.name?1:0,e.description=this.description?1:0,e.case_sensitive=this.case_sensitive?1:0,e.category=this.category?this.category.name:"",e.tag=this.tag?this.tag.name:"",e.s=this.search,this.$router.replace({name:"SearchResult",path:"/search",params:{paramsData:e},query:e})}}},components:{"dynamic-select":Se}},mo={class:"form-inline"},po={class:"form-group input-group",style:{width:"100%"}},yo=["title","placeholder"],fo={class:"input-group-btn"},bo={key:0,class:"search-advance"},vo={class:"row pt-2 pb-2 pl-3"},ko={class:"col-sm-4"},wo=["disabled"],Co={for:"title_and_article"},So={class:"col-sm-4"},Do=["disabled"],Po={for:"title_only"},Io={class:"col-sm-4"},Ao={for:"case_sensitive"},To={class:"row"};function Oo(e,s,o,m,t,r){const g=u("dynamic-select"),p=Z("click-outside");return z((l(),i("form",{onSubmit:s[7]||(s[7]=qe(()=>{},["prevent"])),class:"search-form",role:"search",autocomplete:"off",key:t.componentKey},[a("div",{class:c(["form-border",t.searchOpen?"form_border":""])},[a("div",mo,[a("div",po,[z(a("input",{type:"text",name:"s",class:c(["search-field form-control input-lg",[t.language==="ar"?"ml-3":"mr-3"]]),"onUpdate:modelValue":s[0]||(s[0]=b=>t.search=b),id:"client_kb_search",style:C(t.inputStyle),title:e.lang("enter_search_term"),placeholder:e.lang("have_a_question?_type_your_search_term_here"),onClick:s[1]||(s[1]=(...b)=>r.showAdv&&r.showAdv(...b))},null,14,yo),[[ct,t.search]]),a("span",fo,[a("button",{type:"submit",class:c(["btn btn-custom btn-md",{search_button:t.language==="ar"}]),style:C(t.btnStyle),id:"client_kb_search_btn",onClick:s[2]||(s[2]=(...b)=>r.searchOnClick&&r.searchOnClick(...b))},n(e.lang("search")),7)])])]),t.searchOpen?(l(),i("div",bo,[a("div",vo,[a("div",ko,[z(a("input",{type:"checkbox",class:"form-check-input",id:"title_and_article","onUpdate:modelValue":s[3]||(s[3]=b=>t.description=b),disabled:t.name},null,8,wo),[[fe,t.description]]),a("label",Co," "+n(e.lang("article")),1)]),a("div",So,[z(a("input",{type:"checkbox",class:"form-check-input",id:"title_only","onUpdate:modelValue":s[4]||(s[4]=b=>t.name=b),disabled:t.description},null,8,Do),[[fe,t.name]]),a("label",Po," "+n(e.lang("title_only")),1)]),a("div",Io,[z(a("input",{type:"checkbox",class:"form-check-input",id:"case_sensitive","onUpdate:modelValue":s[5]||(s[5]=b=>t.case_sensitive=b)},null,512),[[fe,t.case_sensitive]]),a("label",Ao," "+n(e.lang("case_sensitive")),1)])]),a("div",To,[d(g,{label:e.lang("category"),multiple:!1,name:"category",id:"client_kb_search_category_dropdown",classname:"col-sm-6",apiEndpoint:"/api/dependency/categories",value:t.category,onChange:r.onChange,placeholder:e.lang("search_or_select"),required:!1,strlength:"30"},null,8,["label","value","onChange","placeholder"]),d(g,{label:e.lang("tags"),multiple:!1,name:"tag",id:"client_kb_search_tag_dropdown",classname:"col-sm-6",apiEndpoint:"/api/dependency/tags",value:t.tag,onChange:r.onChange,placeholder:e.lang("search_or_select"),required:!1,strlength:"30"},null,8,["label","value","onChange","placeholder"])])])):h("",!0),t.searchOpen?(l(),i("a",{key:1,href:"javascript:;",class:"search-advance-button text-center",onClick:s[6]||(s[6]=(...b)=>r.onClickOutside&&r.onClickOutside(...b)),id:"client_kb_search_arrow_btn"},[a("i",{class:"fa fa-chevron-circle-up fa-2x",style:C(t.iconStyle)},null,4)])):h("",!0)],2)],32)),[[p,r.onClickOutside]])}const xo=S(go,[["render",Oo],["__scopeId","data-v-5f9072d7"]]);const Lo={name:"client-panel-breadcrumbs",description:"Client panel breadcrumbs component",props:{layout:{type:Object,default:()=>{}}},data(){return{categories:[],name:"",articleData:"",language:this.layout.language,categoryCrumb:""}},created(){window.emitter.on("articleDetailsLoaded",this.updateCrumb),window.emitter.on("categoryDetailsLoaded",this.categoryCrumbData)},computed:{label(){return this.$route.meta.page&&this.articleData&&(this.name=this.articleData.name,this.categories=this.articleData.categories),this.$route},catCrumb(){return this.categoryCrumb}},methods:{categoryCrumbData(e){this.categoryCrumb=e},updateCrumb(e){this.articleData=e}}},Vo={key:1,class:"text1"},jo={key:1},$o={key:2},Mo={class:"text1 text-capitalize"},Eo={key:3},Fo={class:"text1 text-capitalize"};function Ro(e,s,o,m,t,r){const g=u("router-link");return l(),i("ol",{class:c(["breadcrumb breadcrumb-custom",{crumb_align:t.language==="ar"}])},[o.layout.is_enabled_breadcrumb?(l(),i(I,{key:0},[a("li",{class:c(["text",{text_align:t.language==="ar"}])},n(e.lang("you_are_here"))+" :‏",3),(l(!0),i(I,null,O(r.label.meta.breadcrumb,p=>(l(),i("li",null,[p.to?(l(),P(g,{key:0,to:p.to,class:"color"},{default:w(()=>[f(n(e.lang(p.text)),1)]),_:2},1032,["to"])):(l(),i("a",Vo,n(e.lang(p.text)),1))]))),256)),r.label.meta.view?(l(!0),i(I,{key:0},O(r.catCrumb,p=>(l(),i("li",null,[d(g,{to:"/category-list/"+p.slug,class:"color"},{default:w(()=>[f(n(p.name),1)]),_:2},1032,["to"])]))),256)):h("",!0),r.label.meta.page&&t.categories.length>0?(l(),i("li",jo,[d(g,{to:"/category-list/"+t.categories[t.categories.length-1].slug,class:"text-capitalize"},{default:w(()=>[f(n(e.lang(t.categories[t.categories.length-1].name)),1)]),_:1},8,["to"])])):h("",!0),r.label.meta.page&&t.categories.length>0&&r.label.params.slug?(l(),i("li",$o,[a("a",Mo,n(t.name),1)])):h("",!0),!r.label.meta.page&&!r.label.meta.view&&r.label.params.slug?(l(),i("li",Eo,[a("a",Fo,n(r.label.params.slug),1)])):h("",!0)],64)):h("",!0)],2)}const zo=S(Lo,[["render",Ro],["__scopeId","data-v-59d5db5d"]]);const No={name:"client-panel-footer",description:"Client panel footer component",props:{layout:{type:Object,default:()=>{}}},data(){return{language:this.layout.language,footer_list:this.layout.footer,footerStyle:{borderColor:this.layout.portal.client_header_color}}},methods:{subString(e){return Y(e,20)}}},yt=e=>(j("data-v-aa163ea3"),e=e(),M(),e),Uo={key:0,class:"row"},Bo=["id"],qo=["title"],Ho=["innerHTML"],Wo=yt(()=>a("div",{class:"clearfix"},null,-1)),Ko=yt(()=>a("hr",null,null,-1));function Go(e,s,o,m,t,r){return t.footer_list.length>0?(l(),i("div",Uo,[(l(!0),i(I,null,O(t.footer_list,(g,p)=>(l(),i("div",{class:c(["col-md-3",{float:t.language=="ar"}])},[a("div",null,[a("section",{id:"footer-"+(p+1),class:"section"},[g.title&&g.title.trim()?(l(),i("h2",{key:0,class:c(["section-title h4 clearfix",{align1:t.language=="ar"}]),title:g.title},[a("i",{class:"line",style:C(t.footerStyle)},null,4),f(n(r.subString(g.title)),1)],10,qo)):h("",!0),a("div",{class:c(["ck-content textwidget",{align1:t.language=="ar"}]),style:{"word-wrap":"break-word","overflow-x":"auto"},innerHTML:g.value},null,10,Ho)],8,Bo)])],2))),256)),Wo,Ko])):h("",!0)}const Qo=S(No,[["render",Go],["__scopeId","data-v-aa163ea3"]]);const Jo={name:"client-panel-copyright",description:"Client panel copyright component",props:{layout:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1}},data(){return{moment:He}}},Zo=e=>(j("data-v-6c6f67b6"),e=e(),M(),e),Yo={class:"text-muted"},Xo=["href"],es=Zo(()=>a("a",{id:"copyright_link",href:"https://www.faveohelpdesk.com/",target:"_blank"},"Faveo",-1));function ts(e,s,o,m,t,r){return l(),i("p",Yo,[f(n(e.lang("copyright"))+" © "+n(t.moment().year())+" ",1),a("a",{href:o.layout.company.website,target:"_blank",id:"copyright_link"},n(o.layout.company.company_name)+". ",9,Xo),o.whiteLabel?(l(),i(I,{key:0},[f(n(e.trans("all_rights_reserved"))+". ",1)],64)):(l(),i(I,{key:1},[f(n(e.trans("all_rights_reserved"))+". "+n(e.trans("powered_by"))+" ",1),es],64))])}const as=S(Jo,[["render",ts],["__scopeId","data-v-6c6f67b6"]]);const os={name:"client-panel-social-widgets",description:"Client panel social widgets component",props:{layout:{type:Object,default:()=>{}}},data(){return{social_widgets:this.layout.social_widgets,footerButtonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color}}}},ae=e=>(j("data-v-90ebb0b7"),e=e(),M(),e),ss={class:"list-inline hidden-print"},ls={class:"list-inline-item"},is=["href"],ns=ae(()=>a("i",{class:"fab fa-facebook-f fa-fw"},null,-1)),rs=[ns],cs=["href"],ds=ae(()=>a("i",{class:"fab fa-google-plus-g fa-fw"},null,-1)),us=[ds],_s=["href"],hs=ae(()=>a("i",{class:"fab fa-twitter fa-fw"},null,-1)),gs=[hs],ms=["href"],ps=ae(()=>a("i",{class:"fab fa-linkedin fa-fw"},null,-1)),ys=[ps],fs=["href"],bs=ae(()=>a("i",{class:"fab fa-vimeo-square fa-fw"},null,-1)),vs=[bs],ks=["href"],ws=ae(()=>a("i",{class:"fab fa-youtube fa-fw"},null,-1)),Cs=[ws],Ss=["href"],Ds=ae(()=>a("i",{class:"fab fa-pinterest fa-fw"},null,-1)),Ps=[Ds],Is=["href"],As=ae(()=>a("i",{class:"fab fa-dribbble fa-fw"},null,-1)),Ts=[As],Os=["href"],xs=ae(()=>a("i",{class:"fab fa-flickr fa-fw"},null,-1)),Ls=[xs],Vs=["href"],js=ae(()=>a("i",{class:"fab fa-instagram fa-fw"},null,-1)),$s=[js],Ms=["href"],Es=ae(()=>a("i",{class:"fas fa-rss fa-fw"},null,-1)),Fs=[Es],Rs=["href"],zs=ae(()=>a("i",{class:"fab fa-skype fa-fw"},null,-1)),Ns=[zs],Us=["href"],Bs=ae(()=>a("i",{class:"fab fa-deviantart fa-fw"},null,-1)),qs=[Bs],Hs=["href"],Ws=ae(()=>a("i",{class:"fab fa-stumbleupon fa-fw"},null,-1)),Ks=[Ws];function Gs(e,s,o,m,t,r){return l(),i("ul",ss,[(l(!0),i(I,null,O(t.social_widgets,g=>(l(),i("li",ls,[g.name=="facebook"?(l(),i("a",{key:0,href:g.value,class:"btn btn-social btn-facebook",target:"_blank",id:"client_social_fb"},rs,8,is)):h("",!0),g.name=="google"?(l(),i("a",{key:1,href:g.value,class:"btn btn-social btn-google-plus",target:"_blank",id:"client_social_google"},us,8,cs)):h("",!0),g.name=="twitter"?(l(),i("a",{key:2,href:g.value,class:"btn btn-social btn-twitter",target:"_blank",id:"client_social_twitter"},gs,8,_s)):h("",!0),g.name=="linkedin"?(l(),i("a",{key:3,href:g.value,class:"btn btn-social btn-linkedin",target:"_blank",id:"client_social_linkedin"},ys,8,ms)):h("",!0),g.name=="vimeo"?(l(),i("a",{key:4,href:g.value,class:"btn btn-social btn-vimeo",target:"_blank",id:"client_social_vimeo"},vs,8,fs)):h("",!0),g.name=="youtube"?(l(),i("a",{key:5,href:g.value,class:"btn btn-social btn-youtube",target:"_blank",id:"client_social_youtube"},Cs,8,ks)):h("",!0),g.name=="pinterest"?(l(),i("a",{key:6,href:g.value,class:"btn btn-social btn-pinterest",target:"_blank",id:"client_social_pinterest"},Ps,8,Ss)):h("",!0),g.name=="dribbble"?(l(),i("a",{key:7,href:g.value,class:"btn btn-social btn-dribbble",target:"_blank",id:"client_social_dribble"},Ts,8,Is)):h("",!0),g.name=="flickr"?(l(),i("a",{key:8,href:g.value,class:"btn btn-social btn-flickr",target:"_blank",id:"client_social_flickr"},Ls,8,Os)):h("",!0),g.name=="instagram"?(l(),i("a",{key:9,href:g.value,class:"btn btn-social btn-instagram",target:"_blank",id:"client_social_insta"},$s,8,Vs)):h("",!0),g.name=="rss"?(l(),i("a",{key:10,href:g.value,class:"btn btn-social btn-rss",target:"_blank",id:"client_social_rss"},Fs,8,Ms)):h("",!0),g.name=="skype"?(l(),i("a",{key:11,href:g.value,class:"btn btn-social btn-facebook",target:"_blank",id:"client_social_skype"},Ns,8,Rs)):h("",!0),g.name=="deviantart"?(l(),i("a",{key:12,href:g.value,class:"btn btn-social btn-facebook",target:"_blank",id:"client_social_deviantart"},qs,8,Us)):h("",!0),g.name=="stumble"?(l(),i("a",{key:13,href:g.value,class:"btn btn-social btn-pinterest",target:"_blank",id:"client_social_stumble"},Ks,8,Hs)):h("",!0)]))),256))])}const Qs=S(os,[["render",Gs],["__scopeId","data-v-90ebb0b7"]]);const Js={components:{spinner:Rt},props:{color:{type:String,default:"#1d78ff"},size:{type:[Number,String],default:60},duration:{type:Number,default:4e3}}},Zs=e=>(j("data-v-e8e9c855"),e=e(),M(),e),Ys={class:"center-of-page",id:"client_common_loader"},Xs=Zs(()=>a("div",{class:"full-page"},null,-1));function el(e,s,o,m,t,r){const g=u("spinner");return l(),i("div",null,[a("div",Ys,[d(g,{"animation-duration":o.duration,size:o.size,color:o.color},null,8,["animation-duration","size","color"])]),Xs])}const le=S(Js,[["render",el],["__scopeId","data-v-e8e9c855"]]);const tl={name:"client-panel-layout",description:"Client panel Layout Component",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},isUpdatedVersion:{type:[Boolean,Number],default:!1},whiteLabel:{type:Boolean,default:!1}},data:{selectedOption:"1 Day",alertWrapper:0,alertData:"",alertContent:"",screenSize:""},computed:{...W(["getUserLoadStatus"])},beforeMount(){this.auth.user_data.id&&this.checkForUpdate()},updated(){this.logAlertWrapperHeight()},mounted(){this.logAlertWrapperHeight();var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.screenSize=e/4,window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize)},methods:{getAlertBackgroundColor(e){const s="#fff3cd",m=parseInt(s.slice(1,3),16)+e*5,t=parseInt(s.slice(3,5),16)+e*5,r=parseInt(s.slice(5,7),16)+e*5,g=p=>Math.min(255,Math.max(0,p));return`rgb(${g(m)}, ${g(t)}, ${g(r)})`},updateSelectedOption(e,s){e.selectedOption=s},async checkForUpdate(){try{const e=await axios.post("/display-pop-ups");this.alertData=e.data.map(t=>({...t,selectedOption:"1 Day",topPosition:0}));const s=[];for(const t of this.alertData)try{const r={value:t.description},g=await axios.post("/give-me-read",r);s.push(g.data)}catch(r){console.log(r),s.push("")}this.alertData.forEach((t,r)=>{t.description=s[r]});const m=(await axios.get("/get-days")).data.data;for(const t of this.alertData){const r=t.id.toString();if(m.hasOwnProperty(r)){const g=m[r];t.selectedOption=g===1?"1 Day":`${g} Days`}}this.alertContent=this.alertData,await this.logAlertWrapperHeight()}catch(e){console.log(e)}},onCloseAlert(e){Array.isArray(this.alertContent)||(this.alertContent=[]);const s=this.alertContent.findIndex(t=>t.id===e.id);s>-1&&this.alertContent.splice(s,1);const o={};o.pop_id=e.id;let m=parseInt(e.selectedOption.match(/\d+/)[0],10);o.days=m=m,o.user_id=this.auth.user_data.id,axios.post("/post-days",o).then(t=>{this.checkForUpdate()}).catch(t=>{console.log(t)})},logAlertWrapperHeight(){this.$nextTick(()=>{const e=this.$refs.alertWrapperElements;if(e){let s=0;e.forEach((o,m)=>{if(o){const t=o.clientHeight;s+=t;const r=s-t;this.alertContent[m].topPosition=r}}),this.alertWrapper=s}})},onWindowResize(){this.logAlertWrapperHeight()}},components:{"client-panel-navigation":ho,"client-panel-header-search":xo,"client-panel-breadcrumbs":zo,"client-panel-footer":Qo,"client-panel-copyright":as,"client-panel-social-widgets":Qs,"client-panel-loader":le}},Je=e=>(j("data-v-afdb776f"),e=e(),M(),e),al=["onClick"],ol={class:"row"},sl={class:"col-sm-12 alert-description"},ll={class:"col-sm-10"},il=Je(()=>a("span",{style:{"vertical-align":"top"}},[a("i",{class:"fas fa-warning"})],-1)),nl=["innerHTML"],rl={class:"remind-select float-right pr-4"},cl=Je(()=>a("label",{class:"remind-option pr-2"},n("Remind me after : "),-1)),dl={class:"btn-group select-button"},ul=Je(()=>a("i",{class:"fa fa-angle-down"},null,-1)),_l={class:"dropdown-menu option-container"},hl=["onClick"],gl=["onClick"],ml=["onClick"],pl={key:0,id:"page",class:"hfeed site text-small"},yl={id:"masthead",class:"site-header",role:"banner"},fl={class:"container"},bl={id:"header-search",class:"site-search clearfix"},vl={class:"container"},kl={id:"main",class:"site-main clearfix"},wl={class:"container"},Cl={class:"content-area"},Sl={class:"container"},Dl={class:"row bord"},Pl={key:1,class:"row"};function Il(e,s,o,m,t,r){const g=u("client-panel-navigation"),p=u("client-panel-header-search"),b=u("client-panel-breadcrumbs"),y=u("alert"),v=u("router-view"),k=u("vue-progress-bar"),D=u("client-panel-footer"),T=u("client-panel-copyright"),V=u("client-panel-social-widgets"),F=u("client-panel-loader");return l(),i(I,null,[(l(!0),i(I,null,O(e.alertContent,(U,X)=>(l(),i("div",{key:X},[U.use===1?(l(),i("div",{key:0,ref_for:!0,ref:"alertWrapperElements",class:"alert-warning alert-wrapper mb-0 pt-2 pl-3 pr-2 pb-1",style:C({top:U.topPosition+"px",backgroundColor:r.getAlertBackgroundColor(X),zIndex:X===e.alertContent.length-1?9999:99999999})},[a("button",{type:"button",onClick:R=>r.onCloseAlert(U),class:"close p-2",id:"alert_close"},"×",8,al),a("div",ol,[a("div",sl,[a("div",ll,[il,a("span",{class:"alert-message",innerHTML:U.description},null,8,nl)]),a("div",rl,[cl,a("div",dl,[a("button",{type:"button",class:"dropdown-toggle select-button alert-warning btn btn-outline",style:C([{backgroundColor:r.getAlertBackgroundColor(X)},{"margin-right":"0px !important"}]),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[f(n(U.selectedOption)+" ",1),ul],4),a("div",_l,[a("div",{class:c(["dropdown-item option-select",{alertDay:U.selectedOption==="1 Day"}]),onClick:R=>r.updateSelectedOption(U,"1 Day")},"1 Day",10,hl),a("div",{class:c(["dropdown-item option-select",{alertDay:U.selectedOption==="3 Days"}]),onClick:R=>r.updateSelectedOption(U,"3 Days")},"3 Days",10,gl),a("div",{class:c(["dropdown-item option-select",{alertDay:U.selectedOption==="7 Days"}]),onClick:R=>r.updateSelectedOption(U,"7 Days")},"7 Days",10,ml)])])])])])],4)):h("",!0)]))),128)),a("div",{class:"content-container",style:C({marginTop:e.alertContent?this.alertWrapper+"px !important":""})},[e.getUserLoadStatus?(l(),i("div",pl,[a("header",yl,[a("div",fl,[d(g,{layout:o.layout,auth:o.auth},null,8,["layout","auth"]),a("div",bl,[o.layout.kb_settings.status?(l(),P(p,{key:0,layout:o.layout},null,8,["layout"])):h("",!0)])])]),a("div",{class:"site-hero clearfix",style:C({"background-color":o.layout.portal.client_header_color})},[a("div",vl,[d(b,{layout:o.layout},null,8,["layout"])])],4),a("div",kl,[a("div",wl,[a("div",Cl,[d(y,{componentName:"layout"}),(l(),P(v,{key:e.$route.fullPath,auth:o.auth,layout:o.layout},null,8,["auth","layout"])),d(k,{class:"color-shift-progress-bar"})])])]),a("footer",{id:"colophon",class:c(["site-footer",{footer_align:o.layout.language==="ar"}]),role:"contentinfo"},[a("div",Sl,[d(D,{layout:o.layout},null,8,["layout"]),a("div",Dl,[a("div",{class:c(["site-info col-md-6",{"float1 align1":o.layout.language==="ar"}])},[d(T,{layout:o.layout,"white-label":o.whiteLabel},null,8,["layout","white-label"])],2),a("div",{class:c(["site-social text-right col-md-6",{"left rem":o.layout.language==="ar"}])},[d(V,{layout:o.layout},null,8,["layout"])],2)])])],2)])):(l(),i("div",Pl,[d(F,{size:100,color:o.layout.portal.client_header_color},null,8,["color"])]))],4)],64)}const Al=S(tl,[["render",Il],["__scopeId","data-v-afdb776f"]]);const Tl={name:"bad-request-component",description:"404 Error Component",props:{layout:{type:Object,default:()=>{}}},data(){return{linkStyle:{color:this.layout.portal.client_header_color+" !important"},btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color}}}},Ol=e=>(j("data-v-e8418452"),e=e(),M(),e),xl={class:"mt-5"},Ll={id:"content",class:"site-content"},Vl={class:"hentry error404 text-center"},jl={class:"error-title"},$l=Ol(()=>a("span",{class:"visible-print text-danger"},null,-1)),Ml={class:"entry-title text-muted mt-4"},El={class:"entry-content clearfix mt-5"};function Fl(e,s,o,m,t,r){const g=u("meta-component"),p=u("router-link");return l(),i("div",xl,[d(g,{dynamic_title:e.lang("oops_page_not_found"),layout:o.layout},null,8,["dynamic_title","layout"]),a("div",Ll,[a("article",Vl,[a("h1",jl,[f("4"),a("i",{class:"far fa-frown text-danger",style:C(t.linkStyle)},null,4),$l,f("4")]),a("h2",Ml,n(e.lang("page_could_not_be_found")),1),a("div",El,[a("p",null,[d(p,{to:"/",replace:"",class:"btn btn-custom",style:C(t.btnStyle),id:"go_to_home"},{default:w(()=>[f(n(e.lang("go_to_home")),1)]),_:1},8,["style"])])])])])])}const it=S(Tl,[["render",Fl],["__scopeId","data-v-e8418452"]]);const Rl={name:"bad-request-component",description:"404 Error Component",props:{layout:{type:Object,default:()=>{}},statusText:{type:String}},data(){return{linkStyle:{color:this.layout.portal.client_header_color+" !important"}}}},zl=e=>(j("data-v-8e27da3b"),e=e(),M(),e),Nl={class:"row"},Ul={id:"content",class:"site-content col-md-8 offset-md-2"},Bl={class:"hentry error404 text-center"},ql={class:"error-title"},Hl=zl(()=>a("span",{class:"visible-print text-danger"},null,-1)),Wl=["innerHTML"],Kl={key:1,class:"entry-title text-muted"},Gl={class:"entry-content clearfix"};function Ql(e,s,o,m,t,r){const g=u("meta-component"),p=u("router-link");return l(),i("div",Nl,[d(g,{dynamic_title:e.lang("oops_page_not_found"),layout:o.layout},null,8,["dynamic_title","layout"]),a("div",Ul,[a("article",Bl,[a("h1",ql,[f("4"),a("i",{class:"far fa-frown text-danger",style:C(t.linkStyle)},null,4),Hl,f("4")]),o.statusText?(l(),i("h2",{key:0,class:"entry-title text-muted",innerHTML:o.statusText},null,8,Wl)):(l(),i("h2",Kl,n(e.lang("page_could_not_be_found")),1)),a("div",Gl,[a("p",null,[d(p,{to:"/",replace:"",style:C(t.linkStyle),id:"not_found_to_home"},{default:w(()=>[f(n(e.lang("go_to_home")),1)]),_:1},8,["style"])])])])])])}const Jl=S(Rl,[["render",Ql],["__scopeId","data-v-8e27da3b"]]);const Zl={name:"bad-request-component",description:"500 Error Component",props:{layout:{type:Object,default:()=>{}}},data(){return{linkStyle:{color:this.layout.portal.client_header_color+" !important"}}}},ft=e=>(j("data-v-e0b38197"),e=e(),M(),e),Yl={class:"row"},Xl={id:"content",class:"site-content col-md-8 offset-md-2"},ei={class:"hentry error500 text-center"},ti={class:"error-title"},ai=ft(()=>a("span",{class:"visible-print text-danger"},null,-1)),oi=ft(()=>a("span",{class:"visible-print text-danger"},null,-1)),si={class:"entry-title text-muted"},li={class:"entry-content clearfix"};function ii(e,s,o,m,t,r){const g=u("meta-component"),p=u("router-link");return l(),i("div",Yl,[d(g,{dynamic_title:e.lang("oops_page_not_found"),layout:o.layout},null,8,["dynamic_title","layout"]),a("div",Xl,[a("article",ei,[a("h1",ti,[f("5"),a("i",{class:"far fa-frown text-danger",style:C(t.linkStyle)},null,4),ai,a("i",{class:"far fa-frown text-danger",style:C(t.linkStyle)},null,4),oi]),a("h2",si,n(e.lang("sorry_something_went_wrong")),1),a("div",li,[a("p",null,[d(p,{to:"/",replace:"",style:C(t.linkStyle),id:"go_to_home_500"},{default:w(()=>[f(n(e.lang("go_to_home")),1)]),_:1},8,["style"])])])])])])}const ni=S(Zl,[["render",ii],["__scopeId","data-v-e0b38197"]]),ri={props:{route:{type:String,required:!0},classname:{type:String},label:{type:String,required:!0},layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{imageUrl:"",base:this.auth.system_url,link_color:this.layout.portal.client_header_color,token:null}},beforeMount(){this.imageUrl=this.layout.cdn?"https://hermescdn.co.in/"+this.appVersion+"/themes/default/client/images/":this.auth.system_url+"/"+this.appVersion+"/themes/default/client/images/"},methods:{storePath(e){Array.isArray(this.auth.user_data)?(localStorage.setItem("redirectPath",e),this.$router.replace({name:"Login"}).catch(()=>{})):this.$router.replace({name:"MyTickets"}).catch(()=>{})}}},ci={key:0},di=["id"],ui={key:1};function _i(e,s,o,m,t,r){const g=u("router-link");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[o.route=="/mytickets"?(l(),i("span",ci,[a("a",{onClick:s[0]||(s[0]=p=>r.storePath(o.route)),class:c(o.classname),href:"javascript:;",id:"client_widget_"+o.classname,style:C({"background-image":"url("+t.imageUrl+"news.png  )",color:t.link_color})},n(o.label),15,di)])):(l(),i("span",ui,[d(g,{to:o.route,class:c(o.classname),id:"client_widget_"+o.classname,style:C({"background-image":"url("+t.imageUrl+o.classname+".png  )",color:t.link_color})},{default:w(()=>[f(n(o.label),1)]),_:1},8,["to","class","id","style"])]))]),_:1})}const hi=S(ri,[["render",_i]]);const gi={name:"widget-component",description:"Widget box component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},components:{"widget-box":hi},data(){return{allow_register:this.layout.user_registration.status,allow_create_ticket:parseInt(this.layout.allow_users_to_create_ticket.status),lang_locale:this.layout.language,status:this.layout.kb_settings.status,data_type:Array.isArray(this.auth.user_data)!=!0}},beforeMount(){}},mi={id:"corewidgetbox",class:"wid"};function pi(e,s,o,m,t,r){const g=u("widget-box");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",mi,[a("div",{id:"wbox",class:c([{box_align:t.lang_locale=="ar"},"widgetrow text-center"])},[e.$route.path!=="/auth/register"&&t.allow_register==1&&t.data_type===!1?(l(),P(g,{key:0,route:"/auth/register",classname:"register",label:e.lang("register"),layout:o.layout,auth:o.auth},null,8,["label","layout","auth"])):h("",!0),e.$route.path==="/auth/register"&&t.data_type===!1?(l(),P(g,{key:1,route:"/auth/login",classname:"register",label:e.lang("login"),layout:o.layout,auth:o.auth},null,8,["label","layout","auth"])):h("",!0),t.allow_create_ticket||t.data_type?(l(),P(g,{key:2,route:"/create-ticket",classname:"submitticket",label:e.lang("submit_a_ticket"),layout:o.layout,auth:o.auth},null,8,["label","layout","auth"])):h("",!0),d(g,{route:"/mytickets",classname:"mytickets",label:e.lang("my_tickets"),auth:o.auth,layout:o.layout},null,8,["label","auth","layout"]),t.status?(l(),P(g,{key:3,route:"/knowledgebase",classname:"knowledgebase",label:e.lang("knowledge_base"),layout:o.layout,auth:o.auth},null,8,["label","layout","auth"])):h("",!0)],2)])]),_:1})}const Ie=S(gi,[["render",pi],["__scopeId","data-v-2a5a4598"]]),yi={name:"home-page",description:"Client panel home page Component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},components:{"widget-component":Ie}},fi={id:"content",class:"site-content col-md-12"};function bi(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("widget-component");return l(),i("div",null,[d(g,{dynamic_title:e.lang("home"),dynamic_description:e.lang("home-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",fi,[d(p,{componentName:"home"}),d(b,{layout:o.layout,auth:o.auth},null,8,["layout","auth"])])])}const Be=S(yi,[["render",bi]]);const vi={name:"login-page",description:"Login page component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data:()=>({isLoading:!1}),beforeMount(){this.$route.query&&this.$route.query.error&&(this.$store.dispatch("setAlert",{type:"danger",message:this.$route.query.error,component_name:"page-login"}),setTimeout(()=>{this.$router.replace({name:"Login"})},5e3)),Array.isArray(this.auth.user_data)||this.$router.push({name:"Home"});const e=this.$router.currentRoute.value;e&&e.name==="SocialCallback"&&(this.isLoading=!0,this.handleSocialCallback(e))},methods:{handleSocialCallback(e){A.get(`api${e.fullPath}`).then(s=>{G(s,"page-login");let o=localStorage.getItem("redirectPath");o&&(window.location.href=this.base+o),o=s.data.data.redirect_url,o!="/"&&(o="/"+o),o=="/verify-2fa"?(this.$Progress.finish(),this.$router.push({path:"/verify-2fa",name:"Verify2FA",params:{pp:JSON.stringify(s.data.data.PPAuth),remember:!0}})):this.redirect(o),window.emitter.emit("login-success",s)}).catch(s=>{B(s,"page-login"),this.isLoading=!1})}},components:{"widget-component":Ie,login:mt}},ki={id:"content",class:"site-content col-md-12 ng-scope"};function wi(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("widget-component"),y=u("custom-loader"),v=u("login");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",{class:c({login_align:o.layout.language==="ar"})},[d(g,{dynamic_title:e.lang("auth-login-title"),dynamic_description:e.lang("auth-login-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",ki,[d(p,{componentName:"page-login"}),d(b,{layout:o.layout,auth:o.auth},null,8,["layout","auth"]),e.isLoading?(l(),P(y,{key:0})):(l(),P(v,{key:1,slot:"fields",layout:o.layout,auth:o.auth},null,8,["layout","auth"]))])],2)]),_:1})}const nt=S(vi,[["render",wi],["__scopeId","data-v-755ed450"]]);function $e(e){const{email_address:s}=e;let o={email_address:[s,"isRequired","isEmail"]};const m=new ge(L),{errors:t,isValid:r}=m.validate(o);return he.dispatch("setValidationError",t),{errors:t,isValid:r}}const Ci={},Si={class:"col-md-6 offset-md-3 form-helper"},Di={class:"login-box",style:{width:"auto"},valign:"center"},Pi={class:"form-border"};function Ii(e,s,o,m,t,r){return l(),i("div",Si,[a("div",Di,[a("div",Pi,[_e(e.$slots,"title"),_e(e.$slots,"fields"),_e(e.$slots,"controls"),_e(e.$slots,"links")])])])}const Me=S(Ci,[["render",Ii]]);const Ai={name:"forgot-password",description:"Forgot password component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{title:"forgot_password",loading:!1,email_address:"",buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},linkStyle:{color:this.layout.portal.client_header_color},language:this.layout.language,isCaptchaValidated:!1}},created(){window.emitter.on("recaptcha-validated",()=>{this.isCaptchaValidated=!0})},beforeMount(){Array.isArray(this.auth.user_data)||this.$router.push({name:"Home"})},methods:{onChange(e,s){this[s]=e},isValid(){const{errors:e,isValid:s}=$e(this.$data);return!!s},onSubmit(){if(!this.shouldProceed()){this.$store.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:"password"});return}if(this.isValid()){this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const e="email="+this.email_address;A.post("api/password/email",e).then(s=>{this.$Progress.finish(),this.initialState(),G(s,"password"),setTimeout(()=>{this.$router.push({path:"/auth/login",name:"Login"})},3e3)}).catch(s=>{this.$Progress.fail(),this.initialState(),B(s,"password")}),this.isDisabled=!0}},initialState(){window.scrollTo(0,0),this.isDisabled=!1,this.loading=!1},triggerEvent(e){var s=e.which||e.keyCode;s===13&&this.onSubmit()},shouldProceed(){return this.recaptchaApplyfor&&this.recaptchaApplyfor.includes("forget_password")?this.isCaptchaValidated:!0}},components:{"form-helper":Me,"text-field":Q,"widget-component":Ie,"form-with-captcha":Ve}},Ti={id:"content",class:"site-content col-md-12"},Oi={class:"col-md-6 offset-md-3 form-helper"},xi={class:"login-box",style:{width:"auto"},valign:"center"},Li={class:"form-border"},Vi={id:"h3"},ji={key:0},$i={key:0,class:"row"};function Mi(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("widget-component"),y=u("loader"),v=u("text-field"),k=u("router-link"),D=u("form-with-captcha"),T=Z("focus-first-input");return l(),i("div",{class:c({forgot_align:t.language==="ar"})},[d(g,{dynamic_title:e.lang("password-email-title"),dynamic_description:e.lang("password-email-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",Ti,[d(p,{componentName:"password"}),d(b,{layout:o.layout,auth:o.auth},null,8,["layout","auth"]),a("div",Oi,[a("div",xi,[a("div",Li,[_e(e.$slots,"title",{},void 0,!0),_e(e.$slots,"fields",{},void 0,!0),_e(e.$slots,"controls",{},void 0,!0),_e(e.$slots,"links",{},void 0,!0),d(D,{"btn-class":"login-button btn btn-custom btn-block btn-flat mt-2","btn-style":t.buttonStyle,btnName:"send_email",iconClass:"fa fa-save",formSubmit:r.onSubmit,page:"forget_password",componentName:"password",btn_id:"forgot_pass_action",loading:!0},{title:w(()=>[a("h3",Vi,n(e.lang(t.title)),1)]),fields:w(()=>[t.loading?(l(),i("div",ji,[d(y,{"animation-duration":4e3,color:o.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0),z((l(),i("div",{class:c({align1:t.language==="ar"})},[t.loading?h("",!0):(l(),P(v,{key:0,label:e.lang("email"),value:t.email_address,id:"forgot_pass_email",inputStyle:t.inputStyle,type:"email",name:"email_address",keyupListener:r.triggerEvent,onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"",required:!0,rules:"email"},null,8,["label","value","inputStyle","keyupListener","onChange","placehold"]))],2)),[[T]])]),controls:w(()=>[t.loading?h("",!0):(l(),i("div",$i,[a("div",{class:c(["col-xs-6 col-sm-6 col-md-8",{align1:t.language==="ar"}])},[d(k,{to:"/auth/login",style:C(t.linkStyle),id:"forgot_to_login"},{default:w(()=>[f(n(e.lang("i_know_my_password")),1)]),_:1},8,["style"])],2)]))]),default:w(()=>[a("div",{class:c(["col-xs-6 col-sm-6 col-md-4 float-right",{left:t.language==="ar"}])},[a("button",{class:"btn btn-custom btn-block btn-flat",onClick:s[0]||(s[0]=V=>r.onSubmit()),style:C(t.buttonStyle),id:"forgot_pass_action"},n(e.lang("send")),5)],2)]),_:1},8,["btn-style","formSubmit"])])])])])],2)}const Ei=S(Ai,[["render",Mi],["__scopeId","data-v-90498148"]]);function Fi(e){const{password:s,repeat:o}=e;let m={password:[s,"isRequired","min(6)","max(20)"],repeat:[o,"isRequired","min(6)","max(20)"]};const t=new ge(L),{errors:r,isValid:g}=t.validate(m);return he.dispatch("setValidationError",r),{errors:r,isValid:g}}const Ri={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{token:"",path:"",password:"",repeat:"",user:"",userEmail:"",loading:!0,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},language:this.layout.language}},beforeMount(){Array.isArray(this.auth.user_data)||this.$router.push({name:"Home"})},mounted(){this.userEmail=location.search.split("="),this.user=decodeURIComponent(this.userEmail[this.userEmail.length-1]),this.loading=!1},methods:{onChange(e,s){this[s]=e},isValid(){const{errors:e,isValid:s}=Fi(this.$data);return!!s},triggerEvent(e){var s=e.which||e.keyCode;s===13&&this.onSubmit()},onSubmit(){if(this.isValid())if(this.password===this.repeat){this.$Progress.start(),this.loading=!0,this.path=location.pathname.split("/"),this.token=this.path[this.path.length-1];const e={token:this.token,password:this.repeat};axios.post("api/password/reset",e).then(s=>{this.loading=!1,G(s,"reset"),this.$Progress.finish(),setTimeout(()=>{this.$router.push({path:"/auth/login",name:"Login"})},3e3)}).catch(s=>{B(s,"reset"),this.$Progress.fail(),this.loading=!1})}else this.$store.dispatch("setValidationError",{repeat:"Password does not match"})}},components:{"text-field":Q,"client-panel-loader":le,"widget-component":Ie,"form-helper":Me}},zi=e=>(j("data-v-3a1e2415"),e=e(),M(),e),Ni={key:0},Ui={id:"content",class:"site-content col-sm-12"},Bi={id:"h3"},qi=["disabled"],Hi=zi(()=>a("i",{class:"fas fa-sync"},null,-1));function Wi(e,s,o,m,t,r){const g=u("meta-component"),p=u("client-panel-loader"),b=u("alert"),y=u("widget-component"),v=u("text-field"),k=u("form-helper"),D=Z("focus-first-input");return l(),i("div",{class:c({reset_align:t.language==="ar"})},[d(g,{dynamic_title:e.lang("password-reset-title"),dynamic_description:e.lang("password-reset-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),t.loading===!0?(l(),i("div",Ni,[d(p,{size:60})])):h("",!0),a("div",Ui,[d(b,{componentName:"reset"}),d(y,{layout:o.layout,auth:o.auth},null,8,["layout","auth"]),d(k,null,{title:w(()=>[a("h3",Bi,n(e.lang("reset_password")),1)]),fields:w(()=>[z((l(),i("div",{class:c({align1:t.language==="ar"})},[d(v,{label:e.lang("new_password"),value:t.password,"input-style":t.inputStyle,type:"password",name:"password",onChange:r.onChange,required:!0,keyupListener:r.triggerEvent,id:"pass_reset_newpassword"},null,8,["label","value","input-style","onChange","keyupListener"]),d(v,{label:e.lang("confirm_password"),value:t.repeat,"input-style":t.inputStyle,type:"password",id:"pass_reset_confirm",name:"repeat",onChange:r.onChange,required:!0,keyupListener:r.triggerEvent},null,8,["label","value","input-style","onChange","keyupListener"])],2)),[[D]])]),controls:w(()=>[a("button",{class:"btn btn-custom btn-block btn-flat",onClick:s[0]||(s[0]=T=>r.onSubmit()),style:C(t.buttonStyle),disabled:t.loading,id:"pass_reset_action"},[Hi,f(" "+n(e.lang("reset_password")),1)],12,qi)]),_:1})])],2)}const Ki=S(Ri,[["render",Wi],["__scopeId","data-v-3a1e2415"]]);const Gi={name:"activate-email",description:"Email Activation Component",props:{layout:{type:Object,default:()=>{}}},data(){return{loading:!0,lang_locale:this.layout.language,hash:""}},beforeMount(){this.getResponse()},methods:{getHashFromUrl(e){let s=e.split("/");return s[s.length-1]},getResponse(){const e=window.location.pathname;this.hash=this.getHashFromUrl(e),this.$Progress.start(),this.loading=!0,A.post("/api/account/activate/"+this.hash).then(s=>{this.$Progress.finish(),this.loading=!1,G(s,"activateEmail"),setTimeout(()=>{this.$router.push({path:"/auth/login",name:"Login"})},6e3)}).catch(s=>{this.loading=!1,this.$Progress.fail(),B(s,"activateEmail"),s.response&&s.response.data&&s.response.data.message.redirect_to&&(window.location.href=s.response.data.message.redirect_to)})}}},Qi=e=>(j("data-v-a54d8211"),e=e(),M(),e),Ji={id:"content",class:"site-content col-md-12"},Zi={key:0},Yi=Qi(()=>a("br",null,null,-1));function Xi(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("loader");return l(),i("div",null,[d(g,{dynamic_title:e.lang("account-activation-title"),layout:o.layout,dynamic_description:e.lang("account-activation-description")},null,8,["dynamic_title","layout","dynamic_description"]),a("div",Ji,[d(p,{componentName:"activateEmail"}),t.loading?(l(),i("div",Zi,[d(b,{"animation-duration":4e3,color:o.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0),Yi])])}const en=S(Gi,[["render",Xi],["__scopeId","data-v-a54d8211"]]);const tn={name:"verification-progress",description:"Verification Progress Bar",props:{active:{type:String,required:!0},token:{type:String,default:""}},beforeMount(){this.getVerificationSteps()},data(){return{loading:!1,steps:[],style:"width:33.33%"}},methods:{getVerificationSteps(){axios.get("api/verification-steps?token="+this.token).then(e=>{this.steps=e.data.data.verifications,this.style="width:"+100/e.data.data.verifications.length+"%";let s=!0;this.steps.forEach(o=>(o.id===this.active&&(o.class="active",s=!1),s&&(o.class="active"),o))})}}},an={id:"progressbar",class:"col-md-6 offset-md-3 form-helper"},on=["id"];function sn(e,s,o,m,t,r){return l(),i("ul",an,[(l(!0),i(I,null,O(t.steps,g=>(l(),i("li",{id:g.id,class:c(g.class),style:C(t.style)},[a("strong",null,n(g.label),1)],14,on))),256))])}const ln=S(tn,[["render",sn],["__scopeId","data-v-61b0f179"]]);const nn={name:"verify-email",description:"Email verification Component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{loading:!1,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},linkStyle:{color:this.layout.portal.client_header_color},lang_locale:this.layout.language,isDisabled:!1,email_address:"",password:"",updateEmail:!1,title:"update_email",isEmailVerified:!0,message:"Verification Completed Successfully, Redirecting to Log In page",verificationCompleted:!1}},computed:{...W(["getVerifyEmail"])},beforeMount(){this.email_address=this.getVerifyEmail,this.email_address||(this.$store.dispatch("setAlert",{type:"danger",message:this.lang("no_account_email_contact_admin"),component_name:"email"}),setTimeout(()=>{this.$router.push("/auth/login/")},3e3)),this.apiCallForVerificationCheck(!0),this.setTimeIntervalForVerificationCheck()},methods:{setTimeIntervalForVerificationCheck(){setInterval(()=>{this.apiCallForVerificationCheck(),this.isEmailVerified&&this.$router.push("/verification-completed")},3e3)},apiCallForVerificationCheck(e=!1){A.get("/api/email-verification-status?email="+this.email_address).then(s=>{this.isEmailVerified=s.data.data.is_verified}).catch(s=>{this.isEmailVerified=!1})},onChange(e,s){this[s]=e},showField(){this.updateEmail=!0},isValid(){const{errors:e,isValid:s}=$e(this.$data);return!!s},onSubmit(){if(this.isValid()){this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const e={oldEmail:this.getVerifyEmail,email_address:this.email_address,password:this.password};A.post("api/update-email-verification",e).then(s=>{this.$Progress.finish(),this.initialState(),G(s,"updateEmail"),setTimeout(()=>{this.$router.push({path:"/auth/login",name:"Login"})},4e3)}).catch(s=>{this.$Progress.fail(),this.initialState(),B(s,"updateEmail")})}},initialState(){window.scrollTo(0,0),this.isDisabled=!1,this.loading=!1},triggerEvent(e){var s=e.which||e.keyCode;s===13&&this.onSubmit()},resendLink(){this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const e={email:this.getVerifyEmail};A.post("api/send-email-verification-link",e).then(s=>{this.$Progress.finish(),this.initialState(),G(s,"updateEmail"),setTimeout(()=>{this.$router.push({path:"/auth/login",name:"Login"})},4e3)}).catch(s=>{this.$Progress.fail(),this.initialState(),B(s,"updateEmail")})}},components:{VerificationProgress:ln,"form-helper":Me,"widget-component":Ie,"text-field":Q}},rn=e=>(j("data-v-c068c3a0"),e=e(),M(),e),cn={class:"email-verify"},dn={id:"content",class:"site-content col-md-12"},un={key:0,class:"box-title",align:"center"},_n={id:"message-resend",style:{"font-size":".8em",display:"none"}},hn={id:"message",style:{"font-size":".8em"}},gn={key:0,align:"center"},mn=rn(()=>a("p",{id:"or"},"or",-1)),pn={key:0},yn={id:"h3"},fn={key:0},bn={key:0},vn={key:0,class:"row"};function kn(e,s,o,m,t,r){const g=u("alert"),p=u("meta-component"),b=u("verification-progress"),y=u("loader"),v=u("form-helper"),k=u("text-field"),D=u("router-link"),T=Z("focus-first-input");return l(),i("div",cn,[d(g,{componentName:"email"}),e.getVerifyEmail?(l(),i("div",{key:0,class:c({verify_align:t.lang_locale==="ar"})},[d(p,{dynamic_title:e.lang("verify-email-title"),layout:o.layout,dynamic_description:e.lang("verify-email-description")},null,8,["dynamic_title","layout","dynamic_description"]),a("div",dn,[d(g,{componentName:"updateEmail"}),d(b,{active:"email-verify"}),t.updateEmail?h("",!0):(l(),P(v,{key:0},{title:w(()=>[t.loading?h("",!0):(l(),i("h4",un,[a("p",null,n(e.lang("hello")),1),a("span",_n,n(e.lang("activation-link-message")),1),a("span",hn,n(e.lang("activation_link_sent"))+" "+n(t.email_address)+". "+n(e.lang("click_link_to_activate")),1)]))]),controls:w(()=>[t.loading?h("",!0):(l(),i("div",gn,[a("button",{class:"btn btn-custom btn-block btn-flat",onClick:s[0]||(s[0]=(...V)=>r.resendLink&&r.resendLink(...V)),style:C(t.buttonStyle),id:"verify_mail_resend"},n(e.lang("resend_activation_link")),5),mn,a("a",{id:"update_email",style:C(t.linkStyle),href:"javascript:void(0)",onClick:s[1]||(s[1]=V=>r.showField())},n(e.lang("update-email-address")),5)]))]),fields:w(()=>[t.loading?(l(),i("div",pn,[d(y,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:50},null,8,["color"])])):h("",!0)]),_:1})),t.updateEmail?(l(),P(v,{key:1},{title:w(()=>[a("h3",yn,n(e.lang(t.title)),1),t.loading?h("",!0):(l(),i("p",fn,n(e.trans("update-verification-message")),1))]),fields:w(()=>[z((l(),i("div",{class:c({align1:t.lang_locale==="ar"})},[t.loading?h("",!0):(l(),P(k,{key:0,label:e.lang("new_email_address"),value:t.email_address,"input-style":t.inputStyle,type:"email",name:"email_address",onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"",required:!0,id:"new_email_address"},null,8,["label","value","input-style","onChange","placehold"])),t.loading?h("",!0):(l(),P(k,{key:1,label:e.lang("current_password"),value:t.password,"input-style":t.inputStyle,type:"password",name:"password",keyupListener:r.triggerEvent,onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"",required:!0,id:"current_password"},null,8,["label","value","input-style","keyupListener","onChange","placehold"]))],2)),[[T]]),t.loading?(l(),i("div",bn,[d(y,{"animation-duration":4e3,color:o.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0)]),controls:w(()=>[t.loading?h("",!0):(l(),i("div",vn,[a("div",{class:c(["col-xs-6 col-sm-6 col-md-8",{align1:t.lang_locale==="ar"}])},[d(D,{to:"/auth/login",style:C(t.linkStyle),id:"email_verify_login_link"},{default:w(()=>[f(n(e.lang("account_activated")),1)]),_:1},8,["style"])],2),a("div",{class:c(["col-xs-6 col-sm-6 col-md-4 pull-right",{left:t.lang_locale==="ar"}])},[a("button",{id:"email_update_btn",class:"btn btn-custom btn-block btn-flat",onClick:s[2]||(s[2]=(...V)=>r.onSubmit&&r.onSubmit(...V)),style:C(t.buttonStyle)},n(e.lang("update")),5)],2)]))]),_:1})):h("",!0)])],2)):h("",!0)])}const wn=S(nn,[["render",kn],["__scopeId","data-v-c068c3a0"]]);function Cn(e){const{first_name:s}=e;let o={first_name:[s,"isRequired"]};const m=new ge(L),{errors:t,isValid:r}=m.validate(o);return he.dispatch("setValidationError",t),{errors:t,isValid:r}}const Sn={name:"image-crop",description:"Image cropper component",props:{name:{type:String,required:!0},onChange:{type:Function,Required:!0},value:{type:[Object,String],default:""},classname:{type:[String,Object],default:""},language:{type:String,default:""},btnStyle:{type:Object,default:()=>{}}},data(){return{base:window.axios.defaults.baseURL,selectedFile:this.value,showModal:!1,containerStyle:{width:"800px"},crop:{width:"400px",height:"300px"},imageSrc:"",cropImg:"",resultImage:"",aspectRatio:0}},mounted(){this.selectedFile=this.value},watch:{value(e){this.selectedFile=e}},methods:{onFileSelected(e){const s=e.target.files[0];if(!s.type.includes("image/")){alert("Please select an image file");return}if(typeof FileReader=="function"){this.showModal=!0,window.emitter.emit("cropModalChanged","");var o=this.$refs.fileInput;this.selectedFile=s;const m=new FileReader;m.onload=t=>{this.imageSrc=t.target.result,this.$refs.cropper.replace(t.target.result)},m.readAsDataURL(s),o.value=""}else alert("Sorry, FileReader API not supported")},cropImage(){this.cropImg=this.$refs.cropper.getCroppedCanvas().toDataURL()},rotateImage(){this.$refs.cropper.rotate(90)},onClose(){this.showModal=!1,window.emitter.emit("cropModalChanged","form_border")},onSubmit(){var e=this.cropImg,s=e.split(";"),o=s[0].split(":")[1],m=s[1].split(",")[1];this.resultImage=this.b64toBlob(m,o);const t={};t.name=this.selectedFile.name,t.image=this.cropImg,t.file=this.resultImage,this.onChange(t,this.name),this.onClose()},b64toBlob(e,s,o,m){o=o||"",m=m||512;for(var t=atob(e),r=[],g=0;g<t.length;g+=m){for(var p=t.slice(g,g+m),b=new Array(p.length),y=0;y<p.length;y++)b[y]=p.charCodeAt(y);var v=new Uint8Array(b);r.push(v)}var k=new Blob(r,{type:o});return k},changeRatio(e){this.$refs.cropper.setAspectRatio(e),this.aspectRatio=e}},components:{VueCropper:zt,modal:Ge,loader:le,"faveo-image-element":be}},Ze=e=>(j("data-v-74367811"),e=e(),M(),e),Dn={class:"user-block"},Pn=Ze(()=>a("i",{class:"fas fa-edit"},null,-1)),In={class:""},An={class:"rotate-button"},Tn=Ze(()=>a("i",{class:"fas fa-sync-alt"},null,-1)),On=Ze(()=>a("i",{class:"fa fa-check"},null,-1));function xn(e,s,o,m,t,r){const g=u("faveo-image-element"),p=u("vue-cropper"),b=u("modal");return l(),i("div",{class:c(o.classname)},[a("input",{ref:"fileInput",type:"file",onChange:s[0]||(s[0]=(...y)=>r.onFileSelected&&r.onFileSelected(...y)),multiple:"",style:{display:"none"}},null,544),a("div",Dn,[d(g,{id:"image",classes:["img-circle"],"source-url":o.value,"alternative-text":"User Image"},null,8,["source-url"])]),a("button",{"data-toggle":"modal",onClick:s[1]||(s[1]=y=>e.$refs.fileInput.click()),class:"btn-bs-file btn btn-sm btn-light",id:"crop_change_img"},[Pn,f(" "+n(e.lang("change_image")),1)]),t.showModal?(l(),P(b,{key:0,showModal:t.showModal,onClose:r.onClose,containerStyle:t.containerStyle,language:o.language},{title:w(()=>[a("div",null,[a("h4",null,n(e.lang("profile_pic")),1)])]),fields:w(()=>[a("div",In,[d(p,{ref:"cropper",guides:!0,"view-mode":2,"drag-mode":"crop","auto-crop":!0,"auto-crop-area":.5,"min-container-width":570,"min-container-height":300,background:!0,rotatable:!0,src:t.imageSrc,"img-style":t.crop,crop:r.cropImage},null,8,["src","img-style","crop"])]),a("div",An,[t.imageSrc?(l(),i("button",{key:0,onClick:s[2]||(s[2]=(...y)=>r.rotateImage&&r.rotateImage(...y)),id:"rotate"},[Tn,f(" "+n(e.trans("rotate")),1)])):h("",!0),t.imageSrc?(l(),i("button",{key:1,onClick:s[3]||(s[3]=y=>r.changeRatio(0)),id:"ratio",class:c([{active:t.aspectRatio===0},"m-1"])},"  "+n(e.trans("no_ratio")),3)):h("",!0),t.imageSrc?(l(),i("button",{key:2,onClick:s[4]||(s[4]=y=>r.changeRatio(1)),id:"ratio",class:c([{active:t.aspectRatio===1},"m-1"])},"  "+n("1:1 "+e.trans("ratio")),3)):h("",!0),t.imageSrc?(l(),i("button",{key:3,onClick:s[5]||(s[5]=y=>r.changeRatio(2)),id:"ratio",class:c([{active:t.aspectRatio===2},"m-1"])},"  "+n("16:9 "+e.trans("ratio")),3)):h("",!0)])]),controls:w(()=>[a("button",{type:"button",onClick:s[6]||(s[6]=(...y)=>r.onSubmit&&r.onSubmit(...y)),class:c(["btn btn-custom float-right",{left:o.language==="ar"}]),style:C(o.btnStyle),id:"crop_action"},[On,f(" "+n(e.lang("proceed")),1)],6)]),_:1},8,["showModal","onClose","containerStyle","language"])):h("",!0)],2)}const Ln=S(Sn,[["render",xn],["__scopeId","data-v-74367811"]]);const Vn={name:"edit-profile",description:"Profile edit component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{loading:!0,first_name:"",last_name:"",email:"",country_code:91,mobile:"",phone_number:"",ext:"",profile_pic:"",profile_pic_name:"",btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},selectedImage:"",language:this.layout.language,iso:""}},watch:{},beforeMount(){this.$Progress.start(),this.updateStatesWithData(this.auth.user_data)},created(){window.emitter.on("clientFormSubmitted",this.updateUserData)},methods:{updateStatesWithData(e){const s=this,o=this.$data;Object.keys(e).map(m=>{o.hasOwnProperty(m)&&(s[m]=e[m])}),this.mobile=this.mobile==="Not available"?"":this.mobile,this.country_code=this.country_code===""?91:this.country_code,this.loading=!1,this.$Progress.finish()},onChange(e,s){s==="profile_pic"?(this.profile_pic=e.image,this.selectedImage=e,this.onUpdate()):this[s]=e},getCountCode(e){this.country_code=e},getCountIso(e){this.iso=e},isValid(){const{errors:e,isValid:s}=Cn(this.$data);return!!s},onUpdate(){if(this.isValid()){this.isDisabled=!0,this.loading=!0,this.$Progress.start();var e=new FormData;this.selectedImage&&e.append("profile_pic",this.selectedImage.file,this.selectedImage.name),A.post("api/profile-image/edit",e).then(s=>{this.$Progress.finish(),G(s,"edit_profile"),this.updateUserData()}).catch(s=>{this.$Progress.fail(),this.loading=!1,this.isDisabled=!1,B(s,"edit_profile")})}},updateUserData(){this.$Progress.start(),A.get("/api/get-auth-info").then(e=>{this.loading=!1,this.isDisabled=!1,this.updateStatesWithData(e.data.data.user_data),window.emitter.emit("updateUserData",e.data.data.user_data),window.emitter.emit("updateProfileData",e.data.data),this.$Progress.finish()}).catch(e=>{this.loading=!1,this.isDisabled=!1,this.$Progress.fail()})}},components:{"faveo-form-client-panel":De,"text-field":Q,"radio-button":Qt,"number-field":Jt,phoneWithCountryCode:Zt,"image-crop":Ln,"client-panel-loader":le}},jn={id:"content",class:"site-content col-md-12"},$n={class:"row"},Mn={key:0,class:"row"};function En(e,s,o,m,t,r){const g=u("image-crop"),p=u("faveo-form-client-panel"),b=u("client-panel-loader");return l(),i("div",jn,[a("div",$n,[a("div",{class:c(["col-sm-3",{float1:t.language==="ar"}])},[d(g,{value:t.profile_pic,name:"profile_pic",onChange:r.onChange,classname:{float1:t.language==="ar"},language:t.language,"btn-style":t.btnStyle},null,8,["value","onChange","classname","language","btn-style"])],2),a("div",{class:c(["col-md-9",{"edit_pro align1":t.language==="ar"}])},[d(p,{panel:"client",category:"requester",editApiEndpoint:"/user/edit/api/"+o.auth.user_data.id,disableEmail:!0,layout:o.layout,inputStyle:t.inputStyle,btnStyle:t.btnStyle,scenario:"edit",editId:o.auth.user_data.id},null,8,["editApiEndpoint","layout","inputStyle","btnStyle","editId"])],2)]),t.loading===!0?(l(),i("div",Mn,[d(b,{color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0)])}const Fn=S(Vn,[["render",En],["__scopeId","data-v-877e04b7"]]);const Rn={name:"change-password",description:"Channge password component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{old_password:"",new_password:"",confirm_password:"",loading:!1,isDisabled:!1,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},language:this.layout.language}},methods:{onChange(e,s){this[s]=e},isValid(){const{errors:e,isValid:s}=la(this.$data);return!!s},onUpdate(){if(this.isValid())if(this.old_password!==this.new_password)if(this.new_password===this.confirm_password){this.isDisabled=!0,this.loading=!0,this.$Progress.start();const e={};e.old_password=this.old_password,e.new_password=this.new_password,e.confirm_password=this.confirm_password,axios.post("api/password/change",e).then(s=>{this.$Progress.finish(),this.loading=!1,this.isDisabled=!1,G(s,"edit_profile"),setTimeout(()=>{this.$store.dispatch("deleteUser"),this.$store.dispatch("updateUser")},2e3)}).catch(s=>{this.$Progress.fail(),this.loading=!1,this.isDisabled=!1,B(s,"edit_profile")})}else this.$store.dispatch("setValidationError",{confirm_password:"Password does not match"});else this.$store.dispatch("setValidationError",{new_password:"new password is same as old. Please choose a different password"})}},components:{"text-field":Q,"client-panel-loader":le}},bt=e=>(j("data-v-c61f3c52"),e=e(),M(),e),zn={class:"row"},Nn={key:0,class:"row"},Un=bt(()=>a("hr",null,null,-1)),Bn=bt(()=>a("i",{class:"fas fa-sync"},null,-1));function qn(e,s,o,m,t,r){const g=u("text-field"),p=u("client-panel-loader"),b=Z("focus-first-input");return l(),i("div",{id:"content",class:c(["site-content col-md-12",{"edit_pass align1":t.language==="ar"}])},[z((l(),i("div",zn,[d(g,{label:e.lang("old_password"),value:t.old_password,type:"password",name:"old_password",onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",required:!0,inputStyle:t.inputStyle,id:"client_change_pass_old"},null,8,["label","value","onChange","placehold","inputStyle"]),d(g,{label:e.lang("new_password"),value:t.new_password,type:"password",name:"new_password",onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",required:!0,inputStyle:t.inputStyle,id:"client_change_pass_new"},null,8,["label","value","onChange","placehold","inputStyle"]),d(g,{label:e.lang("confirm_password"),value:t.confirm_password,type:"password",id:"client_change_pass_confirm",name:"confirm_password",onChange:r.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",required:!0,inputStyle:t.inputStyle},null,8,["label","value","onChange","placehold","inputStyle"])])),[[b]]),t.loading===!0?(l(),i("div",Nn,[d(p,{color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0),a("div",null,[Un,a("button",{onClick:s[0]||(s[0]=y=>r.onUpdate()),class:c(["btn btn-custom float-right",{left:t.language==="ar"}]),style:C(t.buttonStyle),id:"client_change_pass_action"},[Bn,f(" "+n(e.lang("update")),1)],6)])],2)}const Hn=S(Rn,[["render",qn],["__scopeId","data-v-c61f3c52"]]),Wn={name:"recovery-modal",description:"RecoveryCode Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},color:{type:String,default:"#1d78ff"},buttonStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},linkStyle:{type:Object,default:()=>{}},from:{type:String,default:""},containerStyle:{type:Object,default:()=>{}}},data(){return{loading:!1,verifyLoader:!1,recoveryCode:"",copied:!1,passwordVerified:!1,password:"",showPasswordVerify:!1}},beforeMount(){this.getRequiredPass()},methods:{onChange(e,s){this[s]=e},getRequiredPass(){this.loading=!0,A.get("/show/verify-password").then(e=>{this.passwordVerified=!0,this.getRecoveryCode()}).catch(e=>{this.showPasswordVerify=!0,this.loading=!1})},getRecoveryCode(){this.loading=!0,A.get("/get-recovery-code").then(e=>{this.recoveryCode=e.data.data.code,this.loading=!1}).catch(e=>{this.loading=!1})},generateRecoveryCode(){this.loading=!0,A.post("/2fa-recovery-code").then(e=>{this.recoveryCode=e.data.data.code,this.loading=!1}).catch(e=>{this.loading=!1})},copyToClipboard(){Nt(this.recoveryCode),this.copied=!0,this.showCopyIconAfterCopying()},showCopyIconAfterCopying(){setTimeout(()=>{this.copied=!1},5e3)},printRecovery(){var e=window.open("","","left=0,top=0,width=800,height=600,toolbar=0,scrollbars=0,status=0");e.document.write(this.recoveryCode),e.document.close(),e.focus(),e.print(),setTimeout(function(){e.close()},5)},validatePass(){this.verifyLoader=!0;const e={};e.password=this.password,A.post("/verify/password",e).then(s=>{this.passwordVerified=!0,this.verifyLoader=!1,this.showPasswordVerify=!1,this.getRecoveryCode()}).catch(s=>{this.passwordVerified=!1,this.verifyLoader=!1,this.$store.dispatch("setValidationError",{password:"Incorrect password."})})}},components:{"text-field":Q}},Kn={class:"modal-title"},Gn={key:0},Qn=a("p",null,"Recovery code can be used only once. Make sure to generate a new one each time you use the code to login.",-1),Jn={class:"card card-light"},Zn={class:"card-header"},Yn={class:"card-title"},Xn={class:"card-tools"},er=["href"],tr=a("i",{class:"fas fa-download"},null,-1),ar=[tr],or=a("i",{class:"fas fa-list-ul"},null,-1),sr=[or],lr={class:"card-body"},ir={class:"row"},nr={class:"col-sm-6 text-center"},rr={key:1,class:"row"},cr={key:2,class:"row"},dr=["disabled"],ur=a("i",{class:"fas fa-check"},null,-1);function _r(e,s,o,m,t,r){const g=u("text-field"),p=u("reuse-loader"),b=u("custom-loader"),y=u("modal"),v=Z("tooltip");return o.showModal?(l(),P(y,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:o.containerStyle},dt({title:w(()=>[a("h4",Kn,n(e.trans("recovery_code")),1)]),fields:w(()=>[t.loading?h("",!0):(l(),i(I,{key:0},[!t.showPasswordVerify&&t.passwordVerified?(l(),i("div",Gn,[Qn,a("div",Jn,[a("div",Zn,[a("h3",Yn,n(e.trans("recovery_codes")),1),a("div",Xn,[z((l(),i("a",{href:e.basePath()+"/2fa/downloadRecoveryCode",class:"btn btn-tool",target:"_blank"},ar,8,er)),[[v,e.trans("download")]]),z((l(),i("button",{onClick:s[0]||(s[0]=qe((...k)=>r.copyToClipboard&&r.copyToClipboard(...k),["prevent"])),class:"btn btn-tool"},[a("i",{class:c(t.copied?"fas fa-check":"fas fa-clipboard")},null,2)])),[[v,e.trans("copy")]]),z((l(),i("button",{class:"btn btn-tool",onClick:s[1]||(s[1]=(...k)=>r.generateRecoveryCode&&r.generateRecoveryCode(...k))},sr)),[[v,e.trans("generate_new")]])])]),a("div",lr,[a("div",ir,[(l(!0),i(I,null,O(t.recoveryCode,k=>(l(),i("div",nr,[a("p",null,n(k),1)]))),256))])])])])):h("",!0),t.showPasswordVerify&&!t.passwordVerified?(l(),P(g,{key:1,label:e.lang("to_continue_first_verify"),value:t.password,type:"password",name:"password",autofocus:!0,placehold:"Enter Password...",onChange:r.onChange,inputStyle:o.inputStyle,classname:"col-sm-12"},null,8,["label","value","onChange","inputStyle"])):h("",!0)],64)),t.loading?(l(),i("div",rr,[d(p,{"animation-duration":4e3,size:60,color:o.color},null,8,["color"])])):h("",!0),t.verifyLoader?(l(),i("div",cr,[d(b,{duration:4e3,color:o.color},null,8,["color"])])):h("",!0)]),_:2},[t.passwordVerified?void 0:{name:"controls",fn:w(()=>[a("button",{type:"button",class:c([{"btn-primary pull-right float-right":o.from!=="client"},{"btn-custom  pull-right float-right":o.from==="client"}]),disabled:!t.password,onClick:s[2]||(s[2]=k=>r.validatePass()),style:C(o.buttonStyle)},[ur,f(" "+n(e.trans("validate")),1)],14,dr)]),key:"0"}]),1032,["showModal","onClose","containerStyle"])):h("",!0)}const hr=S(Wn,[["render",_r]]);const gr={name:"two-step",description:"Two step verifiction Setup page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{containerStyle:{width:"800px"},two_factor:!1,showModal:!1,removeModal:!1,loading:!1,lineStyle:{borderColor:this.layout.portal.client_header_color},linkStyle:{color:this.layout.portal.client_header_color},buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},counter:0,showRecoveryModal:!1}},beforeMount(){this.two_factor=this.authData.user_data.is_2fa_enabled},created(){window.emitter.on("updateEditData",this.updateUserData),window.emitter.on("togglingSMS",e=>{this.authData.is_otp_verification_enabled=e})},computed:{authData(){return this.auth},...W(["formattedTime"])},methods:{turnOnMethod(){this.showModal=!0,window.emitter.emit("cropModalChanged","")},turnOffMethod(){this.removeModal=!0,window.emitter.emit("cropModalChanged","")},showRecoveryMethod(){this.showRecoveryModal=!0,window.emitter.emit("cropModalChanged","")},updateUserData(e){this.two_factor=e,this.$store.dispatch("deleteUser"),this.authData.user_data.is_2fa_enabled=e,this.authData.user_data.google2fa_activation_date=new Date,this.$store.dispatch("updateUserData",this.authData),this.counter++},onClose(){this.showModal=!1,this.removeModal=!1,this.showRecoveryModal=!1,this.$store.dispatch("unsetValidationError"),window.emitter.emit("cropModalChanged","form_border")},twoStepBoxVisible(){window.emitter.emit("2step-box-mounted",{alert:"edit_profile",user:this.authData,layout:this.layout})}},components:{"barcode-modal":ra,"remove-modal":ia,"recovery-modal":hr,"custom-loader":je}},Ye=e=>(j("data-v-d69aac54"),e=e(),M(),e),mr={id:"content1",class:"site-content col-md-12"},pr={key:0,class:"col-sm-12"},yr={key:1,class:"col-sm-8 offset-md-2"},fr={id:"form-border",class:"comment-respond form-border"},br={id:"reply-title",class:"comment-reply-title section-title"},vr={class:"row"},kr={class:"col-sm-9"},wr={class:"d_flex"},Cr=["src"],Sr={class:"col-sm-3"},Dr=["disabled"],Pr=Ye(()=>a("i",{class:"fa fa-toggle-on"},null,-1)),Ir=Ye(()=>a("i",{class:"fa fa-power-off"},null,-1)),Ar={key:0,class:"col-sm-12 mt-4"},Tr=Ye(()=>a("i",{class:"fas fa-eye"},null,-1)),Or={id:"2step-boxes"};function xr(e,s,o,m,t,r){const g=u("custom-loader"),p=u("barcode-modal"),b=u("remove-modal"),y=u("recovery-modal"),v=Z("tooltip");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",mr,[(l(),i("div",{class:"row",key:t.counter},[t.loading?(l(),i("div",pr,[d(g,{duration:4e3,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.loading?h("",!0):(l(),i("div",yr,[a("div",fr,[a("h3",br,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("2fa_setup")),1)]),a("div",vr,[a("div",kr,[a("span",wr,[a("img",{class:"img-responsive img-sm",src:e.basePathVersion()+"/themes/default/common/images/authenticator.png",alt:"A",id:"auth_img"},null,8,Cr),f("  "+n(t.two_factor?e.lang("2-step_is_on_since")+e.formattedTime(r.authData.user_data.google2fa_activation_date):e.lang("authenticator_app")),1)])]),a("div",Sr,[t.two_factor?h("",!0):z((l(),i("button",{key:0,type:"button",class:"btn btn-custom pull-right",style:C(t.buttonStyle),onClick:s[0]||(s[0]=(...k)=>r.turnOnMethod&&r.turnOnMethod(...k)),disabled:r.authData.is_otp_verification_enabled,id:"two_step_on"},[Pr,f(" "+n(e.lang("turn_on")),1)],12,Dr)),[[v,e.lang("google_2fa_tooltip_for_status_"+!r.authData.is_otp_verification_enabled)]]),t.two_factor?(l(),i("button",{key:1,type:"button",class:"btn btn-danger pull-right",onClick:s[1]||(s[1]=(...k)=>r.turnOffMethod&&r.turnOffMethod(...k)),id:"two_step_off"},[Ir,f(" "+n(e.lang("turn_off")),1)])):h("",!0)]),t.two_factor?(l(),i("div",Ar,[a("button",{class:"btn btn-custom",style:C(t.buttonStyle),onClick:s[2]||(s[2]=(...k)=>r.showRecoveryMethod&&r.showRecoveryMethod(...k))},[Tr,f(" "+n(e.lang("view_recovery_code")),1)],4)])):h("",!0)]),a("div",Or,n(r.twoStepBoxVisible()),1)])]))])),d(te,{name:"modal"},{default:w(()=>[t.showModal?(l(),P(p,{key:0,onClose:r.onClose,showModal:t.showModal,color:o.layout.portal.client_header_color,"button-style":t.buttonStyle,inputStyle:t.inputStyle,linkStyle:t.linkStyle,from:"client"},null,8,["onClose","showModal","color","button-style","inputStyle","linkStyle"])):h("",!0)]),_:1}),d(te,{name:"modal"},{default:w(()=>[t.removeModal?(l(),P(b,{key:0,onClose:r.onClose,showModal:t.removeModal,alertName:"edit_profile",color:o.layout.portal.client_header_color,inputStyle:t.inputStyle,from:"client",buttonStyle:t.buttonStyle},null,8,["onClose","showModal","color","inputStyle","buttonStyle"])):h("",!0)]),_:1}),d(te,{name:"modal"},{default:w(()=>[t.showRecoveryModal?(l(),P(y,{key:0,onClose:r.onClose,showModal:t.showRecoveryModal,from:"client","input-style":t.inputStyle,buttonStyle:t.buttonStyle,containerStyle:t.containerStyle},null,8,["onClose","showModal","input-style","buttonStyle","containerStyle"])):h("",!0)]),_:1})])]),_:1})}const Lr=S(gr,[["render",xr],["__scopeId","data-v-d69aac54"]]);const Vr={name:"client-profile",description:"Client profile component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{current:"edit_profile",tabs:[{title:"edit_profile"},{title:"change_password"},{title:"2-step_verification"},{title:"login-logs"}],language:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lineStyle:{borderColor:this.layout.portal.client_header_color},linkStyle:{color:this.layout.portal.client_header_color},panel:"client"}},computed:{currentTabComponent(){return this.current==="edit_profile"?"edit-profile":this.current==="change_password"?"change-password":this.current==="2-step_verification"?"two-step":"login-logs"}},methods:{onTabChange(e){this.$store.dispatch("unsetAlert"),this.current=e}},components:{"edit-profile":Fn,"change-password":Hn,"two-step":Lr,"login-logs":na}},jr={class:"nav nav-tabs"},$r={class:"nav-item"},Mr=["id","onClick"],Er={class:"tab-content"},Fr={class:"active tab-pane"};function Rr(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert");return l(),i("div",{class:c(["nav-tabs-custom",{pro_align:t.language==="ar"}])},[d(g,{dynamic_title:e.lang("client-profile-title"),layout:o.layout,dynamic_description:e.lang("client-profile-description")},null,8,["dynamic_title","layout","dynamic_description"]),d(p,{componentName:"edit_profile"}),d(p,{componentName:"faveo-form"}),a("ul",jr,[(l(!0),i(I,null,O(t.tabs,(b,y)=>(l(),i("li",$r,[a("a",{id:"client_profile_tab_"+y,class:c([{active:t.current===b.title,float1:t.language==="ar"},"nav-link cur_tab"]),"data-toggle":"tab",onClick:v=>r.onTabChange(b.title),href:"javascript:;"},n(e.lang(b.title)),11,Mr)]))),256))]),a("div",Er,[a("div",Fr,[a("div",{class:c({row:t.current!="login-logs","mt-3":t.current=="login-logs"})},[(l(),P(Ut(r.currentTabComponent),{layout:o.layout,inputStyle:t.inputStyle,panel:t.panel,btnStyle:t.btnStyle,auth:o.auth,userId:o.auth.user_data.id,alertName:"edit_profile",showBtn:!0},null,8,["layout","inputStyle","panel","btnStyle","auth","userId"]))],2)])])],2)}const zr=S(Vr,[["render",Rr],["__scopeId","data-v-b0438e12"]]);const Nr={name:"category-box",description:"This component shows the category list with articles",props:{layout:{type:Object,default:()=>{}},classname:{type:String,default:""},onLoaded:{type:Function,default:()=>{}}},data(){return{categories:{},categoryList:[],buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},lineStyle:{borderColor:this.layout.portal.client_header_color,width:"35%"},linkStyle:{color:this.layout.portal.client_header_color},perpage:0,pagination:1,records:0,paramsObj:{},loading:!0,hasDataPopulated:!1,lang_locale:this.layout.language,sub_str_length:0,pageChange:!1}},created(){this.kbApi()},methods:{subString(e){return Y(e,20)},subStringChild(e){return this.$route.path==="/category-list"?Y(e,60):Y(e,40)},kbApi(e){var s=e;this.$Progress.start(),A.get("api/category-list-with-articles",{params:s}).then(o=>{this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.categories=o.data.data.categories,this.categoryList=o.data.data.categories.data,this.onLoaded(this.categories.total);for(let m in this.categoryList)this.categoryList[m].children.length?this.categoryList[m].articles.length?(this.categoryList[m].children=this.categoryList[m].children.splice(0,3),this.categoryList[m].articles=this.categoryList[m].articles.splice(0,3)):this.categoryList[m].children=this.categoryList[m].children.splice(0,6):this.categoryList[m].articles=this.categoryList[m].articles.splice(0,6);this.records=this.categories.total,this.perpage=this.categories.per_page,this.$Progress.finish()}).catch(o=>{this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.$Progress.fail()})},pageChanged(){this.pageChange=!0,this.paramsObj.page=this.pagination,this.kbApi(this.paramsObj);var e=document.getElementById("categories");e.scrollIntoView({behavior:"smooth"})}}},me=e=>(j("data-v-f420747b"),e=e(),M(),e),Ur={key:0,class:"row"},Br={key:1},qr={style:{"text-align":"center"}},Hr=me(()=>a("br",null,null,-1)),Wr={class:"row"},Kr={class:"box-categories"},Gr=me(()=>a("i",{class:"far fa-folder-open fa-fw text-muted pr-1"},null,-1)),Qr=me(()=>a("i",{class:"far fa-hdd fa-fw"},null,-1)),Jr={key:0,id:"list",class:"fa-ul"},Zr={key:1,class:"fa-ul",id:"list"},Yr={class:"more-link text-center"},Xr={key:3},ec=me(()=>a("br",null,null,-1)),tc=me(()=>a("br",null,null,-1)),ac=me(()=>a("br",null,null,-1)),oc=me(()=>a("br",null,null,-1)),sc=[ec,tc,ac,oc];function lc(e,s,o,m,t,r){const g=u("client-panel-loader"),p=u("router-link"),b=u("uib-pagination");return l(),i("div",null,[t.pageChange?(l(),i("div",Ur,[d(g,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),!t.hasDataPopulated||t.loading?(l(),i("div",Br,[a("h3",qr,n(e.lang("loading_data")),1),Hr])):h("",!0),a("div",Wr,[t.hasDataPopulated?(l(!0),i(I,{key:0},O(t.categoryList,(y,v)=>(l(),i("div",{class:c([o.classname,{float1:t.lang_locale=="ar"}]),key:v},[a("section",Kr,[a("h1",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),Gr,a("small",{class:c([{left:t.lang_locale=="ar"},"pull-right float-right"])},[d(p,{to:{name:"Category",params:{slug:y.slug}},style:C(t.linkStyle)},{default:w(()=>[Qr,f(" ("+n(y.articles.length)+") ",1)]),_:2},1032,["to","style"])],2),d(p,{title:y.name,to:{name:"Category",params:{slug:y.slug}},style:C(t.linkStyle),id:"kb_category_box_category_link-"+v},{default:w(()=>[f(n(r.subString(y.name)),1)]),_:2},1032,["title","to","style","id"])],2),y.articles.length||y.children.length?(l(),i("ul",Jr,[(l(!0),i(I,null,O(y.children,k=>(l(),i("li",null,[a("h3",{id:"0",class:c([{align1:t.lang_locale=="ar"},"h5"]),style:{"text-align":"left"}},[a("i",{class:c([{art:t.lang_locale=="ar"},"fa-li fas fa-folder-open fa-fw text-muted pr-1"])},null,2),d(p,{id:"child_cat_name",to:{name:"Category",params:{slug:k.slug}},title:k.name},{default:w(()=>[f(n(r.subStringChild(k.name)),1)]),_:2},1032,["to","title"])],2)]))),256)),(l(!0),i(I,null,O(y.articles,k=>(l(),i("li",null,[a("h3",{class:c([{align1:t.lang_locale=="ar"},"h5 cat_box_art_name"])},[a("i",{class:c([{art:t.lang_locale=="ar"},"fa-li fa fa-list-alt fa-fw text-muted"])},null,2),d(p,{to:{name:"Articles",params:{slug:k.slug}},title:k.name,id:"kb_category_box_article_link_"+y.id+"_"+k.id},{default:w(()=>[f(n(r.subStringChild(k.name)),1)]),_:2},1032,["to","title","id"])],2)]))),256))])):(l(),i("ul",Zr,[a("li",null,[a("p",{class:c({align1:t.lang_locale=="ar"}),style:{"text-align":"left"}},n(e.lang("no_articles")),3)])])),a("p",Yr,[d(p,{to:{name:"Category",params:{slug:y.slug}},class:"btn btn-custom btn-sm",style:C(t.buttonStyle),id:"kb_category_box_view_all_"+v},{default:w(()=>[f(n(e.lang("view_all")),1)]),_:2},1032,["to","style","id"])])])],2))),128)):h("",!0)]),t.records>10&&t.loading===!1?(l(),i("div",{key:2,class:c([t.lang_locale==="ar"?"page_left":"kb_page"])},[d(b,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=y=>t.pagination=y),class:"pagination","boundary-links":!0,"per-page":t.perpage,onPaginate:s[1]||(s[1]=y=>r.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])],2)):h("",!0),t.records>10&&t.loading===!1?(l(),i("div",Xr,sc)):h("",!0)])}const vt=S(Nr,[["render",lc],["__scopeId","data-v-f420747b"]]);const ic={name:"category-sidebar",description:"This component shows the top 10 categories in the category list ",props:{classname:{type:String},categoryList:{type:Array,required:!0},categorylength:{type:Number,required:!0},layout:{type:Object,default:()=>{}}},data(){return{lineStyle:{borderColor:this.layout.portal.client_header_color},badgeStyle:{backgroundColor:this.layout.portal.client_header_color},lang_locale:this.layout.language}},methods:{subString(e){return Y(e,18)}}},nc=e=>(j("data-v-c46cba2f"),e=e(),M(),e),rc={class:"widget-area"},cc={id:"section-categories",class:"section"},dc=nc(()=>a("i",{class:"far fa-hdd fa-fw"},null,-1)),uc=[dc],_c={class:"d-flex justify-content-between align-items-center"};function hc(e,s,o,m,t,r){const g=u("router-link");return l(),i("div",{class:c(o.classname)},[a("div",rc,[a("section",cc,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("categories"))+" ("+n(o.categorylength)+") ",1),a("small",{class:c([{left:t.lang_locale=="ar"},"float-right"])},uc,2)],2),a("ul",{class:c(["nav nav-pills nav-stacked nav-categories",{padd:t.lang_locale=="ar"}])},[(l(!0),i(I,null,O(o.categoryList.slice(0,10),(p,b)=>(l(),i("li",_c,[d(g,{title:p.name,to:{name:"Category",params:{slug:p.slug}},id:"kb_sidebar_category_link-"+b,class:c(["list-group-item list-group-item-action",{align1:t.lang_locale=="ar"}])},{default:w(()=>[a("span",{class:c([{left:t.lang_locale=="ar"},"badge badge-pill pull-right float-right"]),id:"side_badge",style:C(t.badgeStyle)},n(p.articles_count),7),f(" "+n(r.subString(p.name)),1)]),_:2},1032,["title","to","id","class"])]))),256))],2)])])],2)}const Ee=S(ic,[["render",hc],["__scopeId","data-v-c46cba2f"]]);const gc={name:"tags-sidebar",description:"This component shows the top 10 tags in the tags list ",props:{classname:{type:String},layout:{type:Object,default:()=>{}}},data(){return{lineStyle:{borderColor:this.layout.portal.client_header_color},badgeStyle:{backgroundColor:this.layout.portal.client_header_color},lang_locale:this.layout.language,tagsList:""}},beforeMount(){this.getTags()},methods:{getTags(){A.get("/api/tag-list").then(e=>{this.tagsList=e.data.data.tags}).catch(e=>{this.tagsList=""})},subString(e){return Y(e,20)}}},mc=e=>(j("data-v-57d5754e"),e=e(),M(),e),pc={class:"tags-sidebar"},yc={class:"widget-area"},fc={class:"section-title h4 clearfix"},bc=mc(()=>a("i",{class:"fa fa-hdd-o fa-fw"},null,-1)),vc=[bc],kc={class:"tagcloud"},wc={key:1,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}};function Cc(e,s,o,m,t,r){const g=u("router-link"),p=u("loader");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",pc,[a("div",{class:c(o.classname)},[a("div",yc,[a("section",{id:"section-tags",class:c(["section",{tagsidebar:t.lang_locale=="ar"}])},[t.tagsList?(l(),i(I,{key:0},[a("h2",fc,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("tags"))+" ",1),a("small",{class:c([{left:t.lang_locale=="ar"},"pull-right"])},vc,2)]),a("div",kc,[(l(!0),i(I,null,O(t.tagsList.slice(0,10),(b,y)=>(l(),P(g,{title:b.name,to:{name:"Tags",params:{tag_id:b.id}},id:"kb_sidebar_tag_link-"+y,class:"btn btn-tag btn-sm tag"},{default:w(()=>[f(n(r.subString(b.name)),1)]),_:2},1032,["title","to","id"]))),256))])],64)):(l(),i("div",wc,[d(p,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:30},null,8,["color"])]))],2)])],2)])]),_:1})}const kt=S(gc,[["render",Cc],["__scopeId","data-v-57d5754e"]]);const Sc={name:"popular-article-sidebar",description:"This component shows popular articles",props:{classname:{type:String},layout:{type:Object,default:()=>{}}},mounted(){this.getPopularArticles()},data(){return{lineStyle:{borderColor:this.layout.portal.client_header_color},badgeStyle:{backgroundColor:this.layout.portal.client_header_color},lang_locale:this.layout.language,articles:[]}},methods:{subString(e){return Y(e,20)},async getPopularArticles(){try{let{data:e}=await A.get("/api/popular-articles");this.articles=e.data.popular_articles}catch{}}}},Dc={class:"widget-area"},Pc={id:"section-popular-articles"},Ic={class:"list-group"},Ac=["title"];function Tc(e,s,o,m,t,r){const g=u("router-link");return t.articles.length?(l(),i("div",{key:0,class:c(o.classname)},[a("div",Dc,[a("section",Pc,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("kb_popular_articles")),1)],2),a("div",Ic,[(l(!0),i(I,null,O(t.articles,p=>(l(),P(g,{key:p.id,title:p.name,to:{name:"Articles",params:{slug:p.slug}},class:c(["list-group-item list-group-item-action article",{align1:t.lang_locale=="ar"}]),id:"kb_popular_article_"+p.id},{default:w(()=>[a("span",{title:`${p.visits} Visist(s)`,class:c([{left:t.lang_locale=="ar"},"badge badge-pill pull-right float-right"]),id:"badge",style:C(t.badgeStyle)},n(p.visits),15,Ac),f(" "+n(r.subString(p.name)),1)]),_:2},1032,["title","to","class","id"]))),128))])])])],2)):h("",!0)}const wt=S(Sc,[["render",Tc],["__scopeId","data-v-4e7c6e9a"]]);const Oc={name:"knowkwdgebase-index",description:"Knowledgebase index component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{base:"",categoryList:"",category_count:"",buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},lineStyle:{borderColor:this.layout.portal.client_header_color},create_ticket:parseInt(this.layout.allow_users_to_create_ticket.status),loading:!0,hasDataPopulated:!1,lang_locale:this.layout.language,kb_status:this.layout.kb_settings.status}},beforeMount(){this.kb_status?this.getData():this.$router.push({name:"Home"})},methods:{getData(){this.$Progress.start(),A.get("api/category-list-with-article-count").then(e=>{this.$Progress.finish(),this.loading=!1,this.hasDataPopulated=!0,this.categoryList=e.data.data.categories,this.category_count=this.categoryList.length}).catch(e=>{this.$Progress.fail(),this.loading=!1,this.hasDataPopulated=!0})}},components:{"category-box":vt,"category-sidebar":Ee,"tags-sidebar":kt,"popular-articles":wt}},xc={id:"categories"},Lc={key:0,class:"row"},Vc={class:"section"},jc={key:1},$c={style:{"text-align":"center"}},Mc={key:1,class:"row"};function Ec(e,s,o,m,t,r){const g=u("meta-component"),p=u("category-box"),b=u("router-link"),y=u("category-sidebar"),v=u("tags-sidebar"),k=u("popular-articles"),D=u("client-panel-loader");return l(),i("div",xc,[d(g,{dynamic_title:e.lang("knowledgebase-title"),dynamic_description:e.lang("knowledgebase-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),t.hasDataPopulated?(l(),i(I,{key:0},[t.category_count>0?(l(),i("div",Lc,[a("div",{id:"content",class:c([{float1:t.lang_locale=="ar"},"site-content col-md-9"])},[d(p,{layout:o.layout,auth:o.auth,classname:"col-md-6 col-sm-12 col-xs-12"},null,8,["layout","auth"]),a("section",Vc,[a("div",{class:c(["banner-wrapper banner-horizontal clearfix",{banner_align:t.lang_locale==="ar"}]),style:C(t.lineStyle)},[a("h4",{id:"banner_title",class:c(["banner-title h3",{float1:t.lang_locale=="ar"}])},n(e.lang("need_more_support"))+"‏?‏",3),a("div",{class:c(["banner-content",{float1:t.lang_locale=="ar"}])},[a("p",null,n(e.lang("if_you_did_not_find_an_answer_please_raise_a_ticket_describing_the_issue")),1)],2),a("p",null,[t.create_ticket===1||t.create_ticket===0&&!Array.isArray(o.auth.user_data)?(l(),P(b,{key:0,class:c(["btn btn-custom",{submit_tic:t.lang_locale==="ar"}]),to:"/create-ticket",style:C(t.buttonStyle),id:"kb_ticket_link"},{default:w(()=>[f(n(e.lang("submit_a_ticket")),1)]),_:1},8,["class","style"])):h("",!0)])],6)])],2),a("div",{id:"sidebar",class:c([{left:t.lang_locale=="ar"},"site-sidebar col-md-3"])},[d(y,{layout:o.layout,auth:o.auth,categoryList:t.categoryList,categorylength:t.category_count,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout","auth","categoryList","categorylength"]),d(v,{layout:o.layout,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout"]),d(k,{layout:o.layout,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout"])],2)])):(l(),i("div",jc,[a("h3",$c,n(e.lang("no-data-to-show")),1)]))],64)):h("",!0),!t.hasDataPopulated||t.loading?(l(),i("div",Mc,[d(D,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0)])}const Fc=S(Oc,[["render",Ec],["__scopeId","data-v-e24fdd7f"]]);const Rc={name:"kb-article-box",description:"This component shows the article with publish time and description",props:{layout:{type:Object,default:()=>{}},classname:{type:String},from:{type:String,default:""},tag_id:{type:[String,Number],default:""}},data(){return{articleList:"",paramsObj:{},loading:!0,perpage:0,pagination:1,records:0,lang_locale:this.layout.language,all_art:"",hasDataPopulated:!1,pageChange:!1,linkStyle:{color:this.layout.portal.client_header_color},tag_name:""}},beforeMount(){this.from&&(this.paramsObj.tag_id=this.tag_id),this.articleApi(this.paramsObj)},computed:{articleSorted:function(){return _.orderBy(this.articleList,"publish_time","desc")},...W(["formattedTime","formattedDate"])},methods:{articleApi(e){this.$Progress.start();var s=e;A.get("api/article-list-with-categories",{params:s}).then(o=>{this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.articleList=o.data.data.articles.data,this.records=o.data.data.articles.total,this.perpage=o.data.data.articles.per_page,this.tag_name=o.data.data.tag.name,this.$Progress.finish()}).catch(o=>{this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.$Progress.fail()})},pageChanged(){this.pageChange=!0,this.from&&(this.paramsObj.tag_id=this.tag_id),this.paramsObj.page=this.pagination,this.articleApi(this.paramsObj);var e=document.getElementById("articles");e.scrollIntoView({behavior:"smooth"})},convert(e){if(e)return e.length>25?e.replace(/(<\/?(?:img)[^>]*>)|<[^>]+>/ig,"$1").substring(0,250)+"....":e.replace(/(<\/?(?:img)[^>]*>)|<[^>]+>/ig,"$1")}}},zc=e=>(j("data-v-e0510704"),e=e(),M(),e),Nc={id:"articles"},Uc={key:0,class:"row"},Bc={key:1},qc={style:{"text-align":"center"}},Hc={key:0,class:"archive-header"},Wc={class:"archive-title"},Kc={key:1,class:"archive-list archive-article"},Gc={class:"entry-title h4"},Qc=["innerHTML"],Jc=["innerHTML"],Zc={class:"entry-meta text-muted"},Yc={class:"date"},Xc=zc(()=>a("i",{class:"far fa-clock fa-fw pr-1"},null,-1)),ed={key:2},td={style:{"text-align":"center"}};function ad(e,s,o,m,t,r){const g=u("client-panel-loader"),p=u("router-link"),b=u("uib-pagination");return l(),i("div",Nc,[t.pageChange?(l(),i("div",Uc,[d(g,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),!t.hasDataPopulated||t.loading?(l(),i("div",Bc,[a("h3",qc,n(e.lang("loading_data")),1)])):h("",!0),t.hasDataPopulated?(l(),i(I,{key:2},[o.from?(l(),i("header",Hc,[a("h1",Wc,n(e.lang("article_tagged"))+" : "+n(t.tag_name),1)])):h("",!0),t.articleList.length>0?(l(),i("div",Kc,[(l(!0),i(I,null,O(r.articleSorted,y=>(l(),i("article",{class:c(["hentry",{article:t.lang_locale=="ar"}])},[a("header",{class:c(["entry-header",{align1:t.lang_locale=="ar"}])},[a("i",{class:c([{float1:t.lang_locale=="ar"},"fa fa-list-alt fa-2x fa-fw float-left text-muted"])},null,2),a("h2",Gc,[d(p,{class:c({art_name:t.lang_locale=="ar"}),style:C(t.linkStyle),id:"kb_article_head_link_"+y.id,to:{name:"Articles",params:{slug:y.slug}}},{default:w(()=>[f(n(y.name),1)]),_:2},1032,["class","style","id","to"])])],2),a("blockquote",{class:c([{art_design:t.lang_locale=="ar"},"blockquote archive-description"]),id:"block"},[y.summary?(l(),i("p",{key:0,innerHTML:y.summary,class:"p_tag"},null,8,Qc)):(l(),i("p",{key:1,innerHTML:r.convert(y.description),class:"p_tag"},null,8,Jc)),a("a",null,[d(p,{to:{name:"Articles",params:{slug:y.slug}},style:C(t.linkStyle),id:"kb_article_box_article_link_"+y.id},{default:w(()=>[f(n(e.lang("read_more")),1)]),_:2},1032,["to","style","id"])])],2),a("footer",{class:c(["entry-footer",{"art_name align1":t.lang_locale=="ar"}])},[a("div",Zc,[a("span",Yc,[Xc,a("span",{class:c({date_align:t.lang_locale==="ar"})},n(e.formattedTime(y.publish_time)),3)])])],2)],2))),256))])):(l(),i("div",ed,[a("h3",td,n(e.lang("no-data-to-show")),1)])),t.records>10?(l(),i("div",{key:3,class:c(["float-right",{left:t.lang_locale=="ar"}])},[d(b,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=y=>t.pagination=y),class:"pagination","boundary-links":!0,"per-page":t.perpage,onPaginate:s[1]||(s[1]=y=>r.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])],2)):h("",!0)],64)):h("",!0)])}const od=S(Rc,[["render",ad],["__scopeId","data-v-e0510704"]]);const sd={name:"kb-articles-list",description:"Knowledgebase articles list component",props:{layout:{type:Object,default:()=>{}},from:{type:String,default:""},tag_id:{type:[String,Number],default:""}},data(){return{categoryList:[],category_count:0,loading:!0,lang_locale:this.layout.language,kb_status:this.layout.kb_settings.status,hasDataPopulated:!1}},beforeMount(){this.kb_status?this.getData():this.$router.push({name:"Home"})},methods:{getData(){this.loading=!0,this.$Progress.start(),A.get("api/category-list-with-article-count").then(e=>{this.$Progress.finish(),this.loading=!1,this.hasDataPopulated=!0,this.categoryList=e.data.data.categories,this.category_count=this.categoryList.length}).catch(e=>{this.$Progress.fail(),this.loading=!1,this.hasDataPopulated=!0})}},components:{"article-box":od,"popular-articles":wt,"category-sidebar":Ee,"tags-sidebar":kt}},ld={key:1,class:"row"},id={key:2,class:"row"},nd={class:"archive-title"};function rd(e,s,o,m,t,r){const g=u("meta-component"),p=u("client-panel-loader"),b=u("article-box"),y=u("category-sidebar"),v=u("tags-sidebar"),k=u("popular-articles");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",null,[o.from?h("",!0):(l(),P(g,{key:0,dynamic_title:e.lang("article-list-title"),layout:o.layout,dynamic_description:e.lang("article-list-description")},null,8,["dynamic_title","layout","dynamic_description"])),!t.hasDataPopulated||t.loading?(l(),i("div",ld,[d(p,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),t.hasDataPopulated?(l(),i("div",id,[a("div",{id:"content",class:c(["site-content col-md-9",{article_box:t.lang_locale==="ar"}])},[o.from?h("",!0):(l(),i("header",{key:0,class:c(["archive-header",{align1:t.lang_locale=="ar"}])},[a("h1",nd,n(e.lang("articles")),1)],2)),d(b,{layout:o.layout,from:o.from,tag_id:o.tag_id,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout","from","tag_id"])],2),a("div",{class:c([{left:t.lang_locale=="ar"},"site-sidebar col-md-3"]),id:"sidebar"},[d(y,{layout:o.layout,categoryList:t.categoryList,categorylength:t.category_count,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout","categoryList","categorylength"]),d(v,{layout:o.layout,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout"]),d(k,{layout:o.layout,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout"])],2)])):h("",!0)])]),_:1})}const Ct=S(sd,[["render",rd],["__scopeId","data-v-8ce06579"]]);const cd={props:{layout:{type:Object,default:()=>{}}},data(){return{showNoRecords:!1,lang_locale:this.layout.language,kb_status:this.layout.kb_settings.status}},beforeMount(){this.kb_status||this.$router.push({name:"Home"})},methods:{getLength(e){this.showNoRecords=!e}},components:{"category-box":vt}},dd={id:"categories"},ud={key:0,id:"content cnt",class:"site-content col-md-12"},_d={key:1},hd={style:{"text-align":"center"}};function gd(e,s,o,m,t,r){const g=u("meta-component"),p=u("category-box");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",dd,[d(g,{dynamic_title:e.lang("category-list-title"),dynamic_description:e.lang("category-list-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),t.showNoRecords?(l(),i("div",_d,[a("h3",hd,n(e.lang("no-data-to-show")),1)])):(l(),i("div",ud,[d(p,{layout:o.layout,classname:"col-md-6 col-sm-12 col-xs-12",onLoaded:r.getLength},null,8,["layout","onLoaded"])]))])]),_:1})}const md=S(cd,[["render",gd],["__scopeId","data-v-cc5d981e"]]);const pd={name:"kb-pages",description:"Knowledgebase pages component",props:{layout:{type:Object,default:()=>{}}},data(){return{loading:!0,hasDataPopulated:!1,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},lineStyle:{borderColor:this.layout.portal.client_header_color},location:"",path:"",name:"",description:"",lang_locale:this.layout.language,kb_status:this.layout.kb_settings.status,page_data:""}},beforeMount(){this.page_data=this.layout.pages;var e=this.page_data.map(o=>o.slug);e.includes(this.$route.params.slug)?this.kb_status?this.pageData():this.$router.push({name:"Home"}):this.$router.push({name:"NotFound"})},methods:{pageData(){this.$Progress.start(),this.loading=!0,this.path=location.pathname.split("/"),this.location="slug="+this.path[this.path.length-1],axios.get("page/show?"+this.location).then(e=>{this.$Progress.finish(),this.loading=!1,this.hasDataPopulated=!0,this.name=e.data.data.name,this.description=e.data.data.description}).catch(e=>{this.$Progress.fail(),this.loading=!1,this.hasDataPopulated=!0})}},components:{"client-panel-loader":le}},yd={key:0,class:"row"},fd={key:1,class:"row"},bd={id:"content",class:"site-content col-sm-12"},vd={class:"hentry"},kd={class:"entry-title"},wd=["innerHTML"];function Cd(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader");return l(),i("div",null,[d(g,{dynamic_title:e.lang("pages-title"),dynamic_description:e.lang("pages-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),!t.hasDataPopulated||t.loading?(l(),i("div",yd,[d(p,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),t.hasDataPopulated?(l(),i("div",fd,[a("div",bd,[a("article",vd,[a("header",{class:c(["entry-header",{align1:t.lang_locale=="ar"}])},[a("h1",kd,n(t.name),1)],2),a("div",{class:c(["entry-content ck-content clearfix",{align1:t.lang_locale=="ar"}]),id:"page_desc"},[a("p",{innerHTML:t.description,class:"page-content"},null,8,wd)],2)])])])):h("",!0)])}const Sd=S(pd,[["render",Cd],["__scopeId","data-v-e4178379"]]),Dd={name:"kb-tags-articles",description:"Knowledgebase tags articles list page",props:{layout:{type:Object,default:()=>{}}},data(){return{tag_id:this.$route.params.tag_id}},components:{"kb-article-list":Ct}};function Pd(e,s,o,m,t,r){const g=u("meta-component"),p=u("kb-article-list");return l(),i("div",null,[d(g,{dynamic_title:e.lang("kb_tag"),layout:o.layout},null,8,["dynamic_title","layout"]),d(p,{layout:o.layout,from:"tag",tag_id:t.tag_id},null,8,["layout","tag_id"])])}const Id=S(Dd,[["render",Pd]]);function Ad(e){const{name:s,email:o,website:m,comment:t}=e;let r={comment:[t,"isRequired","max(500)"]};Array.isArray(e.loginData.user_data)&&(r.name=[s,"isRequired","max(20)"],r.email=[o,"isRequired","isEmail"],r.website=[m,"isUrl"]);const g=new ge(L),{errors:p,isValid:b}=g.validate(r);return he.dispatch("setValidationError",p),{errors:p,isValid:b}}const Td={name:"kb-add-comment",description:"This component shows the comment box for the article",props:{slug:{type:String,default:""},auth:{type:Object,default:()=>{}},layout:{type:Object,default:()=>{}}},data(){return{base:this.auth.system_url,lineStyle:{borderColor:this.layout.portal.client_header_color},buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},borderStyle:{border:"1px solid "+this.layout.portal.client_header_color,borderTopWidth:"5px"},inputStyle:{borderColor:this.layout.portal.client_input_field_color},name:"",email:"",comment:"",website:"",path:"",image:"",lang_locale:this.layout.language,loginData:this.auth}},beforeMount(){Array.isArray(this.auth.user_data)||(this.name=this.auth.user_data.first_name,this.email=this.auth.user_data.email,this.image=this.auth.user_data.profile_pic)},components:{"text-field":Q,"faveo-image-element":be,"form-with-captcha":Ve},created(){this.path=location.pathname.split("/")},methods:{isValid(){const{errors:e,isValid:s}=Ad(this.$data);return!!s},logout(){this.$Progress.start(),A.post("/auth/logout").then(e=>{localStorage.setItem("redirectPath",""),this.$Progress.finish(),this.redirect("/")}).catch(e=>{this.$Progress.fail(),this.redirect("/")})},onChange(e,s){this[s]=e},postMessage(e,s){if(this.isValid()){this.$Progress.start();const o=this.path[this.path.length-1],m={};m.name=this.name,m.email=this.email,m.website=this.website,m.comment=this.comment,m[e]=s,A.post("/postcomment/"+o,m).then(t=>{this.comment="",Array.isArray(this.auth.user_data)&&(this.name="",this.website="",this.email=""),G(t,"KbComment"),window.emitter.emit("forComment",this.slug),this.$Progress.finish()}).catch(t=>{B(t,"KbComment"),t.response.data.message["g-recaptcha-response"]&&this.$store.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:"KbComment"}),this.$Progress.fail()})}}}},Od={id:"respond",class:"comment-respond form-border"},xd={id:"reply-title",class:"comment-reply-title section-title"},Ld={class:"row"},Vd={key:0,class:"col-sm-4"},jd={key:1,class:"col-sm-4"},$d=["title"],Md={class:"banner-content",id:"dropdown_content"},Ed={class:"col-sm-8"};function Fd(e,s,o,m,t,r){const g=u("alert"),p=u("text-field"),b=u("faveo-image-element"),y=u("form-with-captcha");return l(),i("div",Od,[d(g),a("h3",xd,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("leave_a_reply")),1)]),d(y,{btnClass:"btn btn-custom btn-lg float-right",btnStyle:t.buttonStyle,btnName:"post_comment",iconClass:"fa fa-save",formSubmit:r.postMessage,page:"comments_page",componentName:"KbComment",btn_id:"kb_post_comment"},{fields:w(()=>[a("div",Ld,[Array.isArray(o.auth.user_data)?(l(),i("div",Vd,[d(p,{label:e.lang("name"),value:t.name,type:"text",name:"name",id:"kb_comment_name",onChange:r.onChange,required:!0,inputStyle:t.inputStyle},null,8,["label","value","onChange","inputStyle"]),d(p,{label:e.lang("email"),value:t.email,type:"text",name:"email",id:"kb_comment_email",onChange:r.onChange,required:!0,inputStyle:t.inputStyle},null,8,["label","value","onChange","inputStyle"]),d(p,{label:e.lang("website"),value:t.website,type:"text",name:"website",id:"kb_comment_website",onChange:r.onChange,inputStyle:t.inputStyle},null,8,["label","value","onChange","inputStyle"])])):(l(),i("div",jd,[a("div",{class:"banner-wrapper user-data text-center clearfix",id:"ban_ner",style:C(t.borderStyle)},[d(b,{id:"user_avatar","source-url":t.image,classes:["avatar"],"alternative-text":"User image","img-height":70,"img-width":70},null,8,["source-url"]),a("div",null,[a("strong",null,n(e.lang("hello")),1)]),a("p",{class:"banner-title ellipsize_first_name h4",title:t.name},n(t.name),9,$d),a("p",null,n(e.lang("if_you_are_not")),1),a("div",Md,[a("button",{class:"btn btn-custom btn-sm text-white logout_btn",style:C(t.buttonStyle),onClick:s[0]||(s[0]=v=>r.logout()),id:"kb_comment_logout"},n(e.lang("log_out")),5)])],4)])),a("div",Ed,[d(p,{label:e.lang("comment"),value:t.comment,type:"textarea",name:"comment",id:"kb_comment_desc",onChange:r.onChange,placehold:e.lang("enter_a_value"),required:!0,columns:30,rows:8,inputStyle:t.inputStyle},null,8,["label","value","onChange","placehold","inputStyle"])])])]),_:1},8,["btnStyle","formSubmit"])])}const Rd=S(Td,[["render",Fd],["__scopeId","data-v-9942ba1b"]]);const zd={name:"kb-comments",description:"Knowledgebase comments list page",props:{comment:{type:Object,default:()=>{}},layout:{type:Object,default:()=>{}},base:{type:String,default:""}},data(){return{lang_locale:this.layout.language,linkStyle:{color:this.layout.portal.client_header_color}}},methods:{convert(e){if(e)return $("<p />",{html:e}).text().replace(/(<\/?(?:img)[^>]*>)|<[^>]+>/ig,"$1")}},computed:{...W(["formattedTime","formattedDate"])},components:{"faveo-image-element":be}},Nd=e=>(j("data-v-4fea12d9"),e=e(),M(),e),Ud={class:"comment"},Bd={class:"comment-author"},qd={class:"fn"},Hd={class:"comment-metadata"},Wd={class:"date text-muted"},Kd={datetime:"2013-10-23T01:50:50+00:00"},Gd=Nd(()=>a("i",{class:"fa fa-clock-o"},null,-1)),Qd={class:"comment-content"},Jd=["innerHTML"];function Zd(e,s,o,m,t,r){const g=u("faveo-image-element");return l(),i("li",Ud,[a("article",{class:c(["comment-body",{bod:t.lang_locale=="ar"}])},[a("footer",{class:c(["comment-meta",{meta:t.lang_locale=="ar"}])},[a("div",Bd,[d(g,{id:"user_avatar","source-url":o.comment.profile_pic,classes:["avatar",t.lang_locale=="ar"?e.img:""],"alternative-text":"User image","img-height":50,"img-width":50},null,8,["source-url","classes"]),a("b",qd,[a("a",{rel:"external",class:"url",style:C(t.linkStyle)},n(o.comment.name),5)])]),a("div",Hd,[a("small",Wd,[a("time",Kd,[Gd,f(" "+n(e.formattedTime(o.comment.created_at)),1)])])])],2),a("div",Qd,[a("p",{innerHTML:r.convert(o.comment.comment),style:{"word-wrap":"break-word"}},null,8,Jd)])],2)])}const Yd=S(zd,[["render",Zd],["__scopeId","data-v-4fea12d9"]]);const Xd={name:"kb-article-sidebar",description:"This component shows the articles list which belongs to the same category of the opened article in the article detail page",props:{classname:{type:String},articleList:{type:Array,required:!0},articlelength:{type:Number,required:!0},layout:{type:Object,default:()=>{}}},data(){return{lineStyle:{borderColor:this.layout.portal.client_header_color},lang_locale:this.layout.language}},methods:{subString(e){return Y(e,20)}}},eu=e=>(j("data-v-1d5e7ec8"),e=e(),M(),e),tu={class:"widget-area"},au={id:"section-categories",class:"section"},ou=eu(()=>a("i",{class:"far fa-hdd fa-fw"},null,-1)),su=[ou],lu={class:"d-flex justify-content-between align-items-center"};function iu(e,s,o,m,t,r){const g=u("router-link");return l(),i("div",{class:c(o.classname)},[a("div",tu,[a("section",au,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("articles"))+" ("+n(o.articlelength)+") ",1),a("small",{class:c([{left:t.lang_locale=="ar"},"float-right"])},su,2)],2),a("ul",{class:c(["nav nav-pills nav-stacked nav-categories",{padd:t.lang_locale=="ar"}])},[(l(!0),i(I,null,O(o.articleList.slice(0,10),(p,b)=>(l(),i("li",lu,[d(g,{title:p.name,to:{name:"Articles",params:{slug:p.slug}},id:"kb_sidebar_article_link-"+b,class:c(["list-group-item list-group-item-action",{align1:t.lang_locale=="ar"}])},{default:w(()=>[f(n(r.subString(p.name)),1)]),_:2},1032,["title","to","id","class"])]))),256))],2)])])],2)}const nu=S(Xd,[["render",iu],["__scopeId","data-v-1d5e7ec8"]]);const ru={name:"kb-article-details",description:"Knowledgebase article details component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{base:this.auth.system_url,ArticleSlug:"",CategoryId:0,CategoryList:[{}],articleData:{},articleName:"",articleSlug:"",articleCreatedAt:"",articleDescription:"",category_count:0,categoryList:[],articleList:[],articles_count:0,commentsList:[],loading:!0,hasDataPopulated:!1,perpage:0,pagination:1,records:0,lang_locale:this.layout.language,path:"",art_slug:"",paramsObj:{},kb_status:this.layout.kb_settings.status,pageChange:!1,not_found:!1,lineStyle:{borderColor:this.layout.portal.client_header_color}}},created(){this.lang_locale=localStorage.getItem("LANGUAGE"),window.emitter.on("loaderOn",this.loaderStart),window.emitter.on("forComment",this.addComment),this.path=location.pathname.split("/"),this.art_slug=this.path[this.path.length-1],this.kb_status?this.getSiderData():this.$router.push({name:"Home"})},computed:{...W(["formattedTime","timeFormat"])},methods:{publishDate(e){let s=new Date(e+" GMT").toString();return He(s).format(this.timeFormat)},getSiderData(){this.$Progress.start(),A.get("api/category-list-with-article-count").then(e=>{this.categoryList=e.data.data.categories,this.category_count=this.categoryList.length,this.$Progress.finish(),this.articleId()}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0,this.$Progress.fail()})},subString(e){return Y(e,35)},articleId(e){this.$Progress.start(),this.ArticleSlug=this.art_slug;var s=e;A.get("api/article/"+this.ArticleSlug,{params:s}).then(o=>{o.data.data.article?(this.articleData=o.data.data.article,window.emitter.emit("articleDetailsLoaded",o.data.data.article),this.articleName=this.articleData.name,this.articleSlug=this.articleData.slug,this.articleCreatedAt=this.articleData.publish_time,this.articleDescription=this.articleData.description,this.commentsList=o.data.data.comments.data.reverse(),this.records=o.data.data.comments.total,this.perpage=o.data.data.comments.per_page,this.CategoryList=this.articleData.categories,this.CategoryId=this.CategoryList.map(m=>m.id),this.pageChange?(this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0):this.getCategoryData(this.CategoryId)):this.$router.push({name:"NotFound"}),this.$Progress.finish()}).catch(o=>{this.$store.dispatch("setAlert",{type:"danger",message:o.response.data.message,component_name:"articleDetails"}),this.$Progress.fail(),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.not_found=!0,this.$router.push({name:"NotFound"})})},getCategoryData(e){this.$Progress.start(),A.get("api/category-list/"+e).then(s=>{this.loading=!1,this.hasDataPopulated=!0,this.articleList=s.data.data.article.data,this.articles_count=this.articleList.length,this.$Progress.finish()}).catch(s=>{this.loading=!1,this.hasDataPopulated=!0,this.$Progress.fail()})},pageChanged(){this.pageChange=!0,this.paramsObj.page=this.pagination,this.articleId(this.paramsObj);var e=document.getElementById("comments");e.scrollIntoView({behavior:"smooth"})},addComment(){this.$Progress.start(),this.pagination=1;const e="page=1";A.get("api/article/"+this.ArticleSlug+"?"+e).then(s=>{this.commentsList=s.data.data.comments.data.reverse(),this.records=s.data.data.comments.total,this.perpage=s.data.data.comments.per_page,this.$Progress.finish()})},loaderStart(){this.loading=!0}},components:{"article-comment":Rd,"comments-list":Yd,"category-sidebar":Ee,"article-sidebar":nu}},Fe=e=>(j("data-v-050b8665"),e=e(),M(),e),cu={class:"kb-article-details"},du={key:0,class:"row"},uu={key:1,class:"row"},_u={key:2,class:"row"},hu={class:"hentry"},gu={class:"entry-title"},mu={class:"date"},pu=Fe(()=>a("i",{class:"far fa-clock fa-fw"},null,-1)),yu={datetime:"2013-09-19T20:01:58+00:00"},fu={class:"category"},bu=Fe(()=>a("i",{class:"far fa-folder-open fa-fw"},null,-1)),vu={key:0,class:"form-border mb-3"},ku=["innerHTML"],wu=["innerHTML"],Cu=Fe(()=>a("footer",{class:"entry-footer",id:"entry"},null,-1)),Su={class:"comment-list"},Du={key:0,class:"align_end"},Pu=Fe(()=>a("br",null,null,-1));function Iu(e,s,o,m,t,r){const g=u("client-panel-loader"),p=u("alert"),b=u("meta-component"),y=u("router-link"),v=u("comments-list"),k=u("uib-pagination"),D=u("article-comment"),T=u("category-sidebar"),V=u("article-sidebar");return l(),i("div",cu,[t.pageChange?(l(),i("div",du,[d(g,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),d(p,{componentName:"articleDetails"}),!t.hasDataPopulated||t.loading?(l(),i("div",uu,[d(g,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.hasDataPopulated&&!t.not_found?(l(),i("div",_u,[d(b,{dynamic_title:t.articleName,dynamic_description:e.lang("article_lists-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",{id:"content",class:c([{article_data:t.lang_locale=="ar"},"site-content col-md-9"])},[a("article",hu,[a("header",{class:c(["entry-header",{align1:t.lang_locale=="ar"}])},[a("h1",gu,n(t.articleName),1),a("div",{class:c([{time:t.lang_locale=="ar"},"entry-meta text-muted"])},[a("span",mu,[pu,f("  "),a("time",yu,n(r.publishDate(t.articleCreatedAt)!="Invalid date"?r.publishDate(t.articleCreatedAt):e.formattedTime(t.articleCreatedAt)),1)]),(l(!0),i(I,null,O(t.CategoryList,F=>(l(),i("span",fu,[bu,f("  "),d(y,{to:{name:"Category",params:{slug:F.slug}},title:F.name,id:"kb_articledata_category_link"},{default:w(()=>[f(n(r.subString(F.name)),1)]),_:2},1032,["to","title"])]))),256)),(l(!0),i(I,null,O(t.articleData.tags,F=>(l(),P(y,{title:F.name,to:{name:"Tags",params:{tag_id:F.id}},id:"kb_articledata_tag_link",class:"btn btn-tag btn-sm tag"},{default:w(()=>[f(n(r.subString(F.name)),1)]),_:2},1032,["title","to"]))),256))],2)],2),a("div",{class:c(["entry-content ck-content clearfix",{align1:t.lang_locale=="ar"}])},[t.articleData.summary?(l(),i("div",vu,[a("div",null,[a("em",{innerHTML:t.articleData.summary},null,8,ku)])])):h("",!0),a("p",{innerHTML:t.articleDescription,id:"p_desc"},null,8,wu)],2),Cu]),a("div",{id:"comments",class:c(["comments-area",{align1:t.lang_locale=="ar"}])},[a("ol",Su,[(l(!0),i(I,null,O(t.commentsList,F=>(l(),P(v,{key:F.id,comment:F,base:t.base,layout:o.layout},null,8,["comment","base","layout"]))),128))]),t.records>10?(l(),i("div",Du,[d(k,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=F=>t.pagination=F),class:"pagination","boundary-links":!0,"per-page":t.perpage,onPaginate:s[1]||(s[1]=F=>r.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"]),Pu])):h("",!0),d(p,{componentName:"KbComment"}),t.articleData.is_comment_enabled?(l(),P(D,{key:1,layout:o.layout,auth:o.auth},null,8,["layout","auth"])):h("",!0)],2)],2),a("div",{id:"sidebar",class:c([{left:t.lang_locale=="ar"},"site-sidebar col-md-3"])},[d(T,{layout:o.layout,categoryList:t.categoryList,categorylength:t.category_count,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout","categoryList","categorylength"]),d(V,{articleList:t.articleList,articlelength:t.articles_count,layout:o.layout,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["articleList","articlelength","layout"])],2)])):h("",!0)])}const Au=S(ru,[["render",Iu],["__scopeId","data-v-050b8665"]]);const Tu={name:"kb-category-details",description:"Knowledgebase category details component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{CategoryId:0,categoryName:"",articleList:[],childrenList:[],sidebarCount:0,sidebarList:[],loading:!0,perpage:0,pagination:1,records:0,lang_locale:this.layout.language,kb_status:this.layout.kb_settings.status,not_found:!1,hasDataPopulated:!1,pageChange:!1,linkStyle:{color:this.layout.portal.client_header_color}}},beforeMount(){this.kb_status?this.categoryDetails():this.$router.push({name:"Home"})},computed:{...W(["formattedTime","formattedDate"])},methods:{subString(e){return Y(e,30)},categoryDetails(){this.$Progress.start(),A.get("api/category-list-with-article-count").then(e=>{this.sidebarList=e.data.data.categories,this.sidebarCount=this.sidebarList.length;const s=location.pathname.split("/");let o=s[s.length-1];if(this.category=Yt(e.data.data.categories,"slug",o),this.category){this.CategoryId=this.category.id;const m="page="+this.pagination;this.categoryApi(m)}else this.not_found=!0,this.$Progress.fail(),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.$store.dispatch("setAlert",{type:"danger",message:"Category not found.",component_name:"categoryDetails"});this.$Progress.finish()}).catch(e=>{this.$Progress.fail(),this.loading=!1,this.hasDataPopulated=!0})},categoryApi(e){this.$Progress.start(),A.get("api/category-list/"+this.CategoryId+"?"+e).then(s=>{this.$Progress.finish(),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.categoryName=s.data.data.category,this.articleList=s.data.data.article.data,this.childrenList=s.data.data.children,this.records=s.data.data.article.total,this.perpage=s.data.data.article.per_page,window.emitter.emit("categoryDetailsLoaded",s.data.data.breadcrumbs)}).catch(s=>{this.$Progress.fail(),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0})},stripTags(e){if(e)return e.length>25?e.replace(/(<\/?(?:a|img)[^>]*>)|<[^>]+>/ig,"$1").substring(0,250)+"....":e},pageChanged(){this.pageChange=!0,this.pagination=this.pagination;const e="page="+this.pagination;this.categoryApi(e);var s=document.getElementById("category_data");s.scrollIntoView({behavior:"smooth"})}},components:{"category-sidebar":Ee}},Ou=e=>(j("data-v-22fa5384"),e=e(),M(),e),xu={id:"category_data"},Lu={key:0,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},Vu={key:1,class:"row"},ju={key:2,class:"row"},$u={class:"archive-title"},Mu={key:0,class:"row col-md-12"},Eu={class:"col-md-6 col-sm-12 col-xs-12"},Fu={class:"box-categories"},Ru={id:"list",class:"fa-ul"},zu={key:1,class:"archive-list archive-article"},Nu={class:"entry-title h4"},Uu=["innerHTML"],Bu={class:"entry-meta text-muted"},qu={class:"date"},Hu=Ou(()=>a("i",{class:"far fa-clock fa-fw pr-1"},null,-1)),Wu={key:2,class:"archive-list archive-article"},Ku={style:{"text-align":"left"}};function Gu(e,s,o,m,t,r){const g=u("client-panel-loader"),p=u("alert"),b=u("meta-component"),y=u("router-link"),v=u("uib-pagination"),k=u("category-sidebar");return l(),i("div",xu,[t.loading||!t.hasDataPopulated?(l(),i("div",Lu,[d(g,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),t.pageChange?(l(),i("div",Vu,[d(g,{color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0),d(p,{componentName:"categoryDetails"}),t.hasDataPopulated&&!t.not_found?(l(),i("div",ju,[d(b,{dynamic_title:t.categoryName,dynamic_description:e.lang("categories_lists-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",{id:"content",class:c([{float1:t.lang_locale=="ar"},"site-content col-md-9"])},[a("header",{class:c(["archive-header",{align1:t.lang_locale=="ar"}])},[a("h1",$u,n(t.categoryName),1)],2),t.childrenList.length?(l(),i("div",Mu,[(l(!0),i(I,null,O(t.childrenList,D=>(l(),i("div",Eu,[a("section",Fu,[a("ul",Ru,[a("li",null,[a("span",{class:c([{align1:t.lang_locale=="ar"},"box_child"])},[a("i",{class:c([{art:t.lang_locale=="ar"},"fa-li fas fa-folder-open fa-fw text-muted pr-1"])},null,2),d(y,{to:{name:"Category",params:{slug:D.slug}},title:D.name},{default:w(()=>[f(n(r.subString(D.name)),1)]),_:2},1032,["to","title"])],2)])])])]))),256))])):h("",!0),t.articleList?(l(),i("div",zu,[(l(!0),i(I,null,O(t.articleList,D=>(l(),i("article",{class:c([{article:t.lang_locale=="ar"},"hentry"])},[a("header",{class:c(["entry-header",{align1:t.lang_locale=="ar"}])},[a("i",{class:c([{float1:t.lang_locale=="ar"},"fa fa-list-alt fa-2x fa-fw float-left text-muted"])},null,2),a("h2",Nu,[d(y,{class:c({art_name:t.lang_locale=="ar"}),style:C(t.linkStyle),id:"kb_categorydata_article_link",to:{name:"Articles",params:{slug:D.slug}}},{default:w(()=>[f(n(D.name),1)]),_:2},1032,["class","style","to"])])],2),a("blockquote",{class:c([{art_design:t.lang_locale=="ar"},"blockquote archive-description"]),id:"block"},[a("p",{innerHTML:r.stripTags(D.description),id:"p_tag"},null,8,Uu),a("a",null,[d(y,{to:{name:"Articles",params:{slug:D.slug}},style:C(t.linkStyle),id:"kb_category_redmore_link"},{default:w(()=>[f(n(e.lang("read_more")),1)]),_:2},1032,["to","style"])])],2),a("footer",{class:c([{"art_name align1":t.lang_locale=="ar"},"entry-footer"])},[a("div",Bu,[a("span",qu,[Hu,f("  "),a("span",{class:c({date_align:t.lang_locale==="ar"})},n(e.formattedTime(D.publish_time)),3)])])],2)],2))),256))])):(l(),i("div",Wu,[a("p",Ku,n(e.lang("no_articles")),1)])),t.records>10?(l(),i("div",{key:3,class:c([{left:t.lang_locale=="ar"},"float-right"])},[d(v,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=D=>t.pagination=D),class:"pagination","boundary-links":!0,"per-page":t.perpage,options:{chunk:3,chunksNavigation:"scroll"},onPaginate:s[1]||(s[1]=D=>r.pageChanged())},null,8,["records","modelValue","per-page"])],2)):h("",!0)],2),a("div",{id:"sidebar",class:c([{left:t.lang_locale=="ar"},"site-sidebar col-md-3"])},[d(k,{layout:o.layout,categoryList:t.sidebarList,categorylength:t.sidebarCount,classname:"col-md-12 col-sm-12 col-xs-12"},null,8,["layout","categoryList","categorylength"])],2)])):h("",!0)])}const Qu=S(Tu,[["render",Gu],["__scopeId","data-v-22fa5384"]]);const Ju={name:"kb-search-result",description:"Knowledgebase search result component",props:{layout:{type:Object,default:()=>{}},paramsData:{type:Object,default:()=>{}}},data(){return{search_data:"",articleList:[{}],paramsObj:this.paramsData?this.paramsData:{},path:"",loading:!0,perpage:0,pagination:1,records:null,lang_locale:this.layout.language,no_article:!1,pageChange:!1,linkStyle:{color:this.layout.portal.client_header_color},kb_status:this.layout.kb_settings.status}},beforeMount(){this.search_data=location.search.substring(1).split("="),this.paramsObj.s=this.search_data[this.search_data.length-1],this.kb_status?this.articleApi(this.paramsObj):this.$router.push({name:"Home"})},computed:{...W(["formattedTime","formattedDate"])},methods:{articleApi(e){window.emitter.emit("doingSearch");var s=e;this.$Progress.start(),A.get("api/search",{params:s}).then(o=>{this.$Progress.finish(),this.loading=!1,this.pageChange=!1,this.articleList=o.data.data.articles.data,this.records=o.data.data.articles.total,this.perpage=o.data.data.articles.per_page}).catch(o=>{this.loading=!1,this.pageChange=!1,this.no_article=!0,this.$Progress.fail()})},pageChanged(){this.pageChange=!0,this.paramsObj.page=this.pagination,this.articleApi(this.paramsObj);var e=document.getElementById("search_data");e.scrollIntoView({behavior:"smooth"})},convert(e){if(e)return e.length>25?e.replace(/(<\/?(?:a|img)[^>]*>)|<[^>]+>/ig,"$1").substring(0,250)+"....":e}}},Zu=e=>(j("data-v-bd4b923b"),e=e(),M(),e),Yu={id:"search_data"},Xu={key:0,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},e_={key:1,class:"row"},t_={key:2,class:"col-md-12 col-sm-12 col-xs-12"},a_={class:"archive-list archive-article"},o_={class:"entry-title h4"},s_=["innerHTML"],l_={class:"entry-meta text-muted"},i_={class:"date"},n_=Zu(()=>a("i",{class:"far fa-clock fa-fw"},null,-1)),r_={key:3,class:"text-center"};function c_(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader"),b=u("client-panel-loader"),y=u("router-link"),v=u("uib-pagination");return l(),i("div",Yu,[d(g,{dynamic_title:"Search results",dynamic_description:"Search results",layout:o.layout},null,8,["layout"]),t.loading==!0?(l(),i("div",Xu,[d(p,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),t.pageChange?(l(),i("div",e_,[d(b,{color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0),!t.loading&&!t.no_article&&t.articleList.length>0?(l(),i("div",t_,[a("div",a_,[(l(!0),i(I,null,O(t.articleList,k=>(l(),i("article",{class:c([{article:t.lang_locale=="ar"},"hentry"])},[a("header",{class:c(["entry-header",{align1:t.lang_locale=="ar"}])},[a("i",{class:c([{float1:t.lang_locale=="ar"},"fa fa-list-alt fa-2x fa-fw float-left text-muted"])},null,2),a("h2",o_,[d(y,{class:c({art_name:t.lang_locale=="ar"}),style:C(t.linkStyle),id:"kb_result_article_link",to:{name:"Articles",params:{slug:k.slug}}},{default:w(()=>[f(n(k.name),1)]),_:2},1032,["class","style","to"])])],2),a("blockquote",{class:c([{art_design:t.lang_locale=="ar"},"blockquote archive-description"]),id:"block"},[a("p",{innerHTML:r.convert(k.description),id:"p_tag"},null,8,s_),a("a",null,[d(y,{to:{name:"Articles",params:{slug:k.slug}},styel:t.linkStyle,id:"kb_result_read_link"},{default:w(()=>[f(n(e.lang("read_more")),1)]),_:2},1032,["to","styel"])])],2),a("footer",{class:c(["entry-footer",{"art_name align1":t.lang_locale=="ar"}])},[a("div",l_,[a("span",i_,[n_,a("span",{class:c({date_align:t.lang_locale==="ar"})},n(e.formattedTime(k.publish_time)),3)])])],2)],2))),256))]),t.articleList.length>0&&t.records>10?(l(),i("div",{key:0,class:c(["float-right",{left:t.lang_locale=="ar"}])},[d(v,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=k=>t.pagination=k),class:"pagination","boundary-links":!0,"per-page":t.perpage,onPaginate:s[1]||(s[1]=k=>r.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])],2)):h("",!0)])):h("",!0),t.articleList.length==0||t.no_article?(l(),i("div",r_,[a("h1",null,n(e.lang("sorry"))+"!",1),a("p",null,n(e.lang("no-data-to-show")),1)])):h("",!0)])}const d_=S(Ju,[["render",c_],["__scopeId","data-v-bd4b923b"]]);const u_={name:"client-tickets-table",description:"Client panel tickets page",props:{tickets:{type:Function,default:()=>[]},layout:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},apiUrl:{type:String,default:""},loggedInId:{type:[String,Number],default:""},alertComponentName:{type:String,default:""}},data(){return{selectedTickets:this.tickets,columns:["id","ticket_number","title","user","last_replier","statuses","updated_at"],options:{}}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{id:this.trans("id"),title:e.lang("subject"),ticket_number:e.lang("ticket_id"),user:e.lang("requester"),last_replier:e.lang("last_replier"),updated_at:e.lang("last_activity"),statuses:e.lang("status")},columnsClasses:{id:"ticket-id",title:"ticket-title",ticket_number:"ticket-number",user:"ticket-user",last_replier:"ticket-reply",updated_at:"ticket-updated",statuses:"ticket-status"},texts:{filter:"",limit:""},templates:{title:function(s,o){var m="";return e.loggedInId!=o.user_id&&o.collaborator.length>0&&(m=o.collaborator.map(g=>g.user_id).includes(e.loggedInId)?e.h("span",{class:"badge badge-info"},"CC"):""),e.h("a",{href:"javascript:;",style:`color:${e.layout.portal.client_header_color}`,onClick(t){e.$router.push("/check-ticket/"+o.encrypted_id)}},(o.first_thread?o.first_thread.title:"")+" ("+o.strictly_thread_count+") ",[m])},updated_at(s,o){return e.formattedTime(o.updated_at)},statuses(s,o){return o.statuses?o.statuses.name:"--"},user:function(s,o){return e.h("p",{},o.user.full_name)},last_replier:function(s,o){return e.h("p",{},o.last_thread?o.last_thread.user.full_name:"")},ticket_number:function(s,o){return e.h("a",{href:"javascript:;",onClick(m){e.$router.push("/check-ticket/"+o.encrypted_id)},style:`color:${e.layout.portal.client_header_color}`},"#"+o.ticket_number)}},sortable:["ticket_number","updated_at"],filterable:["ticket_number","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(s){return{"sort-field":s.orderBy?s.orderBy:"updated_at","sort-order":s.ascending?"desc":"asc","search-query":s.query.trim(),page:s.page,limit:s.limit}},responseAdapter({data:s}){return{data:s.data.data,count:s.data.total}}}},computed:{...W(["formattedTime","formattedDate"])}};function __(e,s,o,m,t,r){const g=u("data-table");return l(),P(g,{url:o.apiUrl,dataColumns:t.columns,option:t.options,tickets:o.tickets,scroll_to:"client-tickets-table",inputStyle:o.inputStyle,color:o.layout.portal.client_header_color,"alert-component-name":o.alertComponentName},null,8,["url","dataColumns","option","tickets","inputStyle","color","alert-component-name"])}const h_=S(u_,[["render",__]]);const g_={props:{layout:{type:Object,default:()=>{}},updateStatus:{type:Function},ticketIds:{type:Array,default:()=>[]}},data(){return{TicketStatusList:[],statuslists:[],lang_locale:this.layout.language,loading:!1}},methods:{statusList(){this.loading=!0,this.$Progress.start();let e={meta:!0,supplements:Xt(this.ticketIds),limit:"all",panel:"client"};axios.get("api/dependency/statuses",{params:e}).then(s=>{this.loading=!1,this.statuslists=s.data.data.statuses,this.TicketStatusList=this.statuslists,this.$Progress.finish()}).catch(s=>{this.loading=!1,this.$Progress.fail()})}}},Re=e=>(j("data-v-ddca4aed"),e=e(),M(),e),m_={class:"btn-group"},p_=Re(()=>a("i",{class:"fa fa-exchange-alt",style:{color:"teal"}},null,-1)),y_=Re(()=>a("i",{class:"fa fa-spinner fa-spin",style:{color:"teal",display:"none"},id:"spin"},null,-1)),f_=Re(()=>a("span",{class:"caret"},null,-1)),b_={class:"dropdown-menu dropdown-menu-right status-list"},v_={key:0},k_={class:"row"},w_={key:1},C_=Re(()=>a("p",{class:"status_rec"},"No records",-1)),S_=[C_],D_=["onClick","id"];function P_(e,s,o,m,t,r){const g=u("loader");return l(),i("div",m_,[a("button",{type:"button",class:"btn btn-sm btn-default dropdown-toggle","data-toggle":"dropdown",onClick:s[0]||(s[0]=(...p)=>r.statusList&&r.statusList(...p)),id:"client_status_list"},[p_,y_,f(" "+n(e.lang("change_status"))+" ",1),f_]),a("ul",b_,[t.loading?(l(),i("li",v_,[a("div",k_,[d(g,{"animation-duration":4e3,size:25,color:o.layout.portal.client_header_color},null,8,["color"])])])):h("",!0),!t.loading&&t.TicketStatusList.length===0?(l(),i("li",w_,S_)):h("",!0),t.loading?h("",!0):(l(!0),i(I,{key:2},O(t.TicketStatusList,p=>(l(),i("li",{key:p.id},[p.allow_client?(l(),i("a",{key:0,class:c(["dropdown-item",{align1:t.lang_locale=="ar"}]),href:"javascript:void(0)",onClick:b=>o.updateStatus(p),id:"client_status_"+p.id},[a("i",{class:c(p.icon),style:C({color:p.icon_color})},null,6),f(" "+n(p.name),1)],10,D_)):h("",!0)]))),128))])])}const St=S(g_,[["render",P_],["__scopeId","data-v-ddca4aed"]]),I_={name:"change-status-modal",description:"Change status Modal component",props:{showModal:{type:Boolean,default:!1},ticketIds:{type:Array,default:()=>[]},status:{type:Object,default:()=>{}},onClose:{type:Function},layout:{type:Object,default:()=>{}}},data(){return{panel:"client",isDisabled:!1,containerStyle:{width:"500px"},loading:!1,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,this.$Progress.start();const e={};e.panel=this.panel,A.post("api/ticket/change-status/"+this.ticketIds+"/"+this.status.id,e).then(s=>{this.$Progress.finish(),this.loading=!1,this.isDisabled=!0,window.emitter.emit("refreshData"),window.emitter.emit("updateTicketCount"),window.emitter.emit("uncheckCheckbox"),this.onClose(),G(s,"dataTableModal")}).catch(s=>{this.loading=!1,this.isDisabled=!1,B(s,"dataTableModal"),this.onClose(),this.$Progress.fail()})}},components:{modal:Ge}},A_={class:"modal-title"},T_={key:0},O_={key:0},x_={key:1},L_={key:1,class:"row"},V_=["disabled"],j_=a("i",{class:"fas fa-check","aria-hidden":"true"},null,-1);function $_(e,s,o,m,t,r){const g=u("reuse-loader"),p=u("modal");return o.showModal?(l(),P(p,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:t.containerStyle},dt({title:w(()=>[a("h4",A_,n(e.lang("change_status")),1)]),fields:w(()=>[t.loading?h("",!0):(l(),i("div",T_,[o.ticketIds.length>0?(l(),i("span",O_,n(e.lang("change-status-confirmation")+o.status.name+" ?"),1)):(l(),i("span",x_,n(e.lang("select-ticket")),1))])),t.loading?(l(),i("div",L_,[d(g,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0)]),_:2},[o.ticketIds.length>0?{name:"controls",fn:w(()=>[a("button",{id:"client_status_action",type:"button",onClick:s[0]||(s[0]=b=>r.onSubmit()),class:"btn btn-custom float-right",disabled:t.isDisabled,style:C(t.buttonStyle)},[j_,f(" "+n(e.lang("proceed")),1)],12,V_)]),key:"0"}:void 0]),1032,["showModal","onClose","containerStyle"])):h("",!0)}const M_=S(I_,[["render",$_]]);const E_={name:"client-tickets-table",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},from:{type:String,default:""},orgId:{type:[String,Number],default:""},ticketTabData:{type:[Number,String],default:""}},data(){return{hasDataPopulated:!1,loading:!1,lang_locale:this.layout.language,tic_status:this.layout.user_set_ticket_status.status,inputStyle:{borderColor:this.layout.portal.client_input_field_color},change_status:"",showModal:!1,isShowFilter:!1,appliedFilters:{},filterOptions:[{section:[{name:"ticket-ids",url:"/api/dependency/client-tickets",label:"ticket_id-subject"},{name:"owner-ids",url:"/api/dependency/client-requesters",label:"requester"},{name:"collaborator-ids",url:"/api/dependency/client-requesters",label:"collaborator"}]},{section:[{name:"status-ids",url:this.from?"api/dependency/ticket-status-tabs?limit=all&supplements[]="+this.orgId:"/api/dependency/ticket-status-tabs",label:"status"},{name:"created-at",type:"date",label:["created_at","created_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},pickers:!1,range:!0}]}],filterList:[],currentTabId:"",ticketId:[],apiUrl:"",isShowTabs:!0,isShowFilterTab:!1}},beforeMount(){this.getFilterTabs(),this.filterData()},created(){window.emitter.on("updateFilter",this.updateFilter),window.emitter.on("updateTicketCount",this.getFilterTabs)},methods:{updateFilter(e){this.filterOptions.map(function(s){s.section.map(function(o){e.name==o.name&&(o.value=e.value)})})},filterData(){let e=this.from?"col-sm-6":"col-sm-4";this.filterOptions.map(function(s){s.section.map(function(o){o.elements=[],o.isMultiple=!0,o.isPrepopulate=!1,o.value="",o.className=e})})},selectedFilters(e){return e==="closeEvent"?(this.resetFilter(),this.isShowFilter=!1):e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.isShowFilterTab=!1,this.isShowTabs=!0,this.apiUrl="/api/client/ticket-list?filter_id="+this.currentTabId;let e=this.from?"col-sm-6":"col-sm-4";this.filterOptions=this.filterOptions.map(function(s){return s.section.map(function(o){o.elements=[],o.isMultiple=!0,o.isPrepopulate=!1,o.value="",o.className=e}),s})},applyFilter(e){this.appliedFilters=e;let s=ea(this.filterOptions,e);s[s.length-1]==="&"?(s=s.slice(0,-1),this.isShowTabs=!1,this.isShowFilterTab=!0):(this.isShowTabs=!0,this.isShowFilterTab=!1);let o=s?"/api/client/ticket-list?":"/api/client/ticket-list?filter_id="+this.currentTabId;this.apiUrl=o+s,this.isShowFilter=!1},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},updateStatus(e){this.showModal=!0,this.change_status=e},ticketsData(e){this.ticketId=e},tickets(e){this.currentTabId=e.id,this.ticketId=[],this.appliedFilters={},this.resetFilter()},getTabCount(){A.get("/api/client/ticket-filter").then(e=>{this.filterList=e.data.data.filters.data}).catch(e=>{this.filterList=[]})},toggleFilterView(){this.isShowFilter=!this.isShowFilter},getFilterTabs(){localStorage.setItem("redirectPath",""),this.loading=!0,this.isShowTabs=!0,A.get("/api/client/ticket-filter").then(e=>{this.filterList=e.data.data.filters.data,this.ticketTabData?(this.currentTabId=this.ticketTabData,this.apiUrl="/api/client/ticket-list?filter_id="+this.ticketTabData):(this.currentTabId=this.filterList[0].id,this.apiUrl="/api/client/ticket-list?filter_id="+this.filterList[0].id),this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})}},components:{"my-tickets-table":h_,"ticket-status":St,"change-status-modal":M_,"client-ticket-filter":ca}},F_=e=>(j("data-v-03b6f778"),e=e(),M(),e),R_={class:"card"},z_={class:"card-header"},N_={class:"card-title"},U_={class:"card-tools"},B_=F_(()=>a("span",{class:"glyphicon glyphicon-filter"},null,-1)),q_=[B_],H_={class:"card-body"},W_={class:"mb-3"},K_={class:"nav-tabs-custom"},G_={class:"nav-item"},Q_=["id","onClick"],J_={class:"ml-1"},Z_={class:"badge badge-pill tab_count ml-1"},Y_={key:1,class:"nav-item"},X_={class:"nav-link tickets_cursor_tab active",href:"javascript:;","data-toggle":"tab"},eh={class:"tab-content"},th={class:"active tab-pane",id:"activity"},ah={id:"my_tic"},oh={key:1,class:"row"};function sh(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("client-ticket-filter"),y=u("ticket-status"),v=u("my-tickets-table"),k=u("client-panel-loader"),D=u("change-status-modal"),T=Z("tooltip");return l(),i("div",{id:"client-tickets-table",class:c({align1:t.lang_locale=="ar"})},[d(g,{dynamic_title:e.trans("mytickets-title"),dynamic_description:e.trans("mytickets-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),d(p,{componentName:"dataTableModal"}),a("div",R_,[a("div",z_,[a("h3",N_,n(e.trans("tickets")),1),a("div",U_,[z((l(),i("a",{class:"btn btn-tool",href:"javascript:;",onClick:s[0]||(s[0]=(...V)=>r.toggleFilterView&&r.toggleFilterView(...V))},q_)),[[T,e.trans("filter")]])])]),a("div",H_,[t.hasDataPopulated?(l(),i(I,{key:0},[a("div",W_,[t.isShowFilter?(l(),P(b,{key:0,id:"filter-box",metaData:t.filterOptions,appliedFilters:t.appliedFilters,onSelectedFilters:r.selectedFilters},null,8,["metaData","appliedFilters","onSelectedFilters"])):h("",!0)]),a("div",K_,[a("ul",{class:c(["nav nav-tabs",{tabs_align:t.lang_locale=="ar"}])},[t.isShowTabs?(l(!0),i(I,{key:0},O(t.filterList,V=>(l(),i("li",G_,[a("a",{id:V.name+"_tickets",class:c(["nav-link tickets_cursor_tab",{active:t.currentTabId==V.id,float1:t.lang_locale==="ar"}]),href:"javascript:;","data-toggle":"tab",onClick:F=>r.tickets(V)},[a("i",{class:c(V.icon_class),style:C({color:V.icon_color})},null,6),a("b",J_,n(e.lang(V.name)),1),a("span",Z_,n(V.ticket_count),1)],10,Q_)]))),256)):h("",!0),t.isShowFilterTab?(l(),i("li",Y_,[a("a",X_,[a("b",null,n(e.lang("search_result")),1),f("   "),a("span",null,[a("i",{class:"fas fa-times",onClick:s[1]||(s[1]=V=>r.resetFilter())})])])])):h("",!0),a("li",{class:c([t.lang_locale==="ar"?"mr-auto":"ml-auto"])},[t.tic_status==1&&t.ticketId.length?(l(),P(y,{key:0,layout:o.layout,updateStatus:r.updateStatus,ticketIds:t.ticketId},null,8,["layout","updateStatus","ticketIds"])):h("",!0)],2)],2)]),a("div",eh,[a("div",th,[a("div",ah,[(l(),P(v,{tickets:r.ticketsData,apiUrl:t.apiUrl,loggedInId:o.auth.user_data.id,"alert-component-name":"dataTableModal",layout:o.layout,key:t.currentTabId,inputStyle:t.inputStyle},null,8,["tickets","apiUrl","loggedInId","layout","inputStyle"]))])])])],64)):h("",!0),!t.hasDataPopulated||t.loading?(l(),i("div",oh,[d(k,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0)])]),d(te,{name:"modal"},{default:w(()=>[t.showModal?(l(),P(D,{key:0,onClose:r.onClose,showModal:t.showModal,ticketIds:t.ticketId,status:t.change_status,layout:o.layout},null,8,["onClose","showModal","ticketIds","status","layout"])):h("",!0)]),_:1})],2)}const Dt=S(E_,[["render",sh],["__scopeId","data-v-03b6f778"]]);function lh(e){const{approval_con_comment:s}=e;let o={approval_con_comment:[s,"isRequired"]};const m=new ge(L),{errors:t,isValid:r}=m.validate(o);return he.dispatch("setValidationError",t),{errors:t,isValid:r}}const ih={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},department:{type:String,default:""},ticketId:{type:[String,Number],default:""},commentId:{type:[String,Number],default:""},area:{type:String,default:""},from:{type:String,default:""}},data(){return{matched_rating:{},rating_value:0,lang_locale:this.layout.language,all_ratings:"",default_ratings:"",loading:!0,request_data:""}},computed:{...W(["getDefaultRatings"]),readOnlyStar(){return!!this.all_ratings.rating_value}},beforeMount(){this.$Progress.start(),this.ratingTypes()},methods:{ratingTypes(){this.all_ratings=this.getDefaultRatings,this.loading=!1},setCurrentSelectedRating(e){this.$Progress.start(),this.loading=!0,this.auth.user_data.id,this.all_ratings.rating_id,this.ticketId,axios.get("api/get-encrypted-rating/"+this.ticketId+"/"+e).then(s=>{G(s),this.$Progress.finish(),this.loading=!1,this.redirect("/rating/"+s.data.encryptedRatingDetails)}).catch(s=>{this.loading=!1,this.$Progress.fail()})}}},nh={key:0},rh={id:"rating_align",class:"star-rating-control"},ch={class:"ticketratingtitle text-right mt-1"},dh={key:0,class:"row"};function uh(e,s,o,m,t,r){const g=u("star-rating"),p=u("client-panel-loader");return l(),i("div",{class:c([t.lang_locale==="ar"?"float-left":"float-right"])},[e.getDefaultRatings?(l(),i("table",nh,[a("tbody",null,[a("tr",null,[a("td",rh,[a("div",ch,[a("b",null,n(e.lang(t.all_ratings.name)),1),f("  ")]),d(g,{modelValue:t.all_ratings.rating_value,"onUpdate:modelValue":s[0]||(s[0]=b=>t.all_ratings.rating_value=b),"star-size":18,"show-rating":!1,"max-rating":t.all_ratings.rating_scale,"onUpdate:rating":r.setCurrentSelectedRating,"read-only":r.readOnlyStar,rating:t.all_ratings.rating_value},null,8,["modelValue","max-rating","onUpdate:rating","read-only","rating"])])])])])):h("",!0),a("template",null,[t.loading?(l(),i("div",dh,[d(p,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0)])],2)}const Xe=S(ih,[["render",uh],["__scopeId","data-v-e2912b58"]]);const _h={props:{comments:{type:Object,required:!0},dept:{type:String},userId:{type:[String,Number],required:!0},layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},showRatings:{type:Boolean,default:!0},from:{type:String,default:""},status_type:{type:String}},components:{attachment:da,"rating-component":Xe,"faveo-image-element":be},data(){return{base:this.auth.system_url,loading:!1,ticket_id:null,lang_locale:this.layout.language,ratings:[],linkStyle:{color:this.layout.portal.client_header_color}}},computed:{...W(["formattedTime","formattedDate"])},methods:{subString(e,s=15){return Y(e,s)}}},hh=e=>(j("data-v-245e5684"),e=e(),M(),e),gh={class:"comment"},mh={class:"row"},ph={class:"col-sm-6"},yh={class:"comment-author"},fh={class:"fn"},bh={key:0,class:"url"},vh={key:1,class:"url"},kh={class:"comment-metadata"},wh={class:"date text-muted"},Ch={datetime:"2013-10-23T01:50:50+00:00"},Sh=hh(()=>a("i",{class:"fa fa-clock-o"},null,-1)),Dh={class:"comment-content",id:"align"},Ph=["innerHTML"],Ih={key:0,class:"timeline-footer"},Ah={key:1,class:"comment-body"},Th={key:0,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}};function Oh(e,s,o,m,t,r){const g=u("faveo-image-element"),p=u("attachment"),b=u("loader"),y=Z("tooltip");return l(),i("li",gh,[t.loading?(l(),i("article",Ah,[t.loading?(l(),i("div",Th,[d(b,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0)])):(l(),i("article",{key:0,class:c(["comment-body",{bod1:t.lang_locale=="ar"}])},[a("footer",{class:c(["comment-meta",{meta:t.lang_locale=="ar"}]),style:C([o.comments.user.role!=="user"?{background:"#FFFCB3"}:{background:"hsla(100, 100%, 51%, 0.15)"}])},[a("div",mh,[a("div",ph,[a("div",yh,[d(g,{id:"user_img","source-url":o.comments.user.profile_pic,classes:["avatar","thread_avatar",t.lang_locale=="ar"?e.img:""]},null,8,["source-url","classes"]),a("b",fh,[o.comments.user.first_name!=""?z((l(),i("span",bh,[f(n(r.subString(o.comments.user.first_name+" "+o.comments.user.last_name,50)),1)])),[[y,o.comments.user.first_name+" "+o.comments.user.last_name]]):z((l(),i("span",vh,[f(n(r.subString(o.comments.user.email,50)),1)])),[[y,o.comments.user.email]])])]),a("div",kh,[a("small",wh,[a("time",Ch,[Sh,f(" "+n(e.formattedTime(o.comments.created_at)),1)])])])])])],6),a("div",Dh,[a("p",{innerHTML:o.comments.body,id:"comment_body",style:{"word-wrap":"break-word"}},null,8,Ph)]),o.comments.attach.length!=0?(l(),i("div",Ih,[a("ul",{class:c(["mailbox-attachments clearfix",[t.lang_locale==="ar"?"mr40":"ml40"]]),id:"clearfix"},[(l(!0),i(I,null,O(o.comments.attach,v=>(l(),i(I,null,[v.poster!=="INLINE"?(l(),P(p,{key:0,attachment:v,classname:"info_btn"},null,8,["attachment"])):h("",!0)],64))),256))],2)])):h("",!0)],2))])}const ze=S(_h,[["render",Oh],["__scopeId","data-v-245e5684"]]);const xh={name:"ticket-details",description:"Ticket deatils page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},ticket:{type:Object,default:()=>{}}},data(){return{loading:!1,lang_locale:this.layout.language}},computed:{...W(["formattedTime","formattedDate"])},methods:{subString(e,s=25){return Y(e,s)}}},pe=e=>(j("data-v-d2ae5000"),e=e(),M(),e),Lh={class:"col-sm-6 custom_tic_detail"},Vh={class:"row"},jh={class:"col-sm-6"},$h={class:"col-sm-6"},Mh={style:{color:"orange"}},Eh=pe(()=>a("div",{class:"clearfix"},null,-1)),Fh={class:"col-sm-6 custom_tic_detail"},Rh={class:"row"},zh={class:"col-sm-6"},Nh={class:"col-sm-6"},Uh=pe(()=>a("div",{class:"clearfix"},null,-1)),Bh={key:0,class:"col-sm-6 custom_tic_detail"},qh={class:"row"},Hh={class:"col-sm-6"},Wh={class:"col-sm-6"},Kh=pe(()=>a("div",{class:"clearfix"},null,-1)),Gh={class:"col-sm-6 custom_tic_detail"},Qh={class:"row"},Jh={class:"col-sm-6"},Zh={class:"col-sm-6"},Yh=pe(()=>a("div",{class:"clearfix"},null,-1)),Xh={class:"col-sm-6 custom_tic_detail"},eg={class:"row"},tg={class:"col-sm-6"},ag={class:"col-sm-6"},og=pe(()=>a("div",{class:"clearfix"},null,-1)),sg={class:"col-sm-6 custom_tic_detail"},lg={class:"row"},ig={class:"col-sm-6"},ng={class:"col-sm-6"},rg=pe(()=>a("div",{class:"clearfix"},null,-1)),cg={class:"col-sm-6 custom_tic_detail"},dg={class:"row"},ug={class:"col-sm-6"},_g={class:"col-sm-6"},hg=pe(()=>a("div",{class:"clearfix"},null,-1));function gg(e,s,o,m,t,r){const g=u("client-panel-loader"),p=Z("tooltip");return l(),i("div",{class:c(["row",{align1:t.lang_locale=="ar"}]),style:{"min-height":"100px"}},[a("div",Lh,[a("div",Vh,[a("div",jh,[a("b",null,n(e.lang("status")),1)]),a("div",$h,[z((l(),i("span",Mh,[f(n(r.subString(o.ticket.status)),1)])),[[p,o.ticket.status]])])]),Eh]),a("div",Fh,[a("div",Rh,[a("div",zh,[a("b",null,n(e.lang("department")),1)]),a("div",Nh,[z((l(),i("span",null,[f(n(r.subString(o.ticket.department)),1)])),[[p,o.ticket.department]])])]),Uh]),o.ticket.priority?(l(),i("div",Bh,[a("div",qh,[a("div",Hh,[a("b",null,n(e.lang("priority")),1)]),a("div",Wh,[z((l(),i("span",null,[f(n(r.subString(o.ticket.priority)),1)])),[[p,o.ticket.priority]])])]),Kh])):h("",!0),a("div",Gh,[a("div",Qh,[a("div",Jh,[a("b",null,n(e.lang("created_date")),1)]),a("div",Zh,[z((l(),i("span",null,[f(n(e.formattedTime(o.ticket.created_at)),1)])),[[p,e.formattedTime(o.ticket.created_at)]])])]),Yh]),a("div",Xh,[a("div",eg,[a("div",tg,[a("b",null,n(e.lang("help_topic")),1)]),a("div",ag,[z((l(),i("span",null,[f(n(r.subString(o.ticket.help_topic)),1)])),[[p,o.ticket.help_topic]])])]),og]),a("div",sg,[a("div",lg,[a("div",ig,[a("b",null,n(e.lang("last_message")),1)]),a("div",ng,[z((l(),i("span",null,[f(n(r.subString(o.ticket.threads[o.ticket.threads.length-1].user.first_name+" "+o.ticket.threads[o.ticket.threads.length-1].user.last_name)),1)])),[[p,o.ticket.threads[o.ticket.threads.length-1].user.first_name+" "+o.ticket.threads[o.ticket.threads.length-1].user.last_name]])])]),rg]),a("div",cg,[a("div",dg,[a("div",ug,[a("b",null,n(e.lang("last_response")),1)]),a("div",_g,[z((l(),i("span",null,[f(n(e.formattedTime(o.ticket.threads[o.ticket.threads.length-1].created_at)),1)])),[[p,e.formattedTime(o.ticket.threads[o.ticket.threads.length-1].created_at)]])])]),hg]),t.loading?(l(),P(g,{key:1,color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])):h("",!0)],2)}const et=S(xh,[["render",gg],["__scopeId","data-v-d2ae5000"]]);const mg={name:"custom-ticket-details",description:"Custom Ticket deatils page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},ticket:{type:Object,default:()=>{}}},data(){return{loading:!1,lang_locale:this.layout.language}},computed:{...W(["formattedTime","formattedDate"])},methods:{subString(e,s=25){return Y(e,s)}},components:{"client-panel-loader":le}},pg={key:0,class:"col-sm-6 custom_tic_detail"},yg={class:"row"},fg={class:"col-sm-6"},bg={class:"col-sm-6"},vg={key:0,class:"style-ul"},kg={key:0},wg={key:1};function Cg(e,s,o,m,t,r){const g=u("loader"),p=Z("tooltip");return l(),i("div",{class:c(["row mt-4",{align1:t.lang_locale=="ar"}]),style:{"min-height":"100px"}},[(l(!0),i(I,null,O(o.ticket.custom_field_values,b=>(l(),i(I,null,[e.boolean(b.value)?(l(),i("div",pg,[a("div",yg,[a("div",fg,[a("b",null,n(b.label),1)]),a("div",bg,[Array.isArray(b.value)?(l(),i("ul",vg,[(l(!0),i(I,null,O(b.value,(y,v)=>(l(),i("li",null,[z((l(),i("span",null,[f(n(r.subString(y,20))+" ",1)])),[[p,y]])]))),256))])):(l(),i(I,{key:1},[b.field_type==="date"?z((l(),i("span",kg,[f(n(b.value),1)])),[[p,b.value]]):z((l(),i("span",wg,[f(n(r.subString(b.value,25)),1)])),[[p,b.value]])],64))])])])):h("",!0)],64))),256)),t.loading?(l(),P(g,{key:0,color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])):h("",!0)],2)}const Sg=S(mg,[["render",Cg],["__scopeId","data-v-5ccd9a2e"]]);const Dg={name:"client-ticket-timeline",description:"Client panel ticket timeline page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},components:{"ticket-status":St,"rating-component":Xe,"ticket-thread":ze,"ticket-details":et,"custom-ticket-details":Sg,"client-panel-loader":le,alert:ta,"dynamic-select":Se,"text-field":Q},data(){return{reply:"",cc:[],labelStyle:{display:"none"},tic_status:this.layout.user_set_ticket_status.status,buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lineStyle:{borderColor:this.layout.portal.client_header_color},str:"",loading:!0,perpage:10,pagination:1,records:0,TicketDetail:"",ticketData:"",comments_list:[],comments_list1:[],ticket_Id:"",selectedFile:[],files:[],url:"",btnName:"reply",disableButton:!1,status_type:"",AreaRatings:"",showEditor:"",max_size:0,file_size:0,max_file:0,user_id:this.auth.user_data.id,tic_user_id:null,check_id:null,paramsObj:{},base:this.auth.system_url,lang_locale:this.layout.language,pageChange:!1,actionPerformed:"initialLoad",selected:[],hasDataPopulated:!1,showCC:!1,openReply:!1,approval_con_comment:"",isDisabled:!1,dataOpen:!1,rateDispatched:!1,panel:"client",rules:"",resetCC:0,hideAction:!1}},created(){this.path=location.pathname.split("/"),this.check_id=this.path[this.path.length-1],this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj)},filters:{toUp(e){return e.toUpperCase()}},computed:{...W(["formattedTime","formattedDate","getApprovalActionVisibility","getDefaultRatings"])},methods:{toggleData(){this.dataOpen=!this.dataOpen},onApproveDeny(e){this.isApproveValid()&&(this.pageChange=!0,this.$Progress.start(),this.isDisabled=!0,A.post("/api/approval-action-without-hash/"+this.TicketDetail.id,{action_type:e,comment:this.approval_con_comment}).then(s=>{G(s,"statusBox"),this.isDisabled=!1,this.comment="",this.pagination=1,this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj),G(s,"statusBox"),this.$Progress.finish()}).catch(s=>{this.isDisabled=!1,this.pageChange=!1,this.$Progress.fail(),B(error,"statusBox")}))},isApproveValid(){const{errors:e,isValid:s}=lh(this.$data);return!!s},toggleCC(){this.showCC=!this.showCC},toggleReply(){this.openReply=!this.openReply},isMail(e,s,o){var m=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,20}$/;return m.test(e.email?e.email:e.name)},onChange(e,s){this[s]=e,s=="cc"&&(e.length?this.rules=e.every(this.isMail)?"":"email":this.rules="")},checkTicketId(e){this.$Progress.start();var s=e;A.get("api/check-ticket/"+this.check_id,{params:s}).then(o=>{e.page===1&&(this.ticketData=o.data.data.ticket),this.loading=!1,this.hasDataPopulated=!0,this.pageChange=!1,this.$Progress.finish(),this.fileUploadRules(o.data.data),this.TicketDetail=o.data.data.ticket,this.tic_user_id=this.TicketDetail.user.id,this.ticket_Id=this.TicketDetail.id,this.$store.dispatch("updateTicketActions",this.ticket_Id),this.selected.push(this.ticket_Id),this.status_type=this.TicketDetail.status,this.AreaRatings=this.TicketDetail.ratings,this.comments_list=this.TicketDetail.threads,this.comments_list1=this.TicketDetail.threads.reverse(),this.records=this.TicketDetail.strictly_thread_count,this.cc=this.TicketDetail.collaborators,this.$store.dispatch("setRatingTypes",this.ticket_Id),setTimeout(()=>{this.rateDispatched=!0},1500),this.url="rating/",this.tic_user_id==this.user_id||this.layout.organization!=null?this.showEditor=o.data.data.replybutton===1?1:0:o.data.data.replybutton===1?this.showEditor=o.data.data.org_member_reply:this.showEditor=0,this.tic_user_id!==this.user_id&&this.auth.user_data.role==="user"&&(this.hideAction=!0,this.injectDynamicCSS())}).catch(o=>{this.loading=!1,this.hasDataPopulated=!1,this.$Progress.fail(),B(o,"statusBox")})},fileUploadRules(e){this.max_size=e.uploadfilesize,this.file_size=e.uploadSingleFileSize,this.max_file=e.uploadFilecount,this.str=this.lang("max_upload_size")+this.formatBytes(this.max_size)},onFileSelected(e){var s=this.$refs.fileInput;this.selectedFile=e.target.files;for(var o=0;o<this.selectedFile.length;o++)this.selectedFile[0].size<this.file_size?this.files.length<this.max_file?this.files.push(this.selectedFile[o]):this.$store.dispatch("setAlert",{type:"danger",message:this.lang("client_max_number_of_files")+this.max_file,component_name:"replyBox"}):this.$store.dispatch("setAlert",{type:"danger",message:this.lang("upload_failed")+this.formatBytes(this.file_size),component_name:"replyBox"});s.value=""},formatBytes(e,s){if(e==0)return"0 Bytes";var o=1024,m=s||2,t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(o));return parseFloat((e/Math.pow(o,r)).toFixed(m))+" "+t[r]},removeFile(e){this.files.splice(e,1)},changePage(){this.actionPerformed="pageChange";var e=document.getElementById("comments");e.scrollIntoView({behavior:"smooth"}),this.$Progress.start(),this.pageChange=!0,this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj)},updateStatus(e){this.pageChange=!0,this.$Progress.start();const s={};s.panel=this.panel,A.post("api/ticket/change-status/"+this.TicketDetail.id+"/"+e.id,s).then(o=>{this.actionPerformed="statusChange",this.pagination=1,this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj),G(o,"statusBox"),this.$Progress.finish()}).catch(o=>{this.pageChange=!1,this.$Progress.fail(),B(o,"statusBox")})},verify(){if(this.files.length>0){var e=this.files.map(o=>o.size);e.reduce((o,m)=>o+m)<this.max_size?this.postTicketComment():(this.loading=!1,this.$store.dispatch("setAlert",{type:"danger",message:this.trans("max_upload_size")+this.formatBytes(this.max_size),component_name:"statusBox"}))}else this.postTicketComment()},isValid(){const{errors:e,isValid:s}=ua(this.$data);return!!s},postTicketComment(){if(this.isValid()){this.$Progress.start(),this.disableButton=!0;var e=new FormData;this.cc.length>0?this.cc.forEach((m,t)=>{e.append("cc["+t+"]",m.hasOwnProperty("email")&&m.email?m.email:m.name)}):e.append("cc",[]),e.append("content",this.reply);for(var s in this.files)e.append("attachment["+s+"]",this.files[s]);const o={headers:{"Content-Type":"multipart/form-data"}};A.post("api/thread/reply/"+this.ticket_Id,e,o).then(m=>{this.reply="",this.disableButton=!1,this.checkTicketId(this.paramsObj);var t=document.getElementById("reply_threads");t.scrollIntoView({behavior:"smooth"}),this.$store.dispatch("setAlert",{type:"success",message:"Successfully replied",component_name:"replyBox"}),this.files=[],this.$Progress.finish(),window.emitter.emit("refreshThreads"),this.resetCC+=1}).catch(m=>{m.response&&m.response.data.message.attachment&&this.$store.dispatch("setAlert",{type:"danger",message:m.response.data.message.attachment,component_name:"replyBox"}),B(m,"replyBox"),this.pageChange=!1,this.disableButton=!1,this.$Progress.fail()})}},subString(e){return Y(e,15)},injectDynamicCSS(){const s=`${this.cc.map(m=>`.remove_action .v-select .vs__dropdown-toggle .vs__selected-options .vs__deselect[title="Deselect ${m.name}"]`).join(", ")} { display: none; }`,o=document.createElement("style");o.textContent=s,document.head.appendChild(o)}}},ie=e=>(j("data-v-ebe548c5"),e=e(),M(),e),Pg={key:0,class:"row"},Ig={key:1,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},Ag={key:2,class:"row"},Tg={id:"content",class:"site-content col-sm-12"},Og={class:"hentry"},xg={class:"row"},Lg={class:"col-sm-7"},Vg=["title"],jg=ie(()=>a("i",{class:"fas fa-ticket"},null,-1)),$g={class:"col-sm-5"},Mg=ie(()=>a("i",{class:"fas fa-eye"},null,-1)),Eg=ie(()=>a("i",{class:"fas fa-eye-slash"},null,-1)),Fg={class:"clearfix"},Rg={key:0,class:"entry-attribute clearfix",id:"rate_entry"},zg={class:"row"},Ng=ie(()=>a("div",{class:"share-links col-sm-6"},null,-1)),Ug={key:1,class:"row"},Bg={key:2,class:"data_cus_cls"},qg={class:"comment-list"},Hg={class:"row"},Wg={key:0},Kg=ie(()=>a("i",{class:"fas fa-reply"},null,-1)),Gg={key:1,id:"reply_threads",class:"comment-respond form-border"},Qg={class:"comment-reply-title section-title reply_title",id:"H3"},Jg=ie(()=>a("span",{style:{color:"red"}}," *",-1)),Zg=ie(()=>a("i",{class:"fas fa-times"},null,-1)),Yg=[Zg],Xg=ie(()=>a("br",null,null,-1)),em={id:"fileselector"},tm={key:0},am={id:"list"},om=["onClick"],sm=["disabled"],lm=ie(()=>a("i",{class:"fa fa-reply-all"},null,-1)),im={class:"form-group col-md-12"},nm=["disabled"],rm=ie(()=>a("span",{class:"fa fa-check"},null,-1)),cm=["disabled"],dm=ie(()=>a("span",{class:"fa fa-times"},null,-1)),um={key:3},_m={style:{"text-align":"center"}};function hm(e,s,o,m,t,r){const g=u("meta-component"),p=u("client-panel-loader"),b=u("loader"),y=u("alert"),v=u("ticket-status"),k=u("rating-component"),D=u("ticket-details"),T=u("custom-ticket-details"),V=u("ticket-thread"),F=u("uib-pagination"),U=u("dynamic-select"),X=u("tiny-editor"),R=u("text-field"),N=Z("tooltip"),q=Z("focus-first-input");return l(),i("div",null,[d(g,{dynamic_title:e.lang("check-ticket-title"),dynamic_description:e.lang("check-ticket-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),t.pageChange?(l(),i("div",Pg,[d(p,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.loading?(l(),i("div",Ig,[d(b,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),d(y,{componentName:"statusBox"}),t.hasDataPopulated?(l(),i("div",Ag,[a("div",Tg,[a("article",Og,[a("header",xg,[a("div",Lg,[a("h3",{class:c(["entry-title",{align1:t.lang_locale=="ar"}]),title:t.TicketDetail.title},[jg,f(" "+n(r.subString(t.comments_list[0].title===""?t.TicketDetail.title:t.comments_list[0].title))+" ",1),a("small",null,"( "+n(t.TicketDetail.ticket_number)+" )",1)],10,Vg)]),a("div",$g,[a("div",{class:c([{left:t.lang_locale=="ar"},"float-right status"])},[t.status_type!="Unapproved"?(l(),i(I,{key:0},[t.tic_status==1?(l(),P(v,{key:0,status_type:t.status_type,layout:o.layout,updateStatus:r.updateStatus,ticketIds:t.selected},null,8,["status_type","layout","updateStatus","ticketIds"])):h("",!0)],64)):h("",!0),t.ticketData&&t.ticketData.custom_field_values&&t.ticketData.custom_field_values.length>0?(l(),i("button",{key:1,class:"btn btn-default btn-sm",onClick:s[0]||(s[0]=(...x)=>r.toggleData&&r.toggleData(...x))},[t.dataOpen?(l(),i(I,{key:1},[Eg,f(" "+n(e.trans("hide_custom_field_details")),1)],64)):(l(),i(I,{key:0},[Mg,f(" "+n(e.trans("view_custom_field_details")),1)],64))])):h("",!0)],2)])]),a("div",Fg,[t.status_type!="Unapproved"?(l(),i("div",Rg,[a("div",zg,[Ng,a("div",{class:c(["rate-post col-sm-6",[t.lang_locale==="ar"?"text-left":"text-right"]])},[t.rateDispatched?(l(),P(k,{key:0,layout:o.layout,auth:o.auth,department:t.TicketDetail.department,ticketId:t.ticket_Id,area:"Helpdesk Area"},null,8,["layout","auth","department","ticketId"])):(l(),i("div",Ug,[d(b,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:30},null,8,["color"])]))],2)])])):h("",!0),t.ticketData?(l(),P(D,{key:1,ticket:t.ticketData,layout:o.layout,auth:o.auth},null,8,["ticket","layout","auth"])):h("",!0),t.dataOpen?(l(),i("div",Bg,[t.ticketData?(l(),P(T,{key:0,ticket:t.ticketData,layout:o.layout,auth:o.auth},null,8,["ticket","layout","auth"])):h("",!0)])):h("",!0),a("div",{id:"comments",class:c(["comments-area",{align1:t.lang_locale=="ar"}])},[a("ol",qg,[(l(!0),i(I,null,O(t.comments_list1,x=>(l(),P(V,{userId:t.user_id,key:x.id,comments:x,layout:o.layout,auth:o.auth,dept:t.TicketDetail.department,status_type:t.status_type},null,8,["userId","comments","layout","auth","dept","status_type"]))),128))]),a("div",Hg,[t.records>10?(l(),i("div",{key:0,class:c([{left:t.lang_locale=="ar"},"col-sm-12 text-right"])},[d(F,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[1]||(s[1]=x=>t.pagination=x),class:"pagination",onPaginate:r.changePage,"boundary-links":!0,"per-page":t.perpage,options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","onPaginate","per-page"])],2)):h("",!0)]),t.status_type!="Unapproved"?(l(),i(I,{key:0},[d(y,{componentName:"replyBox"}),t.showEditor==1?(l(),i("div",Wg,[t.openReply?h("",!0):(l(),i("button",{key:0,class:"btn btn-reply btn-default btn-150 float-right",onClick:s[2]||(s[2]=(...x)=>r.toggleReply&&r.toggleReply(...x))},[Kg,f(" "+n(e.lang("reply")),1)])),t.openReply?(l(),i("div",Gg,[a("h3",Qg,[a("i",{class:c(["line",{left0:t.lang_locale=="ar"}]),style:C(t.lineStyle)},null,6),f(n(e.lang("leave_a_reply"))+" ",1),Jg,z((l(),i("button",{class:"btn btn-default btn-sm float-right ml-1",onClick:s[3]||(s[3]=(...x)=>r.toggleReply&&r.toggleReply(...x))},Yg)),[[N,e.lang("close")]]),a("button",{class:"btn btn-default btn-sm float-right",onClick:s[4]||(s[4]=(...x)=>r.toggleCC&&r.toggleCC(...x))},n(e.lang("cc")),1)]),a("form",{method:"POST",action:"","accept-charset":"UTF-8",id:"client-reply",class:c(["cc_div",t.hideAction?"remove_action":""])},[t.showCC?(l(),P(U,{label:e.lang("cc"),multiple:!0,name:"cc",value:t.cc,onChange:r.onChange,clearable:!t.hideAction,classname:"col-sm-12 pad_0 cc_field",taggable:!0,placeholder:e.lang("enter_email_addresses"),labelStyle:t.labelStyle,rules:t.rules,key:t.resetCC},null,8,["label","value","onChange","clearable","placeholder","labelStyle","rules"])):h("",!0),d(X,{value:t.reply,type:"text",onChange:r.onChange,name:"reply",label:e.lang("reply"),required:!0,lang:t.lang_locale,labelStyle:t.labelStyle,id:"focus_editor"},null,8,["value","onChange","label","lang","labelStyle"]),Xg,a("span",em,[a("input",{ref:"fileInput",multiple:"",type:"file",onChange:s[5]||(s[5]=(...x)=>r.onFileSelected&&r.onFileSelected(...x)),style:{display:"none"}},null,544),t.files.length>0?(l(),i("div",tm,[(l(!0),i(I,null,O(t.files,(x,oe)=>(l(),i("div",null,[a("li",am,[f(n(x.name)+" ",1),a("i",{id:"close_attach",class:"fa fa-times",onClick:ke=>r.removeFile(oe)},null,8,om)])]))),256))])):h("",!0),a("button",{id:"btun",type:"button",class:"btn btn-custom",onClick:s[6]||(s[6]=x=>e.$refs.fileInput.click()),style:C(t.buttonStyle)},n(e.lang("attach files")),5),a("i",null,n(e.lang(t.str)),1)]),a("div",{class:c([{rem:t.lang_locale=="ar"},"text-right"])},[a("button",{type:"button",onClick:s[7]||(s[7]=(...x)=>r.verify&&r.verify(...x)),class:"btn btn-custom btn-lg",style:C(t.buttonStyle),disabled:t.disableButton,id:"client_timeline_reply"},[lm,f(" "+n(e.lang(t.btnName)),1)],12,sm)],2)],2)])):h("",!0)])):h("",!0)],64)):h("",!0),e.getApprovalActionVisibility?z((l(),i("div",{key:1,class:c(["row",{align1:t.lang_locale=="ar"}]),id:"approval-act-form"},[d(R,{id:"approval_con_comment","input-style":t.inputStyle,label:e.lang("comment"),value:t.approval_con_comment,type:"textarea",name:"approval_con_comment",onChange:r.onChange,classname:"col-sm-12",required:!0},null,8,["input-style","label","value","onChange"]),a("div",im,[a("button",{id:"approval_con_approve",onClick:s[8]||(s[8]=x=>r.onApproveDeny("approve")),class:"btn btn-success",disabled:t.isDisabled},[rm,f(" "+n(e.lang("approve")),1)],8,nm),a("button",{id:"approval_con_deny",onClick:s[9]||(s[9]=x=>r.onApproveDeny("deny")),class:"btn btn-danger",disabled:t.isDisabled},[dm,f(" "+n(e.lang("deny")),1)],8,cm)])],2)),[[q]]):h("",!0)],2)])])])])):h("",!0),t.loading+t.hasDataPopulated==0?(l(),i("div",um,[a("h3",_m,n(e.lang("no-data-to-show")),1)])):h("",!0)])}const gm=S(Dg,[["render",hm],["__scopeId","data-v-ebe548c5"]]);const mm={name:"show-ticket",description:"Show ticket page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},components:{"rating-component":Xe,"ticket-thread":ze,"ticket-details":et,"client-panel-loader":le},data(){return{loading:!0,perpage:10,pagination:1,records:0,TicketDetail:"",ticketData:"",comments_list:[],comments_list1:[],ticket_Id:"",url:"",AreaRatings:"",user_id:this.auth.user_data.id,tic_user_id:null,check_id:null,paramsObj:{},lang_locale:this.layout.language,pageChange:!1,actionPerformed:"initialLoad",lineStyle:{borderColor:this.layout.portal.client_header_color}}},created(){this.$Progress.start(),this.path=location.pathname.split("/"),this.check_id=this.path[this.path.length-1],this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj)},beforeMount(){this.$store.dispatch("setRatingTypes")},filters:{toUp(e){return e.toUpperCase()}},computed:{...W(["formattedTime","formattedDate"])},methods:{checkTicketId(e){this.$Progress.start();var s=e;A.get("/api/have-a-ticket/"+this.check_id,{params:s}).then(o=>{e.page===1&&(this.ticketData=o.data.data.ticket),this.loading=!1,this.pageChange=!1,this.$Progress.finish(),this.TicketDetail=o.data.data.ticket,this.tic_user_id=this.TicketDetail.user.id,this.ticket_Id=this.TicketDetail.id,this.AreaRatings=this.TicketDetail.ratings,this.comments_list=this.TicketDetail.threads,this.comments_list1=this.TicketDetail.threads.reverse(),this.records=this.TicketDetail.thread_count,this.url="rating/"}).catch(o=>{this.loading=!1,this.$Progress.fail()})},changePage(){this.actionPerformed="pageChange";var e=document.getElementById("comments");e.scrollIntoView({behavior:"smooth"}),this.$Progress.start(),this.pageChange=!0,this.paramsObj.page=this.pagination,this.checkTicketId(this.paramsObj)},subString(e){return Y(e,15)}}},ce=e=>(j("data-v-809fdeb6"),e=e(),M(),e),pm={key:0,class:"row"},ym={key:1,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},fm={key:2,class:"row"},bm={id:"content",class:"site-content col-sm-12"},vm={class:"hentry"},km={class:"entry-header"},wm=["title"],Cm=ce(()=>a("i",{class:"fas fa-ticket"},null,-1)),Sm={class:"entry-content clearfix"},Dm={class:"entry-attribute clearfix",id:"rate_entry"},Pm={class:"row"},Im=ce(()=>a("div",{class:"share-links col-sm-6"},null,-1)),Am={class:"comment-list"},Tm=ce(()=>a("br",null,null,-1)),Om=ce(()=>a("br",null,null,-1)),xm=ce(()=>a("br",null,null,-1)),Lm=ce(()=>a("br",null,null,-1)),Vm={key:1},jm=ce(()=>a("br",null,null,-1)),$m=ce(()=>a("br",null,null,-1)),Mm=ce(()=>a("br",null,null,-1)),Em=ce(()=>a("br",null,null,-1)),Fm=[jm,$m,Mm,Em];function Rm(e,s,o,m,t,r){const g=u("meta-component"),p=u("client-panel-loader"),b=u("loader"),y=u("alert"),v=u("rating-component"),k=u("ticket-details"),D=u("ticket-thread"),T=u("uib-pagination");return l(),i("div",null,[d(g,{dynamic_title:e.lang("show-ticket-title"),dynamic_description:e.lang("show-ticket-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),t.pageChange?(l(),i("div",pm,[d(p,{color:o.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0),t.loading?(l(),i("div",ym,[d(b,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):h("",!0),d(y),t.loading?h("",!0):(l(),i("div",fm,[a("div",bm,[a("article",vm,[a("header",km,[a("h3",{class:c(["entry-title",{align1:t.lang_locale=="ar"}]),title:t.TicketDetail.title},[Cm,f(" "+n(r.subString(t.comments_list[0].title===""?t.TicketDetail.title:t.comments_list[0].title))+" ",1),a("small",null,"( "+n(t.TicketDetail.ticket_number)+" )",1)],10,wm)]),a("div",Sm,[a("div",Dm,[a("div",Pm,[Im,a("div",{class:c(["rate-post col-sm-6",[t.lang_locale==="ar"?"text-left":"text-right"]])},[t.AreaRatings?(l(),P(v,{key:0,url:"rating/",AreaRatings:t.AreaRatings,layout:o.layout,from:"show-ticket",auth:o.auth,department:t.TicketDetail.department,ticketId:t.ticket_Id,area:"Helpdesk Area"},null,8,["AreaRatings","layout","auth","department","ticketId"])):h("",!0)],2)])]),t.ticketData?(l(),P(k,{key:0,ticket:t.ticketData,layout:o.layout,auth:o.auth},null,8,["ticket","layout","auth"])):h("",!0),a("div",{id:"comments",class:c(["comments-area",{align1:t.lang_locale=="ar"}])},[a("ol",Am,[(l(!0),i(I,null,O(t.comments_list1,V=>(l(),P(D,{userId:t.user_id,key:V.id,comments:V,layout:o.layout,auth:o.auth,dept:t.TicketDetail.department,from:"show-ticket"},null,8,["userId","comments","layout","auth","dept"]))),128))]),t.records>10?(l(),i("div",{key:0,class:c([{left:t.lang_locale=="ar"},"float-right"])},[d(T,{records:t.records,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=V=>t.pagination=V),class:"pagination",onPaginate:r.changePage,"boundary-links":!0,"per-page":t.perpage,options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","onPaginate","per-page"]),Tm,Om,xm,Lm],2)):h("",!0),t.records>10?(l(),i("div",Vm,Fm)):h("",!0)],2)])])])]))])}const zm=S(mm,[["render",Rm],["__scopeId","data-v-809fdeb6"]]);const Nm={name:"deactivate-modal",description:"Deactivate Modal component",props:{showModal:{type:Boolean,default:!1},deleteUrl:{type:String},onClose:{type:Function},layout:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},loading:!1,lang_locale:this.layout.language}},methods:{onSubmit(){this.$Progress.start(),this.loading=!0,this.isDisabled=!0,axios.get(this.deleteUrl).then(e=>{window.emitter.emit("refreshData"),G(e,"organization"),this.onClose(),this.loading=!1,this.isDisabled=!1,this.$Progress.finish()}).catch(e=>{this.loading=!1,this.isDisabled=!1,B(e,"organization"),this.$Progress.fail()})}},components:{modal:Ge,loader:le}},Um=e=>(j("data-v-a09f4633"),e=e(),M(),e),Bm={key:0},qm={key:1,class:"row"},Hm=["disabled"],Wm=Um(()=>a("i",{class:"fas fa-trash"},null,-1));function Km(e,s,o,m,t,r){const g=u("loader"),p=u("modal");return l(),i("div",null,[o.showModal?(l(),P(p,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:t.containerStyle},{title:w(()=>[a("h4",null,n(e.lang("deactivate")),1)]),fields:w(()=>[t.loading?h("",!0):(l(),i("div",Bm,[a("p",{id:"H5",class:c({margin:t.lang_locale=="ar"})},n(e.lang("are_you_sure_you_want_to_deactive_this_user")),3)])),t.loading?(l(),i("div",qm,[d(g,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0)]),controls:w(()=>[a("button",{type:"button",onClick:s[0]||(s[0]=(...b)=>r.onSubmit&&r.onSubmit(...b)),class:c(["btn btn-danger float-right",{left:t.lang_locale=="ar"}]),disabled:t.isDisabled,style:C(t.buttonStyle),id:"client_deactive_action"},[Wm,f(" "+n(e.lang("deactivate")),1)],14,Hm)]),_:1},8,["showModal","onClose","containerStyle"])):h("",!0)])}const Gm=S(Nm,[["render",Km],["__scopeId","data-v-a09f4633"]]);const Qm={name:"data-table-actions",description:"Contains edit, delete and view buttons as group which can be used as a component as whole. It is built basically for displaying edit, delete and view button in a datable.",props:{data:{type:Object,required:!0}},data(){return{showModal:!1,disabled:""}},created(){this.disabled=Ue(this.data.is_default)},watch:{data(e,s){return this.disabled=Ue(e.is_default),e}},methods:{showModalMethod(){this.data.is_default?Ue(this.data.is_default)?this.showModal=!1:(window.emitter.emit("cropModalChanged",""),this.showModal=!0):(window.emitter.emit("cropModalChanged",""),this.showModal=!0)},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"deactivate-modal":Gm}},Pt=e=>(j("data-v-b1a56ee3"),e=e(),M(),e),Jm={class:"btn-group"},Zm=["title"],Ym=Pt(()=>a("i",{class:"fa fa-edit"},null,-1)),Xm=[Ym],ep=["title","disabled"],tp=Pt(()=>a("i",{class:"fas fa-trash"},null,-1)),ap=[tp];function op(e,s,o,m,t,r){const g=u("router-link"),p=u("deactivate-modal");return l(),i("div",Jm,[o.data.edit_url?(l(),P(g,{key:0,to:o.data.edit_url},{default:w(()=>[a("span",{title:e.trans("edit"),class:"btn btn-default table_btn btn-sm",id:"client_actions_edit_btn"},Xm,8,Zm)]),_:1},8,["to"])):h("",!0),o.data.deactivate_url?(l(),i("a",{key:1,id:"delete-button",onClick:s[0]||(s[0]=(...b)=>r.showModalMethod&&r.showModalMethod(...b)),href:"javascript:;"},[a("span",{title:e.trans("deactivate"),class:"btn btn-default table_btn btn-sm",id:"client_actions_delete_btn",disabled:t.disabled},ap,8,ep)])):h("",!0),d(te,{name:"modal"},{default:w(()=>[t.showModal?(l(),P(p,{key:0,onClose:r.onClose,showModal:t.showModal,layout:o.data.layout,deleteUrl:"/org/delete/user/"+o.data.id},null,8,["onClose","showModal","layout","deleteUrl"])):h("",!0)]),_:1})])}const sp=S(Qm,[["render",op],["__scopeId","data-v-b1a56ee3"]]);const lp={name:"org-members-index",description:"Organization members table component",props:{org_id:{type:[String,Number],default:""},layout:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{base:window.axios.defaults.baseURL,columns:["full_name","user_name","email","mobile","updated_at","action"],options:{},apiUrl:"/organization/userdata/"+this.org_id}},computed:{...W(["formattedTime","formattedDate"])},beforeMount(){this.$Progress.start();const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{user_name:this.trans("user_name"),full_name:this.trans("name"),email:this.trans("email"),mobile:this.trans("mobile"),updated_at:this.trans("last_activity"),action:this.trans("action")},columnsClasses:{user_name:"org-name",email:"org-email",mobile:"org-mobile"},texts:{filter:"",limit:""},templates:{updated_at:function(s,o){return e.formattedTime(o.updated_at)},mobile:function(s,o){return o.mobile==="Not available"||!o.mobile?"---":o.mobile},email:function(s,o){return o.email?o.email:"---"},action:(s,o)=>e.h(sp,{data:o})},sortable:["user_name","email","mobile","updated_at"],filterable:["user_name","email","mobile","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(s){return{"sort-field":s.orderBy?s.orderBy:"updated_at","sort-order":s.ascending?"desc":"asc","search-query":s.query.trim(),page:s.page,limit:s.limit}},responseAdapter({data:s}){return e.$Progress.finish(),{data:s.message.data.map(o=>(e.auth.user_data.id!==o.id&&(o.edit_url={name:"EditUser",params:{id:o.id}},o.deactivate_url=!0,o.layout=e.layout,o.auth=e.auth),o)),count:s.message.total}}}},components:{"data-table":Qe}};function ip(e,s,o,m,t,r){const g=u("data-table");return l(),P(g,{url:t.apiUrl,dataColumns:t.columns,inputStyle:o.inputStyle,option:t.options,scroll_to:"org_members",color:o.layout.portal.client_header_color},null,8,["url","dataColumns","inputStyle","option","color"])}const np=S(lp,[["render",ip]]);const rp={name:"organization-view",description:"Organization details page",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{base:this.auth.system_url,loading:!0,organization:"",managers:"",user_id:"",org_id:"",lang_locale:this.layout.language,apiUrl:"",buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lineStyle:{borderColor:this.layout.portal.client_header_color},orgLogo:""}},components:{"tickets-table":Dt,"user-data":np,"faveo-image-element":be},computed:{...W(["formattedTime"])},beforeMount(){const e=location.pathname.split("/");this.org_id=e[e.length-1],this.user_id=e[e.length-2],this.apiUrl="/api/mytickets/"+this.org_id,this.getData()},methods:{getData(){this.$Progress.start(),A.get("/organizations/data/"+this.org_id).then(e=>{this.$Progress.finish(),this.loading=!1,this.organization=e.data.data.organization,this.orgLogo=this.organization.logo?this.organization.logo:this.basePathVersion()+"/themes/default/common/images/org.png",this.managers=e.data.data.organization.managers}).catch(e=>{this.$Progress.fail(),this.loading=!1,this.$router.push({name:"Client Layout"})})},subString(e,s=10){return e?Y(e,s):"--"}}},de=e=>(j("data-v-c3c106e1"),e=e(),M(),e),cp={key:0},dp=de(()=>a("br",null,null,-1)),up={class:"col-md-4"},_p={class:"widget-area"},hp={id:"section-org",class:"section"},gp={class:"section-title h4 clearfix"},mp={class:"banner-wrapper text-center",id:"org_about_wrap"},pp={class:"fa-stack fa-3x"},yp=de(()=>a("br",null,null,-1)),fp=["title"],bp={class:"banner-content"},vp={class:"fa-ul with-line-border"},kp=["title"],wp=de(()=>a("i",{title:"Phone",class:"fa-li fa fa-phone text-muted",id:"org_icon"},null,-1)),Cp=["title"],Sp=de(()=>a("i",{title:"Domain",class:"fa-li fa fa-globe text-muted",id:"org_icon"},null,-1)),Dp={key:2,id:"word_break"},Pp=de(()=>a("i",{title:"Address",class:"fa-li fa fa-map-marker text-muted",id:"org_icon"},null,-1)),Ip={key:3,id:"word_break"},Ap=de(()=>a("i",{title:"Internal Notes",class:"fa-li fas fa-sticky-note text-muted",id:"org_icon"},null,-1)),Tp={class:"widget-area"},Op={id:"section-managers",class:"section"},xp={class:"section-title h4 clearfix"},Lp={class:"banner-wrapper text-center",id:"org_managers_wrap"},Vp={class:"fa-stack fa-3x"},jp=de(()=>a("br",null,null,-1)),$p=["title"],Mp={class:"banner-content"},Ep={class:"fa-ul with-line-border"},Fp=["title"],Rp=de(()=>a("i",{title:"Phone",class:"fa-li fa fa-phone text-muted",id:"org_icon"},null,-1)),zp=["title"],Np=de(()=>a("i",{title:"Email",class:"fa-li fas fa-envelope text-muted",id:"org_icon"},null,-1)),Up={class:"col-md-8"},Bp={class:"widget-area",id:"org_members"},qp={id:"section-users",class:"section"},Hp={class:"section-title h4 clearfix"},Wp=de(()=>a("i",{class:"glyphicon glyphicon-plus"},null,-1)),Kp={class:"textwidget"},Gp={class:"widget-area"},Qp={id:"section-tickets",class:"section"},Jp={class:"section-title h4 clearfix"},Zp={class:"textwidget"};function Yp(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader"),b=u("alert"),y=u("faveo-image-element"),v=u("router-link"),k=u("user-data"),D=u("tickets-table");return l(),i("div",null,[d(g,{dynamic_title:e.lang("organizations-title"),layout:o.layout,dynamic_description:e.lang("organizations-description")},null,8,["dynamic_title","layout","dynamic_description"]),t.loading?(l(),i("div",cp,[d(p,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"]),dp])):h("",!0),d(b,{componentName:"organization"}),t.loading?h("",!0):(l(),i("div",{key:1,class:c(["row",{align1:t.lang_locale=="ar"}])},[a("div",up,[a("div",_p,[a("section",hp,[a("h2",gp,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("about")),1)]),a("div",mp,[a("span",pp,[a("i",null,[d(y,{id:"org_img","source-url":t.orgLogo,classes:["img-circle pack_image"],"alternative-text":"Org Image"},null,8,["source-url"])])]),yp,a("h4",{class:"banner-title h3 banner_h3",title:t.organization.name},n(r.subString(t.organization.name,20)),9,fp),a("div",bp,[a("ul",vp,[t.organization.phone?(l(),i("li",{key:0,title:t.organization.phone},[wp,f(" "+n(r.subString(t.organization.phone,25)),1)],8,kp)):h("",!0),t.organization.domain?(l(),i("li",{key:1,title:t.organization.domain},[Sp,f(" "+n(r.subString(t.organization.domain,25)),1)],8,Cp)):h("",!0),t.organization.address?(l(),i("li",Dp,[Pp,f(n(t.organization.address),1)])):h("",!0),t.organization.internal_notes?(l(),i("li",Ip,[Ap,f(" "+n(t.organization.internal_notes),1)])):h("",!0)])])])])]),a("div",Tp,[a("section",Op,[a("h2",xp,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("managers")),1)]),(l(!0),i(I,null,O(t.managers,T=>(l(),i("div",Lp,[a("span",Vp,[a("i",null,[d(y,{id:"user_avatar","source-url":T.profile_pic,classes:["img-circle","pack_image"]},null,8,["source-url"])])]),jp,a("h4",{class:"banner-title h3 banner_h3",title:T.first_name+" "+T.last_name},n(r.subString(T.first_name+" "+T.last_name,25)),9,$p),a("div",Mp,[a("ul",Ep,[a("li",{title:T.mobile},[Rp,f(" "+n(r.subString(T.mobile!=="Not available"?T.mobile:"--",25)),1)],8,Fp),a("li",{title:T.email},[Np,f(" "+n(r.subString(T.email!=="Not available"?T.email:"--",25)),1)],8,zp)])])]))),256))])])]),a("div",Up,[a("div",Bp,[a("section",qp,[a("h2",Hp,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("users"))+" ",1),d(v,{to:"/create/user",class:c([{left:t.lang_locale=="ar"},"btn btn-custom btn-sm float-right org-user"]),style:C(t.buttonStyle),id:"client_org_user_create_link"},{default:w(()=>[Wp,f(" "+n(e.lang("create_user")),1)]),_:1},8,["class","style"])]),a("div",Kp,[t.org_id?(l(),P(k,{key:0,org_id:t.org_id,layout:o.layout,inputStyle:t.inputStyle,auth:o.auth},null,8,["org_id","layout","inputStyle","auth"])):h("",!0)])])]),a("div",Gp,[a("section",Qp,[a("h2",Jp,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("tickets")),1)]),a("div",Zp,[t.org_id?(l(),P(D,{key:0,layout:o.layout,inputStyle:t.inputStyle,auth:o.auth,from:"org",orgId:t.org_id},null,8,["layout","inputStyle","auth","orgId"])):h("",!0)])])])])],2))])}const Xp=S(rp,[["render",Yp],["__scopeId","data-v-c3c106e1"]]),ey={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{lineStyle:{borderColor:this.layout.portal.client_header_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},userFormId:""}},beforeMount(){Array.isArray(this.auth.user_data)&&this.$router.push("/");const e=window.location.pathname;this.userFormId=aa(e)},computed:{mode(){return this.currentPath().indexOf("edit")!==-1?"edit":"create"},...W(["showLoader"])},components:{"faveo-form-client-panel":De}},ty={class:"row"},ay={id:"content",class:"site-content col-md-12"},oy={class:"hentry"},sy={id:"form-border",class:"comment-respond form-border",style:{background:"#fff"}},ly={id:"section-categories",class:"section"},iy={class:"section-title h4 clearfix mb-1"},ny={class:"row"};function ry(e,s,o,m,t,r){const g=u("meta-component"),p=u("faveo-form-client-panel");return l(),i("div",null,[d(g,{dynamic_title:r.mode==="edit"?e.trans("edit-user-title"):e.trans("create-user-title"),dynamic_description:r.mode==="edit"?e.trans("edit-user-description"):e.trans("create-user-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",ty,[a("div",ay,[a("article",oy,[a("div",sy,[a("section",ly,[a("h2",iy,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(r.mode==="edit"?e.trans("edit_user"):e.trans("create_user")),1)]),a("div",ny,[d(p,{panel:"client",category:"requester",inputStyle:t.inputStyle,layout:o.layout,scenario:r.mode==="create"?"create_organization_user":r.mode,showOrgField:!0,editApiEndpoint:r.mode==="create"?"":"/client/organizations/edituser/"+t.userFormId,editId:t.userFormId},null,8,["inputStyle","layout","scenario","editApiEndpoint","editId"])])])])])])])])}const rt=S(ey,[["render",ry]]),cy={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{user_data:"",system:null,loading:!1,color:"",size:50,layout_data:"",allow_register:"",allow_create_ticket:"",redirectPath:"",status:"",lineStyle:{borderColor:this.layout.portal.client_header_color},buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color}}},beforeMount(){(!this.layout.user_registration.status||!Array.isArray(this.auth.user_data))&&this.$router.push("/")},computed:{...W(["showLoader"]),userInfo(){if(this.$store.getters.getUserData)return this.userDetails(this.$store.getters.getUserData),this.$store.getters.getUserData}},methods:{userDetails(e){this.user_data=e.user_data,this.user_data.length!=0&&this.$router.push({name:"Home"})},layoutDetails(){this.layout_data=this.layout,this.color=this.layout_data.portal.client_header_color,this.allow_register=this.layout_data.user_registration.status,this.allow_create_ticket=this.layout_data.allow_users_to_create_ticket.status,this.status=this.layout_data.kb_settings.status,this.system=this.layout_data.system.status}},components:{"faveo-form-client-panel":De}},dy={class:"row"},uy={id:"content",class:"site-content col-md-12"},_y={class:"hentry"},hy={id:"form-border",class:"comment-respond form-border",style:{background:"#fff"}},gy={id:"section-categories",class:"section"},my={class:"section-title h4 clearfix mb-1"},py={class:"row"};function yy(e,s,o,m,t,r){const g=u("meta-component"),p=u("faveo-form-client-panel");return l(),i("div",null,[d(g,{dynamic_title:e.lang("registration-page-title"),dynamic_description:e.lang("registration-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",dy,[z(a("div",uy,[a("article",_y,[a("div",hy,[a("section",gy,[a("h2",my,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("register")),1)]),a("div",py,[d(p,{panel:"client",category:"requester",inputStyle:t.inputStyle,layout:o.layout},null,8,["inputStyle","layout"])])])])])],512),[[Bt,r.userInfo]])])])}const fy=S(cy,[["render",yy]]);function It(e){const{ticket_number:s,email_address:o}=e;let m={ticket_number:[s,"isRequired"],email_address:[o,"isRequired","isEmail"]};const t=new ge(L),{errors:r,isValid:g}=t.validate(m);return he.dispatch("setValidationError",r),{errors:r,isValid:g}}({...W(["showLoader"]),...qt(["updateCategory"])},Se,Q,De);const by={props:["dynamic_title","dynamic_description","name","layout"],data(){return{layout_data:"",system_name:this.layout.company.company_name,title:"",description:""}},created(){this.dynamic_title&&(this.system_name!=null?this.title=this.dynamic_title+" - "+this.system_name:this.title=this.dynamic_title+" - "),this.description=this.dynamic_description},watch:{title(){this.dynamic_title&&(this.system_name!=null?this.title=this.dynamic_title+" - "+this.system_name:this.title=this.dynamic_title+" - "),this.description=this.dynamic_description}}},vy={key:0};function ky(e,s,o,m,t,r){return o.layout?(l(),i("div",vy,[a("head",null,[a("title",null,n(t.title),1)])])):h("",!0)}const wy=S(by,[["render",ky]]);const Cy={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},category:{type:String,required:!0},panel:{type:String,default:"agent"}},data(){return{ticket_number:"",email_address:"",lang_locale:this.layout.language,isDisabled:!1,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},lineStyle:{borderColor:this.layout.portal.client_header_color},badgeStyle:{backgroundColor:this.layout.portal.client_header_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},loading:!1,ticketsCount:""}},beforeMount(){this.$Progress.start();var e=parseInt(this.layout.allow_users_to_create_ticket.status);e!==1&&Array.isArray(this.auth.user_data)&&this.$router.push("/"),this.updateTicketCount()},computed:{...W(["showLoader"])},methods:{updateTicketCount(){Array.isArray(this.auth.user_data)||(this.loading=!0,this.getTicketCount())},getTicketCount(){this.$Progress.start(),A.get("/api/client/ticket-filter").then(e=>{this.loading=!1,this.ticketsCount=e.data.data.filters.data,this.$Progress.finish()}).catch(e=>{this.loading=!1,this.$Progress.fail()})},onClick(e){this.$router.push({name:"MyTickets",params:{ticketTabData:e.id}})},onChange(e,s){this[s]=e},isValid(){const{errors:e,isValid:s}=It(this.$data);return!!s},findTicket(){if(this.isValid()){this.$Progress.start(),this.loading=!0;const e={};e.email_address=this.email_address,e.ticket_number=this.ticket_number,A.post("/checkmyticket",e).then(s=>{this.loading=!1,this.email_address=this.ticket_number="",G(s,"haveTicket"),this.$Progress.finish()}).catch(s=>{this.loading=!1,B(s,"haveTicket"),this.$Progress.fail()})}}},components:{DynamicSelect:Se,MetaComponent:wy,TextField:Q,FaveoFormClientPanel:De}},Sy=e=>(j("data-v-4bdf05a8"),e=e(),M(),e),Dy={class:"row"},Py={id:"content",class:"site-content col-md-9"},Iy={class:"hentry"},Ay={id:"form-border",class:"comment-respond form-border",style:{background:"#fff"}},Ty={id:"section-ticket",class:"section"},Oy={class:"section-title h4 clearfix mb-1"},xy={class:"row"},Ly={key:0,id:"sidebar",class:"site-sidebar col-md-3"},Vy={id:"form-border",class:"comment-respond form-border",style:{background:"#fff"}},jy={id:"section-haveticket",class:"section"},$y={class:"section-title h4 clearfix"},My={key:0,class:"row"},Ey={key:1,class:"row"},Fy={class:"col-sm-12"},Ry=["disabled"],zy=Sy(()=>a("i",{class:"fa fa-save"},"  ",-1)),Ny={key:1,id:"sidebar",class:"site-sidebar col-md-3"},Uy={id:"form-border",class:"comment-respond form-border",style:{background:"#fff"}},By={id:"section-summary",class:"section"},qy={class:"section-title h4 clearfix"},Hy={key:0,class:"row"},Wy={key:1,class:"row"},Ky={class:"nav nav-pills nav-stacked nav-categories ticket-count"},Gy={class:"d-flex justify-content-between align-items-center"},Qy=["onClick","id"];function Jy(e,s,o,m,t,r){const g=u("MetaComponent"),p=u("FaveoFormClientPanel"),b=u("alert"),y=u("loader"),v=u("TextField");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",null,[d(g,{dynamic_title:e.lang("submit_a_ticket-page-title"),dynamic_description:e.lang("submit_a_ticket-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("div",Dy,[a("div",Py,[a("article",Iy,[a("div",Ay,[a("section",Ty,[a("h2",Oy,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("submit_a_ticket")),1)]),a("div",xy,[d(p,{panel:o.panel,category:o.category,updateCount:r.updateTicketCount,inputStyle:t.inputStyle,layout:o.layout,auth:o.auth},null,8,["panel","category","updateCount","inputStyle","layout","auth"])])])])])]),Array.isArray(o.auth.user_data)?(l(),i("div",Ly,[a("div",Vy,[d(b,{componentName:"haveTicket"}),a("section",jy,[a("h2",$y,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("have_a_ticket")),1)]),t.loading?(l(),i("div",My,[d(y,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:60},null,8,["color"])])):(l(),i("div",Ey,[d(v,{label:e.lang("ticket_number"),value:t.ticket_number,type:"text",name:"ticket_number",onChange:r.onChange,classname:"col-sm-12",required:!0,inputStyle:t.inputStyle,id:"have_ticket_number"},null,8,["label","value","onChange","inputStyle"]),d(v,{label:e.lang("email_address"),value:t.email_address,type:"text",name:"email_address",onChange:r.onChange,classname:"col-sm-12",required:!0,inputStyle:t.inputStyle,id:"have_ticket_mail"},null,8,["label","value","onChange","inputStyle"]),a("div",Fy,[a("button",{class:c([{left:t.lang_locale=="ar"},"btn btn-custom"]),onClick:s[0]||(s[0]=k=>r.findTicket()),id:"have_ticket_action",style:C(t.btnStyle),disabled:t.isDisabled},[zy,f(n(e.lang("submit")),1)],14,Ry)])]))])])])):h("",!0),Array.isArray(o.auth.user_data)?h("",!0):(l(),i("div",Ny,[a("div",Uy,[d(b,{componentName:"haveTicket"}),a("section",By,[a("h2",qy,[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("ticket_summary")),1)]),t.loading?(l(),i("div",Hy,[d(y,{color:o.layout.portal.client_header_color,"animation-duration":4e3,size:30},null,8,["color"])])):(l(),i("div",Wy,[a("ul",Ky,[(l(!0),i(I,null,O(t.ticketsCount,(k,D)=>(l(),i("li",Gy,[a("a",{class:"list-group-item list-group-item-action",href:"javascript:;",onClick:T=>r.onClick(k),id:"ticket_list_"+D},[a("span",{class:"badge badge-pill pull-right float-right",style:C(t.badgeStyle)},n(k.ticket_count),5),f(" "+n(k.name+" tickets"),1)],8,Qy)]))),256))])]))])])]))])])]),_:1})}const Zy=S(Cy,[["render",Jy],["__scopeId","data-v-4bdf05a8"]]);const Yy={name:"approval-ticket-conversation",description:"Approval Ticket Conversation Component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{thread_count:0,title:"",ticket_number:0,threads:[],user:{},pagination:1,perpage:10,loading:!0,hasDataPopulated:!1,paramsObj:{},isDisabled:!1,comment:"",lang_locale:this.layout.language,hash:"",statusText:"",shallShowApprovalAction:!0,department:"",pageChange:!1,lineStyle:{borderColor:this.layout.portal.client_header_color},ticketData:""}},beforeMount(){this.paramsObj.page=this.pagination,this.getInitialValues(this.paramsObj)},methods:{getHashFromUrl(e){let s=e.split("/");return s[s.length-1]},getInitialValues(e){this.$Progress.start();const s=window.location.pathname;this.hash=this.getHashFromUrl(s),A.get("/api/ticket-conversation/"+this.hash,{params:e}).then(o=>{this.ticketData=o.data.data.ticket,this.updateStatesWithData(o.data.data.ticket),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.$Progress.finish()}).catch(o=>{this.statusText=o.response.data?o.response.data.message:"",this.hasDataPopulated=!0,this.loading=!1,this.pageChange=!1,this.$Progress.fail(),this.$router.push({path:"/not-found",name:"NotFound",params:{statusText:this.statusText}})})},updateStatesWithData(e){const s=this,o=this.$data;Object.keys(e).map(m=>{o.hasOwnProperty(m)&&(s[m]=e[m])})},isValid(){const{errors:e,isValid:s}=ht(this.$data);return!!s},onChange(e,s){this[s]=e},changePage(){this.pageChange=!0,window.scrollTo({top:100,behavior:"smooth"}),this.pagination=this.pagination,this.paramsObj.page=this.pagination,this.getInitialValues(this.paramsObj)},onSubmit(e){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.$Progress.start(),A.post("/api/approval-action/"+this.hash,{action_type:e,comment:this.comment}).then(s=>{G(s),this.loading=!1,this.isDisabled=!1,this.comment="",this.shallShowApprovalAction=!1,this.$Progress.finish()}).catch(s=>{B(s),this.loading=!1,this.isDisabled=!1,this.shallShowApprovalAction=!0,this.$Progress.fail()}))}},components:{"thread-list":ze,"text-field":Q,"ticket-details":et}},ne=e=>(j("data-v-ba7ad752"),e=e(),M(),e),Xy={key:0,class:"row"},ef={key:1,class:"row"},tf={id:"content",class:"site-content col-sm-12"},af={class:"hentry"},of={class:"entry-header"},sf=["title"],lf=ne(()=>a("i",{class:"fas fa-ticket"},null,-1)),nf={key:0,class:"entry-content clearfix"},rf={class:"comment-list"},cf=ne(()=>a("br",null,null,-1)),df=ne(()=>a("br",null,null,-1)),uf=ne(()=>a("br",null,null,-1)),_f=ne(()=>a("br",null,null,-1)),hf={key:1},gf=ne(()=>a("br",null,null,-1)),mf=ne(()=>a("br",null,null,-1)),pf=ne(()=>a("br",null,null,-1)),yf=ne(()=>a("br",null,null,-1)),ff=[gf,mf,pf,yf],bf={class:"form-group col-md-12"},vf=["disabled"],kf=ne(()=>a("span",{class:"fa fa-check"},null,-1)),wf=["disabled"],Cf=ne(()=>a("span",{class:"fa fa-times"},null,-1)),Sf={key:3,id:"loader",class:"row"};function Df(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("client-panel-loader"),y=u("ticket-details"),v=u("thread-list"),k=u("uib-pagination"),D=u("text-field"),T=Z("focus-first-input");return l(),i("div",null,[d(g,{dynamic_title:e.lang("approval_settings-page-title"),dynamic_description:e.lang("approval_settings-page-description"),layout:o.layout},null,8,["dynamic_title","dynamic_description","layout"]),d(p),t.pageChange?(l(),i("div",Xy,[d(b,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.statusText===""&&t.hasDataPopulated?(l(),i("div",ef,[a("div",tf,[a("article",af,[a("header",of,[a("h3",{class:c(["entry-title",{align1:t.lang_locale=="ar"}]),title:t.title},[lf,f(" "+n(t.title)+" ",1),a("small",null," ( "+n(t.ticket_number)+" )",1)],10,sf)]),t.hasDataPopulated&&t.thread_count>0?(l(),i("div",nf,[t.ticketData?(l(),P(y,{key:0,ticket:t.ticketData,layout:o.layout,auth:o.auth},null,8,["ticket","layout","auth"])):h("",!0),a("div",{id:"comments",class:c(["comments-area",{align1:t.lang_locale=="ar"}])},[a("ol",rf,[(l(!0),i(I,null,O(t.threads,V=>(l(),P(v,{userId:t.user.id,key:V.id,comments:V,layout:o.layout,auth:o.auth,dept:t.department,showRatings:!1},null,8,["userId","comments","layout","auth","dept"]))),128))]),t.thread_count>10&&t.loading===!1?(l(),i("div",{key:0,class:c([{left:t.lang_locale=="ar"},"float-right"])},[d(k,{records:t.thread_count,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=V=>t.pagination=V),onPaginate:r.changePage,class:c([{left:t.lang_locale=="ar"},"pull-right"]),"boundary-links":!0,"per-page":t.perpage,options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","onPaginate","class","per-page"]),cf,df,uf,_f],2)):h("",!0),t.thread_count>10?(l(),i("div",hf,ff)):h("",!0)],2)])):h("",!0)])])])):h("",!0),!t.loading&&t.shallShowApprovalAction?z((l(),i("div",{key:2,class:c(["row",{align1:t.lang_locale=="ar"}]),id:"approval-action-form"},[d(D,{id:"approval_conversation_comment",label:e.lang("comment"),value:t.comment,type:"textarea",name:"comment",onChange:r.onChange,classname:"col-sm-12",required:!0},null,8,["label","value","onChange"]),a("div",bf,[a("button",{id:"approval_conversation_approve",onClick:s[1]||(s[1]=V=>r.onSubmit("approve")),class:"btn btn-success",disabled:t.isDisabled},[kf,f(" "+n(e.lang("approve")),1)],8,vf),a("button",{id:"approval_conversation_deny",onClick:s[2]||(s[2]=V=>r.onSubmit("deny")),class:"btn btn-danger",disabled:t.isDisabled},[Cf,f(" "+n(e.lang("deny")),1)],8,wf)])],2)),[[T]]):h("",!0),t.loading?(l(),i("div",Sf,[d(b,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0)])}const Pf=S(Yy,[["render",Df],["__scopeId","data-v-ba7ad752"]]);const If={name:"ticket-conversation",description:"Ticket Conversation Component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{thread_count:0,title:"",ticket_number:0,threads:[],user:{},pagination:1,perpage:10,loading:!0,hasDataPopulated:!1,paramsObj:{},isDisabled:!1,comment:"",lang_locale:this.layout.language,hash:"",statusText:"",shallShowApprovalAction:!0,department:"",pageChange:!1}},beforeMount(){this.$Progress.start(),this.paramsObj.page=this.pagination,this.getInitialValues(this.paramsObj)},methods:{getHashFromUrl(e){let s=e.split("/");return s[s.length-1]},getInitialValues(e){this.$Progress.start();const s=window.location.pathname;this.hash=this.getHashFromUrl(s),A.get("/api/ticket-conversation-guest/"+this.hash,{params:e}).then(o=>{this.updateStatesWithData(o.data.data.ticket),this.loading=!1,this.pageChange=!1,this.hasDataPopulated=!0,this.$Progress.finish()}).catch(o=>{this.statusText=o.response.data.message,this.hasDataPopulated=!0,this.loading=!1,this.pageChange=!1,this.$Progress.fail(),this.$router.push({path:"/not-found",name:"NotFound",params:{statusText:this.statusText}})})},updateStatesWithData(e){const s=this,o=this.$data;Object.keys(e).map(m=>{o.hasOwnProperty(m)&&(s[m]=e[m])})},isValid(){const{errors:e,isValid:s}=ht(this.$data);return!!s},onChange(e,s){this[s]=e},changePage(){this.pageChange=!0,window.scrollTo({top:100,behavior:"smooth"}),this.pagination=this.pagination,this.paramsObj.page=this.pagination,this.getInitialValues(this.paramsObj)}},components:{"thread-list":ze,"text-field":Q,"client-panel-loader":le}},ue=e=>(j("data-v-c1d768aa"),e=e(),M(),e),Af={id:"alert",class:"row"},Tf={key:0,class:"row"},Of={key:1,class:"row"},xf={id:"content",class:"site-content col-sm-12"},Lf={class:"hentry"},Vf={key:0,class:"entry-header"},jf=["title"],$f=ue(()=>a("i",{class:"fas fa-ticket"},null,-1)),Mf={key:1,class:"entry-content clearfix"},Ef={class:"comment-list"},Ff=ue(()=>a("br",null,null,-1)),Rf=ue(()=>a("br",null,null,-1)),zf=ue(()=>a("br",null,null,-1)),Nf=ue(()=>a("br",null,null,-1)),Uf={key:1},Bf=ue(()=>a("br",null,null,-1)),qf=ue(()=>a("br",null,null,-1)),Hf=ue(()=>a("br",null,null,-1)),Wf=ue(()=>a("br",null,null,-1)),Kf=[Bf,qf,Hf,Wf],Gf={key:2,id:"loader",class:"row"};function Qf(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("client-panel-loader"),y=u("thread-list"),v=u("uib-pagination"),k=u("loader");return l(),i("div",null,[d(g,{dynamic_title:"Ticket Conversation",dynamic_description:e.lang("approval_settings-page-description"),layout:o.layout},null,8,["dynamic_description","layout"]),a("div",Af,[d(p)]),t.pageChange?(l(),i("div",Tf,[d(b,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.statusText===""?(l(),i("div",Of,[a("div",xf,[a("article",Lf,[t.hasDataPopulated?(l(),i("header",Vf,[a("h3",{class:c(["entry-title",{align1:t.lang_locale=="ar"}]),title:t.title},[$f,f(" "+n(t.title)+" ",1),a("small",null," ( "+n(t.ticket_number)+" )",1)],10,jf)])):h("",!0),t.hasDataPopulated&&t.thread_count>0?(l(),i("div",Mf,[a("div",{id:"comments",class:c(["comments-area",{align1:t.lang_locale=="ar"}])},[a("ol",Ef,[(l(!0),i(I,null,O(t.threads,D=>(l(),P(y,{userId:t.user.id,key:D.id,comments:D,layout:o.layout,auth:o.auth,dept:t.department,showRatings:!1},null,8,["userId","comments","layout","auth","dept"]))),128))]),t.thread_count>10&&t.loading===!1?(l(),i("div",{key:0,class:c([{left:t.lang_locale=="ar"},"float-right"])},[d(v,{records:t.thread_count,modelValue:t.pagination,"onUpdate:modelValue":s[0]||(s[0]=D=>t.pagination=D),class:c([{left:t.lang_locale=="ar"},"pull-right"]),onPaginate:r.changePage,"boundary-links":!0,"per-page":t.perpage,options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","class","onPaginate","per-page"]),Ff,Rf,zf,Nf],2)):h("",!0),t.thread_count>10?(l(),i("div",Uf,Kf)):h("",!0)],2)])):h("",!0)])])])):h("",!0),t.loading?(l(),i("div",Gf,[d(k,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0)])}const Jf=S(If,[["render",Qf],["__scopeId","data-v-c1d768aa"]]);const Zf={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{hash:"",rating:"",loading:!0,comment:"",showCommentBox:!1,thankYouMessage:"",ticketId:"",ratingTypeId:"",language:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},questions:[],showAdditionalQuestions:!1,ratingScale:null}},beforeMount(){this.getValues()},computed:{showExtraForm(){return this.showCommentBox||this.showAdditionalQuestions}},methods:{getHashFromUrl(e){let s=e.split("/");return s[s.length-1]},onChange(e,s){this[s]=e},getRatingFromUrl(e){let s=e.split("/");return s[s.length-1]},hideCommentBox(){this.showCommentBox=!1},hideQuestions(){this.showAdditionalQuestions=!1},finishProgress(){this.loading=!1,this.$Progress.finish()},displayAlert(e,s){this.$store.dispatch("setAlert",{type:e,message:s,component_name:""})},detectRatingGivenForAtLeastOneQuestion(){let e=0;return this.questions.forEach(s=>{s.value&&e++}),!!e},submitAdditionalComments(){if(this.loading=!0,this.$Progress.start(),this.showExtraForm&&!this.comment&&!this.detectRatingGivenForAtLeastOneQuestion()){this.hideCommentBox(),this.hideQuestions(),this.finishProgress();return}else if(!this.showExtraForm&&this.showCommentBox&&!this.comment){this.hideCommentBox(),this.finishProgress();return}else!this.showExtraForm&&this.showAdditionalQuestions&&!this.detectRatingGivenForAtLeastOneQuestion()&&(this.hideQuestions(),this.finishProgress());if(!this.ticketId||!this.ratingTypeId){this.hideCommentBox(),this.displayAlert("danger",this.lang("rating_comment_invalid_ticket_or_rating_type"));return}A.post(`api/add-additional-feedback/${this.ticketId}/${this.ratingTypeId}`,{comment:this.comment,questions:this.questions,user_id:this.auth.user_data.id}).then(e=>{G(e),this.redirect("/"),this.hideQuestions(),this.hideCommentBox(),this.finishProgress()}).catch(e=>{this.$Progress.fail(),B(e)})},getValues(){this.$Progress.start();const e=window.location.pathname;this.hash=this.getHashFromUrl(e),this.rating=this.getRatingFromUrl(e),new URLSearchParams(window.location.search),A.get("/api/rating/"+this.hash).then(s=>{localStorage.setItem("redirectPath","");let o=s.data.data;this.loading=!1,this.$Progress.finish(),this.showCommentBox=!!o.show_additional_comment_box,this.showAdditionalQuestions=!!o.has_additional_question,this.thankYouMessage=o.thank_you_message,this.ticketId=o.ticketId,this.$store.dispatch("setRatingTypes",this.ticketId),this.ratingTypeId=o.id,this.ratingScale=o.rating_scale,this.showExtraForm||this.displayAlert("success",o.thank_you_message),o.questions.length&&o.questions.forEach(m=>{this.questions.push({...m,value:0})})}).catch(s=>{this.loading=!1,this.$Progress.fail(),s.response.data.message=="You are unauthorised to give feedback."&&this.redirect("/auth/login"),this.displayAlert("danger",s.response.data.message),localStorage.setItem("redirectPath",window.location.pathname)})}},components:{index:Be,TextField:Q,FaveoBox:oa}},Yf=e=>(j("data-v-4c3c2d79"),e=e(),M(),e),Xf={key:0,id:"loader",class:"row"},eb={key:0,class:"card"},tb={class:"card-body scrolling-card"},ab={class:"row"},ob={class:"col-sm-12"},sb={class:"alert alert-success",role:"alert"},lb=Yf(()=>a("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")],-1)),ib={key:0,class:"row mt-3"},nb={class:"col-sm-12"},rb={class:"table-responsive"},cb={class:"table table-sm table-borderless",style:{width:"100%"}},db={class:"question_name"},ub={key:0,class:"row"},_b={class:"card-footer"},hb={key:1};function gb(e,s,o,m,t,r){const g=u("alert"),p=u("loader"),b=u("star-rating"),y=u("text-field"),v=u("faveo-box"),k=u("index"),D=Z("focus-first-input");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",null,[d(g,{id:"alert"}),t.loading?(l(),i("div",Xf,[d(p,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):(l(),i(I,{key:1},[r.showExtraForm?(l(),i("div",eb,[a("div",tb,[a("div",ab,[a("div",ob,[a("div",sb,[a("strong",null,n(t.thankYouMessage),1),lb])])]),t.showAdditionalQuestions&&t.questions.length?(l(),i("div",ib,[a("div",nb,[d(v,{title:"Additional Rating"},{default:w(()=>[a("div",rb,[a("table",cb,[a("tbody",null,[(l(!0),i(I,null,O(t.questions,T=>(l(),i("tr",{key:T.id},[a("td",null,[a("b",db,n(T.name),1),f("    "),d(b,{inline:!0,modelValue:T.value,"onUpdate:modelValue":V=>T.value=V,"show-rating":!1,"max-rating":t.ratingScale,"star-size":20},null,8,["modelValue","onUpdate:modelValue","max-rating"])])]))),128))])])]),t.showCommentBox?z((l(),i("div",ub,[d(y,{name:"comment",value:t.comment,placehold:e.lang("rating_additional_feedback_placeholder"),onChange:r.onChange,label:"",classname:"col-sm-12",rows:"3",type:"textarea",length:"250","show-word-limit":!0},null,8,["value","placehold","onChange"])])),[[D]]):h("",!0)]),_:1})])])):h("",!0)]),a("div",_b,[t.showAdditionalQuestions||t.showCommentBox?(l(),i("button",{key:0,class:"btn btn-custom btn-md",style:C(t.btnStyle),onClickOnce:s[0]||(s[0]=qe((...T)=>r.submitAdditionalComments&&r.submitAdditionalComments(...T),["prevent"]))},n(e.lang("submit")),37)):h("",!0)])])):(l(),i("div",hb,[d(k,{layout:o.layout,auth:o.auth},null,8,["layout","auth"])]))],64))])]),_:1})}const mb=S(Zf,[["render",gb],["__scopeId","data-v-4c3c2d79"]]);const pb={name:"verify-2fa",description:"Two-factor Authentication component",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},pp:{type:[Object,String],default:""},remember:{type:Boolean,default:!1}},data(){return{loading:!1,otp:"",p_auth:"",buttonStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},language:this.layout.language,isDisabled:!1,showRecovery:!0}},beforeMount(){let s=new URLSearchParams(window.location.search).get("PPAuth");if(s){let o=s.split(","),m={};m[o[0]]=o[1],this.p_auth=m}else this.p_auth=this.pp?JSON.parse(this.pp):"";Array.isArray(this.auth.user_data)?this.p_auth||this.$router.push({name:"Login"}):this.$router.push({name:"Home"})},watch:{showRecovery(e,s){this.otp="",this.$store.dispatch("unsetValidationError"),this.$store.dispatch("unsetAlert")}},methods:{onChange(e,s){this[s]=e},onSubmit(){if(!this.showRecovery)return this.verifyFactor();this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const e={};e.totp=this.otp,e.PPAuth=this.p_auth?this.p_auth:"",e.remember=JSON.parse(this.remember),A.post("/2fa/loginValidate",e).then(s=>{this.afterSuccess(s)}).catch(s=>{this.afterFailure(s)})},verifyFactor(){this.$Progress.start(),this.isDisabled=!0,this.loading=!0;const e={};e.rec_code=this.otp,A.post("/verify-recovery-code",e).then(s=>{this.afterSuccess(s)}).catch(s=>{this.afterFailure(s)})},afterSuccess(e){this.$Progress.finish(),this.isDisabled=!1,this.loading=!1,this.redirectUrl=e.data.data.redirect_url,this.redirectPath=localStorage.getItem("redirectPath"),this.redirectPath?window.location.href=this.redirect("/mytickets"):this.redirectUrl=="/"?window.location.href=this.auth.system_url:this.redirect(this.redirectUrl)},afterFailure(e){e.response.status===422?setTimeout(()=>{this.$router.push({name:"Login"})},2e3):this.$store.dispatch("setValidationError",{otp:"Wrong code. Try again"}),this.$Progress.fail(),this.isDisabled=!1,this.loading=!1,B(e,"2fa")},triggerEvent(e){var s=e.which||e.keyCode;s===13&&document.getElementById("2fa_otp").value!==""&&this.onSubmit()}},components:{"form-helper":Me,"text-field":Q,"custom-loader":je}},At=e=>(j("data-v-5772220b"),e=e(),M(),e),yb={id:"content",class:"site-content col-md-12"},fb={id:"head3"},bb={key:0},vb={class:"row"},kb={key:0,class:"col-sm-8"},wb=At(()=>a("span",null,[a("b",null,"Having problems?")],-1)),Cb={key:1,class:"col-sm-8"},Sb=["disabled"],Db=At(()=>a("i",{class:"fa fa-check"},null,-1));function Pb(e,s,o,m,t,r){const g=u("alert"),p=u("text-field"),b=u("custom-loader"),y=u("form-helper");return l(),P(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",{class:c({fa_align:t.language==="ar"})},[a("div",yb,[d(g,{componentName:"2fa"}),d(y,null,{title:w(()=>[a("h3",fb,n(t.showRecovery?e.lang("2_factor_auth"):e.lang("recovery_factor_auth")),1)]),fields:w(()=>[d(p,{label:e.lang("enter_code"),value:t.otp,id:"2fa_otp",autofocus:!0,type:"text",name:"otp",keyupListener:r.triggerEvent,"input-style":t.inputStyle,onChange:r.onChange,classname:"",required:!0},null,8,["label","value","keyupListener","input-style","onChange"]),a("p",null,n(t.showRecovery?e.lang("2fa-message"):e.lang("recovery_factor_message")),1),t.loading?(l(),i("div",bb,[d(b,{"animation-duration":4e3,color:o.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0)]),controls:w(()=>[a("div",vb,[t.showRecovery?(l(),i("div",kb,[wb,a("p",null,[a("a",{href:"javascript:;",onClick:s[0]||(s[0]=v=>t.showRecovery=!1)},"Login using recovery code")])])):h("",!0),t.showRecovery?h("",!0):(l(),i("div",Cb,[a("p",null,[a("a",{href:"javascript:;",onClick:s[1]||(s[1]=v=>t.showRecovery=!0)},"Login using Authenticator passcode")])])),a("div",{class:c(["col-sm-4",{left:t.language==="ar"}])},[a("button",{class:"btn btn-custom btn-block btn-flat",onClick:s[2]||(s[2]=v=>r.onSubmit()),style:C(t.buttonStyle),disabled:!t.otp,id:"2fa_otp_verify"},[Db,f(" "+n(e.lang("verify")),1)],12,Sb)],2)])]),_:1})])],2)]),_:1})}const Ib=S(pb,[["render",Pb],["__scopeId","data-v-5772220b"]]);const Ab={props:{id:{type:[String,Number],default:""},showModal:{type:Boolean,default:!1},onClose:{type:Function},layout:{type:Object,default:()=>{}}},data(){return{selectedId:this.id,renderingData:!0,orderDetail:{},containerStyle:{width:"800px"},lang_locale:this.layout.language}},computed:{...W(["formattedTime","formattedDate"])},beforeMount(){this.$Progress.start(),this.getDataFromAPi()},methods:{getDataFromAPi(){A.get("bill/package/user-order-info/"+this.selectedId).then(e=>{this.orderDetail=e.data.data,this.renderingData=!1,this.$Progress.finish()}).catch(e=>{this.renderingData=!1,B(e),this.$Progress.fail()})}}},Tb={key:0},Ob={class:"pad-left-right"},xb={class:"well table-responsive"},Lb={class:"table"},Vb={class:"bg-light"},jb={class:"pack_data"},$b={key:0,class:"well table-responsive"},Mb={class:"ticket_table"},Eb={class:"table"},Fb={class:"bg-light"},Rb={key:1,class:"row",slot:"fields"};function zb(e,s,o,m,t,r){const g=u("alert"),p=u("router-link"),b=u("loader"),y=u("modal");return l(),i("div",null,[o.showModal?(l(),P(y,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:t.containerStyle},{title:w(()=>[a("div",null,[a("h4",null,n(e.lang("order_details")),1),d(g,{componentName:"OrderInfo"})])]),fields:w(()=>[t.renderingData?(l(),i("div",Rb,[d(b,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):(l(),i("div",Tb,[a("div",Ob,[a("div",xb,[a("h4",null,n(e.lang("package_info")),1),a("table",Lb,[a("thead",Vb,[a("tr",null,[a("th",null,n(e.lang("package_name")),1),a("th",null,n(e.lang("validity")),1),a("th",null,n(e.lang("credit_type")),1),a("th",null,n(e.lang("credit_left")),1),a("th",null,n(e.lang("expiry_date")),1)])]),a("tbody",null,[a("tr",jb,[a("td",null,n(t.orderDetail.package.name),1),a("td",null,n(t.orderDetail.package.validity?t.orderDetail.package.validity=="semi_annually"?"Semi annually":t.orderDetail.package.validity:e.lang("one_time")),1),a("td",null,n(t.orderDetail.credit_type),1),a("td",null,n(t.orderDetail.credit),1),a("td",null,n(t.orderDetail.expiry_date?e.formattedTime(t.orderDetail.expiry_date):"--"),1)])])])]),t.orderDetail.order_tickets&&t.orderDetail.order_tickets.length>0?(l(),i("div",$b,[a("h4",null,n(e.lang("ticket-details")),1),a("div",Mb,[a("table",Eb,[a("thead",Fb,[a("tr",null,[a("th",null,n(e.lang("title")),1),a("th",null,n(e.lang("ticket_number")),1),a("th",null,n(e.lang("creation-date")),1)])]),a("tbody",null,[(l(!0),i(I,null,O(t.orderDetail.order_tickets,v=>(l(),i("tr",{class:"ticket_data",key:v.id},[a("td",null,n(v.ticket.first_thread.title),1),a("td",null,[d(p,{to:"/check-ticket/"+v.ticket.encrypted_id,target:"_blank",id:"bill_order_ticket"},{default:w(()=>[f(n(v.ticket.ticket_number),1)]),_:2},1032,["to"])]),a("td",null,n(e.formattedTime(v.ticket.created_at)),1)]))),128))])])])])):h("",!0)])]))]),_:1},8,["showModal","onClose","containerStyle"])):h("",!0)])}const Tt=S(Ab,[["render",zb],["__scopeId","data-v-a4967506"]]);const Nb={name:"",description:"",props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},components:{"client-panel-loader":le},data(){return{pageChange:!1,renderingData:!0,paginationObj:1,bigTotalItems:0,itemPerPage:8,packageListArr:[],searchText:"",defaultImage:"",btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lang_locale:this.layout.language}},beforeMount(){this.$Progress.start(),this.getDataFromAPi(),this.defaultImage=this.basePathVersion()+"/themes/default/client/images/package.png"},methods:{subString(e,s=5){return Y(e,s)},getPackageImageUrl(e){return e?this.commonPath+"/"+e:this.basePathVersion()+"/themes/default/client/images/package.png"},getFormattedCurrency(e){return e==0?L("free"):Pe(e,this.layout.billing_settings.currency,this.lang_locale)},getDataFromAPi(){this.$Progress.start(),A.get("bill/package/get-active-packages",{params:{"sort-field":"display_order","sort-order":"asc","search-query":this.searchText,page:this.paginationObj,limit:this.itemPerPage}}).then(e=>{this.packageListArr=e.data.data.data,this.bigTotalItems=e.data.data.total,this.commonPath=e.data.data.imageurl,this.renderingData=!1,this.pageChange=!1,this.$Progress.finish()}).catch(e=>{this.renderingData=!1,this.pageChange=!1,B(e),this.$Progress.fail()})},searchPackage(){this.pageChange=!0,this.paginationObj=1;let e=this;sa(function(){e.getDataFromAPi()},1e3)},handleCount(e){this.pageChange=!0,this.paginationObj=1,this.itemPerPage=parseInt(e),this.getDataFromAPi()},pageChanged(){this.pageChange=!0,this.paginationObj=this.paginationObj,this.getDataFromAPi();var e=document.getElementById("filter");e.scrollIntoView({behavior:"smooth"})}}},ve=e=>(j("data-v-70a91976"),e=e(),M(),e),Ub={key:0,class:"row"},Bb={key:1,class:"row"},qb={key:2,class:"row",id:"filter"},Hb={class:"col-md-6"},Wb=ve(()=>a("option",{value:"8"},"8",-1)),Kb=ve(()=>a("option",{value:"24"},"24",-1)),Gb=ve(()=>a("option",{value:"48"},"48",-1)),Qb=ve(()=>a("option",{value:"120"},"120",-1)),Jb=[Wb,Kb,Gb,Qb],Zb={class:"col-md-6"},Yb=["placeholder"],Xb={key:3,class:"row"},ev={class:"container"},tv={class:"features row"},av={class:"banner-wrapper text-center"},ov={class:"fa-stack fa-3x"},sv=["src"],lv=ve(()=>a("br",null,null,-1)),iv={class:"package_name text-break mt-4"},nv={class:"banner-content"},rv=["title"],cv=["title"],dv=ve(()=>a("span",{class:"fa fa-cart-plus"},null,-1)),uv={key:4},_v={style:{"text-align":"center"}};function hv(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader"),b=u("client-panel-loader"),y=u("alert"),v=u("router-link"),k=u("uib-pagination");return l(),i("div",{id:"main-div",class:c({rtl:t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("packages"),layout:o.layout},null,8,["dynamic_title","layout"]),t.renderingData?(l(),i("div",Ub,[d(p,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.pageChange?(l(),i("div",Bb,[d(b,{size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),d(y,{componentName:"PackageList"}),t.renderingData?h("",!0):(l(),i("div",qb,[a("div",Hb,[t.bigTotalItems>8?(l(),i("div",{key:0,class:c(["col-md-3 col-sm-3",{right:t.lang_locale=="ar"}])},[z(a("select",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=D=>t.itemPerPage=D),onChange:s[1]||(s[1]=D=>r.handleCount(t.itemPerPage)),style:C(t.inputStyle),id:"bill_pack_list_count"},Jb,36),[[ut,t.itemPerPage]])],2)):h("",!0)]),a("div",Zb,[a("div",{class:c(["col-md-10 col-sm-10 float-right",{left:t.lang_locale=="ar"}])},[z(a("input",{type:"text",placeholder:e.lang("search_here"),class:"form-control search-field","onUpdate:modelValue":s[2]||(s[2]=D=>t.searchText=D),onKeyup:s[3]||(s[3]=Ht(D=>r.searchPackage(),["enter"])),style:C(t.inputStyle),id:"bill_package_search"},null,44,Yb),[[ct,t.searchText]]),a("span",{class:c(["fa fa-search searchh",{left1:t.lang_locale=="ar"}])},null,2)],2)])])),t.renderingData?h("",!0):(l(),i("div",Xb,[a("div",ev,[a("div",tv,[(l(!0),i(I,null,O(t.packageListArr,(D,T)=>(l(),i("div",{class:c(["col-sm-3",{float1:t.lang_locale=="ar"}]),key:T},[a("div",av,[a("span",ov,[a("i",null,[a("img",{src:D.package_pic||t.defaultImage,alt:"",class:"img-circle pack_image"},null,8,sv)])]),lv,a("h4",iv,n(D.name),1),a("div",nv,[a("p",{title:r.getFormattedCurrency(D.price)},[f(n(e.lang("price"))+": ",1),a("b",null,n(r.subString(r.getFormattedCurrency(D.price),10)),1)],8,rv),a("p",null,[f(n(e.lang("validity"))+": ",1),a("b",null,n(D.validity?e.lang(D.validity):e.lang("one_time")),1)]),a("p",{title:D.allowed_tickets},[f(n(e.lang("allowed_tickets"))+": ",1),a("b",null,n(D.allowed_tickets),1),f(" "+n(D.period),1)],8,cv)]),a("p",null,[d(v,{to:Array.isArray(o.auth.user_data)?"auth/login":"/package/"+D.id,class:"btn btn-custom",style:C(t.btnStyle),id:"bill_pack_buy-"+T},{default:w(()=>[dv,f(" "+n(e.lang("buy_now")),1)]),_:2},1032,["to","style","id"])])])],2))),128))])])])),!t.renderingData&&t.packageListArr.length===0?(l(),i("div",uv,[a("h3",_v,n(e.lang("no-data-to-show")),1)])):h("",!0),t.bigTotalItems>8&&!t.renderingData?(l(),i("div",{key:5,class:c([{left:t.lang_locale=="ar"},"float-right"])},[d(k,{records:t.bigTotalItems,modelValue:t.paginationObj,"onUpdate:modelValue":s[4]||(s[4]=D=>t.paginationObj=D),class:"pagination","boundary-links":!0,"per-page":t.itemPerPage,onPaginate:s[5]||(s[5]=D=>r.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])],2)):h("",!0)],2)}const gv=S(Nb,[["render",hv],["__scopeId","data-v-70a91976"]]),mv={name:"user-invoice",description:"will list all the invoices of an user",props:{layout:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{apiUrl:"bill/package/get-user-invoice",dataTableColumns:["name","created_at","due_by","total_amount","status","action"],dataTableOptions:null,lang_locale:this.layout.language,inputStyle:{borderColor:this.layout.portal.client_input_field_color}}},computed:{...W(["formattedTime","formattedDate"])},beforeMount(){const e=this;this.$Progress.start();let s=this;this.dataTableOptions={headings:{name:L("invoice_id"),created_at:L("created_at"),due_by:L("due_by"),status:L("status"),total_amount:L("total_amount"),action:L("action")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{type(o,m){return m.type.name},created_at(o,m){return s.formattedTime(m.created_at)},due_by(o,m){return s.formattedTime(m.due_by)},status:function(o,m){let t=s.h("span",{class:m.order.status===1?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},m.order.status===1?"Paid":"Unpaid");return s.h("a",{class:"pointer_normal"},[t])},action:(o,m)=>m.order.status!==1?e.h(lt,{data:m}):e.h(lt,{data:m,isAdminEditOrDeleteEnabled:!0}),name:function(o,m){return s.h("a",{href:"javascript:;",onClick(t){s.$router.push("/invoice/"+m.id)},style:`color:${s.layout.portal.client_header_color}`,id:"bill_invoice_link"+m.id},"Invoice#"+m.id)}},sortable:["name","created_at","due_by","total_amount","status"],filterable:["name","created_at","due_by","total_amount"],pagination:{chunk:5,nav:"fixed",edge:!0},texts:{filter:"",limit:""},requestAdapter(o){return{"sort-field":o.orderBy?o.orderBy:"name","sort-order":o.ascending?"desc":"asc","search-query":o.query.trim(),page:o.page,limit:o.limit}},responseAdapter({data:o}){return this.$Progress.finish(),{data:o.data.data.map(m=>(m.total_amount=s.getFormattedCurrency(m.total_amount),m.delete_url=`bill/delete-user-invoice?invoice_ids=${m.id}`,m.alertComponentName="UserInvoice",m)),count:o.data.total}}}},methods:{getFormattedCurrency(e){return Pe(e,this.layout.billing_settings.currency,this.layout.language)}},components:{"data-table":Qe}},pv={class:"archive-title"};function yv(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("data-table");return l(),i("div",{class:c({"rtl align1":t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("user_invoices"),layout:o.layout},null,8,["dynamic_title","layout"]),d(p,{componentName:"UserInvoice"}),a("header",{class:c(["archive-header",{align1:t.lang_locale=="ar"}]),id:"invoices"},[a("h3",pv,n(e.lang("user_invoices")),1)],2),t.dataTableOptions?(l(),P(b,{key:0,url:t.apiUrl,dataColumns:t.dataTableColumns,option:t.dataTableOptions,color:o.layout.portal.client_header_color,inputStyle:t.inputStyle,scroll_to:"invoices"},null,8,["url","dataColumns","option","color","inputStyle"])):h("",!0)],2)}const fv=S(mv,[["render",yv]]);const bv={name:"package-list",description:"will list all the packages available",props:{from:{type:String,default:""},layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{apiUrl:"bill/package/get-user-packages",apiEndPoint:"bill/package/get-organization-packages",dataTableColumns:["name","invoice_id","validity","credit_type","credit","expiry_date","period_expiry_date","orderId"],dataTableOptions:null,showModal:!1,loading:!1,id:null,lang_locale:this.layout.language}},computed:{...W(["formattedTime","formattedDate"])},beforeMount(){this.$Progress.start(),this.$route.query&&this.$route.query.error?this.$store.dispatch("setAlert",{type:"danger",message:this.$route.query.error,component_name:"UserPackage"}):this.$route.query&&this.$route.query.success&&this.$store.dispatch("setAlert",{type:"success",message:this.$route.query.success,component_name:"UserPackage"});let e=this;this.dataTableOptions={headings:{name:L("name"),validity:L("billing_cycle"),expiry_date:L("expiry_date"),period_expiry_date:L("period_expiry_date"),credit_type:L("credit_type"),credit:L("ticket_credit"),invoice_id:L("invoice_id"),orderId:L("order")},templates:{invoice_id:function(s,o){return e.h("a",{href:"javascript:;",onClick(m){e.$router.push("/invoice/"+o.invoice.id)},style:`color:${e.layout.portal.client_header_color}`},"#"+o.invoice.id)},orderId:function(s,o){return e.h("a",{href:"javascript:;",style:`color:${e.layout.portal.client_header_color};text-decoration:underline`,onClick(m){e.showModal=!0,e.id=o.id}},L("view_order"))},expiry_date(s,o){return e.formattedTime(o.expiry_date)},period_expiry_date(s,o){return o.period_expiry_date?e.formattedTime(o.period_expiry_date):"---"},validity(s,o){return o.validity==="semi_annually"?"Semi annually":o.validity}},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},sortable:["credit","expiry_date"],filterable:!1,pagination:{chunk:5,nav:"fixed",edge:!0},texts:{filter:"",limit:""},requestAdapter(s){return{"sort-field":s.orderBy?s.orderBy:"id","sort-order":s.ascending?"desc":"asc","search-query":s.query.trim(),page:s.page,limit:s.limit}},responseAdapter({data:s}){return e.$Progress.finish(),{data:s.data.data.map(o=>(o.credit=o.credit,o.name=o.package.name,o.validity=o.package.validity?o.package.validity:L("one_time"),o.expiry_date=o.expiry_date,o)),count:s.data.total}}}},methods:{onClose(){this.showModal=!1}},components:{"data-table":Qe,"order-info-modal":Tt}},vv={class:"archive-title"},kv={key:0,class:"card-header"},wv={class:"card-title"},Cv={key:1,class:"row"},Sv=a("br",null,null,-1),Dv=a("br",null,null,-1),Pv={key:0,class:"card-header"},Iv={class:"card-title"},Av={key:1,class:"row"};function Tv(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("data-table"),y=u("loader"),v=u("order-info-modal");return l(),i("div",{class:c({"rtl align1":t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("user_packages"),layout:o.layout},null,8,["dynamic_title","layout"]),d(p,{componentName:"UserPackage"}),a("header",{class:c(["archive-header",{align1:t.lang_locale=="ar"}])},[a("h3",vv,n(e.lang("my_packages")),1)],2),a("div",{class:c([{"card card-light ":!o.from}])},[o.from!="tab"?(l(),i("div",kv,[a("h3",wv,n(e.lang("personal_packages")),1)])):h("",!0),a("div",{class:c(["my_bill_table",[{"card-body":!o.from}]])},[t.dataTableOptions?(l(),P(b,{key:0,url:t.apiUrl,dataColumns:t.dataTableColumns,option:t.dataTableOptions,color:o.layout.portal.client_header_color,"input-style":{borderColor:o.layout.portal.client_input_field_color}},null,8,["url","dataColumns","option","color","input-style"])):h("",!0),t.loading?(l(),i("div",Cv,[d(y,{"animation-duration":4e3,color:"#1d78ff",size:60})])):h("",!0)],2)],2),Sv,Dv,a("div",{class:c([{"card card-light ":!o.from}])},[o.from!="tab"?(l(),i("div",Pv,[a("h3",Iv,n(e.lang("org_packages")),1)])):h("",!0),a("div",{class:c(["my_bill_table",[{"card-body":!o.from}]])},[t.dataTableOptions?(l(),P(b,{key:0,url:t.apiEndPoint,dataColumns:t.dataTableColumns,option:t.dataTableOptions,color:o.layout.portal.client_header_color,"input-style":{borderColor:o.layout.portal.client_input_field_color}},null,8,["url","dataColumns","option","color","input-style"])):h("",!0),t.loading?(l(),i("div",Av,[d(y,{"animation-duration":4e3,color:"#1d78ff",size:60})])):h("",!0)],2)],2),d(te,{name:"modal"},{default:w(()=>[t.showModal?(l(),P(v,{key:0,onClose:r.onClose,showModal:t.showModal,id:t.id,layout:o.layout},null,8,["onClose","showModal","id","layout"])):h("",!0)]),_:1})],2)}const Ov=S(bv,[["render",Tv]]);const xv={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}},someUnrelatedVar:{type:[String,Number],default:""}},components:{DynamicSelect:Se,"custom-loader":je},data(){return{packageId:this.$route.params.id,orgId:"",orgName:"",orgOrder:!1,renderingData:!0,packDetail:"",checkboxStatus:!1,defaultImage:"",lang_locale:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},linkStyle:{color:this.layout.portal.client_header_color},orgSelectionStatus:!0}},computed:{...W(["formattedTime"])},beforeMount(){this.$Progress.start(),this.getDataFromAPi(),this.defaultImage=this.auth.system_url+"/"+this.appVersion+"/themes/default/client/images/package.png"},methods:{getDataFromAPi(){A.get("bill/package/user-package-info/"+this.packageId,{}).then(e=>{this.packDetail=e.data.data,this.packDetail.kb_link||(this.checkboxStatus=!0),this.renderingData=!1,this.$Progress.finish()}).catch(e=>{this.renderingData=!1,B(e,"PackageList"),this.$router.push({path:"/billing-package-list"}),this.$Progress.fail()})},getFormattedCurrency(e){return e==0?L("free"):Pe(e,this.layout.billing_settings.currency,this.lang_locale)},checkboxClickEvent(){this.checkboxStatus=this.checkboxStatus},toggleOrganizationSelectFieldVisibility(){this.orgSelectionStatus=!this.orgSelectionStatus,this.orgOrder=!this.orgOrder,this.orgId="",this.orgName=""},onChange(e){this.orgSelectionStatus=e!==null,this.orgId=e.id,this.orgName=e.name}}},Ae=e=>(j("data-v-021c94bb"),e=e(),M(),e),Lv={key:0,class:"row"},Vv={key:1,id:"content",class:"site-content col-md-12"},jv={class:"archive-title"},$v={class:"archive-list archive-news"},Mv={class:"hentry"},Ev={class:"entry-header"},Fv=["src"],Rv={class:"entry-meta text-muted"},zv={class:"date"},Nv=Ae(()=>a("i",{class:"far fa-calendar fa-fw icon_space"},null,-1)),Uv={datetime:"2013-10-22T20:01:58+00:00"},Bv=["title"],qv=Ae(()=>a("i",{class:"far fa-clock fa-fw icon_space"},null,-1)),Hv=["title"],Wv=Ae(()=>a("i",{class:"fa fa-ticket fa-fw icon_space"},null,-1)),Kv=["title"],Gv=Ae(()=>a("i",{class:"far fa-money-bill-alt icon_space"},null,-1)),Qv={datetime:"2013-10-22T20:01:58+00:00"},Jv={class:"entry-summary clearfix"},Zv={class:"container"},Yv={class:"row"},Xv={key:0,class:"row"},e1=["href"],t1=["disabled"],a1=Ae(()=>a("i",{class:"fa fa-forward"},null,-1));function o1(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader"),b=u("alert"),y=u("dynamic-select"),v=u("router-link");return l(),i("div",{id:"main-div",class:c({rtl:t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("package"),layout:o.layout},null,8,["dynamic_title","layout"]),t.renderingData?(l(),i("div",Lv,[d(p,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),d(b,{componentName:"Packageview"}),t.renderingData?h("",!0):(l(),i("div",Vv,[a("header",{class:c(["archive-header",{align1:t.lang_locale==="ar"}])},[a("h1",jv,n(e.lang("selected_package")),1)],2),a("div",$v,[a("article",Mv,[a("header",Ev,[a("img",{src:t.packDetail.package_pic.path?t.packDetail.package_pic.path:t.defaultImage,alt:"",class:c(["pack_img entry-thumbnail float-left",{float1:t.lang_locale==="ar"}])},null,10,Fv),a("h2",{class:c(["entry-title h3",{align1:t.lang_locale==="ar"}])},[a("a",{style:C(t.linkStyle),rel:"bookmark"},n(t.packDetail.name),5)],2)]),a("footer",{class:c(["entry-footer",{align1:t.lang_locale==="ar"}])},[a("div",Rv,[a("small",zv,[Nv,a("time",Uv,n(e.formattedTime(t.packDetail.updated_at)),1)]),a("small",{title:e.lang("validity"),class:"date"},[qv,a("time",null,n(e.lang(t.packDetail.validity?t.packDetail.validity:"one_time")),1)],8,Bv),a("small",{title:e.lang("allowed_tickets"),class:"date"},[Wv,a("time",null,n(t.packDetail.allowed_tickets),1)],8,Hv),a("small",{title:e.lang("price"),class:"date"},[Gv,a("time",Qv,n(r.getFormattedCurrency(t.packDetail.price)),1)],8,Kv)])],2),a("div",Jv,[a("p",{class:c({align1:t.lang_locale==="ar"})},n(t.packDetail.description),3),a("p",{class:c([t.lang_locale==="ar"?"text-right":"text-left"])},null,2),a("div",Zv,[a("div",Yv,[a("input",{id:"org-check",type:"checkbox",class:"cursor-pointer",onClick:s[0]||(s[0]=k=>r.toggleOrganizationSelectFieldVisibility()),title:" Order for whole Organization"}),f("   "+n(e.lang("purchase_for_an_organization")),1)]),t.orgOrder?(l(),i("div",Xv,[d(y,{placeholder:"Select an Organization",class:"col-md-8",multiple:!1,name:"orgId",prePopulate:!0,apiEndpoint:"/bill/package/get-organization-list",value:t.orgName,inputStyle:t.inputStyle,onChange:r.onChange},null,8,["value","inputStyle","onChange"])])):h("",!0)]),t.packDetail.kb_link?(l(),i(I,{key:0},[z(a("input",{type:"checkbox",onClick:s[1]||(s[1]=k=>r.checkboxClickEvent()),title:"Accept terms & conditions","onUpdate:modelValue":s[2]||(s[2]=k=>t.checkboxStatus=k),id:"bill_terms"},null,512),[[fe,t.checkboxStatus]]),f("  "),a("a",{href:t.packDetail.kb_link,target:"_blank",style:C(t.linkStyle),id:"bill_kb_link"},n(e.lang("terms_conditions")),13,e1)],64)):h("",!0),d(v,{tag:"button",to:"/checkout/CO-"+t.packageId+"?orgId="+t.orgId},{default:w(()=>[a("button",{disabled:!(t.checkboxStatus&&t.orgSelectionStatus),class:c(["btn btn-custom float-right check_btn",{left:t.lang_locale=="ar"}]),id:"bill_pack_checkout",style:C(t.btnStyle)},[a1,f(" "+n(e.lang("checkout"))+"  ",1)],14,t1)]),_:1},8,["to"])])])])]))],2)}const s1=S(xv,[["render",o1],["__scopeId","data-v-021c94bb"]]);const l1={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{packageId:this.$route.params.id,orgId:this.$route.query.orgId,renderingData:!0,invoiceDetail:{},paymentGetwayArr:{},selectedPaymentGetWay:"",transaction_id:"",checkoutLink:"",disablePay:!0,lang_locale:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lineStyle:{borderColor:this.layout.portal.client_header_color}}},computed:{getClientName:function(){let e=this.auth.user_data.full_name;return e&&e===""&&(e=this.auth.user_data.user_name)," "+e},getEmailAdd:function(){let e=this.auth.user_data.email;return e?" "+e:""},getPhoneNumber:function(){let e=this.auth.user_data.phone_number,s=this.auth.user_data.phone_country_code,o=this.auth.user_data.ext;return e&&e!=="Not available"?"+"+(s&&s!=="Not available"?s+" ":"")+e+(o?"-"+o:""):""},...W(["formattedTime","formattedDate"])},beforeMount(){this.$Progress.start(),this.getDataFromAPi()},methods:{getDataFromAPi(){A.get("bill/get-gateways-list",{params:{active:1}}).then(e=>{this.paymentGetwayArr=e.data.data.data,this.paymentGetwayArr.forEach(s=>{s.is_default===1&&(this.paymentGetWayName=s.gateway_name)}),this.selectedPaymentGetWay||(this.paymentGetWayName=this.paymentGetwayArr[0].gateway_name)}).catch(e=>{B(e),this.$Progress.fail()}),A.get("bill/package/user-checkout",{params:this.apiParams()}).then(e=>{this.invoiceDetail=e.data.data,this.transaction_id=e.data.data.transaction_id,this.renderingData=!1,this.$Progress.finish()}).catch(e=>{this.renderingData=!1,B(e,"CheckoutPage"),this.$Progress.fail()})},getFormattedCurrency(e){return Pe(e,this.layout.billing_settings.currency,this.lang_locale)},printDiv(e){var s=window.open("","","left=0,top=0,width=800,height=600,toolbar=0,scrollbars=0,status=0");s.document.write(document.getElementById(e).innerHTML),s.document.close(),s.focus(),s.print(),setTimeout(function(){s.close()},5)},downloadPDF(){A.get(window.axios.defaults.baseURL+"/invoice/pdf/"+this.invoiceDetail.id).then(e=>{e&&window.open(window.axios.defaults.baseURL+"/invoice/pdf/"+this.invoiceDetail.id)}).catch(e=>{B(e,"CheckoutPage")})},apiParams(){let e={package_id:this.packageId.split("-")[1],user_id:this.auth.user_data.id};return this.orgId&&this.orgId!=""&&(e.organization_id=this.orgId),e},updateSelectedGateWay(e){this.paymentGetWayName=e.target.value,this.checkoutLink=window.axios.defaults.baseURL+"/checkout/"+this.paymentGetWayName+"/"+this.transaction_id,this.disablePay=!(this.paymentGetWayName==="Bank Transfer"||this.paymentGetWayName==="Cash")}}},Te=e=>(j("data-v-eacc2d7a"),e=e(),M(),e),i1={key:0,class:"row"},n1={key:1,class:"section"},r1={class:"archive-title"},c1={class:"row"},d1={class:"col-md-12 check_out"},u1=Te(()=>a("i",{class:"fa fa-print"},null,-1)),_1=Te(()=>a("i",{class:"far fa-file-pdf"},null,-1)),h1={class:"col-md-12",id:"printablediv"},g1={class:"row",id:"check_row"},m1={class:"col-md-4"},p1={class:"widget-area",id:"check_wid"},y1={id:"section-about",class:"section"},f1={key:0},b1={key:1},v1=["innerHTML"],k1={key:1},w1={class:"col-md-4"},C1={class:"widget-area",id:"check_wid"},S1={id:"section-about",class:"section"},D1={class:"col-md-4"},P1={class:"widget-area",id:"check_wid"},I1={id:"section-about",class:"section"},A1={key:0,class:"text-danger"},T1={id:"f-30"},O1={key:1,class:"text-success"},x1={id:"f-30"},L1={key:2},V1=Te(()=>a("div",{class:"clearfix"},null,-1)),j1=Te(()=>a("hr",null,null,-1)),$1={class:"row",id:"check_row"},M1={class:"well table-responsive"},E1={id:"pack_data"},F1={id:"pack_data"},R1={id:"pack_data"},z1={id:"pack_data"},N1={class:"row",id:"check_row"},U1={class:"well table-responsive"},B1={class:"row form-inline"},q1={selected:""},H1=["value","id"],W1=["href","disabled"],K1=Te(()=>a("i",{class:"far fa-money-bill-alt ml-2"},null,-1));function G1(e,s,o,m,t,r){const g=u("meta-component"),p=u("loader"),b=u("alert");return l(),i("div",{id:"main-div",class:c({rtl:t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("checkout"),layout:o.layout},null,8,["dynamic_title","layout"]),t.renderingData?(l(),i("div",i1,[d(p,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),d(b,{componentName:"CheckoutPage"}),t.renderingData?h("",!0):(l(),i("section",n1,[a("header",{class:c(["archive-header",{align1:t.lang_locale=="ar"}])},[a("h3",r1,n("#"+t.invoiceDetail.id),1)],2),a("div",c1,[a("div",d1,[a("button",{type:"button",class:c([{left:t.lang_locale=="ar"},"btn btn-custom"]),onClick:s[0]||(s[0]=y=>r.printDiv("printablediv")),style:C(t.btnStyle),id:"bill_checkout_print"},[u1,f(" "+n(e.lang("print")),1)],6),a("button",{type:"button",class:c([{left1:t.lang_locale=="ar"},"btn btn-custom"]),onClick:s[1]||(s[1]=y=>r.downloadPDF()),style:C(t.btnStyle),id:"bill_checkout_pdf"},[_1,f(" "+n(e.lang("generate_pdf")),1)],6)]),a("div",h1,[a("div",g1,[a("div",m1,[a("div",p1,[a("section",y1,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("from")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[a("p",null,[a("b",null,n(t.invoiceDetail.from.name?t.invoiceDetail.from.name:"Helpdesk"),1)]),a("p",null,[f(n(e.lang("phone"))+" : ",1),t.invoiceDetail.from.phone?(l(),i("b",f1,n(t.invoiceDetail.from.phone_country_code?"+"+t.invoiceDetail.from.phone_country_code:"")+" "+n(t.invoiceDetail.from.phone),1)):(l(),i("b",b1,n(e.lang("not_mentioned")),1))]),a("p",null,[f(n(e.lang("address"))+" : ",1),a("b",null,[t.invoiceDetail.from.address?(l(),i("span",{key:0,innerHTML:t.invoiceDetail.from.address},null,8,v1)):(l(),i("span",k1,n(e.lang("not_mentioned")),1))])])],2)])])]),a("div",w1,[a("div",C1,[a("section",S1,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("to")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[a("p",null,[a("b",null,n(r.getClientName),1)]),a("p",null,[f(n(e.lang("email"))+" : ",1),a("b",null,n(r.getEmailAdd?r.getEmailAdd:e.lang("not_mentioned")),1)]),a("p",null,[f(n(e.lang("phone"))+" : ",1),a("b",null,n(r.getPhoneNumber?r.getPhoneNumber:e.lang("not_mentioned")),1)])],2)])])]),a("div",D1,[a("div",P1,[a("section",I1,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("invoice_details")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[t.invoiceDetail.order.status?(l(),i("p",O1,[a("b",x1,n(e.lang("paid")),1)])):(l(),i("p",A1,[a("b",T1,n(e.lang("unpaid")),1)])),a("p",null,[f(n(e.lang("invoice_id"))+" : ",1),a("b",null,n("#"+t.invoiceDetail.id),1)]),a("p",null,[f(n(e.lang("creation-date"))+" : ",1),a("b",null,n(e.formattedTime(t.invoiceDetail.created_at)),1)]),a("p",null,[f(n(e.lang("due_date"))+" : ",1),a("b",null,n(e.formattedTime(t.invoiceDetail.due_by)),1)]),t.invoiceDetail.order.status==1?(l(),i("p",L1,[f(n(e.lang("paid_date"))+" : ",1),a("b",null,n(t.invoiceDetail.paid_date?e.formattedTime(t.invoiceDetail.paid_date):e.formattedTime(t.invoiceDetail.created_at)),1)])):h("",!0)],2)])])]),V1,j1]),a("div",$1,[a("div",M1,[a("h4",{class:c(["text-uppercase",{align1:t.lang_locale=="ar"}]),id:"check_pack"},n(e.lang("package")),3),a("table",{class:c(["table table-strip",{align1:t.lang_locale=="ar"}])},[a("thead",null,[a("tr",null,[a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("name")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("description")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("validity")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("price")),3)])]),a("tbody",null,[a("tr",null,[a("td",E1,n(t.invoiceDetail.order.package.name),1),a("td",F1,n(t.invoiceDetail.order.package.description),1),a("td",R1,n(t.invoiceDetail.order.package.validity?t.invoiceDetail.order.package.validity=="semi_annually"?"Semi annually":t.invoiceDetail.order.package.validity:e.lang("one_time")),1),a("td",z1,n(r.getFormattedCurrency(t.invoiceDetail.total_amount)),1)])])],2)])]),a("div",N1,[a("div",U1,[a("h4",{id:"check_pack",class:c(["text-uppercase",{align1:t.lang_locale=="ar"}])},n(e.lang("payment_details")),3),a("table",{class:c(["table",{align1:t.lang_locale=="ar"}])},[a("tbody",null,[a("tr",null,[a("th",{style:{width:"50%"},class:c({align1:t.lang_locale=="ar"})},n(e.lang("paid_amount"))+" : ",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.amount_paid)),1)]),a("tr",null,[a("th",{style:{width:"50%"},class:c({align1:t.lang_locale=="ar"})},n(e.lang("balance"))+" : ",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.total_amount-t.invoiceDetail.amount_paid)),1)]),a("tr",null,[a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("total"))+" :",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.total_amount)),1)])])],2)])]),a("div",B1,[t.invoiceDetail.order.status==0?(l(),i("div",{key:0,class:c([t.lang_locale==="ar"?"mr-auto":"ml-auto"])},[a("select",{name:"paymen-gettway",class:"custom-select",onChange:s[2]||(s[2]=y=>r.updateSelectedGateWay(y)),style:C(t.inputStyle),id:"bill_pay_ways"},[a("option",q1,n(e.lang("select_payment_method")),1),(l(!0),i(I,null,O(t.paymentGetwayArr,y=>(l(),i("option",{value:y.gateway_name?y.gateway_name:y.name,key:y.name,id:"bill_pay"+y.gateway_name},n(y.name),9,H1))),128))],36),a("a",{class:c(["btn btn-custom ml-2",{disabled:t.disablePay}]),href:t.checkoutLink,disabled:t.disablePay,id:"bill_invoice_pay_now",style:C(t.btnStyle)},[K1,f("  "+n(e.lang("pay_now")),1)],14,W1)],2)):h("",!0)])])])]))],2)}const Q1=S(l1,[["render",G1],["__scopeId","data-v-eacc2d7a"]]);const J1={props:{layout:{type:Object,default:()=>{}},auth:{type:Object,default:()=>{}}},data(){return{selectedId:this.$route.params.id,renderingData:!0,invoiceDetail:{},paymentGetwayArr:{},transctionArr:[],transaction_id:"",checkoutLink:"",disablePay:!0,lang_locale:this.layout.language,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},lineStyle:{borderColor:this.layout.portal.client_header_color},system_name:this.layout.system.name!==""?this.layout.system.name:"SUPPORT CENTER"}},computed:{getClientName:function(){let e=this.auth.user_data.full_name;return e&&e===""&&(e=this.auth.user_data.user_name)," "+e},getEmailAdd:function(){let e=this.auth.user_data.email;return e?" "+e:""},getPhoneNumber:function(){let e=this.auth.user_data.phone_number,s=this.auth.user_data.phone_country_code,o=this.auth.user_data.ext;return e&&e!=="Not available"?"+"+(s&&s!=="Not available"?s+" ":"")+e+(o?"-"+o:""):""},...W(["formattedTime","formattedDate"])},beforeMount(){this.$Progress.start(),this.$route.query&&this.$route.query.error?this.$store.dispatch("setAlert",{type:"danger",message:this.$route.query.error,component_name:"InvoiceView"}):this.$route.query&&this.$route.query.success&&this.$store.dispatch("setAlert",{type:"success",message:this.$route.query.success,component_name:"InvoiceView"}),this.getDataFromAPi()},methods:{getDataFromAPi(){A.get("bill/get-gateways-list",{params:{active:1}}).then(e=>{this.paymentGetwayArr=e.data.data.data,this.paymentGetwayArr.forEach(s=>{s.is_default===1&&(this.paymentGetWayName=s.gateway_name)}),this.selectedPaymentGetWay||(this.paymentGetWayName=this.paymentGetwayArr[0].gateway_name)}).catch(e=>{B(e),this.$Progress.fail()}),A.get("bill/package/user-invoice-info/"+this.selectedId,{}).then(e=>{this.invoiceDetail=e.data.data,this.transctionArr=e.data.data.transactions,this.transaction_id=e.data.data.transaction_id,this.renderingData=!1,this.$Progress.finish()}).catch(e=>{this.renderingData=!1,B(e),this.$Progress.fail()})},getFormattedCurrency(e){return Pe(e,this.layout.billing_settings.currency,this.layout.language)},printDiv(e){var s=window.open("","","left=0,top=0,width=800,height=600,toolbar=0,scrollbars=0,status=0");s.document.write(document.getElementById(e).innerHTML),s.document.close(),s.focus(),s.print(),setTimeout(function(){s.close()},5)},downloadPDF(){A.get(window.axios.defaults.baseURL+"/invoice/pdf/"+this.invoiceDetail.id).then(e=>{e&&window.open(window.axios.defaults.baseURL+"/invoice/pdf/"+this.invoiceDetail.id)}).catch(e=>{B(e,"InvoiceView")})},updateSelectedGateWay(e){this.paymentGetWayName=e.target.value,this.disablePay=!(this.paymentGetWayName==="Bank Transfer"||this.paymentGetWayName==="Cash"),this.checkoutLink=window.axios.defaults.baseURL+"/checkout/"+this.paymentGetWayName+"/"+this.transaction_id}}},Oe=e=>(j("data-v-60533bec"),e=e(),M(),e),Z1={key:0,class:"row"},Y1={key:1,class:"section"},X1={class:"archive-title"},ek={class:"row"},tk={class:"col-md-12 check_out"},ak=Oe(()=>a("i",{class:"fa fa-print"},null,-1)),ok=Oe(()=>a("i",{class:"far fa-file-pdf"},null,-1)),sk={class:"col-md-12",id:"printablediv"},lk={class:"row",id:"check_row"},ik={class:"col-md-4"},nk={class:"widget-area",id:"check_wid"},rk={id:"section-about",class:"section"},ck={key:0},dk={key:1},uk=["innerHTML"],_k={key:1},hk={class:"col-md-4"},gk={class:"widget-area",id:"check_wid"},mk={id:"section-about",class:"section"},pk={class:"col-md-4"},yk={class:"widget-area",id:"check_wid"},fk={id:"section-about",class:"section"},bk={key:0,class:"text-danger"},vk={id:"f-30"},kk={key:1,class:"text-success"},wk={id:"f-30"},Ck={key:2},Sk=Oe(()=>a("div",{class:"clearfix"},null,-1)),Dk=Oe(()=>a("hr",null,null,-1)),Pk={class:"row",id:"check_row"},Ik={class:"well table-responsive"},Ak={id:"pack_data"},Tk={id:"pack_data"},Ok={id:"pack_data"},xk={id:"pack_data"},Lk={class:"row",id:"check_row"},Vk={class:"well table-responsive"},jk={class:"row",id:"check_row"},$k={class:"well table-responsive"},Mk={key:0},Ek={key:0,class:"text-success"},Fk={class:"label label-success"},Rk={key:1,class:"text-danger"},zk={class:"label label-danger"},Nk={key:1},Uk={colspan:"5",class:"text-center"},Bk={class:"row form-inline"},qk={selected:""},Hk=["value","id"],Wk=["href","disabled"],Kk=Oe(()=>a("i",{class:"far fa-money-bill-alt ml-2"},null,-1));function Gk(e,s,o,m,t,r){const g=u("meta-component"),p=u("alert"),b=u("loader");return l(),i("div",{id:"main-div",class:c({rtl:t.lang_locale=="ar"})},[d(g,{dynamic_title:e.lang("invoice"),layout:o.layout},null,8,["dynamic_title","layout"]),d(p,{componentName:"InvoiceView"}),t.renderingData?(l(),i("div",Z1,[d(b,{"animation-duration":4e3,size:60,color:o.layout.portal.client_header_color},null,8,["color"])])):h("",!0),t.renderingData?h("",!0):(l(),i("section",Y1,[a("header",{class:c(["archive-header",{align1:t.lang_locale=="ar"}])},[a("h3",X1,n("#"+t.invoiceDetail.id),1)],2),a("div",ek,[a("div",tk,[a("button",{type:"button",class:c([{left:t.lang_locale=="ar"},"btn btn-custom"]),onClick:s[0]||(s[0]=y=>r.printDiv("printablediv")),style:C(t.btnStyle),id:"bill_invoice_print"},[ak,f(" "+n(e.lang("print")),1)],6),a("button",{type:"button",class:c([{left1:t.lang_locale=="ar"},"btn btn-custom"]),onClick:s[1]||(s[1]=y=>r.downloadPDF()),style:C(t.btnStyle),id:"bill_invoice_pdf"},[ok,f(" "+n(e.lang("generate_pdf")),1)],6)]),a("div",sk,[a("div",lk,[a("div",ik,[a("div",nk,[a("section",rk,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("from")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[a("p",null,[a("b",null,n(t.invoiceDetail.from.name?t.invoiceDetail.from.name:"Helpdesk"),1)]),a("p",null,[f(n(e.lang("phone"))+" : ",1),t.invoiceDetail.from.phone?(l(),i("b",ck,n(t.invoiceDetail.from.phone_country_code?"+"+t.invoiceDetail.from.phone_country_code:"")+" "+n(t.invoiceDetail.from.phone),1)):(l(),i("b",dk,n(e.lang("not_mentioned")),1))]),a("p",null,[f(n(e.lang("address"))+" : ",1),a("b",null,[t.invoiceDetail.from.address?(l(),i("span",{key:0,innerHTML:t.invoiceDetail.from.address},null,8,uk)):(l(),i("span",_k,n(e.lang("not_mentioned")),1))])])],2)])])]),a("div",hk,[a("div",gk,[a("section",mk,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("to")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[a("p",null,[a("b",null,n(r.getClientName),1)]),a("p",null,[f(n(e.lang("email"))+" : ",1),a("b",null,n(r.getEmailAdd?r.getEmailAdd:e.lang("not_mentioned")),1)]),a("p",null,[f(n(e.lang("phone"))+" : ",1),a("b",null,n(r.getPhoneNumber?r.getPhoneNumber:e.lang("not_mentioned")),1)])],2)])])]),a("div",pk,[a("div",yk,[a("section",fk,[a("h2",{class:c(["section-title h4 clearfix",{align1:t.lang_locale=="ar"}])},[a("i",{class:"line",style:C(t.lineStyle)},null,4),f(n(e.lang("invoice_details")),1)],2),a("div",{class:c(["textwidget",{align1:t.lang_locale=="ar"}])},[t.invoiceDetail.order.status?(l(),i("p",kk,[a("b",wk,n(e.lang("paid")),1)])):(l(),i("p",bk,[a("b",vk,n(e.lang("unpaid")),1)])),a("p",null,[f(n(e.lang("invoice_id"))+" : ",1),a("b",null,n("#"+t.invoiceDetail.id),1)]),a("p",null,[f(n(e.lang("creation-date"))+" : ",1),a("b",null,n(e.formattedTime(t.invoiceDetail.created_at)),1)]),a("p",null,[f(n(e.lang("due_date"))+" : ",1),a("b",null,n(e.formattedTime(t.invoiceDetail.due_by)),1)]),t.invoiceDetail.order.status==1?(l(),i("p",Ck,[f(n(e.lang("paid_date"))+" : ",1),a("b",null,n(t.invoiceDetail.paid_date?e.formattedTime(t.invoiceDetail.paid_date):e.formattedTime(t.invoiceDetail.created_at)),1)])):h("",!0)],2)])])]),Sk,Dk]),a("div",Pk,[a("div",Ik,[a("h4",{class:c(["text-uppercase",{align1:t.lang_locale=="ar"}]),id:"check_pack"},n(e.lang("package")),3),a("table",{class:c(["table table-strip",{align1:t.lang_locale=="ar"}])},[a("thead",null,[a("tr",null,[a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("name")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("description")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("validity")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("price")),3)])]),a("tbody",null,[a("tr",null,[a("td",Ak,n(t.invoiceDetail.order.package.name),1),a("td",Tk,n(t.invoiceDetail.order.package.description),1),a("td",Ok,n(t.invoiceDetail.order.package.validity?t.invoiceDetail.order.package.validity:"One time"),1),a("td",xk,n(r.getFormattedCurrency(t.invoiceDetail.total_amount)),1)])])],2)])]),a("div",Lk,[a("div",Vk,[a("h4",{id:"check_pack",class:c(["text-uppercase",{align1:t.lang_locale=="ar"}])},n(e.lang("payment_details")),3),a("table",{class:c(["table",{align1:t.lang_locale=="ar"}])},[a("tbody",null,[a("tr",null,[a("th",{style:{width:"50%"},class:c({align1:t.lang_locale=="ar"})},n(e.lang("paid_amount"))+" : ",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.amount_paid)),1)]),a("tr",null,[a("th",{style:{width:"50%"},class:c({align1:t.lang_locale=="ar"})},n(e.lang("balance"))+" : ",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.total_amount-t.invoiceDetail.amount_paid)),1)]),a("tr",null,[a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("total"))+" :",3),a("td",null,n(r.getFormattedCurrency(t.invoiceDetail.total_amount)),1)])])],2)])]),a("div",jk,[a("div",$k,[a("h4",{id:"check_pack",class:c(["text-uppercase",{align1:t.lang_locale=="ar"}])},n(e.lang("transaction_details")),3),a("table",{class:c(["table table-strip",{align1:t.lang_locale=="ar"}])},[a("thead",null,[a("tr",null,[a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("transaction_id")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("transaction_date")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("payment_method")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("amount")),3),a("th",{class:c({align1:t.lang_locale=="ar"})},n(e.lang("status")),3)])]),t.transctionArr&&t.transctionArr.length>0?(l(),i("tbody",Mk,[(l(!0),i(I,null,O(t.transctionArr,y=>(l(),i("tr",null,[a("td",null,n(y.transactionId),1),a("td",null,n(e.formattedTime(y.created_at)),1),a("td",null,n(y.payment_method),1),a("td",null,n(r.getFormattedCurrency(y.amount_paid)),1),y.status==1?(l(),i("td",Ek,[a("span",Fk,n(e.lang("successful")),1)])):(l(),i("td",Rk,[a("span",zk,n(e.lang("failed")),1)]))]))),256))])):(l(),i("tbody",Nk,[a("tr",null,[a("td",Uk,n(e.lang("no_record")),1)])]))],2)])]),a("div",Bk,[t.invoiceDetail.order.status==0?(l(),i("div",{key:0,class:c([t.lang_locale==="ar"?"mr-auto":"ml-auto"])},[a("select",{name:"paymen-gettway",class:"custom-select",onChange:s[2]||(s[2]=y=>r.updateSelectedGateWay(y)),id:"bill_invoice_pay_ways",style:C(t.inputStyle)},[a("option",qk,n(e.lang("select_payment_method")),1),(l(!0),i(I,null,O(t.paymentGetwayArr,y=>(l(),i("option",{value:y.gateway_name?y.gateway_name:y.name,key:y.name,id:"bill_invoice_pay"+y.gateway_name},n(y.name),9,Hk))),128))],36),a("a",{class:c(["btn btn-custom ml-2",{disabled:t.disablePay}]),href:t.checkoutLink,disabled:t.disablePay,id:"bill-Invoice",style:C(t.btnStyle)},[Kk,f("  "+n(e.lang("pay_now")),1)],14,Wk)],2)):h("",!0)])])])]))],2)}const Qk=S(J1,[["render",Gk],["__scopeId","data-v-60533bec"]]);const Jk={name:"link-expired-component",description:"Link Expired Component",props:{layout:{type:Object,default:()=>{}}},data(){return{linkStyle:{color:this.layout.portal.client_header_color+" !important"},btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color}}}},Zk=e=>(j("data-v-4e7ebc7f"),e=e(),M(),e),Yk={class:"mt-5"},Xk={id:"content",class:"site-content"},ew={class:"hentry error404 text-center"},tw={class:"error-title"},aw=Zk(()=>a("span",{class:"visible-print text-danger"},null,-1)),ow={class:"entry-title text-muted mt-4"},sw={class:"entry-content clearfix mt-5"};function lw(e,s,o,m,t,r){const g=u("meta-component"),p=u("router-link");return l(),i("div",Yk,[d(g,{dynamic_title:e.lang("oops_link_expired"),layout:o.layout},null,8,["dynamic_title","layout"]),a("div",Xk,[a("article",ew,[a("h1",tw,[f("4"),a("i",{class:"far fa-frown text-danger",style:C(t.linkStyle)},null,4),aw,f("4")]),a("h2",ow,n(e.lang("page_expired")),1),a("div",sw,[a("p",null,[d(p,{to:"/",replace:"",class:"btn btn-custom",style:C(t.btnStyle),id:"go_to_home"},{default:w(()=>[f(n(e.lang("go_to_home")),1)]),_:1},8,["style"])])])])])])}const iw=S(Jk,[["render",lw],["__scopeId","data-v-4e7ebc7f"]]);const tt=e=>(j("data-v-bc597aee"),e=e(),M(),e),nw={key:0},rw={key:1,class:"card oauth-login-card shadow-lg mt-3"},cw={class:"card-body pb-1"},dw={class:"login_title text-secondary",slot:"title"},uw={class:"row"},_w={class:"col-sm-12"},hw={class:"row text-small pb-3"},gw={key:0,id:"login_loader"},mw={class:"form-group"},pw={key:0,class:"row pt-3 pl-3 pr-3"},yw=tt(()=>a("div",{class:"col-sm-4"},[a("hr")],-1)),fw=tt(()=>a("div",{class:"col button-divider"}," OR ",-1)),bw=tt(()=>a("div",{class:"col-sm-4"},[a("hr")],-1)),vw=[yw,fw,bw],kw={class:"saml-auth"},ww=["onClick"],Cw={key:3,class:""},Sw=["onClick"],Dw=["id"],Pw=["onClick","id"],Iw={__name:"OAuthLogInPage",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},language:{type:String,default:()=>""}},setup(e){const s=e,o=Le(),m=We(),t=E(!1),r=E(""),g=E([]),p=E(""),b=E(""),y=E(""),v=E(!1),k=E(!1),D=E(!1),T=E(""),V=E("oauth-page-login"),F=E({display:"none"}),U=E(!0),X=E({}),R=E({}),N=E({}),q=E([]),x=E(!1),oe=_t(),ke=E(""),we=E("");Ce(()=>{s.auth.user_data.length!==0&&o.push({path:"/not-found"});const H=L("Sign in to ");we.value=oe.query.application,ke.value=`${H}${oe.query.application?oe.query.application:s.layout.company.company_name}`,r.value=s.auth.system_url,q.value=s.language,D.value=s.layout.user_registration.status,R.value={color:"#fff",backgroundColor:"#099fdc"},N.value={borderColor:s.layout.portal.client_input_field_color},v.value=!0,k.value=!0,A.get("api/active-providers").then(J=>{g.value=J.data.data,v.value=!1,k.value=!1,x.value=!0}).catch(J=>{v.value=!1,k.value=!1,x.value=!1}),window.emitter.on("login-box-loader",J=>{J.value=J})});const Ne=()=>{window.emitter.emit("login-box-mounted",{providerData:g.value,login_type:"oAuth"})},xe=(H,J)=>{(J==="user_name"||J==="password")&&(J==="user_name"?p.value=H:b.value=H)},at=()=>{const{errors:H,isValid:J}=gt({user_name:p.value,password:b.value});return J},Ot=H=>{window.location.href=r.value+"/social/login/redirect/"+H},xt=H=>{window.location.href=H.login_url},Lt=(H,J,re)=>{if(at()){t.value=!0,v.value=!0;const ye={email:p.value,password:b.value,remember:U.value};ye[H]=J,re&&(ye.third_party_basic=re),window.emitter.emit("login-data-submitting",ye),A.post("login",ye).then(Vt).catch(jt)}},Vt=H=>{switch(y.value=H.data.data.redirect_url,t.value=!0,v.value=!1,T.value=localStorage.getItem("redirectPath"),!0){case y.value=="verify-2fa":o.push({name:"OAuthVerify2FA",path:"/oauth/verify-2fa",params:{pp:JSON.stringify(H.data.data.PPAuth),remember:U.value}});break;case(T.value&&T.value.includes("/rating/")):window.location.href=T.value;break;case T.value:window.location.href=r.value+"/mytickets";break;case y.value=="/":window.location.href=r.value;break;case y.value=="verify-email":m.dispatch("setEmail",H.data.data.email),o.push({path:"/oauth/verify-email",name:"OAuthEmailVerify"});break;case y.value==="panel/dashboard":window.location.href=r.value+"/"+y.value;break;case y.value.includes("authorize"):window.location.href=r.value+"/oauth/"+y.value;break;default:o.push({path:"/"+y.value});break}window.emitter.emit("login-success",H)},jt=H=>{t.value=!1,v.value=!1,B(H,V.value),H.response&&H.response.data&&H.response.data.message["g-recaptcha-response"]&&m.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:V.value}),window.emitter.emit("login-failure",H)},ot=H=>{var J=H.which||H.keyCode;if(J===13){window.emitter.emit("logging-in-with-enter-key");let re=document.getElementById("default-login-button");re.style.display!="none"&&re.click()}},$t=(H,J)=>{window.emitter.on("login-data-submitting",re=>{H&&(re.third_party_basic=J)}),document.getElementById("default-login-button").click()},Mt=Ke(()=>g.value.providers.length>0||g.value.saml_meta_settings.directory_settings.length>0||g.value.basic_auth_providers.length>0);return(H,J)=>{const re=u("custom-loader"),ye=u("alert"),Et=u("router-link"),Ft=Z("focus-first-input");return l(),i(I,null,[k.value?(l(),i("div",nw,[d(re,{duration:4e3,color:e.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0),k.value?h("",!0):(l(),i("div",rw,[a("div",cw,[a("h4",dw,n(ke.value),1),d(ye,{"component-name":V.value},null,8,["component-name"]),d(Ve,{btnClass:"login-button oauth-login-btn btn btn-block btn-flat mt-2 p-2",btnStyle:R.value,btnName:"login",iconClass:"",formSubmit:Lt,page:"login_page",componentName:V.value,btn_id:"default-login-button"},{fields:w(()=>[a("div",uw,[z((l(),i("div",_w,[d(Q,{layout:e.layout,inputStyle:N.value,labelStyle:F.value,label:K(L)("username"),value:p.value,type:"text",name:"user_name",keyupListener:ot,onChange:xe,placehold:K(L)("email_username_placeholder"),classname:"",required:!0,id:"login_form_user_name",page:"oauth-login"},null,8,["layout","inputStyle","labelStyle","label","value","placehold"]),d(Q,{labelStyle:F.value,layout:e.layout,inputStyle:N.value,label:K(L)("password"),value:b.value,type:"password",name:"password",keyupListener:ot,onChange:xe,placehold:K(L)("password"),classname:"",required:!0,id:"login_form_password",page:"oauth-login"},null,8,["labelStyle","layout","inputStyle","label","value","placehold"]),a("div",hw,[a("div",{class:c(["col-sm-6",["pull-left",{"forgot-class":q.value==="ar"}]]),id:"remember_me"},[z(a("input",{type:"checkbox","onUpdate:modelValue":J[0]||(J[0]=ee=>U.value=ee),name:"remember",id:"login_form_remeber"},null,512),[[fe,U.value]]),f(" "+n(K(L)("remember")),1)],2),a("div",{class:c(["col-sm-6 text-right",{"forgot-text-class":q.value==="ar"}]),id:"default-login"},[d(Et,{to:"/oauth/for-pass?application="+we.value,id:"default-forgot-password",class:c(["content-link",{float1:q.value==="ar"}])},{default:w(()=>[f(n(K(L)("forgot_password"))+"? ",1)]),_:1},8,["to","class"])],2)])])),[[Ft]]),v.value?(l(),i("div",gw,[d(re,{duration:4e3,color:e.layout.portal.client_header_color,size:60},null,8,["color"])])):h("",!0)])]),actions:w(()=>[a("div",mw,[Mt.value?(l(),i("div",pw,vw)):h("",!0),x.value?(l(),i("div",{key:1,id:"login-box",class:c(["pt-1",g.value?"":"pb-3"])},n(Ne()),3)):h("",!0),g.value.saml_meta_settings&&g.value.saml_meta_settings.directory_settings?(l(!0),i(I,{key:2},O(g.value.saml_meta_settings.directory_settings,ee=>(l(),i("div",kw,[a("button",{class:"btn btn-light link-dark btn-block btn-flat border-0 p-2 oauth-config",onClick:st=>xt(ee),id:"OneLogin"},[a("strong",null,n(ee.login_button_label)+" login",1)],8,ww)]))),256)):h("",!0),g.value.basic_auth_providers?(l(),i("div",Cw,[(l(!0),i(I,null,O(g.value.basic_auth_providers,ee=>(l(),i("div",null,[a("button",{class:"btn btn-light link-dark btn-block btn-flat border-0 p-2 oauth-config",onClick:st=>$t("third_party_basic",ee),id:"OneLogin"},[a("strong",null,n(ee)+" login",1)],8,Sw)]))),256))])):h("",!0),v.value?h("",!0):(l(!0),i(I,{key:4},O(g.value.providers,ee=>(l(),i("div",{style:C(X.value)},[a("ul",{class:c(["list-unstyled",{padd:q.value==="ar"}]),style:{width:"100%"}},[a("li",{id:"social-"+ee},[a("button",{class:c("btn btn-block btn-light link-dark btn-flat p-2 oauth-config"),onClick:st=>Ot(ee),id:"client_signin_provider-"+ee},[a("span",{class:c("fab fa-"+(ee==="linkedin-openid"?"linkedin":ee)),style:C({color:"btn btn-social btn"+(ee==="linkedin-openid"?"linkedin":ee)})},null,6),f(),a("strong",null,n(K(L)("sign_in_with"))+" "+n(ee==="linkedin-openid"?"LinkedIn":ee),1)],8,Pw)],8,Dw)],2)],4))),256))])]),_:1},8,["btnStyle","componentName"])])]))],64)}}},Aw=S(Iw,[["__scopeId","data-v-bc597aee"]]);const Tw={class:"card oauth-fp-card shadow-lg mt-3"},Ow={class:"card-body pb-1"},xw={id:"h3",class:"mb-10 text-center text-secondary"},Lw={key:0},Vw={key:1,class:"row pb-3"},jw={__name:"OAuthForgotPasswordPage",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},language:{type:String,default:()=>""}},setup(e){const s=e,o=E([]),m=Le(),t=_t(),r=E("forgot_password"),g=E(!1),p=E(""),b=E(!1),y=E("");Ce(()=>{Array.isArray(s.auth.user_data)||m.push({path:"oauth/login",name:"OAuthLogInPage"}),o.value=s.language,y.value=t.query.application});const v=(F,U)=>{p.value=F},k=()=>{const{errors:F,isValid:U}=$e({email_address:p.value});return!!U},D=()=>{if(k()){b.value=!0,g.value=!0;const F="email="+p.value;A.post("api/password/email",F).then(U=>{T(),G(U,"oauth-password"),setTimeout(()=>{m.push({path:"/oauth/login",name:"OAuthLogInPage"})},3e3)}).catch(U=>{T(),B(U,"oauth-password")})}},T=()=>{window.scrollTo(0,0),b.value=!1,g.value=!1},V=F=>{var U=F.which||F.keyCode;U===13&&D()};return(F,U)=>{const X=u("meta-component"),R=u("alert"),N=u("loader"),q=u("router-link"),x=Z("focus-first-input");return l(),i("div",Tw,[a("div",Ow,[a("div",{class:c({forgot_align:o.value==="ar"})},[d(X,{dynamic_title:F.lang("password-email-title"),dynamic_description:F.lang("password-email-description"),layout:e.layout},null,8,["dynamic_title","dynamic_description","layout"]),a("h3",xw,n(F.lang(r.value)),1),d(R,{componentName:"oauth-password"}),g.value?(l(),i("div",Lw,[d(N,{"animation-duration":4e3,color:e.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0),z((l(),i("div",{class:c({align1:o.value==="ar"})},[g.value?h("",!0):(l(),P(Q,{key:0,label:F.lang("email"),value:p.value,id:"forgot_pass_email",type:"email",name:"email_address",keyupListener:V,onChange:v,placehold:F.lang("enter_a_value"),classname:"",required:!0,rules:"email"},null,8,["label","value","placehold"]))],2)),[[x]]),g.value?h("",!0):(l(),i("div",Vw,[a("div",{class:c(["col-sm-6 col-md-8",{align1:o.value==="ar"}])},[d(q,{to:"/oauth/login?application="+y.value,class:"content-link",id:"forgot_to_login"},{default:w(()=>[f(n(F.lang("i_know_my_password")),1)]),_:1},8,["to"])],2),a("div",{class:c(["col-sm-6 col-md-4 float-right",{left:o.value==="ar"}])},[a("button",{class:"btn oauth-fp-btn btn-block btn-flat",onClick:U[0]||(U[0]=oe=>D()),id:"forgot_pass_action"},[a("strong",null,n(F.lang("send")),1)])],2)]))],2)])])}}},$w=S(jw,[["__scopeId","data-v-1d8c82e7"]]);const Mw=e=>(j("data-v-c46876da"),e=e(),M(),e),Ew={class:"card oauth-2fa-card shadow-lg mt-3"},Fw={class:"card-body pb-1"},Rw={id:"content",class:"site-content col-md-12"},zw={class:"row"},Nw={class:"col-sm-12 text-center"},Uw={id:"head3",class:"text-secondary"},Bw={class:"text-sm text-muted"},qw={key:0},Hw={class:"row pb-3"},Ww={key:0,class:"col-sm-8"},Kw=Mw(()=>a("span",{class:"text-muted"},[a("b",null,"Having problems?")],-1)),Gw={key:1,class:"col-sm-8"},Qw=["disabled"],Jw={__name:"OAuthVerify2FA",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},pp:{type:[Object,String],default:""},remember:{type:Boolean,default:!1},language:{type:String,default:()=>""}},setup(e){const s=e,o=E(!1),m=E(""),t=E(""),r=E({}),g=E(!1),p=E(!0),b=Le(),y=We(),v=E([]),k=E("");Ce(()=>{let R=new URLSearchParams(window.location.search);v.value=s.language,k.value=s.auth.system_url;let N=R.get("PPAuth");if(N){let q=N.split(","),x={};x[q[0]]=q[1],t.value=x}else t.value=s.pp?JSON.parse(s.pp):"";Array.isArray(s.auth.user_data)?t.value||b.push({path:"oauth/login",name:"OAuthLogInPage"}):b.push({name:"Home"})}),Wt(p,(R,N)=>{m.value="",y.dispatch("unsetValidationError"),y.dispatch("unsetAlert")});const D=(R,N)=>{m.value=R},T=()=>{g.value=!0,o.value=!0;const R={};R.rec_code=m.value,A.post("/verify-recovery-code",R).then(N=>{F(N)}).catch(N=>{U(N)})},V=()=>{if(!p.value)return T();g.value=!0,o.value=!0;const R={};R.totp=m.value,R.PPAuth=t.value?t.value:"",R.remember=JSON.parse(s.remember),A.post("/2fa/loginValidate",R).then(N=>{F(N)}).catch(N=>{U(N)})},F=R=>{g.value=!1,o.value=!1;let N=R.data.data.redirect_url;localStorage.getItem("redirectPath")?window.location.href=b.push({path:"/mytickets"}):N=="/"?window.location.href=s.auth.system_url:N.includes("authorize")?window.location.href=k.value+"/oauth"+N:N==="/panel/dashboard"?window.location.href=k.value+N:b.push({path:"/"+N})},U=R=>{R.response.status===422?setTimeout(()=>{b.push({name:"Login"})},2e3):y.dispatch("setValidationError",{otp:"Wrong code. Try again"}),g.value=!1,o.value=!1,B(R,"oauth-2fa")},X=R=>{var N=R.which||R.keyCode;N===13&&document.getElementById("2fa_otp").value!==""&&V()};return(R,N)=>{const q=u("alert"),x=u("router-link");return l(),i("div",Ew,[a("div",Fw,[d(te,{name:"page",mode:"out-in"},{default:w(()=>[a("div",{class:c({fa_align:v.value==="ar"})},[a("div",Rw,[d(q,{componentName:"oauth-2fa"}),a("div",zw,[a("div",Nw,[a("h3",Uw,n(p.value?R.lang("2_factor_auth"):R.lang("recovery_factor_auth")),1),d(x,{to:"/oauth/login",class:"content-link text-small float-right"},{default:w(()=>[f(n(R.lang("back_to_login")),1)]),_:1})])]),d(Q,{label:R.lang("enter_code"),value:m.value,id:"2fa_otp",autofocus:!0,type:"text",name:"otp",keyupListener:X,"input-style":r.value,onChange:D,classname:"",required:!0},null,8,["label","value","input-style"]),a("p",Bw,n(p.value?R.lang("2fa-message"):R.lang("recovery_factor_message")),1),o.value&&e.layout?(l(),i("div",qw,[d(je,{"animation-duration":4e3,color:e.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0),a("div",Hw,[p.value?(l(),i("div",Ww,[Kw,a("p",null,[a("a",{href:"javascript:;",class:"content-link text-sm",onClick:N[0]||(N[0]=oe=>p.value=!1)},"Login using recovery code")])])):h("",!0),p.value?h("",!0):(l(),i("div",Gw,[a("p",null,[a("a",{href:"javascript:;",class:"content-link text-sm",onClick:N[1]||(N[1]=oe=>p.value=!0)},"Login using Authenticator passcode")])])),a("div",{class:c(["col-sm-4",{left:v.value==="ar"}])},[a("button",{class:"btn oauth-2fa-btn btn-block btn-flat",onClick:N[2]||(N[2]=oe=>V()),disabled:!m.value,id:"2fa_otp_verify"},n(R.lang("verify")),9,Qw)],2)])])],2)]),_:1})])])}}},Zw=S(Jw,[["__scopeId","data-v-c46876da"]]);const Yw=e=>(j("data-v-2596ab83"),e=e(),M(),e),Xw={class:"card oauth-ev-card shadow-lg mt-3"},e0={class:"card-body pb-3"},t0={class:"email-verify"},a0={id:"content",class:"site-content col-md-12"},o0={key:0,class:"box-title text-secondary",align:"center"},s0={id:"message-resend",style:{"font-size":".8em",display:"none"}},l0={id:"message",style:{"font-size":".8em"}},i0={key:1,align:"center"},n0=Yw(()=>a("p",{class:"para-divider p-0",id:"or"},"or",-1)),r0={key:2},c0={id:"h3",class:"text-muted text-center"},d0={key:0},u0={key:1},_0={key:2,class:"row"},h0={__name:"OAuthEmailVerify",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},language:{type:String,default:()=>""}},setup(e){const s=e,o=E(!1),m=E([]),t=E(!1),r=E(""),g=E(""),p=E(!1),b=E("update_email"),y=We(),v=Le(),k=E({}),D=Ke(()=>y.getters.getVerifyEmail);Ce(()=>{m.value=s.language,k.value={borderColor:s.layout.portal.client_input_field_color},r.value=D.value,r.value||(y.dispatch("setAlert",{type:"danger",message:L("no_account_email_contact_admin"),component_name:"oauth-email"}),setTimeout(()=>{v.push("/oauth/login")},3e3))});const T=(q,x)=>{x==="email_address"?r.value=q:g.value=q},V=()=>{p.value=!0},F=()=>{const{errors:q,isValid:x}=$e({email_address:r.value});return!!x},U=()=>{if(F()){t.value=!0,o.value=!0;const q={oldEmail:D.value,email_address:r.value,password:g.value};A.post("api/update-email-verification",q).then(x=>{X(),G(x,"oauth-updateEmail"),setTimeout(()=>{v.push({path:"/oauth/login"})},4e3)}).catch(x=>{X(),B(x,"oauth-updateEmail")})}},X=()=>{window.scrollTo(0,0),t.value=!1,o.value=!1},R=q=>{var x=q.which||q.keyCode;x===13&&U()},N=()=>{t.value=!0,o.value=!0;const q={email:D.value};A.post("api/send-email-verification-link",q).then(x=>{X(),G(x,"oauth-updateEmail"),setTimeout(()=>{v.push({path:"/oauth/login"})},4e3)}).catch(x=>{X(),B(x,"updateEmail")})};return(q,x)=>{const oe=u("alert"),ke=u("meta-component"),we=u("loader"),Ne=u("router-link"),xe=Z("focus-first-input");return l(),i("div",Xw,[a("div",e0,[a("div",t0,[d(oe,{componentName:"oauth-email"}),D.value?(l(),i("div",{key:0,class:c({verify_align:m.value==="ar"})},[d(ke,{dynamic_title:K(L)("verify-email-title"),layout:e.layout,dynamic_description:K(L)("verify-email-description")},null,8,["dynamic_title","layout","dynamic_description"]),a("div",a0,[d(oe,{componentName:"oauth-updateEmail"}),p.value?h("",!0):(l(),i(I,{key:0},[o.value?h("",!0):(l(),i("h4",o0,[a("p",null,n(K(L)("hello")),1),a("span",s0,n(K(L)("activation-link-message")),1),a("span",l0,n(K(L)("activation_link_sent"))+" "+n(r.value)+". "+n(K(L)("click_link_to_activate")),1)])),o.value?h("",!0):(l(),i("div",i0,[a("button",{class:"btn oauth-ev-btn btn-block btn-flat",onClick:N,id:"verify_mail_resend"},[a("strong",null,n(K(L)("resend_activation_link")),1)]),n0,a("a",{id:"update_email",class:"content-link text-small",href:"javascript:void(0)",onClick:x[0]||(x[0]=at=>V())},n(K(L)("update-email-address")),1)])),o.value?(l(),i("div",r0,[d(we,{color:e.layout.portal.client_header_color,"animation-duration":4e3,size:50},null,8,["color"])])):h("",!0)],64)),p.value?(l(),i(I,{key:1},[a("h3",c0,n(K(L)(b.value)),1),o.value?h("",!0):(l(),i("p",d0,n(q.trans("update-verification-message")),1)),z((l(),i("div",{class:c({align1:m.value==="ar"})},[o.value?h("",!0):(l(),P(Q,{key:0,label:K(L)("new_email_address"),value:r.value,"input-style":k.value,type:"email",name:"email_address",onChange:T,placehold:K(L)("enter_a_value"),classname:"",required:!0,id:"new_email_address"},null,8,["label","value","input-style","placehold"])),o.value?h("",!0):(l(),P(Q,{key:1,label:K(L)("current_password"),value:g.value,"input-style":k.value,type:"password",name:"password",keyupListener:R,onChange:T,placehold:K(L)("enter_a_value"),classname:"",required:!0,id:"current_password"},null,8,["label","value","input-style","placehold"]))],2)),[[xe]]),o.value?(l(),i("div",u0,[d(we,{"animation-duration":4e3,color:e.layout.portal.client_header_color,size:50},null,8,["color"])])):h("",!0),o.value?h("",!0):(l(),i("div",_0,[a("div",{class:c(["col-xs-6 col-sm-6 col-md-8",{align1:m.value==="ar"}])},[d(Ne,{to:"/oauth/login",class:"content-link",id:"email_verify_login_link"},{default:w(()=>[f(n(K(L)("account_activated")),1)]),_:1})],2),a("div",{class:c(["col-xs-6 col-sm-6 col-md-4 pull-right",{left:m.value==="ar"}])},[a("button",{id:"email_update_btn",class:"btn oauth-ev-btn btn-block btn-flat",onClick:U},n(K(L)("update")),1)],2)]))],64)):h("",!0)])],2)):h("",!0)])])])}}},g0=S(h0,[["__scopeId","data-v-2596ab83"]]);const m0=e=>(j("data-v-fda1b77a"),e=e(),M(),e),p0={class:"oauth-login"},y0={class:"login-content-area pb-0"},f0={id:"content",class:"site-content"},b0={key:0,class:"logo-container"},v0={key:0},k0=["src"],w0={key:1,id:"client_logo_title",class:"content-link"},C0={key:1,class:"text-start pt-3"},S0=["value","id"],D0={class:"footer-container pb-2"},P0={class:"text-secondary text-center text-small"},I0=["href"],A0=m0(()=>a("a",{class:"content-link",id:"copyright_link",href:"https://www.faveohelpdesk.com/",target:"_blank"},"Faveo",-1)),T0={__name:"OAuthLayout",props:{layout:{type:Object,default:()=>{}},auth:{type:[Object,Array],default:()=>[]},whiteLabel:{type:Boolean,default:!1}},setup(e){const s=e,o=E(""),m=E([]),t=E([]),r=E(""),g=E(!1);Ce(()=>{o.value=s.auth.system_url,r.value=s.whiteLabel?"/themes/default/common/images/whitelabel.png":"/themes/default/common/images/installer/faveo.png",t.value=s.layout.language,g.value=!0,A.get("api/dependency/languages?meta=true").then(y=>{m.value=y.data.data.languages,g.value=!1}).catch(y=>{})});const p=Ke(()=>m.value.slice().sort((y,v)=>y.name.localeCompare(v.name))),b=y=>{let v=y.target.value;A.post("api/user-language?locale="+v).then(k=>{window.location.reload()})};return(y,v)=>{const k=u("router-view"),D=u("vue-progress-bar");return l(),i("div",p0,[a("div",y0,[a("div",f0,[g.value?h("",!0):(l(),i("div",b0,[e.layout&&e.layout.company&&e.layout.company.use_logo=="1"?(l(),i("div",v0,[a("img",{src:e.layout.company.logo,alt:"User Image",style:{"max-width":"300px","max-height":"127px"}},null,8,k0)])):(l(),i("div",w0,n(e.layout&&e.layout.system&&e.layout.system.name!==""?e.layout.system.name:"SUPPORT CENTER"),1))])),d(k,{auth:e.auth,layout:e.layout,language:t.value},null,8,["auth","layout","language"]),d(D,{class:"color-shift-progress-bar"}),g.value?h("",!0):(l(),i("div",C0,[z(a("select",{class:c(["form-select-sm bg-transparent border-0 text-secondary text-small",t.value==="ar"?"float-right":""]),onChange:v[0]||(v[0]=T=>b(T)),"onUpdate:modelValue":v[1]||(v[1]=T=>t.value=T),"aria-label":"form-select-sm"},[(l(!0),i(I,null,O(p.value,T=>(l(),i("option",{value:T.locale,key:T.key,id:"client_lang_"+T.locale},n(T.name)+" "+n("("+T.translation+")"),9,S0))),128))],34),[[ut,t.value]])]))])]),a("span",D0,[a("p",P0,[f(n(y.lang("copyright"))+" © "+n(K(He)().year())+" ",1),a("a",{href:e.layout&&e.layout.company?e.layout.company.website:"#",class:"content-link",target:"_blank",id:"copyright_link"},n(e.layout&&e.layout.company?e.layout.company.company_name:"")+". ",9,I0),e.whiteLabel?(l(),i(I,{key:0},[f(n(y.trans("all_rights_reserved"))+". ",1)],64)):(l(),i(I,{key:1},[f(n(y.trans("all_rights_reserved"))+". "+n(y.trans("powered_by"))+" ",1),A0],64))])])])}}},O0=S(T0,[["__scopeId","data-v-fda1b77a"]]);let x0=[{path:"/",component:Al,redirect:"/home",name:"Client Layout",children:[{path:"home",component:Be,name:"Home",meta:{breadcrumb:[{text:"home"}]}},{path:"client/home",component:Be,name:"Home Page",redirect:"home",meta:{breadcrumb:[{text:"home"}]}},{path:"auth/login/",component:nt,name:"Login",meta:{breadcrumb:[{to:"/",text:"home"},{to:"/auth/register",text:"create_account"},{text:"login"}]}},{path:"social/login/:provider",component:nt,name:"SocialCallback",meta:{breadcrumb:[{to:"/",text:"home"},{to:"/auth/register",text:"create_account"},{text:"login"}]}},{path:"auth/register",component:fy,name:"Register",meta:{breadcrumb:[{to:"/",text:"home"},{text:"register"}]}},{path:"create-ticket",component:Zy,name:"TicketForm",props:{category:"ticket",panel:"client"},meta:{breadcrumb:[{to:"/",text:"home"},{text:"submit_a_ticket"}]}},{path:"password/email",component:Ei,name:"ForgotPassword",meta:{breadcrumb:[{text:"forgot_password"}]}},{path:"reset/password/:id",component:Ki,name:"PasswordReset",meta:{breadcrumb:[{text:"reset_password"}]}},{path:"client-profile",component:zr,name:"UserProfile",beforeEnter:se,meta:{breadcrumb:[{text:"my_profile"}]}},{path:"knowledgebase",component:Fc,name:"Knowledgebase",meta:{breadcrumb:[{text:"knowledge_base"}]}},{path:"category-list",component:md,name:"CategoryList",meta:{breadcrumb:[{to:"/knowledgebase",text:"knowledge_base"},{text:"Category List"}]}},{path:"article-list",component:Ct,name:"ArticleList",meta:{breadcrumb:[{to:"/knowledgebase",text:"knowledge_base"},{text:"Article List"}]}},{path:"show/:slug",component:Au,name:"Articles",meta:{page:"article",breadcrumb:[{text:"knowledge_base",to:"/knowledgebase"},{text:"Article List",to:"/article-list"}]}},{path:"category-list/:slug",component:Qu,name:"Category",meta:{view:"category",breadcrumb:[{text:"knowledge_base",to:"/knowledgebase"},{text:"Category List",to:"/category-list"}]}},{path:"kb-tag-articles/:tag_id",component:Id,name:"Tags",meta:{breadcrumb:[{text:"knowledge_base",to:"/knowledgebase"},{text:"Tag"}]}},{path:"organization/:org_id",component:Xp,name:"Organizations",beforeEnter:se,props:!0,meta:{breadcrumb:[{to:"/",text:"home"},{text:"Organization"}]}},{path:"create/user",component:rt,name:"Create User",beforeEnter:se,props:!0,meta:{breadcrumb:[{to:"/",text:"home"},{text:"create_user"}]}},{path:"edit/user/:id",component:rt,name:"EditUser",beforeEnter:se,props:!0,meta:{breadcrumb:[{to:"/",text:"home"},{text:"edit_user"}]}},{path:"pages/:slug",component:Sd,name:"Pages",props:!0,meta:{breadcrumb:[{to:"/knowledgebase",text:"knowledge_base"},{text:"Pages"}]}},{path:"mytickets/:ticketTabData?",component:Dt,name:"MyTickets",beforeEnter:se,props:!0,meta:{breadcrumb:[{text:"my_tickets"}]}},{path:"check-ticket/:id",component:gm,name:"CheckTicket",beforeEnter:se,meta:{breadcrumb:[{to:"/mytickets",text:"myticket"},{text:"check_ticket"}]}},{path:"show-ticket/:hash",component:zm,name:"ShowTicket",meta:{breadcrumb:[{text:"show_ticket"}]}},{path:"search",component:d_,name:"SearchResult",meta:{breadcrumb:[{to:"/",text:"home"},{text:"Search Results"}]}},{path:"ticket-conversation/:id",component:Pf,name:"ApprovalTicketConversation",meta:{breadcrumb:[{to:"/",text:"home"},{text:"Approval Ticket Conversation"}]}},{path:"ticket-conversation-guest/:id",component:Jf,name:"TicketConversation",meta:{breadcrumb:[{to:"/",text:"home"},{text:"Ticket Conversation"}]}},{path:"rating/:id",component:mb,name:"TicketRating",meta:{breadcrumb:[{to:"/",text:"home"},{text:"Ticket Rating"}]}},{path:"verify-email",name:"EmailVerify",component:wn,props:!0,meta:{breadcrumb:[{text:"email_verify_lang_key"}]}},{path:"verify-2fa/:pp/:remember",name:"Verify2FA",component:Ib,props:!0,meta:{breadcrumb:[{text:"Two Factor Verification"}]}},{path:"server-error",name:"ServerError",component:ni,meta:{breadcrumb:[{text:"500"}]}},{path:"not-found",name:"NotFound",component:Jl,props:!0,meta:{breadcrumb:[{text:"404"}]}},{path:"404",name:"404",component:it,props:!0,meta:{breadcrumb:[{text:"404"}]}},{path:"link-expired",name:"LinkExpired",component:iw,props:!0,meta:{breadcrumb:[{text:"Link Expired"}]}},{path:"account/activation/:id",name:"EmailActivation",component:en,props:!0,meta:{breadcrumb:[{text:"Email Activation"}]}},{path:"billing-user-packages",component:Ov,beforeEnter:se,name:"MyPackaage",meta:{breadcrumb:[{to:"/",text:"home"},{text:"my_packages"}]}},{path:"billing-user-invoices",component:fv,beforeEnter:se,name:"UserInvoice",meta:{breadcrumb:[{to:"/",text:"home"},{text:"my_invoices"}]}},{path:"billing-order-info/:id",component:Tt,beforeEnter:se,name:"OrderInfo",meta:{breadcrumb:[{to:"/",text:"home"},{text:"order_info"}]}},{path:"billing-package-list",component:gv,name:"PackageList",meta:{breadcrumb:[{to:"/",text:"home"},{text:"packages"}]}},{path:"package/:id",component:s1,beforeEnter:se,name:"PackageView",meta:{breadcrumb:[{to:"/",text:"home"},{text:"package"}]}},{path:"checkout/:id",component:Q1,beforeEnter:se,name:"CheckoutPage",props:!0,meta:{breadcrumb:[{to:"/",text:"home"},{text:"checkout"}]}},{path:"invoice/:id",component:Qk,beforeEnter:se,name:"InvoiceView",meta:{breadcrumb:[{to:"/",text:"home"},{text:"invoice"}]}}]},{path:"/:pathMatch(.*)*",component:it,name:"NotFound Layout"},{path:"/oauth",component:O0,redirect:"/oauth/login",name:"OAuthLayout",children:[{path:"/oauth/login",component:Aw,name:"OAuthLogInPage"},{path:"/oauth/for-pass",component:$w,name:"OAuthForgotPasswordPage"},{path:"/oauth/verify-2fa/:pp/:remember",component:Zw,name:"OAuthVerify2FA",props:!0},{path:"/oauth/verify-email",name:"OAuthEmailVerify",component:g0,props:!0}]}];function se(e,s,o){Array.isArray(he.getters.getUserData.user_data)?o("auth/login"):o()}const F0=Kt({history:Gt(),inkActiveClass:"",linkExactActiveClass:"active exact-active",routes:x0});export{le as C,Me as F,wy as M,Ki as P,ln as V,Al as a,F0 as r};
