import{a as b,c as r,f as e,n as f,t as a,d as h,F as m,g as _,i as p,v as g,x as v,h as w,A as M,o as c,p as k,j as C}from"./vendor.js";import{_ as U}from"./bootstrap.js";const F={name:"help-widget",props:{from:{type:String,default:""}},data(){return{supportBaseUrl:"https://support.faveohelpdesk.com/show/",chatClass:"chat",btnClass:"fab",iconClass:"prime fas fa-question",articleList:[],loading:!1,hasDataPopulated:!1,showContent:!1,searchFilter:"",widgetOpen:!1,getIn:!1,files:[],help_email:"support@ladybirdweb.com",help_subject:"",help_message:"",alertMsg:"",alertClass:"",product:"",impact:"",about:"",profileData:"",name:"",email:"",url:"",contentMsg:"",fileUploadRuleObject:{},newUserMail:""}},beforeMount(){this.newUserMail=this.loggedUserMail},computed:{totalFileCount(){return this.files.length},totalFileSizeInBytes(){return this.files.length?this.files.map(l=>l.size).reduce((l,s)=>l+s):0}},methods:{disableStatus(l){return l&&l.length!=0},bytesToHuman(l){const s=["Bytes","KB","MB","GB","TB"];if(l===0)return"0 Bytes";const u=parseInt(Math.floor(Math.log(l)/Math.log(1024)),10);return u===0?`${l} ${s[u]}`:`${(l/1024**u).toFixed(1)} ${s[u]}`},async getFileUploadRules(){try{let{data:l}=await b.get("file-manager/upload-info");this.fileUploadRuleObject=l.data}catch{}},makeFalse(){this.getIn=!1,this.alertMsg="",this.resetData()},onFileSelected(l){const s=l.target.files;let d=[...s].map(n=>n.size).reduce((n,i)=>n+i);if(this.totalFileSizeInBytes+d>this.fileUploadRuleObject.maxPostSize){this.alertClass="alert-danger",this.alertMsg=`Maximum post size should be less than ${this.bytesToHuman(this.fileUploadRuleObject.maxPostSize)}`,this.scrollToDiv();return}if(this.totalFileCount+s.length>this.fileUploadRuleObject.maxFileUploadCount){this.alertMsg=`Maximum ${this.fileUploadRuleObject.maxFileUploadCount} file(s) can be uploaded at once`,this.alertClass="alert-danger",this.scrollToDiv();return}for(var t=0;t<s.length;t++){if(s[t].size>this.fileUploadRuleObject.maxSingleFileSize){this.alertMsg=`File size cannot be greater than ${this.bytesToHuman(this.fileUploadRuleObject.maxSingleFileSize)}`,this.alertClass="alert-danger",this.scrollToDiv();return}this.files.push(s[t])}},removeFile(l){this.files.splice(l,1)},toggleFab(){this.widgetOpen=!this.widgetOpen,this.chatClass=this.chatClass=="chat"?"chat is-visible":"chat",this.btnClass=this.btnClass=="fab"?"fab is-float is-visible":"fab",this.iconClass=this.iconClass=="prime fas fa-question"?"prime fas fa-times is-active is-visible":"prime fas fa-question",this.widgetOpen?(this.getFileUploadRules(),this.getArticles()):(this.articleList=[],this.loading=!1,this.hasDataPopulated=!1,this.showContent=!1,this.searchFilter="",this.widgetOpen=!1,this.getIn=!1,this.contentMsg="")},getArticles(l="https://support.faveohelpdesk.com/api/article-list-with-category",s,u=!1){this.loading=!0;var d=s;delete window.axios.defaults.headers.common["X-Requested-With"],b.get(l,{params:d}).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.articleList=u?t.data.data.articles.data:t.data.data.articles,setTimeout(()=>{this.widgetOpen&&!this.showContent&&!this.getIn&&!this.contentMsg&&!this.loading&&document.getElementById("helpInput").focus()},1)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0}),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},setFilter(){this.searchFilter?this.getArticles("https://support.faveohelpdesk.com/api/search",{s:this.searchFilter},!0):this.getArticles()},sendMail(){this.help_subject&&this.help_message&&this.newUserMail?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.newUserMail)?(this.onSubmit(),this.alertMsg=""):(this.alertClass="alert-danger",this.alertMsg="Enter valid email address",this.scrollToDiv()):(this.alertClass="alert-danger",this.alertMsg=this.lang("please_fill_required_fields"),this.scrollToDiv())},onSubmit(){let l=`${this.help_message.replace(/\n/g,"<br>")}<br><b>Product</b> : ${this.product}<br><b>Impact</b> : ${this.impact}<br><b>About</b> : ${this.about}<br><b>Name</b> : ${this.loggedUserName}<br><b>Email</b> : ${this.newUserMail}<br><b>Account URL</b> : ${this.url}<br>`;this.loading=!0;let s=new FormData;if(s.append("name",this.loggedUserName),s.append("email",this.newUserMail),s.append("help_email",this.help_email),s.append("help_subject",this.help_subject),s.append("help_massage",l),s.append("reply_email",this.newUserMail),this.files.length)for(let d in this.files)s.append("helpdocs["+d+"]",this.files[d]);const u={headers:{"Content-Type":"multipart/form-data"}};b.post("/helpsection/mail",s,u).then(d=>{this.loading=!1,d.data=="Message Sent! Thanks for reaching out! Someone from our team will get back to you soon."?(this.contentMsg=d.data,this.resetData()):(this.alertClass="alert-danger",this.alertMsg=d.data.fails,this.scrollToDiv())}).catch(d=>{this.contentMsg="",this.alertMsg="",this.loading=!1})},scrollToDiv(){setTimeout(()=>{var l=document.getElementById("get_touch");l.scrollIntoView({behavior:"smooth"})},1)},resetData(){this.files=[],this.help_email="support@ladybirdweb.com",this.help_subject="",this.help_message="",this.product="",this.impact="",this.about="",this.name="",this.email="",this.url="",this.newUserMail=this.loggedUserMail}}},o=l=>(k("data-v-55466a2d"),l=l(),C(),l),S={class:"fabs"},I={class:"chat_header"},j={class:"chat_option"},D={id:"chat_head"},T={class:"chat_body"},z={key:0,id:"loader"},O={key:0},B={class:"card-body text-center"},R=o(()=>e("i",{class:"fas fa-envelope-open-text fa-8x text-success"},null,-1)),x={class:"mt-4"},A=o(()=>e("br",null,null,-1)),V={key:0,class:"text-left",id:"get_touch"},q={key:1,class:"card card-light"},H={class:"card-header"},L={class:"card-title"},N={class:"card-tools"},P=o(()=>e("i",{class:"fas fa-times"},null,-1)),E=[P],K={class:"card-body"},X={class:"row"},Z={class:"col-sm-12"},W={class:"float-left"},G=["value"],J={class:"col-sm-12"},Q={class:"float-left"},Y=o(()=>e("span",{class:"text-red"}," *",-1)),$=["value","disabled"],ee={class:"col-sm-12"},se={class:"float-left"},te=o(()=>e("option",null,"--",-1)),le=o(()=>e("option",null,"Helpdesk",-1)),ie=o(()=>e("option",null,"Servicedesk",-1)),oe=[te,le,ie],ae={class:"col-sm-12"},ne={class:"float-left"},re={class:"col-sm-12"},ce={class:"float-left"},de=o(()=>e("option",null,"--",-1)),he=o(()=>e("option",null,"Low [How to setup something]",-1)),ue=o(()=>e("option",null,"Minor [Issues with the setup]",-1)),pe=o(()=>e("option",null,"Major [A major functionality has stopped working]",-1)),_e=o(()=>e("option",null,"Critical [Severe outage/downtime]",-1)),me=[de,he,ue,pe,_e],ge={class:"col-sm-12"},fe={class:"float-left"},be=o(()=>e("option",null,"--",-1)),ve=o(()=>e("option",null,"Sales / pricing question",-1)),ye=o(()=>e("option",null,"Technical support question",-1)),we=[be,ve,ye],Me={class:"col-sm-12"},ke={class:"float-left"},Ce=o(()=>e("span",{class:"text-red"}," *",-1)),Ue={class:"col-sm-12"},Fe={class:"float-left"},Se=o(()=>e("span",{class:"text-red"}," *",-1)),Ie=o(()=>e("i",{class:"far fa-file"},null,-1)),je={class:"text-left"},De={class:"float-right m-16"},Te=["onClick","title"],ze={class:"card-footer"},Oe=o(()=>e("i",{class:"fas fa-paper-plane"},null,-1)),Be={key:0,class:"card card-light"},Re={class:"card-header"},xe={class:"card-title"},Ae={class:"card-body"},Ve={class:"input-group"},qe=["placeholder"],He={class:"input-group-append"},Le=o(()=>e("i",{class:"fas fa-search"},null,-1)),Ne=[Le],Pe=o(()=>e("br",null,null,-1)),Ee={class:"art_wid_sug"},Ke={key:0,class:"art_wid"},Xe={class:"card bg-light wd_cursor"},Ze={class:"card-header d-flex"},We=o(()=>e("i",{class:"fas fa-newspaper mt_wid_icon"},null,-1)),Ge={class:"card-title art_wid_tit"},Je=["href"],Qe={key:1},Ye=o(()=>e("i",{class:"fas fa-pen-alt"},null,-1)),$e={class:"con-tooltip top"},es={key:0,class:"help-tooltip"},ss={class:"help_section_p"};function ts(l,s,u,d,t,n){return c(),r("div",null,[e("div",S,[t.widgetOpen?(c(),r("div",{key:0,class:f(t.chatClass)},[e("div",I,[e("div",j,[e("h5",D,a(l.lang("welcome_to_support_center")),1)])]),e("div",T,[t.loading?(c(),r("div",z)):h("",!0),t.loading?h("",!0):(c(),r(m,{key:1},[t.contentMsg?(c(),r("div",O,[e("div",B,[R,e("h5",x,a(t.contentMsg),1),A])])):h("",!0),t.contentMsg?h("",!0):(c(),r(m,{key:1},[t.alertMsg&&t.getIn?(c(),r("div",V,[e("div",{class:f(["alert alert-dismissible",t.alertClass])},a(t.alertMsg),3)])):h("",!0),t.getIn?(c(),r("div",q,[e("div",H,[e("h3",L,a(l.lang("get_in_touch")),1),e("div",N,[e("button",{class:"btn btn-default btn-tool m-auto",onClick:s[0]||(s[0]=(...i)=>n.makeFalse&&n.makeFalse(...i))},E)])]),e("div",K,[e("div",X,[e("div",Z,[e("label",W,a(l.lang("your_name")),1),e("input",{type:"text",name:"name",value:l.loggedUserName,class:"form-control",disabled:!0},null,8,G)]),e("div",J,[e("label",Q,[_(a(l.lang("your_email_address"))+" ",1),Y]),n.disableStatus(this.loggedUserMail)?(c(),r("input",{key:1,type:"email",name:"email",value:l.loggedUserMail,class:"form-control",disabled:n.disableStatus(this.loggedUserMail)},null,8,$)):p((c(),r("input",{key:0,type:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=i=>t.newUserMail=i),class:"form-control"},null,512)),[[g,t.newUserMail]])]),e("div",ee,[e("label",se,a(l.lang("select_your_product")),1),p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=i=>t.product=i),class:"form-control"},oe,512),[[v,t.product]])]),e("div",ae,[e("label",ne,a(l.lang("your_account_url")),1),p(e("input",{type:"text",name:"url","onUpdate:modelValue":s[3]||(s[3]=i=>t.url=i),class:"form-control"},null,512),[[g,t.url]])]),e("div",re,[e("label",ce,a(l.lang("how_does_it_impact_your_business")),1),p(e("select",{"onUpdate:modelValue":s[4]||(s[4]=i=>t.impact=i),class:"form-control"},me,512),[[v,t.impact]])]),e("div",ge,[e("label",fe,a(l.lang("what_this_about")),1),p(e("select",{"onUpdate:modelValue":s[5]||(s[5]=i=>t.about=i),class:"form-control"},we,512),[[v,t.about]])]),e("div",Me,[e("label",ke,[_(a(l.lang("subject"))+" ",1),Ce]),p(e("input",{type:"text",name:"help_subject","onUpdate:modelValue":s[6]||(s[6]=i=>t.help_subject=i),class:"form-control"},null,512),[[g,t.help_subject]])]),e("div",Ue,[e("label",Fe,[_(a(l.lang("describe_your_problem/question"))+" ",1),Se]),p(e("textarea",{name:"help_message","onUpdate:modelValue":s[7]||(s[7]=i=>t.help_message=i),class:"form-control"},null,512),[[g,t.help_message]])]),e("div",null,[e("input",{enctype:"multipart/form-data",multiple:!0,type:"file",ref:"help_doc",name:"help_doc",id:"helpdocs",title:"File input",files:"true",onChange:s[8]||(s[8]=(...i)=>n.onFileSelected&&n.onFileSelected(...i))},null,544),e("button",{"data-toggle":"modal",onClick:s[9]||(s[9]=i=>l.$refs.help_doc.click()),class:"btn-bs-file btn btn-sm btn-default btn-block mlr-8 mt-2"},[e("span",null,[Ie,_(" "+a(l.lang("choose_file")),1)])])]),t.files&&t.files.length?(c(!0),r(m,{key:0},w(t.files,(i,y)=>(c(),r("div",{key:y,class:"file-detail-box"},[e("div",je,a(i.name||i.value),1),e("div",De,[e("i",{class:"fas fa-times wd_cursor",onClick:ls=>n.removeFile(y),title:l.trans("remove")},null,8,Te)])]))),128)):h("",!0)])]),e("div",ze,[e("button",{class:"btn btn-primary float-right",onClick:s[10]||(s[10]=(...i)=>n.sendMail&&n.sendMail(...i))},[Oe,_(" "+a(l.lang("send")),1)])])])):h("",!0),t.getIn?h("",!0):(c(),r(m,{key:2},[t.showContent?h("",!0):(c(),r("div",Be,[e("div",Re,[e("h3",xe,a(l.lang("got_questions")),1)]),e("div",Ae,[e("div",Ve,[p(e("input",{type:"text",autofocus:"",id:"helpInput",name:"message",placeholder:l.lang("search"),class:"form-control","onUpdate:modelValue":s[11]||(s[11]=i=>t.searchFilter=i),onKeyup:s[12]||(s[12]=M((...i)=>n.setFilter&&n.setFilter(...i),["enter"]))},null,40,qe),[[g,t.searchFilter]]),e("span",He,[e("button",{type:"submit",class:"btn btn-default",onClick:s[13]||(s[13]=(...i)=>n.setFilter&&n.setFilter(...i))},Ne)])]),Pe,e("h6",Ee,a(l.lang("suggested_articles")),1),t.articleList.length?(c(),r("div",Ke,[(c(!0),r(m,null,w(t.articleList,i=>(c(),r("div",Xe,[e("div",Ze,[We,_("    "),e("h3",Ge,[e("a",{target:"_blank",href:t.supportBaseUrl+i.slug,class:"text-dark"},a(i.name),9,Je)])])]))),256))])):(c(),r("div",Qe,a(l.lang("no_results_found")),1))])]))],64))],64)),!t.getIn&&!t.showContent&&!t.contentMsg?(c(),r("button",{key:2,class:"btn btn-primary btn-lg btn-block",onClick:s[14]||(s[14]=i=>t.getIn=!0)},[Ye,_(" "+a(l.lang("get_in_touch")),1)])):h("",!0)],64))])],2)):h("",!0),e("div",$e,[e("a",{id:"prime",class:f(t.btnClass),onClick:s[15]||(s[15]=(...i)=>n.toggleFab&&n.toggleFab(...i))},[e("i",{class:f(t.iconClass)},null,2)],2),t.widgetOpen?h("",!0):(c(),r("div",es,[e("p",ss,a(l.lang("help_center")),1)]))])])])}const as=U(F,[["render",ts],["__scopeId","data-v-55466a2d"]]);export{as as H};
