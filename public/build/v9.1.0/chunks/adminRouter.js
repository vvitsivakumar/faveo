import{r as c,c as l,F as A,h as G,f as s,e as d,G as Be,g as F,t as h,w as k,d as f,b as D,o as i,n as x,T as ye,K as Ha,p as ee,j as te,a as L,q as P,i as S,D as He,$ as Hs,_ as Ne,y as $e,v as Fe,V as fe,Z as Xe,x as _t,u as ce,m as ae,A as ct,B as lt,aZ as zs,a_ as kt,s as We,a1 as q,a3 as Ie,a2 as ne,aa as ze,a9 as Ke,as as za,ab as Wa,W as jt,a8 as Ze,z as Bt,a$ as Ws,a6 as Ga,C as Ya,b0 as Gs,b1 as Ys,av as Ks,aw as Js}from"./vendor.js";import{A as Qs,d as Xs,e as Zs,c as eo,C as et,S as Oe,I as Ka,T as to,H as ao,D as Gt,g as so,U as oo,f as Yt,h as Ja,i as Qa,M as Xa,j as Za,a as no,b as io,N as lo,k as da,R as ro,F as wt}from"./FormGenerator.js";import{H as co}from"./HelpSection.js";import{l as O,a4 as es,g as st,a5 as uo,f as re,_ as T,e as I,V as he,c as de,j as oe,D as Me,k as De,s as N,T as Ae,a as rt,S as xe,N as Je,R as Le,X as ho,r as St,a6 as _o,a3 as mo,M as Ge,p as nt,q as Qe,o as po,Z as ts,z as fo,a7 as go,a8 as vo,i as ca,J as je,A as Ye,x as bo,C as $t,L as ot}from"./bootstrap.js";import{C as Ft,a as Se,e as yo,D as Mt,c as ko}from"./DataTableActions.js";const Re=[{id:"equal",name:O("equal_to")},{id:"not_equal",name:O("not_equal_to")},{id:"contains",name:O("contains")},{id:"dn_contains",name:O("does_not_contain")},{id:"starts",name:O("starts_with")},{id:"ends",name:O("ends_with")},{id:"greater_than",name:O("greater_than")},{id:"lesser_than",name:O("lesser_than")},{id:"less_than_and_greater_than",name:O("less_than_and_greater_than")}];class as{constructor(t="automator__"+Math.random().toString(),a=[],r=[],o=[],n="any",u="agent"){this.id=t,this.rules=a,this.actions=r,this.events=o,this.matcher=n,this.actionsPerformer=u}}class Ct{constructor(t="rule__"+Math.random().toString(),a=new URLSearchParams(window.location.search).get("page_type")?new URLSearchParams(window.location.search).get("page_type"):"ticket",r=null,o=null,n=Re[0],u=[]){this._id=t,this.category=a,this.field=r,this.value=o,this.relation=n,this.rules=u}}class Kt{constructor(t="action__"+Math.random().toString(),a=null,r=null,o=[],n={id:null,subject:"",body:"",users:[]}){this._id=t,this.field=a,this.value=r,this.actions=o,this.action_email=n}}class Dt{constructor(t="event__"+Date.now(),a=null,r=null,o=null,n=null,u=null){this._id=t,this.field=a,this.to=r,this.from=o,this.data_type=n,this.api_info=u}}const Ht=(e=[],t)=>{let a=[];return e.forEach(r=>a.push(zt(t,r))),a},zt=(e,t)=>{let a=[],r=null;return t.data_type==="mobile"&&t.enable_extension&&t.value?r={value:t.value,nodes:t.union}:r=es(t.value,t.options,t.default),Array.isArray(r)?r.forEach(o=>{o.nodes&&o.nodes.forEach(n=>{a.push(zt(e,n))})}):r&&r.nodes&&r.nodes.forEach(o=>{a.push(zt(e,o))}),ss(e,t,a)},ss=(e,t,a=[])=>{if(e==="rule"){const r=Re.find(o=>o.id===t.relation);return new Ct(t.rule_id,t.category,t,t.value,r,a)}else if(e==="action")return new Kt(t.action_id,t,t.value,a,t.action_email)},wo=(e=[])=>{let t=[];return e.forEach(a=>t.push(new Dt(a.event_id,{id:a.id,name:a.name},a.to,a.from,a.data_type,a.api_info))),t},Co=(e=[])=>{let t=JSON.parse(JSON.stringify(e));return e.forEach((a,r)=>{["from","to","field"].forEach(o=>{t[r][o]=a[o]?a[o].id:null})}),t},Wt=(e=[],t)=>{let a=JSON.parse(JSON.stringify(e));a=r(a,t);function r(o,n){return o=o.filter(u=>u.field),o.forEach(u=>{const m=st.convertStringOfPropertiesToObject(u.field.api_info).key||"label";u.value=uo(u.value,u.field.default,m),u.field=u.field.key,n==="rules"&&(u.relation=u.relation.id),n==="actions"&&(u.action_email=Do(u.action_email)),re(u[n])&&(u[n]=r(u[n],n))}),o}return a},Do=e=>{if(re(e.body))return{id:e.id,body:e.body,subject:e.subject,user_ids:e.users.map(t=>t.id)}},Jt=e=>typeof e=="string"&&e.includes("__"),ua=(e="")=>["text","number","date","email","file","textarea","htmltextarea","checkbox","time"].indexOf(e)>-1?e==="checkbox"?[Re[0],Re[1],Re[2],Re[3]]:e==="time"?[Re[0],Re[6],Re[7],Re[8]]:Re.filter(a=>a.id!=="greater_than"&&a.id!=="lesser_than"&&a.id!=="less_than_and_greater_than"):[Re[0],Re[1]];const So={name:"admin-panel-layout",props:{auth:{type:Object,default:()=>{}},company:{type:Object,default:()=>{}},portal:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},isMailConfigured:{type:Boolean,default:!0},dummyInstall:{type:Boolean,default:!1},isUpdatedVersion:{type:[Boolean,String,Number],default:!1}},data(){return{mail_config:this.isMailConfigured,selectedOption:"1 Day",alertWrapper:0,alertData:"",alertContent:"",searchCron:!1,isAnyMigration:!1}},beforeMount(){this.checkForUpdate(),this.checkSearchCronCommand()},updated(){this.logAlertWrapperHeight()},mounted(){this.logAlertWrapperHeight(),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize)},created(){window.emitter.on("checkMailConfig",this.checkConfig)},methods:{getAlertBackgroundColor(e){const t="#ffc107",r=parseInt(t.slice(1,3),16)+e*10,o=parseInt(t.slice(3,5),16)+e*10,n=parseInt(t.slice(5,7),16)+e*10,u=m=>Math.min(255,Math.max(0,m));return`rgb(${u(r)}, ${u(o)}, ${u(n)})`},async checkForUpdate(){try{const e=await axios.post("/display-pop-ups");this.alertData=e.data.map(o=>({...o,selectedOption:"1 Day",topPosition:0}));const t=[];for(const o of this.alertData)try{const n={value:o.description},u=await axios.post("/give-me-read",n);t.push(u.data)}catch(n){console.log(n),t.push("")}this.alertData.forEach((o,n)=>{o.description=t[n]});const r=(await axios.get("/get-days")).data.data;for(const o of this.alertData){const n=o.id.toString();if(r.hasOwnProperty(n)){const u=r[n];o.selectedOption=u===1?"1 Day":`${u} Days`}}this.alertContent=this.alertData,await this.logAlertWrapperHeight()}catch(e){console.log(e)}},onCloseAlert(e){Array.isArray(this.alertContent)||(this.alertContent=[]);const t=this.alertContent.findIndex(o=>o.id===e.id);t>-1&&this.alertContent.splice(t,1);const a={};a.pop_id=e.id;let r=parseInt(e.selectedOption.match(/\d+/)[0],10);a.days=r=r,a.user_id=this.auth.user_data.id,axios.post("/post-days",a).then(o=>{this.checkForUpdate()}).catch(o=>{console.log(o)})},checkConfig(e){e&&(this.mail_config=!0)},layoutLoaded(){window.emitter.emit("layout-loaded")},logAlertWrapperHeight(){this.$nextTick(()=>{const e=this.$refs.alertWrapperElements;if(e){let t=0;e.forEach((a,r)=>{if(a){const o=a.clientHeight;t+=o;const n=t-o;this.alertData[r].topPosition=n}}),this.alertWrapper=t}})},onWindowResize(){this.logAlertWrapperHeight()},updateSelectedOption(e,t){e.selectedOption=t},checkSearchCronCommand(){axios.get("check/search-cron").then(e=>{this.searchCron=e.data.data.cron_status,this.isAnyMigration=e.data.data.is_any_migration}).catch(e=>{this.searchCron=!1,this.isAnyMigration=!1})}},components:{AdminNavBar:Qs,AdminBreadCrumbs:Xs,HelpWidget:co,AdminFooter:Zs,AdminSideBar:eo}},ut=e=>(ee("data-v-507d16f8"),e=e(),te(),e),$o=["onClick"],Fo={class:"row"},Mo={class:"col-sm-12 alert-description"},To={class:"col-sm-10"},Eo=ut(()=>s("span",{style:{"vertical-align":"1px"}},[s("i",{class:"fas fa-warning"})],-1)),Lo=["innerHTML"],Io=["href"],Ao=["href"],qo=["innerHTML"],Po={class:"remind-select float-right"},Vo=ut(()=>s("label",{class:"remind-option"},h("Remind me after : "),-1)),Oo={class:"btn-group"},No={class:"dropdown-menu option-container"},xo=["onClick"],Uo=["onClick"],Ro=["onClick"],jo={class:"content-wrapper"},Bo={class:"content"},Ho={class:"container-fluid"},zo={key:0,class:"alert alert-info alert-dismissible"},Wo=ut(()=>s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),Go=ut(()=>s("i",{class:"fas fa-warning"},null,-1)),Yo={key:1,class:"alert alert-warning"},Ko=ut(()=>s("i",{class:"fas fa-warning"},null,-1)),Jo={key:2,class:"alert alert-warning"},Qo=ut(()=>s("i",{class:"fas fa-spinner"},null,-1)),Xo={class:"row"},Zo={id:"monitoring-system-status"};function en(e,t,a,r,o,n){const u=c("admin-nav-bar"),m=c("admin-side-bar"),p=c("admin-bread-crumbs"),g=c("alert"),v=c("router-link"),b=c("router-view"),y=c("vue-progress-bar"),w=c("admin-footer"),M=c("help-widget");return i(),l(A,null,[(i(!0),l(A,null,G(o.alertContent,(C,E)=>(i(),l("div",{key:E},[C.use===1?(i(),l("div",{key:0,ref_for:!0,ref:"alertWrapperElements",class:"alert-warning alert-wrapper mb-0 pt-2 pl-3 pb-1",style:Be({top:C.topPosition+"px",backgroundColor:n.getAlertBackgroundColor(E),zIndex:E===o.alertContent.length-1?9999:99999999})},[s("button",{type:"button",onClick:R=>n.onCloseAlert(C),class:"close pt-2 pr-4 pr-3",id:"alert_close"},"×",8,$o),s("div",Fo,[s("div",Mo,[s("div",To,[a.auth.user_data.role=="admin"?(i(),l(A,{key:0},[Eo,s("span",{innerHTML:C.description},null,8,Lo),F("  "),C.pop_name==="update"&&C.link?(i(),l("a",{key:0,class:"update-conent",href:C.link+"admin/check-updates"},[s("b",null,h(e.trans("click-here-to-update")),1)],8,Io)):f("",!0),C.pop_name==="renew"&&C.link?(i(),l("a",{key:1,class:"update-conent",href:C.link},[s("b",null,h(e.trans("click-here-to-renew")),1)],8,Ao)):f("",!0)],64)):(i(),l("span",{key:1,innerHTML:C.description},null,8,qo))]),s("div",Po,[Vo,F("  "),s("div",Oo,[s("button",{type:"button",class:"dropdown-toggle select-button alert-warning btn btn-outline",style:Be([{backgroundColor:n.getAlertBackgroundColor(E)},{"margin-right":"0px !important"}]),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},h(C.selectedOption),5),s("div",No,[s("div",{class:x(["dropdown-item option-select",{alertDay:C.selectedOption==="1 Day"}]),onClick:R=>n.updateSelectedOption(C,"1 Day")},"1 Day",10,xo),s("div",{class:x(["dropdown-item option-select",{alertDay:C.selectedOption==="3 Days"}]),onClick:R=>n.updateSelectedOption(C,"3 Days")},"3 Days",10,Uo),s("div",{class:x(["dropdown-item option-select",{alertDay:C.selectedOption==="7 Days"}]),onClick:R=>n.updateSelectedOption(C,"7 Days")},"7 Days",10,Ro)])])])])])],4)):f("",!0)]))),128)),s("div",{class:"wrapper",style:Be({top:o.alertContent?this.alertWrapper+"px !important":""})},[d(u,{style:Be({top:o.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,portal:a.portal,callingFrom:"admin"},null,8,["style","auth","portal"]),d(m,{style:Be({top:o.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,alertWrapper:o.alertWrapper,alertData:o.alertContent,company:a.company,portal:a.portal,callingFrom:"admin"},null,8,["style","auth","alertWrapper","alertData","company","portal"]),s("div",jo,[d(p),s("div",Bo,[s("div",Ho,[d(g,{componentName:"layout"}),a.dummyInstall?(i(),l("div",zo,[Wo,Go,F("  "),a.auth.user_data.role=="admin"?(i(),l(A,{key:0},[F(h(e.trans("dummy_data_installation_message"))+" ",1),d(v,{to:"/clean-dummy-data"},{default:k(()=>[F(h(e.trans("click"))+" ",1)]),_:1}),F(h(e.trans("clear-dummy-data")),1)],64)):(i(),l(A,{key:1},[F(h(e.trans("clear-dummy-data-agent-message")),1)],64))])):f("",!0),!a.dummyInstall&&!o.mail_config?(i(),l("div",Yo,[Ko,F("  "),a.auth.user_data.role=="admin"?(i(),l(A,{key:0},[F(h(e.trans("system-outgoing-incoming-mail-not-configured"))+" ",1),d(v,{to:"/email/create"},{default:k(()=>[F(h(e.trans("confihure-the-mail-now")),1)]),_:1})],64)):(i(),l(A,{key:1},[F(h(e.trans("system-mail-not-configured-agent-message")),1)],64))])):f("",!0),!a.dummyInstall&&(o.searchCron||o.isAnyMigration)?(i(),l("div",Jo,[F("  "),Qo,F("  "+h(o.isAnyMigration?e.trans("module-migration"):e.trans("search-cron-running")),1)])):f("",!0),s("div",Xo,[d(b,null,{default:k(({Component:C})=>[d(ye,{name:"fade",mode:"out-in"},{default:k(()=>[(i(),D(Ha(C),{key:e.$route.fullPath,auth:a.auth,dummyInstall:a.dummyInstall,whiteLabel:a.whiteLabel},null,8,["auth","dummyInstall","whiteLabel"]))]),_:2},1024)]),_:1}),d(y,{class:"color-shift-progress-bar"})])])])]),d(w,{company:a.company,whiteLabel:a.whiteLabel,tag:a.tag,version:a.version,lang:a.auth.user_data.user_language},null,8,["company","whiteLabel","tag","version","lang"]),a.whiteLabel?f("",!0):(i(),D(M,{key:0})),s("div",Zo,h(n.layoutLoaded()),1)],4)],64)}const ge=T(So,[["render",en],["__scopeId","data-v-507d16f8"]]);const tn={name:"admin-settings",data(){return{loading:!1,navigationArray:[]}},beforeMount(){this.getNavigations()},methods:{getNavigations(){this.loading=!0,L.get("/api/admin/navigation?meta=true").then(e=>{this.loading=!1;let t=e.data.data.filter(({main_navigation:r})=>r),a={name:O("additional_confiurations"),main_navigation:!1,navigations:e.data.data.filter(({main_navigation:r})=>!r)};a.navigations.length&&t.push(a),this.navigationArray=t}).catch(e=>{this.loading=!1,I(e,"admin-settings")})}}},an={class:"col-sm-12"},sn={key:0,class:"card card-light"},on={class:"card-header"},nn={class:"card-title"},ln={class:"card-body"},rn={class:"row"},dn={class:"col-md-2 col-sm-6"},cn={class:"settingiconblue"},un={class:"settingdivblue"},hn=["href"],_n={class:"fa-stack fa-2x"},mn=["href"],pn={class:"fa-stack fa-2x"},fn={class:"fa-stack fa-2x"},gn={class:"text-center text-sm fw_400"},vn={key:1,class:"card card-light"},bn={class:"card-header"},yn={class:"card-title"},kn={class:"card-body"},wn={class:"row"},Cn={class:"col-md-2 col-sm-6"},Dn={class:"settingiconblue"},Sn={class:"settingdivblue"},$n={class:"fa-stack fa-2x"},Fn={class:"text-center text-sm fw_400"},Mn={key:2,class:"card card-light"},Tn={class:"card-header"},En={class:"card-title"},Ln={class:"card-body"},In={class:"row"},An={class:"col-md-2 col-sm-6"},qn={class:"settingiconblue"},Pn={class:"settingdivblue"},Vn={href:"javascript:;"},On={class:"fa-stack fa-2x"},Nn={class:"row"},xn={class:"col-sm-12 col-md-2"},Un={class:"settingiconblue"},Rn={class:"settingdivblue_mini"},jn=["href"],Bn={class:"fa-stack fa-1x"},Hn={class:"text-center text-sm fw_400"},zn={key:0,class:"row"};function Wn(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("popover"),g=c("reuse-loader"),v=P("tooltip");return i(),l("div",an,[d(u,{componentName:"admin-settings"}),(i(!0),l(A,null,G(o.navigationArray,(b,y)=>(i(),l(A,null,[b.main_navigation&&b.name==e.trans("helpdesk")?(i(!0),l(A,{key:0},G(b.navigations,(w,M)=>(i(),l(A,null,[w.hasChildren?(i(),l("div",sn,[s("div",on,[s("h3",nn,h(w.name),1)]),s("div",ln,[s("div",rn,[(i(!0),l(A,null,G(w.children,(C,E)=>(i(),l("div",dn,[s("div",cn,[s("div",un,[C.routeString=="horizon"?(i(),l("a",{key:0,href:C.redirectUrl},[s("span",_n,[s("i",{class:x([C.iconClass,"fa-stack-1x"])},null,2)])],8,hn)):C.routeString=="__clockwork/app"?(i(),l("a",{key:1,href:C.redirectUrl},[s("span",pn,[s("i",{class:x([C.iconClass,"fa-stack-1x"])},null,2)])],8,mn)):(i(),D(m,{key:2,to:"/"+C.routeString},{default:k(()=>[s("span",fn,[s("i",{class:x([C.iconClass,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"]))]),s("div",gn,h(C.name),1)])]))),256))])])])):f("",!0)],64))),256)):b.main_navigation&&b.name!="Helpdesk"?(i(),l("div",vn,[s("div",bn,[s("h3",yn,h(b.name),1)]),s("div",kn,[s("div",wn,[(i(!0),l(A,null,G(b.navigations,(w,M)=>(i(),l("div",Cn,[s("div",Dn,[s("div",Sn,[d(m,{to:"/"+w.routeString},{default:k(()=>[s("span",$n,[s("i",{class:x([w.iconClass,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"])]),s("div",Fn,h(w.name),1)])]))),256))])])])):(i(),l("div",Mn,[s("div",Tn,[s("h3",En,h(b.name),1)]),s("div",Ln,[s("div",In,[(i(!0),l(A,null,G(b.navigations,(w,M)=>(i(),l("div",An,[s("div",qn,[s("div",Pn,[d(p,{hover:"",arrow:"",placement:"right"},{content:k(()=>[(i(!0),l(A,null,G(w.navigations,(C,E)=>(i(),l("div",Nn,[s("div",xn,[S((i(),l("div",Un,[s("div",Rn,[s("a",{href:e.basePath()+"/admin/"+C.routeString},[s("span",Bn,[s("i",{class:x([C.iconClass,"fa-stack-1x"])},null,2)])],8,jn)])])),[[v,C.name]])])]))),256))]),default:k(()=>[s("a",Vn,[s("span",On,[s("i",{class:x([w.iconClass,"fa-stack-1x"])},null,2)])])]),_:2},1024)]),s("div",Hn,h(w.name),1)])]))),256))])])]))],64))),256)),o.loading?(i(),l("div",zn,[d(g,{"animation-duration":4e3,size:60})])):f("",!0)])}const Ut=T(tn,[["render",Wn],["__scopeId","data-v-6e0cb905"]]);function os(e){const{formNameObj:t}=e;let a={name:[t.value,"isRequired","max(50)","min(3)"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const Gn={components:{"draggable-element":He},props:{formGroupList:{type:Array,required:!0},type:{type:String,default:"fields"},isFormGroup:{type:Boolean,default:!1}},data(){return{isSticky:!1,headerWidth:"100%",stickyNavTop:0,stickyOffsetCounter:0,topBarWidth:0,type:"fields"}},computed:{getFormSection(){return this.getFormMenus.filter(e=>e.type==="section")},getFormFilteredMenu(){return this.getFormMenus.filter(e=>e.type!="section")},...Hs(["getFormMenus","getFormCategoryType"])},created(){window.addEventListener("scroll",this.stickyNav)},methods:{toggleFields(e){this.type=e},cloneElement(e){let t=JSON.parse(JSON.stringify(e));const a=this.getCurrentTimestamp();return t.type==="group"?t.groupid=a:t.id=a,t.form_identifier=a,t},getCurrentTimestamp(){return new Date().getTime()},stickyNav(){this.getWindowScrollTop()>this.stickyNavTop?(this.isSticky=!0,this.stickyOffsetCounter++,this.stickyOffsetCounter==1&&(this.topBarWidth=this.getStickyBoxOffset()),this.headerWidth=this.topBarWidth):(this.stickyOffsetCounter=0,this.isSticky=!1,this.headerWidth="100%")},getWindowScrollTop(){return $(window).scrollTop()},getStickyBoxOffset(){return this.$refs.stickyBox.offsetWidth+"px"}},beforeDestroy(){window.removeEventListener("scroll",this.stickyNav)}},Yn=e=>(ee("data-v-42e33c1d"),e=e(),te(),e),Kn={class:"menu mt-3"},Jn={id:"drag__body"},Qn={class:"btn-group mb-2 w-100"},Xn={class:"col-sm-6"},Zn={key:0,class:"info-box-icon menu-icon"},ei={class:"info-box-content"},ti={class:"info-box-text"},ai={class:"col-sm-12 text-center"},si={key:0,class:"info-box-icon menu-icon"},oi={class:"info-box-content"},ni={class:"info-box-text"},ii={class:"col-sm-12"},li=Yn(()=>s("span",{class:"info-box-icon menu-icon"},[s("i",{class:"fas fa-layer-group"})],-1)),ri={class:"info-box-content"},di={class:"info-box-text"};function ci(e,t,a,r,o,n){const u=c("draggable-element"),m=P("tooltip");return i(),l("div",Kn,[s("div",Jn,[s("div",Qn,[s("a",{class:x(["btn btn-default field-btn",o.type=="fields"?"active-blue":""]),href:"javascript:;",onClick:t[0]||(t[0]=p=>n.toggleFields("fields"))},h(e.trans("form_fields")),3),a.formGroupList&&a.formGroupList.length>0&&e.getFormCategoryType!=="user"&&e.getFormCategoryType!=="organisation"&&e.getFormCategoryType!=="license"?(i(),l("a",{key:0,class:x(["btn btn-default field-btn",o.type=="groups"?"active-blue":""]),href:"javascript:;",onClick:t[1]||(t[1]=p=>n.toggleFields("groups"))},h(e.trans("form_groups")),3)):f("",!0)]),o.type=="fields"?(i(),D(u,{key:0,class:"form__menulsit row",list:n.getFormFilteredMenu,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:n.cloneElement},{item:k(({element:p,index:g})=>[s("div",Xn,[S((i(),l("div",{class:"info-box menu-info-box bg-light",key:p.id},[p.icon_class?(i(),l("span",Zn,[s("i",{class:x(["fas",p.icon_class])},null,2)])):f("",!0),s("div",ei,[s("span",ti,h(p.title),1)])])),[[m,p.title]])])]),_:1},8,["list","clone"])):f("",!0),o.type=="fields"&&!a.isFormGroup?(i(),D(u,{key:1,class:"form__menulsit row",list:n.getFormSection,group:{name:"faveo-form-section",pull:"clone",put:!1},clone:n.cloneElement},{item:k(({element:p,index:g})=>[s("div",ai,[S((i(),l("div",{class:"info-box menu-info-box bg-light",key:p.id},[p.icon_class?(i(),l("span",si,[s("i",{class:x(["fas",p.icon_class])},null,2)])):f("",!0),s("div",oi,[s("span",ni,h(p.title),1)])])),[[m,p.title]])])]),_:1},8,["list","clone"])):f("",!0),o.type=="groups"?(i(),l(A,{key:2},[a.formGroupList&&a.formGroupList.length>0&&e.getFormCategoryType!=="user"&&e.getFormCategoryType!=="organisation"&&e.getFormCategoryType!=="license"?(i(),D(u,{key:0,class:"form__menulsit row",list:a.formGroupList,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:n.cloneElement},{item:k(({element:p,index:g})=>[s("div",ii,[S((i(),l("div",{class:"info-box menu-info-box bg-light mb-2",key:p.id},[li,s("div",ri,[s("span",di,h(p.name),1)])])),[[m,p.name]])])]),_:1},8,["list","clone"])):f("",!0)],64)):f("",!0)])])}const ns=T(Gn,[["render",ci],["__scopeId","data-v-42e33c1d"]]);const ui={name:"form-builder-main",components:{"faveo-form-builder-menu":ns,"text-field":oe,"dynamic-select":Me},props:{groupMode:{type:String,default:""},formNameObj:{type:Object,default:()=>{}},formLinker:{type:Array,default:()=>[]},editFormGroupApi:{type:String,default:()=>""},postFromGroupApi:{type:String,default:()=>""},formCategoryType:{type:String,default:""}},data:()=>({pageHeading:"create-form",hasMenuLoaded:!1,hasFormFieldsLoaded:!1,showLoader:!0,formGroupList:[],isCreateFormGroup:!1,isEditFormGroup:!1,formGroupId:null,activeFormCategoryType:"",formCategoryTypes:[],localFormNameObj:"",localFormLinker:"",showDeleteModal:!1,deleteType:"",deleteData:"",deleteId:""}),beforeMount(){this.localFormNameObj=this.formNameObj,this.localFormLinker=this.formLinker,this.activeFormCategoryType=this.formCategoryType,this.setInitialValue(),this.groupMode=="create"&&(this.localFormNameObj.value="",this.localFormLinker=this.localFormLinker.map(e=>({...e,value:[]})))},computed:{formFieldsStoreValue:{get(){return this.$store.getters.getFormFields},set(e){this.$store.dispatch("updateFormFields",e)}}},created(){window.emitter.on("formFieldSettingsApplied",this.applySettingsChanges),window.emitter.on("onRemoveElement",this.onRemoveElement),window.emitter.on("getFormDataFromServer",this.getFormDataFromServer)},methods:{setInitialValue(){const e=this.getCurrentWindowLocation();e.indexOf("create")!==-1&&e.indexOf("forms/create")===-1?(this.isCreateFormGroup=!0,this.hasFormFieldsLoaded=!0,this.pageHeading="create-form",this.showLoader=!1,this.localFormNameObj.value="",this.localFormLinker.forEach((t,a)=>{t.value=[]})):e.indexOf("edit")>-1&&(this.formGroupId=De(e),this.isEditFormGroup=!0,this.pageHeading="edit-form",this.showLoader=!1),!this.isCreateFormGroup&&!this.isEditFormGroup?this.getFormCategories():(this.getMenuJson(),this.assignFormFields())},getFormCategories(){L.get("api/dependency/form-categories").then(e=>{this.formCategoryTypes=e.data.data.form_categories,this.activeFormCategoryType=this.formCategoryTypes[0].category,this.getFormDataBasisOnCategory()}).catch(e=>{I(e,"form-builder-main")})},getFormDataBasisOnCategory(){this.getFormGroupList(),this.getMenuJson(),this.assignFormFields()},getCurrentWindowLocation(){return window.location.pathname},getMenuJson(){L.get("api/get-form-menu/"+this.activeFormCategoryType).then(e=>{this.$store.commit("updateFormMenu",e.data.data),this.hasMenuLoaded=!0})},assignFormFields(){this.isCreateFormGroup?this.$store.commit("updateFormFields",[]):this.getFormDataFromServer().then(e=>{this.isEditFormGroup&&(this.localFormNameObj.value=e.data.data[this.localFormNameObj.id]?e.data.data[this.localFormNameObj.id]:"",this.localFormLinker.forEach(t=>{t.value=e.data.data[t.id]?e.data.data[t.id]:[]})),this.hasFormFieldsLoaded=!0})},onTabClick(e){this.activeFormCategoryType!==e&&(this.activeFormCategoryType=e,this.getMenuJson(),this.getFormGroupList(),this.getFormDataFromServer())},getFormDataFromServer(){this.showLoader=!0,this.$store.commit("updateFormCategoryType",this.activeFormCategoryType);let e="api/get-form-data",t={category:this.activeFormCategoryType,config:!0};return this.isEditFormGroup&&(e=this.editFormGroupApi+"/"+this.formGroupId,t.config=!1),L.get(e,{params:t}).then(a=>(this.$store.commit("updateFormFields",a.data.data.form_fields),this.showLoader=!1,a)).catch(a=>{this.showLoader=!1,I(a,"form-builder-main")})},isValidFormName(){if(this.isCreateFormGroup||this.isEditFormGroup){const{errors:e,isValid:t}=os(this.$props);return t}else return!0},getFormGroupList(){if(this.activeFormCategoryType==="user"||this.activeFormCategoryType==="organisation")return;this.showLoader=!0;const e={limit:2e3,supplements:this.activeFormCategoryType};L.get("api/dependency/form-groups",{params:e}).then(t=>{this.formGroupList=t.data.data.form_groups.map(a=>({id:a.id,title:a.name,name:a.name,type:"group",edit_url:a.edit_url,is_deletable:1}))}).catch(t=>{console.error("Error in getting form group list ",t)}).finally(()=>{this.showLoader=!1})},async onSaveForm(){if(this.isValidFormName()){const e=this.$store.getters.getFormFields;this.assignSortOrder(e),this.saveForm(e)}},assignSortOrder(e){for(let t=0;t<e.length;t++)e[t].sort_order=t,re(e[t].options)&&this.assignSortOrder(e[t].options),re(e[t].labels)&&this.assignSortOrder(e[t].labels),re(e[t].nodes)&&this.assignSortOrder(e[t].nodes),re(e[t].labels_for_form_field)&&this.assignSortOrder(e[t].labels_for_form_field)},saveForm(e){this.showLoader=!0;let t=this.isCreateFormGroup||this.isEditFormGroup?this.postFromGroupApi:"api/post-form-data";L.post(t,this.getSaveFormParams(e)).then(a=>{N(a,"form-builder-main"),this.isCreateFormGroup||this.isEditFormGroup?(this.showLoader=!1,setTimeout(()=>{this.$router.push({name:"FormGroups Index"})},3e3)):this.getFormDataFromServer().then(()=>{this.showLoader=!1})}).catch(a=>{this.showLoader=!1,I(a,"form-builder-main")})},getSaveFormParams(e){let t={};return t.category=this.activeFormCategoryType,t["form-fields"]=e,(this.isCreateFormGroup||this.isEditFormGroup)&&(t[this.localFormNameObj.submitFormParamKey]=this.localFormNameObj.value,this.localFormLinker.forEach(a=>{t[a.submitFormParamKey]=a.value.map(r=>r.id)})),this.isEditFormGroup&&(t.id=this.formGroupId),t},onRemoveElement(e){this.showDeleteModal=!0,this.deleteType=e.reference_type,this.deleteData=e.fieldData,this.deleteId=e.reference_id},doDelete(){this.showDeleteModal=!1,this.isDeleteFromDB(this.deleteData)?this.deleteElementFormDB(this.deleteData.id,this.deleteId,this.deleteType):this.deleteElementLocally(this.deleteData.form_identifier)},deleteElementLocally(e){const t=this.$store.getters.getFormFields;this.removeAt(t,e)&&this.$store.dispatch("updateFormFields",t)},deleteElementFormDB(e,t,a){this.showLoader=!0;let r="api/delete-form-data/form-field/"+e;t&&(r="api/unlink-form-group/"+a+"/"+t),L.delete(r).then(o=>{N(o,"form-builder-main"),this.getFormDataFromServer(),this.showLoader=!1}).catch(o=>{this.showLoader=!1,I(o,"form-builder-main")})},isDeleteFromDB(e){return e.type==="group"?typeof e.groupid>"u":e.id.toString().length<13},removeAt(e,t){let a=Ne.findIndex(e,r=>r.form_identifier===t);if(a!==-1)e.splice(a,1);else for(let r=0;r<e.length;r++)re(e[r].options)&&this.removeAt(e[r].options,t),re(e[r].nodes)&&this.removeAt(e[r].nodes,t);return new Promise(r=>{r(!0)})},async applySettingsChanges(e){const t=this.$store.getters.getFormFields;await this.assignNewValue(t,e.form_identifier,e)&&this.$store.dispatch("updateFormFields",t)},assignNewValue(e,t,a){let r=Ne.findIndex(e,o=>o.form_identifier===t);if(r!==-1)e[r]=a;else for(let o=0;o<e.length;o++)re(e[o].options)&&this.assignNewValue(e[o].options,t,a),re(e[o].nodes)&&this.assignNewValue(e[o].nodes,t,a);return new Promise(o=>{o(!0)})}}},is=e=>(ee("data-v-60d86715"),e=e(),te(),e),hi={class:"col-sm-12"},_i={class:"card card-light"},mi={class:"card-header"},pi={class:"card-title",id:"box-title-1"},fi={class:"card-tools"},gi=is(()=>s("span",{class:"fas fa-save"},null,-1)),vi={class:"row"},bi={class:"col-lg-3"},yi={class:"card mt-4 ml-2"},ki={class:"form-builder-menu m-2"},wi={class:"col-lg-9"},Ci={class:"card mt-4 mr-2"},Di={class:"card-body form-builder-body"},Si={key:0},$i={key:0,class:"row"},Fi={class:"nav nav-tabs",role:"tablist"},Mi=["id"],Ti=["onClick"],Ei={class:"mt-2"},Li={class:"modal-title"},Ii=is(()=>s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1));function Ai(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("faveo-form-builder-menu"),g=c("text-field"),v=c("dynamic-select"),b=c("draggable-form-field-item"),y=c("modal"),w=P("focus-first-input");return i(),l("div",hi,[d(u,{componentName:"form-builder-main"}),s("div",_i,[s("div",mi,[e.showLoader?(i(),D(m,{key:0})):f("",!0),s("h3",pi,h(e.lang(e.pageHeading)),1),s("div",fi,[s("button",{class:"btn btn-tool btn-default form-save-btn",onClick:t[0]||(t[0]=M=>n.onSaveForm())},[gi,F(" "+h(e.lang("save")),1)])])]),s("div",vi,[s("div",bi,[s("div",yi,[s("div",ki,[e.hasMenuLoaded?(i(),D(p,{key:0,"form-group-list":e.formGroupList},null,8,["form-group-list"])):f("",!0)])])]),s("div",wi,[s("div",Ci,[s("div",Di,[e.hasFormFieldsLoaded&&e.hasMenuLoaded?(i(),l("div",Si,[e.isCreateFormGroup||e.isEditFormGroup?S((i(),l("div",$i,[d(g,{id:e.localFormNameObj.id,classname:e.localFormNameObj.className,label:e.lang(e.localFormNameObj.label),value:e.localFormNameObj.value,type:"text",name:e.localFormNameObj.id,onChange:M=>e.localFormNameObj.value=M,placehold:e.lang(e.localFormNameObj.placeholder),required:!0},null,8,["id","classname","label","value","name","onChange","placehold"]),(i(!0),l(A,null,G(e.localFormLinker,M=>(i(),D(v,{key:M.id,id:M.id,name:M.id,classname:M.className,apiEndpoint:M.apiEndpoint,label:e.lang(M.label),value:M.value,required:!1,multiple:!0,onChange:C=>M.value=C},null,8,["id","name","classname","apiEndpoint","label","value","onChange"]))),128))])),[[w]]):f("",!0),s("ul",Fi,[(i(!0),l(A,null,G(e.formCategoryTypes,M=>(i(),l("li",{class:"nav-item",key:M.category,id:M.category},[s("a",{class:x(["nav-link",e.activeFormCategoryType===M.category?"active":""]),"data-toggle":"pill",href:"javascript:;",role:"tab",onClick:C=>n.onTabClick(M.category)},h(M.name),11,Ti)],8,Mi))),128))]),s("div",Ei,[d(b,{value:n.formFieldsStoreValue},null,8,["value"])])])):f("",!0)])])])])]),d(ye,{name:"modal"},{default:k(()=>[e.showDeleteModal?(i(),D(y,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",Li,h(e.lang("delete")),1)]),fields:k(()=>[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=M=>n.doDelete()),class:"btn btn-danger"},[Ii,F(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const ha=T(ui,[["render",Ai],["__scopeId","data-v-60d86715"]]);const qi={name:"Widget-Modal",description:"Widget Modal component",props:{data:{type:Object,required:!0},showModal:{type:Boolean,default:!1},onClose:{type:Function},modalMode:{type:String,required:!0}},data:()=>({containerStyle:{width:"700px"},title:"",value:"",loading:!1}),beforeMount(){this.title=this.data.title,this.value=this.data.value},methods:{onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;let e=this.getSubmitParams();L.post("api/update-widget/"+this.data.id,e).then(t=>{this.loading=!1,this.onClose(),N(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,I(t,"Widget-Modal")})},getSubmitParams(){return{title:this.title,value:this.value}}},components:{"text-field":oe}},Pi=e=>(ee("data-v-84a2f863"),e=e(),te(),e),Vi={class:"modal-title"},Oi={key:0},Ni={key:1,class:"widget-view"},xi={key:0},Ui={for:"value",class:"widget-value pl-2"},Ri={class:"widget-value pl-2"},ji=["innerHTML"],Bi={key:1,class:"text-center"},Hi=Pi(()=>s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1));function zi(e,t,a,r,o,n){const u=c("alert"),m=c("text-field"),p=c("tiny-editor"),g=c("modal"),v=P("focus-first-input");return a.showModal?(i(),D(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,modalBodyClass:"widget-card-div"},{title:k(()=>[s("h4",Vi,h(e.lang(a.modalMode)),1)]),alert:k(()=>[d(u,{componentName:"Widget-Modal"})]),fields:k(()=>[a.modalMode==="edit"?S((i(),l("div",Oi,[d(m,{label:e.lang("title"),onChange:n.onChange,placehold:e.lang("enter_a_value"),value:e.title,type:"text",name:"title",classname:"col-sm-12"},null,8,["label","onChange","placehold","value"]),d(p,{value:e.value,type:"text",onChange:n.onChange,name:"value",label:"Value",classname:"col-sm-12",width:"100%",height:300},null,8,["value","onChange"])])),[[v]]):f("",!0),a.modalMode==="view"?(i(),l("div",Ni,[e.value?S((i(),l("div",xi,[d(m,{label:e.lang("title"),onChange:n.onChange,placehold:e.lang("enter_a_value"),value:e.title,type:"text",name:"title",classname:"col-sm-12",disabled:!0},null,8,["label","onChange","placehold","value"]),s("label",Ui,h(e.trans("value")),1),s("div",Ri,[s("span",{innerHTML:e.value},null,8,ji)])])),[[v]]):f("",!0),e.value?f("",!0):(i(),l("div",Bi,[s("span",null,h(e.trans("no_data_found")),1)]))])):f("",!0)]),controls:k(()=>[a.modalMode==="edit"?(i(),l("button",{key:0,type:"button",id:"submit_btn",onClick:t[0]||(t[0]=b=>n.onSubmit()),class:"btn btn-primary"},[Hi,F(" "+h(e.lang("update")),1)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const Wi=T(qi,[["render",zi],["__scopeId","data-v-84a2f863"]]);const Gi={name:"widget-table-actions",description:"Widget table edit componnet",data:()=>({showModal:!1}),props:{data:{type:Object,required:!0}},methods:{onClickEvent(e){this.showModal=!0,this.modalMode=e},onClose(){this.showModal=!1}},components:{"Widget-Modal":Wi}},ls=e=>(ee("data-v-6322429a"),e=e(),te(),e),Yi={class:"btn-group block"},Ki=ls(()=>s("span",{title:"Edit",class:"btn btn-default table_btn",id:"edit_btn"},[s("i",{class:"fa fa-edit"})],-1)),Ji=[Ki],Qi=ls(()=>s("span",{title:"Edit",class:"btn btn-default table_btn",id:"edit_btn"},[s("i",{class:"fa fa-eye"})],-1)),Xi=[Qi];function Zi(e,t,a,r,o,n){const u=c("Widget-Modal"),m=P("tooltip");return i(),l("div",Yi,[S((i(),l("a",{id:"edit-button",onClick:t[0]||(t[0]=p=>n.onClickEvent("edit")),href:"javascript:;"},Ji)),[[m,e.lang("edit")]]),S((i(),l("a",{id:"edit-button",onClick:t[1]||(t[1]=p=>n.onClickEvent("view")),href:"javascript:;"},Xi)),[[m,e.lang("view")]]),d(ye,{name:"modal"},{default:k(()=>[e.showModal?(i(),D(u,{key:0,onClose:n.onClose,"modal-mode":e.modalMode,showModal:e.showModal,assetId:a.data.id,data:a.data},null,8,["onClose","modal-mode","showModal","assetId","data"])):f("",!0)]),_:1})])}const el=T(Gi,[["render",Zi],["__scopeId","data-v-6322429a"]]);const tl={name:"widget-list",description:"Widget list table component",data:()=>({apiUrl:"api/list-widgets/footer",columns:["name","title","action"],options:{}}),beforeMount(){this.options={headings:{name:this.trans("name"),title:this.trans("title"),action:this.trans("action")},columnsClasses:{name:"widget-name",title:"widget-title",action:"widget-action"},texts:{filter:"",limit:""},templates:{action:function(e,t){return this.h(el,{data:t})}},sortable:["name","title"],filterable:["name","title"],requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"name","sort-order":e.ascending?"asc":"desc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.widgets,count:e.data.total}}}}},al={class:"col-sm-12"},sl={class:"card card-light"},ol={class:"card-header"},nl={class:"card-title"},il={class:"card-body"};function ll(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",al,[d(u,{componentName:"dataTableModal"}),s("div",sl,[s("div",ol,[s("h3",nl,h(e.lang("widget-settings")),1)]),s("div",il,[d(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"widget-list"},null,8,["url","dataColumns","option"])])])])}const rl=T(tl,[["render",ll]]);function dl(e){const{ticket_number_prefix:t}=e;let a={ticket_number_prefix:[t,"isRequired"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const cl={name:"checkbox",description:"Checkbox with default css class and other required props to be used throughout the project",props:{options:{type:Array,default:()=>{}},value:{type:Array,default:()=>[]},name:{type:String,default:"check"},label:{type:String,default:"label"},classname:{type:String,default:"col-sm-4"},class_name:{type:String,default:"col-sm-4"},spanClass:{type:String,default:"check_inline"},keyupListener:{type:Function,default:()=>{}},keydownListener:{type:Function,default:()=>{}},keypressEvt:{type:Function,default:()=>{}},onChange:{type:Function,Required:!0},hint:{type:String,default:""},labelStyle:{type:Object}},data(){return{checked:this.value}},watch:{value(e,t){this.checked=e},checked(e){this.onChange(e,this.name)}},components:{"tool-tip":Ae}},ul={class:"row"},hl=["name","value"],_l={class:"ml-1"};function ml(e,t,a,r,o,n){const u=c("tool-tip"),m=P("tooltip");return i(),l("div",{class:x(a.classname)},[s("label",{style:Be(a.labelStyle)},h(a.label),5),a.hint!=""?(i(),D(u,{key:0,message:a.hint,size:"small"},null,8,["message"])):f("",!0),s("div",ul,[(i(!0),l(A,null,G(a.options,(p,g)=>(i(),l("span",{class:x(a.class_name)},[S(s("input",{class:"check_align",name:a.name,"onUpdate:modelValue":t[0]||(t[0]=v=>o.checked=v),type:"checkbox",value:p.value?p.value:p.id,onKeyup:t[1]||(t[1]=v=>a.keyupListener(v,a.name)),onKeydown:t[2]||(t[2]=v=>a.keydownListener(v,a.name)),onKeypress:t[3]||(t[3]=v=>a.keypressEvt(v,a.name))},null,40,hl),[[$e,o.checked]]),S((i(),l("span",_l,[F(h(e.lang(p.name?p.name:p.label))+"  ",1)])),[[m,p.hover?p.hover:""]])],2))),256))])],2)}const mt=T(cl,[["render",ml]]),pl={props:["size","onColor","offColor","onText","offText"],data(){return{modelValue:""}}},fl=["data-size","data-on-color","data-off-color","data-on-text","data-off-text"];function gl(e,t,a,r,o,n){return S((i(),l("input",{type:"checkbox",name:"my-checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>o.modelValue=u),checked:"","data-size":a.size,"data-on-color":a.onColor,"data-off-color":a.offColor,"data-on-text":a.onText,"data-off-text":a.offText},null,8,fl)),[[$e,o.modelValue]])}const vl=T(pl,[["render",gl]]);const bl={name:"ticket-settings",data(){return{showCheckbox:!1,loading:!0,hasDataPopulated:!1,pageLoad:!1,settingsData:"",customData:[],status:"",collision_avoid:"",lock_ticket_frequency:"",lockOptions:[{id:0,name:"No"},{id:1,name:"Only once"},{id:2,name:"Frequently"}],ticket_number_prefix:"",record_per_page:"",pageOptions:[{id:10,name:"10 tickets per page"},{id:25,name:"25 tickets per page"},{id:50,name:"50 tickets per page"},{id:100,name:"100 tickets per page"}],waiting_time:"",count_internal:"",show_status_date:"",show_org_details:"",show_user_location:"",inboxOptions:[{name:"Yes",value:1},{name:"No",value:0}],custom_field_name:[],automatic_redaction:"",credit_card_number:"",customOptions:[],append_reply_by_fetching_email:"",auto_assign_ticket_to_agent_on_first_reply:"",show_org_ticket_form:"",fieldsLoader:!1,page:1,hasMoreData:!0,searchTerm:""}},beforeMount(){this.getValues(),this.getCustomFields()},methods:{onSwitchChange(e){this.automatic_redaction=e,this.showCheckbox=!!this.automatic_redaction,this.showCheckbox||(this.credit_card_number=!1)},onSearch(){this.page=1,this.search()},search:Ne.debounce(function(){this.getCustomFields("search")},350),handleCardScroll(){const e=document.getElementById("fields-container"),t=e.scrollHeight,a=e.scrollTop,r=e.clientHeight;a+r>=t-100&&!this.fieldsLoader&&this.hasMoreData&&this.getCustomFields()},async getCustomFields(e=""){try{e==="search"&&(this.customOptions=[]),this.fieldsLoader=!0;const t=await L.get(`/custom-field-flattened?category=ticket&page=${this.page}&search-query=${this.searchTerm}&module=settings`);t.data.data.data.length>0?(t.data.data.data.forEach(a=>{a.value=""}),this.customOptions=[...this.customOptions,...t.data.data.data],this.page++,this.hasMoreData=!0):this.hasMoreData=!1}catch(t){console.error("Error fetching data:",t)}finally{this.fieldsLoader=!1}},setSelectedField(e){e.forEach(t=>{t.value="",this.customOptions.push(t)})},getValues(){L.get("/api/getTicketSetting").then(e=>{this.settingsData=e.data.data.ticket,this.updateStatesWithData(this.settingsData),this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=dl(this.$data);return t},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};if(e.ticket_number_prefix=this.ticket_number_prefix,e.status=this.status.id,e.collision_avoid=this.collision_avoid,e.record_per_page=this.record_per_page,e.lock_ticket_frequency=this.lock_ticket_frequency,e.waiting_time=this.waiting_time,e.count_internal=this.count_internal,e.show_status_date=this.show_status_date,e.show_user_location=this.show_user_location,e.show_org_details=this.show_org_details,e.append_reply_by_fetching_email=this.append_reply_by_fetching_email,e.auto_assign_ticket_to_agent_on_first_reply=this.auto_assign_ticket_to_agent_on_first_reply,e.automatic_redaction=this.automatic_redaction,e.credit_card_number=this.credit_card_number,e.show_org_ticket_form=this.show_org_ticket_form,e._method="PATCH",this.custom_field_name.length){let t=this.customOptions.map(r=>r.id),a=[];this.custom_field_name.map(r=>{t.includes(parseInt(r))&&a.push(parseInt(r))}),a.length&&(e.custom_field_value=a)}L.post("/api/postticket",e).then(t=>{this.pageLoad=!1,N(t,"TicketSettings"),this.getValues()}).catch(t=>{this.pageLoad=!1,I(t,"TicketSettings")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{FaveoBox:rt,Checkbox:et,ToggleButton:vl,StatusSwitch:Oe,"text-field":oe,"dynamic-select":Me,"static-select":xe,"number-field":Je,"radio-button":Le,"check-box":mt}},Tt=e=>(ee("data-v-f203d1c7"),e=e(),te(),e),yl={class:"col-sm-12"},kl={key:0,class:"row"},wl={class:"row"},Cl={class:"row"},Dl={class:"row"},Sl={class:"row"},$l={class:"redact",for:"status"},Fl=Tt(()=>s("i",{class:"fas fa-question-circle ml-1",style:{"font-size":"small",color:"rgb(51, 122, 183)",cursor:"help"}},null,-1)),Ml=[Fl],Tl=Tt(()=>s("br",null,null,-1)),El={key:0,class:"row redac"},Ll={class:"row"},Il={class:"row"},Al={class:"row"},ql={class:"col-sm-4"},Pl={class:"search-container mb-2"},Vl=Tt(()=>s("i",{class:"fas fa-search text-muted"},null,-1)),Ol={key:0,class:"row"},Nl={class:"card-footer",slot:"actions"},xl=Tt(()=>s("i",{class:"fas fa-save"},null,-1)),Ul={key:0,class:"row"};function Rl(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("dynamic-select"),g=c("number-field"),v=c("static-select"),b=c("text-field"),y=c("radio-button"),w=c("faveo-box"),M=c("status-switch"),C=c("Checkbox"),E=c("check-box"),R=c("custom-loader"),z=P("tooltip");return i(),l("div",yl,[d(u,{componentName:"TicketSettings"}),d(w,{title:e.trans("ticket-setting")},{default:k(()=>[!o.hasDataPopulated||o.loading?(i(),l("div",kl,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l(A,{key:1},[d(w,{title:e.trans("general_settings")},{default:k(()=>[s("div",wl,[d(p,{label:e.trans("default_status"),multiple:!1,name:"status",classname:"col-sm-4",apiEndpoint:"/api/dependency/statuses?supplements[purpose_of_status][]=1",value:o.status,onChange:n.onChange,strlength:30,required:!1,clearable:!1},null,8,["label","value","onChange"]),d(g,{label:e.trans("agent_collision_avoidance_duration_minutes"),value:o.collision_avoid,name:"collision_avoid",keyupListener:n.triggerEvent,onChange:n.onChange,type:"number",required:!1,placeholder:"n",classname:"col-sm-4"},null,8,["label","value","keyupListener","onChange"]),d(v,{label:e.trans("lock_ticket_frequency"),elements:o.lockOptions,name:"lock_ticket_frequency",onChange:n.onChange,value:o.lock_ticket_frequency,hideEmptySelect:!0,classname:"col-sm-4"},null,8,["label","elements","onChange","value"])]),s("div",Cl,[d(b,{label:e.trans("ticket_number_prefix"),value:o.ticket_number_prefix,type:"text",name:"ticket_number_prefix",keyupListener:n.triggerEvent,onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",required:!0,hint:e.trans("ticket_number_prefix_description")},null,8,["label","value","keyupListener","onChange","placehold","hint"]),d(v,{label:e.trans("show_ticket_per_page"),elements:o.pageOptions,name:"record_per_page",onChange:n.onChange,value:o.record_per_page,hideEmptySelect:!0,classname:"col-sm-4",hint:e.trans("ticket-perpage-tooltip")},null,8,["label","elements","onChange","value","hint"]),d(g,{label:e.trans("waiting_time_hours"),value:o.waiting_time,name:"waiting_time",onChange:n.onChange,type:"number",keyupListener:n.triggerEvent,required:!1,placeholder:"n",classname:"col-sm-4",hint:e.trans("waiting_time_for_client_reply")},null,8,["label","value","onChange","keyupListener","hint"])]),s("div",Dl,[d(y,{name:"append_reply_by_fetching_email",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("append_reply_by_fetching_email"),value:o.append_reply_by_fetching_email,onChange:n.onChange,hint:e.trans("append_reply_by_fetching_email_hint")},null,8,["options","label","value","onChange","hint"]),d(y,{name:"auto_assign_ticket_to_agent_on_first_reply",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("auto_assign_ticket_to_agent_on_first_reply"),value:o.auto_assign_ticket_to_agent_on_first_reply,onChange:n.onChange,hint:e.trans("auto_assign_ticket_to_agent_on_first_reply_hint")},null,8,["options","label","value","onChange","hint"]),d(y,{name:"show_org_ticket_form",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("show_org_ticket_form"),value:o.show_org_ticket_form,onChange:n.onChange},null,8,["options","label","value","onChange"])])]),_:1},8,["title"]),d(w,{title:e.trans("automatic_redaction")},{default:k(()=>[s("div",Sl,[s("label",$l,h(e.trans("automatic_redaction")),1),S((i(),l("span",null,Ml)),[[z,e.trans("automatic_redaction_info")]]),Tl,d(M,{name:"automatic_redaction",onChange:n.onSwitchChange,value:o.automatic_redaction,classname:"form-group col-sm-4 ml-1",bold:!0,label:e.trans("status"),hint:e.trans("text")},null,8,["onChange","value","label","hint"])]),o.showCheckbox||o.automatic_redaction===1?(i(),l("div",El,[d(C,{name:"credit_card_number",value:o.credit_card_number,label:e.trans("credit_card_numbers"),onChange:n.onChange,hint:e.trans("credit_card_numbers_info")},null,8,["value","label","onChange","hint"])])):f("",!0)]),_:1},8,["title"]),d(w,{title:e.trans("inbox_settings")},{default:k(()=>[s("div",Ll,[d(y,{name:"count_internal",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("include_internal_note_in_thread_count"),value:o.count_internal,onChange:n.onChange},null,8,["options","label","value","onChange"]),d(y,{name:"show_status_date",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("show_status_update_date"),value:o.show_status_date,onChange:n.onChange},null,8,["options","label","value","onChange"]),d(y,{name:"show_org_details",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("show_org_details"),value:o.show_org_details,onChange:n.onChange},null,8,["options","label","value","onChange"])]),s("div",Il,[d(y,{name:"show_user_location",classname:"form-group col-sm-4",options:o.inboxOptions,label:e.trans("ticket_settings_inbox_settings_display_location"),value:o.show_user_location,onChange:n.onChange},null,8,["options","label","value","onChange"])]),s("div",Al,[s("div",ql,[s("label",null,h(e.trans("add_custom_fields")),1),s("div",Pl,[S(s("input",{type:"text",placeholder:"Search...",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=J=>o.searchTerm=J),onInput:t[1]||(t[1]=(...J)=>n.onSearch&&n.onSearch(...J))},null,544),[[Fe,o.searchTerm]]),Vl]),o.customOptions.length?(i(),l("div",{key:0,id:"fields-container",onScroll:t[2]||(t[2]=(...J)=>n.handleCardScroll&&n.handleCardScroll(...J))},[d(E,{options:o.customOptions,name:"custom_field_name",value:o.custom_field_name,label:e.trans("add_custom_fields"),"label-style":{display:"none"},onChange:n.onChange,keyupListener:n.triggerEvent,classname:"col-sm-12 pl-0",class_name:"col-sm-12",spanClass:"check_grid"},null,8,["options","value","label","onChange","keyupListener"]),o.fieldsLoader?(i(),l("div",Ol,[d(m,{"animation-duration":4e3,size:30})])):f("",!0)],32)):f("",!0)])])]),_:1},8,["title"]),s("div",Nl,[s("button",{class:"btn btn-primary",type:"button",onClick:t[3]||(t[3]=(...J)=>n.onSubmit&&n.onSubmit(...J))},[xl,F(" "+h(e.trans("save")),1)])])],64)):f("",!0)]),_:1},8,["title"]),o.pageLoad?(i(),l("div",Ul,[d(R,{duration:4e3})])):f("",!0)])}const jl=T(bl,[["render",Rl],["__scopeId","data-v-f203d1c7"]]);function Bl(e){const{days:t,ticket_status:a,status:r}=e;let o={days:[t,"isRequired"],ticket_status:[a,"isRequired"],status:[r,"isRequired"]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const Hl={name:"close-ticket-workflow",data(){return{days:"",ticket_status:"",status:"",loading:!0,hasDataPopulated:!1,pageLoad:!1,helplink:""}},beforeMount(){this.getValues()},methods:{getValues(e){L.get("/api/close-workflow").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.workflowClose;this.days=a.days,this.send_email=a.send_email,this.status=a.status,this.ticket_status=a.ticket_status,this.helplink=a.helpLink}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},isValid(){const{errors:e,isValid:t}=Bl(this.$data);return t},onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.days=this.days,e.ticket_status=this.ticket_status.map(t=>t.id),e.status=this.status.id,e._method="PATCH",L.post("/api/close-workflow-update",e).then(t=>{this.pageLoad=!1,N(t,"close-ticket-workflow"),this.getValues()}).catch(t=>{this.pageLoad=!1,I(t,"close-ticket-workflow")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"dynamic-select":Me,"number-field":Je}},zl={class:"col-sm-12"},Wl={class:"card card-light"},Gl={class:"card-header"},Yl={class:"card-title"},Kl={key:0,class:"card-tools"},Jl=["href"],Ql=s("i",{class:"fas fa-question-circle"},null,-1),Xl=[Ql],Zl={class:"card-body"},er={key:0,class:"row"},tr={class:"row"},ar={class:"row"},sr={class:"row"},or={class:"card-footer"},nr=s("i",{class:"fas fa-save"},null,-1),ir={key:0,class:"row"};function lr(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("number-field"),g=c("dynamic-select"),v=c("custom-loader"),b=P("tooltip"),y=P("focus-first-input");return i(),l("div",zl,[d(u,{componentName:"close-ticket-workflow"}),s("div",Wl,[s("div",Gl,[s("h3",Yl,h(e.trans("close_ticket_workflow")),1),o.helplink?(i(),l("div",Kl,[S((i(),l("a",{class:"btn btn-tool",href:o.helplink,target:"__blank"},Xl,8,Jl)),[[b,e.trans("read_more")]])])):f("",!0)]),s("div",Zl,[!o.hasDataPopulated||o.loading?(i(),l("div",er,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l(A,{key:1},[S((i(),l("div",tr,[d(p,{label:e.trans("no_of_days"),value:o.days,name:"days",onChange:n.onChange,keyupListener:n.triggerEvent,classname:"col-sm-6",type:"number",required:!0,placeholder:"n",hint:e.trans("close-msg1")},null,8,["label","value","onChange","keyupListener","hint"])])),[[y]]),s("div",ar,[d(g,{label:e.trans("ticket_status"),multiple:!0,name:"ticket_status",classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses?config=true",value:o.ticket_status,onChange:n.onChange,strlength:30,required:!0,hint:e.trans("close_ticket_statu_msg")},null,8,["label","value","onChange","hint"])]),s("div",sr,[d(g,{label:e.trans("target_status"),multiple:!1,name:"status",classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses?supplements[purpose_of_status][]=2",value:o.status,onChange:n.onChange,strlength:30,required:!0,clearable:!!o.status,hint:e.trans("close-msg3")},null,8,["label","value","onChange","clearable","hint"])])],64)):f("",!0)]),s("div",or,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=w=>n.onSubmit())},[nr,F(" "+h(e.trans("save")),1)])])]),o.pageLoad?(i(),l("div",ir,[d(v,{duration:4e3})])):f("",!0)])}const rr=T(Hl,[["render",lr]]);function dr(e){const{company_name:t,phone:a,website:r,admin_header_color:o,agent_header_color:n,agent_sidebar_color:u,admin_sidebar_color:m,address:p}=e;let g={company_name:[t,"isRequired",{"max(50)":O("name_should_be_less_than_50_characters")}],phone:[a,{"max(15)":O("phone_number_should_be_less_than_15_digits")}],address:[p,{"max(250)":O("address_should_be_less_than_250_characters")}],admin_header_color:[o,"isRequired"],agent_header_color:[n,"isRequired"],admin_sidebar_color:[m,"isRequired"],agent_sidebar_color:[u,"isRequired"]};const v=new he(O),{errors:b,isValid:y}=v.validate(g);return de.dispatch("setValidationError",b),{errors:b,isValid:y}}const cr={name:"company-settings",description:"Company Settings page",props:{},data:()=>({loading:!0,hasDataPopulated:!1,company_name:"",uselogo:!1,website:"",phone:"",address:"",admin_header_color:"",agent_header_color:"",admin_sidebar_color:"",agent_sidebar_color:"",header_colors:[{id:"navbar-light",name:"White"},{id:"navbar-dark navbar-blue",name:"Blue"},{id:"navbar-dark navbar-black",name:"Black"},{id:"navbar-dark navbar-green",name:"Green"},{id:"navbar-dark navbar-purple",name:"Purple"},{id:"navbar-dark navbar-red",name:"Red"},{id:"navbar-light navbar-yellow",name:"Yellow"},{id:"navbar-light navbar-orange",name:"Orange"}],sidebar_colors:[{id:"sidebar-dark-light",name:"White"},{id:"sidebar-dark-blue",name:"Blue"},{id:"sidebar-dark-black",name:"Black"},{id:"sidebar-dark-green",name:"Green"},{id:"sidebar-dark-purple",name:"Purple"},{id:"sidebar-dark-red",name:"Red"},{id:"sidebar-dark-yellow",name:"Yellow"},{id:"sidebar-dark-orange",name:"Orange"}],client_header_color:"",client_button_color:"",client_button_border_color:"",client_input_field_color:"",icon:"",logo_admin_agent:"",logo:"",selectedIcon:"",selectedLogoAdminAgent:"",selectedLogo:"",logoStyle:{visibility:"hidden"},radioOptions:[{name:"yes",value:1},{name:"no",value:0}],defaulticon:0,defaultlogo:0,header_default:!0,input_default:!0,button_default:!0,border_default:!0,is_enabled_breadcrumb:!1,phone_country_code:null,phone_iso:""}),watch:{defaultlogo(e,t){return this.defaultlogo=re(e),e},defaulticon(e,t){return this.defaulticon=re(e),e}},beforeMount(){this.getInitialValues()},created(){this.defaulticon=re(this.defaulticon),this.defaultlogo=re(this.defaulticon)},methods:{getInitialValues(){this.loading=!0,L.get("/getCompanyDetails").then(e=>{this.loading=!1,this.hasDataPopulated=!0,this.updatesStateWithData(e.data.message),this.phone_country_code=e.data.message.phone_country_code?e.data.message.phone_country_code:null,this.phone_iso=e.data.message.phone_iso?e.data.message.phone_iso:null}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},updatesStateWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.logo=e.clientlogo?e.clientlogo:"",this.logo_admin_agent=e.logo,this.admin_header_color.includes("skin")&&(this.admin_header_color=this.admin_header_color.replace("skin","navbar-dark navbar"),this.admin_sidebar_color=this.admin_header_color.replace("navbar-dark navbar","sidebar-dark")),this.agent_header_color.includes("skin")&&(this.agent_header_color=this.agent_header_color.replace("skin","navbar-dark navbar"),this.agent_sidebar_color=this.agent_header_color.replace("navbar-dark navbar","sidebar-dark")),this.border_default=this.colorMethod("client_button_border_color",this.client_button_border_color,"#00c0ef"),this.button_default=this.colorMethod("client_button_color",this.client_button_color,"#009aba"),this.header_default=this.colorMethod("client_header_color",this.client_header_color,"#009aba"),this.input_default=this.colorMethod("client_input_field_color",this.client_input_field_color,"#d2d6de")},colorMethod(e,t,a){return this[e]=t,t===a},isValid(){const{errors:e,isValid:t}=dr(this.$data);return!!t},validUrl(){if(this.website){let e=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;if(this.website.match(e))return!0;this.$store.dispatch("setValidationError",{website:"Invalid URL"})}else return!0},onChange(e,t){switch(t){case"icon":this.icon=e.image;let a=e;this.selectedIcon=a.file,a.name;break;case"logo_admin_agent":this.logo_admin_agent=e.image;let r=e;this.selectedLogoAdminAgent=r.file,r.name;break;case"logo":this.logo=e.image;let o=e;this.selectedLogo=o.file,o.name;break;default:this[t]=e}},onSubmit(){if(this.isValid()&&this.validUrl()){this.loading=!0;var e=new FormData;e.append("company_name",this.company_name),e.append("address",this.address),e.append("phone",this.phone),e.append("website",this.website),e.append("admin_header_color",this.admin_header_color),e.append("agent_header_color",this.agent_header_color),e.append("admin_sidebar_color",this.admin_sidebar_color),e.append("agent_sidebar_color",this.agent_sidebar_color),e.append("is_enabled_breadcrumb",this.is_enabled_breadcrumb?1:0),this.defaulticon||e.append("icon",this.selectedIcon?this.selectedIcon:this.icon),this.defaultlogo||e.append("logo_admin_agent",this.selectedLogoAdminAgent?this.selectedLogoAdminAgent:this.logo_admin_agent),e.append("logo",this.logo===""?null:this.selectedLogo?this.selectedLogo:this.logo),e.append("uselogo",this.uselogo===!0?1:0),e.append("client_header_color",this.header_default?"#009aba":this.client_header_color),e.append("client_button_color",this.button_default?"#009aba":this.client_button_color),e.append("client_button_border_color",this.border_default?"#00c0ef":this.client_button_border_color),e.append("client_input_field_color",this.input_default?"#d2d6de":this.client_input_field_color),e.append("phone_country_code",this.phone_country_code),e.append("phone_iso",this.phone_iso);const t={headers:{"Content-Type":"multipart/form-data"}};L.post("/postcompany",e,t).then(a=>{this.loading=!1,this.hasDataPopulated=!0,N(a,"company-settings"),window.emitter.emit("companySettingsUpdated")}).catch(a=>{this.loading=!1,this.hasDataPopulated=!0,I(a,"company-settings")})}},onPhoneFieldUpdate(e,t){this[t]=e}},components:{"text-field":oe,"number-field":Je,"static-select":xe,"check-box":mt,"tool-tip":Ae,"color-picker":Ft,"image-upload":Ka,"radio-button":Le,"status-switch":Oe,phoneWithCountryCode:ho}},rs=e=>(ee("data-v-e51ab3c7"),e=e(),te(),e),ur={class:"col-sm-12"},hr={key:0},_r={key:1,class:"card card-light"},mr={class:"card-header"},pr={class:"card-title"},fr={class:"card-body"},gr={class:"row"},vr={class:"row"},br={class:"row"},yr={for:"Logo and Favicon",class:"col-sm-12"},kr={class:"card card-light"},wr={class:"card-header"},Cr={class:"card-title"},Dr={class:"card-body"},Sr={class:"row"},$r={class:"card card-light"},Fr={class:"card-header"},Mr={class:"card-title"},Tr={class:"card-body"},Er={class:"row"},Lr={class:"col-sm-2"},Ir={for:"Address"},Ar={class:"label_align"},qr={class:"col-sm-2"},Pr={for:"Address"},Vr={class:"label_align"},Or={class:"col-sm-2"},Nr={for:"Address"},xr={class:"label_align"},Ur={class:"col-sm-2"},Rr={for:"Address"},jr={class:"label_align"},Br={class:"col-sm-2"},Hr={for:"status"},zr=rs(()=>s("br",null,null,-1)),Wr={class:"row"},Gr={for:"Logo and Favicon",class:"col-sm-12"},Yr={class:"card card-light"},Kr={class:"card-header"},Jr={class:"card-title"},Qr={class:"card-body"},Xr={class:"row"},Zr={class:"label_align col-md-4 text-center"},ed={class:"label_align col-md-4 text-center"},td={class:"label_align col-md-4 text-center"},ad={class:"row"},sd={class:"card-footer"},od=["disabled"],nd=rs(()=>s("span",{class:"fas fa-save"},null,-1));function id(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("text-field"),g=c("phoneWithCountryCode"),v=c("static-select"),b=c("tool-tip"),y=c("color-picker"),w=c("status-switch"),M=c("image-upload"),C=P("focus-first-input");return i(),l("div",ur,[s("div",null,[d(u,{componentName:"company-settings"})]),e.loading?(i(),l("div",hr,[d(m,{loadingSpeed:4e3})])):f("",!0),e.hasDataPopulated?(i(),l("div",_r,[s("div",mr,[s("h3",pr,h(e.lang("company_settings")),1)]),s("div",fr,[S((i(),l("div",gr,[d(p,{label:e.lang("name"),type:"text",value:e.company_name,name:"company_name",class:"col-sm-4",required:!0,onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),d(g,{id:"phone",classname:"col-sm-4",name:"phone",onChange:n.onChange,value:e.phone,countryCode:e.phone_country_code,countryIso:e.phone_iso,onCountCode:t[0]||(t[0]=E=>n.onPhoneFieldUpdate(E,"phone_country_code")),onCountIso:t[1]||(t[1]=E=>n.onPhoneFieldUpdate(E,"phone_iso")),label:e.lang("phone"),apiUrl:"/api/dependency/country-codes?time="+Date.now()},null,8,["onChange","value","countryCode","countryIso","label","apiUrl"]),d(p,{label:e.lang("website"),type:"text",name:"website",value:e.website,classname:"col-sm-4",onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])])),[[C]]),s("div",vr,[d(p,{label:e.lang("address"),type:"textarea",name:"address",value:e.address,rows:5,classname:"col-sm-12",onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])]),s("div",br,[s("div",yr,[s("div",kr,[s("div",wr,[s("h3",Cr,h(e.lang("agent_panel_color_configuartion")),1)]),s("div",Dr,[s("div",Sr,[d(v,{label:e.lang("admin_header_color"),elements:e.header_colors,name:"admin_header_color",value:e.admin_header_color,classname:"col-sm-3",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"]),d(v,{label:e.lang("admin_sidebar_color"),elements:e.sidebar_colors,name:"admin_sidebar_color",value:e.admin_sidebar_color,classname:"col-sm-3",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"]),d(v,{label:e.lang("agent_header_color"),elements:e.header_colors,name:"agent_header_color",value:e.agent_header_color,classname:"col-sm-3",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"]),d(v,{label:e.lang("agent_sidebar_color"),elements:e.sidebar_colors,name:"agent_sidebar_color",value:e.agent_sidebar_color,classname:"col-sm-3",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"])])])]),s("div",$r,[s("div",Fr,[s("h3",Mr,[F(h(e.lang("client_panel_configuartion"))+" ",1),d(b,{message:e.lang("color_configuartion_tooltip"),size:"medium"},null,8,["message"])])]),s("div",Tr,[s("div",Er,[s("div",Lr,[s("label",Ir,h(e.lang("client_header_color")),1),s("label",Ar,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultheader","onUpdate:modelValue":t[2]||(t[2]=E=>e.header_default=E)},null,512),[[$e,e.header_default]]),F(" "+h(e.lang("use_default")),1)]),e.header_default?f("",!0):(i(),D(y,{key:0,color:e.client_header_color,name:"client_header_color",onColor:n.onChange},null,8,["color","onColor"]))]),s("div",qr,[s("label",Pr,h(e.lang("client_button_color")),1),s("label",Vr,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultbutton","onUpdate:modelValue":t[3]||(t[3]=E=>e.button_default=E)},null,512),[[$e,e.button_default]]),F(" "+h(e.lang("use_default")),1)]),e.button_default?f("",!0):(i(),D(y,{key:0,color:e.client_button_color,name:"client_button_color",onColor:n.onChange},null,8,["color","onColor"]))]),s("div",Or,[s("label",Nr,h(e.lang("client_button_border_color")),1),s("label",xr,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultborder","onUpdate:modelValue":t[4]||(t[4]=E=>e.border_default=E)},null,512),[[$e,e.border_default]]),F(" "+h(e.lang("use_default")),1)]),e.border_default?f("",!0):(i(),D(y,{key:0,color:e.client_button_border_color,name:"client_button_border_color",onColor:n.onChange},null,8,["color","onColor"]))]),s("div",Ur,[s("label",Rr,h(e.lang("client_input_field_color")),1),s("label",jr,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultinput","onUpdate:modelValue":t[5]||(t[5]=E=>e.input_default=E)},null,512),[[$e,e.input_default]]),F(" "+h(e.lang("use_default")),1)]),e.input_default?f("",!0):(i(),D(y,{key:0,color:e.client_input_field_color,name:"client_input_field_color",onColor:n.onChange},null,8,["color","onColor"]))]),s("div",Br,[s("label",Hr,h(e.lang("show_breadcrumbs")),1),zr,d(w,{name:"is_enabled_breadcrumb",value:e.is_enabled_breadcrumb,onChange:n.onChange,classname:"float-left",bold:!0},null,8,["value","onChange"])])])])])])]),s("div",Wr,[s("div",Gr,[s("div",Yr,[s("div",Kr,[s("h3",Jr,[F(h(e.lang("logo_and_favicon"))+" ",1),d(b,{message:e.lang("logo_icon_config"),size:"medium"},null,8,["message"])])]),s("div",Qr,[s("div",Xr,[s("label",Zr,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaulticon","onUpdate:modelValue":t[6]||(t[6]=E=>e.defaulticon=E)},null,512),[[$e,e.defaulticon]]),F(" "+h(e.lang("use_default")),1)]),s("label",ed,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultlogo","onUpdate:modelValue":t[7]||(t[7]=E=>e.defaultlogo=E)},null,512),[[$e,e.defaultlogo]]),F(" "+h(e.lang("use_default")),1)]),s("label",td,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"uselogo","onUpdate:modelValue":t[8]||(t[8]=E=>e.uselogo=E)},null,512),[[$e,e.uselogo]]),F(" "+h(e.lang("use_logo")),1)])]),s("div",ad,[d(M,{label:e.lang("favicon"),labelStyle:e.logoStyle,value:e.icon,name:"icon",onChange:n.onChange,btnName:"change_icon",classname:"col-sm-4 text-center",is_default:e.defaulticon},null,8,["label","labelStyle","value","onChange","is_default"]),d(M,{label:e.lang("admin_logo"),labelStyle:e.logoStyle,value:e.logo_admin_agent,name:"logo_admin_agent",onChange:n.onChange,classname:"col-sm-4 text-center",is_default:e.defaultlogo},null,8,["label","labelStyle","value","onChange","is_default"]),d(M,{label:e.lang("client_logo"),labelStyle:e.logoStyle,value:e.logo,name:"logo",onChange:n.onChange,classname:"col-sm-4 text-center"},null,8,["label","labelStyle","value","onChange"])])])])])])]),s("div",sd,[s("button",{id:"submit_btn",type:"button",onClick:t[9]||(t[9]=E=>n.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[nd,F(" "+h(e.lang("save")),1)],8,od)])])):f("",!0)])}const ld=T(cr,[["render",id],["__scopeId","data-v-e51ab3c7"]]);function rd(e){const{name:t,system_time_zone:a,time_format:r,date_format:o,max_column:n}=e;let u={name:[t,"isRequired"],system_time_zone:[a,"isRequired"],time_format:[r,"isRequired"],date_format:[o,"isRequired"],max_column:[n,"isRequired",{"minValue(1)":O("column_min_count")},{"maxValue(25)":O("column_count_validation")}]};const m=new he(O),{errors:p,isValid:g}=m.validate(u);return de.dispatch("setValidationError",p),{errors:p,isValid:g}}const dd={name:"system-settings",data(){return{hasDataPopulated:!1,loading:!0,pageLoad:!1,name:"",status:"",cdn:"",system_time_zone:"",time_format:"",date_format:"",radioOptions:[{name:"yes",value:1},{name:"no",value:0}],statusOptions:[{name:"status_online",value:1},{name:"offline",value:0}],cdnOptions:[{name:"on",value:1},{name:"off",value:0,hint:"cdn_off_tooltip"}],release_type:[{id:"official",name:"Official"},{id:"pre_release",name:"Pre-release"}],releases:"",max_column:0,sidebar_count:!1}},beforeMount(){this.getValues()},methods:{previewMethod(e){return e?fe(new Date).format(e.js_format):""},timeFormat(e){return fe(new Date).format(e.js_format)},getValues(e){L.get("/api/admin/get-system-setting").then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.updatesStateWithData(t.data.data)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},updatesStateWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=rd(this.$data);return t},onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.name=this.name,e.time_zone_id=this.system_time_zone.id,e.time_format=this.time_format.format,e.date_format=this.date_format.name,e.cdn=this.cdn,e.status=this.status,e.releases=this.releases,e.max_column=this.max_column,e.sidebar_count=this.sidebar_count,L.post("/api/admin/update-system-setting",e).then(t=>{this.pageLoad=!1,N(t,"system-settings"),this.getValues()}).catch(t=>{this.pageLoad=!1,I(t,"system-settings")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{checkbox:et,"text-field":oe,"dynamic-select":Me,"radio-button":Le,"static-select":xe,"number-field":Je}},cd={class:"col-sm-12"},ud={class:"card card-light"},hd={class:"card-header"},_d={class:"card-title"},md={class:"card-body"},pd={key:0,class:"row"},fd={class:"row"},gd={class:"row"},vd={class:"row"},bd={class:"card-footer"},yd=s("i",{class:"fas fa-save"},null,-1),kd={key:0,class:"row"};function wd(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("text-field"),g=c("dynamic-select"),v=c("static-select"),b=c("number-field"),y=c("radio-button"),w=c("checkbox"),M=c("custom-loader"),C=P("focus-first-input");return i(),l("div",cd,[d(u,{componentName:"system-settings"}),s("div",ud,[s("div",hd,[s("h3",_d,h(e.trans("system-settings")),1)]),s("div",md,[!o.hasDataPopulated||o.loading?(i(),l("div",pd,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l(A,{key:1},[S((i(),l("div",fd,[d(p,{label:e.trans("name"),type:"text",value:o.name,name:"name",class:"col-sm-4",keyupListener:n.triggerEvent,required:!0,onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","keyupListener","onChange","placehold"]),d(g,{label:e.trans("timezone"),multiple:!1,name:"system_time_zone",classname:"col-sm-4",apiEndpoint:"/api/dependency/time-zones",value:o.system_time_zone,onChange:n.onChange,strlength:25,required:!0},null,8,["label","value","onChange"]),d(g,{label:e.trans("timeformat"),multiple:!1,name:"time_format",classname:"col-sm-4",apiEndpoint:"/api/dependency/time-formats",value:o.time_format,onChange:n.onChange,strlength:25,required:!0,showPreview:n.timeFormat(o.time_format)},null,8,["label","value","onChange","showPreview"])])),[[C]]),s("div",gd,[d(g,{label:e.trans("dateformat"),multiple:!1,name:"date_format",classname:"col-sm-4",apiEndpoint:"/api/dependency/date-formats",value:o.date_format,onChange:n.onChange,strlength:25,required:!0,showPreview:n.previewMethod(o.date_format)},null,8,["label","value","onChange","showPreview"]),d(v,{value:o.releases,name:"releases",elements:o.release_type,label:e.trans("release-channel"),onChange:n.onChange,classname:"col-sm-4","hide-empty-select":!0},null,8,["value","elements","label","onChange"]),d(b,{label:e.trans("column_selection_limit"),type:"number",hint:e.trans("column_selection_limit_tooltip"),value:o.max_column,name:"max_column",class:"col-sm-4",required:!0,onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","hint","value","onChange","placehold"])]),s("div",vd,[d(y,{options:o.statusOptions,label:e.trans("status"),name:"status",value:o.status,keyupListener:n.triggerEvent,onChange:n.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","keyupListener","onChange"]),d(y,{options:o.cdnOptions,label:e.trans("cdn"),name:"cdn",value:o.cdn,keyupListener:n.triggerEvent,onChange:n.onChange,classname:"form-group col-sm-4",hint:e.trans("cdn_tooltip")},null,8,["options","label","value","keyupListener","onChange","hint"]),d(w,{id:"sidebar_count",name:"sidebar_count",value:o.sidebar_count,label:e.trans("display_count_in_sidebar"),onChange:n.onChange,classname:"col-sm-12",hint:e.trans("sidebar_count_tooltip")},null,8,["value","label","onChange","hint"])])],64)):f("",!0)]),s("div",bd,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=E=>n.onSubmit())},[yd,F(" "+h(e.trans("save")),1)])])]),o.pageLoad?(i(),l("div",kd,[d(M,{duration:4e3})])):f("",!0)])}const Cd=T(dd,[["render",wd]]),Dd={name:"close-ticket-workflow",data(){return{radioOptions:[{name:"yes",value:1},{name:"no",value:0}],user_set_ticket_status:"",user_registration:"",user_show_org_ticket:"",user_reply_org_ticket:"",allow_users_to_create_ticket:"",user_show_cc_ticket:"",login_restrictions:[],checkboxOptions:[],loading:!0,hasDataPopulated:!1,pageLoad:!1,show_unauthenticated_tickets_message:!1}},beforeMount(){this.getValues()},methods:{getValues(e){L.get("/api/admin/get-user-options").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data;this.user_set_ticket_status=a.user_set_ticket_status,this.user_registration=a.user_registration,this.user_show_org_ticket=a.user_show_org_ticket,this.user_reply_org_ticket=a.user_reply_org_ticket,this.user_show_cc_ticket=a.user_show_cc_ticket,this.allow_users_to_create_ticket=a.allow_users_to_create_ticket,this.checkboxOptions=a.login_restrictions,a.login_restrictions.forEach(r=>{r.status&&this.login_restrictions.push(r.value)})}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t==="allow_users_to_create_ticket"&&(e===1?this.show_unauthenticated_tickets_message=!0:this.closeAlert())},closeAlert(){this.show_unauthenticated_tickets_message=!1},onSubmit(){this.pageLoad=!0;const e={};e.user_set_ticket_status=this.user_set_ticket_status,e.user_registration=this.user_registration,e.user_show_org_ticket=this.user_show_org_ticket,e.user_reply_org_ticket=this.user_reply_org_ticket,e.allow_users_to_create_ticket=this.allow_users_to_create_ticket,e.user_show_cc_ticket=this.user_show_cc_ticket,e.login_restrictions=this.login_restrictions,L.post("/api/admin/user-options",e).then(t=>{this.pageLoad=!1,N(t,"user-options"),this.closeAlert(),this.getValues()}).catch(t=>{this.pageLoad=!1,I(t,"user-options")})}},components:{"radio-button":Le,"check-box":mt}},Sd={class:"col-sm-12"},$d={class:"card card-light"},Fd={class:"card-header"},Md={class:"card-title"},Td={class:"card-body"},Ed={key:0,class:"row"},Ld={class:"card card-light"},Id={class:"card-header"},Ad={class:"card-title"},qd={class:"card-body"},Pd={key:0,class:"alert alert-warning alert-dismissable show fade",role:"alert"},Vd={class:"row"},Od={class:"row"},Nd={class:"row"},xd={class:"card card-light"},Ud={class:"card-header"},Rd={class:"card-title"},jd={class:"card-body"},Bd={class:"row"},Hd={class:"card-footer"},zd=s("i",{class:"fas fa-save"},null,-1),Wd={key:0,class:"row"};function Gd(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("radio-button"),g=c("check-box"),v=c("custom-loader");return i(),l("div",Sd,[d(u,{componentName:"user-options"}),s("div",$d,[s("div",Fd,[s("h3",Md,h(e.trans("contact_and_organization_settings")),1)]),s("div",Td,[!o.hasDataPopulated||o.loading?(i(),l("div",Ed,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l(A,{key:1},[s("div",Ld,[s("div",Id,[s("h3",Ad,h(e.trans("user-options")),1)]),s("div",qd,[o.show_unauthenticated_tickets_message?(i(),l("div",Pd,[F(h(e.trans("unauthenticated_tickets_message"))+" ",1),s("button",{type:"button",onClick:t[0]||(t[0]=(...b)=>n.closeAlert&&n.closeAlert(...b)),"aria-hidden":"true",class:"close"},"×")])):f("",!0),s("div",Vd,[d(p,{options:o.radioOptions,label:e.trans("allow_unverified_contacts_to_create_ticket"),name:"allow_users_to_create_ticket",value:o.allow_users_to_create_ticket,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("unauth_user_ticket_create_info")},null,8,["options","label","value","onChange","hint"]),d(p,{options:o.radioOptions,label:e.trans("contact_set_ticket_status"),name:"user_set_ticket_status",value:o.user_set_ticket_status,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("user_set_ticket_status_info")},null,8,["options","label","value","onChange","hint"])]),s("div",Od,[d(p,{options:o.radioOptions,label:e.trans("contact_show_cc_ticket"),name:"user_show_cc_ticket",value:o.user_show_cc_ticket,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("user_show_cc_ticket_info")},null,8,["options","label","value","onChange","hint"]),d(p,{options:o.radioOptions,label:e.trans("allow_contacts_registration"),name:"user_registration",value:o.user_registration,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_registration_info")},null,8,["options","label","value","onChange","hint"])]),s("div",Nd,[d(g,{options:o.checkboxOptions,name:"login_restrictions",value:o.login_restrictions,label:e.trans("contact-account-activation-and-verifcation"),onChange:n.onChange,classname:"col-md-4 col-sm-6",hint:e.trans("contact-account-activation-and-verifcation_info")},null,8,["options","value","label","onChange","hint"])])])]),s("div",xd,[s("div",Ud,[s("h3",Rd,h(e.trans("organization-options")),1)]),s("div",jd,[s("div",Bd,[d(p,{options:o.radioOptions,label:e.trans("allow_users_to_show_organization_tickets"),name:"user_show_org_ticket",value:o.user_show_org_ticket,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_to_show_organization_tickets_info")},null,8,["options","label","value","onChange","hint"]),d(p,{options:o.radioOptions,label:e.trans("allow_users_to_reply_organization_tickets"),name:"user_reply_org_ticket",value:o.user_reply_org_ticket,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_to_reply_organization_tickets_info")},null,8,["options","label","value","onChange","hint"])])])])],64)):f("",!0)]),s("div",Hd,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=b=>n.onSubmit())},[zd,F(" "+h(e.trans("save")),1)])])]),o.pageLoad?(i(),l("div",Wd,[d(v,{duration:4e3})])):f("",!0)])}const Yd=T(Dd,[["render",Gd]]),Kd={props:{data:{type:Object,required:!0}},computed:{isDefault(){return this.data.system_default_language}},methods:{async makeDefault(e){this.loading=!0,await L.patch("api/admin/update-system-language/"+e).then(t=>{this.loading=!1,this.updateTable+=1,N(t,"language"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,I(t,"language")})}}},Jd={class:"actions-row"},Qd=["disabled"],Xd=["href"],Zd=s("i",{class:"fas fa-download"},null,-1),ec=[Zd];function tc(e,t,a,r,o,n){const u=P("tooltip");return i(),l("div",Jd,[S((i(),l("button",{class:"btn btn-default table_btn",disabled:a.data.system_default_language,onClick:t[0]||(t[0]=m=>n.makeDefault(a.data.iso_code))},[s("i",{class:x([n.isDefault?"fas fa-check success":"fa-solid fa-right-to-bracket"])},null,2)],8,Qd)),[[u,n.isDefault?e.trans("already_default"):e.trans("make_default")]]),S((i(),l("a",{class:"btn btn-default table_btn",href:e.basePath()+"/api/admin/download-language-template/"+a.data.id},ec,8,Xd)),[[u,e.trans("download_lang_files")]])])}const ac=T(Kd,[["render",tc]]);const sc={name:"languages-index",description:"Languages table component",data(){return{columns:["language","native_name","iso_code","system_default_language","action"],options:{},apiUrl:"api/admin/language-list",loading:!1,updateTable:0}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{language:this.trans("language"),native_name:this.trans("native_name"),iso_code:this.trans("iso-code"),system_default_language:this.trans("system_default"),action:this.trans("action")},columnsClasses:{language:"lang-name",native_name:"lang-native",iso_code:"lang-iso",system_default_language:"lang-default"},templates:{system_default_language(t,a){return e.h("span",{class:a.system_default_language?"btn btn-default text-success btn-xs pointer_normal":"btn btn-default text-danger btn-xs pointer_normal"},a.system_default_language?this.lang("Yes"):this.lang("No"))},language(t,a){return e.h("span",{innerHTML:a.language})},action:(t,a)=>e.h(ac,{data:a})},sortable:["language","native_name","iso_code"],filterable:["language","native_name","iso_code"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"language_name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data,count:t.data.total}}}},methods:{makeDefault(e){this.loading=!0,L.patch("api/admin/update-system-language/"+e).then(t=>{this.loading=!1,this.updateTable+=1,N(t,"language"),location.reload()}).catch(t=>{this.loading=!1,I(t,"language")})}}},oc={class:"col-sm-12"},nc={class:"card card-light"},ic={class:"card-header"},lc={class:"card-title"},rc={class:"card-body",id:"lang-table"};function dc(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("data-table");return i(),l("div",oc,[d(u,{componentName:"language"}),o.loading?(i(),D(m,{key:0,duration:4e3})):f("",!0),s("div",nc,[s("div",ic,[s("h3",lc,h(e.trans("language-settings")),1)]),s("div",rc,[o.apiUrl?(i(),D(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"lang-table",key:o.updateTable},null,8,["url","dataColumns","option"])):f("",!0)])])])}const cc=T(sc,[["render",dc]]);const uc={name:"cron-settings",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,job_list:"",exec_enabled:!1,cron_path:"",phpPaths:"",php_path:"",labelStyle:{display:"none"},custom_php_path:"",copying:!1,timeOptions:[]}},beforeMount(){this.getCronData(),this.getTimeOptions()},methods:{isVisible(e,t){let a=["ticket:archive","archive:delete"],r=["everyFiveMinutes","everyMinute","everyThirtyMinutes","everyTenMinutes"];return!(a.includes(t)&&r.includes(e))},getTimeOptions(){L.get("/api/dependency/cron-time-commands").then(e=>{this.timeOptions=e.data.data.cron_time_commands}).catch(e=>{this.timeOptions=[]})},getCronData(){this.loading=!0,L.get("/api/admin/get-cron-setting").then(e=>{this.cron_path=e.data.data.cron_path,this.exec_enabled=e.data.data.exec_enabled,this.exec_enabled||this.$store.dispatch("setAlert",{type:"warning",duration:5e5,message:O("please_enable_php_exec_for_cronjob_check"),component_name:"cron"}),this.job_list=e.data.data.job_list,this.job_list.map(t=>{t.active=!!t.active,t.value.includes("dailyAt")&&(t.daily_time=t.value.split(",")[t.value.split(",").length-1],t.value="dailyAt")}),this.phpPaths=e.data.data.php_bin_paths,this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1})},clearPhpPath(){this.php_path="",this.custom_php_path=""},copyCommand(){this.copying=!0;let e={};e.path=this.custom_php_path?this.custom_php_path:this.php_path,L.post("/verify-php-path",e).then(t=>{Xe("* * * * * "+(this.custom_php_path?this.custom_php_path:this.php_path)+" "+this.cron_path),this.copying=!1,N(t,"cron")}).catch(t=>{this.copying=!1,I(t,"cron")})},onSubmit(){const e={};let t={};this.job_list.forEach(a=>{t[a.job]={active:a.active?1:0,value:a.active?a.value:""},a.value.includes("dailyAt")&&a.daily_time&&a.active&&(t[a.job].time=a.daily_time)}),e.job_list=t,e._method="PATCH",this.pageLoad=!0,L.post("/api/admin/update-cron-setting",e).then(a=>{this.pageLoad=!1,N(a,"cron"),this.getCronData(),this.$store.dispatch("unsetValidationError")}).catch(a=>{this.pageLoad=!1,I(a,"cron")})}},components:{"tool-tip":Ae,"form-field-template":St}},pt=e=>(ee("data-v-6e43e390"),e=e(),te(),e),hc={class:"col-sm-12"},_c={class:"card card-light"},mc={class:"card-header"},pc={class:"card-title"},fc={class:"card-body"},gc={key:0,class:"row"},vc={key:1},bc={class:"card p-4 bg-light"},yc={class:"row"},kc=pt(()=>s("div",{class:"col-sm-2"},[s("span",{class:"text-xl"},"*  *  *  *  *")],-1)),wc={class:"col-sm-4"},Cc={disabled:"",value:""},Dc=["value"],Sc={value:"other"},$c={key:1,class:"input-group"},Fc=["placeholder"],Mc={class:"input-group-append"},Tc=pt(()=>s("i",{class:"fas fa-times"},null,-1)),Ec=[Tc],Lc={class:"col-sm-5"},Ic={class:"text-md"},Ac={class:"col-sm-1"},qc=pt(()=>s("i",{class:"far fa-clipboard fa-2x"},null,-1)),Pc=[qc],Vc={key:1,class:"pointer"},Oc=pt(()=>s("i",{class:"fas fa-circle-notch fa-spin fa-2x"},null,-1)),Nc=[Oc],xc={class:"row"},Uc={class:"col-md-6"},Rc={class:"info-box"},jc={class:"info-box-icon bg-info"},Bc={class:"info-box-content"},Hc={class:"row"},zc={class:"col-md-7"},Wc={class:"form-group mt-4"},Gc={name:"share"},Yc=["onUpdate:modelValue"],Kc={key:0,class:"col-md-5 mt-13",id:"fetching-command-block"},Jc={class:"row"},Qc=["onUpdate:modelValue"],Xc={value:""},Zc=["value"],eu={key:0,class:"col-sm-6",id:"fetching-daily-at"},tu=["name","onUpdate:modelValue"],au={key:0,class:"card-footer"},su=["disabled"],ou=pt(()=>s("i",{class:"fas fa-save"},null,-1));function nu(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("tool-tip"),v=c("form-field-template"),b=P("tooltip");return i(),l("div",hc,[d(u,{componentName:"cron"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",_c,[s("div",mc,[s("h3",pc,h(e.trans("cron_settings")),1)]),s("div",fc,[!o.hasDataPopulated||o.loading?(i(),l("div",gc,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l("div",vc,[s("p",null,h(e.trans("copy-cron-command-description")),1),s("div",bc,[s("div",yc,[kc,s("div",wc,[o.php_path!="other"?S((i(),l("select",{key:0,class:"form-control","onUpdate:modelValue":t[0]||(t[0]=y=>o.php_path=y)},[s("option",Cc,h(e.trans("specify-php-executable")),1),(i(!0),l(A,null,G(o.phpPaths,(y,w)=>(i(),l("option",{value:y},h(y),9,Dc))),256)),s("option",Sc,h(e.trans("other")),1)],512)),[[_t,o.php_path]]):f("",!0),o.php_path=="other"?(i(),l("div",$c,[S(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=y=>o.custom_php_path=y),placeholder:e.trans("specify-php-executable")},null,8,Fc),[[Fe,o.custom_php_path]]),s("div",Mc,[s("a",{href:"javascript:;",class:"input-group-text",onClick:t[2]||(t[2]=(...y)=>n.clearPhpPath&&n.clearPhpPath(...y))},Ec)])])):f("",!0)]),s("div",Lc,[s("span",Ic,h(o.cron_path),1)]),s("div",Ac,[o.copying?f("",!0):S((i(),l("span",{key:0,onClick:t[3]||(t[3]=y=>n.copyCommand()),class:"pointer"},Pc)),[[b,e.trans("verify-and-copy-command")]]),o.copying?(i(),l("span",Vc,Nc)):f("",!0)])])]),s("div",xc,[(i(!0),l(A,null,G(o.job_list,y=>(i(),l("div",Uc,[s("div",Rc,[s("span",jc,[s("i",{class:x(y.icon)},null,2)]),s("div",Bc,[s("div",Hc,[s("div",zc,[s("div",Wc,[s("label",Gc,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"active",id:"active_job","onUpdate:modelValue":w=>y.active=w},null,8,Yc),[[$e,y.active]]),F("  "+h(e.trans(y.job)),1)]),d(g,{message:e.trans(y.job_info),size:"small"},null,8,["message"])])]),y.active?(i(),l("div",Kc,[s("div",Jc,[d(v,{label:"select",labelStyle:o.labelStyle,name:"job_list."+y.job+".value",classname:y.value=="dailyAt"?"col-sm-6":"col-sm-12"},{default:k(()=>[S(s("select",{class:"form-control col-sm-12","onUpdate:modelValue":w=>y.value=w},[s("option",Xc,h(e.trans("select")),1),(i(!0),l(A,null,G(o.timeOptions,w=>(i(),l(A,null,[n.isVisible(w.id,y.command)?(i(),l("option",{key:0,value:w.id},h(w.name),9,Zc)):f("",!0)],64))),256))],8,Qc),[[_t,y.value]])]),_:2},1032,["labelStyle","name","classname"]),y.value=="dailyAt"?(i(),l("div",eu,[d(v,{label:"time",labelStyle:o.labelStyle,name:"job_list."+y.job+".time",classname:"col-sm-12"},{default:k(()=>[S(s("input",{class:"form-control",placeholder:"H:m",name:"job_list."+y.job+".time",type:"text","onUpdate:modelValue":w=>y.daily_time=w},null,8,tu),[[Fe,y.daily_time]])]),_:2},1032,["labelStyle","name"])])):f("",!0)])])):f("",!0)])])])]))),256))])])):f("",!0)]),o.hasDataPopulated?(i(),l("div",au,[s("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...y)=>n.onSubmit&&n.onSubmit(...y)),disabled:o.pageLoad},[ou,F(" "+h(e.trans("save")),1)],8,su)])):f("",!0)])])}const iu=T(uc,[["render",nu],["__scopeId","data-v-6e43e390"]]);function lu(e){const{backlist_threshold:t,lockout_period:a,lockout_message:r,max_attempts:o,expiry_time:n,password_reset_attempts_awaiting_time:u}=e;let m={lockout_message:[r,"isRequired",{"max(250)":O("message_should_be_less_than_250_characters")}],lockout_period:[a,"isRequired"],backlist_threshold:[t,"isRequired"],max_attempts:[o,"isRequired",{"maxValue(3)":O("password_reset_max_attempts")},{"minValue(1)":O("password_reset_min_attempts")}],expiry_time:[n,"isRequired",{"maxValue(30)":O("password_reset_min_expiry")},{"minValue(5)":O("password_reset_max_expiry")}],password_reset_attempts_awaiting_time:[u,"isRequired",{"maxValue(43200)":O("password_reset_attempts_awaiting_time_max")},{"minValue(30)":O("password_reset_attempts_awaiting_time_min")}]};const p=new he(O),{errors:g,isValid:v}=p.validate(m);return de.dispatch("setValidationError",g),{errors:g,isValid:v}}const ru={name:"security-settings",data(){return{backlist_threshold:"",lockout_period:"",lockout_message:"",loading:!1,hasDataPopulated:!1,pageLoad:!1,securityId:"",is_2fa_enforced:!1,max_attempts:3,expiry_time:"",password_reset_attempts_awaiting_time:60,options:[{id:1,name:1},{id:2,name:2},{id:3,name:3}]}},beforeMount(){this.getInitialValues()},methods:{getInitialValues(){this.loading=!0,L.get("/api/security").then(e=>{this.backlist_threshold=e.data.data.backlist_threshold,this.lockout_period=e.data.data.lockout_period,this.lockout_message=e.data.data.lockout_message,this.is_2fa_enforced=e.data.data.is_2fa_enforced,this.securityId=e.data.data.id,this.loading=!1,this.hasDataPopulated=!0,this.max_attempts=e.data.data.password_reset_max_attempts,this.expiry_time=e.data.data.password_reset_link_expiry,this.password_reset_attempts_awaiting_time=e.data.data.password_reset_attempts_awaiting_time}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},isValid(){const{errors:e,isValid:t}=lu(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.backlist_threshold=this.backlist_threshold,e.lockout_period=this.lockout_period,e.lockout_message=this.lockout_message,e.is_2fa_enforced=this.is_2fa_enforced?1:0,e.password_reset_max_attempts=this.max_attempts,e.password_reset_link_expiry=this.expiry_time,e.password_reset_attempts_awaiting_time=this.password_reset_attempts_awaiting_time,e._method="PATCH",L.post("/api/security/"+this.securityId,e).then(t=>{this.pageLoad=!1,N(t,"security"),this.getInitialValues(),setTimeout(()=>{window.emitter.emit("securitySettingsUpdated",!!this.is_2fa_enforced)},1e3)}).catch(t=>{this.pageLoad=!1,I(t,"security")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"static-select":xe,"text-field":oe,"number-field":Je,"status-switch":Oe,"tool-tip":Ae}},du={class:"col-sm-12"},cu={key:0,class:"row"},uu={key:1,class:"row"},hu={class:"col-sm-4"},_u={for:"is_2fa_enforced"},mu=s("br",null,null,-1),pu={key:2,class:"row"},fu={class:"row"},gu={key:0,class:"card-footer"},vu=s("i",{class:"fas fa-save"},null,-1),bu={key:0,class:"row"};function yu(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("number-field"),g=c("tool-tip"),v=c("status-switch"),b=c("text-field"),y=c("static-select"),w=c("faveo-box"),M=c("custom-loader"),C=P("focus-first-input");return i(),l("div",du,[d(u,{componentName:"security"}),d(w,{title:e.trans("security_settings")},{actions:k(()=>[o.hasDataPopulated?(i(),l("div",gu,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=E=>n.onSubmit())},[vu,F(" "+h(e.trans("save")),1)])])):f("",!0)]),default:k(()=>[!o.hasDataPopulated||o.loading?(i(),l("div",cu,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?S((i(),l("div",uu,[d(p,{label:e.trans("max_attempt"),value:o.backlist_threshold,name:"backlist_threshold",classname:"col-sm-4",onChange:n.onChange,placeholder:"n",type:"number",keyupListener:n.triggerEvent,required:!0,hint:e.trans("security_msg2")},null,8,["label","value","onChange","keyupListener","hint"]),d(p,{label:e.trans("lockout_period"),value:o.lockout_period,name:"lockout_period",classname:"col-sm-4",onChange:n.onChange,placeholder:"n",type:"number",keyupListener:n.triggerEvent,required:!0,hint:e.trans("security_msg3")},null,8,["label","value","onChange","keyupListener","hint"]),s("div",hu,[s("label",_u,h(e.trans("enforce_2fa")),1),d(g,{message:e.trans("2fa_enforce_tip"),size:"small"},null,8,["message"]),mu,d(v,{name:"is_2fa_enforced",value:o.is_2fa_enforced,onChange:n.onChange,classname:"float-left",bold:!0},null,8,["value","onChange"])])])),[[C]]):f("",!0),o.hasDataPopulated?(i(),l("div",pu,[d(b,{label:e.trans("lockout_message"),type:"textarea",name:"lockout_message",value:o.lockout_message,rows:5,classname:"col-sm-12",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,required:!0,hint:e.trans("security_msg1")},null,8,["label","value","onChange","placehold","keyupListener","hint"])])):f("",!0),s("div",fu,[d(y,{label:e.lang("pwd_reset_max_attempts"),hint:e.lang("pwd_reset_max_attempts_tooltip"),elements:o.options,name:"max_attempts",value:o.max_attempts,classname:"col-md-4",onChange:n.onChange,required:!0},null,8,["label","hint","elements","value","onChange"]),d(p,{name:"password_reset_attempts_awaiting_time",value:o.password_reset_attempts_awaiting_time,label:e.lang("password_reset_attempts_awaiting_time"),onChange:n.onChange,hint:e.lang("password_reset_attempts_awaiting_time_tooltip"),"show-minutes":!0,classname:"col-md-4",required:!0},null,8,["value","label","onChange","hint"]),d(p,{name:"expiry_time",value:o.expiry_time,label:e.lang("password_reset_link_expiry_time"),onChange:n.onChange,hint:e.lang("password_reset_link_expiry_time_tooltip"),"show-minutes":!0,classname:"col-md-4",required:!0},null,8,["value","label","onChange","hint"])])]),_:1},8,["title"]),o.pageLoad?(i(),l("div",bu,[d(M,{duration:4e3})])):f("",!0)])}const ku=T(ru,[["render",yu]]);const wu={name:"FileSystemSettings",components:{"text-field":oe,"static-select":xe,"status-switch":Oe},props:{disks:{type:String,required:!0}},data(){return{isLoading:!1,allowedFiles:null,showPublicDiskWithDefaultDisk:0,s3_status:"status",defaultPath:"",is_installed:!1}},computed:{selectOptions(){return JSON.parse(this.disks)}},watch:{s3_status(e,t){if(t!="status"){let a=e?"/enable-s3-private-bucket":"disable-s3-private-bucket";this.updateBucket(a)}}},beforeMount(){this.getDefaultSettingsValues(),this.getS3Data(),this.getWkhtmltopdfInstallation()},methods:{getS3Data(){this.isLoading=!0,L.get("/check-private-bucket").then(e=>{this.s3_status=!!e.data.data.isPrivateBucketEnabled,this.isLoading=!1}).catch(e=>{I(e,"file-system-settings"),this.isLoading=!1})},onChange(e,t){this[t]=e},updateBucket(e){this.isLoading=!0,L.post(e).then(t=>{N(t,"file-system-settings"),this.isLoading=!1}).catch(t=>{I(t,"file-system-settings"),this.isLoading=!1})},async onSubmit(){this.isLoading=!0;try{let e=await L.put("file-system-settings",{disk:this.disk,allowedFiles:this.allowedFiles,defaultPath:this.defaultPath,showPublicDiskWithDefaultDisk:this.showPublicDiskWithDefaultDisk?1:0});N(e,"file-system-settings"),this.$store.dispatch("unsetValidationError")}catch(e){I(e,"file-system-settings")}finally{this.isLoading=!1}},async getDefaultSettingsValues(){try{let t=(await L.get("file-system-settings-values")).data.data;this.allowedFiles=t.allowed_files,this.defaultPath=t.defaultPath,this.showPublicDiskWithDefaultDisk=!!t.show_public_folder_with_default_disk}catch{Object.assign(this.$data,this.$options.data.apply(this))}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()},getWkhtmltopdfInstallation(){this.isLoading=!0,L.get("/wkhtmltopdf/installation").then(e=>{this.is_installed=!!e.data.data.is_installed,this.isLoading=!1}).catch(e=>{I(e,"file-system-settings"),this.isLoading=!1})}}},Cu=e=>(ee("data-v-1db8a4c9"),e=e(),te(),e),Du={class:"col-sm-12"},Su={class:"card-tools switch-pos"},$u={class:"flex"},Fu={class:"switch_mb"},Mu={class:"row"},Tu={class:"row"},Eu={class:"col-sm-6"},Lu={class:"label_align"},Iu=["keyupListener"],Au={class:"card-footer"},qu=["disabled"],Pu=Cu(()=>s("span",{class:"fas fa-save",id:"submit-btn"},null,-1));function Vu(e,t,a,r,o,n){const u=c("alert"),m=c("status-switch"),p=c("custom-loader"),g=c("text-field"),v=c("faveo-box"),b=P("focus-first-input");return i(),l("div",Du,[d(u,{componentName:"file-system-settings"}),d(v,{title:e.lang("settings_file_system_page_header")},{headerMenu:k(()=>[s("div",Su,[s("div",$u,[s("label",Fu,h(e.lang("s3_private_bucket")),1),d(m,{slot:"headerMenu",name:"s3_status",value:o.s3_status,onChange:n.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])])]),actions:k(()=>[s("div",Au,[s("button",{id:"agent-submit",class:"btn btn-primary",type:"button",disabled:o.isLoading,onClick:t[1]||(t[1]=(...y)=>n.onSubmit&&n.onSubmit(...y))},[Pu,F("  "+h(e.lang("submit")),1)],8,qu)])]),default:k(()=>[o.isLoading?(i(),D(p,{key:0})):f("",!0),S((i(),l("div",Mu,[d(g,{classname:"col-sm-6",onChange:n.onChange,rows:"1",label:e.lang("settings_file_system_allowed_files"),value:o.allowedFiles,type:"textarea",name:"allowedFiles",keyupListener:n.triggerEvent,hint:e.lang("settings_file_system_allowed_files_hint"),placehold:e.lang("settings_file_system_allowed_files_placeholder"),required:!0},null,8,["onChange","label","value","keyupListener","hint","placehold"]),o.is_installed?(i(),D(g,{key:0,classname:"col-sm-6",onChange:n.onChange,rows:"1",label:e.lang("wkhtmltopdf_path"),value:o.defaultPath,type:"textarea",name:"defaultPath",keyupListener:n.triggerEvent,hint:e.lang("settings_file_system_wkhtmltopdf_path"),placehold:e.lang("enter_a_value"),required:!1},null,8,["onChange","label","value","keyupListener","hint","placehold"])):f("",!0)])),[[b]]),s("div",Tu,[s("div",Eu,[s("label",Lu,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"showPublicDiskWithDefaultDisk","onUpdate:modelValue":t[0]||(t[0]=y=>o.showPublicDiskWithDefaultDisk=y),keyupListener:n.triggerEvent},null,8,Iu),[[$e,o.showPublicDiskWithDefaultDisk]]),F(" "+h(e.lang("file-manager-show-public-folder")),1)])])])]),_:1},8,["title"])])}const Ou=T(wu,[["render",Vu],["__scopeId","data-v-1db8a4c9"]]);const Nu={name:"downloadable-row",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:String,required:!0}},data:()=>({baseUrl:window.axios.defaults.baseURL}),methods:{downloadLink(){const e=this.column==="filename"?"filesystem":"database";return this.baseUrl+"/api/download-backup/"+this.data.id+"/"+e}}},xu=e=>(ee("data-v-7bc33f28"),e=e(),te(),e),Uu={id:"custom_row__dr"},Ru=["href"],ju=xu(()=>s("i",{id:"icon__dr",class:"fa fa-download pull-right","aria-hidden":"true",title:"Download"},null,-1)),Bu=[ju];function Hu(e,t,a,r,o,n){return i(),l("div",Uu,[s("label",null,h(a.data[a.column]),1),s("a",{href:n.downloadLink(),target:"_blank"},Bu,8,Ru)])}const _a=T(Nu,[["render",Hu],["__scopeId","data-v-7bc33f28"]]);const zu={name:"system-backup-list",description:"System backup table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({loadingSpeed:4e3,refreshingDatatable:!1,isLoading:!0,perrformBackupClicked:!1,backupTriggeredSuccessfully:!1,storagePath:"",apiUrl:"api/backup/list",columns:["filename","db_name","created_at","version","action"],options:{}}),beforeMount(){this.configureOptions(),L.get("api/get-backup-path").then(e=>{this.storagePath=e.data.data.path}).catch(e=>{I(e,"system-backup-list")}).finally(()=>{this.isLoading=!1})},methods:{configureOptions(){const e=this;this.options={headings:{filename:this.trans("file_name"),db_name:this.trans("db_name"),created_at:this.trans("created-at"),version:this.trans("version"),action:this.trans("action")},texts:{filter:"",limit:""},templates:{filename:function(t,a,r,o){return e.h(_a,{data:a,index:r,column:o})},db_name:function(t,a,r,o){return e.h(_a,{data:a,index:r,column:o})},action:function(t,a){return e.h(Se,{data:a})},created_at(t,a){return e.formattedTime(a.created_at)}},sortable:["created_at","version"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.delete_url=window.axios.defaults.baseURL+"/api/delete-backup/"+a.id,a)),count:t.message.total}}}},perrformBackup(){this.perrformBackupClicked=!0,L.post("api/backup/take-system-backup",{path:this.storagePath}).then(e=>{N(e,"system-backup-list"),this.backupTriggeredSuccessfully=!0}).catch(e=>{I(e,"system-backup-list")}).finally(()=>{this.perrformBackupClicked=!1})},refreshDatatable(){this.refreshingDatatable=!0,window.emitter.emit("refreshData"),setTimeout(()=>{this.refreshingDatatable=!1},500)}}},Wu={id:"backup-details-container",class:"col-sm-12"},Gu={class:"card card-light"},Yu={class:"card-header"},Ku={class:"card-title d-flex"},Ju={class:"input-box__sbl"},Qu={class:"card-tools"},Xu=["disabled"],Zu={class:"card-body",id:"backup-list"};function eh(e,t,a,r,o,n){const u=c("alert"),m=c("data-table"),p=P("tooltip");return i(),l("div",Wu,[d(u,{componentName:"dataTableModal"}),d(u,{componentName:"system-backup-list"}),s("div",Gu,[s("div",Yu,[s("h3",Ku,[s("span",null,h(e.lang("backup_storage_path"))+":",1),F("    "),s("div",Ju,[S(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=g=>e.storagePath=g),id:"backup_storage_path",placeholder:"path/to/store/system-backup"},null,512),[[Fe,e.storagePath]])])]),s("div",Qu,[S((i(),l("button",{id:"create-backup__sb",class:"btn btn-tool",onClick:t[1]||(t[1]=g=>n.perrformBackup()),disabled:e.perrformBackupClicked},[s("span",{class:x(e.perrformBackupClicked?"fas fa-spinner fa-spin":"fas fa-download"),"aria-hidden":"true"},null,2)],8,Xu)),[[p,e.lang("take_system_backup")]]),e.backupTriggeredSuccessfully?S((i(),l("button",{key:0,class:"btn btn-tool",onClick:t[2]||(t[2]=g=>n.refreshDatatable())},[s("i",{class:x(e.refreshingDatatable?"fas fa-sync-alt fa-spin":"fas fa-sync-alt"),id:"refresh-data-table__sbl"},null,2)])),[[p,e.lang("refresh")]]):f("",!0)])]),s("div",Zu,[d(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])])])])}const th=T(zu,[["render",eh],["__scopeId","data-v-4d2f0a49"]]);function ah(e){const{value:t}=e;let a={value:[t,"isUrl"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const sh={name:"Social-Modal",description:"Social Modal component",props:{data:{type:Object,required:!0},showModal:{type:Boolean,default:!1},onClose:{type:Function},modalMode:{type:String,required:!0}},data:()=>({containerStyle:{width:"500px"},value:"",loading:!1}),beforeDestroy(){this.$store.dispatch("unsetValidationError")},beforeMount(){this.value=this.data.value},created(){this.lang_locale=localStorage.getItem("LANGUAGE"),this.ticketId=this.getStoredTicketId},methods:{onChange(e,t){this[t]=e},onSubmit(){if(this.isValidInputs()){this.loading=!0;let e=this.getSubmitParams();L.post("api/update-widget/"+this.data.id,e).then(t=>{this.loading=!1,this.onClose(),N(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,I(t,"widget-Modal")})}},getSubmitParams(){return{value:this.value}},isValidInputs(){const{errors:e,isValid:t}=ah(this.$data);return t},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe}},oh={class:"modal-title"},nh={class:"row"},ih=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1);function lh(e,t,a,r,o,n){const u=c("alert"),m=c("text-field"),p=c("modal"),g=P("focus-first-input");return i(),l("div",null,[a.showModal?(i(),D(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",oh,h(e.lang(a.modalMode)),1)]),alert:k(()=>[d(u,{componentName:"widget-Modal"})]),fields:k(()=>[S((i(),l("div",nh,[d(m,{label:e.lang("Link"),onChange:n.onChange,placehold:e.lang("enter_a_value"),value:e.value,type:"URL",name:"value",keyupListener:n.triggerEvent,classname:"col-sm-12"},null,8,["label","onChange","placehold","value","keyupListener"])])),[[g]])]),controls:k(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=v=>n.onSubmit()),class:"btn btn-primary"},[ih,F(" "+h(e.lang("update")),1)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const rh=T(sh,[["render",lh]]),dh={name:"social-widget-table-actions",description:"Widget table edit componnet",data:()=>({showModal:!1}),props:{data:{type:Object,required:!0}},methods:{onClickEvent(e){this.showModal=!0,this.modalMode=e},onClose(){this.showModal=!1}},components:{"social-modal":rh}},ch={class:"btn-group block"},uh=s("i",{class:"fas fa-edit"},null,-1),hh=[uh];function _h(e,t,a,r,o,n){const u=c("social-modal"),m=P("tooltip");return i(),l("div",ch,[S((i(),l("a",{id:"edit-button",onClick:t[0]||(t[0]=p=>n.onClickEvent("edit")),href:"javascript:;",class:"btn btn-default table_btn"},hh)),[[m,e.lang("edit")]]),d(ye,{name:"modal"},{default:k(()=>[e.showModal?(i(),D(u,{key:0,onClose:n.onClose,"modal-mode":e.modalMode,showModal:e.showModal,assetId:a.data.id,data:a.data},null,8,["onClose","modal-mode","showModal","assetId","data"])):f("",!0)]),_:1})])}const mh=T(dh,[["render",_h]]);const ph={name:"social-widget-list",description:"Widget list table component",data:()=>({apiUrl:"api/list-widgets/social-icon",columns:["name","value","action"],options:{}}),beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),value:this.trans("link"),action:this.trans("action")},columnsClasses:{name:"widget-name",title:"widget-title",action:"widget-action"},texts:{filter:"",limit:""},sortable:["name","Link"],filterable:["name","Link"],templates:{action:function(t,a){return e.h(mh,{data:a})}},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.widgets,count:t.data.total}}}}},fh={class:"col-sm-12"},gh={class:"card card-light"},vh={class:"card-header",id:"social-widget-list"},bh={class:"card-title"},yh={class:"card-body"};function kh(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",fh,[d(u,{componentName:"dataTableModal"}),s("div",gh,[s("div",vh,[s("h3",bh,h(e.lang("social-widget-settings")),1)]),s("div",yh,[d(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"social-widget-list"},null,8,["url","dataColumns","option"])])])])}const wh=T(ph,[["render",kh],["__scopeId","data-v-57520eae"]]);const Ch={name:"api-settings",data(){return{api_enable:1,api_key_mandatory:1,api_key:"",radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],loading:!0,hasDataPopulated:!1,pageLoad:!1,copied:!1,statusText:""}},beforeMount(){this.getValues()},methods:{getRandomKey(){L.get("/generate-api-key").then(e=>{this.api_key=e.data}).catch(e=>{this.api_key=""})},onCopy(){Xe(this.api_key),this.copied=!0,setTimeout(()=>{this.copied=!1},5e3)},getValues(e){L.get("/api/admin/get-api-setting").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data;this.api_enable=a.api_enable,this.api_key_mandatory=a.api_key_mandatory,this.api_key=a.api_key}).catch(t=>{I(t,"api-settings"),this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e},onSubmit(){this.pageLoad=!0;const e={};e.api_enable=this.api_enable,e.api_key_mandatory=this.api_key_mandatory,e.api_key=this.api_key,L.post("/api/admin/update-api-setting",e).then(t=>{this.statusText="",this.pageLoad=!1,N(t,"api-settings"),this.getValues()}).catch(t=>{this.statusText=t.response.data.message.api_key,this.pageLoad=!1,I(t,"api-settings")})},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"radio-button":Le}},ds=e=>(ee("data-v-c5078a66"),e=e(),te(),e),Dh={class:"col-sm-12"},Sh={key:0,class:"row"},$h={key:1,class:"row"},Fh={class:"col-sm-4 form-group"},Mh=ds(()=>s("i",{class:"fas fa-key"},"  ",-1)),Th=["placeholder"],Eh={key:0,class:"text-red status-text"},Lh={class:"card-footer"},Ih=["disabled"],Ah=ds(()=>s("i",{class:"fas fa-save"},null,-1)),qh={key:0,class:"row"};function Ph(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("radio-button"),g=c("faveo-box"),v=c("custom-loader"),b=P("tooltip");return i(),l("div",Dh,[d(u,{componentName:"api-settings"}),d(g,{title:e.trans("api_settings")},{actions:k(()=>[s("div",Lh,[s("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=y=>n.onSubmit()),disabled:o.pageLoad},[Ah,F(" "+h(e.trans("save")),1)],8,Ih)])]),default:k(()=>[!o.hasDataPopulated||o.loading?(i(),l("div",Sh,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l("div",$h,[d(p,{options:o.radioOptions,label:e.trans("api"),name:"api_enable",value:o.api_enable,onChange:n.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),d(p,{options:o.radioOptions,label:e.trans("api_key_mandatory"),name:"api_key_mandatory",value:o.api_key_mandatory,onChange:n.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),s("div",Fh,[s("label",null,h(e.trans("api_key")),1),s("button",{class:"btn btn-xs btn-default float-right",id:"random",onClick:t[0]||(t[0]=y=>n.getRandomKey())},[Mh,F(h(e.trans("generate_key")),1)]),s("div",null,[S(s("input",{type:"text",class:"form-control",name:"api_key","onUpdate:modelValue":t[1]||(t[1]=y=>o.api_key=y),onKeyup:t[2]||(t[2]=ct((...y)=>n.triggerEvent&&n.triggerEvent(...y),["enter"])),placeholder:e.trans("enter_a_value")},null,40,Th),[[Fe,o.api_key]]),o.api_key?(i(),l("a",{key:0,id:"basic-addon",onClick:t[3]||(t[3]=lt(y=>n.onCopy(),["prevent"]))},[S(s("span",{class:x(o.copied?"fas fa-check text-green":"fa fa-clipboard"),id:"eye"},null,2),[[b,o.copied?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])):f("",!0)]),o.statusText?(i(),l("span",Eh,h(o.statusText),1)):f("",!0)])])):f("",!0)]),_:1},8,["title"]),o.pageLoad?(i(),l("div",qh,[d(v,{duration:4e3})])):f("",!0)])}const Vh=T(Ch,[["render",Ph],["__scopeId","data-v-c5078a66"]]),Oh={name:"SocketDriversName",props:{data:{type:Object,required:!0}}},Nh=["href"],xh=s("i",{class:"fas fa-question-circle"},null,-1),Uh=[xh];function Rh(e,t,a,r,o,n){const u=P("tooltip");return i(),l("span",null,[s("span",null,h(a.data.name),1),F("   "),a.data.tooltip?S((i(),l("a",{key:0,href:a.data.document_link,target:"_blank"},Uh,8,Nh)),[[u,a.data.tooltip]]):f("",!0)])}const jh=T(Oh,[["render",Rh]]),Bh={name:"SocketDriverActivateModal",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,L.post("api/post/socket-driver",{default:this.driver}).then(e=>{window.emitter.emit("DriverIndexrefreshData"),N(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,I(e,"dataTableModal"),this.onClose()})}}},Hh={class:"modal-title"},zh={key:0},Wh={key:1,class:"row"},Gh=["disabled"],Yh=s("i",{class:"fas fa-check"},null,-1);function Kh(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:k(()=>[s("h4",Hh,h(e.trans("activate")),1)]),fields:k(()=>[o.loading?f("",!0):(i(),l("div",zh,[s("span",null,h(e.trans("are_you_sure")),1)])),o.loading?(i(),l("div",Wh,[d(u,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>n.onSubmit&&n.onSubmit(...p)),class:"btn btn-primary",disabled:o.isDisabled},[Yh,F(" "+h(e.trans("activate")),1)],8,Gh)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const Jh=T(Bh,[["render",Kh]]),Qh={name:"SocketDriversActions",description:"Socket table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToCacheDriver(){this.$router.push(`/websockets/${this.data.driver}`)}},components:{"driver-activate-modal":Jh}},Xh={key:0},Zh={key:0},e_=["disabled"],t_=s("i",{class:"fas fa-check-circle"},null,-1),a_=[t_],s_={key:1},o_=s("i",{class:"fas fa-cog"},null,-1),n_=[o_];function i_(e,t,a,r,o,n){const u=c("driver-activate-modal"),m=P("tooltip");return a.data?(i(),l("div",Xh,[a.data.config===0?S((i(),l("span",Zh,[s("button",{class:"btn btn-default table_btn",onClick:t[0]||(t[0]=p=>o.showModal=!0),disabled:a.data.status},a_,8,e_)])),[[m,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.config===1?S((i(),l("span",s_,[s("button",{class:"btn btn-default table_btn",onClick:t[1]||(t[1]=(...p)=>n.redirectToCacheDriver&&n.redirectToCacheDriver(...p))},n_)])),[[m,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,driver:a.data.driver},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const l_=T(Qh,[["render",i_]]);const r_={name:"WebSocketIndex",description:"Websocket table component",data(){return{columns:["name","status","action"],options:{},activated:"",apiUrl:"api/sockets-lists"}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{name:"drivers-name",status:"drivers-status",action:"drivers-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(jh,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(l_,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.find(({status:a})=>a),{data:t.data,count:4}}}},methods:{makeAPICall(){L.post("api/post/socket-driver-deactivate",{}).then(e=>{N(e,"dataTableModal"),location.reload()}).catch(e=>{I(e,"dataTableModal")})}}},d_={class:"col-sm-12"},c_={class:"card card-light"},u_={class:"card-header"},h_={class:"card-title"},__={style:{"padding-left":"3px"}},m_={class:"badge badge-info"},p_={class:"card-tools"},f_=s("i",{class:"fa-solid fa-power-off"},null,-1),g_=[f_],v_={class:"card-body",id:"driver_index"},b_={class:"alert alert-info"};function y_(e,t,a,r,o,n){const u=c("alert"),m=c("data-table"),p=P("tooltip");return i(),l("div",d_,[d(u,{componentName:"dataTableModal"}),s("div",c_,[s("div",u_,[s("h3",h_,h(e.trans("websocket-drivers")),1),s("sup",__,[s("span",m_,h(e.trans("beta")),1)]),s("div",p_,[S((i(),l("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=g=>n.makeAPICall())},g_)),[[p,e.lang("deactivate_sockets")]])])]),s("div",v_,[s("div",b_,h(e.trans("websockets_description")),1),d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"driver_index",componentTitle:"DriverIndex"},null,8,["url","dataColumns","option"])])])])}const k_=T(r_,[["render",y_]]);function w_(e){const{web_hook:t}=e;let a={web_hook:[t,"isRequired"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const C_={name:"web-hook-settings",data(){return{web_hook:null,sources:[],checkbox_data:null,isLoading:!0,hasDataPopulated:!1}},beforeMount(){this.getValues()},methods:{getValues(){L.get("/api/admin/get-webhook").then(e=>{this.isLoading=!1,this.web_hook=e.data.data.web_hook?e.data.data.web_hook:"",this.checkbox_data=e.data.data.sources,this.hasDataPopulated=!0,this.sources=this.checkbox_data.filter(t=>t.is_checked).map(t=>t.id)}).catch(e=>{this.hasDataPopulated=!0,this.isLoading=!1,I(e,"web-hook-settings")})},isValid(){const{errors:e,isValid:t}=w_(this.$data);return t||!1},onSubmit(){if(this.isValid()){this.isLoading=!0;const e={};e.web_hook=this.web_hook,e.sources=this.sources,L.post("/api/admin/save-webhook",e).then(t=>{this.isLoading=!1,N(t,"web-hook-settings"),this.$store.dispatch("unsetValidationError"),this.getValues()}).catch(t=>{this.isLoading=!1,I(t,"web-hook-settings")})}},onChange(e,t){this[t]=e,t!=="web_hook"&&(e?!this.sources.includes(t)&&this.sources.push(t):this.sources.splice(this.sources.indexOf(t),1))},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{Checkbox:et,"text-field":oe,"tool-tip":Ae}},D_={class:"col-sm-12"},S_={for:"sources"},$_=s("span",{class:"text-red"},"*",-1),F_=s("br",null,null,-1),M_={class:"row"},T_={key:1,class:"row"},E_={class:"card-footer"},L_=["disabled"],I_=s("i",{class:"fas fa-save"},null,-1);function A_(e,t,a,r,o,n){const u=c("alert"),m=c("tool-tip"),p=c("custom-loader"),g=c("checkbox"),v=c("text-field"),b=c("faveo-box"),y=P("focus-first-input");return i(),l("div",D_,[d(u,{componentName:"web-hook-settings"}),d(b,{title:e.trans("webhook_configurations")},{headerTooltip:k(()=>[d(m,{message:e.trans("webhook_update_tooltip"),size:"small"},null,8,["message"])]),actions:k(()=>[s("div",E_,[s("button",{class:"btn btn-primary",type:"button",disabled:o.isLoading,onClick:t[0]||(t[0]=(...w)=>n.onSubmit&&n.onSubmit(...w))},[I_,F(" "+h(e.trans("submit")),1)],8,L_)])]),default:k(()=>[o.isLoading?(i(),D(p,{key:0})):f("",!0),s("label",S_,h(e.trans("web_hook_sources")),1),$_,d(m,{message:e.trans("the_message_or_payload_will_be_sent_to_the_source"),size:"small"},null,8,["message"]),F_,s("div",M_,[(i(!0),l(A,null,G(o.checkbox_data,w=>(i(),l("div",{key:w.id,class:"col-auto"},[d(g,{name:w.id,value:w.is_checked,label:w.value,class:"checkbox-label",title:w.name,onChange:n.onChange,id:w.key},null,8,["name","value","label","title","onChange","id"])]))),128))]),o.hasDataPopulated?S((i(),l("div",T_,[d(v,{id:"web_hook",label:e.trans("web_hook_url"),type:"text",name:"web_hook",value:o.web_hook,keyupListener:n.triggerEvent,classname:"col-sm-12",onChange:n.onChange,required:!0,hint:e.trans("enter_url_to_send_ticket_details"),placehold:"https://www.example.com"},null,8,["label","value","keyupListener","onChange","hint"])])),[[y]]):f("",!0)]),_:1},8,["title"])])}const q_=T(C_,[["render",A_]]);const P_={name:"user-import-mapper",props:{apiEndpoint:{type:String,required:!0},updateParent:{required:!0,type:Function},tableHeadings:{required:!0,type:Object},buttonText:{required:!1,type:String,default:"save"},importId:{required:!1,type:String},expandByDefault:{required:!1,type:Boolean,default:!1}},data(){return{faveoAttributeList:[],thirdPartyAttributes:[],loading:!1,hasDataPopulated:!1,minimized:!0}},created(){window.emitter.on("refreshData",this.getDataFromBackend)},beforeMount(){this.expandByDefault&&this.toggleList()},methods:{toggleList(){this.minimized=!this.minimized,this.minimized?this.hasDataPopulated=!1:(this.loading=!0,this.hasDataPopulated=!1,this.getDataFromBackend())},getDataFromBackend(){L.get(this.apiEndpoint).then(e=>{this.faveoAttributeList=e.data.data.faveo_attributes,this.thirdPartyAttributes=e.data.data.third_party_attributes,this.loading=!1,this.minimized||(this.hasDataPopulated=!0)}).catch(e=>{I(e),this.loading=!1})},onChange(e,t){let a=t.includes("overwrite")?"overwrite":"mapped_to",r=t.split("-"),o=r[r.length-1];this.faveoAttributeList[o][a]=e},onSubmit(){this.loading=!0;let e={faveo_attributes:this.faveoAttributeList};this.importId&&(e.import_id=this.importId),L.post(this.apiEndpoint,e).then(t=>{N(t,this.$options.name),this.loading=!1,this.updateParent()}).catch(t=>{I(t,this.$options.name),this.loading=!1})},disableOverwrite(e){return!re(e)},displayAttribute(e,t){return!(e=="user_name"&&!re(t))}},components:{checkbox:et,"tool-tip":Ae}},V_={class:"card card-light"},O_={class:"card-header"},N_={class:"card-title"},x_={class:"card-tools"},U_={key:0,class:"glyphicon glyphicon-menu-down"},R_={key:1,class:"glyphicon glyphicon-menu-up"},j_={class:"card-body"},B_={key:0,id:"faveo-attribute-list",class:"faveo-table table"},H_={class:"thead-default"},z_={class:"faveo-attribute-elements"},W_={class:"padding-top-12"},G_=["id"],Y_=["onUpdate:modelValue","id","disabled","onChange"],K_=["id","value"],J_={class:"card-footer"},Q_=["disabled"],X_=s("span",{class:"fas fa-save"},null,-1);function Z_(e,t,a,r,o,n){const u=c("alert"),m=c("tool-tip"),p=c("custom-loader"),g=c("checkbox"),v=P("tooltip");return i(),l("div",null,[d(u,{componentName:this.$options.name},null,8,["componentName"]),s("div",V_,[s("div",O_,[s("h3",N_,h(e.lang("user-import-mapper")),1),d(m,{message:e.lang("user-import-mapper_instructions"),size:"large"},null,8,["message"]),s("div",x_,[s("a",{id:"toggle-list-button",onClick:t[0]||(t[0]=(...b)=>n.toggleList&&n.toggleList(...b)),class:"btn-tool"},[o.hasDataPopulated?S((i(),l("span",R_,null,512)),[[v,e.lang("collapse")]]):S((i(),l("span",U_,null,512)),[[v,e.lang("expand")]])])])]),s("div",j_,[o.loading?(i(),D(p,{key:0})):f("",!0),s("div",{class:x(["toggle1",{"toggle-expand":o.hasDataPopulated}])},[o.hasDataPopulated?(i(),l("table",B_,[s("thead",H_,[s("tr",null,[s("th",null,[F(h(e.lang(a.tableHeadings.faveo.header))+" ",1),d(m,{message:e.lang(a.tableHeadings.faveo.description)},null,8,["message"])]),s("th",null,[F(h(e.lang(a.tableHeadings.thirdParty.header))+" ",1),d(m,{message:e.lang(a.tableHeadings.thirdParty.description)},null,8,["message"])]),s("th",null,[F(h(e.lang(a.tableHeadings.overwrite.header))+" ",1),d(m,{message:e.lang(a.tableHeadings.overwrite.description)},null,8,["message"])])])]),(i(!0),l(A,null,G(o.faveoAttributeList,(b,y)=>(i(),l("tbody",z_,[s("tr",null,[s("td",W_,[s("span",{id:"faveo-attribute-label-"+y},h(e.lang(b.label)),9,G_),b.description?(i(),D(m,{key:0,message:b.description,size:"small"},null,8,["message"])):f("",!0)]),s("td",null,[S(s("select",{"onUpdate:modelValue":w=>b.mapped_to=w,id:"attribute-list-"+y,disabled:b.editable==0,class:"attribute-list form-control",onChange:w=>n.onChange(b.mapped_to,"attribute-list-"+y)},[(i(!0),l(A,null,G(o.thirdPartyAttributes,w=>(i(),l(A,null,[n.displayAttribute(b.name,w.is_loginable)?(i(),l("option",{id:"attribute-element-"+y,key:w.id,value:w.id},h(w.name),9,K_)):f("",!0)],64))),256))],40,Y_),[[_t,b.mapped_to]])]),s("td",null,[d(g,{value:b.overwrite,name:"overwrite-"+y,label:"",onChange:n.onChange,disabled:n.disableOverwrite(b.overwriteable)},null,8,["value","name","onChange","disabled"])])])]))),256))])):f("",!0)],2)]),s("div",J_,[o.hasDataPopulated?(i(),l("button",{key:0,id:"user-import-mapper-submit",type:"button",onClick:t[1]||(t[1]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.loading,class:"btn btn-primary update-btn"},[X_,F(" "+h(e.lang(a.buttonText)),1)],8,Q_)):f("",!0)])])])}const em=T(P_,[["render",Z_]]),tm={name:"Upload",components:{UserImportMapper:em},data(){return{apiUrl:"importer/api/processing/",importId:null,importFile:null,componentRenderKey:Math.random(),loading:!1,loadingSpeed:4e3,uploaded:!1,tableHeadings:{faveo:{header:"importer_system_atrributes",description:"importer_system_atrribute_description"},thirdParty:{header:"importer_xl_attributes",description:"importer_xl_attribute_description"},overwrite:{header:"importer_overwrite",description:"importer_overwrite_description"}},buttonText:"importer_import"}},methods:{onChange(e,t){this[t]=e,e===null&&(this[t]="")},fileSelected(e){e.target.files[0].size<25e6?this.importFile=e.target.files[0]:alert(lang("importer_max_upload_size"))},updateParent(){setTimeout(()=>{this.uploaded=!1,this.$router.push({path:"/importer"})},3e3)},customErrors(e){e.response.status===412?this.setAlert(e.response.data.message.import_file):I(e,"importerUpload")},setAlert(e){I({response:{status:400,data:{message:e}}},"importerUpload")},submitCallback(){this.loading=!0;let e=new FormData;e.append("import_file",this.importFile),L.post("/importer/api/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.importId=t.data.data.import_id,this.apiUrl="importer/api/processing?import_id="+this.importId,N(t,"importerUpload"),this.uploaded=!0}).catch(t=>{this.customErrors(t),this.uploaded=!1}).finally(()=>{this.loading=!1})}}},am={class:"col-sm-12"},sm={class:"row"},om={class:"form-group col-sm-12"},nm=s("span",{class:"text-red"},"*  ",-1),im={class:"card-footer"},lm=s("i",{class:"fas fa-upload"},null,-1);function rm(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("faveo-box"),g=c("user-import-mapper");return i(),l("div",am,[o.loading?(i(),D(u,{key:0,duration:o.loadingSpeed},null,8,["duration"])):f("",!0),d(m,{componentName:"importerUpload"}),o.uploaded?f("",!0):(i(),D(p,{key:1,title:e.lang("importer_upload")},{actions:k(()=>[s("div",im,[s("button",{type:"button",onClick:t[1]||(t[1]=(...v)=>n.submitCallback&&n.submitCallback(...v)),class:"btn btn-primary"},[lm,F(" "+h(e.lang("importer_upload_btn")),1)])])]),default:k(()=>[s("div",sm,[s("div",om,[s("label",null,[F(h(e.lang("importer_import_file_label"))+" ",1),nm]),s("input",{type:"file",name:"import_file",onChange:t[0]||(t[0]=(...v)=>n.fileSelected&&n.fileSelected(...v))},null,32)])])]),_:1},8,["title"])),o.uploaded?(i(),D(g,{key:2,apiEndpoint:o.apiUrl,updateParent:n.updateParent,"table-headings":o.tableHeadings,"button-text":o.buttonText,"import-id":o.importId,"expand-by-default":!0},null,8,["apiEndpoint","updateParent","table-headings","button-text","import-id"])):f("",!0)])}const dm=T(tm,[["render",rm]]);function cm(e){const{googleServiceKey:t,googleSecretKey:a}=e;let r={googleServiceKey:[t,"isRequired"],googleSecretKey:[a,"isRequired"]};const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}const um={name:"recaptcha-settings",description:"ReCaptcha Settings Page",data(){return{status:!1,type:"v2",typeOptions:"",statusOptions:[{name:"active",value:!0},{name:"inactive",value:!1}],googleServiceKey:"",googleSecretKey:"",applyfor:[],loading:!0,isDisabled:!1,checkboxOptions:[],verified:!0,recaptchaVerified:""}},beforeMount(){this.typeOptions=[{name:O("recaptcha")+" v2",value:"v2",hint:"v2_tooltip"},{name:O("recaptcha")+" v3",value:"v3",hint:"v3_tooltip"}],this.getValues()},methods:{verifyCaptcha(e){this.recaptchaVerified=e},getValues(){this.isDisabled=!0,L.get("/api/admin/recaptcha").then(e=>{let t=e.data.data;this.status=!!t.status,this.type=t.type?t.type:"v2",this.googleServiceKey=t.googleServiceKey,this.googleSecretKey=t.googleSecretKey,this.applyfor=t.applyfor,this.checkboxOptions=t.recaptchaOptions,this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1})},onChange(e,t){this[t]=e,(t==="googleServiceKey"||t==="type")&&(this.recaptchaVerified="",this.verified=!1,setTimeout(()=>{this.verified=!0},2e3))},isValid(){const{errors:e,isValid:t}=cm(this.$data);return t},verify(){this.showCaptcha=!0},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;let e={};e.status=this.status,e.type=this.type,e.google_service_key=this.googleServiceKey,e.google_secret_key=this.googleSecretKey,e.validate_secret_key=this.recaptchaVerified,e.apply_for=this.applyfor,L.post("/store/recaptcha",e).then(t=>{this.getValues(),N(t,"recaptcha-settings")}).catch(t=>{I(t,"recaptcha-settings"),t.response.data.message&&t.response.data.message.google_secret_key&&this.$store.dispatch("setValidationError",{googleSecretKey:"Secret Key is not valid"})}).finally(t=>{this.recaptchaVerified="",this.loading=!1,this.isDisabled=!1})}}},components:{"radio-button":Le,"text-field":oe,"check-box":mt,"recaptcha-field":_o}},cs=e=>(ee("data-v-79ebe28f"),e=e(),te(),e),hm={class:"col-sm-12"},_m={key:0,class:"row",id:"loader_margin"},mm={class:"row"},pm={class:"row"},fm={class:"row"},gm=cs(()=>s("br",null,null,-1)),vm={key:0,class:"row"},bm={class:"col-sm-6"},ym={class:"card-footer"},km=["disabled"],wm=cs(()=>s("i",{class:"fas fa-save"},null,-1));function Cm(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("radio-button"),g=c("text-field"),v=c("check-box"),b=c("recaptcha-field"),y=c("faveo-box");return i(),l("div",hm,[d(u,{componentName:"recaptcha-settings"}),d(y,{title:e.trans("recaptcha-settings")},{actions:k(()=>[s("div",ym,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=w=>n.onSubmit()),disabled:!o.recaptchaVerified},[wm,F(" "+h(e.trans("save")),1)],8,km)])]),default:k(()=>[s("div",null,[o.loading?(i(),l("div",_m,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.loading?f("",!0):(i(),l(A,{key:1},[s("div",mm,[d(p,{options:o.typeOptions,label:e.trans("recaptcha_type"),name:"type",value:o.type,onChange:n.onChange,classname:"form-group col-sm-6",hint:"recaptcha_type_tooltip"},null,8,["options","label","value","onChange"]),d(p,{options:o.statusOptions,label:e.trans("status"),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",pm,[d(g,{label:e.trans("googleServiceKey"),value:o.googleServiceKey,type:"text",name:"googleServiceKey",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{label:e.trans("googleSecretKey"),value:o.googleSecretKey,type:"text",name:"googleSecretKey",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])]),s("div",fm,[d(v,{options:o.checkboxOptions,name:"applyfor",value:o.applyfor,label:e.trans("apply_for"),onChange:n.onChange,classname:"col-sm-12"},null,8,["options","value","label","onChange"])]),s("div",null,[gm,o.verified?f("",!0):(i(),l("div",vm,[s("div",bm,[d(m,{"animation-duration":4e3,size:30})])])),o.verified&&o.googleServiceKey?(i(),D(b,{key:1,node:{},name:"recaptcha",siteKeyValue:o.googleServiceKey,captchaVersion:o.type,verifyCaptcha:n.verifyCaptcha},null,8,["siteKeyValue","captchaVersion","verifyCaptcha"])):f("",!0)])],64))])]),_:1},8,["title"])])}const Dm=T(um,[["render",Cm],["__scopeId","data-v-79ebe28f"]]),Sm={name:"login-log-settings",props:{days:{type:[String,Number],default:""}},data(){return{pageLoad:!1,day:this.days,daysOptions:[{name:"1 Day",id:1},{name:"7 Days",id:7},{name:"1 Month (30 Days)",id:30},{name:"2 Months (60 Days)",id:60},{name:"6 Months (180 Days)",id:180},{name:"1 Year (365 Days)",id:365}],labelStyle:{display:"none"}}},methods:{onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){this.pageLoad=!0;let e=sessionStorage.getItem("user_id");const t={};t.days=this.day,L.post("/api/delete-login-logs/days/"+e,t).then(a=>{this.pageLoad=!1,N(a,"login-log-settings")}).catch(a=>{this.pageLoad=!1,I(a,"login-log-settings")})}},components:{"static-select":xe}},$m={class:"col-sm-12"},Fm={class:"card card-light"},Mm={class:"card-header"},Tm={class:"card-title"},Em={class:"card-body"},Lm={class:"row"},Im={class:"col-sm-3"},Am=s("span",{class:"text-red"}," *",-1),qm={class:"card-footer"},Pm=s("i",{class:"fas fa-save"},null,-1),Vm={key:0,class:"row"};function Om(e,t,a,r,o,n){const u=c("alert"),m=c("static-select"),p=c("custom-loader");return i(),l("div",$m,[d(u,{componentName:"login-log-settings"}),s("div",Fm,[s("div",Mm,[s("h3",Tm,h(e.trans("login-log-setting")),1)]),s("div",Em,[s("div",Lm,[s("div",Im,[s("label",null,[F(h(e.trans("days_to_delete_login_logs"))+" ",1),Am])]),d(m,{label:e.trans("days_to_delete_login_logs"),strlength:"60",elements:o.daysOptions,hideEmptySelect:!0,name:"day",value:o.day,classname:"col-sm-4",onChange:n.onChange,required:!0,labelStyle:o.labelStyle},null,8,["label","elements","value","onChange","labelStyle"])])]),s("div",qm,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=g=>n.onSubmit())},[Pm,F(" "+h(e.trans("save")),1)])])]),o.pageLoad?(i(),l("div",Vm,[d(p,{duration:4e3})])):f("",!0)])}const Nm=T(Sm,[["render",Om]]);const xm={name:"client-filter-list",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","updated_at","action"],options:{},apiUrl:"/api/client/ticket-filter",isShowFilter:!1,isEditMode:!1,selectedId:0,totalFilters:0}),created(){window.emitter.on("filterToggleClicked",this.editFilter),window.emitter.on("ticketFilterSaved",this.updateTable)},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("actions")},columnsClasses:{name:"filter-name",created_at:"filter-time",updated_at:"filter-time",action:"filter-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:function(t,a){return e.h(Se,{data:a})}},sortable:["name","created_at","updated_at"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.totalFilters=t.data.filters.total,{data:t.data.filters.data.map(a=>(a.filter_toggle_url=!0,a.delete_url=e.basePath()+"/api/agent/ticket-filter/"+a.id,a)),count:t.data.filters.total}}}},methods:{toggleFilterView(){this.isShowFilter=!this.isShowFilter,this.isEditMode=!1,this.selectedId=0},editFilter(e){this.scrollToTarget("filter-settings"),this.isShowFilter?(this.isShowFilter=!1,setTimeout(()=>{this.isShowFilter=!0},1e3)):this.isShowFilter=!0,this.isEditMode=!0,this.selectedId=e.id},scrollToTarget(e){return mo(e)},updateTable(){this.isShowFilter=!1,this.isEditMode=!1,this.selectedId=0,window.emitter.emit("refreshData")}},components:{"ticket-filter":to}},Um={class:"col-sm-12",id:"filter-settings"},Rm={class:"card card-light"},jm={class:"card-header"},Bm={id:"client-filter-list",class:"card-title"},Hm={key:0,class:"card-tools"},zm=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Wm=[zm],Gm={class:"card-body",id:"my_client_filter_list"};function Ym(e,t,a,r,o,n){const u=c("alert"),m=c("ticket-filter"),p=c("data-table"),g=P("tooltip");return i(),l("div",Um,[d(u,{componentName:"dataTableModal"}),s("div",Rm,[s("div",jm,[s("h3",Bm,h(e.trans("client-filter-list")),1),!e.isEditMode&&e.totalFilters!==5?(i(),l("div",Hm,[S((i(),l("a",{class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...v)=>n.toggleFilterView&&n.toggleFilterView(...v))},Wm)),[[g,e.trans("client-filter-create")]])])):f("",!0)]),s("div",Gm,[e.isShowFilter?(i(),D(m,{key:0,showFilter:e.isShowFilter,closeFilterView:n.toggleFilterView,from:"clientFilter",isEditMode:e.isEditMode,selectedId:e.selectedId,divId:"my_client_filter_body",totalFilters:e.totalFilters},null,8,["showFilter","closeFilterView","isEditMode","selectedId","totalFilters"])):f("",!0),d(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"client-filter-list"},null,8,["url","dataColumns","option"])])])])}const Km=T(xm,[["render",Ym]]),Jm={components:{"status-switch":Oe},props:["data"],methods:{onChange(e,t){this.statusChange(t)},statusChange(e){axios.post("plugin/status/"+e).then(t=>{N(t,"dataTableModal"),setTimeout(()=>{window.emitter.emit("refreshData"),window.emitter.emit("updateSideNav")},10),(e=="ServiceDesk"||e=="TicketArchive")&&location.reload()}).catch(t=>{I(t,"dataTableModal")})}}},Qm={class:"btn-group"};function Xm(e,t,a,r,o,n){const u=c("status-switch");return i(),l("div",Qm,[(i(),D(u,{name:a.data.path,value:a.data.status,key:Math.random(),onChange:n.onChange},null,8,["name","value","onChange"]))])}const Zm=T(Jm,[["render",Xm]]);const ep={data(){return{apiUrl:"/getplugin",columns:["activate","name","description","version"],options:{headings:{activate:this.trans("status"),name:this.trans("name"),description:this.trans("description"),action:this.trans("action"),author:this.trans("author"),version:this.trans("version")},columnsClasses:{name:"name",description:"description",version:"version",activate:"activate"},perPage:25,sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},sortable:["name","version"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0},templates:{activate:function(e,t){return this.h(Zm,{data:t})},name:function(e,t){return t.status&&t.settings?this.h("a",{href:this.basePath()+"/admin/"+t.settings},t.name):t.name}},requestAdapter(e){return{sort_field:e.orderBy?e.orderBy:"status",sort_order:e.ascending?"desc":"asc",search_query:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data,count:e.total}}}}}},tp={class:"col-sm-12"},ap={class:"card card-light",id:"plugins-list"},sp={class:"card-header"},op={class:"card-title"},np={class:"card-body plugins_list"};function ip(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",tp,[d(u,{componentName:"dataTableModal"}),s("div",ap,[s("div",sp,[s("h3",op,h(e.lang("plugins-list")),1)]),s("div",np,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"plugins-list"},null,8,["url","dataColumns","option"])])])])}const lp=T(ep,[["render",ip]]),rp={name:"module-actions",props:{data:{type:Object,required:!0}},data(){return{loading:!1}},methods:{onChange(e,t){this.statusChange(e,t)},statusChange(e,t){this.loading=!0;let a={};a.current_module_name=t,a.current_module_status=e,axios.post("/api/change/modules/status",a).then(r=>{this.loading=!1,N(r,"dataTableModal"),window.emitter.emit("refreshData")}).catch(r=>{this.loading=!1,I(r,"dataTableModal")})}},components:{"status-switch":Oe}},dp={class:"btn-group"};function cp(e,t,a,r,o,n){const u=c("custom-loader"),m=c("status-switch");return i(),l("div",dp,[o.loading?(i(),D(u,{key:0})):f("",!0),(i(),D(m,{name:a.data.option_name,value:a.data.status,key:Math.random(),onChange:n.onChange},null,8,["name","value","onChange"]))])}const up=T(rp,[["render",cp]]),hp={name:"module-name",props:{data:{type:Object,required:!0}},components:{"tool-tip":Ae}};function _p(e,t,a,r,o,n){const u=c("tool-tip");return i(),l("p",null,[F(h(a.data.name)+" ",1),d(u,{message:a.data.tooltip,size:"small"},null,8,["message"])])}const mp=T(hp,[["render",_p]]);const pp={name:"modules-index",data(){return{apiUrl:"/api/getmodules",columns:["name","version","action"],options:{headings:{name:this.trans("name"),version:this.trans("version"),action:this.trans("action")},columnsClasses:{name:"mod-name",version:"mod-version",action:"mod-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},filterable:!1,sortable:[],pagination:{chunk:5,nav:"fixed",edge:!0},templates:{name:function(e,t){return this.h(mp,{data:t})},action:function(e,t){return this.h(up,{data:t})}},requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"status","sort-order":e.ascending?"desc":"asc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data,count:e.data.length}}}}}},fp={class:"col-sm-12"},gp={class:"card card-light",id:"modules-list"},vp={class:"card-header"},bp={class:"card-title"},yp={class:"card-body modules_list"};function kp(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",fp,[d(u,{componentName:"dataTableModal"}),s("div",gp,[s("div",vp,[s("h3",bp,h(e.lang("list_of_modules")),1)]),s("div",yp,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"modules-list"},null,8,["url","dataColumns","option"])])])])}const wp=T(pp,[["render",kp]]),Cp={name:"error-debug",data(){return{crashOptions:[{name:"yes",value:1},{name:"no",value:0}],modeOptions:[{name:"enable",value:1},{name:"disable",value:0}],debug:"",bugsnag_reporting:"",loading:!0,hasDataPopulated:!1,pageLoad:!1,valueChanged:!1}},beforeMount(){this.getValues()},methods:{getValues(e){L.get("/api/error-and-debugging-options").then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.valueChanged=!1;let a=t.data.data.options;this.debug=a.debug?1:0,this.bugsnag_reporting=a.bugsnag_reporting?1:0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t=="debug"&&(this.valueChanged=!0)},onSubmit(){this.$store.dispatch("unsetAlert"),this.pageLoad=!0;const e={};e.debug=this.debug?1:0,e.bugsnag=this.bugsnag_reporting?1:0,L.post("/api/error-and-debugging-options",e).then(t=>{this.pageLoad=!1,N(t,"error-debug"),this.getValues(),this.valueChanged&&this.redirect("/admin/error-and-debugging-options")}).catch(t=>{this.pageLoad=!1,I(t,"error-debug")})}},components:{"radio-button":Le}},Dp={class:"col-sm-12"},Sp={class:"card card-light"},$p={class:"card-header"},Fp={class:"card-title"},Mp={class:"card-body"},Tp={key:0,class:"row"},Ep={key:1,class:"row"},Lp={class:"card-footer"},Ip=s("i",{class:"fas fa-save"},null,-1),Ap={key:0,class:"row"};function qp(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("radio-button"),g=c("custom-loader");return i(),l("div",Dp,[d(u,{componentName:"error-debug"}),s("div",Sp,[s("div",$p,[s("h3",Fp,h(e.trans("debug-options")),1)]),s("div",Mp,[!o.hasDataPopulated||o.loading?(i(),l("div",Tp,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l("div",Ep,[d(p,{options:o.modeOptions,label:e.trans("debugging"),name:"debug",value:o.debug,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),d(p,{options:o.crashOptions,label:e.trans("bugsnag-debugging"),name:"bugsnag_reporting",value:o.bugsnag_reporting,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])):f("",!0)]),s("div",Lp,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=v=>n.onSubmit())},[Ip,F(" "+h(e.trans("save")),1)])])]),o.pageLoad?(i(),l("div",Ap,[d(g,{duration:4e3})])):f("",!0)])}const Pp=T(Cp,[["render",qp]]),Vp={name:"detailed-logs",description:"Logs component",props:{data:{type:String,required:!0},scenario:{type:String,required:!0},info:{type:Array,default:()=>[]}},beforeMount(){app.component("parsed-data",{props:["dataValue"],template:'<div v-html="loadData()"></div>',methods:{loadData(){const a=new DOMParser().parseFromString(this.dataValue,"text/html").querySelector("body");return Array.from(a.querySelectorAll("a")).forEach(o=>{const n=o.getAttribute("href");if(n&&n.includes(this.basePath())){const u=n.replace(this.basePath(),"").split("/").filter(Boolean);u[0]==="check-ticket"?o.setAttribute("target","_blank"):["department","team","service-desk/products","service-desk/vendor"].includes(u[0])&&(o.setAttribute("target","_blank"),o.setAttribute("href",`${this.basePath()}/admin`),o.title==="mention_link"&&(o.setAttribute("data-id","mention_link"),o.removeAttribute("title")))}o.setAttribute("target","_blank")}),a.innerHTML}}})},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{Modal:Ge}},Op={id:"log"},Np={class:"label label-default"},xp={class:"modal-title"},Up={id:"log_desc"},Rp={class:"table table-bordered table-striped"};function jp(e,t,a,r,o,n){const u=c("parsed-data"),m=c("modal");return i(),l("div",null,[s("p",Op,[d(u,{dataValue:a.data},null,8,["dataValue"]),a.info.length>0?(i(),l("a",{key:0,id:"logs_read_more",href:"javascript:;",onClick:t[0]||(t[0]=p=>o.showModal=!0)},[s("span",Np,h(e.lang("read-more")),1)])):f("",!0)]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(m,{key:0,showModal:o.showModal,onClose:n.onClose,containerStyle:{width:"500px"}},{title:k(()=>[s("h4",xp,h(e.lang("detailed_log_info")),1)]),fields:k(()=>[s("div",Up,[s("table",Rp,[s("tbody",null,[(i(!0),l(A,null,G(a.info,p=>(i(),l("tr",null,h(p),1))),256))])])])]),_:1},8,["showModal","onClose"])):f("",!0)]),_:1})])}const ma=T(Vp,[["render",jp]]);const Bp={name:"mail-hover",description:"Mail hover component",setup(){const e=ce();return{getUserData:ae(()=>e.getters.getUserData)}},props:{data:{type:Object,required:!0},objectKey:{type:String,required:!0}},data(){return{popId:"",user_data:{},base:"",loading:!0,hasDataPopulated:!1,showAlert:!1,err_message:""}},computed:{formattedData(){if(!Array.isArray(this.data[this.objectKey])){let e=Object.assign({},this.data);return e[this.objectKey]=[this.data[this.objectKey]],e}return this.data}},watch:{popId(e,t){return e},getUserData(e,t){return this.base=e.system_url,e}},beforeMount(){this.getUserData.system_url&&(this.base=this.getUserData.system_url)},methods:{popOver(e){this.popId=e},getData(e,t){this.user_data="",this.showAlert=!1,this.loading=!0,this.popId=t,L.get("/api/get-user-by-email?email="+e).then(a=>{this.showAlert=!1,this.user_data=a.data.data.user,this.loading=!1,this.hasDataPopulated=!0}).catch(a=>{this.loading=!1,this.showAlert=!0,this.err_message=a.response.data.message})},subString(e){return nt(e,30)}}},Hp=["onClick"],zp={key:0},Wp={class:"text-muted"},Gp={key:1},Yp={key:2,class:"box-widget widget-user-2 cus-container"},Kp={class:"widget-user-header bg-info custom-head"},Jp={class:"widget-user-image"},Qp={class:"fas fa-eye float-right cus-icon"},Xp=["href"],Zp={class:"fas fa-eye float-right cus-icon"},ef={class:"widget-user-username custom-name"},tf={class:"card-footer p-0"},af={class:"nav flex-column"},sf={class:"nav-item"},of={href:"javascript:;",class:"nav-link text-dark"},nf={class:"float-right"},lf={class:"nav-item"},rf={href:"javascript:;",class:"nav-link text-dark"},df={class:"float-right"};function cf(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("faveo-image-element"),p=c("router-link"),g=c("popover"),v=P("tooltip");return i(),l("div",{id:"main",onMouseenter:t[0]||(t[0]=b=>n.popOver(a.data.id)),onMouseleave:t[1]||(t[1]=b=>n.popOver(null))},[(i(!0),l(A,null,G(n.formattedData[a.objectKey],(b,y)=>(i(),D(g,{key:y,arrow:"",placement:"bottom"},{content:k(()=>[o.showAlert===!0&&o.loading===!1?(i(),l("div",zp,[s("p",Wp,h(o.err_message),1)])):f("",!0),o.loading===!0?(i(),l("div",Gp,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),o.hasDataPopulated===!0&&o.loading===!1&&o.showAlert===!1?(i(),l("div",Yp,[s("div",Kp,[s("div",Jp,[d(m,{id:"user_img","source-url":o.user_data.profile_pic,classes:["img-circle w-40","img-responsive"],"alternative-text":"User Image","img-width":40,"img-height":40},null,8,["source-url"]),o.user_data.role=="System Configured Mail"?(i(),D(p,{key:0,to:o.user_data.profile_link.replace(e.basePath(),""),target:"_blank"},{default:k(()=>[S(s("i",Qp,null,512),[[v,e.lang("view")]])]),_:1},8,["to"])):(i(),l("a",{key:1,href:o.user_data.profile_link,target:"_blank"},[S(s("i",Zp,null,512),[[v,e.lang("view")]])],8,Xp))]),s("h3",ef,[S((i(),l("span",null,[F(h(n.subString(o.user_data.name)),1)])),[[v,o.user_data.name]])])]),s("div",tf,[s("ul",af,[s("li",sf,[s("a",of,[F(h(e.lang("email"))+" ",1),S((i(),l("span",nf,[F(h(n.subString(o.user_data.email)),1)])),[[v,o.user_data.email]])])]),s("li",lf,[s("a",rf,[F(h(e.lang("Role"))+" ",1),S((i(),l("span",df,[F(h(n.subString(o.user_data.role)),1)])),[[v,o.user_data.role]])])])])])])):f("",!0)]),default:k(()=>[s("a",{id:"action_mail",href:"javascript:;",onClick:w=>n.getData(b,n.formattedData.id)},h(b)+"   ",9,Hp)]),_:2},1024))),128))],32)}const Rt=T(Bp,[["render",cf]]);const uf={name:"referee-id",description:"Referee id component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{refereeParser(e){return e.replace(this.basePath(),this.basePath()+"/panel")}}},hf=["innerHTML"];function _f(e,t,a,r,o,n){return i(),l("div",{class:"log-mail-referee-id",id:"referee_id",innerHTML:n.refereeParser(a.data.referee_id)},null,8,hf)}const mf=T(uf,[["render",_f]]);const pf={name:"logs-modal",description:"Logs Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object,default:()=>{}},title:{type:String,default:""},hideCheckBox:{type:Boolean}},data:()=>({containerStyle:{width:"950px"},shouldHideCheckBox:!0,loading:!0,size:60,lang_locale:"",content:"",mail_message:"",isDisabled:!0,delete_after_date:"",delete_before_date:"",timeOptions:{start:"00:00",step:"00:30",end:"23:30"},checkOptions:[{name:"cron",value:"cron"},{name:"mail",value:"mail"},{name:"exception",value:"exception"}],logs:[]}),beforeMount(){this.checkTitle()},created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{contentParser(e){var t=new DOMParser,a=t.parseFromString(e,"text/html");const r=a.getElementsByTagName("body")[0];return r.querySelectorAll("a").forEach(n=>{let m=n.href.replace(this.basePath(),"").split("/").filter(p=>p);if(m[0]=="change-approval"||m[0]=="service-desk"&&m[1]=="contract-approval")n=n;else{const p=a.createElement("a");!n.href.includes("/panel/")&&!n.href.includes("/ticket-conversation/")&&!n.href.includes("/agent/export/download/")&&!n.href.includes("/check-ticket/")?p.setAttribute("href",n.href.replace(this.basePath(),this.basePath()+"/panel")):p.setAttribute("href",n.href),p.innerText=n.innerText,n.parentNode.replaceChild(p,n)}}),r.innerHTML},checkTitle(){this.title!=="delete_logs"?this.title==="logs_content"?this.getLogsContent(this.data.id):(this.content=this.data.trace,this.containerStyle.width="1000px",this.loading=!1):this.loading=!1},getLogsContent(e){L.get("/api/get-log-mail-body/"+e).then(t=>{this.loading=!1,this.content=this.contentParser(t.data.data.mail_body.replaceAll(`<br />\r
`,"")),this.mail_message=t.data.message}).catch(t=>{this.loading=!1})},onChange(e,t){this[t]=e,t==="logs"&&(this.isDisabled=e.length===0)},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e.categories=this.logs,e.delete_before=this.delete_before_date!==""&&this.delete_before_date!==null?fe(this.delete_before_date).format("YYYY-MM-DD HH:mm:ss"):"",e.delete_after=this.delete_after_date!==""&&this.delete_after_date!==null?fe(this.delete_after_date).format("YYYY-MM-DD HH:mm:ss"):"",L.delete("/api/delete-logs",{data:e}).then(t=>{N(t,"dataTableModal"),window.emitter.emit("cronLogsrefreshData"),window.emitter.emit("mailLogsrefreshData"),window.emitter.emit("exceptionLogsrefreshData"),this.onClose(),this.loading=!1,this.isDisabled=!0}).catch(t=>{I(t,"dataTableModal")})}},components:{"date-time-field":Qe,"check-box":mt}},ff={class:"modal-title"},gf={key:0,class:"row"},vf={key:1,class:"mod_width"},bf=["innerHTML"],yf={key:2,class:"span"},kf=s("br",null,null,-1),wf=["innerHTML"],Cf={key:3,class:"row"},Df={key:0},Sf=["disabled"],$f=s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1);function Ff(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("date-time-field"),p=c("check-box"),g=c("modal");return i(),l("div",null,[a.showModal?(i(),D(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",ff,h(e.lang(a.title)),1)]),fields:k(()=>[e.loading?(i(),l("div",gf,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):f("",!0),!e.loading&&a.title!=="delete_logs"?(i(),l("div",vf,[s("p",{innerHTML:e.content,class:x([{trace:a.title==="trace"}])},null,10,bf)])):f("",!0),e.mail_message!=""?(i(),l("div",yf,[kf,s("span",{innerHTML:e.mail_message},null,8,wf)])):f("",!0),!e.loading&&a.title==="delete_logs"?(i(),l("div",Cf,[d(m,{id:"log_delete_date1",label:e.lang("delete_after"),value:e.delete_after_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_after_date",required:!1,onChange:n.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),d(m,{id:"log_delete_date2",label:e.lang("delete_before"),value:e.delete_before_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_before_date",required:!1,onChange:n.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),a.hideCheckBox?f("",!0):(i(),D(p,{key:0,id:"log_delete_checkbox",options:e.checkOptions,label:e.lang("logs"),name:"logs",value:e.logs,onChange:n.onChange,classname:"col-sm-6",class_name:"col-sm-4"},null,8,["options","label","value","onChange"]))])):f("",!0)]),controls:k(()=>[a.title==="delete_logs"?(i(),l("div",Df,[s("button",{id:"log_delete_btn",type:"button",onClick:t[0]||(t[0]=v=>n.onSubmit()),class:"btn btn-danger",disabled:e.isDisabled},[$f,F(" "+h(e.lang("delete")),1)],8,Sf)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Qt=T(pf,[["render",Ff]]),Mf={name:"mail-subject",description:"shows mail subject as a clickable link which gives mail body on click",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},getMailBody(){this.showModal=!0}},components:{"logs-modal":Qt}};function Tf(e,t,a,r,o,n){const u=c("logs-modal");return i(),l("div",null,[s("a",{href:"javascript:;",id:"log-mail-subject",onClick:t[0]||(t[0]=(...m)=>n.getMailBody&&n.getMailBody(...m))},h(a.data.subject),1),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,data:a.data,title:"logs_content"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const Ef=T(Mf,[["render",Tf]]);const Lf={name:"exception-detail-modal",description:"Logs exception detail component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,required:!0},data:{type:Object,required:!0}},data:()=>({containerStyle:{width:"800px"}})},Et=e=>(ee("data-v-9165c816"),e=e(),te(),e),If={class:"modal-title"},Af={style:{"font-size":"small"}},qf=Et(()=>s("br",null,null,-1)),Pf=Et(()=>s("br",null,null,-1)),Vf=Et(()=>s("br",null,null,-1)),Of=Et(()=>s("br",null,null,-1)),Nf=["innerHTML"];function xf(e,t,a,r,o,n){const u=c("modal");return i(),l("div",null,[a.showModal?(i(),D(u,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",If,h(e.lang("exception_details")),1)]),fields:k(()=>[s("samp",Af,[s("strong",null,h(e.lang("message"))+":",1),F(),s("span",null,h(a.data.message),1),qf,Pf,s("strong",null,h(e.lang("file"))+":",1),F(),s("span",null,h(a.data.file)+"("+h(a.data.line)+")",1),Vf,Of,s("strong",null,h(e.lang("trace"))+":",1),s("p",{innerHTML:a.data.trace,class:"trace"},null,8,Nf)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Uf=T(Lf,[["render",xf],["__scopeId","data-v-9165c816"]]);const Rf={name:"log-status",description:"status of the log",components:{"exception-detail-modal":Uf},props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},computed:{badgeClass(){switch(this.data.status){case"sent":case"accepted":case"completed":return"btn-success";case"queued":case"running":case"pending":return"btn-warning";case"rejected":case"failed":case"blocked":return"btn-danger";case"attachment-removed":return"btn-danger";default:return"btn-default"}},getStatusTitle:function(){let e=zs.toLower(this.trans(this.data.status));return this.data.exception?e+this.trans("click_to_view_exception"):this.trans(this.data.status)}},methods:{onClose(){this.showModal=!1}}},jf=["id"];function Bf(e,t,a,r,o,n){const u=c("exception-detail-modal"),m=P("tooltip");return i(),l("div",null,[S((i(),l("span",{id:"log-status-"+a.data.id,class:x(["badge",n.badgeClass,"log-status","text-uppercase"]),onClick:t[0]||(t[0]=p=>o.showModal=!!a.data.exception),style:Be(a.data.exception?{cursor:"pointer"}:{})},[F(h(e.lang(a.data.status)),1)],14,jf)),[[m,n.getStatusTitle]]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,data:a.data.exception},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const us=T(Rf,[["render",Bf]]);const Hf={props:{columns:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},apiUrl:{type:String,default:""},id:{type:String,default:""},componentTitle:{type:String,default:""},sender_mails:{type:Array,default:()=>[]},reciever_mails:{type:Array,default:()=>[]}},data(){return{apiEndpoint:this.apiUrl+"&sender_mails="+this.sender_mails+"&reciever_mails="+this.reciever_mails}},watch:{sender_mails(e,t){let a=this.reciever_mails.map(o=>o.email),r=e.map(o=>o.email);return this.apiEndpoint=this.apiUrl+"&sender_mails="+r+"&reciever_mails="+a,e},reciever_mails(e,t){let a=this.sender_mails.map(o=>o.email),r=e.map(o=>o.email);return this.apiEndpoint=this.apiUrl+"&sender_mails="+a+"&reciever_mails="+r,e},apiEndpoint(e,t){return e}}},zf={class:"col-md-12"};function Wf(e,t,a,r,o,n){const u=c("data-table");return i(),l("div",zf,[o.apiEndpoint?(i(),D(u,{key:0,id:"logs_table",url:o.apiEndpoint,dataColumns:a.columns,option:a.options,scroll_to:a.id,componentTitle:a.componentTitle},null,8,["url","dataColumns","option","scroll_to","componentTitle"])):f("",!0)])}const Xt=T(Hf,[["render",Wf],["__scopeId","data-v-47e4b59a"]]),Gf={name:"retry-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object}},data:()=>({isDisabled:!1,containerStyle:{width:"500px"},loading:!1}),methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,L.get("/retry/mail-log/"+this.data.id).then(e=>{this.loading=!1,this.isDisabled=!1,N(e,"dataTableModal"),window.emitter.emit("mailLogsrefreshData"),window.emitter.emit("retryLogActionPerformed"),this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,I(e,"dataTableModal")})}}},Yf={class:"modal-title"},Kf={key:0},Jf={key:1,class:"row"},Qf=["disabled"],Xf=s("i",{class:"fas fa-redo","aria-hidden":"true"},null,-1);function Zf(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",Yf,h(e.lang("retry")),1)]),fields:k(()=>[e.loading?f("",!0):(i(),l("div",Kf,[s("span",null,h(e.lang("are_you_sure")),1)])),e.loading?(i(),l("div",Jf,[d(u,{"animation-duration":4e3,color:"#1d78ff"})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=p=>n.onSubmit()),class:"btn btn-primary",disabled:e.isDisabled},[Xf,F(" "+h(e.lang("retry")),1)],8,Qf)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const eg=T(Gf,[["render",Zf]]);const tg={setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/mail",columns:["category","sender_mail","reciever_mail","collaborators","subject","referee_id","referee_type","created_at","updated_at","status","action"],options:{},reciever_mails:[],sender_mails:[],moment:fe,showModal:!1,data:{}}},beforeMount(){let e=this.created_at?fe(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/mail?category_id="+this.category.id+"&status="+this.status+"&created_at="+e;const t=this;this.options={headings:{category:this.trans("category"),subject:this.trans("subject"),sender_mail:this.trans("sender_mail"),reciever_mail:this.trans("reciever_mail"),collaborators:this.trans("collaborators"),referee_id:this.trans("referee_id"),referee_type:this.trans("referee_type"),created_at:this.trans("created-at"),updated_at:this.trans("updated-at"),status:this.trans("status")},perPageValues:[10,25,50,100,200,500,1e3,2e3],sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headingTooltips:{category:"Category"},columnsClasses:{category:"mail-category",subject:"mail-subject",sender_mail:"mail-sender",reciever_mail:"mail-receiver",referee_id:"mail-refree",referee_type:"mail-refree-type",created_at:"mail-created",updated_at:"mail-updated",status:"log-status"},texts:{filter:"",limit:""},templates:{category(a,r){return r.category.name},created_at(a,r){return t.formattedTime(r.created_at)},updated_at(a,r){return t.formattedTime(r.updated_at)},sender_mail:(a,r)=>t.h(Rt,{data:r,objectKey:"sender_mail"}),reciever_mail:(a,r)=>t.h(Rt,{data:r,objectKey:"reciever_mail"}),referee_id:(a,r)=>t.h(mf,{data:r}),status:(a,r)=>t.h(us,{data:r}),subject:(a,r)=>t.h(Ef,{data:r}),collaborators:(a,r)=>t.h(Rt,{data:r,objectKey:"collaborators"}),action:function(a,r){let o=t.h("i",{class:"fas fa-redo"});return t.h("button",{class:"btn btn-default btn-sm",disabled:!r.is_retry,title:this.trans("retry_log"),onClick(n){t.onClick(r)}},[o])}},sortable:["category","referee_id","referee_type","sender_mail","reciever_mail","subject","source","created_at","updated_at","status"],filterable:["category","referee_id","referee_type","sender_mail","reciever_mail","subject","source","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}}}},methods:{onChange(e,t){this[t]=e},refreshTable(){window.emitter.emit("mailLogsrefreshData")},onClick(e){this.data=e,this.showModal=!0},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"logs-table":Xt,"dynamic-select":Me,"mail-retry-modal":eg}},ag={class:"card-tools",style:{cursor:"pointer"},id:"mail_logs_table"},sg={class:"row"},og={class:"row mail-log-table"};function ng(e,t,a,r,o,n){const u=c("dynamic-select"),m=c("logs-table"),p=c("mail-retry-modal"),g=c("faveo-box"),v=P("tooltip");return i(),D(g,{title:e.lang("mail_logs")},{headerMenu:k(()=>[s("div",ag,[s("span",null,[S(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=b=>n.refreshTable())},null,512),[[v,e.lang("refresh")]])])])]),default:k(()=>[s("div",sg,[d(u,{label:e.lang("sender"),id:"sender-select-box",multiple:!0,name:"sender_mails",required:!1,prePopulate:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/users?meta=true&supplements=true",value:o.sender_mails,onChange:n.onChange},null,8,["label","value","onChange"]),d(u,{label:e.lang("receiver"),id:"reciever-select-box",multiple:!0,name:"reciever_mails",required:!1,prePopulate:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/users?meta=true&supplements=true",value:o.reciever_mails,onChange:n.onChange},null,8,["label","value","onChange"])]),s("div",og,[o.options.length?f("",!0):(i(),D(m,{key:0,id:"mail_logs_table",sender_mails:o.sender_mails,reciever_mails:o.reciever_mails,columns:o.columns,options:o.options,apiUrl:o.apiUrl,componentTitle:"mailLogs"},null,8,["sender_mails","reciever_mails","columns","options","apiUrl"]))]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(p,{key:0,onClose:n.onClose,showModal:o.showModal,data:o.data},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})]),_:1},8,["title"])}const ig=T(tg,[["render",ng]]);const lg={name:"logs-trace",description:"Logs trace component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},subStr(e,t){return nt(e,t)}},components:{"logs-modal":Qt}},rg={id:"logs_trace"},dg={class:"label label-default"};function cg(e,t,a,r,o,n){const u=c("logs-modal");return i(),l("div",null,[s("p",rg,[F(h(n.subStr(a.data.trace,40))+" ",1),s("a",{id:"logs_read_more",href:"javascript:;",onClick:t[0]||(t[0]=m=>o.showModal=!0)},[s("span",dg,h(e.lang("read-more")),1)])]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,data:a.data,title:"trace"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const ug=T(lg,[["render",cg]]);const hg={setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/exception",columns:["category","file","line","message","trace","created_at"],options:{},moment:fe}},beforeMount(){let e=this.created_at?fe(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/exception?category_id="+this.category.id+"&created_at="+e;const t=this;this.options={headings:{category:this.lang("category"),file:this.lang("file"),line:this.lang("line"),message:this.lang("message"),trace:this.lang("trace"),created_at:this.lang("created-at")},columnsClasses:{category:"log-category",file:"log-file",line:"log-line",trace:"log-trace",message:"log-message",created_at:"log-created"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{category(a,r){return r.category.name},created_at(a,r){return t.formattedTime(r.created_at)},trace:(a,r)=>t.h(ug,{data:r})},sortable:["category","file","line","trace","message","created_at"],filterable:["category","file","line","trace","message","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}}}},methods:{refreshTable(){window.emitter.emit("exceptionLogsrefreshData")}},components:{"logs-table":Xt}},_g={class:"card-tools",style:{cursor:"pointer"}},mg={class:"row exception-log-table"};function pg(e,t,a,r,o,n){const u=c("logs-table"),m=c("faveo-box"),p=P("tooltip");return i(),D(m,{title:e.lang("exception_logs")},{headerMenu:k(()=>[s("div",_g,[s("span",null,[S(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=g=>n.refreshTable())},null,512),[[p,e.lang("refresh")]])])])]),default:k(()=>[s("div",mg,[o.options.length?f("",!0):(i(),D(u,{key:0,id:"exception_logs_title",columns:o.columns,options:o.options,apiUrl:o.apiUrl,componentTitle:"exceptionLogs"},null,8,["columns","options","apiUrl"]))])]),_:1},8,["title"])}const fg=T(hg,[["render",pg]]);const gg={setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/cron",columns:["command","description","duration","created_at","status"],options:{},moment:fe}},beforeMount(){let e=this.created_at?fe(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/cron?command="+this.category.command+"&status="+this.status+"&created_at="+e;const t=this;this.options={headings:{duration:this.trans("duration_in_seconds"),command:this.trans("command"),description:this.trans("description"),created_at:this.trans("created_at"),status:this.trans("status")},columnsClasses:{command:"cron-command",description:"cron-desc",duration:"cron-duration",created_at:"cron-created",status:"cron-status"},texts:{filter:"",limit:""},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{created_at(a,r){return t.formattedTime(r.created_at)},status:(a,r)=>t.h(us,{data:r})},sortable:["command","description","duration","created_at","status"],filterable:["category","start_time","end_time","message","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}}}},methods:{refreshTable(){window.emitter.emit("cronLogsrefreshData")}},components:{"logs-table":Xt}},vg={class:"card-tools",style:{cursor:"pointer"}},bg={class:"row"};function yg(e,t,a,r,o,n){const u=c("logs-table"),m=c("faveo-box"),p=P("tooltip");return i(),D(m,{title:e.lang("cron_logs")},{headerMenu:k(()=>[s("div",vg,[s("span",null,[S(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=g=>n.refreshTable())},null,512),[[p,e.lang("refresh")]])])])]),default:k(()=>[s("div",bg,[o.options.length?f("",!0):(i(),D(u,{key:0,id:"cron_logs_title",columns:o.columns,options:o.options,apiUrl:o.apiUrl,componentTitle:"cronLogs"},null,8,["columns","options","apiUrl"]))])]),_:1},8,["title"])}const kg=T(gg,[["render",yg]]),wg={name:"healthcheck-table",props:{category:{type:Object,default:()=>{}},logType:{type:String,default:""},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"mail-logs":ig,"exception-logs":fg,"cron-logs":kg,"logs-modal":Qt}},Cg={class:"col-sm-12"},Dg={class:"card-tools"},Sg=s("i",{class:"fas fa-trash"},null,-1),$g=[Sg];function Fg(e,t,a,r,o,n){const u=c("alert"),m=c("cron-logs"),p=c("mail-logs"),g=c("exception-logs"),v=c("faveo-box"),b=c("logs-modal"),y=P("tooltip");return i(),l("div",Cg,[d(u,{componentName:"dataTableModal"}),d(v,{title:e.lang("logs")},{headerMenu:k(()=>[s("div",Dg,[S((i(),l("button",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=w=>o.showModal=!0)},$g)),[[y,e.lang("delete_logs")]])])]),default:k(()=>[a.logType=="cron"?(i(),D(m,{key:0,category:a.category,status:a.status,created_at:a.created_at},null,8,["category","status","created_at"])):f("",!0),a.logType=="mail"?(i(),D(p,{key:1,category:a.category,status:a.status,created_at:a.created_at},null,8,["category","status","created_at"])):f("",!0),a.logType=="exception"?(i(),D(g,{key:2,category:a.category,created_at:a.created_at},null,8,["category","created_at"])):f("",!0)]),_:1},8,["title"]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(b,{key:0,title:"delete_logs",onClose:n.onClose,showModal:o.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])}const Mg=T(wg,[["render",Fg]]),Tg={name:"log-modal",description:"Logs Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object,default:()=>{}},title:{type:String,default:""}},data:()=>({containerStyle:{width:"950px"},loading:!1,size:60,delete_after_date:"",delete_before_date:"",timeOptions:{start:"00:00",step:"00:30",end:"23:30"},isDisabled:!0,systemLogs:["systemLogs"]}),created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{onChange(e,t){this[t]=e;const a=this.delete_after_date||this.delete_before_date;this.isDisabled=!a},onSubmit(){this.loading=!0;const e={};e.categories=this.systemLogs,e.delete_before=this.delete_before_date!==""&&this.delete_before_date!==null?fe(this.delete_before_date).format("YYYY-MM-DD HH:mm:ss"):"",e.delete_after=this.delete_after_date!==""&&this.delete_after_date!==null?fe(this.delete_after_date).format("YYYY-MM-DD HH:mm:ss"):"",L.delete("/api/delete/logs",{data:e}).then(t=>{N(t,"dataTableModal"),window.location.reload(),this.onClose(),this.loading=!1}).catch(t=>{I(t,"dataTableModal")})}},components:{"date-time-field":Qe}},Eg={class:"modal-title"},Lg={key:0,class:"row"},Ig={class:"row"},Ag={key:0},qg=["disabled"],Pg=s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1);function Vg(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("date-time-field"),p=c("modal");return i(),l("div",null,[a.showModal?(i(),D(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",Eg,h(e.lang(a.title)),1)]),fields:k(()=>[e.loading?(i(),l("div",Lg,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):f("",!0),s("div",Ig,[d(m,{id:"log_delete_date1",label:e.lang("delete_from"),value:e.delete_after_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_after_date",required:!1,onChange:n.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-4",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),d(m,{id:"log_delete_date2",label:e.lang("delete_to"),value:e.delete_before_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_before_date",required:!1,onChange:n.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-4",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"])])]),controls:k(()=>[a.title==="delete_logs"?(i(),l("div",Ag,[s("button",{id:"log_delete_btn",type:"button",onClick:t[0]||(t[0]=g=>n.onSubmit()),class:"btn btn-danger",disabled:e.isDisabled},[Pg,F(" "+h(e.lang("delete")),1)],8,qg)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const pa=T(Tg,[["render",Vg]]),Og={name:"system-activity-logs",description:"System Activity Logs",setup(){const e=ce();return{params:"",formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({hasData:!1,showModal:!1,isShowFilter:!1,columns:["module","event","role","performed_by","created_at","description"],options:{},apiUrl:"api/activitylogs",appliedFilters:{},filterOptions:[{section:[{name:"log_name",url:"api/module/list",label:"module",className:"col-sm-4"},{name:"event",url:"api/event/list",label:"event",className:"col-sm-4"},{name:"performed_by",url:"api/performedby/list",label:"performed_by",className:"col-sm-4"}]},{section:[{name:"created_at",type:"date",label:["created_at","created_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0}]}]}),created(){window.emitter.on("updateFilter",this.updateFilter)},computed:{apiEndPoint(){return this.apiUrl}},beforeMount(){this.filterData(),axios.get(this.apiUrl+"?sort-field=id").then(t=>{this.hasData=t.data.data.total});const e=this;this.options={headings:{module:this.trans("module"),event:this.trans("event"),role:this.trans("role"),created_at:this.trans("created_at"),performed_by:this.trans("performed_by"),description:this.trans("description")},columnClasses:{module:"module",event:"event",role:"role",created_at:"created-at",performed_by:"performed-by",description:"description"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{module(t,a){return a.log_name},event:function(t,a){let r=e.h("span",{class:a.event!=="Created"?a.event==="Updated"?"btn btn-warning btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal":"btn btn-success btn-xs pointer_normal"},a.event);return e.h("a",{class:"pointer_normal"},[r])},role(t,a){return a.causer?a.causer.role:"---"},performed_by(t,a){return a.performed_by?this.h(po,{data:a.performed_by}):"---"},created_at(t,a){return e.formattedTime(a.created_at)},description(t,a){return a.description?this.h(ma,{data:a.description,info:a.detailed_properties,scenario:a.event}):"---"}},sortable:["module","event","created_at"],filterable:["module","event","role"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>a),count:t.data.total}}}},methods:{onClose(){this.showModal=!1},showDeleteModal(){this.showModal=!0},updateFilter(e){this.filterOptions.map(function(t){t.section.map(function(a){e.name===a.name&&(a.value=e.value)})})},filterData(){this.filterOptions.map(function(e){e.section.map(function(t){t.elements=[],t.isMultiple=!0,t.isPrepopulate=!1,t.value="",t.className="col-sm-4"})})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.apiUrl="api/activitylogs",this.filterOptions=this.filterOptions.map(function(e){return{section:e.section.map(function(t){return t.elements=[],t.isMultiple=!0,t.isPrepopulate=!1,t.value="",t.className="col-sm-4",t})}}),this.isShowFilter=!0},applyFilter(e){this.appliedFilters=e;let t="api/activitylogs?",a="";if(e.log_name&&(a=this.commonMethod(0,0,"module",e.log_name,a)),e.event&&(a=this.commonMethod(0,1,"event",e.event,a)),e.performed_by&&(a=this.commonMethod(0,2,"performed_by",e.performed_by,a)),e.created_at){e=e.created_at;let r="";if(e.includes("last"))r=e;else{let o=kt(e[0]).format("YYYY-MM-DD HH:mm:ss"),n=kt(e[1]).format("YYYY-MM-DD HH:mm:ss");r="date::"+o+"~"+n}a+="created_at="+r+"&"}a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1,this.params=a},commonMethod(e,t,a,r,o){var n;return n=o,this.filterOptions[e].section[t].value=r,r.forEach(function(u,m){n+=a+"["+m+"]="+(a==="performed_by"?u.id:u.name)+"&"}),n},toggleFilterView(){this.isShowFilter=!this.isShowFilter},triggerExport(){axios.get("/api/export/logs?"+this.params).then(e=>{N(e,"dataTableModal")}).catch(e=>{I(e,"dataTableModal")})}},components:{LogModal:pa,DataTableFilter:yo,DeleteLog:pa,DataTableActions:Se,DetailedLog:ma,HyperLinkInstance:ao,TableView:Mg}},Ng={class:"col-sm-12"},xg={class:"card card-light"},Ug={class:"card-header"},Rg={id:"system-log-list",class:"card-title"},jg={class:"card-tools"},Bg=s("i",{class:"fas fa-trash"},null,-1),Hg=[Bg],zg=s("i",{class:"glyphicon glyphicon-filter"},null,-1),Wg=[zg],Gg=s("i",{class:"fas fa-paper-plane"},null,-1),Yg=[Gg],Kg={class:"card-body",id:"system-log-list"};function Jg(e,t,a,r,o,n){const u=c("alert"),m=c("data-table-filter"),p=c("data-table"),g=c("log-modal"),v=P("tooltip");return i(),l("div",Ng,[d(u,{componentName:"dataTableModal"}),s("div",xg,[s("div",Ug,[s("h3",Rg,h(e.lang("list_of_system_logs")),1),s("div",jg,[S((i(),l("button",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=(...b)=>n.showDeleteModal&&n.showDeleteModal(...b))},Hg)),[[v,e.lang("delete_logs")]]),S((i(),l("button",{class:"btn btn-tool",onClick:t[1]||(t[1]=(...b)=>n.toggleFilterView&&n.toggleFilterView(...b)),href:"javascript:;"},Wg)),[[v,e.trans("filter")]]),e.hasData?S((i(),l("button",{key:0,class:"btn btn-tool",onClick:t[2]||(t[2]=(...b)=>n.triggerExport&&n.triggerExport(...b)),href:"javascript:;"},Yg)),[[v,e.trans("export")]]):f("",!0)])]),s("div",Kg,[S(d(m,{id:"filter-box",metaData:e.filterOptions,updateFields:e.updateFilterFields,appliedFilters:e.appliedFilters,onSelectedFilters:n.selectedFilters},null,8,["metaData","updateFields","appliedFilters","onSelectedFilters"]),[[We,e.isShowFilter]]),d(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"system-level-activity"},null,8,["url","dataColumns","option"]),d(ye,{name:"modal"},{default:k(()=>[e.showModal?(i(),D(g,{key:0,title:"delete_logs",hideCheckBox:!0,onClose:n.onClose,showModal:e.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])])])}const Qg=T(Og,[["render",Jg]]);const Xg={name:"system-update-modal",description:"System Update Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},space:{type:String,default:""},path:{type:String,default:""}},data(){return{loading:!1,backup:!0,closeBtn:!0,showContent:!0}},methods:{onSubmit(){this.loading=!0;let e=this.backup?"/api/backup/take-system-backup":"/auto-update-application",t=this.backup?{}:"";this.backup?(t.path=this.path,t.autoUpdate=!0):(this.closeBtn=!1,this.modalMessage="Maintenance Mode Enabled... File system Updating.. Do not close the window."),axios.post(e,t).then(a=>{this.backup?(this.showContent=!1,N(a,"UpdatesModal"),setTimeout(()=>{this.redirect("/admin/check-updates")},3e3)):this.updateDb()}).catch(a=>{this.loading=!1,this.modalMessage="",this.closeBtn=!0,I(a,"UpdatesModal")})},updateDb(){this.modalMessage="Maintenance Mode Enabled... Database Updating.. Do not close the window.",axios.post("/auto-update-database").then(e=>{this.closeBtn=!0,this.loading=!1,this.modalMessage="",this.showContent=!1,N(e,"UpdatesModal"),setTimeout(()=>{this.redirect("/admin/check-updates")},3e3)}).catch(e=>{this.closeBtn=!0,this.loading=!1,this.modalMessage="",I(e,"UpdatesModal")})}}},Lt=e=>(ee("data-v-608fc746"),e=e(),te(),e),Zg={class:"modal-title"},ev={key:0},tv=Lt(()=>s("b",null,"Note - ",-1)),av=Lt(()=>s("br",null,null,-1)),sv=Lt(()=>s("br",null,null,-1)),ov={class:"label_align",name:"share"},nv={key:1},iv={key:0,class:"mt-3 mb-2 text-center close_text"},lv=["disabled"],rv=Lt(()=>s("i",{class:"fas fa-arrow-right","aria-hidden":"true"},null,-1));function dv(e,t,a,r,o,n){const u=c("alert"),m=c("loader"),p=c("modal"),g=P("tooltip");return a.showModal?(i(),D(p,{key:0,showModal:a.showModal,onClose:a.onClose,showCloseBtn:o.closeBtn},{title:k(()=>[s("div",null,[s("h4",Zg,h(e.trans("update_application")),1)])]),alert:k(()=>[s("div",null,[d(u,{componentName:"UpdatesModal"})])]),fields:k(()=>[!o.loading&&o.showContent?(i(),l("div",ev,[s("b",null,h(e.trans("update_perform_msg")),1),s("span",null,[tv,F(" Once started, the update cannot be stopped. The backup and update may take several minutes to complete. Make sure you have atleast "+h(a.space)+" of disk space available or it may lead to Backup/Updation failure. ",1)]),av,sv,s("div",null,[s("label",ov,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"backup",id:"backup","onUpdate:modelValue":t[0]||(t[0]=v=>o.backup=v)},null,512),[[$e,o.backup]]),F("  "),S((i(),l("span",null,[F(h(e.trans("system_backup_recommend_msg")),1)])),[[g,a.path]])])])])):f("",!0),o.loading?(i(),l("div",nv,[d(m,{"animation-duration":4e3,color:"#1d78ff",size:60}),o.closeBtn?f("",!0):(i(),l("div",iv,h(e.modalMessage),1))])):f("",!0)]),controls:k(()=>[s("div",null,[s("button",{type:"button",onClick:t[1]||(t[1]=(...v)=>n.onSubmit&&n.onSubmit(...v)),class:"btn btn-primary",disabled:o.loading},[rv,F(" "+h(e.trans("continue")),1)],8,lv)])]),_:1},8,["showModal","onClose","showCloseBtn"])):f("",!0)}const cv=T(Xg,[["render",dv],["__scopeId","data-v-608fc746"]]);const uv={name:"updates-list",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{whiteLabel:{type:Boolean,default:!1}},data(){return{loading:!0,hasDataPopulated:!1,updatesData:[],pageLoad:!1,current:"",latest:"",space:"",backup_path:"",showModal:!1,updateStatus:"success",updateMsg:"an_update_is_available",whiteLabel:!1}},beforeMount(){this.getUpdates()},methods:{getUpdates(){L.get("/api/check-updates").then(e=>{this.latest=e.data.message.latest,this.current=e.data.message.current,this.space=e.data.message.filesystem_space,this.backup_path=e.data.message.backup_path,this.updatesData=e.data.message.version.reverse(),this.loading=!1,this.hasDataPopulated=!0,this.updateStatus=e.data.data.status,this.updateMsg=e.data.data.message,this.whiteLabel=e.data.message.white_label}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0;let t=e.response.data.message;t==this.lang("already_on_latest_version")?this.$store.dispatch("setAlert",{type:"success",message:t,component_name:"SystemUpdates"}):I(e,"SystemUpdates"),setTimeout(()=>{this.redirect("/panel/dashboard")},2e3)})},onClose(){this.showModal=!1}},components:{"system-update-modal":cv}},ht=e=>(ee("data-v-0674e66d"),e=e(),te(),e),hv={class:"col-sm-12"},_v={key:0},mv={key:1},pv={key:0,class:"alert alert-warning"},fv=ht(()=>s("i",{class:"icon fas fa-exclamation-triangle"},null,-1)),gv=["href"],vv={key:1,class:"error-page"},bv={class:"error-content"},yv={class:"text-green fw_500"},kv=ht(()=>s("i",{class:"fas fa-info-circle"},null,-1)),wv=ht(()=>s("br",null,null,-1)),Cv={class:"row center_align"},Dv={class:"card bg-secondary col-sm-3 prl-0 current_card"},Sv={class:"card-header border_bottom_w"},$v={class:"text-center"},Fv={class:"card-body text-center"},Mv={class:"fs-30"},Tv={class:"card bg-info col-sm-3 prl-0 latest_card"},Ev={class:"card-header border_bottom_w"},Lv={class:"text-center"},Iv={class:"card-body text-center"},Av={class:"fs-30"},qv={class:"row center_align"},Pv=ht(()=>s("i",{class:"fas fa-sync"},null,-1)),Vv=ht(()=>s("br",null,null,-1)),Ov={class:"row"},Nv={class:"col-12 col-md-12 col-lg-12"},xv={class:"row"},Uv={class:"col-12"},Rv={class:"mb-3"},jv={key:0,class:"post clearfix"},Bv={class:"user-block"},Hv=ht(()=>s("i",{class:"img-circle img-bordered fas fa-tag tag_align"},null,-1)),zv={class:"username"},Wv={href:"javascript:;"},Gv={key:0,class:"badge badge-warning restricted"},Yv={class:"description"},Kv=["innerHTML"],Jv={key:1};function Qv(e,t,a,r,o,n){const u=c("alert"),m=c("loader"),p=c("faveo-box"),g=c("system-update-modal"),v=P("tooltip");return i(),l("div",hv,[d(u,{componentName:"SystemUpdates"}),d(p,{title:e.trans("application_updates")},{default:k(()=>[!o.hasDataPopulated||o.loading?(i(),l("div",_v,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated?(i(),l("div",mv,[o.latest!=o.current?(i(),l(A,{key:0},[o.updatesData.length?(i(),l(A,{key:0},[o.updateStatus=="fails"?(i(),l("div",pv,[fv,F(" "+h(e.trans(o.updateMsg))+"  ",1),o.whiteLabel?f("",!0):(i(),l("a",{key:0,href:"https://billing.faveohelpdesk.com"},h(e.trans("click-here-to-renew")),9,gv))])):(i(),l("div",vv,[s("div",bv,[s("h3",yv,[kv,F(" "+h(e.trans(o.updateMsg)),1)])])])),wv,o.updateStatus!="fails"?(i(),l(A,{key:2},[s("div",Cv,[s("div",Dv,[s("div",Sv,[s("h4",$v,h(e.trans("current_version")),1)]),s("div",Fv,[s("b",Mv,h(o.current),1)])]),s("div",Tv,[s("div",Ev,[s("h4",Lv,h(e.trans("latest_version")),1)]),s("div",Iv,[s("b",Av,h(o.latest),1)])])]),s("div",qv,[s("button",{type:"button",class:"btn btn-light upd_btn",onClick:t[0]||(t[0]=b=>o.showModal=!0)},[Pv,F(" "+h(e.trans("update")),1)])]),Vv],64)):f("",!0),s("div",Ov,[s("div",Nv,[s("div",xv,[s("div",Uv,[s("h5",Rv,h(e.trans("recent_versions")),1),(i(!0),l(A,null,G(o.updatesData,b=>(i(),l(A,null,[b.is_private?f("",!0):(i(),l("div",jv,[s("div",Bv,[Hv,s("span",zv,[s("a",Wv,h(e.trans("version"))+" "+h(b.version),1),b.is_restricted?S((i(),l("span",Gv,[F(h(e.trans("restricted")),1)])),[[v,e.trans("update_restricted")]]):f("",!0)]),s("span",Yv,h(e.trans("released_on"))+" - "+h(r.formattedTime(b.created_at)),1)]),o.whiteLabel?f("",!0):(i(),l("p",{key:0,innerHTML:b.description,class:"ml-3-1"},null,8,Kv))]))],64))),256))])])])])],64)):f("",!0)],64)):(i(),l("span",Jv,h(e.trans("no_update_available")),1))])):f("",!0)]),_:1},8,["title"]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(g,{key:0,onClose:n.onClose,showModal:o.showModal,space:o.space,path:o.backup_path},null,8,["onClose","showModal","space","path"])):f("",!0)]),_:1})])}const Xv=T(uv,[["render",Qv],["__scopeId","data-v-0674e66d"]]),Zv={name:"clean-data",props:{dummyInstall:{type:Boolean,default:!1}},data(){return{loading:!1,showModal:!1}},beforeMount(){this.dummyInstall||this.$router.push({path:"/admin"})},methods:{onSubmit(){this.loading=!0,L.post("/post-clean-dummy-data").then(e=>{this.showModal=!1,this.loading=!1,de.dispatch("setAlert",{type:"success",message:"Dummy data removed successfully",component_name:"dummy-data"}),setTimeout(()=>{this.redirect("/admin/")},2e3)}).catch(e=>{this.loading=!1,this.showModal=!1})}}},eb={class:"col-sm-12"},tb={class:"card card-light"},ab={class:"card-header"},sb={class:"card-title"},ob={class:"card-body"},nb={class:"card-footer"},ib=s("i",{class:"fas fa-trash"},null,-1),lb={class:"modal-title"},rb={key:0,class:"text-center"},db=s("div",{class:"spinner-border"},null,-1),cb={key:1},ub=s("i",{class:"glyphicon glyphicon-ok","aria-hidden":"true"},null,-1);function hb(e,t,a,r,o,n){const u=c("alert"),m=c("center"),p=c("modal");return i(),l("div",eb,[d(u,{componentName:"dummy-data"}),s("div",tb,[s("div",ab,[s("h3",sb,h(e.trans("clean-data-box-title")),1)]),s("div",ob,[s("ul",null,[s("li",null,h(e.trans("clean-dummy-ticket-conversation")),1),s("li",null,h(e.trans("clean-dummy-notification")),1),s("li",null,h(e.trans("clean-dummy-users")),1),s("li",null,h(e.trans("clean-other-data")),1),s("li",null,h(e.trans("clean-user-created-data")),1)])]),s("div",nb,[s("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=g=>o.showModal=!0)},[ib,F(" "+h(e.trans("clean-data-btn")),1)])])]),o.showModal?(i(),D(p,{key:0,showModal:!0,onClose:()=>o.showModal=!1,containerStyle:{width:"500px"}},{title:k(()=>[s("h4",lb,h(e.trans("cleaning-database")),1)]),fields:k(()=>[o.loading?(i(),l("div",rb,[d(m,null,{default:k(()=>[s("h6",null,h(e.trans("cleaning-in-progress")),1)]),_:1}),d(m,null,{default:k(()=>[s("h6",null,h(e.trans("do-not-refresh")),1)]),_:1}),db])):f("",!0),o.loading?f("",!0):(i(),l("span",cb,h(e.trans("are_you_sure_you_want_to_delete")),1))]),controls:k(()=>[s("button",{type:"button",onClick:t[1]||(t[1]=(...g)=>n.onSubmit&&n.onSubmit(...g)),class:"btn btn-danger"},[ub,F(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)])}const _b=T(Zv,[["render",hb]]);const mb={props:["item","indexValue"],data(){return{}},components:{},methods:{},mounted(){}},pb=e=>(ee("data-v-eb69f969"),e=e(),te(),e),fb={class:"tree-node",ref:"closemenu"},gb={class:"nodrag"},vb=pb(()=>s("span",{"handle-left":20,"handle-top":20,class:"handle"},[s("i",{class:"fa fa-list glypic-li","aria-hidden":"true"})],-1)),bb={class:"contnt"},yb={class:"colp"},kb={class:"col-open"};function wb(e,t,a,r,o,n){return i(),l("div",fb,[s("span",gb,[vb,s("div",bb,[s("div",yb,[s("label",kb,h(a.item.name),1)])])])],512)}const Cb=T(mb,[["render",wb],["__scopeId","data-v-eb69f969"]]);const Db={data(){return{list:[],base:window.axios.defaults.baseURL,lang_locale:"",loading:!0}},props:{url:{type:String,default:""},onClose:{type:Function,default:()=>[]},reorder_type:{type:String,default:"workflow"}},components:{"workflow-menu":Cb,draggable:He},beforeMount(){this.lang_locale=localStorage.getItem("LANGUAGE"),axios.get(this.url).then(e=>{this.list=e.data.data,this.loading=!1}).catch(e=>{this.loading=!1})},methods:{reOrder(e){this.loading=!0;var t=new FormData;for(var a in this.list)t.append("enforcers["+a+"][id]",this.list[a].id),t.append("enforcers["+a+"][name]",this.list[a].name);t.append("type",this.reorder_type);const r={headers:{"Content-Type":"multipart/form-data"}};axios.post("/api/reorder-enforcer-list",t,r).then(o=>{this.loading=!1,this.onClose(),N(o,"dataTableModal")}).catch(o=>{this.loading=!1,this.onClose(),I(o,"dataTableModal")})},showTable(){this.onClose()}}},hs=e=>(ee("data-v-fd0f1900"),e=e(),te(),e),Sb={class:"ml_10"},$b={key:0},Fb={class:"col-sm-12 mt-4 ml-1"},Mb=hs(()=>s("span",{class:"fas fa-save"},null,-1)),Tb=hs(()=>s("span",{class:"fas fa-times"},null,-1)),Eb={key:1,class:"row",style:{"margin-bottom":"30px"}};function Lb(e,t,a,r,o,n){const u=c("workflow-menu"),m=c("draggable"),p=c("reuse-loader");return i(),l("div",Sb,[o.list.length>0&&!o.loading?(i(),l("div",$b,[d(m,{list:o.list,class:"list-group","ghost-class":"ghost"},{item:k(({element:g,index:v})=>[d(u,{item:g,indexValue:v,formList:o.list},null,8,["item","indexValue","formList"])]),_:1},8,["list"]),s("div",Fb,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=g=>n.reOrder()),href:"javascript:;"},[Mb,F(" "+h(e.lang("save")),1)]),F("  "),s("button",{onClick:t[1]||(t[1]=g=>n.showTable()),class:"btn btn-default",href:"javascript:void(0);"},[Tb,F(" "+h(e.lang("cancel")),1)])])])):f("",!0),o.loading?(i(),l("div",Eb,[d(p,{"animation-duration":4e3,color:"#1d78ff",size:60,class:x({spin:o.lang_locale=="ar"})},null,8,["class"])])):f("",!0)])}const It=T(Db,[["render",Lb],["__scopeId","data-v-fd0f1900"]]);const Ib={class:"col-sm-12"},Ab={class:"card card-light"},qb={class:"card-header"},Pb={class:"card-title"},Vb={class:"card-tools"},Ob=s("span",{class:"glyphicon glyphicon-plus"},null,-1),Nb=s("span",{class:"fas fa-bars"},null,-1),xb=[Nb],Ub={class:"card-body",id:"trigger-index-table"},fa="api/get-enforcer-list/",Rb={__name:"TriggerIndex",setup(e){const t=ce(),a=ae(()=>t.getters.formattedTime),r=q(["name","status","order","category_type","created_at","updated_at","action"]);window.axios.defaults.baseURL;const o=q({}),n=q("list_of_triggers"),u=q(!0),m=q(0),p=y=>ze(Se,{data:y}),g=y=>ze(Gt,{data:y});Ie(y=>{o.value={texts:{filter:"",limit:""},headings:{name:O("name"),status:O("status"),order:O("order"),category_type:O("category_type"),created_at:O("created"),updated_at:O("updated"),action:O("action")},columnsClasses:{name:"trigger-index-name",status:"trigger-index-status",order:"trigger-index-order",category_type:"trigger-category-type",created_at:"trigger-index-created",updated_at:"trigger-index-updated",action:"trigger-index-action"},templates:{action(w,M){return p(M)},status(w,M){return g(M)},category_type(w,M){return M.category_type.charAt(0).toUpperCase()+M.category_type.slice(1)},created_at(w,M){return a.value(M.created_at)},updated_at(w,M){return a.value(M.updated_at)}},sortable:["name","status","order","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(w){return{type:"trigger",sort:w.orderBy?w.orderBy:"order",sort_order:w.ascending?"asc":"desc",search:w.query,page:w.page,limit:w.limit}},responseAdapter({data:w}){return m.value=w.data.total,{data:w.data.data.map(M=>{let C="/trigger/";return M.edit_url=C+M.id+"/edit?page_type="+M.category_type,M.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/trigger/"+M.id,M}),count:w.data.total}}}});const v=()=>{u.value=!1,n.value="reorder"},b=()=>{u.value=!0,n.value="list_of_triggers"};return(y,w)=>{const M=c("alert"),C=c("router-link"),E=c("data-table"),R=P("tooltip");return i(),l("div",Ib,[d(M,{componentName:"dataTableModal"}),s("div",Ab,[s("div",qb,[s("h3",Pb,h(ne(O)(n.value)),1),s("div",Vb,[S((i(),D(C,{class:"btn btn-tool",to:"/trigger/create?page_type=ticket"},{default:k(()=>[Ob]),_:1})),[[R,ne(O)("create_trigger")]]),u.value&&m.value>1?S((i(),l("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:v},xb)),[[R,ne(O)("reorder")]]):f("",!0)])]),s("div",Ub,[u.value?(i(),D(E,{key:0,url:fa,dataColumns:r.value,option:o.value},null,8,["dataColumns","option"])):f("",!0),u.value?f("",!0):(i(),D(It,{key:1,onClose:b,url:fa+"?type=trigger&meta=true&sort=order&sort_order=asc",reorder_type:"trigger"},null,8,["url"]))])])])}}};const jb={name:"workflow-index",description:"Workflow table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"api/get-enforcer-list/",title:"list_of_workflows",showTable:!0,total_records:0,showDrop:!1}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.columns=["name","status","order","category_type","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),category_type:this.trans("category_type"),created_at:this.trans("created"),updated_at:this.trans("updated"),action:this.trans("action")},columnsClasses:{name:"workflow-index-name",status:"workflow-index-status",order:"workflow-index-order",category_type:"workflow-category-type",created_at:"workflow-index-created",updated_at:"workflow-index-updated",action:"workflow-index-action"},templates:{action:function(t,a){return e.h(Se,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},category_type(t,a){return a.category_type.charAt(0).toUpperCase()+a.category_type.slice(1)},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"workflow",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>{let r=a.category_type!="ticket"?"/service-desk/workflow/":"/workflow/";return a.edit_url=r+a.id+"/edit?page_type="+a.category_type,a.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/workflow/"+a.id,a}),count:t.data.total}}}},methods:{workflowListMounted(){window.emitter.emit("create-workflow-button-mounted")},reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_workflows"}},components:{"workflow-reorder":It}},Bb={class:"col-sm-12"},Hb={class:"card card-light"},zb={class:"card-header"},Wb={class:"card-title"},Gb={class:"card-tools"},Yb={href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},Kb=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Jb=[Kb],Qb={class:"dropdown-menu dropdown-menu-right",role:"menu"},Xb={id:"workflow-create-button"},Zb=s("span",{class:"fas fa-bars"},null,-1),ey=[Zb],ty={class:"card-body",id:"workflow-index-table"};function ay(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("workflow-reorder"),v=P("tooltip");return i(),l("div",Bb,[d(u,{componentName:"dataTableModal"}),s("div",Hb,[s("div",zb,[s("h3",Wb,h(e.lang(e.title)),1),s("div",Gb,[S((i(),l("a",Yb,Jb)),[[v,e.lang("create_workflow")]]),S(s("div",Qb,[s("span",Xb,h(n.workflowListMounted()),1),d(m,{id:"add-fg-link",class:"dropdown-item",to:"/workflow/create?page_type=ticket"},{default:k(()=>[F(h(e.lang("new_ticket_workflow")),1)]),_:1})],512),[[We,e.showDrop]]),e.showTable&&e.total_records>1?S((i(),l("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...b)=>n.reorderMethod&&n.reorderMethod(...b))},ey)),[[v,e.lang("reorder")]]):f("",!0)])]),s("div",ty,[e.apiUrl!==""&&e.showTable?(i(),D(p,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0),e.showTable?f("",!0):(i(),D(g,{key:1,onClose:n.onClose,url:e.apiUrl+"?meta=true&sort=order&sort_order=asc",reorder_type:"workflow"},null,8,["onClose","url"]))])])])}const sy=T(jb,[["render",ay]]),oy={name:"listener-index",description:"Listener table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"api/get-enforcer-list/",total_records:0,showTable:!0,showDrop:!1,title:"list_of_listeners"}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.columns=["name","status","order","category_type","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),created_at:this.trans("created"),category_type:this.trans("category_type"),updated_at:this.trans("updated"),action:this.trans("action")},templates:{action:(t,a)=>e.h(Se,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?this.trans("active"):this.trans("inactive"));return e.h("a",{class:"pointer_normal"},[r])},category_type(t,a){return a.category_type.charAt(0).toUpperCase()+a.category_type.slice(1)},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","rules","target","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"listener",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>{let r=a.category_type!="ticket"?"/service-desk/listener/":"/listener/";return a.edit_url=r+a.id+"/edit?page_type="+a.category_type,a.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/listener/"+a.id,a}),count:t.data.total}}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_listeners"},listenerListMounted(){window.emitter.emit("create-listener-button-mounted")}},components:{"listener-reorder":It}},ny={class:"col-sm-12"},iy={class:"card card-light"},ly={class:"card-header"},ry={class:"card-title"},dy={class:"card-tools"},cy={href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},uy=s("i",{class:"glyphicon glyphicon-plus"},null,-1),hy=[uy],_y={class:"dropdown-menu dropdown-menu-right",role:"menu"},my={id:"listener-create-button"},py=s("span",{class:"fas fa-bars"},null,-1),fy=[py],gy={class:"card-body"};function vy(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("listener-reorder"),v=P("tooltip");return i(),l("div",ny,[d(u,{componentName:"dataTableModal"}),s("div",iy,[s("div",ly,[s("h3",ry,h(e.lang(e.title)),1),s("div",dy,[S((i(),l("a",cy,hy)),[[v,e.lang("create_listener")]]),S(s("div",_y,[s("span",my,h(n.listenerListMounted()),1),d(m,{id:"create",class:"dropdown-item",to:"/listener/create?page_type=ticket"},{default:k(()=>[F(h(e.lang("new_ticket_listener")),1)]),_:1})],512),[[We,e.showDrop]]),e.showTable&&e.total_records>1?S((i(),l("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...b)=>n.reorderMethod&&n.reorderMethod(...b))},fy)),[[v,e.lang("reorder")]]):f("",!0)])]),s("div",gy,[e.apiUrl!==""&&e.showTable?(i(),D(p,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0),e.showTable?f("",!0):(i(),D(g,{key:1,onClose:n.onClose,url:e.apiUrl+"?type=listener&meta=true&sort=order&sort_order=asc",reorder_type:"listener"},null,8,["onClose","url"]))])])])}const by=T(oy,[["render",vy]]);const yy={class:"col-sm-12"},ky={class:"card card-light card-tabs"},wy={class:"card-header p-0 pt-1"},Cy={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},Dy=["onClick"],Sy={class:"card-body"},$y={class:"tab-content"},Fy={class:"tab-pane active",role:"tabpanel"},My={__name:"AutomatorsList",setup(e){const t=Ke(),a=q("workflow");za(()=>{t.query.type&&n(t.query.type)});const r=q([{id:"workflow",title:"workflow"},{id:"listener",title:"listener"},{id:"trigger",title:"trigger"}]),o=ae(()=>{switch(a.value){case"workflow":return sy;case"listener":return by;case"trigger":return Rb;default:return null}}),n=u=>{a.value=u};return(u,m)=>(i(),l("div",yy,[s("div",ky,[s("div",wy,[s("ul",Cy,[(i(!0),l(A,null,G(r.value,p=>(i(),l("li",{key:p.id,class:"nav-item"},[s("a",{id:"settings_tab",onClick:g=>n(p.id),class:x(["nav-link cursor-pointer",{active:a.value===p.id}]),"data-toggle":"pill",role:"tab"},h(u.lang(p.title)),11,Dy)]))),128))])]),s("div",Sy,[s("div",$y,[s("div",Fy,[(i(),D(Ha(o.value),{category:a.value},null,8,["category"]))])])])])]))}},Ty=T(My,[["__scopeId","data-v-e6b1dd68"]]);const Ey={name:"agent-list",description:"Agent list table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},components:{AdvanceFilter:so},data:()=>({isShowFilter:!1,apiUrl:"api/admin/get-users-list?roles[0]=admin&roles[1]=agent&active=1",columns:["name","user_name","email","phone","info","action"],filterOptions:[{section:[{name:"userType",url:"",elements:[{id:"all",name:"All",queryPerm:"roles[0]=admin&roles[1]=agent"},{id:"active_admin_agent",name:"Active Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=1"},{id:"deactive_admin_agent",name:"Deactived Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=0"},{id:"active_admin",name:"Active Admin",queryPerm:"roles[0]=admin&active=1"},{id:"deactive_admin",name:"Deactived Admins",queryPerm:"roles[0]=admin&active=0"},{id:"all_admin",name:"All Admins",queryPerm:"roles[0]=admin"},{id:"active_agent",name:"Active Agents",queryPerm:"roles[0]=agent&active=1"},{id:"deactive_agent",name:"Deactived Agents",queryPerm:"roles[0]=agent&active=0"},{id:"all_agent",name:"All Agents",queryPerm:"roles[0]=agent"}],isMultiple:!1,isPrepopulate:!1,label:"user_type",value:{id:"active_admin_agent",name:"Active Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=1"},className:"col-sm-4"},{name:"departments",url:"api/dependency/departments",elements:[],isMultiple:!0,isPrepopulate:!1,label:"departments",value:"",className:"col-sm-4"},{name:"teams",url:"api/dependency/teams",elements:[],isMultiple:!0,isPrepopulate:!1,label:"teams",value:"",className:"col-sm-4"}]}],options:{}}),beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),user_name:this.trans("user_name"),email:this.trans("email"),phone:this.trans("phone"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"name__agentList",user_name:"username__agentList",email:"email__agentList",phone:"phone__agentList",info:"active__agentList",action:"action__agentList"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{href:e.basePath()+"/panel/user/"+a.id,target:"_blank"},a.name)},phone(t,a){return a.phone===" Not available"||a.phone===" "||!a.phone?"--":a.phone},action:function(t,a){return e.h(oo,{data:a})},info:function(t,a){return e.h(Yt,{data:a})},type(t,a){return a.type.name}},sortable:["name","user_name","email"],filterable:["name","user_name","email"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){if(t)return{data:t.data.users.map(a=>(a.edit_url="/agent/"+a.id+"/edit",a.view_url=e.basePath()+"/panel/user/"+a.id,a.agent_view_url=e.basePath()+"/panel/agent/"+a.id,a.from="admin",a)),count:t.data.total}}}},methods:{selectedFilters(e){if(e==="closeEvent"){this.isShowFilter=!1;return}else if(e==="resetEvent"){this.resetFilter();return}let t="api/admin/get-users-list?",a="";e.userType?(this.filterOptions[0].value=e.userType,a=e.userType.queryPerm+"&"):a="roles[0]=admin&roles[1]=agent&",e.departments&&(this.filterOptions[0].section[1].value=e.departments,e.departments.forEach(function(r,o){a+="dept-ids["+o+"]="+r.id+"&"})),e.teams&&(this.filterOptions[0].section[2].value=e.teams,e.teams.forEach(function(r,o){a+="team-ids["+o+"]="+r.id+"&"})),a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1},resetFilter(){this.filterOptions.forEach(function(e){e.value=""}),this.apiUrl="api/admin/get-users-list?roles[0]=admin&roles[1]=agent"},toggleFilterView(){this.isShowFilter=!this.isShowFilter}}},Ly={class:"col-sm-12"},Iy={class:"card-tools"},Ay=s("i",{class:"glyphicon glyphicon-filter"},null,-1),qy=[Ay],Py=s("i",{class:"glyphicon glyphicon-plus","aria-hidden":"true"},null,-1),Vy={id:"my_agents"};function Oy(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("advance-filter"),g=c("data-table"),v=c("faveo-box"),b=P("tooltip");return i(),l("div",Ly,[d(u,{componentName:"agentList"}),d(v,{title:e.trans("list_of_agents"),boxClass:"card-light"},{headerMenu:k(()=>[s("div",Iy,[S((i(),l("a",{class:"btn btn-tool",onClick:t[0]||(t[0]=(...y)=>n.toggleFilterView&&n.toggleFilterView(...y))},qy)),[[b,e.trans("filter")]]),S((i(),D(m,{class:"btn btn-tool",to:"/agent/create",id:"add-agent-link"},{default:k(()=>[Py]),_:1})),[[b,e.trans("create_agent")]])])]),default:k(()=>[s("div",Vy,[S(d(p,{id:"filter-box",metaData:e.filterOptions,onSelectedFilters:n.selectedFilters},null,8,["metaData","onSelectedFilters"]),[[We,e.isShowFilter]]),d(g,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"agents-list"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"])])}const Ny=T(Ey,[["render",Oy]]);const xy={name:"data-table-managers",description:"Contains managers list",props:{data:{type:Object,required:!0}}},Uy={class:"btn-group"},Ry={key:0},jy=["href"],By={key:0},Hy={key:1};function zy(e,t,a,r,o,n){return i(),l("div",Uy,[a.data.managers.length>0?(i(),l("span",Ry,[(i(!0),l(A,null,G(a.data.managers,(u,m)=>(i(),l("a",{id:"managers",href:e.basePath()+"/panel/user/"+u.id,target:"_blank"},[F(h(u.full_name)+" ",1),m!=Object.keys(a.data.managers).length-1?(i(),l("span",By,", ")):f("",!0)],8,jy))),256))])):(i(),l("span",Hy,"--"))])}const Wy=T(xy,[["render",zy]]);const Gy={name:"departments-index",description:"Departments table component",data(){return{columns:["name","type","managers","actions"],options:{},apiUrl:"/api/admin/departments-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},headings:{name:this.trans("name"),managers:this.trans("managers"),type:this.trans("type"),actions:this.trans("actions")},columnsClasses:{name:"dept-name",managers:"dept-manager",type:"dept-type",actions:"dept-actions"},templates:{actions:function(t,a){return e.h(Se,{data:a})},managers:function(t,a){return e.h(Wy,{data:a})},type(t,a){return a.type.name}},sortable:["name","type"],filterable:["name","type","managers"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/department/"+a.id+"/edit",a.view_url="/department/"+a.id,a.delete_url=e.basePath()+"/api/admin/delete-department/"+a.id,a)),count:t.data.total}}}}},Yy={class:"col-sm-12",id:"departments-table"},Ky={class:"card card-light"},Jy={class:"card-header"},Qy={class:"card-title"},Xy={class:"card-tools"},Zy=s("i",{class:"glyphicon glyphicon-plus"},null,-1),e1={class:"card-body",id:"my_depts"};function t1(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",Yy,[d(u,{componentName:"dataTableModal"}),s("div",Ky,[s("div",Jy,[s("h3",Qy,h(e.trans("list_of_departments")),1),s("div",Xy,[S((i(),D(m,{class:"btn btn-tool",to:"/department/create"},{default:k(()=>[Zy]),_:1})),[[g,e.trans("create_department")]])])]),s("div",e1,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"departments-table"},null,8,["url","dataColumns","option"])])])])}const a1=T(Gy,[["render",t1]]);function s1(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(100)":O("name_should_be_less_than_100_characters")}]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const o1={name:"departments",description:"departments create and edit page",data(){return{name:"",managers:[],business_hour:null,outgoing_email:null,department_sign:"",teams:[],is_default:0,type_id:1,loading:!1,hasDataPopulated:!0,radioOptions:[{name:"public",value:1},{name:"private",value:0}],title:"create_department",iconClass:"fas fa-save",btnName:"save",dept_id:"",isDisabled:!1,deptData:{},agents_api:"/api/dependency/department-qualifiable-managers",apiCalled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{departmentBoxMounted(){window.emitter.emit("dept-box-mounted",this.deptData)},getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.title="edit_department",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t),this.agents_api="/api/dependency/department-qualifiable-managers?supplements="+t):(setTimeout(()=>{this.apiCalled=!0},1e3),this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/admin/edit-department/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.dept_id=e,this.deptData=t.data.data.department,this.apiCalled=!0,this.isDisabled=!!this.deptData.is_default,this.updateStatesWithData(t.data.data.department)}).catch(t=>{this.loading=!1,I(t)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=s1(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;const e={};this.dept_id!=""&&(e.id=this.dept_id),e.name=this.name,e.department_sign=this.department_sign,this.managers.length>0&&(e.manager_ids=this.managers.map(t=>t.id)),this.teams.length?e.team_ids=this.teams.map(t=>t.id):e.team_ids=[],e.business_hour_id=this.business_hour?this.business_hour.id:"",e.outgoing_email_id=this.outgoing_email?this.outgoing_email.id:"",e.type_id=this.type_id,this.is_default&&(e.is_default=this.is_default),window.emitter.emit("dept-data-submitting",e),L.post("/api/admin/create-update-department",e).then(t=>{this.loading=!1,N(t,"departments"),this.dept_id?this.getInitialValues(this.dept_id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/department/"+a)},3e3)}).catch(t=>{this.loading=!1,I(t,"departments")})}},onChange(e,t){this[t]=e}},components:{"text-field":oe,"dynamic-select":Me,"radio-button":Le,"tool-tip":Ae}},n1=e=>(ee("data-v-a6372201"),e=e(),te(),e),i1={class:"col-sm-12"},l1={key:0,class:"row"},r1={key:1,class:"card card-light"},d1={class:"card-header"},c1={class:"card-title"},u1={key:0,class:"card-tools"},h1=n1(()=>s("i",{class:"fas fa-eye"},null,-1)),_1={class:"card-body"},m1={class:"row"},p1={class:"row"},f1={class:"row"},g1={key:0,class:"row"},v1={id:"dept-container",class:"col-sm-6"},b1={class:"row"},y1={class:"form-group col-md-12",id:"text"},k1={class:"label_align1"},w1=["disabled"],C1={class:"card-footer"},D1=["disabled"];function S1(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("router-link"),g=c("text-field"),v=c("radio-button"),b=c("dynamic-select"),y=c("tiny-editor"),w=c("tool-tip"),M=P("tooltip"),C=P("focus-first-input");return i(),l("div",i1,[!o.hasDataPopulated||o.loading?(i(),l("div",l1,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"departments"}),o.hasDataPopulated?(i(),l("div",r1,[s("div",d1,[s("h3",c1,h(e.trans(o.title)),1),o.dept_id?(i(),l("div",u1,[S((i(),D(p,{class:"btn-tool",to:"/department/"+o.dept_id},{default:k(()=>[h1]),_:1},8,["to"])),[[M,e.trans("view")]])])):f("",!0)]),s("div",_1,[S((i(),l("div",m1,[d(g,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(v,{options:o.radioOptions,label:e.trans("type"),name:"type_id",value:o.type_id,onChange:n.onChange,classname:"form-group col-sm-6",hint:e.trans("department-type")},null,8,["options","label","value","onChange","hint"])])),[[C]]),s("div",p1,[d(b,{label:e.trans("managers"),multiple:!0,name:"managers",prePopulate:!0,classname:"col-sm-6",apiEndpoint:o.agents_api,value:o.managers,onChange:n.onChange,required:!1,hint:e.trans("department-manager")},null,8,["label","apiEndpoint","value","onChange","hint"]),d(b,{label:e.trans("business_hour"),multiple:!1,name:"business_hour",prePopulate:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/business-hours",value:o.business_hour,onChange:n.onChange,required:!1,hint:e.trans("business-hour-desc")},null,8,["label","value","onChange","hint"])]),s("div",f1,[d(b,{label:e.trans("outgoing_email"),multiple:!1,name:"outgoing_email",prePopulate:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/system-emails",value:o.outgoing_email,onChange:n.onChange,required:!1,hint:e.trans("department-outgoin-mail")},null,8,["label","value","onChange","hint"]),d(b,{label:e.trans("teams"),multiple:!0,name:"teams",classname:"col-sm-6",value:o.teams,apiEndpoint:"/api/dependency/teams",onChange:n.onChange,required:!1},null,8,["label","value","onChange"])]),o.apiCalled?(i(),l("div",g1,[s("div",v1,h(n.departmentBoxMounted()),1)])):f("",!0),s("div",b1,[d(y,{value:o.department_sign,type:"text",onChange:n.onChange,name:"department_sign",label:e.trans("department_signature"),classname:"col-sm-12",required:!1,lang:"en"},null,8,["value","onChange","label"])]),s("div",y1,[s("label",k1,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"default","onUpdate:modelValue":t[0]||(t[0]=E=>o.is_default=E),disabled:o.isDisabled},null,8,w1),[[$e,o.is_default]]),F(" "+h(e.trans("make-default-department")),1)]),d(w,{message:e.trans("default-department"),size:"medium"},null,8,["message"])])]),s("div",C1,[s("button",{type:"button",onClick:t[1]||(t[1]=(...E)=>n.onSubmit&&n.onSubmit(...E)),disabled:o.loading,class:"btn btn-primary"},[s("span",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)],8,D1)])])):f("",!0)])}const ga=T(o1,[["render",S1],["__scopeId","data-v-a6372201"]]),$1={name:"dept-details",description:"Department details  page",props:{deptData:{type:Object,default:()=>{}}},methods:{subString(e){return nt(e,20)}}},F1={class:"card card-light card-outline"},M1={class:"card-body box-profile"},T1={class:"text-center"},E1={class:"profile-username text-center"},L1={class:"text-muted text-center"},I1={class:"list-group list-group-unbordered mb-3"},A1={class:"list-group-item"},q1={class:"float-right badge badge-info text-white"},P1={class:"list-group-item"},V1={class:"float-right"},O1={class:"list-group-item"},N1={key:0,class:"float-right"},x1={key:0},U1=s("i",{class:"fas fa-edit"},null,-1);function R1(e,t,a,r,o,n){const u=c("faveo-image-element"),m=c("router-link"),p=P("tooltip");return i(),l("div",F1,[s("div",M1,[s("div",T1,[d(u,{id:"deptimg","source-url":e.basePathVersion()+"/themes/default/admin/images/department.jpg",classes:["profile-user-img img-fluid img-circle"],"alternative-text":"Department Image"},null,8,["source-url"])]),S((i(),l("h3",E1,[F(h(n.subString(a.deptData.name)),1)])),[[p,a.deptData.name]]),s("p",L1,h(e.trans("department")),1),s("ul",I1,[s("li",A1,[s("b",null,h(e.trans("department_size")),1),F(),s("a",q1,h(a.deptData.size),1)]),s("li",P1,[s("b",null,h(e.trans("business_hour")),1),S((i(),l("a",V1,[F(h(a.deptData.business_hour?n.subString(a.deptData.business_hour.name):"--"),1)])),[[p,a.deptData.business_hour?a.deptData.business_hour.name:""]])]),s("li",O1,[s("div",null,[s("b",null,h(e.trans("teams")),1),F("      "),a.deptData.teams.length?(i(!0),l(A,{key:1},G(a.deptData.teams,(g,v)=>S((i(),D(m,{to:"/team/"+g.id},{default:k(()=>[F(h(n.subString(g.name)),1),v!=Object.keys(a.deptData.teams).length-1?(i(),l("span",x1,", ")):f("",!0)]),_:2},1032,["to"])),[[p,g.name]])),256)):(i(),l("a",N1,"--"))])])]),d(m,{to:"/department/"+a.deptData.id+"/edit",class:"btn btn-primary btn-block"},{default:k(()=>[s("b",null,[U1,F(" "+h(e.trans("edit")),1)])]),_:1},8,["to"])])])}const j1=T($1,[["render",R1]]);const B1={name:"",description:"",props:{manager:{type:Object,default:()=>{}}},methods:{subString(e,t=15){return nt(e,t)}}},H1=e=>(ee("data-v-0c3c5e77"),e=e(),te(),e),z1={class:"card card-widget widget-user-2"},W1={class:"widget-user-header bg-warning"},G1={class:"widget-user-image"},Y1=H1(()=>s("i",{class:"fas fa-edit"},null,-1)),K1={class:"widget-user-username"},J1={class:"widget-user-desc fs-14"},Q1={class:"card-footer p-0"},X1={class:"nav flex-column"},Z1={class:"nav-item"},ek={class:"nav-link text-dark"},tk={class:"float-right"},ak={class:"nav-item"},sk={class:"nav-link text-dark"},ok={class:"float-right"};function nk(e,t,a,r,o,n){const u=c("faveo-image-element"),m=c("router-link"),p=P("tooltip");return i(),l("div",z1,[s("div",W1,[s("div",G1,[d(u,{id:"org_man","source-url":a.manager.profile_pic,classes:["img-circle elevation-2"],"alternative-text":"User Avatar"},null,8,["source-url"])]),S((i(),D(m,{to:"/agent/"+a.manager.id+"/edit",class:"float-right"},{default:k(()=>[Y1]),_:1},8,["to"])),[[p,e.trans("edit")]]),S((i(),l("h3",K1,[F(h(n.subString(a.manager.full_name)),1)])),[[p,a.manager.full_name]]),s("h5",J1,h(e.trans("department_manager")),1)]),s("div",Q1,[s("ul",X1,[s("li",Z1,[s("a",ek,[F(h(e.trans("email"))+" ",1),S((i(),l("span",tk,[F(h(a.manager.email?n.subString(a.manager.email):"--"),1)])),[[p,a.manager.email]])])]),s("li",ak,[s("a",sk,[F(h(e.trans("phone"))+" ",1),S((i(),l("span",ok,[F(h(a.manager.phone_number?n.subString(a.manager.phone_number):"--"),1)])),[[p,a.manager.phone_number]])])])])])])}const ik=T(B1,[["render",nk],["__scopeId","data-v-0c3c5e77"]]);const lk={name:"dept-members",description:"Department members list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["name","email","info","action"],options:{},apiUrl:"/api/admin/get-users-list?dept-ids[]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),email:this.trans("email"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"dept-member-name",email:"dept-member-email",info:"dept-member-status",action:"dept-member-action"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{href:e.basePath()+"/panel/agent/"+a.id,target:"_blank"},a.name)},email(t,a){return a.email?a.email:"--"},info:function(t,a){return e.h(Yt,{data:a})},action:function(t,a){let r=e.h("i",{class:"fas fa-eye"});return e.h("a",{target:"_blank",href:e.basePath()+"/panel/agent/"+a.id,class:"btn btn-default table_btn"},[r])}},sortable:["name","email"],filterable:["name","email"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users,count:t.data.total}}}},methods:{handelLoader(e){this.loading=e}}},rk=e=>(ee("data-v-e56d1e03"),e=e(),te(),e),dk={id:"dept_members"},ck={class:"card card-light"},uk={class:"card-header"},hk={class:"card-title"},_k={key:0,class:"card-tools"},mk={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},pk=rk(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),fk=[pk],gk={class:"card-body"};function vk(e,t,a,r,o,n){const u=c("data-table"),m=P("tooltip");return i(),l("div",dk,[s("div",ck,[s("div",uk,[s("h3",hk,h(e.trans("list_of_department_members")),1),o.loading?(i(),l("div",_k,[S((i(),l("button",mk,fk)),[[m,e.lang("refresh")]])])):f("",!0)]),s("div",gk,[d(u,{url:o.apiUrl,dataColumns:o.columns,disableLoader:a.disableLoader,onLoaderState:n.handelLoader,option:o.options,scroll_to:"dept_members"},null,8,["url","dataColumns","disableLoader","onLoaderState","option"])])])])}const bk=T(lk,[["render",vk],["__scopeId","data-v-e56d1e03"]]);const yk={name:"dept-tickets",description:"Department tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Department"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],statusList:"",showModal:!1,showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"DeptTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return nt(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:ts(this.ticketId),limit:"all"};L.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert(this.lang("please_select_tickets")),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,L.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="dept-ids[]="+this.id,t+=e,L.get(t).then(a=>{this.statusDiv+=1,this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var r in a.data.data)if(a.data.data.hasOwnProperty(r)){let o={id:r,title:r,count:a.data.data[r]};switch(o.title){case"open":o.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":o.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":o.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":o.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(o)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"dept-tickets-table":Ja,"change-status-modal":Qa,"merge-ticket-modal":Xa,"assign-ticket-modal":Za}},At=e=>(ee("data-v-f5885efe"),e=e(),te(),e),kk={id:"dept-tickets-table"},wk={class:"row"},Ck={class:"col-md-12"},Dk={class:"card card-light"},Sk={class:"card-header"},$k={class:"card-title"},Fk={key:0,class:"card-tools"},Mk={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Tk=At(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),Ek=[Tk],Lk={class:"card-body"},Ik={key:0,class:"nav-tabs-custom"},Ak={class:"nav nav-tabs"},qk={class:"nav-item"},Pk=["onClick"],Vk={class:"badge badge-primary"},Ok={class:"tab-content"},Nk={class:"active tab-pane",id:"activity"},xk={class:"mt-3"},Uk=At(()=>s("i",{class:"fas fa-code-branch"},null,-1)),Rk=At(()=>s("i",{class:"fas fa-exchange-alt"},null,-1)),jk={key:0,class:"dropdown-menu status-list"},Bk={key:0,class:"row"},Hk=["onClick"],zk={key:1,class:"dropdown-item",href:"javascript:;"},Wk=At(()=>s("i",{class:"far fa-hand-point-right"},null,-1)),Gk={id:"my_tic"};function Yk(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("dept-tickets-table"),g=c("change-status-modal"),v=c("merge-ticket-modal"),b=c("assign-ticket-modal"),y=P("tooltip");return i(),l("div",kk,[s("div",wk,[s("div",Ck,[d(u,{componentName:"DeptTickets"})])]),s("div",Dk,[s("div",Sk,[s("h3",$k,h(e.lang("tickets_of"))+" "+h(n.subString(a.name,100)),1),o.loading?(i(),l("div",Fk,[S((i(),l("button",Mk,Ek)),[[y,e.lang("refresh")]])])):f("",!0)]),s("div",Lk,[o.hasDataPopulated?(i(),l("div",Ik,[s("ul",Ak,[(i(!0),l(A,null,G(o.tabs,w=>(i(),l("li",qk,[s("a",{class:x(["nav-link",{active:o.category===w.id}]),href:"javascript:;","data-toggle":"pill",role:"tab",onClick:M=>n.tickets(w),id:"tickets_tab"},[F(h(e.lang(w.title))+" ",1),s("span",Vk,h(w.count),1)],10,Pk)]))),256))]),s("div",Ok,[s("div",Nk,[s("div",xk,[s("button",{type:"button",onClick:t[0]||(t[0]=w=>n.mergeTicket()),class:"btn btn-xs btn-default",id:"merge_ticket"},[Uk,F(" "+h(e.lang("merge")),1)]),(i(),l("div",{class:"btn-group",key:o.statusDiv},[S((i(),l("button",{type:"button",class:"btn btn-xs btn-default dropdown-toggle","data-toggle":"dropdown",onClick:t[1]||(t[1]=w=>n.getStatusList()),id:"status"},[Rk,F(" "+h(e.lang("change_status")),1)])),[[y,e.lang("change_status")]]),o.ticketId.length>0?(i(),l("div",jk,[o.statusLoader?(i(),l("div",Bk,[d(m,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),o.statusLoader?f("",!0):(i(),l(A,{key:1},[o.statusList&&o.statusList.length>0?(i(!0),l(A,{key:0},G(o.statusList,w=>(i(),l("a",{class:"dropdown-item",onClick:M=>n.getStatus(w),href:"javascript:;",id:"change_status"},[s("i",{class:x(w.icon),style:Be({color:w.icon_color})},null,6),F("  "+h(w.name),1)],8,Hk))),256)):f("",!0),o.statusList&&o.statusList.length===0?(i(),l("a",zk,h(e.lang("no-records")),1)):f("",!0)],64))])):f("",!0)])),o.ticketId.length>0?(i(),l("button",{key:0,type:"button",onClick:t[2]||(t[2]=w=>o.showAssignModal=!0),class:"btn btn-xs btn-default",id:"assign_ticket"},[Wk,F(" "+h(e.lang("assign")),1)])):f("",!0)]),s("div",Gk,[(i(),D(p,{category:o.category,id:a.id,tickets:n.ticketsData,key:o.category,apiUrl:o.apiUrl,componentTitle:o.componentTitle,scroll_to:"dept-tickets-table",isCalledFromAdmin:!0,disableLoader:a.disableLoader,allTickets:n.allData,onLoaderValue:n.handelLoader},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","allTickets","onLoaderValue"]))])])])])):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(g,{key:0,onClose:n.onClose,showModal:o.showModal,statusIds:e.statusIds,ticketIds:o.ticketId,status:o.change_status,componentTitle:o.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):f("",!0)]),_:1}),d(ye,{name:"modal"},{default:k(()=>[o.showMergeModal?(i(),D(v,{key:0,onClose:n.onClose,showModal:o.showMergeModal,parent_tickets:o.parent_tickets,ticketIds:o.ticketId,componentTitle:o.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):f("",!0)]),_:1}),d(ye,{name:"modal"},{default:k(()=>[o.showAssignModal?(i(),D(b,{key:0,onClose:n.onClose,showModal:o.showAssignModal,ticketIds:o.ticketId,componentTitle:o.componentTitle,tickets:o.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):f("",!0)]),_:1})])])])}const Kk=T(yk,[["render",Yk],["__scopeId","data-v-f5885efe"]]);const Jk={name:"department-report",description:"Department report page",props:{id:{type:[String,Number],default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,timeOptions:{start:"00:00",step:"00:30",end:"23:30"}}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},beforeMount(){this.getChartData()},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{onChange(e,t){let a=e.filter(o=>o),r="";a.length&&(r="date::"+a.map(o=>fe(o).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=r,e&&this.getChartData()},getChartData(){this.loading=!0,L.get(this.apiUrl,{params:{"dept-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(n=>(n={label:n.label,tension:.5,fill:!1,borderColor:n.border_color,pointBackgroundColor:n.point_background_color,backgroundColor:n.background_color,data:n.data},n));let r=t.map(n=>n.data).map(function(n){return Math.max.apply(Math,n)}),o=Math.max.apply(null,r)<10?1:"";this.$nextTick(()=>{var n=document.getElementById("trafficBar").getContext("2d"),u={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(m,p){return""},display:function(m){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:o}}}}};new Wa(n,u)})}},components:{"date-time-field":Qe}},Zt=e=>(ee("data-v-b1bc827c"),e=e(),te(),e),Qk={class:"card card-light"},Xk={class:"card-header"},Zk={class:"card-title"},ew={key:0,class:"card-tools"},tw={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},aw=Zt(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),sw=[aw],ow={class:"card-body"},nw={class:"row"},iw={class:"row"},lw={key:0,class:"col-md-12 col-sm-12 col-12"},rw=Zt(()=>s("canvas",{id:"trafficBar"},null,-1)),dw=[rw],cw=Zt(()=>s("hr",{class:"visible-xs-block"},null,-1));function uw(e,t,a,r,o,n){const u=c("alert"),m=c("date-time-field"),p=P("tooltip");return i(),l("div",null,[d(u,{componentName:"DeptReport"}),s("div",Qk,[s("div",Xk,[S((i(),l("h3",Zk,[F(h(e.trans("report")),1)])),[[p,e.trans("report")]]),o.loading?(i(),l("div",ew,[S((i(),l("button",tw,sw)),[[p,e.lang("refresh")]])])):f("",!0)]),s("div",ow,[s("div",nw,[d(m,{label:e.trans("select_date_range"),value:o.date,type:"date",name:"date",required:!1,onChange:n.onChange,range:"",currentYearDate:!1,place:e.trans("select_date_range"),format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","value","onChange","place","after"])]),s("div",iw,[o.loading?f("",!0):(i(),l("div",lw,dw)),cw])])])])}const hw=T(Jk,[["render",uw],["__scopeId","data-v-b1bc827c"]]),_w={name:"department-view",description:"Department view page",data(){return{deptId:"",deptData:"",dept_managers:[],loading:!0}},beforeMount(){const e=window.location.pathname;this.deptId=De(e),this.getDeptData(this.deptId)},methods:{getDeptData(e){L.get("/api/admin/department-profile/"+e).then(t=>{this.deptData=t.data.data,this.dept_managers=t.data.data.managers,this.loading=!1}).catch(t=>{this.loading=!1})}},components:{"dept-details":j1,"dept-managers":ik,"dept-members":bk,"dept-tickets":Kk,"dept-report":hw}},mw={class:"col-sm-12"},pw={class:"row"},fw={key:0,class:"col-sm-12"},gw={class:"col-sm-4"},vw={class:"col-sm-8"};function bw(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("dept-details"),p=c("dept-managers"),g=c("dept-members"),v=c("dept-tickets"),b=c("dept-report");return i(),l("div",mw,[s("div",pw,[o.loading?(i(),l("div",fw,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:50})])):f("",!0),o.loading?f("",!0):(i(),l(A,{key:1},[s("div",gw,[d(m,{deptData:o.deptData},null,8,["deptData"]),o.dept_managers.length>0?(i(!0),l(A,{key:0},G(o.dept_managers,(y,w)=>(i(),D(p,{manager:y,key:y.id},null,8,["manager"]))),128)):f("",!0)]),s("div",vw,[d(g,{disableLoader:"true",id:o.deptId},null,8,["id"]),d(v,{disableLoader:"true",id:o.deptId,name:o.deptData.name},null,8,["id","name"]),d(b,{id:o.deptId},null,8,["id"])])],64))])])}const yw=T(_w,[["render",bw]]);const kw={name:"teams-index",description:"Teams table component",data(){return{columns:["name","team_size","status","lead","actions"],options:{},apiUrl:"/api/admin/team-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},headings:{name:this.trans("name"),team_size:this.trans("team_size"),status:this.trans("status"),lead:this.trans("lead"),actions:this.trans("actions")},columnsClasses:{name:"team-name",team_size:"team-size",status:"team-status",lead:"team-lead",actions:"team-actions"},templates:{actions:function(t,a){return e.h(Se,{data:a})},lead:function(t,a){return a.lead?e.h("a",{href:e.basePath()+"/panel/user/"+a.lead.id,target:"_blank"},a.lead.full_name):"--"},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])}},sortable:["name","team_size","status"],filterable:["name","team_size","status","lead"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/team/"+a.id+"/edit",a.status&&(a.view_url="/team/"+a.id),a.delete_url=e.basePath()+"/api/admin/delete-team/"+a.id,a)),count:t.data.total}}}}},ww={class:"col-sm-12",id:"teams-table"},Cw={class:"card card-light"},Dw={class:"card-header"},Sw={class:"card-title"},$w={class:"card-tools"},Fw=s("i",{class:"glyphicon glyphicon-plus"},null,-1),Mw={class:"card-body",id:"my_teamss"};function Tw(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",ww,[d(u,{componentName:"dataTableModal"}),s("div",Cw,[s("div",Dw,[s("h3",Sw,h(e.trans("list_of_teams")),1),s("div",$w,[S((i(),D(m,{class:"btn btn-tool",to:"/team/create"},{default:k(()=>[Fw]),_:1})),[[g,e.trans("create_a_team")]])])]),s("div",Mw,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"teams-table"},null,8,["url","dataColumns","option"])])])])}const Ew=T(kw,[["render",Tw]]);function Lw(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(30)":O("name_should_be_less_than_30_characters")}]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const Iw={name:"team-create-edit",description:"Team create and edit page",data(){return{name:"",lead:"",status:1,departments:[],admin_notes:"",loading:!1,hasDataPopulated:!0,radioOptions:[{name:"Active",value:1},{name:"Inactive",value:0}],title:"create_a_team",iconClass:"fas fa-save",btnName:"save",team_id:"",teamData:{},lead_api:"/api/dependency/team-qualifiable-leads"}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.title="edit_a_team",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t),this.lead_api="/api/dependency/team-qualifiable-leads?supplements="+t):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/admin/edit-team/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.team_id=e,this.teamData=t.data.data.team,this.updateStatesWithData(this.teamData)}).catch(t=>{this.loading=!1,I(t)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=Lw(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;const e={};this.team_id!=""&&(e.id=parseInt(this.team_id)),this.departments.length?e.department_ids=this.departments.map(t=>t.id):e.department_ids=[],e.name=this.name,e.admin_notes=this.admin_notes,e.team_lead_id=this.lead?this.lead.id:"",e.status=this.status,L.post("/api/admin/create-update-team",e).then(t=>{this.loading=!1,N(t,"teams"),this.team_id?this.getInitialValues(this.team_id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/team/"+a)},3e3)}).catch(t=>{this.loading=!1,I(t,"teams")})}},onChange(e,t){this[t]=e}},components:{TextField:oe,DynamicSelect:Me,RadioButton:Le}},Aw={class:"col-sm-12"},qw={key:0,class:"row"},Pw={key:1,class:"card card-light"},Vw={class:"card-header"},Ow={class:"card-title"},Nw={key:0,class:"card-tools"},xw=s("i",{class:"fas fa-eye"},null,-1),Uw={class:"card-body"},Rw={class:"row"},jw={class:"row"},Bw={class:"card-footer"},Hw=["disabled"];function zw(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("router-link"),g=c("text-field"),v=c("dynamic-select"),b=c("radio-button"),y=c("tiny-editor"),w=P("tooltip"),M=P("focus-first-input");return i(),l("div",Aw,[!o.hasDataPopulated||o.loading?(i(),l("div",qw,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"teams"}),o.hasDataPopulated?(i(),l("div",Pw,[s("div",Vw,[s("h3",Ow,h(e.trans(o.title)),1),o.teamData&&o.teamData.status?(i(),l("div",Nw,[S((i(),D(p,{class:"btn-tool",to:"/team/"+o.team_id},{default:k(()=>[xw]),_:1},8,["to"])),[[w,e.trans("view")]])])):f("",!0)]),s("div",Uw,[S((i(),l("div",Rw,[d(g,{label:"Name",value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["value","onChange","placehold"]),d(v,{label:e.trans("team_lead"),multiple:!1,name:"lead",prePopulate:!0,hint:e.trans("team-lead-hint"),classname:"col-sm-6",apiEndpoint:o.lead_api,value:o.lead,onChange:n.onChange,required:!1,strlength:45},null,8,["label","hint","apiEndpoint","value","onChange"])])),[[M]]),s("div",jw,[d(v,{label:e.trans("departments"),multiple:!0,name:"departments",classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:o.departments,onChange:n.onChange,required:!1,strlength:45},null,8,["label","value","onChange"]),d(b,{options:o.radioOptions,label:e.trans("status"),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-4",hint:e.trans("team-status-hint")},null,8,["options","label","value","onChange","hint"])]),s("div",null,[d(y,{value:o.admin_notes,onChange:n.onChange,name:"admin_notes",label:e.trans("admin_notes"),width:"100%",required:!1,lang:"en",hint:e.trans("team-notes-hint")},null,8,["value","onChange","label","hint"])])]),s("div",Bw,[s("button",{type:"button",onClick:t[0]||(t[0]=(...C)=>n.onSubmit&&n.onSubmit(...C)),disabled:o.loading,class:"btn btn-primary"},[s("span",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)],8,Hw)])])):f("",!0)])}const va=T(Iw,[["render",zw]]),Ww={name:"team-details",description:"Team details  page",props:{teamData:{type:Object,default:()=>{}}},methods:{subString(e,t=20){return nt(e,t)}}},Gw={class:"card card-light card-outline"},Yw={class:"card-body box-profile"},Kw={class:"text-center"},Jw={class:"profile-username text-center"},Qw={class:"text-muted text-center"},Xw={class:"list-group list-group-unbordered mb-3"},Zw={class:"list-group-item"},eC={key:0,class:"float-right"},tC=["href"],aC={class:"list-group-item"},sC={class:"float-right badge badge-info text-white"},oC={class:"list-group-item"},nC={class:"list-group-item"},iC={key:0,class:"float-right"},lC={key:0},rC=s("i",{class:"fas fa-edit"},null,-1);function dC(e,t,a,r,o,n){const u=c("faveo-image-element"),m=c("router-link"),p=P("tooltip");return i(),l("div",Gw,[s("div",Yw,[s("div",Kw,[d(u,{id:"teamimg","source-url":e.basePathVersion()+"/themes/default/admin/images/team.jpg",classes:["profile-user-img img-fluid img-circle"],"alternative-text":"Team Image"},null,8,["source-url"])]),S((i(),l("h3",Jw,[F(h(n.subString(a.teamData.name)),1)])),[[p,a.teamData.name]]),s("p",Qw,h(e.trans("team")),1),s("ul",Xw,[s("li",Zw,[s("b",null,h(e.trans("teamlead_name")),1),a.teamData.lead?S((i(),l("a",{key:1,class:"float-right",target:"_blank",href:e.basePath()+"/panel/user/"+a.teamData.lead.id},[F(h(n.subString(a.teamData.lead.full_name,13)),1)],8,tC)),[[p,a.teamData.lead.full_name]]):(i(),l("a",eC,"--"))]),s("li",aC,[s("b",null,h(e.trans("team_size")),1),F(),s("a",sC,h(a.teamData.team_size),1)]),s("li",oC,[s("b",null,h(e.trans("status")),1),F(),s("a",{class:x(["float-right",[a.teamData.status=="Active"?"text-green":"text-red"]])},h(a.teamData.status),3)]),s("li",nC,[s("div",null,[s("b",null,h(e.trans("departments")),1),F("      "),a.teamData.departments.length?(i(!0),l(A,{key:1},G(a.teamData.departments,(g,v)=>S((i(),D(m,{to:"/department/"+g.id},{default:k(()=>[F(h(n.subString(g.name)),1),v!=Object.keys(a.teamData.departments).length-1?(i(),l("span",lC,", ")):f("",!0)]),_:2},1032,["to"])),[[p,g.name]])),256)):(i(),l("a",iC,"--"))])])]),d(m,{to:"/team/"+a.teamData.id+"/edit",class:"btn btn-primary btn-block"},{default:k(()=>[s("b",null,[rC,F(" "+h(e.trans("edit")),1)])]),_:1},8,["to"])])])}const cC=T(Ww,[["render",dC]]);const uC={name:"team-members",description:"Team memebers list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["name","email","info","action"],options:{},apiUrl:"/api/admin/get-users-list?team-ids[]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),email:this.trans("email"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"team-member-name",email:"team-member-email",info:"team-member-status",action:"team-member-action"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{target:"_blank",href:e.basePath()+"/panel/user/"+a.id},a.name)},email(t,a){return a.email?a.email:"--"},info:function(t,a){return e.h(Yt,{data:a})},action:function(t,a){let r=e.h("i",{class:"fas fa-eye"});return e.h("a",{target:"_blank",href:e.basePath()+"/panel/user/"+a.id,class:"btn btn-default table_btn"},[r])}},sortable:["name","email"],filterable:["name","email"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users,count:t.data.total}}}},methods:{handelLoader(e){this.loading=e}}},hC=e=>(ee("data-v-244c712c"),e=e(),te(),e),_C={id:"team_members"},mC={class:"card card-light"},pC={class:"card-header"},fC={class:"card-title"},gC={key:0,class:"card-tools"},vC={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},bC=hC(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),yC=[bC],kC={class:"card-body"};function wC(e,t,a,r,o,n){const u=c("data-table"),m=P("tooltip");return i(),l("div",_C,[s("div",mC,[s("div",pC,[s("h3",fC,h(e.trans("list_of_team_members")),1),o.loading?(i(),l("div",gC,[S((i(),l("button",vC,yC)),[[m,e.lang("refresh")]])])):f("",!0)]),s("div",kC,[d(u,{url:o.apiUrl,dataColumns:o.columns,onLoaderState:n.handelLoader,option:o.options,disableLoader:a.disableLoader,scroll_to:"team_members"},null,8,["url","dataColumns","onLoaderState","option","disableLoader"])])])])}const CC=T(uC,[["render",wC],["__scopeId","data-v-244c712c"]]);const DC={name:"team-tickets",description:"Team tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Team"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],statusList:"",showModal:!1,showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"TeamTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return nt(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:ts(this.ticketId),limit:"all"};L.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert("Please select tickets."),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,L.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="team-ids[]="+this.id,t+=e,L.get(t).then(a=>{this.statusDiv+=1,this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var r in a.data.data)if(a.data.data.hasOwnProperty(r)){let o={id:r,title:r,count:a.data.data[r]};switch(o.title){case"open":o.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":o.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":o.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":o.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(o)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"team-tickets-table":Ja,"change-status-modal":Qa,"merge-ticket-modal":Xa,"assign-ticket-modal":Za}},qt=e=>(ee("data-v-2fa65073"),e=e(),te(),e),SC={id:"team-tickets-table"},$C={class:"row"},FC={class:"col-md-12"},MC={class:"card card-light"},TC={class:"card-header"},EC={class:"card-title"},LC={key:0,class:"card-tools"},IC={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},AC=qt(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),qC=[AC],PC={class:"card-body"},VC={key:0,class:"nav-tabs-custom"},OC={class:"nav nav-tabs"},NC={class:"nav-item"},xC=["onClick"],UC={class:"badge badge-primary"},RC={class:"tab-content"},jC={class:"active tab-pane",id:"activity"},BC={class:"mt-3"},HC=qt(()=>s("i",{class:"fas fa-code-branch"},null,-1)),zC=qt(()=>s("i",{class:"fas fa-exchange-alt"},null,-1)),WC={key:0,class:"dropdown-menu status-list"},GC={key:0,class:"row"},YC=["onClick"],KC={key:1,class:"dropdown-item",href:"javascript:;"},JC=qt(()=>s("i",{class:"far fa-hand-point-right"},null,-1)),QC={id:"my_tic"};function XC(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("team-tickets-table"),g=c("change-status-modal"),v=c("merge-ticket-modal"),b=c("assign-ticket-modal"),y=P("tooltip");return i(),l("div",SC,[s("div",$C,[s("div",FC,[d(u,{componentName:"TeamTickets"})])]),s("div",MC,[s("div",TC,[s("h3",EC,h(e.lang("tickets_of"))+" "+h(n.subString(a.name,40)),1),o.loading?(i(),l("div",LC,[S((i(),l("button",IC,qC)),[[y,e.lang("refresh")]])])):f("",!0)]),s("div",PC,[o.hasDataPopulated?(i(),l("div",VC,[s("ul",OC,[(i(!0),l(A,null,G(o.tabs,w=>(i(),l("li",NC,[s("a",{class:x(["nav-link",{active:o.category===w.id}]),href:"javascript:;","data-toggle":"pill",role:"tab",onClick:M=>n.tickets(w),id:"tickets_tab"},[F(h(e.lang(w.title))+" ",1),s("span",UC,h(w.count),1)],10,xC)]))),256))]),s("div",RC,[s("div",jC,[s("div",BC,[s("button",{type:"button",onClick:t[0]||(t[0]=w=>n.mergeTicket()),class:"btn btn-xs btn-default",id:"merge_ticket"},[HC,F(" "+h(e.lang("merge")),1)]),(i(),l("div",{class:"btn-group",key:o.statusDiv},[S((i(),l("button",{type:"button",class:"btn btn-xs btn-default dropdown-toggle","data-toggle":"dropdown",onClick:t[1]||(t[1]=w=>n.getStatusList()),id:"status"},[zC,F(" "+h(e.lang("change_status")),1)])),[[y,e.lang("change_status")]]),o.ticketId.length>0?(i(),l("div",WC,[o.statusLoader?(i(),l("div",GC,[d(m,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),o.statusLoader?f("",!0):(i(),l(A,{key:1},[o.statusList&&o.statusList.length>0?(i(!0),l(A,{key:0},G(o.statusList,w=>(i(),l("a",{class:"dropdown-item",onClick:M=>n.getStatus(w),href:"javascript:;",id:"change_status"},[s("i",{class:x(w.icon),style:Be({color:w.icon_color})},null,6),F("  "+h(w.name),1)],8,YC))),256)):f("",!0),o.statusList&&o.statusList.length===0?(i(),l("a",KC,h(e.lang("no-records")),1)):f("",!0)],64))])):f("",!0)])),o.ticketId.length>0?(i(),l("button",{key:0,type:"button",onClick:t[2]||(t[2]=w=>o.showAssignModal=!0),class:"btn btn-xs btn-default",id:"assign_ticket"},[JC,F(" "+h(e.lang("assign")),1)])):f("",!0)]),s("div",QC,[(i(),D(p,{category:o.category,id:a.id,tickets:n.ticketsData,key:o.category,isCalledFromAdmin:!0,apiUrl:o.apiUrl,componentTitle:o.componentTitle,scroll_to:"team-tickets-table",from:"team",disableLoader:a.disableLoader,onLoaderValue:n.handelLoader,allTickets:n.allData},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","onLoaderValue","allTickets"]))])])])])):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(g,{key:0,onClose:n.onClose,showModal:o.showModal,statusIds:e.statusIds,ticketIds:o.ticketId,status:o.change_status,componentTitle:o.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):f("",!0)]),_:1}),d(ye,{name:"modal"},{default:k(()=>[o.showMergeModal?(i(),D(v,{key:0,onClose:n.onClose,showModal:o.showMergeModal,parent_tickets:o.parent_tickets,ticketIds:o.ticketId,componentTitle:o.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):f("",!0)]),_:1}),d(ye,{name:"modal"},{default:k(()=>[o.showAssignModal?(i(),D(b,{key:0,onClose:n.onClose,showModal:o.showAssignModal,ticketIds:o.ticketId,componentTitle:o.componentTitle,tickets:o.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):f("",!0)]),_:1})])])])}const ZC=T(DC,[["render",XC],["__scopeId","data-v-2fa65073"]]);const e0={name:"team-report",description:"Team report page",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,timeOptions:{start:"00:00",step:"00:30",end:"23:30"}}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},beforeMount(){this.getChartData()},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{onChange(e,t){let a="date::"+e.map(r=>fe(r).format("YYYY-MM-DD HH:mm:ss")).join("~");this.updated_at=a,e&&this.getChartData()},getChartData(){this.loading=!0,L.get(this.apiUrl,{params:{"team-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(a=>(a={label:a.label,tension:.5,fill:!1,borderColor:a.border_color,pointBackgroundColor:a.point_background_color,backgroundColor:a.background_color,data:a.data},a));this.$nextTick(()=>{var a=document.getElementById("trafficBar").getContext("2d"),r={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(o,n){return""},display:function(o){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:1}}}}};new Wa(a,r)})}},components:{"date-time-field":Qe}},ea=e=>(ee("data-v-fc676e1c"),e=e(),te(),e),t0={class:"card card-light"},a0={class:"card-header"},s0={class:"card-title"},o0={key:0,class:"card-tools"},n0={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},i0=ea(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),l0=[i0],r0={class:"card-body"},d0={class:"row"},c0={class:"row"},u0={key:0,class:"col-md-12 col-sm-12 col-12"},h0=ea(()=>s("canvas",{id:"trafficBar"},null,-1)),_0=[h0],m0=ea(()=>s("hr",{class:"visible-xs-block"},null,-1));function p0(e,t,a,r,o,n){const u=c("alert"),m=c("date-time-field"),p=P("tooltip");return i(),l("div",null,[d(u,{componentName:"TeamReport"}),s("div",t0,[s("div",a0,[S((i(),l("h3",s0,[F(h(e.trans("report")),1)])),[[p,e.trans("report")]]),o.loading?(i(),l("div",o0,[S((i(),l("button",n0,l0)),[[p,e.lang("refresh")]])])):f("",!0)]),s("div",r0,[s("div",d0,[d(m,{place:e.trans("select_date_range"),label:e.trans("select_date_range"),value:o.date,type:"datetime",name:"date",onChange:n.onChange,range:"",required:!1,format:"MMMM DD YYYY, h:mm a",classname:"col-md-8 col-sm-12 col-12",clearable:!1,disabled:!1,editable:!0,currentYearDate:!1,"time-picker-options":o.timeOptions},null,8,["place","label","value","onChange","time-picker-options"])]),s("div",c0,[o.loading?f("",!0):(i(),l("div",u0,_0)),m0])])])])}const f0=T(e0,[["render",p0],["__scopeId","data-v-fc676e1c"]]),g0={name:"team-view",description:"Team view page",data(){return{teamId:"",teamData:"",loading:!0}},beforeMount(){const e=window.location.pathname;this.teamId=De(e),this.getTeamData(this.teamId)},methods:{getTeamData(e){L.get("/api/admin/team-profile/"+e).then(t=>{this.teamData=t.data.data,this.loading=!1}).catch(t=>{this.loading=!1})}},components:{"team-details":cC,"team-members":CC,"team-tickets":ZC,"team-report":f0}},v0={class:"col-sm-12"},b0={class:"row"},y0={key:0,class:"col-sm-12"},k0={class:"col-sm-3"},w0={class:"col-sm-9"};function C0(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("team-details"),p=c("team-members"),g=c("team-tickets"),v=c("team-report");return i(),l("div",v0,[s("div",b0,[o.loading?(i(),l("div",y0,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:50})])):f("",!0),o.loading?f("",!0):(i(),l(A,{key:1},[s("div",k0,[d(m,{teamData:o.teamData},null,8,["teamData"])]),s("div",w0,[d(p,{disableLoader:"true",id:o.teamId},null,8,["id"]),d(g,{disableLoader:"true",id:o.teamId,name:o.teamData.name},null,8,["id","name"]),d(v,{id:o.teamId},null,8,["id"])])],64))])])}const D0=T(g0,[["render",C0]]);const S0={name:"email-exception-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},exception:{type:[String,Object],default:""}},data:()=>({containerStyle:{width:"950px"},content:""}),beforeMount(){this.updateContent()},methods:{updateContent(){this.exception&&this.exception.trace&&(this.content=this.contentParser(this.exception.trace.replaceAll(`<br />\r
`,"")))},contentParser(e){var t=new DOMParser,a=t.parseFromString(e,"text/html");const r=a.getElementsByTagName("body")[0];return r.querySelectorAll("a").forEach(n=>{let m=n.href.replace(this.basePath(),"").split("/").filter(p=>p);if(m[0]=="change-approval"||m[0]=="service-desk"&&m[1]=="contract-approval")n=n;else{const p=a.createElement("a");!n.href.includes("/panel/")&&!n.href.includes("/ticket-conversation/")&&!n.href.includes("/agent/export/download/")&&!n.href.includes("/check-ticket/")?p.setAttribute("href",n.href.replace(this.basePath(),this.basePath()+"/panel")):p.setAttribute("href",n.href),p.innerText=n.innerText,n.parentNode.replaceChild(p,n)}}),r.innerHTML}}},$0={class:"modal-title"},F0={class:"mod_width"},M0={key:0},T0=["innerHTML"];function E0(e,t,a,r,o,n){const u=c("modal");return a.showModal?(i(),D(u,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",$0,h(e.trans("exception")),1)]),fields:k(()=>[s("div",F0,[a.exception.message?(i(),l("p",M0,h(a.exception.message),1)):f("",!0),e.content?(i(),l("p",{key:1,innerHTML:e.content,class:"trace"},null,8,T0)):f("",!0)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const L0=T(S0,[["render",E0]]),I0={name:"email-status",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{data:{type:Object,default:()=>{}},status:{type:String,default:""}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"email-exception":L0}},A0={class:"email-status"},q0={key:0},P0={key:1};function V0(e,t,a,r,o,n){const u=c("email-exception"),m=P("tooltip");return i(),l("div",A0,[a.data[a.status+"_status"]?(i(),l(A,{key:0},[typeof a.data[a.status+"_status"]=="string"?(i(),l("span",q0,h(e.trans(a.data[a.status+"_status"])),1)):f("",!0),typeof a.data[a.status+"_status"]=="object"?(i(),l(A,{key:1},[S((i(),l("span",{class:x("badge badge-"+a.data[a.status+"_status"].class)},[F(h(e.trans(a.data[a.status+"_status"].status)),1)],2)),[[m,r.formattedTime(a.data[a.status+"_status"].updated_at)]]),a.data[a.status+"_status"].exception?(i(),l("i",{key:0,class:"fas fa-question-circle text-primary ml-1 pointer",onClick:t[0]||(t[0]=p=>o.showModal=!0)})):f("",!0)],64)):f("",!0)],64)):(i(),l("span",P0,"--")),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,exception:a.data[a.status+"_status"].exception},null,8,["onClose","showModal","exception"])):f("",!0)]),_:1})])}const ba=T(I0,[["render",V0]]);const O0={name:"emails-index",description:"Emails lists table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data(){return{columns:["email_address","priority","department","help_topic","incoming_status","outgoing_status","created_at","updated_at","actions"],options:{}}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{email_address:"email-address",priority:"email-priority",department:"email-dept",created_at:"email-create",updated_at:"email-update",help_topic:"email-topic",actions:"email-actions"},headings:{incoming_status:()=>{let t=e.h("i",{class:"text-primary fas fa-arrow-circle-down"});return e.h("span",{},[this.lang("incoming-status")+"  ",t])},outgoing_status:()=>{let t=e.h("i",{class:"text-primary fas fa-arrow-circle-up"});return e.h("span",{},[this.lang("outgoing-status")+"  ",t])},email_address:this.trans("email_address"),priority:this.trans("priority"),department:this.trans("department"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),help_topic:this.trans("help_topic"),actions:this.trans("actions")},texts:{filter:"",limit:"",filterPlaceholder:"Search by email address"},templates:{priority(t,a){return a.priority?a.priority.name:"--"},department(t,a){return a.department?a.department.name:"--"},help_topic(t,a){return a.help_topic?a.help_topic.name:"--"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},created_at:function(t,a){return e.formattedTime(a.created_at)},email_address:function(t,a){if(a.is_default){let r=e.h("span",{class:"badge badge-warning"},"Default");return e.h(jt,{to:"/email/"+a.id+"/edit"},[a.email_address+"  ",r])}else return e.h(jt,{to:"/email/"+a.id+"/edit"},[a.email_address])},incoming_status(t,a){return e.h(ba,{data:a,status:"incoming"})},outgoing_status(t,a){return e.h(ba,{data:a,status:"outgoing"})},actions:function(t,a){return e.h(Se,{data:a})}},sortable:["email_address","priority","department","help_topic","created_at","updated_at"],filterable:["email_address"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.updateMailConfigMsg(t.data.total),{data:t.data.emails.map(a=>(a.edit_url="/email/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/email-delete/"+a.id,a)),count:t.data.total}}}},methods:{updateMailConfigMsg(e){window.emitter.emit("checkMailConfig",e)}}},N0={class:"col-sm-12"},x0={class:"card card-light"},U0={class:"card-header"},R0={id:"emails-index",class:"card-title"},j0={class:"card-tools"},B0=s("i",{class:"glyphicon glyphicon-plus"},null,-1),H0={class:"card-body",id:"emails_index"};function z0(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",N0,[d(u,{componentName:"dataTableModal"}),s("div",x0,[s("div",U0,[s("h3",R0,h(e.trans("list_of_emails")),1),s("div",j0,[S((i(),D(m,{class:"btn btn-tool",to:"/email/create"},{default:k(()=>[B0]),_:1})),[[g,e.trans("create_email")]])])]),s("div",H0,[d(p,{url:"/api/emails-list",dataColumns:o.columns,option:o.options,scroll_to:"emails-index"},null,8,["dataColumns","option"])])])])}const W0=T(O0,[["render",z0]]);function G0(e){const{email_address:t,email_name:a,password:r,fetching_protocol:o,fetching_host:n,fetching_status:u,fetching_encryption:m,fetching_port:p,sending_protocol:g,sending_status:v,sending_host:b,sending_port:y,sending_encryption:w,api_key:M,secret:C,domain:E,region:R,version:z}=e;let J={email_address:[t,"isRequired","isEmail"],email_name:[a,"isRequired","isAlphaNumeric(false)","max(50)","min(2)"]};u==1&&(J.fetching_protocol=[o,"isRequired"]),v==1&&(J.sending_protocol=[g,"isRequired"]),_s(e)&&(J.password=[r,"isRequired","min(3)","max(255)"]),ta(e)&&(J.fetching_host=[n,"isRequired"]),ms(e)&&(J.fetching_port=[p,"isRequired"]),ps(e)&&(J.fetching_encryption=[m,"isRequired"]),Pt(e)&&(J.sending_host=[b,"isRequired"]),fs(e)&&(J.sending_port=[y,"isRequired"]),gs(e)&&(J.sending_encryption=[w,"isRequired"]),vs(e)&&(J.api_key=[M,"isRequired"]),bs(e)&&(J.secret=[C,"isRequired"]),ys(e)&&(J.domain=[E,"isRequired"]),ks(e)&&(J.region=[R,"isRequired"]),aa(e)&&(J.version=[z,"isRequired"]);const we=new he(O),{errors:_e,isValid:ue}=we.validate(J);return de.dispatch("setValidationError",_e),{errors:_e,isValid:ue}}function _s(e){const{fetching_status:t,sending_protocol:a,sending_status:r}=e;return r==1&&(a==="smtp"||a==="ews")||t==1}function ta(e){const{fetching_status:t}=e;return t==1}function ms(e){if(ta(e)){const{fetching_protocol:t}=e;return t!=="ews"}return!1}function ps(e){if(ta(e)){const{fetching_protocol:t}=e;return t!=="ews"}return!1}function Pt(e){const{sending_status:t,sending_protocol:a}=e;return t==1&&(a=="smtp"||a=="ews")}function fs(e){if(Pt(e)){const{sending_protocol:t}=e;return t!=="ews"}return!1}function gs(e){if(Pt(e)){const{sending_protocol:t}=e;return t!=="ews"}return!1}function vs(e){const{sending_protocol:t}=e;return t==="ses"}function bs(e){const{sending_protocol:t}=e;return t==="mailgun"||t==="mandrill"||t==="sparkpost"||t==="ses"}function ys(e){const{sending_protocol:t}=e;return t==="mailgun"}function ks(e){const{sending_protocol:t}=e;return t==="ses"}function aa(e){const{version:t,fetching_protocol:a,sending_protocol:r}=e;return a=="ews"||r=="ews"}const Y0={name:"fetching-protocol",description:"contains fetching protocol form fields for email settings",props:["fetching_protocol","fetching_encryption","fetching_host","fetching_port","fetching_status","onChange","delete_email","version"],data(){return{fetching_protocols:[{id:"imap",name:"IMAP"},{id:"pop3",name:"POP3"},{id:"ews",name:"Exchange Web Services"}],fetching_encryptions:[{id:"none",name:"None"},{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"},{id:"starttls",name:"STARTTLS"}],versions:[{id:"Exchange2007",name:"Microsoft Exchange 2007"},{id:"Exchange2007_SP1",name:"Microsoft Exchange 2007 SP1"},{id:"Exchange2009",name:"Microsoft Exchange 2007 SP2"},{id:"Exchange2010",name:"Microsoft Exchange 2010"},{id:"Exchange2010_SP1",name:"Microsoft Exchange 2010 SP1"},{id:"Exchange2010_SP2",name:"Microsoft Exchange 2010 SP2"},{id:"Exchange2013",name:"Microsoft Exchange 2013"},{id:"Exchange2013_SP1",name:"Microsoft Exchange 2013 SP1"},{id:"Exchange2016",name:"Microsoft Exchange 2016"}],protocalDisable:!1}},created(){window.emitter.on("makeEwsDefault",()=>{this.protocalDisable=!0}),window.emitter.on("makeEwsNotDefault",()=>{this.protocalDisable=!1})},computed:{shallPortBeVisible(){return ms(this.$props)},shallEncryptionBeVisible(){return ps(this.$props)},shallVersionBeVisible(){return aa(this.$props)}},components:{"static-select":xe,"text-field":oe,checkbox:et}},K0={class:"row"},J0={class:"fetching-meta-actions"};function Q0(e,t,a,r,o,n){const u=c("static-select"),m=c("text-field"),p=c("checkbox");return i(),l("div",{class:x(["protocol",{"protocol-settings":a.fetching_status==1}])},[s("div",K0,[d(u,{label:e.lang("fetching_protocol"),elements:o.fetching_protocols,disabled:o.protocalDisable,name:"fetching_protocol",value:a.fetching_protocol,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","disabled","value","onChange"]),d(m,{label:e.lang("host_name"),value:a.fetching_host,name:"fetching_host",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"]),n.shallPortBeVisible?(i(),D(m,{key:0,id:"fetching-port",label:e.lang("port"),value:a.fetching_port,name:"fetching_port",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),type:"number",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.shallEncryptionBeVisible?(i(),D(u,{key:1,id:"fetching-encryption",label:e.lang("encryption"),elements:o.fetching_encryptions,name:"fetching_encryption",value:a.fetching_encryption,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),n.shallVersionBeVisible?(i(),D(u,{key:2,id:"version",label:e.lang("version"),elements:o.versions,name:"version",value:a.version,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0)]),s("div",J0,[d(p,{id:"delete-email",name:"delete_email",value:a.delete_email,label:e.lang("delete_mail_after_fetch"),onChange:a.onChange,classname:"col-sm-4",hint:e.lang("delete_mail_notes")},null,8,["value","label","onChange","hint"])])],2)}const X0=T(Y0,[["render",Q0]]);const Z0={name:"sending-protocol",description:"contains sending protocol form fields for email settings",props:["onChange","sending_protocol","sending_encryption","sending_host","sending_port","sending_status","api_key","domain","secret","region","version"],data(){return{sending_protocols:[{id:"smtp",name:"SMTP"},{id:"mail",name:"Php mail"},{id:"mailgun",name:"Mailgun"},{id:"mandrill",name:"Mandrill"},{id:"ses",name:"SES"},{id:"sparkpost",name:"Sparkpost"},{id:"ews",name:"Exchange Web Services"}],sending_encryptions:[{id:"none",name:"None"},{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"},{id:"starttls",name:"STARTTLS"}],versions:[{id:"Exchange2007",name:"Microsoft Exchange 2007"},{id:"Exchange2007_SP1",name:"Microsoft Exchange 2007 SP1"},{id:"Exchange2009",name:"Microsoft Exchange 2007 SP2"},{id:"Exchange2010",name:"Microsoft Exchange 2010"},{id:"Exchange2010_SP1",name:"Microsoft Exchange 2010 SP1"},{id:"Exchange2010_SP2",name:"Microsoft Exchange 2010 SP2"},{id:"Exchange2013",name:"Microsoft Exchange 2013"},{id:"Exchange2013_SP1",name:"Microsoft Exchange 2013 SP1"},{id:"Exchange2016",name:"Microsoft Exchange 2016"}],protocalDisable:!1}},created(){window.emitter.on("makeEwsDefault",()=>{this.protocalDisable=!0}),window.emitter.on("makeEwsNotDefault",()=>{this.protocalDisable=!1})},computed:{hasApiKey(){return vs(this.$props)},hasSecret(){return bs(this.$props)},hasDomain(){return ys(this.$props)},hasRegion(){return ks(this.$props)},hasHost(){return Pt(this.$props)},shallPortBeVisible(){return fs(this.$props)},shallEncryptionBeVisible(){return gs(this.$props)},shallVersionBeVisible(){return aa(this.$props)}},components:{"static-select":xe,"text-field":oe,checkbox:et}};function e2(e,t,a,r,o,n){const u=c("static-select"),m=c("text-field");return i(),l("div",{class:x(["row","protocol",{"protocol-settings":a.sending_status==1}])},[d(u,{label:e.lang("transfer_protocol"),elements:o.sending_protocols,disabled:o.protocalDisable,name:"sending_protocol",value:a.sending_protocol,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","disabled","value","onChange"]),n.hasHost?(i(),D(m,{key:0,label:e.lang("host_name"),value:a.sending_host,name:"sending_host",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.shallPortBeVisible?(i(),D(m,{key:1,id:"sending-port",label:e.lang("port_number"),value:a.sending_port,name:"sending_port",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),type:"number",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.shallEncryptionBeVisible?(i(),D(u,{key:2,id:"sending-encryption",label:e.lang("encryption"),elements:o.sending_encryptions,name:"sending_encryption",value:a.sending_encryption,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),n.shallVersionBeVisible?(i(),D(u,{key:3,id:"version",label:e.lang("version"),elements:o.versions,name:"version",value:a.version,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),n.hasApiKey?(i(),D(m,{key:4,label:e.lang("api_key"),value:a.api_key,name:"api_key",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.hasSecret?(i(),D(m,{key:5,label:e.lang("secret"),value:a.secret,name:"secret",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.hasDomain?(i(),D(m,{key:6,label:e.lang("domain"),value:a.domain,name:"domain",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),n.hasRegion?(i(),D(m,{key:7,label:e.lang("region"),value:a.region,name:"region",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0)],2)}const t2=T(Z0,[["render",e2],["__scopeId","data-v-82a95e72"]]);const a2={name:"email-settings",description:"email settings page",beforeMount(){this.setMode(),this.getInitialValues();let e=new URLSearchParams(window.location.search);e.get("error")&&this.$store.dispatch("setAlert",{type:"danger",message:e.get("error"),component_name:"email-setting"})},data:()=>({oauth_check:!1,is_oauth:0,radioOptions:[{name:"basic_auth",value:0,disabled:!1},{name:"oauth_auth",value:1,disabled:!1}],id:null,department:"",priority:"",helptopic:"",email_address:"",email_name:"",user_name:"",password:"",fetching_status:!0,fetching_protocol:"",fetching_encryption:"",fetching_host:"",fetching_port:"",sending_status:!0,sending_protocol:"",sending_encryption:"",sending_host:"",sending_port:"",api_key:"",secret:"",region:"",domain:"",version:"",is_system_default:!1,delete_email:!1,inline_as_cids:!1,loading:!0,loadingSpeed:4e3,internal_notes:"",hasDataPopulated:!1,mode:"create",iconClass:"fas fa-save",btnName:"save",emailNameDisabled:!1,userNameDisabled:!1,mailDisabled:!1,providerList:[],oauth_active:!0,security_hash:""}),methods:{getProviders(){this.loading=!0,L.get("/get/oauth-user-providers").then(e=>{this.providerList=e.data.providers,this.oauth_active=e.data.oauth_active,this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],this.loading=!1}).catch(e=>{this.loading=!1,this.providerList=[]})},onMS(e){if(this.email_name&&this.email_address){this.loading=!0;let t={};t.key=e,t.email_id=De(window.location.pathname),t.email=this.email_address,t.user_name=this.user_name,t.name=this.email_name,L.post("/api/email/oauth-settings",t).then(a=>{N(a),setTimeout(()=>{location.href=a.data.data.url},2e3),this.loading=!1}).catch(a=>{I(a),this.loading=!1})}else this.$store.dispatch("setAlert",{type:"danger",message:"Email address and Name are required fields",component_name:"email-setting"})},onMSSignout(){this.loading=!0;let e=this.mode!="edit"?"/oauth/sign-out/"+this.security_hash:"/oauth/sign-out/"+this.security_hash+"/"+De(window.location.pathname);L.get(e).then(t=>{this.security_hash="",N(t),setTimeout(()=>{this.mode==="edit"?this.getInitialValues():this.$router.push({name:"Email Create"})},2e3),this.loading=!1}).catch(t=>{I(t),this.loading=!1})},checkValues(e=""){if(this.getProviders(),this.security_hash){this.password="password",this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],this.loading=!0;let t=this.mode!="edit"?"/get/security-hash/"+this.security_hash:"/get/security-hash/"+this.security_hash+"/"+De(window.location.pathname);L.get(t).then(a=>{new URLSearchParams(window.location.search).get("security_hash")&&N(a),window.emitter.emit("makeEwsDefault"),this.sending_protocol="ews",this.fetching_protocol="ews",this.is_oauth=a.data.data.is_oauth?1:0,this.oauth_check=!!a.data.data.key,a.data.data.email?(this.email_address=a.data.data.email,this.mailDisabled=!0):this.mailDisabled=!1,a.data.data.user_name?(this.user_name=a.data.data.user_name,this.userNameDisabled=!0):this.userNameDisabled=!1,a.data.data.name?(this.email_name=a.data.data.name,this.emailNameDisabled=!0):this.emailNameDisabled=!1,this.loading=!1}).catch(a=>{this.loading=!1,I(a),setTimeout(()=>{this.$router.push({name:"Email Create"})},2e3)})}else this.password="",this.is_oauth=0,this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],window.emitter.emit("makeEwsNotDefault"),this.oauth_check=!1,this.mailDisabled=!1,this.userNameDisabled=!1,this.emailNameDisabled=!1,e!="edit"&&(this.user_name="",this.email_name="",this.sending_protocol="",this.fetching_protocol="",this.email_address="")},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create"},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="update";const e=window.location.pathname,t=De(e);L.get(`/api/email-settings/${t}`).then(a=>{this.updateStatesWithData(a.data.data),this.hasDataPopulated=!0,this.loading=!1;let r=new URLSearchParams(window.location.search);this.security_hash=r.get("security_hash")?r.get("security_hash"):a.data.data.security_hash,this.checkValues("edit")}).catch(a=>{I(a),this.hasDataPopulated=!0,this.loading=!1})}else{this.hasDataPopulated=!0,this.loading=!1;let e=new URLSearchParams(window.location.search);this.security_hash=e.get("security_hash"),this.checkValues()}},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),t.api_key=e.key},isValid(){const{errors:e,isValid:t}=G0(this.$data);return!!t},onSubmit(){this.isValid()&&(this.loadingSpeed=8e3,this.loading=!0,L.post("/api/admin/email-settings",{id:this.id,department:this.department!==null?this.department.id:null,priority:this.priority!==null?this.priority.id:null,help_topic:this.helptopic!==null?this.helptopic.id:null,email_address:this.email_address,user_name:this.user_name,email_name:this.email_name,password:this.password,fetching_status:this.fetching_status,fetching_protocol:this.fetching_protocol,fetching_encryption:this.fetching_encryption,fetching_host:this.fetching_host,fetching_port:this.fetching_port,delete_email:this.delete_email,sending_status:this.sending_status,sending_protocol:this.sending_protocol,sending_encryption:this.sending_encryption,sending_host:this.sending_host,sending_port:this.sending_port,key:this.api_key,secret:this.secret,region:this.region,domain:this.domain,version:this.version,is_system_default:this.is_system_default,internal_notes:this.internal_notes,inline_as_cids:this.inline_as_cids,is_oauth:this.is_oauth}).then(e=>{this.loading=!1,N(e),this.redirectIfNeeded()}).catch(e=>{this.loading=!1,I(e)}))},redirectIfNeeded(){this.mode==="create"&&setTimeout(()=>{this.$router.push({name:"Emails Index"})},3e3)},onChange(e,t){this[t]=e}},computed:{hasPassword(){return _s(this.$data)}},components:{"text-field":oe,"dynamic-select":Me,"fetching-protocol":X0,"sending-protocol":t2,"status-switch":Oe,checkbox:et,"tool-tip":Ae,"radio-button":Le}},s2={class:"col-sm-12"},o2={key:0,class:"row"},n2={class:"row mb-2"},i2={class:"row"},l2={class:"row"},r2={key:0,id:"o_auth",class:"col-sm-12"},d2={key:0},c2={href:"javascript:;"},u2=["disabled"],h2={for:"oauth-check",id:"oauth-check-label"},_2=["src"],m2={class:"text-dark"},p2=["onClick"],f2=s("i",{class:"fab fa-microsoft"},null,-1),g2=["onClick"],v2=s("i",{class:"fab fa-microsoft"},null,-1),b2={class:"row"},y2={class:"card-tools switch-pos"},k2={class:"card-tools switch-pos"},w2={class:"row"},C2={class:"row"},D2={class:"card-footer"},S2=["disabled"];function $2(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("radio-button"),g=c("text-field"),v=c("faveo-box"),b=c("tool-tip"),y=c("dynamic-select"),w=c("status-switch"),M=c("fetching-protocol"),C=c("sending-protocol"),E=c("checkbox"),R=P("focus-first-input");return i(),l("div",s2,[e.hasDataPopulated===!1||e.loading===!0?(i(),l("div",o2,[d(u,{duration:e.loadingSpeed},null,8,["duration"])])):f("",!0),d(m),d(m,{componentName:"email-setting"}),e.hasDataPopulated?(i(),D(v,{key:1,title:e.lang("email_settings")},{actions:k(()=>[s("div",D2,[s("button",{type:"button",onClick:t[1]||(t[1]=(...z)=>n.onSubmit&&n.onSubmit(...z)),disabled:e.loading,class:"btn btn-primary update-btn"},[s("span",{class:x(e.iconClass)},null,2),F(" "+h(e.lang(e.btnName)),1)],8,S2)])]),default:k(()=>[d(v,{title:e.lang("email_info")},{default:k(()=>[s("div",n2,[d(p,{options:e.radioOptions,label:e.lang("is_oauth"),name:"is_oauth",value:e.is_oauth,onChange:n.onChange,classname:"form-group col-sm-5",optionClass:"col-sm-6",labelStyle:{display:"none"}},null,8,["options","label","value","onChange"])]),S((i(),l("div",i2,[d(g,{label:e.lang("email"),value:e.email_address,type:"email",name:"email_address",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",required:!0,disabled:e.mailDisabled},null,8,["label","value","onChange","placehold","disabled"]),d(g,{label:e.lang("user_name"),value:e.user_name,type:"email",name:"user_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",hint:e.lang("user_name_hint"),disabled:e.userNameDisabled},null,8,["label","value","onChange","placehold","hint","disabled"]),d(g,{label:e.lang("name"),value:e.email_name,name:"email_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",hint:e.lang("email_name_hint"),required:!0,disabled:e.emailNameDisabled},null,8,["label","value","onChange","placehold","hint","disabled"]),n.hasPassword&&!e.is_oauth?(i(),D(g,{key:0,label:e.lang("password"),type:"password",value:e.password,name:"password",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0)])),[[R]]),s("div",l2,[e.is_oauth?(i(),l("div",r2,[e.providerList.length?(i(),l("ul",d2,[(i(!0),l(A,null,G(e.providerList,(z,J)=>(i(),l("li",{key:J},[s("a",c2,[S(s("input",{type:"checkbox",id:"oauth-check","onUpdate:modelValue":t[0]||(t[0]=we=>e.oauth_check=we),disabled:e.security_hash},null,8,u2),[[$e,e.oauth_check]]),s("label",h2,[s("img",{src:e.basePathVersion()+"/themes/default/common/images/msoffice.png"},null,8,_2),s("p",m2,h(z),1)]),e.oauth_check&&!e.security_hash?(i(),l("button",{key:0,type:"button",class:"btn btn-default btn-block",onClick:we=>n.onMS(z)},[f2,F("  "+h(e.lang("sign_with_microsoft")),1)],8,p2)):f("",!0),e.oauth_check&&e.security_hash?(i(),l("button",{key:1,type:"button",class:"btn btn-default btn-block",onClick:we=>n.onMSSignout(z)},[v2,F("  "+h(e.lang("sign_out")),1)],8,g2)):f("",!0)])]))),128))])):f("",!0)])):f("",!0)])]),_:1},8,["title"]),d(v,{title:e.lang("ticket_settings")},{headerTooltip:k(()=>[d(b,{message:e.lang("ticket_settings_note"),size:"medium"},null,8,["message"])]),default:k(()=>[s("div",b2,[d(y,{label:e.lang("department"),multiple:!1,name:"department",classname:"col-sm-4",apiEndpoint:"/api/dependency/departments",value:e.department,onChange:n.onChange},null,8,["label","value","onChange"]),d(y,{label:e.lang("help_topic"),multiple:!1,name:"helptopic",classname:"col-sm-4",apiEndpoint:"/api/dependency/help-topics",value:e.helptopic,onChange:n.onChange},null,8,["label","value","onChange"]),d(y,{label:e.lang("priority"),multiple:!1,name:"priority",classname:"col-sm-4",apiEndpoint:"/api/dependency/priorities",value:e.priority,onChange:n.onChange},null,8,["label","value","onChange"])])]),_:1},8,["title"]),d(v,{title:e.lang("incoming_email")},{headerTooltip:k(()=>[d(b,{message:e.lang("incoming_emails_note"),size:"medium"},null,8,["message"])]),headerMenu:k(()=>[s("div",y2,[d(w,{name:"fetching_status",value:e.fetching_status,onChange:n.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])]),default:k(()=>[d(M,{onChange:n.onChange,fetching_protocol:e.fetching_protocol,fetching_encryption:e.fetching_encryption,fetching_host:e.fetching_host,fetching_port:e.fetching_port,fetching_status:e.fetching_status,delete_email:e.delete_email,version:e.version},null,8,["onChange","fetching_protocol","fetching_encryption","fetching_host","fetching_port","fetching_status","delete_email","version"])]),_:1},8,["title"]),d(v,{title:e.lang("outgoing_email")},{headerTooltip:k(()=>[d(b,{message:e.lang("outgoing_emails_note"),size:"medium"},null,8,["message"])]),headerMenu:k(()=>[s("div",k2,[d(w,{name:"sending_status",value:e.sending_status,onChange:n.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])]),default:k(()=>[d(C,{type:"send",onChange:n.onChange,sending_protocol:e.sending_protocol,sending_encryption:e.sending_encryption,sending_host:e.sending_host,sending_port:e.sending_port,sending_status:e.sending_status,api_key:e.api_key,secret:e.secret,domain:e.domain,region:e.region,version:e.version},null,8,["onChange","sending_protocol","sending_encryption","sending_host","sending_port","sending_status","api_key","secret","domain","region","version"]),s("div",w2,[d(g,{label:e.lang("internal_notes"),value:e.internal_notes,type:"textarea",name:"internal_notes",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12"},null,8,["label","value","onChange","placehold"]),d(E,{name:"inline_as_cids",value:e.inline_as_cids,label:e.lang("send_inline_images_as_cids"),onChange:n.onChange,classname:"col-lg-12"},null,8,["value","label","onChange"])]),s("div",C2,[d(E,{name:"is_system_default",value:e.is_system_default,label:e.lang("make_system_default_mail"),onChange:n.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])])]),_:1},8,["title"])]),_:1},8,["title"])):f("",!0)])}const ya=T(a2,[["render",$2]]);function F2(e){const{from:t,to:a,subject:r,message:o}=e;let n={from:[t,"isRequired"],to:[a,"isRequired","isEmail"],subject:[r,"isRequired"],message:[o,"isRequired"]};const u=new he(O),{errors:m,isValid:p}=u.validate(n);return de.dispatch("setValidationError",m),{errors:m,isValid:p}}const M2={name:"email-diagno",data(){return{from:"",to:"",subject:"",message:"",loading:!1}},methods:{onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=F2(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.from=this.from.id,e.to=this.to,e.subject=this.subject,e.message=this.message.replace(/\r?\n/g,"<br />"),L.post("/api/postdiagno",e).then(t=>{this.loading=!1,N(t,"email-diagno"),this.resetFields()}).catch(t=>{this.loading=!1,I(t,"email-diagno")})}},resetFields(){this.from="",this.to="",this.subject="",this.message=""},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"dynamic-select":Me}},T2={class:"col-sm-12"},E2={class:"card card-light"},L2={class:"card-header"},I2={class:"card-title"},A2={class:"card-body"},q2={class:"row"},P2={class:"row"},V2={class:"card-footer"},O2=s("i",{class:"fas fa-paper-plane"},null,-1),N2={key:0,class:"row"};function x2(e,t,a,r,o,n){const u=c("alert"),m=c("dynamic-select"),p=c("text-field"),g=c("custom-loader");return i(),l("div",T2,[d(u,{componentName:"email-diagno"}),s("div",E2,[s("div",L2,[s("h3",I2,h(e.trans("send-mail-to-diagnos")),1)]),s("div",A2,[s("div",q2,[d(m,{label:e.trans("from"),multiple:!1,name:"from",classname:"col-sm-6",apiEndpoint:"api/emails-list?outgoing_emails=true",value:o.from,onChange:n.onChange,strlength:60,required:!0,clearable:!!o.from},null,8,["label","value","onChange","clearable"]),d(p,{label:e.trans("to"),value:o.to,type:"text",name:"to",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",keyupListener:n.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"])]),s("div",P2,[d(p,{label:e.trans("subject"),value:o.subject,type:"text",name:"subject",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",keyupListener:n.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),d(p,{label:e.trans("message"),value:o.message,type:"textarea",name:"message",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",keyupListener:n.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"])])]),s("div",V2,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...v)=>n.onSubmit&&n.onSubmit(...v))},[O2,F(" "+h(e.trans("send")),1)])])]),o.loading?(i(),l("div",N2,[d(g,{duration:4e3})])):f("",!0)])}const U2=T(M2,[["render",x2]]),R2={data(){return{columns:["provider","is_active","action"],options:{},apiUrl:"/get/oauth-integration"}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},columnsClasses:{provider:"oauth-provider",is_active:"oauth-status"},headings:{provider:this.lang("provider"),is_active:this.lang("status"),action:this.lang("action")},templates:{provider(t,a){return a.provider?a.provider:"--"},is_active(t,a){return a.is_active?e.h("p",{style:{color:"green"}},"Active"):e.h("p",{style:{color:"red"}},"Inactive")},action:function(t,a){return e.h(Se,{data:a})}},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.current_page,limit:t.per_page}},responseAdapter({data:t}){return{data:t.map(a=>(a.settings_url="/email/oauth/"+a.id,a)),count:t.length}}}}},j2={class:"col-sm-12"},B2={class:"card card-light oauth-table"},H2={class:"card-header"},z2={id:"oauth-list",class:"card-title"},W2={class:"card-body",id:"oauth-table"};function G2(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",j2,[d(u,{componentName:"dataTableModal"}),s("div",B2,[s("div",H2,[s("h3",z2,h(e.lang("oauth_integration")),1)]),s("div",W2,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"oauth-list"},null,8,["url","dataColumns","option"])])])])}const Y2=T(R2,[["render",G2]]);function K2(e){const{client_id:t,client_secret:a}=e;var r={client_id:[t,"isRequired"],client_secret:[a,"isRequired"]};const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}const J2={name:"oauth-settings",data(){return{loading:!1,provider:"",client_id:"",client_secret:"",redirect_url:"",status:1,details:"",radioOptions:[{name:"yes",value:1},{name:"no",value:0}],copied:!1}},beforeMount(){const e=window.location.pathname;this.provider_id=De(e),this.getInitialValues()},methods:{onCopy(){Xe(this.redirect_url),this.copied=!0,setTimeout(()=>{this.copied=!1},5e3)},getInitialValues(){this.loading=!0,L.get("/get/oauth-integration/"+this.provider_id).then(e=>{this.details=e.data,this.provider=this.details.provider,this.status=this.details.is_active,this.client_id=this.details.client_id?this.details.client_id:"",this.client_secret=this.details.client_secret?this.details.client_secret:"",this.redirect_url=this.details.redirect_uri,this.loading=!1}).catch(e=>{I(e,"OAuthSettings")})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=K2(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.client_id=this.client_id,e.client_secret=this.client_secret,e.id=this.provider_id,e.is_active=this.status,L.post("/api/oauth-integration/update",e).then(t=>{this.loading=!1,N(t,"OAuthSettings")}).catch(t=>{this.loading=!1,I(t,"OAuthSettings")})}}},components:{"text-field":oe,"radio-button":Le,"tool-tip":Ae}},Q2=e=>(ee("data-v-408e3b79"),e=e(),te(),e),X2={class:"col-sm-12"},Z2={key:0,class:"row"},eD={key:1},tD={class:"card card-light"},aD={class:"card-header"},sD={class:"card-title"},oD=["href"],nD={class:"card-body"},iD={class:"row"},lD={class:"row"},rD={class:"col-sm-1"},dD={class:"card-footer"},cD=Q2(()=>s("i",{class:"fas fa-save"},null,-1));function uD(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("tool-tip"),g=c("text-field"),v=c("radio-button"),b=P("focus-first-input"),y=P("tooltip");return i(),l("div",X2,[d(u,{componentName:"OAuthSettings"}),o.loading?(i(),l("div",Z2,[d(m,{duration:4e3})])):(i(),l("div",eD,[s("div",tD,[s("div",aD,[s("h3",sD,h(o.provider)+" "+h(e.trans("settings"))+"  ",1),o.details.refer_uri&&!o.details.isWhiteLabeled?(i(),l("a",{key:0,href:o.details.refer_uri,target:"__blank"},[d(p,{slot:"headerTooltip",message:e.trans("click-here-to-see-more-details"),size:"medium"},null,8,["message"])],8,oD)):f("",!0)]),s("div",nD,[S((i(),l("div",iD,[d(g,{id:"client-id",label:e.trans("client-id"),value:o.client_id,type:"text",name:"client_id",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{id:"client-secret",label:e.trans("client-secret"),value:o.client_secret,type:"text",name:"client_secret",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[b]]),s("div",lD,[d(g,{id:"redirect-url",label:e.trans("redirect-url"),value:o.redirect_url,type:"text",name:"redirect_url",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-5",required:!0,disabled:!0},null,8,["label","value","onChange","placehold"]),s("div",rD,[S((i(),l("a",{class:"btn btn-default uri-copy",onClick:t[0]||(t[0]=lt(w=>n.onCopy(),["prevent"]))},[s("span",{class:x(o.copied?"fas fa-check text-green":"fa fa-clipboard"),id:"eye"},null,2)])),[[y,o.copied?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])]),d(v,{options:o.radioOptions,label:e.lang("activate_login_via")+" "+e.lang(o.provider),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])]),s("div",dD,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=w=>n.onSubmit())},[cD,F(" "+h(e.trans("save")),1)])])])]))])}const hD=T(J2,[["render",uD],["__scopeId","data-v-408e3b79"]]);const _D={props:["item","indexValue"],data(){return{}},components:{},methods:{},mounted(){}},mD=e=>(ee("data-v-636d5ea2"),e=e(),te(),e),pD={class:"tree-node",ref:"closemenu"},fD={class:"nodrag"},gD=mD(()=>s("span",{"handle-left":20,"handle-top":20,class:"handle"},[s("i",{class:"fa fa-list glypic-li","aria-hidden":"true"})],-1)),vD={class:"contnt"},bD={class:"colp"},yD={class:"col-open"};function kD(e,t,a,r,o,n){return i(),l("div",pD,[s("span",fD,[gD,s("div",vD,[s("div",bD,[s("label",yD,h(a.item.breakline),1)])])])],512)}const wD=T(_D,[["render",kD],["__scopeId","data-v-636d5ea2"]]);const CD={data(){return{list:[],base:window.axios.defaults.baseURL,lang_locale:"",loading:!0}},props:{url:{type:String,default:""},onClose:{type:Function,default:()=>[]},reorder_type:{type:String,default:"breakline"}},components:{"breakline-menu":wD,draggable:He},beforeMount(){this.lang_locale=localStorage.getItem("LANGUAGE"),axios.get(this.url).then(e=>{this.list=e.data.message.breakline,this.loading=!1}).catch(e=>{this.loading=!1})},methods:{reOrder(e){this.loading=!0;var t=new FormData;for(var a in this.list)t.append("enforcers["+a+"][id]",this.list[a].id),t.append("enforcers["+a+"][breakline]",this.list[a].breakline);t.append("type",this.reorder_type);const r={headers:{"Content-Type":"multipart/form-data"}};axios.post("/api/reorder-enforcer-list",t,r).then(o=>{this.loading=!1,this.onClose(),successHandler(o,"dataTableModal")}).catch(o=>{this.loading=!1,this.onClose(),I(o,"dataTableModal")})},showTable(){this.onClose()}}},ws=e=>(ee("data-v-59596a6c"),e=e(),te(),e),DD={class:"ml_10"},SD={key:0},$D={class:"col-sm-12 mt-4 ml-1"},FD=ws(()=>s("span",{class:"fas fa-save"},null,-1)),MD=ws(()=>s("span",{class:"fas fa-times"},null,-1)),TD={key:1,class:"row",style:{"margin-bottom":"30px"}};function ED(e,t,a,r,o,n){const u=c("breakline-menu"),m=c("draggable"),p=c("reuse-loader");return i(),l("div",DD,[o.list.length>0&&!o.loading?(i(),l("div",SD,[d(m,{list:o.list,class:"list-group","ghost-class":"ghost"},{item:k(({element:g,index:v})=>[d(u,{item:g,indexValue:v,formList:o.list},null,8,["item","indexValue","formList"])]),_:1},8,["list"]),s("div",$D,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=g=>n.reOrder()),href:"javascript:;"},[FD,F(" "+h(e.lang("save")),1)]),F("  "),s("button",{onClick:t[1]||(t[1]=g=>n.showTable()),class:"btn btn-default",href:"javascript:void(0);"},[MD,F(" "+h(e.lang("cancel")),1)])])])):f("",!0),o.loading?(i(),l("div",TD,[d(p,{"animation-duration":4e3,color:"#1d78ff",size:60,class:x({spin:o.lang_locale=="ar"})},null,8,["class"])])):f("",!0)])}const LD=T(CD,[["render",ED],["__scopeId","data-v-59596a6c"]]);const ID={name:"breakline-index",description:"Breakline table component",data(){return{columns:["breakline","order","is_active","actions"],options:{},apiUrl:"/api/breakline-list",total_records:0,showTable:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{breakline:"name-breakline",display_order:"displayOrder-breakline",is_active:"isActive-breakline",actions:"breakline-action"},headings:{breakline:this.lang("breakline"),display_order:"Display Order",is_active:this.lang("status"),actions:this.lang("action"),order:this.lang("display_order")},texts:{filter:"",limit:""},templates:{is_active:function(t,a){let r=e.h("span",{class:a.is_active?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.is_active?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},breakline:function(t,a){return e.h("span",{style:"min-width : 100%;width: min-content;overflow: hidden; display: inline-block; white-space: word-wrap;"},[a.breakline])},actions:function(t,a){return e.h(Se,{data:a})}},filterable:["breakline"],sortable:["breakline","display_order","is_active"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy,"sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.message.total,{data:t.message.breakline.map(a=>(a.edit_url="/breakline/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete-breakline/"+a.id,a)),count:t.message.total}}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_breaklines"}},components:{BreaklineReorder:LD}},AD={class:"col-sm-12"},qD={class:"card card-light"},PD={class:"card-header"},VD={id:"breakline-index",class:"card-title"},OD={class:"card-tools"},ND=s("i",{class:"glyphicon glyphicon-plus"},null,-1),xD=s("span",{class:"fas fa-bars"},null,-1),UD=[xD],RD={class:"card-body",id:"breakline_index"};function jD(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("breakline-reorder"),v=P("tooltip");return i(),l("div",AD,[d(u,{componentName:"dataTableModal"}),s("div",qD,[s("div",PD,[s("h3",VD,h(e.trans("list_of_breaklines")),1),s("div",OD,[S((i(),D(m,{class:"btn btn-tool",to:"/breakline/create"},{default:k(()=>[ND]),_:1})),[[v,e.trans("create_breakline")]]),o.showTable&&o.total_records>1?S((i(),l("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...b)=>n.reorderMethod&&n.reorderMethod(...b))},UD)),[[v,e.lang("reorder")]]):f("",!0)])]),s("div",RD,[o.apiUrl!==""&&o.showTable?(i(),D(p,{key:0,url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"breakline-index"},null,8,["url","dataColumns","option"])):f("",!0),o.showTable?f("",!0):(i(),D(g,{key:1,onClose:n.onClose,url:o.apiUrl+"?type=breakline&meta=true&sort=display_order&sort_order=asc",reorder_type:"breakline"},null,8,["onClose","url"]))])])])}const BD=T(ID,[["render",jD]]);function HD(e){const{breakline:t,display_order:a,is_active:r}=e;let o={breakline:[t,"isRequired"],is_active:[r,"isRequired"]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const zD={name:"create-upate-breakline",description:"breakline page",beforeMount(){this.setMode(),this.getInitialValues()},data:function(){return{id:null,breakline:"",hasDataPopulated:!1,loadingSpeed:4e3,loading:!0,iconClass:"fas fa-save",expressionRadioOptions:[{name:"Yes",value:"yes"},{name:"No",value:"no"}],expression:"yes",is_active:null,title:"create_breakline",mode:"create",btnName:"save"}},methods:{onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=HD(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;let e={};e.id=this.id,e.breakline=this.breakline,e.is_active=this.is_active?1:0,L.post("/api/create-update-breakline",e).then(t=>{this.loading=!1,N(t),this.id||setTimeout(()=>{this.$router.push({name:"Breaklines Index"})},3e3)}).catch(t=>{this.loading=!1,I(t)})}},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create"},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="Update",this.title=this.lang("edit_breakline");const e=window.location.pathname,t=De(e);L.get(`/api/edit-breakline/${t}`).then(a=>{this.updateStatesWithData(a.data.message),this.hasDataPopulated=!0,this.loading=!1}).catch(a=>{this.loading=!1,I(a)})}else this.hasDataPopulated=!0,this.loading=!1},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),t.api_key=e.key},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"radio-button":Le,"status-switch":Oe,"tool-tip":Ae}},WD={class:"col-sm-12"},GD={key:0,class:"row"},YD={class:"row"},KD={class:"row"},JD={class:"form-group col-sm-2"},QD={for:"is_active"},XD={class:"card-footer"},ZD=["disabled"];function eS(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("status-switch"),v=c("faveo-box"),b=P("focus-first-input");return i(),l("div",WD,[e.hasDataPopulated===!1||e.loading===!0?(i(),l("div",GD,[d(u,{duration:e.loadingSpeed},null,8,["duration"])])):f("",!0),d(m),d(v,{title:e.trans(e.title)},{actions:k(()=>[s("div",XD,[s("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>n.onSubmit&&n.onSubmit(...y)),disabled:e.loading,class:"btn btn-primary update-btn"},[s("span",{class:x(e.iconClass)},null,2),F("  "+h(e.trans(e.btnName)),1)],8,ZD)])]),default:k(()=>[S((i(),l("div",YD,[d(p,{label:e.lang("breakline"),value:e.breakline,type:"text",name:"breakline",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0,keyupListener:n.triggerEvent,hint:e.trans("breakline_note")},null,8,["label","value","onChange","placehold","keyupListener","hint"])])),[[b]]),s("div",KD,[s("div",JD,[s("label",QD,h(e.lang("status")),1),d(g,{name:"is_active",value:e.is_active,onChange:n.onChange,classnane:"float-left",bold:!0},null,8,["value","onChange"])])])]),_:1},8,["title"])])}const ka=T(zD,[["render",eS]]),tS={name:"labels-index",data(){return{columns:["topic","status","type","department","action"],apiUrl:"/api/admin/helptopic-list",options:{},action:"all",actions:["all","active","inactive"]}},beforeMount(){const e=this;this.options={headings:{topic:this.trans("topic"),status:this.trans("status"),type:this.trans("type"),department:this.trans("department"),action:this.trans("actions")},texts:{filter:"",limit:""},templates:{action:function(t,a){return e.h(Se,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs":"btn btn-danger btn-xs",style:"cursor:default !important"},a.status?this.trans("active"):this.trans("inactive"));return e.h("a",{},[r])},type:function(t,a){let r=e.h("span",{class:a.type?"btn btn-success btn-xs":"btn btn-danger btn-xs",style:"cursor:default !important"},a.type?this.trans("public"):this.trans("private"));return e.h("a",{},[r])},department(t,a){return a.department?a.department.name:"--"}},sortable:["topic","status","type","department"],filterable:["topic","status","type","department"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/helptopic/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/admin/helptopic-delete/"+a.id,a.is_linked=!0,a.dependency="help-topic",a)),count:t.data.total}}}},methods:{updateTable(e){switch(e){case"all":this.apiUrl="/api/admin/helptopic-list";break;case"active":this.apiUrl="/api/admin/helptopic-list?status=1";break;case"inactive":this.apiUrl="/api/admin/helptopic-list?status=0";break}}}},aS={class:"col-sm-12",id:"topics-list"},sS={class:"card-tools"},oS=s("i",{class:"glyphicon glyphicon-plus"},null,-1),nS={class:"btn-group"},iS=s("button",{type:"button",class:"btn btn-tool dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"glyphicon glyphicon-filter"})],-1),lS={class:"dropdown-menu dropdown-menu-right",role:"menu","x-placement":"bottom-end"},rS=["onClick"];function dS(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",aS,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_help_topics")},{customActions:k(()=>[s("div",sS,[S((i(),D(m,{class:"btn btn-tool",to:"/helptopic/create"},{default:k(()=>[oS]),_:1})),[[v,e.trans("create_new_help_topic")]]),s("div",nS,[iS,s("div",lS,[(i(!0),l(A,null,G(o.actions,b=>(i(),l("a",{href:"javascript:;",class:"dropdown-item",onClick:y=>n.updateTable(b)},h(e.trans(b)),9,rS))),256))])])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"topics-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const cS=T(tS,[["render",dS]]);function uS(e){const{topic:t,department:a,linked_departments:r}=e;let o={topic:[t,"isRequired",{"max(100)":O("topic_should_be_less_than_100_characters")}],linked_departments:[r,"isRequired"],department:[a,"isRequired"]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const hS={name:"helptopic-create-edit",description:"Helptopic create edit page",data(){return{page_title:"create_help_topic",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,topic_id:"",topic:"",linked_departments:"",status:1,statusOptions:[{name:"active",value:1},{name:"inactive",value:0}],type:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}],department:"",selectOptions:[],internal_notes:"",showType:!1,ticket_type:[],sys_help_topic:0,checkDisabled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.checkType()},methods:{checkType(){L.get("/api/admin/show-ticket-type-field").then(e=>{this.showType=e.data.data.showTicketTypeField.show_ticket_type_field,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},getValues(e){const t=De(e);e.indexOf("edit")>=0&&(this.page_title="edit_help_topic",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t))},getInitialValues(e){this.loading=!0,L.get("/api/admin/helptopic-details/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.topic;this.topic_id=a.id,this.updateStatesWithData(a),this.selectOptions=a.linked_departments,this.department=a.department.id,this.linked_departments=a.linked_departments,this.checkDisabled=!!a.sys_help_topic}).catch(t=>{this.loading=!1,I(t,"topic-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=uS(this.$data);return t},onChange(e,t){this[t]=e,t=="linked_departments"&&e&&(e.map(a=>a.id).includes(this.department)||(this.department=""),this.selectOptions=e)},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.topic_id&&(e.id=this.topic_id),e.topic=this.topic,e.department=this.department,e.internal_notes=this.internal_notes,e.status=this.status?1:0,e.type=this.type?1:0,e.linked_departments=this.linked_departments.map(t=>t.id),this.ticket_type.length&&(e.type_id=this.ticket_type.map(t=>t.id)),e.sys_help_topic=this.sys_help_topic?1:0,L.post("/api/admin/helptopic-create-update",e).then(t=>{this.loading=!1,N(t,"topic-create-edit"),this.topic_id?this.getInitialValues(this.topic_id):setTimeout(()=>{this.$router.push({name:"Helptopic Index"})},3e3)}).catch(t=>{this.loading=!1,I(t,"topic-create-edit")})}}},components:{"text-field":oe,"dynamic-select":Me,"static-select":xe,"radio-button":Le}},_S={class:"col-sm-12"},mS={key:0,class:"row"},pS={class:"row"},fS={class:"row"},gS={key:0,class:"row"},vS={class:"row"},bS={class:"col-md-12"},yS={class:"label_align"},kS=["disabled"],wS={class:"card-footer"};function CS(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("radio-button"),v=c("dynamic-select"),b=c("static-select"),y=c("tiny-editor"),w=c("faveo-box"),M=P("focus-first-input");return i(),l("div",_S,[!o.hasDataPopulated||o.loading?(i(),l("div",mS,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"topic-create-edit"}),o.hasDataPopulated?(i(),D(w,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",wS,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=C=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",pS,[d(p,{label:e.trans("topic"),value:o.topic,type:"text",name:"topic",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{options:o.statusOptions,label:e.trans("status"),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"]),d(g,{options:o.publicOptions,label:e.trans("type"),name:"type",value:o.type,onChange:n.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])])),[[M]]),s("div",fS,[d(v,{label:e.trans("linked_department"),multiple:!0,name:"linked_departments",classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:o.linked_departments,onChange:n.onChange,strlength:35,required:!0},null,8,["label","value","onChange"]),d(b,{label:e.trans("default_department"),elements:o.selectOptions,name:"department",onChange:n.onChange,value:o.department,classname:"col-sm-6",required:!0},null,8,["label","elements","onChange","value"])]),o.showType?(i(),l("div",gS,[d(v,{label:e.trans("type"),multiple:!0,name:"ticket_type",classname:"col-sm-6",apiEndpoint:"/api/dependency/types",value:o.ticket_type,onChange:n.onChange,strlength:35,required:!1},null,8,["label","value","onChange"])])):f("",!0),s("div",null,[d(y,{value:o.internal_notes,onChange:n.onChange,name:"internal_notes",label:e.trans("internal_notes"),width:"100%",required:!1,lang:"en"},null,8,["value","onChange","label"])]),s("div",vS,[s("div",bS,[s("label",yS,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"default","onUpdate:modelValue":t[0]||(t[0]=C=>o.sys_help_topic=C),disabled:o.checkDisabled},null,8,kS),[[$e,o.sys_help_topic]]),F(" "+h(e.trans("make-default-helptopic")),1)])])])]),_:1},8,["title"])):f("",!0)])}const wa=T(hS,[["render",CS],["__scopeId","data-v-f5fc7ee0"]]);const DS={name:"sla-index",description:"SLA table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data(){return{columns:["name","status","order","created_at","updated_at","action"],options:{},apiUrl:"api/get-enforcer-list/",title:"list_of_SLA_plans",showTable:!0,total_records:0}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),created_at:this.trans("created"),updated_at:this.trans("updated"),action:this.trans("action")},columnsClasses:{name:"sla-name",status:"sla-status",order:"sla-order",updated_at:"sla-updated",created_at:"sla-created"},templates:{action:function(t,a){return e.h(Se,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"sla",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>(a.edit_url="/sla/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete-enforcer/sla/"+a.id,a)),count:t.data.total}}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_SLA_plans"}},components:{"sla-reorder":It}},SS={class:"col-sm-12"},$S={class:"card card-light"},FS={class:"card-header"},MS={class:"card-title"},TS={class:"card-tools"},ES=s("span",{class:"glyphicon glyphicon-plus"},null,-1),LS=s("span",{class:"fas fa-bars"},null,-1),IS=[LS],AS={class:"card-body",id:"sla-table"};function qS(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("sla-reorder"),v=P("tooltip");return i(),l("div",SS,[d(u,{componentName:"dataTableModal"}),s("div",$S,[s("div",FS,[s("h3",MS,h(e.lang(o.title)),1),s("div",TS,[S((i(),D(m,{class:"btn btn-tool",to:"/sla/create"},{default:k(()=>[ES]),_:1})),[[v,e.lang("create_SLA")]]),o.showTable&&o.total_records>1?S((i(),l("a",{key:0,id:"reorder",class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...b)=>n.reorderMethod&&n.reorderMethod(...b))},IS)),[[v,e.lang("reorder")]]):f("",!0)])]),s("div",AS,[o.apiUrl!==""&&o.showTable?(i(),D(p,{key:0,url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"sla-table"},null,8,["url","dataColumns","option"])):f("",!0),o.showTable?f("",!0):(i(),D(g,{key:1,onClose:n.onClose,url:o.apiUrl+"?type=sla&meta=true&sort=order&sort_order=asc",reorder_type:"sla"},null,8,["onClose","url"]))])])])}const PS=T(DS,[["render",qS]]);function VS(e){const{name:t,targetArr:a,approach_response:r,approach_resolution:o,violated_response:n,violated_resolution:u}=e;let m={name:[t,"isRequired","max(80)"]},p,g;a.length>0&&a.map((y,w)=>{m["respond_count-"+w]=[y.respond_count,{isRequired:""},{"minValue(1)":O("invalid_input")}],m["resolve_count-"+w]=[y.resolve_count,{isRequired:""},{"minValue(1)":O("invalid_input")}]}),r.length>0&&r.map((y,w)=>{m[y.type+"-count-"+w]=[y.reminder_delta,"isRequired",{"minValue(1)":O("invalid_input")}],m[y.type+"-option-"+w]=[y.option,"isRequired"],p=yt(y.reminder_receivers.agents,y.reminder_receivers.agent_types)}),o.length>0&&o.map((y,w)=>{m[y.type+"-count-"+w]=[y.reminder_delta,"isRequired",{"minValue(1)":O("invalid_input")}],m[y.type+"-option-"+w]=[y.option,"isRequired"],p=yt(y.reminder_receivers.agents,y.reminder_receivers.agent_types)}),n.length>0&&n.map((y,w)=>{m[y.type+"-count-"+w]=[y.reminder_delta,"isRequired",{"minValue(1)":O("invalid_input")}],m[y.type+"-option-"+w]=[y.option,"isRequired"],p=yt(y.reminder_receivers.agents,y.reminder_receivers.agent_types)}),u.length>0&&u.map((y,w)=>{m[y.type+"-count-"+w]=[y.reminder_delta,"isRequired",{"minValue(1)":O("invalid_input")}],m[y.type+"-option-"+w]=[y.option,"isRequired"],p=yt(y.reminder_receivers.agents,y.reminder_receivers.agent_types)}),r.length===0&&o.length===0&&n.length===0&&u.length===0&&(p=!0);const b=new he(O).validate(m);return g=b.errors,p=p&&b.isValid,de.dispatch("setValidationError",g),{errors:g,isValid:p}}function yt(e,t,a){let r=0;if(e.length==0&&t.length==0){let o=O("atleast_one_agent_or_one_agent_type_is_required");r++,de.dispatch("setAlert",{type:"danger",message:o,component_name:"reminder"})}return!(r>0)}const OS={name:"automator-form-field",props:{enforcerType:{type:String,required:!0},formField:{type:Object,required:!0},labelStyle:{type:Object,default:()=>{}},isChild:{type:Boolean,default:!1},enforcerObject:{type:Object,default:()=>({})},multipleField:{type:Boolean,default:!1}},data:()=>({_id:null,childNodes:[],dropdownOptions:[],selectedValue:null,mounted:!1,enforcerList:[],showForm:!0,country_code:null,showMobileField:!1,extValue:"",relation:""}),beforeMount(){(this.formField.data_type==="select"||this.formField.data_type==="select"&&this.formField.title==="Api")&&this.getSelectFieldOptions(),this.formField.data_type==="mobile"?(this.formField.value&&this.formField.value.includes(" ")&&(this.country_code=this.formField.value.split(" ")[0]),this.formField.enable_extension&&this.formField.union&&this.formField.union.length&&(this.extValue=this.formField.union[0].value?this.formField.union[0].value:""),this.showMobileField=!0):this.showMobileField=!0},created(){window.emitter.on("updateAutomatorField",this.updateFields),window.emitter.on("updateRelation",e=>{this.relation=e})},mounted(){if(this.formField.data_type==="mobile"&&this.formField.enable_extension&&this.formField.value){let e="";this.formField.value&&this.formField.value.includes(" ")?e=this.formField.value.split(" ")[1]:e=this.formField.value,this.selectedValue=e,this.renderNestedFormFieldsIfAny({value:this.selectedValue,nodes:this.formField.union})}else this.selectedValue=es(this.formField.value,this.formField.options,this.formField.default,this.formField.data_type),this.renderNestedFormFieldsIfAny(this.selectedValue);setTimeout(()=>{this.mounted=!0},1e3)},computed:{unique(){return this.formField.key+this.$.vnode.key},apiInfoUrl(){let e=st.convertStringOfPropertiesToObject(this.formField.api_info).url;return!e&&this.formField.api_info&&(e=this.formField.api_info),e},optionLabel(){return st.convertStringOfPropertiesToObject(this.formField.api_info).key||"label"},clearable(){return this.isChild},validationRules(){let e=[];return this.isChild||e.push("required"),e.join("|")}},methods:{keypressEvent(e,t,a){if(a==="time"||a==="count"){const n=e.which?e.which:e.keyCode;if(this.multipleField){if((n<48||n>57)&&n!==126)e.preventDefault();else if(n===126){const m=(this.selectedValue||"")+String.fromCharCode(n),p=m.indexOf("~"),g=m.lastIndexOf("~");(p!==-1&&p!==g||p!==-1&&p!==0&&p!==m.length-1||m.length===1&&p===0)&&e.preventDefault()}}else(n<48||n>57)&&e.preventDefault();((this.selectedValue||"")+String.fromCharCode(n))[0]==="0"&&e.preventDefault()}else if(a==="number"||a==="mobile"){e=e||window.event;var r=e.which?e.which:e.keyCode;if(r>31&&(r<48||r>57))e.preventDefault();else return!0}else if(a==="float"||a==="decimal"){e=e||window.event;var r=e.which?e.which:e.keyCode,o=e.target.value;if(r==46&&o.indexOf(".")!==-1||r==46&&o.length===0)e.preventDefault();else{if(r>=48&&r<=57||r==46)return!0;e.preventDefault()}}else if(a==="time"||a==="count"){const n=e.which?e.which:e.keyCode;if(this.multipleField){if((n<48||n>57)&&n!==126)e.preventDefault();else if(n===126){const m=(this.selectedValue||"")+String.fromCharCode(n),p=m.indexOf("~"),g=m.lastIndexOf("~");(p!==-1&&p!==g||p!==-1&&p!==0&&p!==m.length-1||m.length===1&&p===0)&&e.preventDefault()}}else(n<48||n>57)&&e.preventDefault();((this.selectedValue||"")+String.fromCharCode(n))[0]==="0"&&e.preventDefault()}},pasteEvent(e,t,a){if(a==="number"||a==="mobile")e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault();else if(a==="float"||a==="decimal"){e=e||window.event;var r=e.clipboardData||window.clipboardData,o=r.getData("Text");/^[-]?\d*\.?\d*$/.test(o)||e.preventDefault()}},onCountryCodeUpdate(e,t){if(this[t]=e,this.formField.enable_extension){let a={value:this.selectedValue,nodes:this.formField.union};this.onChange(a,this.formField.key)}else this.onChange(this.selectedValue,this.formField.key)},updateFields(){this.showForm=!1,setTimeout(()=>{this.showForm=!0},1)},getEnforcerObject(e){let t=this.enforcerObject[this.enforcerType+"s"].find(a=>a.field.key===e);return t||{_id:"test"}},onChange(e,t){if(this.mounted){if(this.formField.data_type==="decimal"&&typeof e=="string"&&e.endsWith(".")&&(e+="0"),Array.isArray(e)){const a=JSON.parse(JSON.stringify(this.selectedValue||[]));this.selectedValue=e,e.length>a.length?this.processAndUpdateStore(Ne.differenceWith(e,a,Ne.isEqual)[0],!0):e.length<a.length&&this.$store.dispatch("updateEnforcerList",{key:this.enforcerType,affectedUnique:this.$.vnode.key,formFieldUnique:this.formField.key,value:this.selectedValue,itemToRemove:Ne.differenceWith(a,e,Ne.isEqual)[0]})}else this.formField.data_type==="mobile"&&typeof e=="object"&&!Array.isArray(e)?this.selectedValue=e.value:this.selectedValue=e,this.processAndUpdateStore(e);this.renderNestedFormFieldsIfAny(e,t)}},processAndUpdateStore(e,t=!1){let a=[];re(e)&&re(e.nodes)&&e.nodes.forEach(o=>{const n=ss(this.enforcerType,o);a.push(n)}),this.enforcerList=a;const r={key:this.enforcerType,affectedUnique:this.$.vnode.key,formFieldUnique:this.formField.key,enforcerList:a,value:this.selectedValue,isMultiple:t};this.formField.data_type==="mobile"&&(r.appendValue=this.country_code),this.$store.dispatch("updateEnforcerList",r)},renderNestedFormFieldsIfAny(e,t){this.childNodes=[],e&&(Array.isArray(e)?e.forEach(a=>{re(a.nodes)&&this.childNodes.push(...a.nodes)}):re(e.nodes)&&(this.childNodes=e.nodes))},getSelectFieldOptions(){re(this.apiInfoUrl)?this.formField.title==="Api"?L.get(this.apiInfoUrl).then(e=>{this.dropdownOptions=e.data}).catch(e=>{console.error(e)}):this.fetchOptionListForApiField():this.dropdownOptions=this.formField.options},fetchOptionListForApiField(){L.get(this.apiInfoUrl).then(e=>{this.dropdownOptions=e.data}).catch(e=>{console.error(e)})},clearSelectedValue(){this.selectedValue=null}},components:{MobileField:fo,"dynamic-select":Me,"text-field":oe,"radio-field":no,"checkbox-field":io,"date-time-field":Qe}},NS={class:"automator-form"},xS={class:"form-field-wrapper"};function US(e,t,a,r,o,n){const u=c("date-time-field"),m=c("dynamic-select"),p=c("text-field"),g=c("radio-field"),v=c("checkbox-field"),b=c("MobileField"),y=c("automator-form-field",!0);return i(),l("div",NS,[e.showForm?(i(),l(A,{key:0},[a.formField.data_type==="date"?(i(),D(u,{key:0,type:a.formField.request_time_information?"datetime":"date",label:a.formField.label,labelStyle:a.labelStyle,value:e.selectedValue,name:n.unique,onChange:n.onChange,format:a.formField.request_time_information?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD",clearable:!0,rules:n.validationRules,outputFormat:"YYYY-MM-DD HH:mm:ss"},null,8,["type","label","labelStyle","value","name","onChange","format","rules"])):f("",!0),a.formField.data_type==="api"||a.formField.data_type==="multiselect"?(i(),D(m,{key:1,id:a.formField.key,label:a.formField.label,multiple:a.formField.data_type==="multiselect",name:n.unique,apiEndpoint:n.apiInfoUrl,value:e.selectedValue,onChange:n.onChange,labelStyle:a.labelStyle,rules:n.validationRules,clearable:n.clearable,"show-icon":!1},null,8,["id","label","multiple","name","apiEndpoint","value","onChange","labelStyle","rules","clearable"])):f("",!0),a.formField.data_type==="select"&&a.formField.title!=="Api"?(i(),D(m,{key:2,id:a.formField.key,label:a.formField.label,multiple:!1,name:n.unique,apiEndpoint:n.apiInfoUrl,value:e.selectedValue,onChange:n.onChange,optionLabel:n.optionLabel,labelStyle:a.labelStyle,rules:n.validationRules,clearable:n.clearable,"show-icon":!1},null,8,["id","label","name","apiEndpoint","value","onChange","optionLabel","labelStyle","rules","clearable"])):f("",!0),a.formField.data_type==="select"&&a.formField.title==="Api"?(i(),D(m,{key:3,id:a.formField.key,label:a.formField.label,multiple:!1,name:a.formField.key,elements:e.dropdownOptions,value:e.selectedValue,onChange:n.onChange,optionLabel:n.optionLabel,rules:n.validationRules,hint:a.formField.description,strlength:75,"tip-rule":a.formField.show_description,"show-icon":!1,fieldUniqueName:a.formField.key,labelLength:25,labelStyle:a.labelStyle},null,8,["id","label","name","elements","value","onChange","optionLabel","rules","hint","tip-rule","fieldUniqueName","labelStyle"])):f("",!0),a.formField.data_type==="text"||a.formField.data_type==="textarea"||a.formField.data_type==="htmltextarea"||a.formField.data_type==="number"||a.formField.data_type==="decimal"||a.formField.data_type==="email"||a.formField.data_type==="time"||a.formField.data_type==="count"?(i(),D(p,{key:4,id:a.formField.key,label:a.formField.label,type:a.formField.data_type==="htmltextarea"?"textarea":a.formField.title==="EXT"?"text":a.formField.data_type,name:n.unique,value:e.selectedValue,onChange:n.onChange,labelStyle:a.labelStyle,rules:n.validationRules,pattern:a.formField.pattern,"validation-message":a.formField.validation_message,keypressEvt:n.keypressEvent,placehold:e.lang(a.multipleField?"time_multiple_field":!a.multipleField&&a.formField.type==="time"?"enter_the_time":a.formField.type==="count"?"enter_thread_count":"enter_a_value"),pasteEvt:n.pasteEvent,max:a.formField.title==="EXT"?8:void 0,isEXT:a.formField.title==="EXT"},null,8,["id","label","type","name","value","onChange","labelStyle","rules","pattern","validation-message","keypressEvt","placehold","pasteEvt","max","isEXT"])):f("",!0),a.formField.data_type==="radio"?(i(),D(g,{key:5,name:n.unique,label:a.formField.label,options:a.formField.options,value:e.selectedValue,onChange:n.onChange,labelStyle:a.labelStyle,rules:n.validationRules},null,8,["name","label","options","value","onChange","labelStyle","rules"])):f("",!0),a.formField.data_type==="checkbox"?(i(),D(v,{key:6,name:n.unique,label:a.formField.label,options:a.formField.options,value:e.selectedValue,onChange:n.onChange,labelStyle:a.labelStyle,rules:n.validationRules},null,8,["name","label","options","value","onChange","labelStyle","rules"])):f("",!0)],64)):f("",!0),e.showMobileField&&a.formField.data_type==="mobile"?(i(),D(b,{key:1,fieldFor:"automator",id:a.formField.key,label:a.formField.label,type:a.formField.data_type,name:n.unique,value:e.selectedValue,onChange:n.onChange,isInlineForm:!1,countryCode:e.country_code,onCountryCode:t[0]||(t[0]=w=>n.onCountryCodeUpdate(w,"country_code")),keypressEvt:n.keypressEvent,pasteEvt:n.pasteEvent,rules:n.validationRules,extensionEnabled:a.formField.enable_extension,ext:a.formField.enable_extension?a.formField.union:[],labelStyle:a.labelStyle,extValue:e.extValue},null,8,["id","label","type","name","value","onChange","countryCode","keypressEvt","pasteEvt","rules","extensionEnabled","ext","labelStyle","extValue"])):f("",!0),s("div",xS,[(i(!0),l(A,null,G(e.childNodes,w=>(i(),D(y,{key:n.getEnforcerObject(w.key)._id,"form-field":w,enforcerType:a.enforcerType,"enforcer-object":n.getEnforcerObject(w.key),isChild:!0},null,8,["form-field","enforcerType","enforcer-object"]))),128))])])}const Cs=T(OS,[["render",US],["__scopeId","data-v-10977a02"]]);const RS={name:"faveo-automator-rule",props:{rule:{type:Ct,required:!0},index:{type:Number,required:!0},categories:{type:Array,required:!0},catChange:{type:Function}},setup(){const e=ce();return{selectedRuleKeys:ae(()=>e.getters.getSelectedRuleKeys)}},data(){return{category:"",field:null,relation:null,relationList:[],loading:!1,multipleField:!1}},computed:{},created(){window.emitter.on("deletedItem",this.deletedItem)},beforeMount(){this.category=this.rule.category,this.field=this.rule.field,this.relation=this.rule.relation,this.field&&(this.relationList=ua(this.field.data_type))},methods:{onFieldChange(e){this.field=e,this.refreshRelationList(),this.$store.dispatch("onFieldChange",{key:"rules",index:this.index,field:this.field}),window.emitter.emit("updateAutomatorField")},refreshRelationList(){this.field?(this.relationList=ua(this.field.data_type),this.onRelationChange(this.relationList[0])):this.relationList=[]},onRelationChange(e){this.relation=e,this.$store.dispatch("onRelationChange",{key:"rules",index:this.index,relation:this.relation}),window.emitter.emit("updateAutomatorField")},onCategoryChange(e){this.field=null,this.category=e,this.$store.dispatch("onCategoryChange",{key:"rules",index:this.index,value:new Ct(this.rule._id,this.category)}),this.catChange(),window.emitter.emit("updateAutomatorField")},deleteRule(){window.emitter.emit("deleteItem",{type:"rule",index:this.index,id:this.rule._id})},deletedItem(){this.loading=!0,setTimeout(()=>{this.loading=!1},1)}},watch:{relation(e,t){window.emitter.emit("updateRelation",e.id),e.id==="less_than_and_greater_than"?this.multipleField=!0:this.multipleField=!1}},components:{"dynamic-select":Me,"automator-form-field":Cs}},jS={class:"col-sm-3 rule-menu"},BS={class:"offset-md-2 max-width-max-content rule_btns"},HS=["onClick"];function zS(e,t,a,r,o,n){const u=c("custom-loader"),m=c("dynamic-select"),p=c("automator-form-field"),g=P("tooltip");return i(),l("div",{class:x(["row","faveo-automator-rule",o.field&&o.field.disabled?"disabledDiv":""])},[o.loading?(i(),D(u,{key:0})):f("",!0),s("div",jS,[s("span",null,[s("i",{class:x(["fas fa-trash faveo-trash",[o.field&&o.field.disabled?"disabledDiv":""]]),onClick:t[0]||(t[0]=v=>n.deleteRule())},null,2)]),s("span",BS,[(i(!0),l(A,null,G(a.categories,v=>S((i(),l("a",{href:"javascript:;",class:x([{"faveo-active-border":o.category===v.name},"btn btn-default mr-1"]),onClick:b=>n.onCategoryChange(v.name)},[s("i",{class:x(v.icon)},null,2)],10,HS)),[[g,e.trans(v.name+"_field")]])),256))])]),o.loading?f("",!0):(i(),D(m,{key:1,classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,id:"rule-"+a.rule._id,name:"rule-"+a.rule._id,apiEndpoint:a.categories.find(v=>v.name===o.category).api_info,optionLabel:"label",value:o.field,onChange:n.onFieldChange,strlength:50,clearable:!1},null,8,["id","name","apiEndpoint","value","onChange"])),o.field!==null?(i(),l(A,{key:2},[o.loading?f("",!0):(i(),D(m,{key:0,classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,name:"relation-"+a.rule._id,elements:o.relationList,optionLabel:"name",value:o.relation,onChange:n.onRelationChange,strlength:35,clearable:!1},null,8,["name","elements","value","onChange"])),(i(),l("div",{class:"col-sm-3",key:JSON.stringify(o.field)+JSON.stringify(o.category)},[(i(),D(p,{key:a.rule._id,enforcerType:"rule","form-field":o.field,"enforcer-object":a.rule,multipleField:o.multipleField,labelStyle:{display:"none"}},null,8,["form-field","enforcer-object","multipleField"]))]))],64)):f("",!0)],2)}const WS=T(RS,[["render",zS],["__scopeId","data-v-3efe3556"]]);const GS={name:"rule-list",props:{categories:{type:Array,required:!0},pageType:{type:String,default:"ticket"}},data:()=>({matcher:"",ruleList:[]}),beforeMount(){this.ruleList=this.$store.getters.getAutomatorRules,this.matcher=this.$store.getters.getAutomatorDataByKey("matcher"),re(this.ruleList)||this.addNew()},computed:{updatedRules(){return this.ruleList}},methods:{onCatChange(){this.ruleList=[],this.ruleList=this.$store.getters.getAutomatorRules,window.emitter.emit("deletedItem")},addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"rules",value:new Ct})},onchange(e){this.matcher=e,this.$store.dispatch("setAutomatorDataByKey",{key:"matcher",value:e})}},components:{"faveo-automator-rule":WS}},YS=e=>(ee("data-v-e0744661"),e=e(),te(),e),KS={class:"row ml-3"},JS={class:"col-sm-3"},QS={class:"radio-inline"},XS=["checked"],ZS={class:"col-sm-3"},e$={class:"radio-inline"},t$=["checked"],a$={style:{"margin-top":"1rem"}},s$=YS(()=>s("i",{class:"fas fa-plus-circle"},null,-1));function o$(e,t,a,r,o,n){const u=c("faveo-automator-rule"),m=c("faveo-box");return i(),D(m,{title:e.trans("when_"+a.pageType+"_satisfies_these_conditions")},{default:k(()=>[s("div",KS,[s("div",JS,[s("label",QS,[s("input",{type:"radio",class:"form-check-input",name:"matcher",onChange:t[0]||(t[0]=p=>n.onchange("any")),value:"any",checked:e.matcher==="any"},null,40,XS),F(" "+h(e.lang("match_any_of_below")),1)])]),s("div",ZS,[s("label",e$,[s("input",{type:"radio",class:"form-check-input",name:"matcher",onChange:t[1]||(t[1]=p=>n.onchange("all")),value:"all",checked:e.matcher==="all"},null,40,t$),F(" "+h(e.lang("match_all_of_below")),1)])])]),(i(!0),l(A,null,G(n.updatedRules,(p,g)=>(i(),D(u,{key:p._id,rule:p,index:g,categories:a.categories,catChange:n.onCatChange},null,8,["rule","index","categories","catChange"]))),128)),s("div",a$,[s("a",{onClick:t[2]||(t[2]=p=>n.addNew()),href:"javascript:;"},[s("span",null,[s$,F(" "+h(e.trans("add_new_rule")),1)])])])]),_:1},8,["title"])}const Ds=T(GS,[["render",o$],["__scopeId","data-v-e0744661"]]);const n$={name:"dynamic-sla-field",description:"Dynamic SLA field component",props:{fieldsArr:{type:Array,default:()=>[]},fieldGroup:{type:String,default:""},from:{type:String,default:""},onFieldChange:{type:Function}},data(){return{blockRemoval:!0,selectOptions:[{id:"minute",name:"Minute(s)"},{id:"hour",name:"Hour(s)"},{id:"day",name:"Day(s)"}],labelStyle:{display:"none"},loading:!1,deletePopup:!1,reminderId:"",index:""}},watch:{fieldsArr(){this.blockRemoval=this.fieldsArr.length<=1}},computed:{beforeLabel(){return this.fieldGroup==="response"||this.fieldGroup==="resolution"?"before":"after"}},methods:{addField(){this.fieldsArr.push({id:null,reminder_delta:"",option:"minute",reminder_receivers:{agents:[],agent_types:[]},type:this.fieldGroup}),this.onFieldChange(this.fieldGroup,this.fieldsArr)},removeField(e,t){e?(this.deletePopup=!0,this.reminderId=e,this.index=t):(this.fieldsArr.splice(t,1),this.onFieldChange(this.fieldGroup,this.fieldsArr))},onCloseModal(){this.deletePopup=!1},onSubmitDelete(){this.loading=!0,axios.delete("/api/delete-enforcer/reminder/"+this.reminderId+"/"+this.from).then(e=>{this.fieldsArr.splice(this.index,1),this.onFieldChange(this.fieldGroup,this.fieldsArr),this.onCloseModal(),N(e,"sla")}).catch(e=>{I(e,"sla"),this.loading=!1})},onChange(e,t){let a=t.split("-"),r=a[a.length-1];t.includes(this.fieldGroup+"-count-")&&(this.fieldsArr[r].reminder_delta=e),t.includes(this.fieldGroup+"-option-")&&(this.fieldsArr[r].option=e),t.includes(this.fieldGroup+"-type-")&&(this.fieldsArr[r].reminder_receivers.agent_types=e),t.includes(this.fieldGroup+"-agent-")&&(this.fieldsArr[r].reminder_receivers.agents=e),this.onFieldChange(this.fieldGroup,this.fieldsArr)}},components:{"number-field":Je,"dynamic-select":Me,"static-select":xe}},sa=e=>(ee("data-v-12129359"),e=e(),te(),e),i$={key:0,class:"container"},l$={class:"row"},r$={class:"col-sm-12"},d$={class:"text-left"},c$={key:1,class:"row"},u$=sa(()=>s("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1)),h$={class:"col-md-5 d_flex"},_$={class:"col-md-1 text-right",id:"mt8"},m$=["onClick"],p$={class:"col-sm-2",id:"mt8"},f$=sa(()=>s("span",{class:"col-sm-1",id:"mt8"},"to",-1)),g$={class:""},v$=sa(()=>s("i",{class:"fas fa-plus-circle","aria-hidden":"true"},null,-1));function b$(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal"),p=c("number-field"),g=c("static-select"),v=c("dynamic-select");return i(),l("div",null,[o.deletePopup?(i(),D(m,{key:0,showModal:o.deletePopup,onClose:n.onCloseModal},{title:k(()=>[s("h4",null,h(e.lang("delete")),1)]),fields:k(()=>[o.loading?f("",!0):(i(),l("div",i$,[s("div",l$,[s("div",r$,[s("span",d$,h(e.lang("are_you_sure_you_want_to_delete")),1)])])])),o.loading?(i(),l("div",c$,[d(u,{duration:4e3})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=b=>n.onSubmitDelete()),class:"btn btn-danger"},[u$,F(" "+h(e.lang("submit")),1)])]),_:1},8,["showModal","onClose"])):f("",!0),(i(!0),l(A,null,G(a.fieldsArr,(b,y)=>(i(),l("div",{key:y,class:"row"},[s("div",h$,[s("div",_$,[s("span",{class:"fas fa-trash faveo-trash",onClick:w=>n.removeField(b.id,y)},null,8,m$)]),s("span",p$,h(n.beforeLabel),1),d(p,{label:e.lang("count"),value:b.reminder_delta,name:a.fieldGroup+"-count-"+y,classname:"col-sm-3",onChange:n.onChange,type:"number",required:!0,labelStyle:o.labelStyle,placeholder:"n"},null,8,["label","value","name","onChange","labelStyle"]),d(g,{label:e.lang("option"),elements:o.selectOptions,name:a.fieldGroup+"-option-"+y,onChange:n.onChange,classname:"col-sm-5",value:b.option,labelStyle:o.labelStyle,hideEmptySelect:!0},null,8,["label","elements","name","onChange","value","labelStyle"]),f$]),d(v,{label:e.lang("type"),value:b.reminder_receivers.agent_types,onChange:n.onChange,name:a.fieldGroup+"-type-"+y,apiEndpoint:"/api/dependency/agent-types",multiple:!0,classname:"col-sm-3",strlength:"20",placeholder:e.lang("select_agent_types"),labelStyle:o.labelStyle},null,8,["label","value","onChange","name","placeholder","labelStyle"]),d(v,{label:e.lang("agents"),value:b.reminder_receivers.agents,onChange:n.onChange,name:a.fieldGroup+"-agent-"+y,apiEndpoint:"/api/dependency/agents?meta=true",multiple:!0,classname:"col-sm-4",strlength:"25",placeholder:e.lang("select_agents"),labelStyle:o.labelStyle},null,8,["label","value","onChange","name","placeholder","labelStyle"])]))),128)),s("div",g$,[s("a",{onClick:t[1]||(t[1]=(...b)=>n.addField&&n.addField(...b)),href:"javascript:;"},[s("span",null,[v$,F(" "+h(e.lang("add_new_rule")),1)])])])])}const Ss=T(n$,[["render",b$],["__scopeId","data-v-12129359"]]);const y$={name:"sla-escalations",description:"SLA Escalation settings page",props:{getUpdateArray:{type:Function},violated:{type:Array,default:()=>[]}},data(){return{responded:[],resolved:[]}},beforeMount(){if(this.violated.length>0){for(let e in this.violated)if(this.violated[e].reminder_delta.includes("~")){let t=this.violated[e].reminder_delta.split("~"),a=t[t.length-2].split("::");this.violated[e].option=t[t.length-1],this.violated[e].reminder_delta=a[a.length-1],this.violated[e].type==="responded"||this.violated[e].type==="response"?this.responded.push(this.violated[e]):this.resolved.push(this.violated[e])}}},methods:{getFields(e,t){this[e]=t,this.getUpdateArray(this.responded,this.resolved)}},components:{"tool-tip":Ae,"dynamic-sla-field":Ss}},k$=e=>(ee("data-v-1537a5d6"),e=e(),te(),e),w$={class:"card card-light"},C$={class:"card-header"},D$={class:"card-title"},S$={class:"card-body"},$$=["innerHTML"],F$=k$(()=>s("br",null,null,-1)),M$=["innerHTML"];function T$(e,t,a,r,o,n){const u=c("tool-tip"),m=c("dynamic-sla-field");return i(),l("div",w$,[s("div",C$,[s("h3",D$,h(e.lang("set_escalation")),1),d(u,{message:e.lang("what_happens_when_this_SLA_is_violated?"),size:"medium"},null,8,["message"])]),s("div",S$,[s("div",null,[s("p",{innerHTML:e.lang("set_escalation_rule_when_a_ticket_is_not_responded_on_time"),id:"desc"},null,8,$$),d(m,{fieldsArr:o.responded,fieldGroup:"responded",onFieldChange:n.getFields,from:"violated"},null,8,["fieldsArr","onFieldChange"])]),F$,s("div",null,[s("p",{innerHTML:e.lang("set_escalation_hierarchy_when_a_ticket_is_not_resolved_on_time"),id:"desc"},null,8,M$),d(m,{fieldsArr:o.resolved,fieldGroup:"resolved",onFieldChange:n.getFields,from:"violated"},null,8,["fieldsArr","onFieldChange"])])])])}const E$=T(y$,[["render",T$],["__scopeId","data-v-1537a5d6"]]);const L$={name:"sla-remindeers",description:"SLA Reminders settings page",props:{getUpdateArray:{type:Function},approach:{type:Array,default:()=>[]}},data(){return{response:[],resolution:[]}},beforeMount(){if(this.approach.length>0){for(let e in this.approach)if(this.approach[e].reminder_delta.includes("~")){let t=this.approach[e].reminder_delta.split("~"),a=t[t.length-2].split("::");this.approach[e].option=t[t.length-1],this.approach[e].reminder_delta=a[a.length-1],this.approach[e].type==="response"?this.response.push(this.approach[e]):this.resolution.push(this.approach[e])}}},methods:{getFields(e,t){this[e]=t,this.getUpdateArray(this.response,this.resolution)}},components:{"tool-tip":Ae,"dynamic-sla-field":Ss}},I$=e=>(ee("data-v-fe7c1193"),e=e(),te(),e),A$={class:"card card-light"},q$={class:"card-header"},P$={class:"card-title"},V$={class:"card-body"},O$=["innerHTML"],N$=I$(()=>s("br",null,null,-1)),x$=["innerHTML"];function U$(e,t,a,r,o,n){const u=c("tool-tip"),m=c("dynamic-sla-field");return i(),l("div",A$,[s("div",q$,[s("h3",P$,h(e.lang("set_sla_reminders")),1),d(u,{message:e.lang("What_happens_when_this_SLA_due_time_approaches"),size:"medium"},null,8,["message"])]),s("div",V$,[s("div",null,[s("p",{innerHTML:e.lang("set_reminder_rule_when_a_ticket_response_time_approaches"),id:"desc"},null,8,O$),d(m,{fieldsArr:o.response,fieldGroup:"response",onFieldChange:n.getFields,from:"approaching"},null,8,["fieldsArr","onFieldChange"])]),N$,s("div",null,[s("p",{innerHTML:e.lang("Set_reminder_rule_when_a_ticket_resolution_time_approaches"),id:"desc"},null,8,x$),d(m,{fieldsArr:o.resolution,fieldGroup:"resolution",onFieldChange:n.getFields,from:"approaching"},null,8,["fieldsArr","onFieldChange"])])])])}const R$=T(L$,[["render",U$],["__scopeId","data-v-fe7c1193"]]);const j$={name:"sla-create-edit",description:"SLA Create and Edit page",setup(){const e=ce();return{showLoader:ae(()=>e.getters.showLoader)}},data(){return{title:"create_new_sla_plan",iconClass:"fas fa-save",btnName:"save",sla_id:"",name:"",status:!0,internal_notes:"",selectOptions:[{id:"minute",name:"Min(s)"},{id:"hour",name:"Hour(s)"},{id:"day",name:"Day(s)"}],labelStyle:{display:"none"},submitData:{},count:0,ruleList:[{id:null,field:"",relation:"equal",category:"ticket",value:"",rules:[]}],obj:{id:null,matcher:"any"},ticketCustomFields:[],editData:{},editRuleValues:[],editformcall:!1,approach:[],violated:[],approach_response:[],approach_resolution:[],violated_response:[],violated_resolution:[],priorities:[],channels:{},target_status:!0,targetArr:[],default_sla:!1,slaFormFields:{rules:[]},submitEndpoint:"",formCategories:[],showDeleteModal:!1,deleteType:"",deleteIndex:"",deleteId:"",loading:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},created(){window.emitter.on("deleteItem",this.deleteItem)},watch:{editformcall(e){this.editformcall=e}},methods:{getFormData(){this.$store.dispatch("startLoader","getFormData"),L.get("api/form/automator",{params:{category:"sla"}}).then(e=>{this.formCategories=e.data.data.form_categories,this.submitEndpoint=e.data.data.submit_endpoint}).catch(e=>{I(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getFormData")})},getPriorities(){this.$store.dispatch("startLoader","getPriorities"),L.get("/api/dependency/priorities",{params:{limit:"all"}}).then(e=>{this.priorities=e.data.data.priorities;for(var t in this.priorities)this.targetArr.push({id:null,ticket_sla_id:null,p_id:this.priorities[t].id,name:this.priorities[t].name,business_hour:"",respond_count:4,respond_option:"hour",resolve_count:10,resolve_option:"hour",channels:[]})}).catch(e=>{this.targetArr=[],I(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getPriorities")})},getAllowedChannels(){this.$store.dispatch("startLoader","getAllowedChannels"),L.get("/api/sla-alert-channels").then(e=>{this.channels=e.data.data,console.log(this.channels)}).catch(e=>{this.channels={},I(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getAllowedChannels")})},getValues(e){this.sla_id=De(e),e.indexOf("edit")>=0?(this.title="edit_sla_plan",this.iconClass="fas fa-sync",this.btnName="update",this.editform(this.sla_id)):(this.$store.dispatch("createNewAutomatorInstance"),this.getPriorities()),this.getFormData(),this.getAllowedChannels()},approchesArray(e,t){this.approach_response=e,this.approach_resolution=t,this.approach=[...this.approach_response,...this.approach_resolution]},violatedArray(e,t){this.violated_response=e,this.violated_resolution=t,this.violated=[...this.violated_response,...this.violated_resolution]},finalArray(e){var t=[];for(var a in e){var r=e[a].option,o=e[a].reminder_delta,n=e[a].reminder_receivers.agents,u=e[a].reminder_receivers.agent_types;(n.length||u.length)&&t.push({id:e[a].id,reminder_delta:"diff::"+o+"~"+r,type:e[a].type==="responded"?"response":e[a].type==="resolved"?"resolution":e[a].type,reminder_receivers:{agent_types:u.map(m=>m.id),agents:n.map(m=>m.id)}})}return t},onChange(e,t){this[t]=e;let a=t.split("-"),r=a[a.length-1];t.includes("business_hour-")&&(this.targetArr[r].business_hour=e||""),t.includes("respond_count-")&&(this.targetArr[r].respond_count=e),t.includes("respond_option-")&&(this.targetArr[r].respond_option=e),t.includes("resolve_count-")&&(this.targetArr[r].resolve_count=e),t.includes("resolve_option-")&&(this.targetArr[r].resolve_option=e)},toggleChannel(e,t,a){let r=this.targetArr[t].channels.indexOf(a);r>-1&&this.targetArr[t].channels.splice(r,1),e||this.targetArr[t].channels.push(a)},async validateForm(){const{errors:e,valid:t}=await this.$refs.faveoAutomatorForm.validate(),a=Object.entries(e).find(r=>r[1].length>0);if(!t){go(a[0]),console.debug(a[0]+" is not valid!");return}this.submitForm()},getTarget(e){var t=[];for(var a in e){var r={};r.id=e[a].id,r.p_id=e[a].priority_id,r.ticket_sla_id=e[a].ticket_sla_id,r.name=e[a].priority.name,r.business_hour=e[a].business_hour;var o=e[a].resolve_within.split("~"),n=o[o.length-2].split("::");r.resolve_option=o[o.length-1],r.resolve_count=n[n.length-1];var u=e[a].respond_within.split("~"),m=u[u.length-2].split("::");r.respond_option=u[u.length-1],r.respond_count=m[m.length-1],r.channels=e[a].channels,t.push(r)}return t},slaMeta(){let e=[];for(var t in this.targetArr){var a={};a.id=this.targetArr[t].id,a.priority_id=this.targetArr[t].p_id,a.ticket_sla_id=this.targetArr[t].ticket_sla_id,a.business_hour_id=this.targetArr[t].business_hour.id,a.respond_within="diff::"+this.targetArr[t].respond_count+"~"+this.targetArr[t].respond_option,a.resolve_within="diff::"+this.targetArr[t].resolve_count+"~"+this.targetArr[t].resolve_option,a.channels=this.targetArr[t].channels.map(function(r,o){return{channel_id:r}}),e.push(a)}return e},submitForm(){if(this.count++,this.count==1){this.obj.name=this.name,this.obj.status=this.status,this.obj.internal_notes=this.internal_notes,this.obj.matcher=this.$store.getters.getAutomatorData.matcher,this.obj.reminders={approaching:this.finalArray(this.approach),violated:this.finalArray(this.violated)},this.submitData=Object.assign({},this.obj);const e=this.$store.getters.getAutomatorData;this.submitData.rules=Wt(e.rules,"rules"),this.submitData.sla_meta=this.slaMeta(),L.post(this.submitEndpoint,{type:"sla",data:this.submitData}).then(t=>{N(t,"sla"),this.sla_id?this.editform(this.sla_id):setTimeout(()=>{this.$router.push({name:"SLA Index"})},3e3)}).catch(t=>{var a,r,o;if(((a=t==null?void 0:t.response)==null?void 0:a.status)===412&&((o=(r=t==null?void 0:t.response)==null?void 0:r.data)!=null&&o.message)){let n={},u={type:"sla",data:this.submitData};Object.keys(t.response.data.message).forEach(m=>{let p=m.split("."),g=u.data[p[1]][p[2]].field+u.data[p[1]][p[2]]._id;n[g]=t.response.data.message[m]}),t.response.data.message=n,I(t,"sla");return}I(t,"sla")}).finally(t=>{this.count=0})}},editform(e){this.$store.dispatch("startLoader","editform"),this.ruleList=[],this.editformcall=!0,L.get("/api/get-enforcer/sla/"+e).then(t=>{try{this.editData=t.data.data,this.name=this.editData.name,this.status=re(this.editData.status),this.default_sla=re(this.editData.is_default),this.internal_notes=this.editData.internal_notes,this.obj.id=this.editData.id,this.targetArr=this.getTarget(this.editData.sla_meta),this.editRuleValues=_.cloneDeep(this.editData.rules);const a=new as(this.editData.id,Ht(t.data.data.rules,"rule"),[],[],t.data.data.matcher);this.$store.dispatch("createNewAutomatorInstance",a),this.ruleList=this.editData.rules,this.approach=this.editData.reminders.approaching,this.violated=this.editData.reminders.violated,this.$store.dispatch("stopLoader","editform")}catch(a){console.log(a)}}).catch(t=>{I(t,"sla")})},isValid(){const{errors:e,isValid:t}=VS(this.$data);return!!t},deleteItem({type:e,index:t,id:a}){this.showDeleteModal=!0,this.deleteType=e,this.deleteIndex=t,this.deleteId=a},doDelete(){if(Jt(this.deleteId)){this.deleteItemFromStore(this.deleteType,this.deleteIndex);return}this.loading=!0,L.delete(`api/delete-enforcer/${this.deleteType}/${this.deleteId}`).then(e=>{this.deleteItemFromStore(this.deleteType,this.deleteIndex),this.showDeleteModal=!1,this.loading=!1,N(e,"sla")}).catch(e=>{this.showDeleteModal=!1,this.loading=!1,I(e,"sla")})},deleteItemFromStore(e,t){this.showDeleteModal=!1,this.loading=!1,this.$store.dispatch("deleteElementFromAutomator",{key:e,index:t}),window.emitter.emit("deletedItem")}},components:{"text-field":oe,"status-switch":Oe,"dynamic-select":Me,"static-select":xe,"number-field":Je,"rule-list":Ds,"sla-escalations":E$,"sla-reminders":R$}},oa=e=>(ee("data-v-033411b6"),e=e(),te(),e),B$={class:"col-sm-12"},H$={class:""},z$={key:0,class:"row"},W$={key:1,class:"card card-light"},G$={class:"card-header"},Y$={for:"select targets",id:"title",class:"card-title"},K$={class:"card-tools switch-pos"},J$={class:"card-body"},Q$={class:"row"},X$={class:"card card-light"},Z$={class:"card-header"},eF={for:"select targets",class:"card-title"},tF={class:"card-body"},aF={key:0,class:"table",id:"target_table"},sF={style:{width:"10%"}},oF=oa(()=>s("label",{style:{color:"rgb(220, 53, 69)"}},"*",-1)),nF=oa(()=>s("label",{style:{color:"rgb(220, 53, 69)"}},"*",-1)),iF={style:{width:"25%"}},lF={class:"d-flex"},rF={class:"d-flex"},dF=["onClick"],cF={id:"sla-rules-container"},uF={class:"row"},hF={key:0,class:"card-footer"},_F={class:"modal-title"},mF={key:1},pF=oa(()=>s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1));function fF(e,t,a,r,o,n){const u=c("alert"),m=c("reuse-loader"),p=c("status-switch"),g=c("text-field"),v=c("number-field"),b=c("static-select"),y=c("dynamic-select"),w=c("rule-list"),M=c("sla-reminders"),C=c("sla-escalations"),E=c("ValidationObserver"),R=c("modal"),z=P("focus-first-input");return i(),l("div",B$,[d(u,{componentName:"sla"}),s("div",H$,[r.showLoader?(i(),l("div",z$,[d(m,{"animation-duration":4e3,size:60})])):f("",!0),r.showLoader?f("",!0):(i(),l("div",W$,[s("div",G$,[s("h3",Y$,h(e.lang(o.title)),1),s("div",K$,[d(p,{name:"status",value:o.status,onChange:n.onChange,bold:!0,classname:"btn-tool"},null,8,["value","onChange"])])]),d(E,{ref:"faveoAutomatorForm"},{default:k(({values:J,errors:we,validate:_e})=>[s("div",J$,[S((i(),l("div",Q$,[d(g,{label:e.lang("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0,rules:"required"},null,8,["label","value","onChange","placehold"])])),[[z]]),s("div",null,[s("div",X$,[s("div",Z$,[s("h3",eF,h(e.lang("sla_targets")),1)]),s("div",tF,[o.targetArr.length>0?(i(),l("table",aF,[s("tbody",null,[s("tr",null,[s("th",sF,h(e.lang("priority")),1),s("th",null,[F(h(e.lang("respond_Within"))+" ",1),oF]),s("th",null,[F(h(e.lang("resolve_within"))+" ",1),nF]),s("th",iF,h(e.lang("operational_hours")),1),s("th",null,h(e.lang("notify")),1)]),(i(!0),l(A,null,G(o.targetArr,(ue,Q)=>(i(),l("tr",null,[s("td",null,h(ue.name),1),s("td",null,[s("div",lF,[d(v,{label:e.lang("respond_Within"),value:ue.respond_count,name:"respond_count-"+Q,onChange:n.onChange,classname:"w_70",type:"number",labelStyle:o.labelStyle,required:!0,rules:"required|min_value:1",from:"sla",placeholder:"n"},null,8,["label","value","name","onChange","labelStyle"]),F("    "),d(b,{label:e.lang("option"),elements:o.selectOptions,name:"respond_option-"+Q,onChange:n.onChange,value:ue.respond_option,labelStyle:o.labelStyle,hideEmptySelect:!0,classname:"w_95"},null,8,["label","elements","name","onChange","value","labelStyle"])])]),s("td",null,[s("div",rF,[d(v,{label:e.lang("resolve_within"),value:ue.resolve_count,name:"resolve_count-"+Q,onChange:n.onChange,classname:"w_70",labelStyle:o.labelStyle,type:"number",required:!0,placeholder:"n",rules:"required|min_value:1",from:"sla"},null,8,["label","value","name","onChange","labelStyle"]),F("    "),d(b,{label:e.lang("option"),elements:o.selectOptions,name:"resolve_option-"+Q,onChange:n.onChange,value:ue.resolve_option,labelStyle:o.labelStyle,hideEmptySelect:!0,classname:"w_95"},null,8,["label","elements","name","onChange","value","labelStyle"])])]),s("td",null,[d(y,{label:e.lang("operational_hours"),multiple:!1,name:"business_hour-"+Q,labelStyle:o.labelStyle,apiEndpoint:"/api/dependency/business-hours",value:ue.business_hour,onChange:n.onChange,strlength:17,required:!1,clearable:!!ue.business_hour},null,8,["label","name","labelStyle","value","onChange","clearable"])]),(i(!0),l(A,null,G(o.channels,Te=>(i(),l("td",null,[s("i",{class:x([Te.icon,ue.channels.includes(Te.id)?"active-channel":"inactive-channel"]),"aria-hidden":"true",onClick:Ee=>n.toggleChannel(ue.channels.includes(Te.id),Q,Te.id),style:{"pointer-events":"initial",cursor:"pointer"}},null,10,dF)]))),256))]))),256))])])):f("",!0)])])]),s("div",null,[s("div",cF,[o.default_sla?f("",!0):(i(),D(w,{key:0,categories:o.formCategories},null,8,["categories"]))]),s("div",null,[d(u,{componentName:"reminder"})]),d(M,{getUpdateArray:n.approchesArray,approach:o.approach},null,8,["getUpdateArray","approach"]),d(C,{getUpdateArray:n.violatedArray,violated:o.violated},null,8,["getUpdateArray","violated"])]),s("div",uF,[d(g,{label:e.lang("admin_notes"),value:o.internal_notes,type:"textarea",name:"internal_notes",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",rows:10},null,8,["label","value","onChange","placehold"])])]),r.showLoader?f("",!0):(i(),l("div",hF,[s("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=ue=>n.validateForm())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.lang(o.btnName)),1)])]))]),_:1},512)]))]),d(ye,{name:"modal"},{default:k(()=>[o.showDeleteModal?(i(),D(R,{key:0,showModal:!0,onClose:()=>o.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",_F,h(e.lang("delete")),1)]),fields:k(()=>[o.loading?(i(),D(m,{key:0})):f("",!0),o.loading?f("",!0):(i(),l("span",mF,h(e.lang("are_you_sure_you_want_to_delete")),1))]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=J=>n.doDelete()),class:"btn btn-danger"},[pF,F(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const Ca=T(j$,[["render",fF],["__scopeId","data-v-033411b6"]]),gF={name:"business-hours-index",description:"Business hours table component",data(){return{columns:["name","status","action"],options:{texts:{filter:"",limit:""},templates:{status:function(e,t){return this.h(Gt,{data:t})},action:function(e,t){return this.h(Se,{data:t})}},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort:e.orderBy?e.orderBy:"id",order:e.ascending?"desc":"asc",search:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.message.data.map(t=>(t.edit_url="/business-hour/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/sla/business-hours/delete/"+t.id,t.active=t.active=="1"?"active":"inactive",t)),count:e.message.total}}},apiUrl:"/sla/business-hours/getindex/"}}},vF={class:"col-sm-12"},bF={class:"card card-light"},yF={class:"card-header"},kF={class:"card-title"},wF={class:"card-tools"},CF=s("i",{class:"glyphicon glyphicon-plus"},null,-1),DF={class:"card-body"};function SF(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",vF,[d(u,{componentName:"dataTableModal"}),s("div",bF,[s("div",yF,[s("h3",kF,h(e.lang("list_of_business_hours")),1),s("div",wF,[S((i(),D(m,{class:"btn btn-tool",to:"/business-hour/create"},{default:k(()=>[CF]),_:1})),[[g,e.lang("create_business_hour")]])])]),s("div",DF,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options},null,8,["url","dataColumns","option"])])])])}const $F=T(gF,[["render",SF]]);function FF(e){const{holiday_description:t,date:a}=e;let r={holiday_description:[t,"isRequired"],date:[a,"isRequired"]};const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}function MF(e){const{name:t,description:a,timezone:r,dateWithTime:o,hours:n}=e;let u={name:[t,"isRequired"],description:[a,"isRequired"],timezone:[r,"isRequired"]},m,p;n===1&&(o.map((b,y)=>{b.status==="Open_custom"&&(u["open_time"+y]=[b.open_time,"isRequired"],u["close_time"+y]=[b.close_time,"isRequired"])}),m=TF(o));const v=new he(O).validate(u);return p=v.errors,n===1?m=m&&v.isValid:m=v.isValid,de.dispatch("setValidationError",p),{errors:p,isValid:m}}function TF(e){let t=0;return e.map(a=>{if(typeof a.open_time=="object"&&(a.open_time=fe(a.open_time).format("HH:mm")),typeof a.close_time=="object"&&(a.close_time=fe(a.close_time).format("HH:mm")),a.status=="Open_custom"&&a.open_time==a.close_time){let r=O("open_and_close_should_not_be_same");t++,de.dispatch("setAlert",{type:"danger",message:r,component_name:"hours-table"})}if(a.status=="Open_custom"&&a.open_time>a.close_time){let r=O("open_time_should_be_less_than_close_time");t++,de.dispatch("setAlert",{type:"danger",message:r,component_name:"hours-table"})}}),!(t>0)}const EF={name:"hours-table",description:"hours table component",components:{"date-time-field":Qe},props:{day:{type:Object,default:()=>{}},index:{type:Number,default:0},onHoursChange:{type:Function},onClosed:{type:Function},onOpenfixed:{type:Function}},data:()=>({isDisabled:!1,openTimeOptions:{start:"00:00",step:"00:30",end:"23:30"},closeTimeOptions:{start:"00:00",step:"00:30",end:"23:30"},labelStyle:{display:"none"},moment:fe}),watch:{day(e,t){this.day=newvalue}},beforeMount(){let e=fe(this.day.open_time,"HH:mm").format();this.closeTimeOptions.start=this.day.open_time!==null?fe(e).add(30,"minutes").format("HH:mm"):"00:00"},methods:{onChangeStartTime(e,t){this.closeTimeOptions.start=fe(e).add(30,"minutes").format("HH:mm"),this.day.close_time=fe(e).add(30,"minutes").format("HH:mm");let a=t.split(""),r=a[a.length-1];this.onHoursChange("open_time",e,r)},onChangeEndTime(e,t){let a=t.split(""),r=a[a.length-1];this.onHoursChange("close_time",e,r)},daySelect(e,t){let a=e==="Closed"?"Open_custom":"Closed";this.onClosed(a,t),this.onHoursChange("close_time","00:00",t),this.onHoursChange("open_time","00:00",t)},open24(e,t){let a=e==="Open_custom"?"Open_fixed":"Open_custom";this.onClosed(a,t),this.onHoursChange("close_time","00:00",t),this.onHoursChange("open_time","00:00",t)}}},LF={id:"hours_table"},IF={id:"example2",class:"table"},AF={class:"inputField"},qF={style:{width:"20%"}},PF={class:"label_align"},VF=["checked"],OF={id:"open24"},NF={class:"label_align1"},xF=["checked","disabled"],UF={id:"timeSelect"},RF={class:"row"};function jF(e,t,a,r,o,n){const u=c("date-time-field");return i(),l("div",LF,[s("table",IF,[s("thead",AF,[s("tr",null,[s("td",qF,[s("label",PF,[s("input",{class:"checkbox_align",id:"day_select",type:"checkbox",name:"day",onChange:t[0]||(t[0]=m=>n.daySelect(a.day.status,a.index)),checked:a.day.status!="Closed"},null,40,VF),F(" "+h(e.lang("day"+a.index)),1)])]),s("td",OF,[s("label",NF,[s("input",{class:"checkbox_align",id:"open24_hour",type:"checkbox",name:"open_hour",onChange:t[1]||(t[1]=m=>n.open24(a.day.status,a.index)),checked:a.day.status=="Open_fixed",disabled:a.day.status=="Closed"},null,40,xF),F(" "+h(e.lang("open24Hours")),1)])]),s("td",UF,[s("div",RF,[d(u,{id:"open_time"+a.index,label:e.lang("date"),value:e.moment(a.day.open_time,"H:m"),labelStyle:e.labelStyle,name:"open_time"+a.index,type:"time",onChange:n.onChangeStartTime,required:a.day.required,"time-picker-options":e.openTimeOptions,format:"HH:mm",classname:"col-sm-6",clearable:!1,disabled:a.day.status=="Open_fixed"||a.day.status=="Closed",place:"From...",checkManual:!0},null,8,["id","label","value","labelStyle","name","onChange","required","time-picker-options","disabled"]),d(u,{id:"close_time"+a.index,label:e.lang("date"),value:e.moment(a.day.close_time,"H:m"),labelStyle:e.labelStyle,name:"close_time"+a.index,type:"time",onChange:n.onChangeEndTime,required:a.day.required,"time-picker-options":e.closeTimeOptions,format:"HH:mm",classname:"col-sm-6",clearable:!1,disabled:a.day.status=="Open_fixed"||a.day.status=="Closed",place:"To...",checkManual:!0},null,8,["id","label","value","labelStyle","name","onChange","required","time-picker-options","disabled"])])])])])])])}const BF=T(EF,[["render",jF]]);const HF={props:["successMsg","errorMsg","successShow","errorShow","extraData","baan"],data(){return{}},created(){window.emitter.on("startSlide",this.SlideUp)},watch:{successMsg(e,t){return e},errorMsg(e,t){return e},successShow(e,t){return e},errorShow(e,t){return e},extraData(e,t){return e},ban(e,t){return e}}},ft=e=>(ee("data-v-1978bc3f"),e=e(),te(),e),zF={id:"alert"},WF={class:"row"},GF={class:"col-md-12"},YF=ft(()=>s("i",{class:"fa fa-check-circle"},null,-1)),KF=ft(()=>s("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1)),JF=ft(()=>s("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1)),QF={key:0},XF=ft(()=>s("i",{class:"fa fa-warning"},null,-1)),ZF={key:1},eM={id:"bottom"},tM=ft(()=>s("i",{class:"fa fa-warning"},null,-1)),aM=["innerHTML"];function sM(e,t,a,r,o,n){return i(),l("div",zF,[s("div",WF,[s("div",GF,[s("div",{class:"alert alert-success alert-dismissable",style:Be({display:a.successShow})},[YF,F(" "+h(e.lang(a.successMsg))+" ",1),KF],4),s("div",{id:"merge-err-alert",class:"alert alert-danger alert-dismissable",style:Be({display:a.errorShow})},[JF,a.errorMsg.length<5?(i(),l("span",QF,[(i(!0),l(A,null,G(a.errorMsg,u=>(i(),l("p",null,[XF,F(" "+h(e.lang(u)),1)]))),256))])):f("",!0),a.errorMsg.length>5?(i(),l("span",ZF,[s("p",eM,[tM,F(" "+h(e.lang(a.errorMsg)),1)])])):f("",!0),s("div",{innerHTML:a.extraData},null,8,aM)],4)])])])}const $s=T(HF,[["render",sM],["__scopeId","data-v-1978bc3f"]]);const oM={name:"holiday",description:"holiday create edit and delete component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},addRow:{type:Function},deleteRow:{type:Function},data:{type:Array},editData:{type:Object},deleteData:{type:String},index:{type:Number}},data:()=>({before:fe().year()-1+"-12-31",after:fe().year()+"-12-31",holiday_description:"",date:"",lang_locale:"",containerStyle:{width:"500px"},SuccessAlert:"none",success:"",error:"",ErrorAlert:"none",btnName:"",iconClass:"fas fa-save",page_title:"",classname:"btn btn-primary",moment:fe}),created(){this.lang_locale=localStorage.getItem("LANGUAGE"),this.editData.description!==void 0?(this.btnName="update",this.iconClass="fas fa-sync",this.page_title="edit_holiday",this.holiday_description=this.editData.description,this.date=fe(this.editData.date+"-"+fe().year(),"MM-DD-YYYY")):this.deleteData==="yes"?(this.btnName="delete",this.iconClass="fas fa-trash",this.page_title="delete_holiday",this.classname="btn btn-danger"):(this.btnName="save",this.iconClass="fas fa-save",this.page_title="add_new")},methods:{isValid(){const{errors:e,isValid:t}=FF(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.deleteData==="yes")this.deleteRow(this.index);else if(this.isValid())if(this.editData.description!==void 0){const e=this.data.filter(t=>t.date!==this.editData.date);this.updateData(e)}else this.insertData()},updateData(e){e.some(a=>a.date===fe(this.date).format("MM-DD-YYYY"))===!1?(this.editData.date=fe(this.date).format("MM-DD-YYYY"),this.editData.description=this.holiday_description,this.data[this.index]=this.editData,this.onClose()):this.errorMessage()},insertData(){if(this.data.some(t=>t.date===fe(this.date).format("MM-DD-YYYY"))===!1){const t={date:fe(this.date).format("MM-DD-YYYY"),description:this.holiday_description};this.addRow(t)}else this.errorMessage()},errorMessage(){this.ErrorAlert="block",this.error="date_already_taken",setTimeout(()=>{this.ErrorAlert="none"},5e3)}},components:{"text-field":oe,"date-time-field":Qe,"alert-notification":$s}},nM={class:"modal-title"},iM={key:0},lM={key:1},rM={class:"row"},dM={class:"form-group col-sm-12"},cM={class:"form-group col-sm-12"};function uM(e,t,a,r,o,n){const u=c("alert-notification"),m=c("date-time-field"),p=c("text-field"),g=c("modal");return i(),l("div",null,[a.showModal?(i(),D(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,addRow:a.addRow,deleteRow:a.deleteRow},{alert:k(()=>[d(u,{successShow:e.SuccessAlert,errorShow:e.ErrorAlert,successMsg:e.lang(e.success),errorMsg:e.lang(e.error)},null,8,["successShow","errorShow","successMsg","errorMsg"])]),title:k(()=>[s("h4",nM,h(e.lang(e.page_title)),1)]),fields:k(()=>[a.deleteData==="yes"?(i(),l("div",iM,[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)])):f("",!0),a.deleteData!=="yes"?(i(),l("div",lM,[s("div",rM,[s("div",dM,[d(m,{label:e.lang("date"),value:e.date,type:"date",name:"date",onChange:n.onChange,required:!0,format:"MM-DD-YYYY",classname:"col-sm-6",clearable:!1,disabled:!1,"not-before":e.before,"not-after":e.after},null,8,["label","value","onChange","not-before","not-after"])]),s("div",cM,[d(p,{label:e.lang("description"),value:e.holiday_description,type:"textarea",name:"holiday_description",onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,length:35,classname:"col-sm-12","show-word-limit":!0},null,8,["label","value","onChange","placehold"])])])])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...v)=>n.onSubmit&&n.onSubmit(...v)),class:x(e.classname)},[s("i",{class:x(e.iconClass),"aria-hidden":"true"},null,2),F(" "+h(e.lang(e.btnName)),1)],2)]),_:1},8,["showModal","onClose","containerStyle","addRow","deleteRow"])):f("",!0)])}const hM=T(oM,[["render",uM]]);const _M={name:"holiday-list",description:"displays list of agents in tabular form with required actions",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime),formattedDate:ae(()=>e.getters.formattedDate)}},props:{addRow:{type:Function},deleteRow:{type:Function},holidayData:{type:Array,default:()=>[]}},data(){return{showModal:!1,data:this.holidayData,editData:{},deleteData:"no",index:0,SuccessAlert:"none",success:"",error:"",ErrorAlert:"none",moment:fe}},watch:{holidayData(e,t){this.data=e}},methods:{onClose(){this.showModal=!this.showModal,this.editData={},this.deleteData="no"},addRoww(e){this.data.push(e),this.onClose()},deleteRoww(e){this.data.splice(e,1),this.onClose()},deleteHoliday(e){this.showModal=!0,this.deleteData="yes",this.index=e},editHoliday(e,t){this.showModal=!0,this.editData=e,this.index=t}},components:{"holiday-event":hM,"alert-notification":$s,"tool-tip":Ae}},na=e=>(ee("data-v-284bc7f9"),e=e(),te(),e),mM={class:"card card-light"},pM={class:"card-header"},fM={class:"card-title"},gM={class:"card-tools"},vM=na(()=>s("span",{class:"glyphicon glyphicon-plus"},null,-1)),bM=[vM],yM={class:"card-body"},kM={key:0,class:"table"},wM={class:"head"},CM={class:"head"},DM={class:"head"},SM={class:"head"},$M=["onClick"],FM=na(()=>s("span",{title:"Edit Holiday",class:"btn btn-primary"},[s("i",{class:"fa fa-edit"})],-1)),MM=[FM],TM=["onClick"],EM=na(()=>s("span",{title:"Delete Holiday",class:"btn btn-danger"},[s("i",{class:"fas fa-trash"})],-1)),LM=[EM],IM={key:1,class:"table"},AM={style:{"text-align":"center"}};function qM(e,t,a,r,o,n){const u=c("tool-tip"),m=c("alert-notification"),p=c("holiday-event"),g=P("tooltip");return i(),l("div",mM,[s("div",pM,[s("h3",fM,[F(h(e.lang("yearly_holiday_list"))+" ",1),d(u,{message:e.lang("holidays_will_be_ignored_when_calculating_SLA_for_a_ticket"),size:"medium"},null,8,["message"])]),s("div",gM,[S((i(),l("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=v=>o.showModal=!0)},bM)),[[g,e.lang("add_new")]])])]),s("div",yM,[d(m,{successShow:o.SuccessAlert,errorShow:o.ErrorAlert,successMsg:e.lang(o.success),errorMsg:e.lang(o.error)},null,8,["successShow","errorShow","successMsg","errorMsg"]),o.data.length!=0?(i(),l("table",kM,[s("thead",null,[s("th",wM,h(e.lang("date")),1),s("th",CM,h(e.lang("description")),1),s("th",DM,h(e.lang("action")),1)]),s("tbody",null,[(i(!0),l(A,null,G(o.data,(v,b)=>(i(),l("tr",SM,[s("td",null,h(r.formattedDate(o.moment(v.date,"MM-DD-YYYY"))),1),s("td",null,h(v.description),1),s("td",null,[s("a",{id:"edit",onClick:y=>n.editHoliday(v,b),href:"javascript:void(0)"},MM,8,$M),s("a",{id:"delete",onClick:y=>n.deleteHoliday(b),href:"javascript:void(0)"},LM,8,TM)])]))),256))])])):(i(),l("table",IM,[s("p",AM,h(e.lang("no-data-to-show")),1)])),o.showModal?(i(),D(p,{key:2,onClose:n.onClose,data:a.holidayData,index:o.index,editData:o.editData,deleteData:o.deleteData,showModal:o.showModal,addRow:n.addRoww,deleteRow:n.deleteRoww},null,8,["onClose","data","index","editData","deleteData","showModal","addRow","deleteRow"])):f("",!0)])])}const PM=T(_M,[["render",qM],["__scopeId","data-v-284bc7f9"]]);const VM={name:"business-hours",description:"Business hours create and edit component",props:{onHoursChange:{type:Function},onClosed:{type:Function},onOpenfixed:{type:Function}},beforeMount(){this.getInitialValues()},data:()=>({status:1,name:"",description:"",timezone:"",hours:0,radioOptions:[{name:"select_working_days/hours",value:1},{name:"247hours",value:0}],holidays:[],dateWithTime:[],prePopulate:!1,btnName:"",btnClass:"",page_title:"",loading:!1,size:60,color:"#1d78ff",apiUrl:"",make_default:!1}),methods:{getInitialValues(){const e=window.location.pathname;if(this.loading=!0,e.indexOf("edit")>=0){this.btnName="update",this.btnClass="fas fa-sync",this.page_title="edit_business_hour",this.prePopulate=!0;const t=De(e);L.get(`/api/business-hours/edit/${t}`).then(a=>{this.updateStatesWithData(a.data.data),this.apiUrl="sla/business-hours/store?id="+t,this.make_default=a.data.data.default,this.loading=!1}).catch(a=>{I(a)})}else this.btnName="save",this.btnClass="fas fa-save",this.page_title="create_new_business_hour",this.apiUrl="/sla/business-hours/store",this.dateWithTime=[{days:"Sunday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Monday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Tuesday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Wednesday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Thursday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Friday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Saturday",status:"Open_custom",open_time:"00:00",close_time:"00:30"}],this.loading=!1,this.name="",this.description="",this.hours=0,this.status=1,this.timezone="",this.holidays=[],this.make_default=!1},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onChange(e,t){this[t]=e,t==="timezone"&&(e&&e.id===void 0?this.timezone.id=1:e==null&&(this.timezone=""))},onHourChange(e,t,a){e==="open_time"?this.dateWithTime[a].open_time=t:this.dateWithTime[a].close_time=t},changeDefault(e){e.target.checked===!0?this.make_default="on":this.make_default="off"},onClose(e,t){this.dateWithTime[t].status=e},onOpenfix(e,t){this.dateWithTime[t].status=e},isValid(){const{errors:e,isValid:t}=MF(this.$data);return!!t},onSubmit(){if(this.status=this.status?1:0,this.make_default==="on"&&(this.status=1),this.isValid()){const t={};t.name=this.name,t.description=this.description,t.time_zone=this.timezone.id,t.status=this.status,t.hours=this.hours,t.holiday=this.holidays,t.default_business_hours=this.make_default;for(var e in this.dateWithTime)if(this.hours===1){let a=this.dateWithTime[e];if(a.status==="Closed")t["type"+e]="Closed";else if(a.status==="Open_fixed")t["type"+e]="Open_fixed";else{let r=fe(a.open_time).format("hh:mm"),o=fe(a.close_time).format("hh:mm");r==="Invalid date"&&o==="Invalid date"?t["type"+e]={from:a.open_time,to:a.close_time}:r==="Invalid date"&&o!=="Invalid date"?t["type"+e]={from:a.open_time,to:fe(a.close_time).format("HH:mm")}:r!=="Invalid date"&&o==="Invalid date"?t["type"+e]={from:fe(a.open_time).format("HH:mm"),to:a.close_time}:t["type"+e]={from:fe(a.open_time).format("HH:mm"),to:fe(a.close_time).format("HH:mm")}}}else t["type"+e]="Open_fixed";this.loading=!0,L.post(this.apiUrl,t).then(a=>{this.loading=!1,N(a),this.getInitialValues()}).catch(a=>{this.loading=!1,I(a)})}}},components:{"hours-table":BF,"status-switch":Oe,"text-field":oe,"dynamic-select":Me,"radio-button":Le,"holiday-list":PM}},Fs=e=>(ee("data-v-583934ed"),e=e(),te(),e),OM={class:"col-sm-12"},NM={class:"card card-light"},xM={class:"card-header"},UM={class:"card-title"},RM={class:"card-body"},jM={class:"row"},BM={class:"row"},HM={class:"form-group col-sm-2"},zM={for:"status"},WM=Fs(()=>s("span",{style:{color:"red"}}," *",-1)),GM=Fs(()=>s("br",null,null,-1)),YM={key:0},KM={class:"card card-light"},JM={class:"card-header"},QM={for:"select hours",class:"card-title"},XM={class:"card-body"},ZM={for:"holidays"},e8={id:"text"},t8={class:"label_align1"},a8=["checked"],s8={key:1,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},o8={class:"card-footer"};function n8(e,t,a,r,o,n){const u=c("alert"),m=c("text-field"),p=c("dynamic-select"),g=c("radio-button"),v=c("status-switch"),b=c("hours-table"),y=c("holiday-list"),w=c("reuse-loader"),M=P("focus-first-input");return i(),l("div",OM,[d(u),s("div",NM,[s("div",xM,[s("h3",UM,h(e.lang(e.page_title)),1)]),s("div",RM,[e.loading===!1?(i(),l(A,{key:0},[S((i(),l("div",jM,[d(m,{label:e.lang("title"),value:e.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(p,{label:e.lang("time_zone"),multiple:!1,name:"timezone",required:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/time-zones",value:e.timezone,onChange:n.onChange,clearable:!!e.timezone},null,8,["label","value","onChange","clearable"])])),[[M]]),s("div",BM,[d(m,{label:e.lang("description"),value:e.description,type:"textarea",name:"description",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-5",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{options:e.radioOptions,label:e.lang("hours"),name:"hours",value:e.hours,onChange:n.onChange,classname:"form-group col-sm-5",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"]),s("div",HM,[s("label",zM,h(e.lang("status")),1),WM,GM,d(v,{name:"status",value:e.status,onChange:n.onChange,classname:"pull-left",bold:!0},null,8,["value","onChange"])])]),e.hours?(i(),l("div",YM,[d(u,{componentName:"hours-table"}),s("div",KM,[s("div",JM,[s("h3",QM,h(e.lang("open_hours")),1)]),s("div",XM,[(i(!0),l(A,null,G(e.dateWithTime,(C,E)=>(i(),D(b,{key:C.days,day:C,index:E,onHoursChange:n.onHourChange,onClosed:n.onClose,onOpenfixed:n.onOpenfix},null,8,["day","index","onHoursChange","onClosed","onOpenfixed"]))),128))])])])):f("",!0),s("div",ZM,[d(y,{holidayData:e.holidays},null,8,["holidayData"])]),s("div",e8,[s("label",t8,[s("input",{class:"checkbox_align",type:"checkbox",name:"default",onChange:t[0]||(t[0]=(...C)=>n.changeDefault&&n.changeDefault(...C)),checked:e.make_default=="on"},null,40,a8),F("  "+h(e.lang("make-default-business-hours")),1)])])],64)):f("",!0),e.loading===!0?(i(),l("div",s8,[d(w,{"animation-duration":4e3,color:e.color,size:e.size},null,8,["color","size"])])):f("",!0)]),s("div",o8,[s("button",{type:"button",id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=(...C)=>n.onSubmit&&n.onSubmit(...C))},[s("i",{class:x(e.btnClass)},null,2),F(" "+h(e.lang(e.btnName)),1)])])])])}const Da=T(VM,[["render",n8],["__scopeId","data-v-583934ed"]]),i8={name:"form-group-list",description:"List down the form groups",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","group_type","action"],options:{},showDrop:!1}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);let e=this;this.options={headings:{name:this.trans("name"),created_at:this.trans("creation-date"),group_type:this.trans("form_group_type"),action:this.trans("action")},texts:{filter:"",limit:"",filterPlaceholder:"Search"},templates:{action:function(t,a){return e.h(Se,{data:a})}},sortable:["name","created_at","group_type"],filterable:["name","created_at","group_type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"asc":"desc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url=a.edit_url,a.delete_url=e.basePath()+"/api/form-group/"+a.id,a.created_at=e.formattedTime(a.created_at),a)),count:t.data.total}}}},methods:{formGroupListMounted(){window.emitter.emit("create-form-group-button-mounted")}}},l8={class:"col-sm-12",id:"main-div"},r8={class:"card card-light",id:"box-primary"},d8={class:"card-header"},c8={class:"card-title",id:"box-title-1"},u8={class:"card-tools"},h8={href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},_8=s("i",{class:"glyphicon glyphicon-plus"},null,-1),m8=[_8],p8={class:"dropdown-menu dropdown-menu-right",role:"menu"},f8={id:"form-group-create-button"},g8={class:"card-body"};function v8(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",l8,[d(u,{componentName:"dataTableModal"}),s("div",r8,[s("div",d8,[s("h3",c8,h(e.lang("form_group_list")),1),s("div",u8,[S((i(),l("a",h8,m8)),[[g,e.lang("add_fields")]]),S(s("div",p8,[s("span",f8,h(n.formGroupListMounted()),1),d(m,{id:"add-fg-link",class:"dropdown-item",to:"/form-group/create"},{default:k(()=>[F(h(e.lang("new_ticket_form_group")),1)]),_:1})],512),[[We,e.showDrop]])])]),s("div",g8,[d(p,{url:"api/form-group-list",dataColumns:e.columns,option:e.options},null,8,["dataColumns","option"])])])])}const b8=T(i8,[["render",v8]]),y8={name:"automator-custom-type-field",props:{field:{type:Object,required:!0},actionEmail:{type:Object,required:!0},index:{type:Number,required:!0}},data:()=>({users:null,subject:"",body:""}),beforeMount(){this.users=this.actionEmail.users,this.subject=this.actionEmail.subject,this.body=this.actionEmail.body},methods:{onChange(e,t){this.$store.dispatch("updateActionEmail",{index:this.index,key:t,value:e})}},components:{"dynamic-select":Me,"text-field":oe}},k8={style:{"padding-left":"3rem","padding-right":"3rem"}};function w8(e,t,a,r,o,n){const u=c("dynamic-select"),m=c("text-field"),p=c("tiny-editor-with-validation");return i(),l("div",k8,[a.field.key==="mail_agent"?(i(),D(u,{key:0,label:e.trans("agent"),name:"users",apiEndpoint:"/api/dependency/agents",value:e.users,onChange:n.onChange,rules:"required",required:!0,multiple:!0},null,8,["label","value","onChange"])):f("",!0),d(m,{label:e.trans("subject"),type:"text",name:"subject",value:e.subject,onChange:n.onChange,placehold:e.lang("enter_a_value"),rules:"required",required:!0},null,8,["label","value","onChange","placehold"]),d(p,{name:"body",label:e.trans("body"),value:e.body||"",onChange:n.onChange,rules:"required",required:!0},null,8,["label","value","onChange"])])}const C8=T(y8,[["render",w8]]);const D8={name:"faveo-automator-action",setup(){const e=ce();return{actionList:ae(()=>e.getters.getAutomatorActions),selectedActionKeys:ae(()=>e.getters.getSelectedActionKeys)}},props:{action:{type:Kt,required:!0},index:{type:Number,required:!0},actionEndpoint:{type:String,default:""}},data:()=>({field:null,pageType:"",loading:!1}),created(){window.emitter.on("deletedItem",this.deletedItem)},beforeMount(){this.field=this.action.field;let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket"},methods:{onFieldChange(e){this.field=e,this.$store.dispatch("onFieldChange",{key:"actions",index:this.index,field:this.field})},deleteAction(){window.emitter.emit("deleteItem",{type:"action",index:this.index,id:this.action._id})},deletedItem(){this.loading=!0,setTimeout(()=>{this.loading=!1},1)}},computed:{getApiParameters(){return{ignore_ids:this.actionList.filter(e=>e.field).map(e=>e.field.id)}}},components:{"dynamic-select":Me,"automator-form-field":Cs,"automator-custom-type-field":C8}},S8={class:"col-sm-auto"};function $8(e,t,a,r,o,n){const u=c("custom-loader"),m=c("dynamic-select"),p=c("automator-custom-type-field"),g=c("automator-form-field");return i(),l("div",{class:x(["row","faveo-automator-action",e.field&&e.field.disabled?"disabledDiv":""])},[e.loading?(i(),D(u,{key:0})):f("",!0),s("span",S8,[s("i",{class:"fas fa-trash faveo-trash",onClick:t[0]||(t[0]=v=>n.deleteAction())})]),e.loading?f("",!0):(i(),D(m,{key:1,classname:"col-sm-5",labelStyle:{display:"none"},multiple:!1,id:"action-"+a.action._id,name:"action-"+a.action._id,"api-endpoint":a.actionEndpoint,"api-parameters":n.getApiParameters,optionLabel:"label",value:e.field,onChange:n.onFieldChange,clearable:!1,strlength:60,removeVal:!1},null,8,["id","name","api-endpoint","api-parameters","value","onChange"])),e.field!==null?(i(),l(A,{key:2},[e.field.data_type==="custom"?(i(),l("div",{class:"col-sm-12",key:a.index},[d(p,{field:e.field,"action-email":a.action.action_email,index:a.index},null,8,["field","action-email","index"])])):(i(),l("div",{class:"col-sm-6",key:JSON.stringify(e.field)},[(i(),D(g,{key:a.action._id,enforcerType:"action","form-field":e.field,"enforcer-object":a.action,labelStyle:{display:"none"}},null,8,["form-field","enforcer-object"]))]))],64)):f("",!0)],2)}const F8=T(D8,[["render",$8],["__scopeId","data-v-032f5fcf"]]),M8={name:"action-list",setup(){const e=ce();return{actionList:ae(()=>e.getters.getAutomatorActions)}},props:{actionEndpoint:{type:String,default:""}},data(){return{pageType:""}},beforeMount(){re(this.actionList)||this.addNew();let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket"},methods:{addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"actions",value:new Kt})}},components:{"faveo-automator-action":F8}},T8={style:{"margin-top":"1rem"}},E8=s("i",{class:"fas fa-plus-circle"},null,-1);function L8(e,t,a,r,o,n){const u=c("faveo-automator-action"),m=c("faveo-box");return i(),D(m,{title:e.trans("perform_these_actions")},{default:k(()=>[(i(!0),l(A,null,G(r.actionList,(p,g)=>(i(),D(u,{key:p._id,action:p,actionEndpoint:a.actionEndpoint,index:g},null,8,["action","actionEndpoint","index"]))),128)),s("div",T8,[s("a",{onClick:t[0]||(t[0]=p=>n.addNew()),href:"javascript:;"},[s("span",null,[E8,F(" "+h(e.trans("add_new_action")),1)])])])]),_:1},8,["title"])}const I8=T(M8,[["render",L8]]);const A8={name:"faveo-automator-event",props:{event:{type:Dt,required:!0},index:{type:Number,required:!0},pageType:{type:String,default:"ticket"}},data:()=>({eventObj:null}),beforeMount(){this.eventObj=JSON.parse(JSON.stringify(this.event))},computed:{apiInfoUrl(){return st.convertStringOfPropertiesToObject(this.eventObj.api_info).url},selectedField(){return Jt(this.eventObj._id)?null:this.eventObj.field}},methods:{deleteEvent(){window.emitter.emit("deleteItem",{type:"event",index:this.index,id:this.eventObj._id})},onFieldChange(e){this.eventObj=new Dt(this.eventObj._id,e,null,null,e.data_type,e.api_info),this.updateEventDataToStore()},onChange(e,t){console.log(e,t,"kl"),t.includes("from-")?this.eventObj.from=e:t.includes("to-")?this.eventObj.to=e:this.eventObj[t]=e,console.log(this.eventObj,"eventObj"),this.updateEventDataToStore()},updateEventDataToStore(){this.$store.dispatch("updateEventData",{index:this.index,value:this.eventObj})}},components:{"dynamic-select":Me}},q8={class:"row faveo-automator-action"},P8={class:"col-sm-auto"},V8={class:"col-sm-1 event-label"},O8={class:"col-sm-1 event-label"};function N8(e,t,a,r,o,n){const u=c("dynamic-select");return i(),l("div",q8,[s("span",P8,[s("i",{class:"fas fa-trash faveo-trash",onClick:t[0]||(t[0]=m=>n.deleteEvent())})]),d(u,{classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,id:"event-"+a.event._id,name:"event-"+a.event._id,apiEndpoint:"api/enforcer-events?type="+a.pageType,value:e.eventObj.field,onChange:n.onFieldChange,rules:"required",clearable:!1},null,8,["id","name","apiEndpoint","value","onChange"]),e.eventObj.field&&e.eventObj.data_type==="api"?(i(),l(A,{key:0},[s("label",V8,h(e.trans("from")),1),(i(),D(u,{classname:"col-sm-3",key:e.eventObj.field.id+"from",labelStyle:{display:"none"},multiple:!1,apiEndpoint:n.apiInfoUrl,name:"from-"+a.event._id,value:e.eventObj.from,onChange:n.onChange,rules:"required",strlength:15,clearable:!1},null,8,["apiEndpoint","name","value","onChange"])),s("label",O8,h(e.trans("to")),1),(i(),D(u,{classname:"col-sm-3",key:e.eventObj.field.id+"to",labelStyle:{display:"none"},multiple:!1,apiEndpoint:n.apiInfoUrl,name:"to-"+a.event._id,value:e.eventObj.to,onChange:n.onChange,rules:"required",strlength:15,clearable:!1},null,8,["apiEndpoint","name","value","onChange"]))],64)):f("",!0)])}const x8=T(A8,[["render",N8],["__scopeId","data-v-e9461280"]]);const U8={name:"event-list",props:{pageType:{type:String,default:""}},data:()=>({eventList:[]}),beforeMount(){this.eventList=this.$store.getters.getAutomatorDataByKey("events"),re(this.eventList)||this.addNew()},methods:{addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"events",value:new Dt})}},components:{"faveo-automator-event":x8}},R8=e=>(ee("data-v-cc0b077f"),e=e(),te(),e),j8={style:{"margin-top":"1rem"}},B8=R8(()=>s("i",{class:"fas fa-plus-circle"},null,-1));function H8(e,t,a,r,o,n){const u=c("faveo-automator-event"),m=c("faveo-box");return i(),D(m,{title:e.trans("involves_any_of_these_events")},{default:k(()=>[(i(!0),l(A,null,G(e.eventList,(p,g)=>(i(),D(u,{key:p._id,event:p,index:g,pageType:a.pageType},null,8,["event","index","pageType"]))),128)),s("div",j8,[s("a",{onClick:t[0]||(t[0]=p=>n.addNew()),href:"javascript:;"},[s("span",null,[B8,F(" "+h(e.trans("add_new_event")),1)])])])]),_:1},8,["title"])}const z8=T(U8,[["render",H8],["__scopeId","data-v-cc0b077f"]]);const W8={name:"action-performer",props:{pageType:{type:String,default:"ticket"}},data:()=>({actionsPerformer:"agent"}),beforeMount(){this.actionsPerformer=this.$store.getters.getAutomatorDataByKey("actionsPerformer")},methods:{onchange(e){this.$store.dispatch("setAutomatorDataByKey",{key:"actionsPerformer",value:e})}}},G8={class:"row"},Y8={class:"col-sm-4"},K8={class:"radio-inline form-check"},J8=["checked"],Q8={class:"col-sm-4"},X8={class:"radio-inline form-check"},Z8=["checked"],eT={class:"col-sm-4"},tT={class:"radio-inline form-check"},aT=["checked"];function sT(e,t,a,r,o,n){const u=c("faveo-box");return i(),D(u,{title:e.trans("when_an_action_performed_by")},{default:k(()=>[s("div",G8,[s("div",Y8,[s("label",K8,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[0]||(t[0]=m=>n.onchange("agent")),value:"agent",checked:e.actionsPerformer==="agent"},null,40,J8),F(" "+h(e.lang("agent")),1)])]),a.pageType=="ticket"?(i(),l(A,{key:0},[s("div",Q8,[s("label",X8,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[1]||(t[1]=m=>n.onchange("requester")),value:"requester",checked:e.actionsPerformer==="requester"},null,40,Z8),F(" "+h(e.lang("requester")),1)])]),s("div",eT,[s("label",tT,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[2]||(t[2]=m=>n.onchange("agent_requester")),value:"agent_requester",checked:e.actionsPerformer==="agent_requester"},null,40,aT),F(" "+h(e.lang("agent_or_requester")),1)])])],64)):f("",!0)])]),_:1},8,["title"])}const oT=T(W8,[["render",sT],["__scopeId","data-v-feaddd59"]]),nT={name:"faveo-automator",setup(){const e=ce();return{showLoader:ae(()=>e.getters.showLoader)}},data:()=>({title:"",name:"",status:!0,internal_notes:"",editId:0,formFields:{},submitEndpoint:"",rules:[],actions:[],events:[],formCategories:[],submitFormInProgress:!1,showDeleteModal:!1,deleteType:"",deleteIndex:"",deleteId:"",loading:!1,pageType:""}),props:{category:{type:String,required:!0}},beforeMount(){let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket",this.getAutomatorData(),this.editId=De(this.currentPath()),re(this.editId)?this.handleEditCase():this.handleCreateCase()},created(){window.emitter.on("deleteItem",this.deleteItem)},methods:{handleCreateCase(){this.title="create_"+this.category,this.$store.dispatch("createNewAutomatorInstance")},handleEditCase(){this.title="edit_"+this.category,this.getAutomatorEditData()},onChange(e,t){this[t]=e},getAutomatorData(){this.$store.dispatch("startLoader","getAutomatorData"),axios.get("api/form/automator",{params:{category:this.category,type:this.pageType}}).then(e=>{this.formCategories=e.data.data.form_categories,this.submitEndpoint=e.data.data.submit_endpoint,this.actionEndpoint=e.data.data.action_endpoint}).catch(e=>{I(e,"faveo-automator")}).finally(()=>{this.$store.dispatch("stopLoader","getAutomatorData")})},getAutomatorEditData(){this.$store.dispatch("startLoader","getAutomatorEditData"),axios.get("api/get-enforcer/"+this.category+"/"+this.editId).then(e=>{const t=e.data.data;this.name=t.name,this.status=t.status,this.internal_notes=t.internal_notes;const a=new as(t.id,Ht(t.rules,"rule"),Ht(t.actions,"action"),wo(t.events),t.matcher,t.triggered_by);this.$store.dispatch("createNewAutomatorInstance",a),this.$store.dispatch("stopLoader","getAutomatorEditData")}).catch(e=>{I(e,"faveo-automator")})},async onSubmit(){if(await vo(this.$refs.faveoAutomatorForm)){this.submitFormInProgress=!0;const t=this.$store.getters.getAutomatorData;let a={type:this.category,data:{category_type:this.pageType,id:t.id,matcher:t.matcher,triggered_by:t.actionsPerformer,name:this.name,status:this.status,internal_notes:this.internal_notes,rules:this.updatedRuleList(Wt(t.rules,"rules")),actions:Wt(t.actions,"actions"),events:Co(t.events)}};axios.post(this.submitEndpoint,a).then(r=>{N(r,"faveo-automator"),re(this.editId)?this.getAutomatorEditData():setTimeout(()=>{this.$router.push({path:"/automator",query:{type:this.category}})},3e3)}).catch(r=>{var o,n,u;if(((o=r==null?void 0:r.response)==null?void 0:o.status)===412&&((u=(n=r==null?void 0:r.response)==null?void 0:n.data)!=null&&u.message)){let m={};Object.keys(r.response.data.message).forEach(p=>{let g=p.split("."),v=a.data[g[1]][g[2]].field+a.data[g[1]][g[2]]._id;m[v]=r.response.data.message[p]}),r.response.data.message=m,I(r,"faveo-automator");return}I(r,"faveo-automator")}).finally(()=>{this.submitFormInProgress=!1})}},updatedRuleList(e){for(let t in e)this.loopedVal(e[t].category,e[t]);return e},loopedVal(e,t){for(let a in t.rules)t.rules[a].category=e,t.rules[a].rules.length&&this.loopedVal(e,t.rules[a]);return t},deleteItem({type:e,index:t,id:a}){this.showDeleteModal=!0,this.deleteType=e,this.deleteIndex=t,this.deleteId=a},doDelete(){if(Jt(this.deleteId)){this.deleteItemFromStore(this.deleteType,this.deleteIndex);return}this.loading=!0,axios.delete(`api/delete-enforcer/${this.deleteType}/${this.deleteId}`).then(e=>{this.deleteItemFromStore(this.deleteType,this.deleteIndex),this.showDeleteModal=!1,this.loading=!1,N(e,"faveo-automator")}).catch(e=>{this.showDeleteModal=!1,this.loading=!1,I(e,"faveo-automator")})},deleteItemFromStore(e,t){this.showDeleteModal=!1,this.loading=!1,this.$store.dispatch("deleteElementFromAutomator",{key:e,index:t}),window.emitter.emit("deletedItem")}},beforeDestroy(){this.$store.dispatch("forceStopLoader"),this.$store.dispatch("destroyAutomatorInstance")},components:{"rule-list":Ds,"action-list":I8,"event-list":z8,"text-field":oe,"status-switch":Oe,"action-performer":oT}},iT={class:"col-sm-12"},lT={class:"row"},rT={key:2,class:"form-group row"},dT={class:"col-md-12"},cT=["disabled"],uT={key:0},hT=s("i",{class:"fas fa-save"},null,-1),_T=[hT],mT={key:1},pT=s("i",{class:"fas fa-sync"},null,-1),fT=[pT],gT={class:"modal-title"},vT={key:1},bT=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1);function yT(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("status-switch"),g=c("text-field"),v=c("action-performer"),b=c("event-list"),y=c("rule-list"),w=c("action-list"),M=c("ValidationObserver"),C=c("faveo-box"),E=c("reuse-loader"),R=c("modal"),z=P("focus-first-input");return i(),l("div",iT,[d(C,{title:e.trans(e.title)},{default:k(()=>[d(u,{componentName:"faveo-automator"}),r.showLoader||e.submitFormInProgress?(i(),D(m,{key:0,duration:4e3})):f("",!0),r.showLoader?f("",!0):(i(),l(A,{key:1},[d(p,{slot:"headerMenu",class:"pull-right",name:"status",title:e.status?e.trans("active"):e.trans("inactive"),value:e.status,onChange:n.onChange},null,8,["title","value","onChange"]),d(M,{ref:"faveoAutomatorForm"},{default:k(()=>[S((i(),l("div",lT,[d(g,{id:"name",type:"text",label:e.trans("name"),name:"name",classname:"col-sm-6",value:e.name,onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,rules:"required"},null,8,["label","value","onChange","placehold"])])),[[z]]),a.category==="listener"?(i(),D(v,{key:0,pageType:e.pageType},null,8,["pageType"])):f("",!0),a.category==="listener"?(i(),D(b,{key:1,pageType:e.pageType},null,8,["pageType"])):f("",!0),d(y,{categories:e.formCategories,pageType:e.pageType},null,8,["categories","pageType"]),d(w,{actionEndpoint:e.actionEndpoint},null,8,["actionEndpoint"]),d(g,{label:e.trans("internal_note"),type:"textarea",name:"internal_notes",value:e.internal_notes,onChange:n.onChange,placehold:e.lang("enter_a_value"),length:255,"show-word-limit":!0,rows:2},null,8,["label","value","onChange","placehold"]),r.showLoader?f("",!0):(i(),l("div",rT,[s("div",dT,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=J=>n.onSubmit()),disabled:e.submitFormInProgress},[e.editId?(i(),l("span",mT,fT)):(i(),l("span",uT,_T)),F(" "+h(e.editId?e.trans("update"):e.trans("submit")),1)],8,cT)])]))]),_:1},512)],64))]),_:1},8,["title"]),d(ye,{name:"modal"},{default:k(()=>[e.showDeleteModal?(i(),D(R,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",gT,h(e.lang("delete")),1)]),fields:k(()=>[e.loading?(i(),D(E,{key:0})):f("",!0),e.loading?f("",!0):(i(),l("span",vT,h(e.lang("are_you_sure_you_want_to_delete")),1))]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=J=>n.doDelete()),class:"btn btn-danger"},[bT,F(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const dt=T(nT,[["render",yT]]);const kT={name:"approval-workflow-index",description:"Approval workflow table component",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"/api/admin/approval-workflow/"}),beforeMount(){this.columns=["name","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("action")},columnsClasses:{name:"apply-workflow-index-name",created_at:"apply-workflow-index-created",updated_at:"apply-workflow-index-updated",action:"apply-workflow-index-action"},templates:{action:(e,t)=>this.h(Se,{data:t}),created_at:(e,t)=>this.formattedTime(t.created_at),updated_at:(e,t)=>this.formattedTime(t.updated_at)},sortable:["name","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort_by:e.orderBy?e.orderBy:"name",order:e.ascending?"asc":"desc",search:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>(t.edit_url="/approval-workflow/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/api/admin/approval-workflow/"+t.id+"/workflow/",t)),count:e.data.total}}}}},wT={id:"main-div",class:"col-sm-12"},CT={class:"card-tools"},DT=s("span",{class:"glyphicon glyphicon-plus"},null,-1),ST={id:"apply-workflow-table"};function $T(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",wT,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.lang("list_of_approval_workflow")},{headerMenu:k(()=>[s("div",CT,[S((i(),D(m,{class:"btn btn-tool",to:"/approval-workflow/create"},{default:k(()=>[DT]),_:1})),[[v,e.lang("create_approval_workflow")]])])]),default:k(()=>[s("div",ST,[e.apiUrl!==""?(i(),D(p,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0)])]),_:1},8,["title"])])}const FT=T(kT,[["render",$T]]);function MT(e){const{name:t,levels:a,send_auto_reminders:r,reminder_interval:o}=e;let n={name:[t,"isRequired"]};e.send_auto_reminders&&(n.reminder_interval=[e.reminder_interval,"isRequired"]);let u,m;a.map((v,b)=>{n["level-name-"+b]=[v.name,"isRequired"],n["level-match-"+b]=[v.match,"isRequired"],u=TT(v.approvers.users,v.approvers.user_types,b)});const g=new he(O).validate(n);return m=g.errors,u=u&&g.isValid,de.dispatch("setValidationError",m),{errors:m,isValid:u}}function TT(e,t,a){let r=0;if(e.length==0&&t.length==0){let o=O("atleast_one_user_or_one_user_type_is_required");r++,de.dispatch("setAlert",{type:"danger",message:o,component_name:"approval-level-"+a})}return!(r>0)}const ET={name:"approval-workflow",description:"handles create/edit part of approval workflow",data(){return{send_auto_reminders:0,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],reminder_interval:"",containerStyle:{width:"500px"},reminderOptions:[{id:1,name:"1 Hour"},{id:4,name:"4 Hours"},{id:8,name:"8 Hours"},{id:12,name:"12 Hours"},{id:24,name:"24 Hours"}],id:0,name:"",action_on_approve:"",action_on_deny:"",levels:[{id:0,name:"",order:1,match:"all",approvers:{user_types:[],users:[]}}],loading:!1,showDeletePopUp:!1,matcherOptions:[{id:"any",name:"Any"},{id:"all",name:"All"}],hasDataPopulated:!0,deletingLevelIndex:null,deletingLevelId:null}},mounted(){const e=window.location.pathname,t=De(e);e.indexOf("edit")>=0&&(this.hasDataPopulated=!1,this.getInitialValues(t))},methods:{loadWorkflowData(){const e=window.location.pathname,t=De(e);e.indexOf("edit")>=0&&this.getInitialValues(t)},getInitialValues(e){this.loading=!0,L.get("api/admin/approval-workflow/"+e).then(t=>{this.id=t.data.data.id,this.name=t.data.data.name,this.action_on_approve=t.data.data.action_on_approve,this.action_on_deny=t.data.data.action_on_deny,this.send_auto_reminders=t.data.data.send_auto_reminders,this.reminder_interval=t.data.data.reminder_interval?t.data.data.reminder_interval:"",this.levels=t.data.data.levels,this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},addLevel(){this.levels.push({id:0,name:"",order:this.levels.length+1,match:"all",approvers:{user_types:[],users:[]}}),this.scrollToSubmitButton()},scrollToSubmitButton(){let e=document.getElementById("submit-workflow");setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},2)},onChange(e,t){let a=t.split("-");a.length==1&&(this[t]=e);let r=a[a.length-1];t.includes("level-name-")&&(this.levels[r].name=e),t.includes("approver-user-type-")&&(this.levels[r].approvers.user_types=e),t.includes("approver-agent-")&&(this.levels[r].approvers.users=e),t.includes("level-match-")&&(this.levels[r].match=e)},isValid(){const{errors:e,isValid:t}=MT(this.$data);return!!t},onSubmit(){if(this.isValid()){let e=this.action_on_approve==null?null:this.action_on_approve.id,t=this.action_on_approve==null?null:this.action_on_deny.id;this.loading=!0;const a={id:this.id,name:this.name,action_on_approve:e,action_on_deny:t,levels:this.getFormattedLevelData(),send_auto_reminders:this.send_auto_reminders,reminder_interval:this.send_auto_reminders?this.reminder_interval:""};L.post("/api/admin/approval-workflow",a).then(r=>{N(r,"approval-workflow"),this.loading=!1,window.location.pathname.indexOf("edit")>=0||setTimeout(()=>{this.$router.push({name:"Approval Workflow Index"})},3e3)}).catch(r=>{I(r,"approval-workflow"),this.loading=!1}).finally(r=>{this.loadWorkflowData()})}},getFormattedLevelData(){return this.$data.levels.map(t=>({id:t.id,name:t.name,order:t.order,match:t.match,approvers:{users:ca(t.approvers.users),user_types:ca(t.approvers.user_types)}}))},onDelete(){this.deletingLevelId!=0&&(this.loading=!0,L.delete("api/admin/approval-workflow/"+this.deletingLevelId+"/level").then(e=>{N(e,"approval-workflow")}).catch(e=>{I(e,"approval-workflow")}).finally(e=>{this.loadWorkflowData(),this.loading=!1})),this.levels.splice(this.deletingLevelIndex,1),this.showDeletePopUp=!1},deleting(e,t){this.deletingLevelIndex=e,this.deletingLevelId=t,this.showDeletePopUp=!0}},watch:{showDeletePopUp(e){e||(this.deletingLevelIndex=null,this.deletingLevelId=null)}},components:{"text-field":oe,"dynamic-select":Me,"static-select":xe,"radio-button":Le}},LT={class:"col-sm-12"},IT={key:0,class:"row"},AT={key:0,class:"card card-light"},qT={class:"card-header"},PT={class:"card-title"},VT={class:"card-body"},OT={class:"row",id:"approval-workflow-name"},NT={key:0,class:"row"},xT={id:"list-of-levels"},UT={id:"list-of-levels"},RT={class:"card card-light"},jT={class:"card-header"},BT={class:"card-title"},HT={class:"card-tools"},zT=["id","onClick"],WT=s("span",{class:"fas fa-times","aria-hidden":"true"},null,-1),GT=[WT],YT={class:"card-body"},KT={class:"row margin-auto margin-top-10"},JT=["id"],QT={class:"modal-title"},XT=["id"],ZT=s("i",{class:"glyphicon glyphicon-trash","aria-hidden":"true"},null,-1),e3={class:"card-footer"},t3=s("span",{class:"glyphicon glyphicon-plus"},null,-1),a3=["disabled"],s3=s("span",{class:"fas fa-save"},null,-1);function o3(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("text-field"),g=c("dynamic-select"),v=c("radio-button"),b=c("static-select"),y=c("modal"),w=P("focus-first-input");return i(),l("div",LT,[d(u,{componentName:"approval-workflow"}),o.hasDataPopulated===!1||o.loading===!0?(i(),l("div",IT,[d(m)])):f("",!0),s("div",null,[o.hasDataPopulated?(i(),l("div",AT,[s("div",qT,[s("h3",PT,h(e.lang("approval_workflow_settings")),1)]),s("div",VT,[S((i(),l("div",OT,[d(p,{label:e.lang("name"),value:o.name,name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,classname:"col-md-4"},null,8,["label","value","onChange","placehold"]),d(g,{label:e.lang("status_on_approve"),name:"action_on_approve",multiple:!1,value:o.action_on_approve,classname:"col-sm-3",onChange:n.onChange,apiEndpoint:"/api/dependency/statuses"},null,8,["label","value","onChange"]),d(g,{label:e.lang("status_on_deny"),name:"action_on_deny",multiple:!1,value:o.action_on_deny,classname:"col-sm-3",onChange:n.onChange,apiEndpoint:"/api/dependency/statuses"},null,8,["label","value","onChange"]),d(v,{options:o.radioOptions,label:e.trans("send_auto_reminders"),name:"send_auto_reminders",value:o.send_auto_reminders,onChange:n.onChange,classname:"form-group col-sm-2"},null,8,["options","label","value","onChange"])])),[[w]]),o.send_auto_reminders?(i(),l("div",NT,[d(b,{label:e.trans("reminder_interval"),elements:o.reminderOptions,name:"reminder_interval",onChange:n.onChange,required:!0,classname:"col-sm-4",value:o.reminder_interval},null,8,["label","elements","onChange","value"])])):f("",!0),s("div",xT,[(i(!0),l(A,null,G(o.levels,(M,C)=>(i(),l(A,null,[s("div",UT,[d(u,{componentName:"approval-level-"+C},null,8,["componentName"])]),s("div",RT,[s("div",jT,[s("h3",BT,h(e.lang("level"))+" "+h(C+1),1),s("div",HT,[o.levels.length>1?(i(),l("button",{key:0,id:"approval-workflow-level-delete-"+C,onClick:E=>n.deleting(C,M.id),class:"btn btn-tool"},GT,8,zT)):f("",!0)])]),s("div",YT,[s("div",KT,[d(p,{label:e.lang("name"),value:M.name,name:"level-name-"+C,onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,classname:"col-md-6"},null,8,["label","value","name","onChange","placehold"]),d(b,{label:e.lang("matcher"),elements:o.matcherOptions,name:"level-match-"+C,onChange:n.onChange,required:!0,classname:"col-md-6",value:M.match},null,8,["label","elements","name","onChange","value"])]),s("div",{class:"row margin-auto",id:"approval-workflow-level-"+C},[d(g,{label:e.lang("contacts"),value:M.approvers.users,name:"approver-agent-"+C,onChange:n.onChange,apiEndpoint:"/api/dependency/users?meta=true",multiple:!0,classname:"col-md-6"},null,8,["label","value","name","onChange"]),d(g,{label:e.lang("user_types"),value:M.approvers.user_types,name:"approver-user-type-"+C,onChange:n.onChange,apiEndpoint:"/api/dependency/user-types",multiple:!0,classname:"col-md-6"},null,8,["label","value","name","onChange"])],8,JT)]),o.showDeletePopUp?(i(),D(y,{key:0,showModal:!0,onClose:()=>o.showDeletePopUp=!1,containerStyle:o.containerStyle},{title:k(()=>[s("h4",QT,h(e.lang("delete_workflow_level")),1)]),fields:k(()=>[s("span",null,h(e.lang("you_are_about_to_delete_a_workflow_level"))+". "+h(e.lang("please_confirm")),1)]),controls:k(()=>[s("button",{id:"confirm-delete-button-"+C,type:"button",onClick:t[0]||(t[0]=E=>n.onDelete()),class:"btn btn-danger"},[ZT,F("  "+h(e.lang("delete")),1)],8,XT)]),_:2},1032,["onClose","containerStyle"])):f("",!0)])],64))),256))])]),s("div",e3,[s("button",{type:"button",id:"add-level",onClick:t[1]||(t[1]=(...M)=>n.addLevel&&n.addLevel(...M)),class:"btn btn-primary"},[t3,F(" "+h(e.lang("add_level")),1)]),s("button",{type:"button",id:"submit-workflow",onClick:t[2]||(t[2]=(...M)=>n.onSubmit&&n.onSubmit(...M)),disabled:o.loading,class:"btn btn-primary"},[s3,F(" "+h(e.lang("save")),1)],8,a3)])])):f("",!0)])])}const Sa=T(ET,[["render",o3]]);const n3={name:"priority-index",data(){return{columns:["name","priority_desc","priority_color","action"],apiUrl:"/api/priority-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("priority"),priority_desc:this.trans("priority_desc"),priority_color:this.trans("priority_color"),action:this.trans("actions")},columnsClasses:{name:"priority-name",priority_desc:"priority-desc",priority_color:"priority-color",action:"priority-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{priority_color:function(t,a){return e.h("div",{style:{width:"25px",height:"15px",background:a.priority_color}})},action:(t,a)=>e.h(Se,{data:a})},sortable:["name","priority_desc"],filterable:["name","priority_desc"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.priorities.map(a=>(a.edit_url="/ticket/priority/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/priority/delete/"+a.id,a)),count:t.data.total}}}}},i3={id:"priority-list",class:"col-sm-12"},l3={class:"card-tools"},r3=s("i",{class:"glyphicon glyphicon-plus"},null,-1);function d3(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",i3,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_ticket_priority")},{customActions:k(()=>[s("div",l3,[S((i(),D(m,{class:"btn btn-tool",to:"/ticket/priority/create"},{default:k(()=>[r3]),_:1})),[[v,e.trans("create_ticket_priority")]])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"priority-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const c3=T(n3,[["render",d3]]);function u3(e){const{name:t,priority_desc:a,priority_color:r}=e;let o={name:[t,"isRequired",{"max(50)":O("priority_should_be_less_than_50_characters")}],priority_desc:[a,"isRequired",{"max(255)":O("priority_description_should_be_less_than_255_characters")}],priority_color:[r,"isRequired"]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const h3={name:"priority-create-edit",description:"Priority create edit page",data(){return{page_title:"create_ticket_priority",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,priorityId:"",name:"",priority_desc:"",priority_color:"",ispublic:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}],is_default:!1,showErr:!1,colorErr:"",defaultPriority:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},watch:{priority_color(e,t){return e=="#"&&(this.priority_color=""),this.priority_color},is_default(e,t){this.status=e?1:this.status}},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_priority",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/priority/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.priority;this.priorityId=a.id,this.defaultPriority=a.is_default,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,I(t,"priority-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=u3(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.priority_color=this.priority_color=="#"?"":this.priority_color,this.showErr=!this.priority_color,this.isValid()){this.loading=!0;let e={};e.name=this.name,e.priority_desc=this.priority_desc,e.priority_color=this.priority_color,e.ispublic=this.ispublic?1:0,e.is_default=this.is_default?1:0;let t="/api/priority";this.page_title=="edit_priority"&&(t="/api/priority-edit/"+this.priorityId,e._method="PATCH"),L.post(t,e).then(a=>{this.loading=!1,this.colorErr="",N(a,"priority-create-edit"),this.priorityId?this.getInitialValues(this.priorityId):setTimeout(()=>{this.$router.push({name:"Priority Index"})},3e3)}).catch(a=>{this.loading=!1,a.response.data.message&&a.response.data.message.priority_color&&(this.colorErr=a.response.data.message.priority_color),I(a,"priority-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"radio-button":Le,"color-picker":Ft}},_3={class:"col-sm-12"},m3={key:0,class:"row"},p3={class:"row"},f3=s("span",{class:"text-red"},"*",-1),g3={key:0,class:"error-block is-danger"},v3={key:1,class:"is-danger"},b3={class:"row"},y3={class:"row"},k3={class:"col-sm-12 mt-2"},w3={class:"label_align",name:"is_default"},C3=["keyupListener","disabled"],D3={class:"card-footer"};function S3(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("alert"),p=c("text-field"),g=c("color-picker"),v=c("radio-button"),b=c("faveo-box"),y=P("focus-first-input");return i(),l("div",_3,[s("div",null,[!o.hasDataPopulated||o.loading?(i(),l("div",m3,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"priority-create-edit"}),o.hasDataPopulated?(i(),D(b,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",D3,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=w=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",p3,[d(p,{label:e.trans("priority"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),s("div",{class:x(["col-sm-3 form-group",{"has-error":o.showErr||o.colorErr}])},[s("label",null,[F(h(e.trans("priority_color"))+" ",1),f3]),d(g,{color:o.priority_color,name:"priority_color",onColor:n.onChange,showError:o.showErr,colorError:o.colorErr},null,8,["color","onColor","showError","colorError"]),o.showErr?(i(),l("div",g3,h(e.trans("this_field_is_required")),1)):f("",!0),!o.showErr&&o.colorErr?(i(),l("span",v3,h(o.colorErr),1)):f("",!0)],2),d(v,{options:e.lang(o.publicOptions),label:e.trans("visibility"),name:"ispublic",value:o.ispublic,onChange:n.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])])),[[y]]),s("div",b3,[d(p,{label:e.trans("priority_desc"),value:o.priority_desc,type:"textarea",name:"priority_desc",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold","keyupListener"])]),s("div",y3,[s("div",k3,[s("label",w3,[S(s("input",{class:"checkbox_align",type:"checkbox",name:"is_default","onUpdate:modelValue":t[0]||(t[0]=w=>o.is_default=w),keyupListener:n.triggerEvent,disabled:!!(o.priorityId&&o.defaultPriority)},null,8,C3),[[$e,o.is_default]]),F("  "+h(e.trans("make-default-priority")),1)])])])]),_:1},8,["title"])):f("",!0)])])}const $a=T(h3,[["render",S3]]);const $3={name:"ticket-type-index",data(){return{columns:["name","type_desc","action"],apiUrl:"/api/ticket-types-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),type_desc:this.trans("description"),action:this.trans("actions")},columnsClasses:{name:"type-name",type_desc:"type-desc",action:"type-action"},texts:{filter:"",limit:""},templates:{action:(t,a)=>e.h(Se,{data:a})},sortable:["name","type_desc","status"],filterable:["name","type_desc","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.ticketTypes.map(a=>(a.edit_url="/ticket-type/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/ticket-types-delete/"+a.id,a)),count:t.data.total}}}}},F3={id:"ticket-type-list",class:"col-sm-12"},M3={class:"card-tools"},T3=s("i",{class:"glyphicon glyphicon-plus"},null,-1);function E3(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",F3,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_ticket_types")},{customActions:k(()=>[s("div",M3,[S((i(),D(m,{class:"btn btn-tool",to:"/ticket-type/create"},{default:k(()=>[T3]),_:1})),[[v,e.trans("create_ticket_type")]])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"ticket-type-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const L3=T($3,[["render",E3]]);function I3(e){const{name:t,type_desc:a}=e;let r={name:[t,"isRequired",{"max(50)":O("name_should_be_less_than_50_characters")}],type_desc:[a,"isRequired",{"max(50)":O("descripton_should_be_less_than_50_characters")}]};const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}const A3={name:"ticket-type-create-edit",description:"Ticket Type Create edit page",data(){return{page_title:"create_ticket_type",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,type_id:"",name:"",type_desc:"",ispublic:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}]}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_ticket_type",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/ticket-types/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.ticketType;this.type_id=a.id,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,I(t,"ticket-type-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=I3(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.type_desc=this.type_desc,e.ispublic=this.ispublic?1:0;let t="/api/ticket-types";this.page_title=="edit_ticket_type"&&(t="/api/ticket-types-edit/"+this.type_id,e._method="PATCH"),L.post(t,e).then(a=>{this.loading=!1,N(a,"ticket-type-create-edit"),this.type_id?this.getInitialValues(this.type_id):setTimeout(()=>{this.$router.push({name:"Ticket Type Index"})},3e3)}).catch(a=>{this.loading=!1,I(a,"ticket-type-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"radio-button":Le}},q3={class:"col-sm-12"},P3={key:0,class:"row"},V3={class:"row"},O3={class:"row"},N3={class:"card-footer"};function x3(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("radio-button"),v=c("faveo-box"),b=P("focus-first-input");return i(),l("div",q3,[!o.hasDataPopulated||o.loading?(i(),l("div",P3,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"ticket-type-create-edit"}),o.hasDataPopulated?(i(),D(v,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",N3,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=y=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",V3,[d(p,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),d(g,{options:e.lang(o.publicOptions),label:e.trans("visibility"),name:"ispublic",keyupListener:n.triggerEvent,value:o.ispublic,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","keyupListener","value","onChange"])])),[[b]]),s("div",O3,[d(p,{label:e.trans("description"),value:o.type_desc,type:"textarea",name:"type_desc",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const Fa=T(A3,[["render",x3]]);const U3={name:"status-index",data(){return{columns:["name","visibility_for_client","purpose_of_status","order","icon","actions"],options:{}}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),visibility_for_client:this.trans("visibility_to_client"),purpose_of_status:this.trans("purpose_of_status"),order:this.trans("order"),icon:this.trans("icon"),actions:this.trans("actions")},columnsClasses:{name:"status-name",visibility_for_client:"status-visible",purpose_of_status:"status-purpose",order:"status-order",icon:"status-icon",actions:"status-actions"},texts:{filter:"",limit:""},templates:{purpose_of_status(t,a){return a.purpose_of_status?a.purpose_of_status.name:"--"},visibility_for_client:function(t,a){return e.h("span",{class:a.visibility_for_client?"btn btn-success btn-xs":"btn btn-warning btn-xs",style:"cursor : auto"},a.visibility_for_client?"Yes":"No")},icon:function(t,a){return e.h("i",{class:a.icon,style:"color : "+a.icon_color},"")},actions:(t,a)=>e.h(Se,{data:a})},sortable:["name","visibility_for_client","purpose_of_status","send_email","order"],filterable:["name","visibility_for_client","purpose_of_status","send_email","order","icon"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.statuses.map(a=>(a.is_default=a.default,a.edit_url="/status/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/status-delete/"+a.id,a)),count:t.data.total}}}}},R3={class:"col-sm-12"},j3={class:"card card-light"},B3={class:"card-header"},H3={class:"card-title"},z3={class:"card-tools"},W3=s("i",{class:"glyphicon glyphicon-plus"},null,-1),G3={class:"card-body",id:"status_index"};function Y3(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",R3,[d(u,{componentName:"dataTableModal"}),s("div",j3,[s("div",B3,[s("h3",H3,h(e.trans("list_of_status")),1),s("div",z3,[S((i(),D(m,{class:"btn btn-tool",to:"/status/create"},{default:k(()=>[W3]),_:1})),[[g,e.trans("create_new_status")]])])]),s("div",G3,[d(p,{url:"/api/ticket-status-list",dataColumns:o.columns,option:o.options,scroll_to:"status_index"},null,8,["dataColumns","option"])])])])}const K3=T(U3,[["render",Y3]]);function J3(e){const{name:t,sort:a,order:r,icon_class:o,purpose_of_status:n,visibility_for_client:u,secondary_status:m,override_status:p,override_statuses:g}=e;let v={name:[t,"isRequired"],sort:[a,"isRequired"],icon_class:[o,"isRequired"],order:[r,"isRequired"],purpose_of_status:[n,"isRequired"]};e.visibility_for_client||(v.secondary_status=[m,"isRequired"]),e.override_status||(v.override_statuses=[g,"isRequired"]);const b=new he(O),{errors:y,isValid:w}=b.validate(v);return de.dispatch("setValidationError",y),{errors:y,isValid:w}}const Q3={name:"status-create-edit",data(){return{page_title:"create_new_status",iconClass:"fas fa-save",btnName:"save",status_id:"",hasDataPopulated:!1,name:"",order:"",icon_class:{icon_class:"fas fa-edit"},iconList:[],icon_color:"",visibility_for_client:1,allow_client:1,yesNoOptions:[{name:"yes",value:1},{name:"no",value:0}],purpose_of_status:"",halt_sla:1,commentOptions:[{name:"required",value:1},{name:"optional",value:0}],comment:1,overrideOptions:[{name:"all_statuses",value:1},{name:"specific_statuses",value:0}],override_status:1,is_default:!1,showErr:!1,secondary_status:"",override_statuses:[],loading:!1,alerts:null,setAlerts:{}}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getIconList(),this.getStatusAlerts(e)},computed:{visibiltyEndpoint(){let e="/api/dependency/statuses?client_visibility=1";return this.purpose_of_status?e+"&purpose_of_status_id="+this.purpose_of_status.id:e}},methods:{getIconList(){L.get("/json/icon-list.json").then(e=>{this.iconList=e.data.data}).catch(e=>{this.iconList=[]})},getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_status",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/status/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.status_id=e;let a=t.data.data.status;this.updateStatesWithData(a),this.override_status=a.override_statuses.length?0:1,this.icon_class={icon_class:a.icon},this.is_default=!!a.default}).catch(t=>{this.loading=!1,I(t)})},getStatusAlerts(e){this.loading=!0;let t=De(e);t=t===void 0?"":t,L.get("/api/status-alerts/"+t).then(a=>{this.loading=!1,this.alerts=a.data.data.ticket_status_changed,this.updateSetAlerts()}).catch(a=>{this.loading=!1,I(a)})},updateSetAlerts(){let e={};this.alerts.associates.forEach(function(t){let a=[],r=t.associate_id;t.channels.length>0&&(a=t.channels),e[r]=a}),this.setAlerts=e},toggleChannel(e,t,a){let r=this.setAlerts[t].indexOf(a);r>-1&&this.setAlerts[t].splice(r,1),e||this.setAlerts[t].push(a)},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.secondary_status=e.secondary_status?e.secondary_status:""},formatAlertFormData(){let e=[];for(const[t,a]of Object.entries(this.setAlerts)){let r={};r.associate=t,r.channels=[],a.forEach(function(o,n){r.channels[n]={channel_id:o}}),e.push(r)}return e},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=J3(this.$data);return t},onSubmit(){if(this.icon_color=this.icon_color=="#"?"":this.icon_color,this.showErr=!this.icon_color,this.isValid()&&this.icon_color){this.loading=!0;let e={};e.name=this.name,e.order=this.order,e.icon_color=this.icon_color,e.icon_class=this.icon_class.icon_class,e.visibility_for_client=this.visibility_for_client,this.visibility_for_client||(e.secondary_status=this.secondary_status.id),e.allow_client=this.allow_client,e.purpose_of_status=this.purpose_of_status.id,e.halt_sla=this.halt_sla,e.comment=this.comment,e.default=this.is_default?1:0,e.override_statuses=this.override_status?[]:this.override_statuses.map(a=>a.id),e.alerts=this.formatAlertFormData(),this.status_id&&(e.status=this.status_id,e._method="PATCH");let t=this.status_id?"/api/status-update/"+this.status_id:"/api/status";L.post(t,e).then(a=>{this.loading=!1,N(a,"status-create-edit"),this.status_id?this.getInitialValues(this.status_id):setTimeout(()=>{this.$router.push({name:"Status Index"})},3e3)}).catch(a=>{this.loading=!1,I(a,"status-create-edit")})}}},components:{"text-field":oe,"number-field":Je,"dynamic-select":Me,"color-picker":Ft,"radio-button":Le}},X3=e=>(ee("data-v-cab0e7f5"),e=e(),te(),e),Z3={class:"container col-sm-12"},eE={key:0},tE={key:1,class:"card card-light"},aE={class:"card-header"},sE={class:"card-title"},oE={class:"card-body"},nE={class:"row"},iE=X3(()=>s("span",{class:"text-red"}," *",-1)),lE={key:0,class:"error-block is-danger"},rE={class:"row"},dE={class:"row"},cE={key:0,class:"row"},uE={for:"notify",class:"col-sm-12"},hE={class:"card card-light"},_E={class:"card-header"},mE={class:"card-title"},pE={class:"card-body"},fE={class:"table table-borderless table-sm"},gE={style:{"width=":"100%"}},vE={style:{"text-align":"left"}},bE={style:{width:"5%","text-align":"left"}},yE=["onClick"],kE={class:"card-footer"};function wE(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("text-field"),g=c("number-field"),v=c("dynamic-select"),b=c("color-picker"),y=c("radio-button"),w=P("focus-first-input");return i(),l("div",Z3,[d(u,{componentName:"status-create-edit"}),!o.hasDataPopulated||o.loading?(i(),l("div",eE,[d(m,{loadingSpeed:4e3})])):f("",!0),o.hasDataPopulated?(i(),l("div",tE,[s("div",aE,[s("h3",sE,h(e.trans(o.page_title)),1)]),s("div",oE,[S((i(),l("div",nE,[d(p,{label:e.trans("name"),type:"text",value:o.name,name:"name",class:"col-sm-3",required:!0,onChange:n.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),d(g,{label:e.trans("display_order"),value:o.order,name:"order",classname:"col-sm-3",onChange:n.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),d(v,{name:"icon_class",label:e.trans("icon_class"),value:o.icon_class,onChange:n.onChange,classname:"col-sm-3",elements:o.iconList,multiple:!1,"option-label":"icon_class",required:!0,clearable:!1},null,8,["label","value","onChange","elements"]),s("div",{class:x(["col-sm-3 form-group",{"has-error":o.showErr}])},[s("label",null,[F(h(e.trans("icon_color"))+" ",1),iE]),d(b,{color:o.icon_color,name:"icon_color",onColor:n.onChange,showError:o.showErr},null,8,["color","onColor","showError"]),o.showErr?(i(),l("div",lE,h(e.trans("this_field_is_required")),1)):f("",!0)],2)])),[[w]]),s("div",rE,[d(y,{options:o.yesNoOptions,label:e.trans("allow_client"),name:"allow_client",value:o.allow_client,onChange:n.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6",hint:e.trans("if_yes_then_clients_can_choose_this_status")},null,8,["options","label","value","onChange","hint"]),d(y,{options:o.yesNoOptions,label:e.trans("halt_sla"),name:"halt_sla",value:o.halt_sla,onChange:n.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"]),d(y,{options:o.commentOptions,label:e.trans("comment"),name:"comment",value:o.comment,onChange:n.onChange,classname:"form-group col-sm-3",optionClass:"col-sm-6",hint:e.trans("if_required_comment_is_mandatory_while_changing_the_ticket_status")},null,8,["options","label","value","onChange","hint"]),d(y,{options:o.yesNoOptions,label:e.trans("visibility_to_client"),name:"visibility_for_client",value:o.visibility_for_client,onChange:n.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6",hint:e.trans("if_yes_status_name_will_be_displayed")},null,8,["options","label","value","onChange","hint"]),d(y,{options:o.overrideOptions,label:e.trans("allowed_override_status_to"),name:"override_status",value:o.override_status,onChange:n.onChange,classname:"form-group col-sm-3",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",dE,[d(v,{label:e.trans("purpose_of_status"),multiple:!1,name:"purpose_of_status",required:!0,classname:"col-sm-3",apiEndpoint:"/api/dependency/ticket-status-type?purpose_of_status=1",value:o.purpose_of_status,onChange:n.onChange,clearable:!!o.purpose_of_status,hint:e.trans("purpose_of_status_will_perform_the_action_to_be_applied_on_the_status_selection")},null,8,["label","value","onChange","clearable","hint"]),o.visibility_for_client?f("",!0):(i(),D(v,{key:0,label:e.trans("status_to_display"),multiple:!1,name:"secondary_status",classname:"col-sm-3",apiEndpoint:n.visibiltyEndpoint,value:o.secondary_status,onChange:n.onChange,clearable:!!o.secondary_status,required:!0,hint:e.trans("this_status_will_be_displayed_to_client_if_visibility_of_client_chosen_no")},null,8,["label","apiEndpoint","value","onChange","clearable","hint"])),o.override_status?f("",!0):(i(),D(v,{key:1,label:e.trans("select_status"),multiple:!0,name:"override_statuses",required:!0,classname:"col-sm-4",apiEndpoint:"/api/dependency/statuses",value:o.override_statuses,onChange:n.onChange},null,8,["label","value","onChange"]))]),o.alerts?(i(),l("div",cE,[s("div",uE,[s("div",hE,[s("div",_E,[s("h3",mE,h(e.lang("notify")),1)]),s("div",pE,[s("table",fE,[(i(!0),l(A,null,G(o.alerts.associates,M=>(i(),l("tr",gE,[s("td",vE,h(e.trans(M.name)),1),(i(!0),l(A,null,G(o.alerts.allowedChannels,C=>(i(),l("td",bE,[s("i",{class:x([C.icon,o.setAlerts[M.associate_id].includes(C.id)?"active-channel":"inactive-channel"]),"aria-hidden":"true",onClick:E=>n.toggleChannel(o.setAlerts[M.associate_id].includes(C.id),M.associate_id,C.id),style:{"pointer-events":"initial",cursor:"pointer"}},null,10,yE)]))),256))]))),256))])])])])])):f("",!0)]),s("div",kE,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...M)=>n.onSubmit&&n.onSubmit(...M))},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])])):f("",!0)])}const Ma=T(Q3,[["render",wE],["__scopeId","data-v-cab0e7f5"]]);const CE={name:"rating-auto-request-modal",description:"Rating Auto Request component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function}},data:()=>({containerStyle:{width:"700px"},loading:!1,statuses:[]}),beforeMount(){this.getInitialValues()},methods:{onChange(e,t){this[t]=e},getInitialValues(){this.loading=!0,L.get("api/auto-rating-requests").then(e=>{this.loading=!1,this.statuses=e.data.data}).catch(e=>{console.log(e),this.loading=!1,I(e,"rating-modal")})},onSubmit(){this.loading=!0;const e={};this.statuses.length>0&&(e.statuses=this.statuses.map(t=>t.id)),L.patch("api/auto-rating-requests",e).then(t=>{this.loading=!1,this.onClose(),N(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,I(t,"rating-modal")})}},components:{"dynamic-select":Me}},DE={class:"modal-title"},SE={key:0,id:"department-status",class:"row"},$E=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1);function FE(e,t,a,r,o,n){const u=c("alert"),m=c("dynamic-select"),p=c("reuse-loader"),g=c("modal");return a.showModal?(i(),D(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,modalBodyClass:"widget-card-div"},{title:k(()=>[s("h4",DE,h(e.lang("ratings_auto_request")),1)]),alert:k(()=>[d(u,{componentName:"rating-modal"})]),fields:k(()=>[e.loading?(i(),D(p,{key:1})):(i(),l("div",SE,[d(m,{label:e.trans("select_status"),multiple:!0,name:"statuses",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/statuses",value:e.statuses,onChange:n.onChange,required:!1,hint:e.trans("rating_status_tooltip")},null,8,["label","value","onChange","hint"])]))]),controls:k(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=v=>n.onSubmit()),class:"btn btn-primary"},[$E,F(" "+h(e.lang("update")),1)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const ME=T(CE,[["render",FE]]);const TE={name:"RatingIndex",components:{"rating-modal":ME},data(){return{apiUrl:"ratings-list",loading:!1,columns:["name","rating_scale","is_default","action"],showModal:!1,options:{headings:{name:this.trans("name"),rating_scale:this.trans("rating_scale"),is_default:this.trans("status"),action:this.trans("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},pagination:{chunk:5,nav:"fixed",edge:!0},sortable:["name","rating_scale"],filterable:["name"],columnsClasses:{name:"rating__name",rating_scale:"rating__scale",is_default:"ratind__active",action:"rating__action"}}}},beforeMount(){let e={templates:{action:(t,a)=>this.h(Se,{data:a}),is_default:function(t,a){let r=this.h("span",{class:a.is_default?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.is_default?this.trans("active"):this.trans("inactive"));return this.h("a",{},[r])}},requestAdapter(t){return{sort_field:t.orderBy?t.orderBy:"id",sort_order:t.ascending?"desc":"asc",search_query:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.map(a=>(a.delete_url=this.basePath()+"/delete-rating/"+a.id,a.edit_url="/rating/"+a.id+"/edit",a)),count:t.total}}};this.options={...this.options,...e}},methods:{onClickEvent(){this.showModal=!0},onClose(){this.showModal=!1}}},EE={class:"col-sm-12"},LE={class:"card-tools"},IE={title:"Edit",class:"btn btn-default table_btn btn-sm",id:"edit_btn"},AE=s("i",{class:"fa fa-eye"},null,-1),qE=s("i",{class:"glyphicon glyphicon-plus"},null,-1),PE={class:"row",id:"rating-index"};function VE(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=c("rating-modal"),b=P("tooltip");return i(),l("div",EE,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.lang("list_of_current_ratings")},{headerMenu:k(()=>[s("div",LE,[s("a",{id:"edit-button",onClick:t[0]||(t[0]=(...y)=>n.onClickEvent&&n.onClickEvent(...y)),href:"javascript:;"},[s("span",IE,[AE,F(" "+h(e.lang("manage_auto_request_ratings")),1)])]),S((i(),D(m,{class:"btn btn-tool",to:"/rating/create"},{default:k(()=>[qE]),_:1})),[[b,e.lang("add")]])])]),default:k(()=>[s("div",PE,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"rating-index",class:"col-sm-12"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(v,{key:0,onClose:n.onClose,showModal:o.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])}const OE=T(TE,[["render",VE]]);function NE(e){const{name:t,rating_scale:a,thank_you_message:r,auto_reminder:o,reminder_time_interval:n,total_number_of_reminders:u}=e;var m={name:[t,"isRequired"],rating_scale:[a,"isRequired"],thank_you_message:[r,"isRequired"]};e.auto_reminder&&(m.reminder_time_interval=[e.reminder_time_interval,"isRequired",{"minValue(1)":"The value should be greater than 1."},{"maxValue(15)":"The value should be lesser than 15."}],m.total_number_of_reminders=[e.total_number_of_reminders,"isRequired",{"minValue(1)":"The value should be greater than 1."},{"maxValue(4)":"The value should be lesser than 4."}]);const p=new he(O),{errors:g,isValid:v}=p.validate(m);return de.dispatch("setValidationError",g),v}const xE={components:{"radio-button":Le,TextField:oe,StaticSelect:xe,ToolTip:Ae,FormFieldTemplate:St},props:{rating:{type:Object,default:()=>{}},edit:{type:Boolean,default:!1}},data(){return{name:"",rating_scale:"",rating_icon:"star",ratingScaleOptions:[{id:2,name:"Two"},{id:3,name:"Three"},{id:5,name:"Five"},{id:7,name:"Seven"}],thank_you_message:"",is_default:1,loading:!1,id:null,show_additional_comment_box:0,has_additional_question:0,questions:[],auto_reminder:0,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],reminder_time_interval:"",total_number_of_reminders:""}},beforeMount(){this.getDataForEdit()},computed:{cardTitle(){let e=this.id?"rating_update":"create_new_rating";return this.lang(e)},deleteQuestionBtnDisabled(){return this.id}},methods:{async getDataForEdit(){const e=De(window.location.pathname);if(window.location.pathname.indexOf("edit")>=0){this.loading=!0;try{const t=await L.get(`api/get-rating/${e}`);this.updateStatesWithData(t.data),this.loading=!1}catch(t){console.log("Trying to get rating for edit",t)}}else return},onChange(e,t){this[t]=e},addQuestion(){this.questions.push({name:""})},addQuestionIfEmpty(){this.questions.length||this.addQuestion()},deleteQuestion(e){this.questions.length!==1&&this.questions.splice(e,1)},isValid(){return!!NE(this.$data)},async submit(){if(!this.isValid())return null;let e,t;this.id?(e=`update-rating/${this.id}`,t="PATCH"):(e="store-rating",t="POST"),this.loading=!0;let a={name:this.name,rating_scale:this.rating_scale,thank_you_message:this.thank_you_message,is_default:this.is_default,show_additional_comment_box:!!this.show_additional_comment_box,has_additional_question:!!this.has_additional_question,questions:this.questions,rating_icon:this.rating_icon||"star",auto_reminder:this.auto_reminder,reminder_time_interval:this.auto_reminder&&this.reminder_time_interval||"",total_number_of_reminders:this.auto_reminder&&this.total_number_of_reminders||""};try{let r=await L.request({method:t,url:e,data:a});this.$store.dispatch("unsetValidationError"),N(r,"rating-create-edit"),this.id||setTimeout(()=>{this.$router.push({name:"Rating Index"})},3e3)}catch(r){I(r,"rating-create-edit")}finally{this.loading=!1}},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})}}},ia=e=>(ee("data-v-3126f458"),e=e(),te(),e),UE={class:"col-sm-12"},RE={class:"row"},jE={class:"row"},BE={key:0,class:"row"},HE={class:"row"},zE={class:"form-check ml-2 mt-1 col-sm-3"},WE={class:"form-check-label",for:"default_rating_checkbox"},GE={class:"form-check ml-2 mt-1 col-sm-3"},YE=["disabled"],KE={class:"form-check-label",for:"additional_comment_checkbox"},JE={class:"form-check ml-2 mt-1 col-sm-3"},QE=["disabled"],XE={class:"form-check-label",for:"additional_question_checkbox"},ZE={class:"col-sm-auto"},eL=["onClick"],tL={key:1,id:"rating-question-trash-d",class:"fas fa-trash faveo-trash actionButtons disabled"},aL={class:"col-sm-6"},sL=["placeholder","onUpdate:modelValue"],oL={class:"row"},nL={class:"col-sm-12"},iL={style:{"margin-top":"1rem"}},lL=ia(()=>s("i",{"aria-hidden":"true",class:"fas fa-plus"},null,-1)),rL={key:1,type:"button",class:"btn btn-light btn-block disabled"},dL=ia(()=>s("i",{"aria-hidden":"true",class:"fas fa-plus"},null,-1)),cL={class:"card-footer"},uL=ia(()=>s("i",{class:"fas fa-save","aria-hidden":"true"},null,-1));function hL(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("text-field"),g=c("static-select"),v=c("radio-button"),b=c("tool-tip"),y=c("form-field-template"),w=c("faveo-box"),M=P("focus-first-input");return i(),l("div",UE,[d(u,{componentName:"rating-create-edit"}),o.loading?(i(),D(m,{key:0})):f("",!0),d(w,{title:n.cardTitle},{actions:k(()=>[s("div",cL,[s("button",{type:"button",id:"submitter",onClick:t[5]||(t[5]=(...C)=>n.submit&&n.submit(...C)),class:"btn btn-primary"},[uL,F(" "+h(e.lang("submit")),1)])])]),default:k(()=>[S((i(),l("div",RE,[d(p,{name:"name",value:o.name,"on-change":n.onChange,placehold:e.lang("enter_a_value"),label:e.lang("rating_label"),type:"text",required:!0,classname:"col-sm-6"},null,8,["value","on-change","placehold","label"]),d(g,{name:"rating_scale",value:o.rating_scale,"on-change":n.onChange,hint:e.lang("rating-msg1"),label:e.lang("rating_scale"),elements:o.ratingScaleOptions,required:!0,classname:"col-sm-6",disabled:!!o.id},null,8,["value","on-change","hint","label","elements","disabled"])])),[[M]]),s("div",jE,[d(p,{name:"thank_you_message",value:o.thank_you_message,"on-change":n.onChange,placehold:e.lang("enter_a_value"),label:e.lang("rating_thank_you_message"),required:!0,classname:"col-sm-6",hint:e.lang("rating_thank_you_message_hint")},null,8,["value","on-change","placehold","label","hint"]),d(v,{options:o.radioOptions,label:e.trans("send_auto_reminders"),name:"auto_reminder",value:o.auto_reminder,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),o.auto_reminder?(i(),l("div",BE,[d(p,{label:e.trans("remider_time_interval"),hint:e.lang("time_interval"),type:"number",name:"reminder_time_interval",value:o.reminder_time_interval,classname:"col-sm-6",onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","hint","value","onChange","placehold"]),d(p,{label:e.trans("number_of_reminders"),hint:e.lang("no_of_reminders"),type:"number",name:"total_number_of_reminders",value:o.total_number_of_reminders,classname:"col-sm-6",onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","hint","value","onChange","placehold"])])):f("",!0),s("div",HE,[s("div",zE,[S(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[0]||(t[0]=C=>o.is_default=C),class:"form-check-input",id:"default_rating_checkbox"},null,512),[[$e,o.is_default]]),s("label",WE,h(e.lang("rating_make_default")),1)]),s("div",GE,[S(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[1]||(t[1]=C=>o.show_additional_comment_box=C),class:"form-check-input",id:"additional_comment_checkbox",disabled:o.id},null,8,YE),[[$e,o.show_additional_comment_box]]),s("label",KE,[F(h(e.lang("rating_show_additional_comment_box_label"))+" ",1),d(b,{message:e.lang("rating_show_additional_comment_box_label_hint"),size:"small"},null,8,["message"])])]),s("div",JE,[S(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[2]||(t[2]=C=>o.has_additional_question=C),class:"form-check-input",id:"additional_question_checkbox",onClick:t[3]||(t[3]=(...C)=>n.addQuestionIfEmpty&&n.addQuestionIfEmpty(...C)),disabled:o.id},null,8,QE),[[$e,o.has_additional_question]]),s("label",XE,[F(h(e.lang("rating_show_additional_rating_box_label"))+" ",1),d(b,{message:e.lang("rating_show_additional_rating_box_label_hint"),size:"small"},null,8,["message"])])])]),o.has_additional_question?(i(),D(w,{key:1,title:e.trans("rating_additional_questions"),class:"mt-4"},{default:k(()=>[(i(!0),l(A,null,G(o.questions,(C,E)=>(i(),l("div",{class:"row mt-1",key:E},[s("span",ZE,[n.deleteQuestionBtnDisabled?(i(),l("i",tL)):(i(),l("i",{key:0,id:"rating-question-trash",class:"fas fa-trash faveo-trash actionButtons",onClick:R=>n.deleteQuestion(E)},null,8,eL))]),s("div",aL,[d(y,{name:`additional_rating_questions.${E}.question`,label:""},{default:k(()=>[S(s("input",{placeholder:e.lang("rating_additional_question_placeholder"),type:"text",class:"form-control","onUpdate:modelValue":R=>C.name=R},null,8,sL),[[Fe,C.name]])]),_:2},1032,["name"])])]))),128)),s("div",oL,[s("div",nL,[s("div",iL,[n.deleteQuestionBtnDisabled?(i(),l("button",rL,[s("span",null,[dL,F(" "+h(e.trans("rating_add_question")),1)])])):(i(),l("button",{key:0,type:"button",class:"btn btn-light btn-block",onClick:t[4]||(t[4]=(...C)=>n.addQuestion&&n.addQuestion(...C))},[s("span",null,[lL,F(" "+h(e.trans("rating_add_question")),1)])]))])])])]),_:1},8,["title"])):f("",!0)]),_:1},8,["title"])])}const Ta=T(xE,[["render",hL],["__scopeId","data-v-3126f458"]]),_L={name:"labels-index",data(){return{columns:["title","order","visible_to","status","action"],apiUrl:"/api/label-list",action:"all",actions:["all","active","inactive"],options:{}}},beforeMount(){const e=this;this.options={headings:{title:this.trans("title"),order:this.trans("order"),visible_to:this.trans("visible_to"),status:this.trans("status"),action:this.trans("actions")},texts:{filter:"",limit:""},templates:{action:(t,a)=>e.h(Se,{data:a}),visible_to(t,a){if(a.visible_to){let r=[];return a.visible_to.split(",").forEach(o=>{r.push(O(o))}),r.toString()}else return"--"},title:function(t,a){let r=e.h("span",{style:{color:"#FFF",backgroundColor:a.color,fontSize:"12px"},class:"badge"},a.title);return e.h("a",{href:e.basePath()+"/panel/tickets?show%5B%5D=inbox&departments%5B%5D=All&filter-by-url=1&category=all&label-ids[]="+a.id},[r])},status:function(t,a){let r=e.h("span",{style:"cursor:auto",class:a.status?"btn btn-success btn-xs":"btn btn-danger btn-xs"},a.status?"Active":"Inactive");return e.h("a",{},[r])}},sortable:["title","status","order"],filterable:["title","status","order"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"order","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/label/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/label-delete/"+a.id,a.is_linked=!0,a.dependency="label",a)),count:t.data.total}}}},methods:{updateTable(e){switch(e){case"all":this.apiUrl="/api/label-list";break;case"active":this.apiUrl="/api/label-list?status=1";break;case"inactive":this.apiUrl="/api/label-list?status=0";break}}}},mL={id:"labels-list",class:"col-sm-12"},pL={class:"card-tools"},fL=s("i",{class:"glyphicon glyphicon-plus"},null,-1),gL={class:"btn-group"},vL=s("button",{type:"button",class:"btn btn-tool dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"glyphicon glyphicon-filter"})],-1),bL={class:"dropdown-menu dropdown-menu-right",role:"menu","x-placement":"bottom-end"},yL=["onClick"];function kL(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",mL,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_labels")},{customActions:k(()=>[s("div",pL,[S((i(),D(m,{class:"btn btn-tool",to:"/label/create"},{default:k(()=>[fL]),_:1})),[[v,e.trans("create_label")]]),s("div",gL,[vL,s("div",bL,[(i(!0),l(A,null,G(o.actions,b=>(i(),l("a",{href:"javascript:;",class:"dropdown-item",onClick:y=>n.updateTable(b)},h(e.trans(b)),9,yL))),256))])])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"labels-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const wL=T(_L,[["render",kL]]);function CL(e){const{title:t,order:a,color:r,visible_to:o}=e;let n={title:[t,"isRequired"],visible_to:[o,"isRequired"],order:[a,"isRequired",{"minValue(1)":"Invalid input."}]};const u=new he(O),{errors:m,isValid:p}=u.validate(n);return de.dispatch("setValidationError",m),{errors:m,isValid:p}}const DL={name:"label-create-edit",description:"Label create edit page",data(){return{page_title:"create_label",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,label_id:"",title:"",order:"",color:"",colorErr:"",status:1,showErr:!1,visibility_options:[{id:"agents",name:this.trans("agents")},{id:"team_lead",name:this.trans("team_lead")},{id:"dept_mngr",name:this.trans("department_manager")}],visible_to:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_label",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/label/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.label;this.label_id=a.id,this.updateStatesWithData(a),this.status=parseInt(this.status)}).catch(t=>{this.loading=!1,I(t,"label-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(o=>{a.hasOwnProperty(o)&&(t[o]=e[o])});let r=this.visible_to.split(",");this.visible_to=this.visibility_options.filter(o=>r.includes(o.id)).map(o=>o)},isValid(){const{errors:e,isValid:t}=CL(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.color=this.color=="#"?"":this.color,this.showErr=!this.color,this.isValid()&&this.color){this.loading=!0;let e={};e.title=this.title,e.order=parseInt(this.order),e.color=this.color,e.status=this.status?1:0,e.visible_to=this.visible_to.map(a=>a.id);let t="/api/label";this.page_title=="edit_label"&&(t="/api/label-update/"+this.label_id,e._method="PATCH"),L.post(t,e).then(a=>{this.$store.dispatch("unsetValidationError"),this.colorErr="",this.loading=!1,N(a,"label-create-edit"),this.label_id?this.getInitialValues(this.label_id):setTimeout(()=>{this.$router.push({name:"Labels Index"})},3e3)}).catch(a=>{a.response.data.message&&a.response.data.message.color&&(this.colorErr=a.response.data.message.color),this.loading=!1,I(a,"label-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"number-field":Je,"color-picker":Ft,"status-switch":Oe,"dynamic-select":Me}},SL={class:"container col-sm-12"},$L={key:0,class:"row"},FL={class:"row"},ML={class:"row"},TL=s("span",{class:"text-red"}," *",-1),EL={key:0,class:"error-block is-danger"},LL={key:1,class:"is-danger"},IL={key:0,class:"col-sm-4"},AL={for:"status"},qL={class:"card-footer"};function PL(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("number-field"),v=c("dynamic-select"),b=c("color-picker"),y=c("status-switch"),w=c("faveo-box"),M=P("focus-first-input");return i(),l("div",SL,[!o.hasDataPopulated||o.loading?(i(),l("div",$L,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"label-create-edit"}),o.hasDataPopulated?(i(),D(w,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",qL,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=C=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",FL,[d(p,{label:e.trans("title"),value:o.title,type:"text",name:"title",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),d(g,{label:e.trans("order"),value:o.order,name:"order",onChange:n.onChange,classname:"col-sm-6",keyupListener:n.triggerEvent,type:"number",required:!0,placeholder:"n"},null,8,["label","value","onChange","keyupListener"])])),[[M]]),s("div",ML,[d(v,{label:e.trans("visibility"),multiple:!0,elements:o.visibility_options,name:"visible_to",value:o.visible_to,classname:"col-sm-4",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"]),s("div",{class:x(["col-sm-4 form-group",{"has-error":o.showErr||o.colorErr}])},[s("label",null,[F(h(e.trans("icon_color"))+" ",1),TL]),d(b,{color:o.color,name:"color",showError:o.showErr,colorError:o.colorErr,onColor:n.onChange},null,8,["color","showError","colorError","onColor"]),o.showErr?(i(),l("div",EL,h(e.trans("this_field_is_required")),1)):f("",!0),!o.showErr&&o.colorErr?(i(),l("span",LL,h(o.colorErr),1)):f("",!0)],2),o.page_title=="edit_label"?(i(),l("div",IL,[s("label",AL,h(e.trans("status")),1),d(y,{name:"status",value:o.status,onChange:n.onChange,bold:!0},null,8,["value","onChange"])])):f("",!0)])]),_:1},8,["title"])):f("",!0)])}const Ea=T(DL,[["render",PL]]);const VL={name:"source-index",data(){return{columns:["name","ticket_count","visible_to","description","action"],apiUrl:"/api/tags-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),ticket_count:this.trans("ticket_count"),visible_to:this.trans("visible_to"),description:this.trans("description"),action:this.trans("actions")},columnsClasses:{name:"tag-name",ticket_count:"tag-count",visible_to:"tag-visible",description:"tag-desc",action:"tag-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{description(t,a){return a.description?a.description:"--"},visible_to(t,a){if(a.visible_to){let r=[];return a.visible_to.split(",").forEach(o=>{r.push(O(o))}),r.toString()}else return"--"},ticket_count:function(t,a){return e.h("a",{href:e.basePath()+"/panel/tickets?show%5B%5D=inbox&departments%5B%5D=All&filter-by-url=1&category=all&tag-ids[]="+a.id},a.ticket_count)},action:(t,a)=>e.h(Se,{data:a})},sortable:["name","description"],filterable:["name","description"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.tags.map(a=>(a.edit_url="/tag/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/tag-delete/"+a.id,a)),count:t.data.total}}}}},OL={id:"tags-list",class:"col-sm-12"},NL={class:"card-tools"},xL=s("i",{class:"glyphicon glyphicon-plus"},null,-1);function UL(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",OL,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_tags")},{customActions:k(()=>[s("div",NL,[S((i(),D(m,{class:"btn btn-tool",to:"/tag/create"},{default:k(()=>[xL]),_:1})),[[v,e.trans("create_tag")]])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"tags-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const RL=T(VL,[["render",UL]]);function jL(e){const{name:t,description:a,visible_to:r}=e;let o={name:[t,"isRequired",{"max(250)":O("tag_name_should_be_less_than_250_characters")}],visible_to:[r,"isRequired"],description:[a,{"max(50)":O("descripton_should_be_less_than_50_characters")}]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const BL={name:"tag-create-edit",description:"Tag Create edit page",data(){return{page_title:"create_tag",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,tag_id:"",name:"",description:"",visibility_options:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"Logged in Users"},{id:"agents",name:"Agents"}],visible_to:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_tag",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/tag/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.tag;this.tag_id=a.id,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,I(t,"tag-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(o=>{a.hasOwnProperty(o)&&(t[o]=e[o])});let r=this.visible_to.split(",");this.visible_to=this.visibility_options.filter(o=>r.includes(o.id)).map(o=>o)},isValid(){const{errors:e,isValid:t}=jL(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.description=this.description,e.visible_to=this.visible_to.map(a=>a.id);let t="/api/tag";this.page_title=="edit_tag"&&(t="/api/tag/update/"+this.tag_id,e._method="PATCH"),L.post(t,e).then(a=>{this.loading=!1,N(a,"tag-create-edit"),this.tag_id?this.getInitialValues(this.tag_id):setTimeout(()=>{this.$router.push({name:"Tags Index"})},3e3)}).catch(a=>{this.loading=!1,I(a,"tag-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"dynamic-select":Me}},HL={class:"col-sm-12"},zL={key:0,class:"row"},WL={class:"row"},GL={class:"row"},YL={class:"card-footer"};function KL(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("dynamic-select"),v=c("faveo-box"),b=P("focus-first-input");return i(),l("div",HL,[!o.hasDataPopulated||o.loading?(i(),l("div",zL,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"tag-create-edit"}),o.hasDataPopulated?(i(),D(v,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",YL,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=y=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",WL,[d(p,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),d(g,{label:e.trans("visibility"),multiple:!0,elements:o.visibility_options,name:"visible_to",value:o.visible_to,classname:"col-sm-6",onChange:n.onChange,required:!0},null,8,["label","elements","value","onChange"])])),[[b]]),s("div",GL,[d(p,{label:e.trans("description"),value:o.description,type:"textarea",name:"description",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const La=T(BL,[["render",KL]]);const JL={name:"source-index",data(){return{columns:["name","value","description","action"],apiUrl:"/api/source-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),description:this.trans("description"),value:this.trans("display_name"),action:this.trans("actions")},columnsClasses:{name:"source-name",value:"source-display",description:"source-desc",action:"source-action"},texts:{filter:"",limit:""},templates:{description(t,a){return a.description?a.description:"--"},action:(t,a)=>e.h(Se,{data:a})},sortable:["name","value","description"],filterable:["name","value","description"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.ticketSources.map(a=>(a.edit_url="/source/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/source-delete/"+a.id,a.replace=!0,a.dependency="sources",a.title="select_different_ticket_source_to_delete",a)),count:t.data.total}}}}},QL={id:"source-list",class:"col-sm-12"},XL={class:"card-tools"},ZL=s("i",{class:"glyphicon glyphicon-plus"},null,-1);function e4(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=c("faveo-box"),v=P("tooltip");return i(),l("div",QL,[d(u,{componentName:"dataTableModal"}),d(g,{title:e.trans("list_of_source")},{customActions:k(()=>[s("div",XL,[S((i(),D(m,{class:"btn btn-tool",to:"/source/create"},{default:k(()=>[ZL]),_:1})),[[v,e.trans("create_source")]])])]),default:k(()=>[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"source-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const t4=T(JL,[["render",e4]]);function a4(e){const{name:t,display_as:a,description:r,icon:o}=e;let n={name:[t,"isRequired",{"max(20)":O("name_should_be_less_than_20_characters")}],icon:[o,"isRequired"],display_as:[a,"isRequired",{"max(20)":O("display_as_should_be_less_than_20_characters")}],description:[r,{"max(100)":O("descripton_should_be_less_than_100_characters")}]};const u=new he(O),{errors:m,isValid:p}=u.validate(n);return de.dispatch("setValidationError",m),{errors:m,isValid:p}}const s4={name:"source-create-edit",description:"Source Create edit page",data(){return{page_title:"create_source",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,source_id:"",name:"",display_as:"",description:"",icon:"",iconList:[],isDisabled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getIconList()},methods:{getIconList(){L.get("/json/icon-list.json").then(e=>{this.iconList=e.data.data}).catch(e=>{this.iconList=[]})},getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.page_title="edit_source",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/source/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.source;this.source_id=a.id,this.display_as=a.value,this.icon=a.css_class?{icon_class:a.css_class}:"",this.isDisabled=!!a.is_default,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,I(t,"source-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=a4(this.$data);return t},onChange(e,t){this[t]=e||""},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.display_as=this.display_as,e.description=this.description,e.icon=this.icon.icon_class;let t="/api/source";this.page_title=="edit_source"&&(t="/api/source/update/"+this.source_id,e._method="PATCH"),L.post(t,e).then(a=>{this.loading=!1,N(a,"source-create-edit"),this.source_id?this.getInitialValues(this.source_id):setTimeout(()=>{this.$router.push({name:"Source Index"})},3e3)}).catch(a=>{this.loading=!1,I(a,"source-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe,"dynamic-select":Me}},o4={class:"col-sm-12"},n4={key:0,class:"row"},i4={class:"row"},l4={class:"row"},r4={class:"card-footer"};function d4(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("dynamic-select"),v=c("faveo-box"),b=P("focus-first-input");return i(),l("div",o4,[!o.hasDataPopulated||o.loading?(i(),l("div",n4,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"source-create-edit"}),o.hasDataPopulated?(i(),D(v,{key:1,title:e.trans(o.page_title)},{actions:k(()=>[s("div",r4,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=y=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])]),default:k(()=>[S((i(),l("div",i4,[d(p,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",keyupListener:n.triggerEvent,required:!0,disabled:o.isDisabled},null,8,["label","value","onChange","placehold","keyupListener","disabled"]),d(p,{label:e.trans("display_as"),value:o.display_as,type:"text",name:"display_as",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-4",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),d(g,{name:"icon",label:e.trans("icon_class"),value:o.icon,onChange:n.onChange,classname:"col-sm-4",elements:o.iconList,multiple:!1,"option-label":"icon_class",required:!0,clearable:!!o.icon},null,8,["label","value","onChange","elements","clearable"])])),[[b]]),s("div",l4,[d(p,{label:e.trans("description"),value:o.description,type:"textarea",name:"description",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const Ia=T(s4,[["render",d4]]);const c4={name:"ticket-templates",description:"Ticket Templates List",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},data(){return{columns:["name","created_at","action"],options:{},apiUrl:"/ticket-template-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),created_at:this.trans("created_date"),action:this.trans("actions")},columnsClasses:{name:"tic-tem-name",created_at:"tic-tem-created",action:"tic-tem-action"},texts:{filter:"",limit:""},templates:{created_at:function(t,a){return a.created_at&&a.created_at!="0000-00-00 00:00:00"?e.formattedTime(a.created_at):"--"},action:(t,a)=>e.h(Se,{data:a})},sortable:["name","created_at"],filterable:["name","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.edit_url="/ticket-template/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/ticket/ticket-template/"+a.id+"/delete/",a)),count:t.message.total}}}}},u4={id:"list_of_ticket_templates",class:"col-sm-12"},h4={class:"card card-light"},_4={class:"card-header"},m4={class:"card-title"},p4={class:"card-tools"},f4=s("i",{class:"glyphicon glyphicon-plus"},null,-1),g4={class:"card-body",id:"my_ticket_templates"};function v4(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",u4,[d(u,{componentName:"dataTableModal"}),s("div",h4,[s("div",_4,[s("h3",m4,h(e.trans("list_of_ticket_templates")),1),s("div",p4,[S((i(),D(m,{to:"/ticket-template/create",class:"btn-tool"},{default:k(()=>[f4]),_:1})),[[g,e.trans("create_ticket_template")]])])]),s("div",g4,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"list_of_ticket_templates"},null,8,["url","dataColumns","option"])])])])}const b4=T(c4,[["render",v4]]);const y4={name:"ticket-pdf-templates",description:"Ticket PDF Templates List",setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime),formattedDate:ae(()=>e.getters.formattedDate)}},data(){return{columns:["name","created_at","action"],options:{},apiUrl:"/api/get/pdfTemplates"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),created_at:this.trans("created_date"),action:this.trans("actions")},columnsClasses:{name:"tic-pdf-tem-name",created_at:"tic-pdf-tem-created",action:"tic-pdf-tem-action"},texts:{filter:"",limit:""},templates:{created_at:function(t,a){return a.created_at&&a.created_at!="0000-00-00 00:00:00"?e.formattedTime(a.created_at):"--"},action:(t,a)=>e.h(Se,{data:a})},sortable:["name","created_at"],filterable:["name","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/ticket-pdf-template/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete/ticket-pdf-template/"+a.id,a)),count:t.data.total}}}}},k4={id:"list_of_ticket_pdf_templates",class:"col-sm-12"},w4={class:"card card-light"},C4={class:"card-header"},D4={class:"card-title"},S4={class:"card-tools"},$4=s("i",{class:"glyphicon glyphicon-plus"},null,-1),F4={class:"card-body",id:"my_ticket_pdf_templates"};function M4(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",k4,[d(u,{componentName:"dataTableModal"}),s("div",w4,[s("div",C4,[s("h3",D4,h(e.trans("list_of_ticket_pdf_templates")),1),s("div",S4,[S((i(),D(m,{to:"/ticket-pdf-template/create",class:"btn-tool"},{default:k(()=>[$4]),_:1})),[[g,e.trans("create_ticket_pdf_template")]])])]),s("div",F4,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"list_of_ticket_pdf_templates"},null,8,["url","dataColumns","option"])])])])}const T4=T(y4,[["render",M4]]);function E4(e){const{template:t,name:a,maximum_logs:r}=e;let o={template:[t,"isRequired"],name:[a,"isRequired"],maximum_logs:[r,"isRequired",{"minValue(10)":O("max_log_validation")}]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const L4={data(){return{title:"create_ticket_pdf_template",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,ticket_pdf_template_id:"",shortCodesLoader:!1,shortcodes:[],name:"",template:"",maximum_logs:50}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getShortCodes()},methods:{getShortCodes(){this.shortCodesLoader=!0,L.get("/api/getTicketSetting/pdfShortCodes").then(e=>{this.shortCodesLoader=!1,this.shortcodes=e.data.data}).catch(e=>{this.shortCodesLoader=!1,I(e,"ticket-pdf-template")})},getValues(e){const t=De(e);e.indexOf("edit")>=0?this.from?(this.loading=!1,this.hasDataPopulated=!0):(this.title="edit_ticket_pdf_template",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,L.get("/api/get/individualPdfTemplates/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.name=t.data.data.name,this.maximum_logs=t.data.data.maximum_logs,this.template=t.data.data.template,this.ticket_pdf_template_id=t.data.data.id}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0,I(t,"ticket-pdf-template")})},isValid(){const{errors:e,isValid:t}=E4(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.ticket_pdf_template_id&&(e.id=this.ticket_pdf_template_id),e.name=this.name,e.maximum_logs=this.maximum_logs,e.template=this.template,L.post("/api/store/ticket-pdf-template",e).then(t=>{this.loading=!1,N(t,"ticket-pdf-template"),this.ticket_pdf_template_id?this.getInitialValues(this.ticket_pdf_template_id):setTimeout(()=>{this.$router.push({name:"Ticket PDF Templates Index"})},3e3)}).catch(t=>{this.loading=!1,I(t,"ticket-pdf-template")})}}},components:{"number-field":Je,"text-field":oe}},I4={class:"col-sm-12"},A4={key:0,class:"row"},q4={key:1,class:"card card-light"},P4={class:"card-header"},V4={class:"card-title"},O4={class:"card-body"},N4={class:"row"},x4={class:"col-md-12"},U4={class:"card card-light"},R4={class:"card-header"},j4={class:"card-title"},B4={class:"card-body col-md-12"},H4={key:0,class:"row"},z4={key:1},W4={class:"alert alert-info alert-dismissable"},G4=s("i",{class:"fas fa-info-circle"},null,-1),Y4=s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1),K4={key:0,class:"list-inline"},J4={class:"list-inline-item",style:{width:"23%"}},Q4={"data-placement":"right"},X4={class:"row"},Z4={class:"row"},eI={class:"form-group"},tI={class:"card-footer"};function aI(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("reuse-loader"),g=c("text-field"),v=c("number-field"),b=c("tiny-editor-with-validation"),y=P("tooltip");return i(),l("div",I4,[!o.hasDataPopulated||o.loading?(i(),l("div",A4,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"ticket-pdf-template"}),o.hasDataPopulated?(i(),l("div",q4,[s("div",P4,[s("h3",V4,h(e.trans(o.title)),1)]),s("div",O4,[s("div",N4,[s("div",x4,[s("div",U4,[s("div",R4,[s("h3",j4,h(e.trans("list-of-available-shot-codes")),1)]),s("div",B4,[o.shortCodesLoader?(i(),l("div",H4,[d(p,{"animation-duration":4e3,size:60})])):(i(),l("div",z4,[s("div",W4,[G4,F("  "),s("span",null,h(e.trans("template-short-code-tips")),1),Y4]),o.shortcodes.length?(i(),l("ul",K4,[(i(!0),l(A,null,G(o.shortcodes,w=>(i(),l("li",J4,[S((i(),l("span",Q4,[F(h(w.shortcode),1)])),[[y,{content:e.trans(w.desc_lang_key),html:!0},void 0,{right:!0}]])]))),256))])):f("",!0)]))])])])]),s("div",X4,[d(g,{autofocus:!0,label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(v,{hint:e.trans("maximum_logs_tooltip_for_pdf"),label:e.trans("maximum_logs"),value:o.maximum_logs,type:"text",name:"maximum_logs",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["hint","label","value","onChange","placehold"])]),s("div",Z4,[s("div",eI,[d(b,{value:o.template,type:"text",onChange:n.onChange,name:"template",label:e.lang("template"),required:!0,classname:"col-sm-12 width55",lang:"en",convertURLs:!1},null,8,["value","onChange","label"])])])]),s("div",tI,[s("button",{class:"btn btn-primary",id:"submit_btn",onClick:t[0]||(t[0]=w=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])])):f("",!0)])}const Aa=T(L4,[["render",aI]]),sI={data(){return{columns:["provider","status","action"],options:{},apiUrl:"/api/admin/social/media-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},headings:{provider:this.trans("provider"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{provider:"provider",status:"status"},templates:{provider(t,a){return a.provider==="Linkedin-openid"?"LinkedIn":a.provider?a.provider:"--"},status(t,a){return a.value==1?e.h("p",{style:{color:"green"}},this.lang("active")):e.h("p",{style:{color:"red"}},this.lang("inactive"))},action:(t,a)=>e.h(Se,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.current_page,limit:t.per_page}},responseAdapter({data:t}){return{data:t.data.map(a=>(a.provider==="External Login"?a.settings_url="/social/external-login":a.settings_url="/"+a.url_setting,a)),count:t.data.length}}}}},oI={class:"col-sm-12"},nI={class:"card card-light assets-type-table"},iI={class:"card-header"},lI={id:"cmdb-list",class:"card-title"},rI={class:"card-body",id:"cmdb-table"};function dI(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",oI,[d(u,{componentName:"dataTableModal"}),s("div",nI,[s("div",iI,[s("h3",lI,h(e.lang("social-login-page-title")),1)]),s("div",rI,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"cmdb-relationship-list"},null,8,["url","dataColumns","option"])])])])}const cI=T(sI,[["render",dI]]);function uI(e){const{client_id:t,client_secret:a,redirect:r,status:o}=e;var n={client_id:[t,"isRequired"],client_secret:[a,"isRequired"],redirect:[r,"isRequired"],status:[o,"isRequired"]};const u=new he(O),{errors:m,isValid:p}=u.validate(n);return de.dispatch("setValidationError",m),{errors:m,isValid:p}}const hI={name:"settings",description:"settings component",data(){return{loading:!1,providerName:"facebook",iconClass:"fas fa-save",btnName:"save",client_id:"",client_secret:"",redirect:"",status:1,radioOptions:[{name:"yes",value:1},{name:"no",value:0}]}},computed:{displayedProviderName(){return this.providerName==="linkedin-openid"?"LinkedIn":this.providerName}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){let t=e.split("/");this.providerName=t[t.length-1],this.getInitialValues()},getInitialValues(){L.get("/api/admin/social/media-settings/"+this.providerName).then(e=>{this.status=e.data.data.status,this.client_id=e.data.data.client_id?e.data.data.client_id:"",this.client_secret=e.data.data.client_secret?e.data.data.client_secret:"",this.redirect=e.data.data.redirect}).catch(e=>{console.log(e)})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=uI(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loading=!0;var e=new FormData;e.append("provider_name",this.providerName),e.append("client_id",this.client_id),e.append("client_secret",this.client_secret),e.append("redirect",this.redirect),e.append("status",this.status),e.append("_method","PATCH");const t={headers:{"Content-Type":"multipart/form-data"}};L.post("/api/admin/social/media-update",e,t).then(a=>{this.loading=!1,N(a,"Settings")}).catch(a=>{this.loading=!1,I(a,"Settings")})}}},components:{"text-field":oe,"radio-button":Le}},_I={class:"col-sm-12"},mI={key:0,class:"row"},pI={key:1},fI={class:"card card-light"},gI={class:"card-header"},vI={class:"card-title"},bI={class:"card-body"},yI={class:"row"},kI={class:"row"},wI={class:"card-footer"};function CI(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("text-field"),g=c("radio-button"),v=P("focus-first-input");return i(),l("div",_I,[d(u,{componentName:"Settings"}),o.loading?(i(),l("div",mI,[d(m,{duration:4e3})])):(i(),l("div",pI,[s("div",fI,[s("div",gI,[s("h3",vI,h(e.lang(this.displayedProviderName))+" "+h(e.lang("settings")),1)]),s("div",bI,[S((i(),l("div",yI,[d(p,{id:"client-id",label:e.lang("client-id"),value:o.client_id,type:"text",name:"client_id",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(p,{id:"client-secret",label:e.lang("client-secret"),value:o.client_secret,type:"text",name:"client_secret",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[v]]),s("div",kI,[d(p,{id:"redirect-url",label:e.lang("redirect-url"),value:o.redirect,type:"text",name:"redirect",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{options:o.radioOptions,label:e.trans("activate_login_via")+" "+e.lang(o.providerName),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])]),s("div",wI,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=b=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.lang(o.btnName)),1)])])])]))])}const DI=T(hI,[["render",CI]]),SI={name:"queue-activate-modal",props:{showModal:{type:Boolean,default:!1},queueId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,L.post("/api/queue/"+this.queueId+"/activate").then(e=>{window.emitter.emit("QueueIndexrefreshData"),N(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,I(e,"dataTableModal"),this.onClose()})}}},$I={class:"modal-title"},FI={key:0},MI={key:1,class:"row"},TI=["disabled"],EI=s("i",{class:"fas fa-check"},null,-1);function LI(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:k(()=>[s("h4",$I,h(e.trans("activate")),1)]),fields:k(()=>[o.loading?f("",!0):(i(),l("div",FI,[s("span",null,h(e.trans("are_you_sure")),1)])),o.loading?(i(),l("div",MI,[d(u,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>n.onSubmit&&n.onSubmit(...p)),class:"btn btn-primary",disabled:o.isDisabled},[EI,F(" "+h(e.trans("activate")),1)],8,TI)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const II=T(SI,[["render",LI]]),AI={name:"queue-actions",description:"Queue table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"queue-activate-modal":II}},qI={key:0},PI=["disabled"],VI=s("i",{class:"fas fa-check-circle"},null,-1);function OI(e,t,a,r,o,n){const u=c("queue-activate-modal"),m=P("tooltip");return a.data?(i(),l("div",qI,[S((i(),l("span",null,[s("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=p=>o.showModal=!0),disabled:!!a.data.status},[VI,F(" "+h(e.trans("activate")),1)],8,PI)])),[[m,a.data.status?e.trans("activated"):e.trans("activate")]]),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,queueId:a.data.id},null,8,["onClose","showModal","queueId"])):f("",!0)]),_:1})])):f("",!0)}const NI=T(AI,[["render",OI]]),xI={name:"queue-name",description:"Queue table name component",props:{data:{type:Object,required:!0}}},UI={key:0},RI=["href"],jI=s("i",{class:"fas fa-question-circle"},null,-1),BI=[jI];function HI(e,t,a,r,o,n){const u=c("router-link"),m=P("tooltip");return i(),l("span",null,[a.data.is_configurable?(i(),D(u,{key:1,to:"/queue/"+a.data.id},{default:k(()=>[F(h(a.data.name),1)]),_:1},8,["to"])):(i(),l("span",UI,h(a.data.name),1)),F("   "),a.data.tooltip_message?S((i(),l("a",{key:2,href:a.data.document_link,target:"_blank"},BI,8,RI)),[[m,a.data.tooltip_message]]):f("",!0)])}const zI=T(xI,[["render",HI]]);const WI={name:"queue-index",description:"Queues table component",data(){return{columns:["name","status","action"],options:{},activated:"",cron_path:"",phpPaths:"",php_path:"",labelStyle:{display:"none"},custom_php_path:"",copying:!1}},beforeMount(){this.getPaths();const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{name:"queue-name",status:"queue-status",action:"queue-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(zI,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?this.lang("active"):this.lang("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(NI,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.activated=t.data.queues.find(({status:a})=>a),e.activated.name!="Database"&&e.clearPhpPath(),{data:t.data.queues,count:t.data.total}}}},methods:{getPaths(){L.get("/api/queue/get-path-list").then(e=>{this.phpPaths=e.data.data.paths,this.cron_path=e.data.data.cronPathToShow}).catch(e=>{this.phpPaths=[]})},clearPhpPath(){this.php_path="",this.custom_php_path=""},copyCommand(){this.copying=!0;let e={};e.path=this.custom_php_path?this.custom_php_path:this.php_path,L.post("/verify-php-path",e).then(t=>{Xe("* * * * * "+(this.custom_php_path?this.custom_php_path:this.php_path)+" "+this.cron_path),this.copying=!1,N(t,"dataTableModal")}).catch(t=>{this.copying=!1,I(t,"dataTableModal")})}}},GI={class:"col-sm-12"},YI={class:"card card-light"},KI={class:"card-header"},JI={class:"card-title"},QI={class:"card-body",id:"queue_index"},XI={key:0},ZI={class:"card p-4 bg-light"},eA={class:"row"},tA=s("div",{class:"col-sm-2"},[s("span",{class:"text-xl"},"*  *  *  *  *")],-1),aA={class:"col-sm-4"},sA={disabled:"",value:""},oA=["value"],nA={value:"other"},iA={key:1,class:"input-group"},lA=["placeholder"],rA={class:"input-group-append"},dA=s("i",{class:"fas fa-times"},null,-1),cA=[dA],uA={class:"col-sm-5"},hA={class:"text-md"},_A={class:"col-sm-1"},mA=s("i",{class:"far fa-clipboard fa-2x"},null,-1),pA=[mA],fA={key:1,class:"pointer"},gA=s("i",{class:"fas fa-circle-notch fa-spin fa-2x"},null,-1),vA=[gA];function bA(e,t,a,r,o,n){const u=c("alert"),m=c("data-table"),p=P("tooltip");return i(),l("div",GI,[d(u,{componentName:"dataTableModal"}),s("div",YI,[s("div",KI,[s("h3",JI,h(e.trans("queues")),1)]),s("div",QI,[o.activated&&o.activated.name=="Database"?(i(),l("div",XI,[s("div",ZI,[s("div",eA,[tA,s("div",aA,[o.php_path!="other"?S((i(),l("select",{key:0,class:"form-control","onUpdate:modelValue":t[0]||(t[0]=g=>o.php_path=g)},[s("option",sA,h(e.trans("specify-php-executable")),1),(i(!0),l(A,null,G(o.phpPaths,(g,v)=>(i(),l("option",{value:g},h(g),9,oA))),256)),s("option",nA,h(e.trans("other")),1)],512)),[[_t,o.php_path]]):f("",!0),o.php_path=="other"?(i(),l("div",iA,[S(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=g=>o.custom_php_path=g),placeholder:e.trans("specify-php-executable")},null,8,lA),[[Fe,o.custom_php_path]]),s("div",rA,[s("a",{href:"javascript:;",class:"input-group-text",onClick:t[2]||(t[2]=(...g)=>n.clearPhpPath&&n.clearPhpPath(...g))},cA)])])):f("",!0)]),s("div",uA,[s("span",hA,h(o.cron_path),1)]),s("div",_A,[o.copying?f("",!0):S((i(),l("span",{key:0,onClick:t[3]||(t[3]=g=>n.copyCommand()),class:"pointer"},pA)),[[p,e.trans("verify-and-copy-command")]]),o.copying?(i(),l("span",fA,vA)):f("",!0)])])])])):f("",!0),d(m,{url:"/api/queue-list",dataColumns:o.columns,option:o.options,scroll_to:"queue_index",componentTitle:"QueueIndex"},null,8,["dataColumns","option"])])])])}const yA=T(WI,[["render",bA]]),kA={name:"queue-settings",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,queueId:"",fields:[],driverName:""}},beforeMount(){this.queueId=De(window.location.pathname),this.getData()},methods:{getData(){this.loading=!0,L.get("/api/queue/get-form/"+this.queueId).then(e=>{this.fields=e.data.data.formDetails,this.driverName=e.data.data.driverName,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,this.fields=[],I(e,"queue")})},onSubmit(){const e={};this.fields.forEach(t=>{e[t.key]=t.value}),this.pageLoad=!0,L.post("/api/queue/"+this.queueId,e).then(t=>{this.pageLoad=!1,N(t,"queue"),this.getData(),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.pageLoad=!1,I(t,"queue")})}},components:{"form-field-template":St}},wA={class:"col-sm-12"},CA={class:"card card-light"},DA={class:"card-header"},SA={class:"card-title"},$A={class:"card-body"},FA={key:0,class:"row"},MA={key:1,class:"row"},TA=["placeholder","name","onUpdate:modelValue"],EA={key:0,class:"card-footer"},LA=["disabled"],IA=s("i",{class:"fas fa-save"},null,-1);function AA(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("form-field-template");return i(),l("div",wA,[d(u,{componentName:"queue"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",CA,[s("div",DA,[s("h3",SA,h(e.trans("queue")),1)]),s("div",$A,[!o.hasDataPopulated||o.loading?(i(),l("div",FA,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?(i(),l("div",MA,[(i(!0),l(A,null,G(o.fields,(v,b)=>(i(),D(g,{label:e.trans(v.key),name:v.key,classname:"col-sm-6",required:!0},{default:k(()=>[S(s("input",{class:"form-control",placeholder:e.lang(v.placeholder),name:v.key,type:"text","onUpdate:modelValue":y=>v.value=y},null,8,TA),[[Fe,v.value]])]),_:2},1032,["label","name"]))),256))])):f("",!0)]),o.hasDataPopulated?(i(),l("div",EA,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...v)=>n.onSubmit&&n.onSubmit(...v)),disabled:o.pageLoad},[IA,F(" "+h(e.trans("save")),1)],8,LA)])):f("",!0)])])}const qA=T(kA,[["render",AA]]);const PA={name:"third-party-index",data(){return{base:window.axios.defaults.baseURL,columns:["name","app_id","status","auth","action"],options:{headings:{name:this.trans("name"),app_id:this.trans("app_id"),status:this.trans("status"),auth:this.trans("auth"),action:this.trans("action")},texts:{filter:"",limit:""},templates:{status:(e,t)=>this.h(Gt,{data:t}),action:(e,t)=>this.h(Se,{data:t}),app_id:(e,t)=>t.app_id?t.app_id:"--"},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort:e.orderBy?e.orderBy:"id",order:e.ascending?"desc":"asc",search_query:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>(t.edit_url="/third-party-app/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/api/admin/third-party-apps/"+t.id,t.active=t.active=="1"?"active":"inactive",t)),count:e.data.total}}},apiUrl:"api/admin/third-party-apps",showDrop:!1}},beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3)}},Ms=e=>(ee("data-v-f5d0a900"),e=e(),te(),e),VA={class:"col-sm-12"},OA={class:"card card-light"},NA={class:"card-header"},xA={class:"card-title"},UA={class:"card-tools"},RA=Ms(()=>s("a",{href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},[s("i",{class:"glyphicon glyphicon-plus"})],-1)),jA={class:"dropdown-menu dropdown-menu-right",role:"menu"},BA=Ms(()=>s("hr",{class:"m-0"},null,-1)),HA={class:"card-body"};function zA(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",VA,[d(u,{componentName:"dataTableModal"}),s("div",OA,[s("div",NA,[s("h3",xA,h(e.lang("third_party_apps")),1),s("div",UA,[RA,S(s("div",jA,[S((i(),D(m,{id:"create",class:"dropdown-item",to:"/third-party-app/create?page_type=basic"},{default:k(()=>[F(h(e.lang("basic_auth")),1)]),_:1})),[[g,e.lang("basic_auth_toottip")]]),BA,S((i(),D(m,{id:"create",class:"dropdown-item",to:"/third-party-app/create?page_type=oauth"},{default:k(()=>[F(h(e.lang("oauth_auth")),1)]),_:1})),[[g,e.lang("oauth_auth_tootip")]])],512),[[We,o.showDrop]])])]),s("div",HA,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options},null,8,["url","dataColumns","option"])])])])}const WA=T(PA,[["render",zA],["__scopeId","data-v-f5d0a900"]]);const GA={name:"third-party-app",beforeMount(){this.setMode(),this.getInitialValues(),this.shortcode();let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")},data:()=>({id:null,name:"",app_id:"",app_secret:"",authentication_endpoint:"",token_endpoint:"",identity_endpoint:"",scopes:"",login_label:"",status:1,loading:!0,hasDataPopulated:!1,mode:"create",user_map:[],app_url:"",app_url_bkp:"",copied:!1,template:null,pageType:"",methodOption:[{name:"get",value:"get"},{name:"post",value:"post"}],DataOption:[{name:"payload",value:"payload"},{name:"url_parameter",value:"parameter"}],labelStyle:{display:"none"},dataMethod:"payload",apiMethod:"get",auth:"",userParameters:"",passParameters:"",showTable:!0,showField:!1,showShortcode:!1,payloadData:[{faveo_attribute:"user_name",faveo_attribute_label:"user_name",required:!0,third_party_attribute:""},{faveo_attribute:"password",faveo_attribute_label:"password",required:!0,third_party_attribute:""}],iconClass:"fas fa-save",btnName:"save"}),methods:{copyToClipboard(){Xe(this.app_url),this.copied=!0,this.showCopyIconAfterCopying()},showCopyIconAfterCopying(){setTimeout(()=>{this.copied=!1},5e3)},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create"},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="update";const e=window.location.pathname,t=De(e);L.get(`/api/admin/third-party-apps/${t}`).then(a=>{this.updateStatesWithData(a.data.data.formattedElement),this.app_url_bkp=a.data.data.url+"/",this.auth=a.data.data.formattedElement.auth,this.hasDataPopulated=!0,this.loading=!1}).catch(a=>{I(a),this.hasDataPopulated=!0,this.loading=!1})}else L.get("/api/admin/faveo-attributes").then(e=>{this.user_map=e.data.data.formattedElement,this.app_url=e.data.data.url,this.app_url_bkp=e.data.data.url+"/",this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){var t,a;if(this.id=e.id,this.name=e.name,this.app_id=e.app_id,this.app_secret="",this.authentication_endpoint=e.authentication_endpoint,this.token_endpoint=e.token_endpoint,this.identity_endpoint=e.identity_endpoint,this.login_label=e.login_label,this.scopes=e.scopes,this.status=e.status,this.user_map=e.user_map,this.app_url=e.app_url,e.auth==="Basic authentication"){this.dataMethod=e.argument_as,this.apiMethod=e.method;for(const r of this.payloadData)r.faveo_attribute_label==="UserName"&&(r.third_party_attribute=((t=e.basic_format)==null?void 0:t.userName)||""),r.faveo_attribute_label==="password"&&(r.third_party_attribute=((a=e.basic_format)==null?void 0:a.password)||"");e.basic_format&&e.basic_format.length>=2&&([this.userParameters,this.passParameters]=e.basic_format),this.showTable=this.dataMethod==="payload",this.showField=this.dataMethod==="parameter",this.showShortcode=this.dataMethod==="parameter"}},onSubmit(){this.loading=!0;let e;if(this.pageType==="oauth"||this.auth==="Oauth authentication")e={id:this.id,name:this.name,app_id:this.app_id,app_url:this.app_url,app_secret:this.app_secret,authentication_endpoint:this.authentication_endpoint,token_endpoint:this.token_endpoint,identity_endpoint:this.identity_endpoint,login_label:this.login_label,scopes:this.scopes,status:this.status,user_map:this.user_map};else if(this.pageType==="basic"||this.auth==="Basic authentication")if(this.dataMethod==="payload"){const t={};this.payloadData.forEach(a=>{const r=a.faveo_attribute_label==="UserName"?"userName":a.faveo_attribute_label;t[r]=a.third_party_attribute}),e={id:this.id,is_basic:1,status:this.status,name:this.name,authentication_endpoint:this.authentication_endpoint,method:this.apiMethod,argument_as:"payload",basic_format:t}}else if(this.dataMethod==="parameter")e={id:this.id,is_basic:1,status:this.status,name:this.name,authentication_endpoint:this.authentication_endpoint,method:this.apiMethod,argument_as:"parameter",basic_format:this.userParameters&&this.passParameters?this.userParameters+"/"+this.passParameters:""};else{this.loading=!1;return}else{this.loading=!1;return}L.post("/api/admin/third-party-apps",e).then(t=>{this.loading=!1,N(t),this.redirectIfNeeded(),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.loading=!1,I(t)})},redirectIfNeeded(){this.mode==="create"?setTimeout(()=>{this.$router.push({name:"ThirdPartyApps Index"})},3e3):this.getInitialValues()},onChange(e,t){if(this[t]=e,e==="payload"&&(this.showTable=!0,this.showField=!1,this.showShortcode=!1,this.mode==="create"&&(this.userParameters="",this.passParameters="")),e==="parameter"&&(this.showTable=!1,this.showField=!0,this.showShortcode=!0,this.mode==="create"&&this.payloadData.forEach(a=>{a.third_party_attribute=""})),t==="name"){const a=e.replace(/\s/g,"");this.app_url=this.app_url_bkp+a}},shortcode(){L.get("api/admin/third-party-apps-short-code").then(e=>{this.template=e.data,this.parameters=this.template.join("/")}).catch(e=>{})}},components:{RadioButton:Le,"text-field":oe,"status-switch":Oe,"tool-tip":Ae}},gt=e=>(ee("data-v-79c8fedd"),e=e(),te(),e),YA={class:"col-sm-12"},KA={key:0,class:"row"},JA={class:"row"},QA={class:"row"},XA={class:"row"},ZA={class:"col-sm-4"},eq=gt(()=>s("label",null,"Redirect URL",-1)),tq={class:"input-group"},aq={class:"input-group-text"},sq={id:"faveo-attribute-list",class:"faveo-table table"},oq={class:"thead-default"},nq={class:"faveo-attribute-elements"},iq={class:"padding-top-12"},lq=["id"],rq={key:0,class:"text-red"},dq=["onUpdate:modelValue"],cq={class:"row"},uq={class:"row"},hq={key:0,class:"row"},_q={class:"col-md-12"},mq={class:"card card-light"},pq={class:"card-header"},fq={class:"card-title"},gq={class:"card-tools"},vq={class:"btn btn-tool","data-card-widget":"collapse","data-toggle":"tooltip"},bq=gt(()=>s("i",{class:"fas fa-minus"},null,-1)),yq=[bq],kq={class:"card-body col-md-12"},wq={class:"alert alert-info alert-dismissable"},Cq=gt(()=>s("i",{class:"fas fa-info-circle"},null,-1)),Dq=gt(()=>s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),Sq={key:0,class:"list-inline"},$q={class:"list-inline-item",style:{width:"49%"}},Fq={"data-placement":"right"},Mq={key:1,id:"faveo-attribute-list",class:"faveo-table table"},Tq={class:"thead-default"},Eq={class:"faveo-attribute-elements"},Lq={class:"padding-top-12"},Iq=["id"],Aq={key:0,class:"text-red pl-1"},qq=["onUpdate:modelValue"],Pq={key:2,class:"input-box__sbl"},Vq={class:"row"},Oq={class:"params ml-1"},Nq=gt(()=>s("span",{class:"slash"},"/",-1)),xq={class:"card-footer"},Uq=["disabled"];function Rq(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("status-switch"),g=c("text-field"),v=c("tool-tip"),b=c("radio-button"),y=c("faveo-box"),w=P("focus-first-input"),M=P("tooltip");return i(),l("div",YA,[e.hasDataPopulated===!1||e.loading===!0?(i(),l("div",KA,[d(u)])):f("",!0),d(m),e.hasDataPopulated?(i(),D(y,{key:1,title:e.lang("third_party_app")},{headerMenu:k(()=>[d(p,{name:"status",value:e.status,onChange:n.onChange,classname:"pull-right",bold:!0},null,8,["value","onChange"])]),actions:k(()=>[s("div",xq,[s("button",{disabled:e.loading,class:"btn btn-primary",type:"button",onClick:t[4]||(t[4]=(...C)=>n.onSubmit&&n.onSubmit(...C))},[s("i",{class:x(e.iconClass)},null,2),F(" "+h(e.trans(e.btnName)),1)],8,Uq)])]),default:k(()=>[e.pageType==="oauth"||e.auth===e.lang("oauth_authentication")?(i(),l(A,{key:0},[S((i(),l("div",JA,[d(g,{label:e.trans("name"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.name,classname:"col-lg-4",name:"name"},null,8,["label","onChange","placehold","value"]),d(g,{label:e.trans("app_id"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.app_id,classname:"col-lg-4",name:"app_id"},null,8,["label","onChange","placehold","value"]),d(g,{label:e.trans("app_secret"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.app_secret,classname:"col-lg-4",name:"app_secret"},null,8,["label","onChange","placehold","value"])])),[[w]]),s("div",QA,[d(g,{label:e.trans("authentication_endpoint"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("authentication_tooltip"),value:e.authentication_endpoint,classname:"col-lg-4",name:"authentication_endpoint"},null,8,["label","onChange","placehold","hint","value"]),d(g,{label:e.trans("token_endpoint"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.token_endpoint,hint:e.trans("token_tooltip"),classname:"col-lg-4",name:"token_endpoint"},null,8,["label","onChange","placehold","value","hint"]),d(g,{label:e.trans("identity_endpoint"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.identity_endpoint,hint:e.trans("identity_tooltip"),classname:"col-lg-4",name:"identity_endpoint"},null,8,["label","onChange","placehold","value","hint"])]),s("div",XA,[d(g,{label:e.trans("scopes"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("scope_tooltip"),value:e.scopes,classname:"col-lg-4",name:"scopes"},null,8,["label","onChange","placehold","hint","value"]),s("div",ZA,[eq,s("div",tq,[S(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=C=>e.app_url=C),name:"app_url",disabled:""},null,512),[[Fe,e.app_url]]),S((i(),l("div",{class:"input-group-append uri-copy",onClick:t[1]||(t[1]=lt((...C)=>n.copyToClipboard&&n.copyToClipboard(...C),["prevent"]))},[s("span",aq,[s("i",{class:x(e.copied?"glyphicon glyphicon-ok text-green":"fa fa-clipboard")},null,2)])])),[[M,e.copied?e.lang("clipboard-copy-message"):e.lang("click-url-copy")]])])])]),s("table",sq,[s("thead",oq,[s("tr",null,[s("th",null,[F(h(e.trans("faveo_attributes"))+" ",1),d(v,{message:e.lang("faveo_attributes-tooltip"),size:"small"},null,8,["message"])]),s("th",null,[F(h(e.trans("third_party_attributes"))+" ",1),d(v,{message:e.lang("third_party_attributes-tooltip"),size:"small"},null,8,["message"])])])]),(i(!0),l(A,null,G(e.user_map,(C,E)=>(i(),l("tbody",nq,[s("tr",null,[s("td",iq,[s("span",{id:"faveo-attribute-label-"+E},h(e.trans(C.faveo_attribute_label)),9,lq),C.required?(i(),l("span",rq,"*")):f("",!0),d(v,{message:e.lang("third-party-"+C.faveo_attribute_label),size:"small"},null,8,["message"])]),s("td",null,[S(s("input",{type:"text",class:"form-control col col-lg-4","onUpdate:modelValue":R=>C.third_party_attribute=R},null,8,dq),[[Fe,C.third_party_attribute]])])])]))),256))])],64)):f("",!0),e.pageType==="basic"||e.auth===e.lang("basic_authentication")?(i(),l(A,{key:1},[S((i(),l("div",cq,[d(g,{label:e.trans("name"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.name,classname:"col-sm-6",name:"name"},null,8,["label","onChange","placehold","value"]),d(g,{label:e.trans("authentication_endpoint"),onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("authentication_tooltip"),value:e.authentication_endpoint,classname:"col-sm-6",name:"authentication_endpoint"},null,8,["label","onChange","placehold","hint","value"])])),[[w]]),s("div",uq,[d(b,{options:e.lang(e.methodOption),label:e.lang("method"),name:"apiMethod",value:e.apiMethod,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),d(b,{options:e.lang(e.DataOption),label:"",name:"dataMethod",value:e.dataMethod,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","value","onChange"])]),e.showShortcode?(i(),l("div",hq,[s("div",_q,[s("div",mq,[s("div",pq,[s("h3",fq,h(e.trans("list-of-available-shot-codes")),1),s("div",gq,[S((i(),l("button",vq,yq)),[[M,e.trans("collapse-list")]])])]),s("div",kq,[s("div",wq,[Cq,F("  "),s("span",null,h(e.trans("template-short-code-tips")),1),Dq]),s("div",null,[e.template?(i(),l("ul",Sq,[(i(!0),l(A,null,G(e.template,C=>(i(),l("li",$q,[S((i(),l("span",Fq,[F(h(C),1)])),[[M,e.trans(C),void 0,{right:!0}]])]))),256))])):f("",!0)])])])])])):f("",!0),e.showTable?(i(),l("table",Mq,[s("thead",Tq,[s("tr",null,[s("th",null,[F(h(e.trans("faveo_attributes"))+" ",1),d(v,{message:e.lang("faveo_attributes-tooltip"),size:"small"},null,8,["message"])]),s("th",null,[F(h(e.trans("third_party_attributes"))+" ",1),d(v,{message:e.lang("third_party_attributes-tooltip"),size:"small"},null,8,["message"])])])]),(i(!0),l(A,null,G(e.payloadData,(C,E)=>(i(),l("tbody",Eq,[s("tr",null,[s("td",Lq,[s("span",{id:"faveo-attribute-label-"+E},h(e.trans(C.faveo_attribute_label)),9,Iq),C.required?(i(),l("span",Aq,"*")):f("",!0),d(v,{message:e.lang("third-party-"+C.faveo_attribute_label),size:"small"},null,8,["message"])]),s("td",null,[S(s("input",{type:"text",class:"form-control col col-lg-4","onUpdate:modelValue":R=>C.third_party_attribute=R},null,8,qq),[[Fe,C.third_party_attribute]])])])]))),256))])):f("",!0),e.showField?(i(),l("div",Pq,[s("div",Vq,[s("span",null,[s("label",Oq,h(e.lang("url_parameters"))+":",1)]),F("    "),S(s("input",{type:"text",class:"form-control col-sm-2","onUpdate:modelValue":t[2]||(t[2]=C=>e.userParameters=C),id:"userParameters"},null,512),[[Fe,e.userParameters]]),Nq,S(s("input",{type:"text",class:"form-control col-sm-2","onUpdate:modelValue":t[3]||(t[3]=C=>e.passParameters=C),id:"passParameters"},null,512),[[Fe,e.passParameters]])])])):f("",!0)],64)):f("",!0)]),_:1},8,["title"])):f("",!0)])}const qa=T(GA,[["render",Rq],["__scopeId","data-v-79c8fedd"]]);function jq(e){const{provider:t,entity_id:a,sso_url:r,slo_url:o,certificate:n}=e;let u={provider:[t,"isRequired"],entity_id:[a,"isRequired"],sso_url:[r,"isRequired"],slo_url:[o,"isRequired"],certificate:[n,"isRequired"]};const m=new he(O),{errors:p,isValid:g}=m.validate(u);return de.dispatch("setValidationError",p),{errors:p,isValid:g}}const Bq={name:"SamlCreateEdit",description:"Saml create and edit page",components:{"status-switch":Oe,"text-field":oe,"radio-button":Le},data(){return{automatic_logout:!1,logout_time:0,loading:!1,hasDataPopulated:!1,id:"",iconClass:"fas fa-save",btnName:"save",provider:"",entity_id:"",sso_url:"",slo_url:"",certificate:"",status:1,SP_entity_id:"",SP_ACS_url:"",login_url:"",buttonVisible:!1,radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],Edit:!1,providerName:null,url:"/api/SSO/create/"}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=De(e);e.indexOf("edit")>=0?(this.iconClass="fas fa-sync",this.btnName="update",this.Edit="true",this.url="/api/SSO/create/"+this.id,this.buttonVisible=!0,this.getInitialValue(t)):(this.loading=!1,this.hasDataPopulated=!0)},onChange(e,t){this[t]=e,t==="automatic_logout"&&e===!1&&(this.logout_time=0)},isValid(){const{errors:e,isValid:t}=jq(this.$data);return t||!1},getInitialValue(e){this.loading=!0,L.get("/api/SSO/edit/"+e).then(t=>{this.hasDataPopulated=!0,this.loading=!1,this.fillFieldsInfo(t.data.data),this.providerName=t.data.data.provider}).catch(t=>{this.loading=!1,I(t)})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.loading=!1,e.logout_time>0&&(this.automatic_logout=!0,this.logout_time=e.logout_time)},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.id&&(e.id=parseInt(this.id)),e.provider=this.provider,e.entity_id=this.entity_id,e.sso_url=this.sso_url,e.slo_url=this.slo_url,e.certificate=this.certificate,e.status=this.status,e.logout_time=this.logout_time,L.post(this.url,e).then(t=>{this.loading=!1,N(t,"SingleSignOn"),this.id?this.getInitialValue(this.id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/single-sign-on/settings/"+a)},3e3)}).catch(t=>{this.loading=!1,I(t,"SingleSignOn")})}}},computed:{title(){return this.Edit&&this.providerName?this.provider.charAt(0).toUpperCase()+this.provider.slice(1)+" Settings":"SAML 2.0 Integration"}}},Hq={class:"col-sm-12"},zq={key:0,class:"row"},Wq={key:1,class:"card card-light"},Gq={class:"card-header"},Yq={class:"card-title"},Kq={class:"card-tools"},Jq=["href"],Qq=s("i",{class:"fas fa-eye"},null,-1),Xq=[Qq],Zq={class:"card-body"},e6={class:"row"},t6={class:"row"},a6={class:"row"},s6={class:"row"},o6={class:"form-group col-sm-6"},n6={for:"status"},i6={key:0,class:"col-sm-6"},l6={class:"card-footer"};function r6(e,t,a,r,o,n){const u=c("custom-loader"),m=c("alert"),p=c("text-field"),g=c("radio-button"),v=c("status-switch"),b=P("tooltip"),y=P("focus-first-input");return i(),l("div",Hq,[o.loading?(i(),l("div",zq,[d(u,{duration:4e3})])):f("",!0),d(m,{componentName:"SingleSignOn"}),o.hasDataPopulated?(i(),l("div",Wq,[s("div",Gq,[s("h3",Yq,h(e.trans(n.title)),1),s("div",Kq,[o.buttonVisible?S((i(),l("a",{key:0,id:"view_sso",class:"btn btn-tool",type:"button",href:e.basePath()+"/admin/single-sign-on/settings/"+o.id,target:""},Xq,8,Jq)),[[b,e.trans("view")]]):f("",!0)])]),s("div",Zq,[S((i(),l("div",e6,[d(p,{id:"provider",label:e.lang("provider"),hint:e.lang("provider_hint"),value:o.provider,type:"text",name:"provider",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"]),d(p,{id:"entity_id",label:e.lang("entity_id"),hint:e.lang("entity_hint"),value:o.entity_id,type:"text",name:"entity_id",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"])])),[[y]]),s("div",t6,[d(p,{id:"sso_url",label:e.lang("sso_url"),hint:e.lang("SSO_hint"),value:o.sso_url,type:"text",name:"sso_url",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"]),d(p,{id:"entity_id",label:e.lang("slo_url"),hint:e.lang("SLO_hint"),value:o.slo_url,type:"text",name:"slo_url",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"])]),s("div",a6,[d(p,{id:"certificate",label:e.lang("certificate"),value:o.certificate,type:"text",name:"certificate",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),d(g,{options:o.radioOptions,label:e.lang("status"),name:"status",value:o.status,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",s6,[s("div",o6,[s("label",n6,h(e.trans("automatic_logout")),1),d(v,{name:"automatic_logout",value:this.automatic_logout,onChange:n.onChange,bold:!0},null,8,["value","onChange"])]),o.automatic_logout?(i(),l("div",i6,[d(p,{id:"logoutTime",label:e.lang("logout_time"),value:o.logout_time,type:"number",name:"logout_time",onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])])):f("",!0)])]),s("div",l6,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=w=>n.onSubmit())},[s("i",{class:x(o.iconClass)},null,2),F(" "+h(e.trans(o.btnName)),1)])])])):f("",!0)])}const Pa=T(Bq,[["render",r6]]);const d6={name:"SamlIndex.vue",description:"Single Sign On component",data(){return{columns:["provider","status","action"],apiUrl:"/api/SSO/list",options:{},title:"SAML_Integration"}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},columnsClasses:{provider:"provider",activate:"status",actions:"actions"},headings:{is_active:this.trans("activate"),provider:this.trans("provider"),status:this.trans("status"),action:this.trans("action")},templates:{status(t,a){return a.status?e.h("p",{style:{color:"green"}},this.trans("active")):e.h("p",{style:{color:"red"}},this.trans("inactive"))},action(t,a){return e.h(Se,{data:a})}},sortable:["provider","status"],filterable:["provider","status"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){if(t)return{data:t.data.data.map(a=>(a.edit_url="/single-sign-on/settings/"+a.id+"/edit",a.view_url="/single-sign-on/settings/"+a.id,a.delete_url=e.basePath()+"/api/SSO/delete/"+a.id,a)),count:t.data.total}}}}},c6={class:"col-sm-12",id:"SAML-table"},u6={class:"card card-light"},h6={class:"card-header"},_6={class:"card-title"},m6={class:"card-tools"},p6=s("i",{class:"glyphicon glyphicon-plus"},null,-1),f6={class:"card-body",id:"SAML"};function g6(e,t,a,r,o,n){const u=c("alert"),m=c("router-link"),p=c("data-table"),g=P("tooltip");return i(),l("div",c6,[d(u,{componentName:"dataTableModal"}),s("div",u6,[s("div",h6,[s("h3",_6,h(e.trans(o.title)),1),s("div",m6,[S((i(),D(m,{class:"btn btn-tool",to:"/single-sign-on/settings/add"},{default:k(()=>[p6]),_:1})),[[g,e.lang("Create_SSO")]])])]),s("div",f6,[d(p,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"SAML-table"},null,8,["url","dataColumns","option"])])])])}const v6=T(d6,[["render",g6]]);const b6={name:"View.vue",description:"View component",components:{"faveo-box":rt,"text-field":oe,"radio-button":Le,"tool-tip":Ae},data(){return{loading:!1,header:"Single Sign On",provider:"",entity_id:"",sso_url:"",slo_url:"",certificate:"",status:1,logout_time:"",SP_entity_id:"",SP_ACS_url:"",id:this.$route.params.id,radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],copiedEntity:!1,copiedAsc:!1,copiedLogin:!1}},beforeMount(){this.getIntialValue(this.id)},methods:{onChange(e,t){this[t]=e},onCopy(e,t){const a=this[e];Xe(a),this[t]=!0,setTimeout(()=>{this[t]=!1},5e3)},getIntialValue(e){this.loading=!0,L.get("/api/SSO/edit/"+e).then(t=>{this.loading=!1,this.fillFieldsInfo(t.data.data)}).catch(t=>{this.loading=!1,I(t)})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),e.logout_time===0&&(this.logout_time="Not Set")}}},y6=e=>(ee("data-v-066fc5cd"),e=e(),te(),e),k6={class:"col-sm-12"},w6={key:0,class:"row"},C6={key:1},D6={class:"row"},S6={class:"row"},$6={class:"row"},F6=y6(()=>s("div",{class:"row"},null,-1)),M6={class:"row"},T6={class:"col-sm-1"},E6={class:"row"},L6={class:"col-sm-1"};function I6(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("tool-tip"),g=c("text-field"),v=c("radio-button"),b=c("faveo-box"),y=P("tooltip");return i(),l("div",k6,[d(u,{componentName:"Single_Sign_On-View"}),o.loading?(i(),l("div",w6,[d(m,{duration:4e3})])):(i(),l("div",C6,[d(b,{title:typeof this.provider=="string"?this.provider.charAt(0).toUpperCase()+this.provider.slice(1)+" Settings":"Provider not set"},{headerTooltip:k(()=>[d(p,{message:e.lang("SSO_note"),size:"small"},null,8,["message"])]),default:k(()=>[s("div",D6,[d(g,{id:"provider",label:e.lang("provider"),value:o.provider,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"provider",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),d(g,{id:"entity_id",label:e.lang("entity_id"),value:o.entity_id,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"entity_id",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"])]),s("div",S6,[d(g,{id:"sso_url",label:e.lang("sso_url"),value:o.sso_url,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"sso_url",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),d(g,{id:"slo_url",label:e.lang("slo_url"),value:o.slo_url,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"slo_url",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"])]),s("div",$6,[d(v,{options:e.lang(o.radioOptions),label:e.lang("Status"),name:"status",value:o.status,disabled:!0,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),F6,s("div",M6,[d(g,{id:"logoutTime",label:e.lang("logout_time"),value:o.logout_time,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"logout_time",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),d(g,{id:"SP_entity_id",label:e.lang("SP_entity_id"),hint:e.lang("SP_entity_hint"),value:o.SP_entity_id,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"SP_entity_id",disabled:!0,classname:"col-sm-5"},null,8,["label","hint","value","onChange","placehold"]),s("div",T6,[S((i(),l("a",{class:"btn btn-default entity-copy",onClick:t[0]||(t[0]=lt(w=>n.onCopy("SP_entity_id","copiedEntity"),["prevent"]))},[s("span",{class:x(o.copiedEntity?"fas fa-check text-green":"fa fa-clipboard"),id:"eye"},null,2)])),[[y,o.copiedEntity?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])]),s("div",E6,[d(g,{id:"SP_ACS_url",label:e.lang("SP_ACS_url"),hint:e.lang("SP_ACS_hint"),value:o.SP_ACS_url,onChange:n.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"SP_ACS_url",disabled:!0,classname:"col-sm-5"},null,8,["label","hint","value","onChange","placehold"]),s("div",L6,[S((i(),l("a",{class:"btn btn-default acs-copy",onClick:t[1]||(t[1]=lt(w=>n.onCopy("SP_ACS_url","copiedAsc"),["prevent"]))},[s("span",{class:x(o.copiedAsc?"fas fa-check text-green":"fa fa-clipboard"),id:"eye"},null,2)])),[[y,o.copiedAsc?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])])]),_:1},8,["title"])]))])}const A6=T(b6,[["render",I6],["__scopeId","data-v-066fc5cd"]]);const q6={name:"DriversName",props:{data:{type:Object,required:!0}}},P6=e=>(ee("data-v-75987479"),e=e(),te(),e),V6=["href"],O6=P6(()=>s("i",{class:"fas fa-question-circle"},null,-1)),N6=[O6];function x6(e,t,a,r,o,n){const u=P("tooltip");return i(),l("span",null,[s("span",null,h(a.data.name),1),F("   "),a.data.tooltip?S((i(),l("a",{key:0,class:x(a.data.document_link?"":"drivers-tooltip"),href:a.data.document_link,target:"_blank"},N6,10,V6)),[[u,a.data.tooltip]]):f("",!0)])}const U6=T(q6,[["render",x6],["__scopeId","data-v-75987479"]]),R6={name:"DriverActivateModal",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,L.post("api/post/cache-driver",{default:this.driver}).then(e=>{window.emitter.emit("DriverIndexrefreshData"),N(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,I(e,"dataTableModal"),this.onClose()})}}},j6={class:"modal-title"},B6={key:0},H6={key:1,class:"row"},z6=["disabled"],W6=s("i",{class:"fas fa-check"},null,-1);function G6(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:k(()=>[s("h4",j6,h(e.trans("activate")),1)]),fields:k(()=>[o.loading?f("",!0):(i(),l("div",B6,[s("span",null,h(e.trans("are_you_sure")),1)])),o.loading?(i(),l("div",H6,[d(u,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>n.onSubmit&&n.onSubmit(...p)),class:"btn btn-primary",disabled:o.isDisabled},[W6,F(" "+h(e.trans("activate")),1)],8,z6)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const Y6=T(R6,[["render",G6]]),K6={name:"DriversActions",description:"Driver table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToCacheDriver(){this.data.status||this.$router.push(`/cache-driver/${this.data.driver}`)}},components:{"driver-activate-modal":Y6}},J6={key:0},Q6={key:0},X6=["disabled"],Z6=s("i",{class:"fas fa-check-circle"},null,-1),eP=[Z6],tP={key:1},aP=["disabled"],sP=s("i",{class:"fas fa-cog"},null,-1),oP=[sP];function nP(e,t,a,r,o,n){const u=c("driver-activate-modal"),m=P("tooltip");return a.data?(i(),l("div",J6,[a.data.config===0?S((i(),l("span",Q6,[s("button",{class:"btn btn-default table_btn",onClick:t[0]||(t[0]=p=>o.showModal=!0),disabled:a.data.status},eP,8,X6)])),[[m,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.config===1?S((i(),l("span",tP,[s("button",{class:"btn btn-default table_btn",disabled:a.data.status,onClick:t[1]||(t[1]=(...p)=>n.redirectToCacheDriver&&n.redirectToCacheDriver(...p))},oP,8,aP)])),[[m,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,driver:a.data.driver},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const iP=T(K6,[["render",nP]]);const lP={name:"CacheDriversIndex",description:"CacheDrivers table component",data(){return{columns:["name","status","action"],options:{},activated:"",apiUrl:"api/cache-lists"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{name:"drivers-name",status:"drivers-status",action:"drivers-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(U6,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?this.lang("active"):this.lang("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(iP,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.find(({status:a})=>a),{data:t.data,count:6}}}}},rP={class:"col-sm-12"},dP={class:"card card-light"},cP={class:"card-header"},uP={class:"card-title"},hP={class:"card-body",id:"driver_index"};function _P(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",rP,[d(u,{componentName:"dataTableModal"}),s("div",dP,[s("div",cP,[s("h3",uP,h(e.trans("cache-driver")),1)]),s("div",hP,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"driver_index",componentTitle:"DriverIndex"},null,8,["url","dataColumns","option"])])])])}const mP=T(lP,[["render",_P]]);function Ts(e){const{connection:t}=e;let a={connection:[t,"isRequired"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const pP={name:"CacheDriversRedis",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",connection:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Ts(this.$data);return t},getData(){this.loading=!0,L.get("api/get/cache-driver/redis").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"CacheDriversRedis")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onSubmit(){this.isValid()&&(this.pageLoad=!0,L.post("api/post/cache-driver",{default:this.driver,connection_redis:this.connection}).then(e=>{this.pageLoad=!1,N(e,"CacheDriversRedis"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(e=>{this.pageLoad=!1,I(e,"CacheDriversRedis")}))},onChange(e,t){this[t]=e}},components:{"text-field":oe}},fP={class:"col-sm-12"},gP={class:"card card-light"},vP={class:"card-header"},bP={class:"card-title"},yP={class:"card-body"},kP={key:0,class:"row"},wP={key:1,class:"row"},CP={key:0,class:"card-footer"},DP=["disabled"],SP=s("i",{class:"fas fa-save"},null,-1);function $P(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",fP,[d(u,{componentName:"CacheDriversRedis"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",gP,[s("div",vP,[s("h3",bP,h(e.trans("redis")),1)]),s("div",yP,[!o.hasDataPopulated||o.loading?(i(),l("div",kP,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",wP,[d(g,{label:e.trans("connection"),name:"connection",value:o.connection,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:e.lang("default")},null,8,["label","value","onChange","placehold"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",CP,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[SP,F(" "+h(e.trans("save")),1)],8,DP)])):f("",!0)])])}const FP=T(pP,[["render",$P]]);function MP(e){const{host:t,port:a}=e;let r={host:[t,"isRequired"],port:[a,"isRequired"]};const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}const TP={name:"CacheDriversMemcached",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",host:"",port:"",persistent_id:"",user_name:"",password:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=MP(this.$data);return t},getData(){this.loading=!0,L.get("api/get/cache-driver/memcached").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"mem-cached")})},fillFieldsInfo(e){const{driver:t,servers:a,persistent_id:r,sasl:o}=e;this.driver=t,this.host=a[0].host,this.port=a[0].port,this.persistent_id=r,this.user_name=o[0],this.password=o[1]},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={default:this.driver,memcached_host:this.host,memcached_port:this.port},t={memcached_username:this.user_name,memcached_persistent_id:this.persistent_id,memcached_password:this.password};for(const[a,r]of Object.entries(t))r!==""&&(e[a]=r);L.post("api/post/cache-driver",e).then(a=>{this.pageLoad=!1,N(a,"mem-cached"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(a=>{this.pageLoad=!1,I(a,"mem-cached")})}},onChange(e,t){this[t]=e}},components:{"text-field":oe}},EP={class:"col-sm-12"},LP={class:"card card-light"},IP={class:"card-header"},AP={class:"card-title"},qP={class:"card-body"},PP={key:0,class:"row"},VP={key:1,class:"row"},OP={key:0,class:"card-footer"},NP=["disabled"],xP=s("i",{class:"fas fa-save"},null,-1);function UP(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",EP,[d(u,{componentName:"mem-cached"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",LP,[s("div",IP,[s("h3",AP,h(e.trans("memcached")),1)]),s("div",qP,[!o.hasDataPopulated||o.loading?(i(),l("div",PP,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",VP,[d(g,{label:e.trans("host"),type:"text",name:"host",value:o.host,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"127.0.0.1"},null,8,["label","value","onChange"]),d(g,{label:e.trans("port"),type:"text",name:"port",value:o.port,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"11211"},null,8,["label","value","onChange"]),d(g,{label:e.trans("persistent_id"),type:"text",name:"persistent_id",value:o.persistent_id,classname:"col-sm-6",onChange:n.onChange,placehold:e.lang("id")},null,8,["label","value","onChange","placehold"]),d(g,{label:e.trans("user_name"),type:"text",name:"user_name",value:o.user_name,classname:"col-sm-6",onChange:n.onChange,placehold:e.lang("username")},null,8,["label","value","onChange","placehold"]),d(g,{label:e.trans("password"),type:"text",name:"password",value:o.password,classname:"col-sm-6",onChange:n.onChange,placehold:e.lang("password")},null,8,["label","value","onChange","placehold"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",OP,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[xP,F(" "+h(e.trans("save")),1)],8,NP)])):f("",!0)])])}const RP=T(TP,[["render",UP]]);function Es(e){const{endpoint:t,key:a,region:r,secret:o,table:n}=e;let u={endpoint:[t,"isRequired"],key:[a,"isRequired"],region:[r,"isRequired"],secret:[o,"isRequired"],table:[n,"isRequired"]};const m=new he(O),{errors:p,isValid:g}=m.validate(u);return de.dispatch("setValidationError",p),{errors:p,isValid:g}}const jP={name:"CacheDriversDynamodb",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,endpoint:"",key:"",region:"",secret:"",table:"",driver:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Es(this.$data);return t},getData(){this.loading=!0,L.get("api/get/cache-driver/dynamodb").then(e=>{this.driver=e.data.data.driver,this.fillFieldsInfo(e.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"CacheDriversDynamodb")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.default=this.driver,e.aws_access_key_id=this.key,e.aws_secret_access_key=this.secret,e.dynamodb_cache_table=this.table,e.dynamodb_endpoint=this.endpoint,e.aws_default_region=this.region,L.post("api/post/cache-driver",e).then(t=>{this.pageLoad=!1,N(t,"CacheDriversDynamodb"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(t=>{this.pageLoad=!1,I(t,"CacheDriversDynamodb")})}},onChange(e,t){this[t]=e}},components:{"text-field":oe}},BP={class:"col-sm-12"},HP={class:"card card-light"},zP={class:"card-header"},WP={class:"card-title"},GP={class:"card-body"},YP={key:0,class:"row"},KP={key:1,class:"row"},JP={key:0,class:"card-footer"},QP=["disabled"],XP=s("i",{class:"fas fa-save"},null,-1);function ZP(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",BP,[d(u,{componentName:"CacheDriversDynamodb"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",HP,[s("div",zP,[s("h3",WP,h(e.trans("Dynamodb")),1)]),s("div",GP,[!o.hasDataPopulated||o.loading?(i(),l("div",YP,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",KP,[d(g,{id:"endpoint",label:e.trans("endpoint"),type:"text",name:"endpoint",value:o.endpoint,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:e.lang("endpoint")},null,8,["label","value","onChange","placehold"]),d(g,{id:"key",label:e.trans("key"),type:"text",name:"key",value:o.key,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:e.lang("id")},null,8,["label","value","onChange","placehold"]),d(g,{id:"region",label:e.trans("region"),type:"text",name:"region",value:o.region,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"usa"},null,8,["label","value","onChange"]),d(g,{id:"secret",label:e.trans("secret"),type:"text",name:"secret",value:o.secret,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:e.lang("secret")},null,8,["label","value","onChange","placehold"]),d(g,{id:"table",label:e.trans("table"),type:"text",name:"table",value:o.table,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:e.lang("cache")},null,8,["label","value","onChange","placehold"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",JP,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[XP,F(" "+h(e.trans("save")),1)],8,QP)])):f("",!0)])])}const e5=T(jP,[["render",ZP]]);const t5={name:"task-delete-modal",description:"Delete Modal component for task plugin",props:{showModal:{type:Boolean,default:!1},deleteUrl:{type:String},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},redirectUrl:{type:String,default:""},componentTitle:{type:String,default:""}},computed:{alertMessage(){switch(this.componentTitle){case"TaskList":return this.lang("task-plugin-delete-confirmation-tasklists");case"TaskProjects":return this.lang("task-plugin-delete-confirmation-projects");case"TaskTemplate":return this.lang("task-plugin-template-delete-alert");case"dataTableTittle":return this.lang("form-category-delete-message")}}},data:()=>({isDisabled:!1,containerStyle:{width:"500px"},loading:!1,size:60,lang_locale:""}),created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,axios.delete(this.deleteUrl).then(e=>{N(e,this.alertComponentName),window.emitter.emit("refreshData"),this.afterRespond()}).catch(e=>{I(e,this.alertComponentName),this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),window.emitter.emit(this.componentTitle+"uncheckCheckbox"),this.redirectUrl&&this.redirect(this.redirectUrl),this.alertComponentName=="timeline"&&window.emitter.emit("actionDone"),this.onClose(),this.loading=!1,this.isDisabled=!0}}},a5={class:"modal-title"},s5={key:0},o5={key:1,class:"row"},n5=["disabled"],i5=s("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1);function l5(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return i(),l("div",null,[a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:k(()=>[s("h4",a5,h(e.lang("delete")),1)]),fields:k(()=>[e.loading?f("",!0):(i(),l("div",s5,[s("span",null,h(n.alertMessage),1)])),e.loading?(i(),l("div",o5,[d(u,{"animation-duration":4e3,color:"#1d78ff",size:e.size,class:x({spin:e.lang_locale=="ar"})},null,8,["size","class"])])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>n.onSubmit&&n.onSubmit(...p)),class:"btn btn-danger",disabled:e.isDisabled},[i5,F(" "+h(e.lang("delete")),1)],8,n5)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const r5=T(t5,[["render",l5]]);const d5={name:"task-modal",description:"Task Modal component",props:{title:{type:String,default:""},showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},componentTitle:{type:String,default:""},containerStyle:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{loading:!1,name:"",project_id:""}},beforeMount(){this.updateSubject()},methods:{updateSubject(){this.title==="edit_project"&&(this.name=this.data.name,this.project_id=this.data.id)},onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;const e={};e.name=this.name,this.title==="edit_project"?L.put("/tasks/api/project/edit/"+this.project_id,e).then(t=>{N(t,this.alertComponentName),this.afterRespond()}).catch(t=>{I(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()}):L.post("/tasks/api/project/create",e).then(t=>{N(t,this.alertComponentName),this.afterRespond()}).catch(t=>{I(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),this.onClose(),this.loading=!1},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":oe}},c5={class:"modal-title"},u5={key:0,class:"row"},h5={key:1,class:"row"},_5=["disabled"],m5=s("i",{class:"fas fa-check"},null,-1);function p5(e,t,a,r,o,n){const u=c("text-field"),m=c("reuse-loader"),p=c("modal"),g=P("focus-first-input");return a.showModal?(i(),D(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:a.containerStyle},{title:k(()=>[s("h4",c5,h(e.lang(a.title)),1)]),fields:k(()=>[o.loading?f("",!0):S((i(),l("div",u5,[d(u,{label:e.lang("project_name"),id:"project_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),value:o.name,type:"text",name:"name",keyupListener:n.triggerEvent,required:!0,classname:"col-sm-12"},null,8,["label","onChange","placehold","value","keyupListener"])])),[[g]]),o.loading?(i(),l("div",h5,[d(m,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...v)=>n.onSubmit&&n.onSubmit(...v)),class:"btn btn-primary",disabled:!o.name},[m5,F(" "+h(e.lang("proceed")),1)],8,_5)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const f5=T(d5,[["render",p5]]),g5={name:"task-modal",description:"Task Modal component",props:{title:{type:String,default:""},showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},componentTitle:{type:String,default:""},containerStyle:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{loading:!1,name:"",project:"",task_id:""}},beforeMount(){this.updateSubject()},methods:{updateSubject(){this.title==="tasklist_edit"&&(this.name=this.data.name,this.project=this.data.project,this.task_id=this.data.id)},onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;const e={};e.name=this.name,e.project_id=this.project.id,this.title==="tasklist_edit"?L.put("/tasks/api/category/edit/"+this.task_id,e).then(t=>{N(t,this.alertComponentName),this.afterRespond()}).catch(t=>{I(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()}):L.post("/tasks/api/category/create",e).then(t=>{N(t,this.alertComponentName),this.afterRespond()}).catch(t=>{I(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),this.onClose(),this.loading=!1}},components:{"text-field":oe,"dynamic-select":Me}},v5={class:"modal-title"},b5={key:0,class:"row"},y5={key:1,class:"row"},k5=["disabled"],w5=s("i",{class:"fas fa-check"},null,-1);function C5(e,t,a,r,o,n){const u=c("text-field"),m=c("dynamic-select"),p=c("reuse-loader"),g=c("modal"),v=P("focus-first-input");return a.showModal?(i(),D(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:a.containerStyle},{title:k(()=>[s("h4",v5,h(e.lang(a.title)),1)]),fields:k(()=>[o.loading?f("",!0):S((i(),l("div",b5,[d(u,{label:e.lang("name"),id:"project_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),value:o.name,type:"text",name:"name",required:!0,classname:"col-sm-6"},null,8,["label","onChange","placehold","value"]),d(m,{id:"project",name:"project",multiple:!1,value:o.project,label:e.lang("project"),onChange:n.onChange,strlength:"35",apiEndpoint:"tasks/api/project/view",required:!0,classname:"col-sm-6"},null,8,["value","label","onChange"])])),[[v]]),o.loading?(i(),l("div",y5,[d(p,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),class:"btn btn-primary",disabled:!(o.name&&o.project)},[w5,F(" "+h(e.lang("proceed")),1)],8,k5)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const D5=T(g5,[["render",C5]]);const S5={name:"data-table-actions",description:"Contains edit, delete and view buttons as group which can be used as a component as whole. It is built basically for displaying edit, delete and view button in a datable.",props:{data:{type:Object,required:!0}},data(){return{showModal:!1,showEditModal:!1,alert:"",style:{width:"500px"},styleObj:{width:"700px"}}},created(){this.alert=this.data.alertComponentName?this.data.alertComponentName:"dataTableModal"},methods:{onClose(){this.showModal=!1,this.showEditModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"delete-modal":r5,"task-modal":f5,"task-list-modal":D5}},$5={class:"block"},F5=s("i",{class:"fas fa-edit"},null,-1),M5=[F5],T5=s("span",null,[s("i",{class:"fas fa-edit"})],-1),E5=s("i",{class:"fas fa-trash"},null,-1),L5=[E5];function I5(e,t,a,r,o,n){const u=c("router-link"),m=c("delete-modal"),p=c("task-list-modal"),g=c("task-modal"),v=P("tooltip");return i(),l("div",$5,[a.data.edit_modal?S((i(),l("a",{key:0,class:"btn btn-default table_btn btn-sm",onClick:t[0]||(t[0]=b=>o.showEditModal=!0),href:"javascript:;"},M5)),[[v,e.trans("edit")]]):f("",!0),a.data.edit_url?S((i(),D(u,{key:1,class:"btn btn-default table_btn btn-sm",id:"edit-button",to:a.data.edit_url,target:a.data.tableName?"_blank":""},{default:k(()=>[T5]),_:1},8,["to","target"])),[[v,e.trans("edit")]]):f("",!0),a.data.delete_url?S((i(),l("a",{key:2,class:"btn btn-default table_btn btn-sm",onClick:t[1]||(t[1]=b=>o.showModal=!0),href:"javascript:;"},L5)),[[v,e.trans("delete")]]):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(m,{key:0,onClose:n.onClose,showModal:o.showModal,deleteUrl:a.data.delete_url,alertComponentName:o.alert,componentTitle:a.data.componentTitle},null,8,["onClose","showModal","deleteUrl","alertComponentName","componentTitle"])):f("",!0)]),_:1}),a.data.componentTitle==="TaskList"?(i(),D(ye,{key:3,name:"modal"},{default:k(()=>[o.showEditModal?(i(),D(p,{key:0,title:"tasklist_edit",onClose:n.onClose,showModal:o.showEditModal,data:a.data,componentTitle:"TaskList"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})):f("",!0),a.data.componentTitle==="TaskProjects"?(i(),D(ye,{key:4,name:"modal"},{default:k(()=>[o.showEditModal?(i(),D(g,{key:0,title:"edit_project",onClose:n.onClose,showModal:o.showEditModal,data:a.data,containerStyle:o.style,componentTitle:"TaskProjects"},null,8,["onClose","showModal","data","containerStyle"])):f("",!0)]),_:1})):f("",!0)])}const Va=T(S5,[["render",I5]]);function A5(e){const{name:t}=e;let a={name:[t,"isRequired"]};const r=new he(O),{errors:o,isValid:n}=r.validate(a);return de.dispatch("setValidationError",o),{errors:o,isValid:n}}const q5={name:"form-builder-index",components:{TextField:oe,Modal:Ge,DataTableActions:Va},setup(){const e=ce();return{formattedTime:ae(()=>e.getters.formattedTime)}},props:{componentTitle:{type:String,default:""}},data:()=>({columns:["name","type","created_at","updated_at","action"],options:{},apiUrl:"/api/dependency/form-categories",showModal:!1,loading:!0,isDisabled:!0,type:"",name:"",showDrop:!1,nameError:""}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.options={headings:{name:this.trans("name"),type:this.trans("type"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("action")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:(t,a)=>e.h(Va,{data:a})},sortable:["name","created_at","type"],filterable:["name","created_at","type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{paginate:1,"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="forms/"+a.category+"/edit",a.componentTitle="dataTableTittle",a.alertComponentName="form-builder-index",a)),count:t.data.total}}}},methods:{containsSpecialChars(e){const t=/[!@#$%^&*()+\-=\[\]{};':"\\|,.<>\/?\s]/.test(e);return t?this.handleNameError(this.lang("validation-error-message")):this.handleNameError(""),t},handleNameError(e){this.nameError=e},isValid(){const{errors:e,isValid:t}=A5(this.$data);return t},onClose(){this.showModal=!1,this.nameError="",this.type="",this.name=""},onChange(e,t){this[t]=e,this.isDisabled=e!==""},onSubmit(){if(this.isValid()){if(this.containsSpecialChars(this.name))return;this.loading=!0,this.isDisabled=!0;let e={};e.name=this.name,L.post("/form-category/create",e).then(t=>{this.loading=!1,N(t,"form-builder-index"),window.emitter.emit("refreshData"),this.onClose()}).catch(t=>{this.loading=!1,I(t,"form-builder-index")})}}}},Ls=e=>(ee("data-v-c2b90a0a"),e=e(),te(),e),P5={class:"col-sm-12"},V5={class:"card card-light"},O5={class:"card-header"},N5={id:"contract-type-list",class:"card-title"},x5={class:"card-tools"},U5={href:"javascript:;",class:"btn-tool dropdown-toggle","data-toggle":"dropdown"},R5=Ls(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1)),j5=[R5],B5={class:"dropdown-menu dropdown-menu-right",role:"menu"},H5={class:"card-body"},z5={class:"modal-title"},W5={class:"row"},G5={class:"fas fa-info-circle infoCheck"},Y5={key:0,class:"error-block is-danger"},K5=Ls(()=>s("i",{class:"fas fa-save","aria-hidden":"true"},null,-1));function J5(e,t,a,r,o,n){const u=c("alert"),m=c("data-table"),p=c("text-field"),g=c("modal"),v=P("tooltip"),b=P("focus-first-input");return i(),l("div",P5,[d(u,{componentName:"form-builder-index"}),s("div",V5,[s("div",O5,[s("h3",N5,h(e.lang("list_of_form_categories")),1),s("div",x5,[S((i(),l("a",U5,j5)),[[v,e.lang("create_form")]]),S(s("div",B5,[s("a",{class:"dropdown-item",onClick:t[0]||(t[0]=y=>e.showModal=!0)},h(e.lang("new_ticket_category")),1)],512),[[We,e.showDrop]])])]),s("div",H5,[d(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"contract-type-list"},null,8,["url","dataColumns","option"])]),e.showModal?(i(),D(g,{key:0,showModal:e.showModal,onClose:n.onClose,componentTitle:"dataTableTittle"},{title:k(()=>[s("h4",z5,h(e.lang("create_new_form_category")),1)]),fields:k(()=>[S((i(),l("div",W5,[d(p,{label:e.lang("name"),value:e.name,type:"textfield",name:"name",onChange:n.onChange,required:!0,classname:"col-sm-12",onKeyup:t[1]||(t[1]=ct(y=>n.onSubmit(),["enter"]))},null,8,["label","value","onChange"]),s("span",null,[S(s("i",G5,null,512),[[v,e.lang("ticket-form-info")]])])])),[[b]]),e.nameError?(i(),l("div",Y5,h(e.nameError),1)):f("",!0)]),controls:k(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[2]||(t[2]=y=>n.onSubmit()),class:"btn btn-primary",disabled:!1},[K5,F(" "+h(e.lang("save")),1)])]),_:1},8,["showModal","onClose"])):f("",!0)])])}const Q5=T(q5,[["render",J5],["__scopeId","data-v-c2b90a0a"]]);const X5={name:"form-builder-main",components:{"faveo-form-builder-menu":ns,"text-field":oe,"dynamic-select":Me,Modal:Ge},props:{groupMode:{type:String,default:""},formNameObj:{type:Object,default:()=>{}},formLinker:{type:Array,default:()=>[]},editFormGroupApi:{type:String,default:()=>""},postFromGroupApi:{type:String,default:()=>""},formCategoryType:{type:String,default:""}},data:()=>({pageHeading:"create-form",hasMenuLoaded:!1,hasFormFieldsLoaded:!1,showLoader:!0,formGroupList:[],isCreateFormGroup:!1,isEditFormGroup:!1,formGroupId:null,activeFormCategoryType:"",formCategoryTypes:[],localFormNameObj:"",localFormLinker:"",showDeleteModal:!1,deleteType:"",deleteData:"",deleteId:"",showModal:!1,organizations:[],defaultCategories:["ticket","organisation","user","asset","change","license"]}),beforeMount(){this.localFormNameObj=this.formNameObj,this.localFormLinker=this.formLinker,this.activeFormCategoryType=this.formCategoryType,this.setInitialValue(),this.groupMode=="create"&&(this.localFormNameObj.value="",this.localFormLinker=this.localFormLinker.map(e=>({...e,value:[]})))},computed:{formFieldsStoreValue:{get(){return this.$store.getters.getFormFields},set(e){this.$store.dispatch("updateFormFields",e)}}},created(){window.emitter.on("formFieldSettingsApplied",this.applySettingsChanges),window.emitter.on("onRemoveElement",this.onRemoveElement),window.emitter.on("getFormDataFromServer",this.getFormDataFromServer)},methods:{onClose(){this.showModal=!1,this.type="",this.name=""},showConfigModal(){this.showModal=!0,this.showLoader=!0,this.fetchConfigData()},fetchConfigData(){this.showLoader=!0,L.get("/form-category/configs/"+this.activeFormCategoryType).then(e=>{this.organizations=e.data.data.organizations,this.showLoader=!1})},setInitialValue(){this.getCurrentWindowLocation(),!this.isCreateFormGroup&&!this.isEditFormGroup?this.getFormCategories():(this.getMenuJson(),this.assignFormFields())},getFormCategories(){this.setCategoryType(),this.getFormDataBasisOnCategory()},setCategoryType(){let e=window.location.pathname;e=e.split("/"),this.activeFormCategoryType=e[e.length-2]},getFormDataBasisOnCategory(){this.getFormGroupList(),this.getMenuJson(),this.assignFormFields()},getCurrentWindowLocation(){return window.location.pathname},getMenuJson(){L.get("api/get-form-menu/"+this.activeFormCategoryType).then(e=>{this.$store.commit("updateFormMenu",e.data.data),this.hasMenuLoaded=!0})},assignFormFields(){this.isCreateFormGroup?this.$store.commit("updateFormFields",[]):this.getFormDataFromServer().then(e=>{this.isEditFormGroup&&(this.localFormNameObj.value=e.data.data[this.localFormNameObj.id]?e.data.data[this.localFormNameObj.id]:"",this.localFormLinker.forEach(t=>{t.value=e.data.data[t.id]?e.data.data[t.id]:[]})),this.hasFormFieldsLoaded=!0})},onTabClick(e){this.activeFormCategoryType!==e&&(this.activeFormCategoryType=e,this.getMenuJson(),this.getFormGroupList(),this.getFormDataFromServer())},getFormDataFromServer(){this.showLoader=!0,this.$store.commit("updateFormCategoryType",this.activeFormCategoryType);let e="api/get-form-data",t={category:this.activeFormCategoryType,config:!0};return this.isEditFormGroup&&(e=this.editFormGroupApi+"/"+this.formGroupId,t.config=!1),L.get(e,{params:t}).then(a=>(this.$store.commit("updateFormFields",a.data.data.form_fields),this.showLoader=!1,a)).catch(a=>{this.showLoader=!1,I(a,"form-builder-main")})},isValidFormName(){if(this.isCreateFormGroup||this.isEditFormGroup){const{errors:e,isValid:t}=os(this.$props);return t}else return!0},getFormGroupList(){if(this.activeFormCategoryType==="user"||this.activeFormCategoryType==="organisation")return;this.showLoader=!0;const t={limit:2e3,supplements:this.defaultCategories.includes(this.activeFormCategoryType)?this.activeFormCategoryType:"ticket"};L.get("api/dependency/form-groups",{params:t}).then(a=>{this.formGroupList=a.data.data.form_groups.map(r=>({id:r.id,title:r.name,name:r.name,type:"group",edit_url:r.edit_url,is_deletable:1}))}).catch(a=>{console.error("Error in getting form group list ",a)}).finally(()=>{this.showLoader=!1})},async onSaveForm(){if(this.isValidFormName()){const e=this.$store.getters.getFormFields;this.assignSortOrder(e),this.saveForm(e)}},assignSortOrder(e){for(let t=0;t<e.length;t++)e[t].sort_order=t,Object.keys(e[t]).forEach(a=>{re(e[t][a])&&Array.isArray(e[t][a])&&this.assignSortOrder(e[t][a])})},async saveForm(e){try{this.showLoader=!0;const t=this.getApiEndpoint(),a=await this.postFormData(t,e);this.handleSuccess(a)}catch(t){this.handleFailure(t)}},getApiEndpoint(){return this.isCreateFormGroup||this.isEditFormGroup?this.postFromGroupApi:"api/post-form-data"},async postFormData(e,t){return await L.post(e,this.getSaveFormParams(t))},handleSuccess(e){N(e,"form-builder-main"),this.isCreateFormGroup||this.isEditFormGroup?this.handleSuccessForCreateOrEdit():this.handleSuccessForOther()},handleSuccessForCreateOrEdit(){this.showLoader=!1,setTimeout(()=>{this.$router.push({name:"FormGroups Index"})},3e3)},handleSuccessForOther(){this.getFormDataFromServer().then(()=>{this.showLoader=!1})},handleFailure(e){this.showLoader=!1,I(e,"form-builder-main")},getSaveFormParams(e){let t={};return t.category=this.activeFormCategoryType,t["form-fields"]=e,(this.isCreateFormGroup||this.isEditFormGroup)&&(t[this.localFormNameObj.submitFormParamKey]=this.localFormNameObj.value,this.localFormLinker.forEach(a=>{t[a.submitFormParamKey]=a.value.map(r=>r.id)})),this.isEditFormGroup&&(t.id=this.formGroupId),t},onRemoveElement(e){this.showDeleteModal=!0,this.deleteType=e.reference_type,this.deleteData=e.fieldData,this.deleteId=e.reference_id},doDelete(){this.showDeleteModal=!1,this.isDeleteFromDB(this.deleteData)?this.deleteElementFormDB(this.deleteData.id,this.deleteId,this.deleteType):this.deleteElementLocally(this.deleteData.form_identifier)},deleteElementLocally(e){const t=this.$store.getters.getFormFields;this.removeAt(t,e)&&this.$store.dispatch("updateFormFields",t)},deleteElementFormDB(e,t,a){this.showLoader=!0;let r="api/delete-form-data/form-field/"+e;t&&(r="api/unlink-form-group/"+a+"/"+t),L.delete(r).then(o=>{N(o,"form-builder-main"),this.getFormDataFromServer(),this.showLoader=!1}).catch(o=>{this.showLoader=!1,I(o,"form-builder-main")})},isDeleteFromDB(e){return e.type==="group"?typeof e.groupid>"u":e.id.toString().length<13},removeAt(e,t){let a=Ne.findIndex(e,r=>r.form_identifier===t);if(a!==-1)e.splice(a,1);else for(let r=0;r<e.length;r++)re(e[r].options)&&this.removeAt(e[r].options,t),re(e[r].nodes)&&this.removeAt(e[r].nodes,t);return Promise.resolve(!0)},onChange(e,t){this[t]=e,e!==""&&(this.isDisabled=!1)},onSubmit(){this.showLoader=!0,this.isDisabled=!0;let e={};e.organization=this.organisation,L.post("form-category/configs/"+this.activeFormCategoryType,e).then(t=>{this.showLoader=!1,N(t,"form-builder-main"),window.emitter.emit("refreshData"),this.onClose()}).catch(t=>{this.showLoader=!1,I(t,"form-builder-main"),this.onClose()})},async applySettingsChanges(e){const t=this.$store.getters.getFormFields;await this.assignNewValue(t,e.form_identifier,e)&&this.$store.dispatch("updateFormFields",t)},assignNewValue(e,t,a){let r=Ne.findIndex(e,o=>o.form_identifier===t);if(r!==-1)e[r]=a;else for(let o=0;o<e.length;o++)re(e[o].options)&&this.assignNewValue(e[o].options,t,a),re(e[o].nodes)&&this.assignNewValue(e[o].nodes,t,a);return new Promise(o=>{o(!0)})}}},Vt=e=>(ee("data-v-570f9302"),e=e(),te(),e),Z5={class:"col-sm-12"},eV={class:"card card-light"},tV={class:"card-header"},aV={class:"card-title"},sV={key:0,class:"text-capitalize"},oV={class:"card-tools"},nV=Vt(()=>s("i",{class:"fa-solid fa-sitemap"},null,-1)),iV=Vt(()=>s("span",{class:"fas fa-save"},null,-1)),lV={class:"modal-title"},rV={class:"alert alert-info"},dV={class:"row"},cV=Vt(()=>s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1)),uV={class:"card-body",id:"form-builder-body"},hV={class:"row"},_V={class:"col-md-4"},mV={class:"col-md-8"},pV={class:"card m-1 p-2"},fV={key:0},gV={key:0,class:"row"},vV={class:"mt-2"},bV={class:"modal-title"},yV=Vt(()=>s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1));function kV(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("dynamic-select"),g=c("modal"),v=c("faveo-form-builder-menu"),b=c("text-field"),y=c("draggable-form-field-item"),w=P("tooltip"),M=P("focus-first-input");return i(),l("div",Z5,[d(u,{componentName:"form-builder-main"}),s("div",eV,[s("div",tV,[e.showLoader?(i(),D(m,{key:0})):f("",!0),s("h3",aV,[!e.isCreateFormGroup&&!e.isEditFormGroup?(i(),l("span",sV,h(e.trans("create"))+" "+h(e.activeFormCategoryType)+" "+h(!e.isCreateFormGroup&&!e.isEditFormGroup?e.trans("form"):e.trans("form-group")),1)):f("",!0)]),s("div",oV,[e.defaultCategories.includes(e.activeFormCategoryType)?f("",!0):S((i(),l("button",{key:0,type:"button",class:"btn btn-tool btn-default form-save-btn",onClick:t[0]||(t[0]=C=>n.showConfigModal())},[nV,F(" "+h(e.trans("assign")),1)])),[[w,e.trans("assign_organization")]]),s("button",{class:"btn btn-tool btn-default form-save-btn",onClick:t[1]||(t[1]=(...C)=>n.onSaveForm&&n.onSaveForm(...C))},[iV,F(" "+h(e.lang("save")),1)])])]),e.showModal?(i(),D(g,{key:0,showModal:e.showModal,onClose:n.onClose},{title:k(()=>[s("h4",lV,h(e.lang("assign_organization")),1)]),fields:k(()=>[s("div",rV,[s("li",null,h(e.lang("assign_org_form_caution_msg_1")),1),s("li",null,h(e.lang("assign_org_form_caution_msg_2")),1)]),S((i(),l("div",dV,[d(p,{label:e.lang("organizations"),multiple:!0,name:"organisation",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations?having_form_categories=0",value:e.organizations,onChange:n.onChange},null,8,["label","value","onChange"])])),[[M]])]),controls:k(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[2]||(t[2]=(...C)=>n.onSubmit&&n.onSubmit(...C)),class:"btn btn-primary",disabled:!1},[cV,F(" "+h(e.lang("submit")),1)])]),_:1},8,["showModal","onClose"])):f("",!0),s("div",uV,[s("div",hV,[s("div",_V,[e.hasMenuLoaded?(i(),D(v,{key:0,class:"card formFields","form-group-list":e.formGroupList},null,8,["form-group-list"])):f("",!0)]),s("div",mV,[s("div",pV,[e.hasFormFieldsLoaded&&e.hasMenuLoaded?(i(),l("div",fV,[e.isCreateFormGroup||e.isEditFormGroup?S((i(),l("div",gV,[d(b,{id:e.localFormNameObj.id,classname:e.localFormNameObj.className,label:e.lang(e.localFormNameObj.label),value:e.localFormNameObj.value,type:"text",name:e.localFormNameObj.id,onChange:C=>e.localFormNameObj.value=C,placehold:e.lang(e.localFormNameObj.placeholder),required:!0},null,8,["id","classname","label","value","name","onChange","placehold"]),(i(!0),l(A,null,G(e.localFormLinker,C=>(i(),D(p,{key:C.id,id:C.id,name:C.id,classname:C.className,apiEndpoint:C.apiEndpoint,label:e.lang(C.label),value:C.value,required:!1,multiple:!0,onChange:E=>C.value=E},null,8,["id","name","classname","apiEndpoint","label","value","onChange"]))),128))])),[[M]]):f("",!0),s("div",vV,[d(y,{value:n.formFieldsStoreValue},null,8,["value"])])])):f("",!0)])])])])]),d(ye,{name:"modal"},{default:k(()=>[e.showDeleteModal?(i(),D(g,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",bV,h(e.lang("delete")),1)]),fields:k(()=>[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[3]||(t[3]=(...C)=>n.doDelete&&n.doDelete(...C)),class:"btn btn-danger"},[yV,F(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const wV=T(X5,[["render",kV],["__scopeId","data-v-570f9302"]]),CV={name:"UserImport",description:"Common component to track the import progress",data(){return{url:"",id:"",responseData:null,loading:!0,dataTableOptions:{headings:{row:this.trans("row_number"),field:this.trans("field_name"),comment:this.trans("reason")},columnsClasses:{row:"import__failed__row",field:"import__failed__field",comment:"import__failed__comment"},filterable:!1,sortable:[],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>t),count:e.data.total}}}}},beforeMount(){this.id=De(window.location.pathname),this.url="panel/user/list",this.getData()},computed:{getUrlAttribute(){const e=this.basePath()+"/"+this.url,t=this.urlLabel?this.urlLabel:this.lang("sd_importer_import_tracking_view_label");return`<p><a href="${e}">${t}</a></p>`},showFailedRows(){return this.responseData.totalFailed>0},failedRowsUrl(){return`/user/import-tracking-failed/${this.id}`}},methods:{getData(){L.get(`/user/import-tracking-details/${this.id}`).then(e=>{this.responseData=e.data.data,this.loading=!1})}}},DV={class:"col-sm-12"},SV={key:1},$V={class:"row"},FV={class:"col-md-12"},MV={class:"table-responsive"},TV={class:"table table-bordered"},EV={class:"thead-light"},LV={key:0},IV=["innerHTML"],AV={key:0,class:"row"},qV={class:"col-sm-12"};function PV(e,t,a,r,o,n){const u=c("custom-loader"),m=c("faveo-box"),p=c("data-table");return i(),l("div",DV,[o.loading?(i(),D(u,{key:0,"animation-duration":4e3,size:60})):(i(),l("div",SV,[d(m,{title:e.trans("user_import")},{default:k(()=>[s("div",$V,[s("div",FV,[s("div",MV,[s("table",TV,[s("thead",EV,[s("tr",null,[s("th",null,h(e.trans("name")),1),s("th",null,h(e.trans("type")),1),s("th",null,h(e.trans("status")),1),s("th",null,h(e.trans("ended_at")),1),s("th",null,h(e.trans("created")),1),s("th",null,h(e.trans("updated")),1),s("th",null,h(e.trans("totalFailed_label")),1),o.url?(i(),l("th",LV,h(e.lang("sd_import_result_action_label")),1)):f("",!0)])]),s("tbody",null,[s("tr",null,[s("td",null,h(o.responseData.import_name),1),s("td",null,h(o.responseData.type),1),s("td",null,h(o.responseData.is_complete),1),s("td",null,h(o.responseData.ended_at),1),s("td",null,h(o.responseData.totalCreated),1),s("td",null,h(o.responseData.totalUpdated),1),s("td",null,h(o.responseData.totalFailed),1),o.url?(i(),l("td",{key:0,innerHTML:n.getUrlAttribute},null,8,IV)):f("",!0)])])])])])])]),_:1},8,["title"]),n.showFailedRows?(i(),l("div",AV,[s("div",qV,[d(m,{title:e.trans("user_import_tracking_view_failed_box_label")},{default:k(()=>[d(p,{url:n.failedRowsUrl,dataColumns:["row","field","comment"],option:o.dataTableOptions},null,8,["url","option"])]),_:1},8,["title"])])])):f("",!0)]))])}const VV=T(CV,[["render",PV]]);const OV={name:"DriverSettingsName",description:"drivers name column table component",props:{data:{type:Object,required:!0}}},NV=e=>(ee("data-v-6b7b8308"),e=e(),te(),e),xV=["href"],UV=NV(()=>s("i",{class:"fas fa-question-circle"},null,-1)),RV=[UV];function jV(e,t,a,r,o,n){const u=P("tooltip");return i(),l("span",null,[s("span",null,h(a.data.name),1),F("   "),a.data.tooltip_message?S((i(),l("a",{key:0,class:x(a.data.document_link===null?"drivers-alert":""),href:a.data.document_link,target:"_blank"},RV,10,xV)),[[u,a.data.tooltip_message]]):f("",!0)])}const BV=T(OV,[["render",jV],["__scopeId","data-v-6b7b8308"]]),HV={name:"DriverSettingsActivateModal",description:"drivers table action modal component",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,L.post("api/post/search-driver",{driver:this.driver.key,status:1}).then(e=>{window.emitter.emit("DriversIndexrefreshData"),N(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,I(e,"dataTableModal"),this.onClose()})}}},zV={class:"modal-title"},WV={key:0},GV={key:1,class:"row"},YV=["disabled"],KV=s("i",{class:"fas fa-check"},null,-1);function JV(e,t,a,r,o,n){const u=c("reuse-loader"),m=c("modal");return a.showModal?(i(),D(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:o.containerStyle},{title:k(()=>[s("h4",zV,h(e.trans("activate")),1)]),fields:k(()=>[o.loading?f("",!0):(i(),l("div",WV,[s("span",null,h(e.trans("are_you_sure")),1)])),o.loading?(i(),l("div",GV,[d(u,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>n.onSubmit&&n.onSubmit(...p)),class:"btn btn-primary",disabled:o.isDisabled},[KV,F(" "+h(e.trans("activate")),1)],8,YV)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const QV=T(HV,[["render",JV]]);const XV={name:"DriversSettingsActions",description:"drivers table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToDriverSettings(){this.$router.push(`/search-driver/settings/${this.data.id}`)}},components:{"driver-settings-activate-modal":QV}},Is=e=>(ee("data-v-5a819f05"),e=e(),te(),e),ZV={key:0},eO={key:0},tO=["disabled"],aO=Is(()=>s("i",{class:"fas fa-check-circle"},null,-1)),sO=[aO],oO={key:1},nO=Is(()=>s("i",{class:"fas fa-cog"},null,-1)),iO=[nO];function lO(e,t,a,r,o,n){const u=c("driver-settings-activate-modal"),m=P("tooltip");return a.data?(i(),l("div",ZV,[a.data.is_configurable===0?S((i(),l("span",eO,[s("button",{class:"btn btn-default table_btn driver_btn",onClick:t[0]||(t[0]=p=>o.showModal=!0),disabled:a.data.status},sO,8,tO)])),[[m,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.is_configurable===1?S((i(),l("span",oO,[s("button",{class:"btn btn-default table_btn driver_btn",onClick:t[1]||(t[1]=(...p)=>n.redirectToDriverSettings&&n.redirectToDriverSettings(...p))},iO)])),[[m,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),d(ye,{name:"modal"},{default:k(()=>[o.showModal?(i(),D(u,{key:0,onClose:n.onClose,showModal:o.showModal,driver:a.data},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const rO=T(XV,[["render",lO],["__scopeId","data-v-5a819f05"]]);const dO={name:"DriversIndex",description:"drivers table component",data(){return{columns:["name","status","action"],options:{},apiUrl:"api/get/search-driver",activated:""}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{name:"driver-name",status:"driver-status",action:"driver-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(BV,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(rO,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.data.find(({status:a})=>a),{data:t.data.data,count:t.data.total}}}}},cO={class:"col-sm-12"},uO={class:"card card-light"},hO={class:"card-header"},_O={class:"card-title"},mO={class:"card-body",id:"drivers_index"};function pO(e,t,a,r,o,n){const u=c("alert"),m=c("data-table");return i(),l("div",cO,[d(u,{componentName:"dataTableModal"}),s("div",uO,[s("div",hO,[s("h3",_O,h(e.trans("search-drivers")),1)]),s("div",mO,[d(m,{url:o.apiUrl,dataColumns:o.columns,option:o.options,scroll_to:"drivers_index",componentTitle:"DriversIndex"},null,8,["url","dataColumns","option"])])])])}const fO=T(dO,[["render",pO]]),gO={name:"drivers-settings",description:"drivers settings configuration component",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driverId:"",fields:[],driverName:""}},beforeMount(){this.driverId=De(window.location.pathname),this.getData()},methods:{getData(){this.loading=!0,L.get("/api/get/search-driver-details/"+this.driverId).then(e=>{this.fields=e.data.data.formDetails,this.driverName=e.data.data.driverName,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,this.fields=[],I(e,"driver_settings")})},onSubmit(){const e={};this.fields.forEach(t=>{e[t.key]=t.value}),e.driver=this.driverName,e.status=1,this.pageLoad=!0,L.post("api/post/search-driver",e).then(t=>{this.pageLoad=!1,N(t,"driver_settings"),setTimeout(()=>this.$router.push({name:"Drivers Index"}),3e3),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.pageLoad=!1,I(t,"driver_settings")})}},components:{"form-field-template":St}},vO={class:"col-sm-12"},bO={class:"card card-light"},yO={class:"card-header"},kO={class:"card-title"},wO={class:"card-body"},CO={key:0,class:"row"},DO={key:1,class:"row"},SO=["placeholder","name","onUpdate:modelValue"],$O={key:0,class:"card-footer"},FO=["disabled"],MO=s("i",{class:"fas fa-save"},null,-1);function TO(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("form-field-template");return i(),l("div",vO,[d(u,{componentName:"driver_settings"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",bO,[s("div",yO,[s("h3",kO,h(e.trans(o.driverName)),1)]),s("div",wO,[!o.hasDataPopulated||o.loading?(i(),l("div",CO,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?(i(),l("div",DO,[(i(!0),l(A,null,G(o.fields,(v,b)=>(i(),D(g,{label:e.trans(v.key),name:v.key,classname:"col-sm-6",required:!0},{default:k(()=>[S(s("input",{class:"form-control",placeholder:v.placeholder,name:v.key,type:"text","onUpdate:modelValue":y=>v.value=y},null,8,SO),[[Fe,v.value]])]),_:2},1032,["label","name"]))),256))])):f("",!0)]),o.hasDataPopulated?(i(),l("div",$O,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...v)=>n.onSubmit&&n.onSubmit(...v)),disabled:o.pageLoad},[MO,F(" "+h(e.trans("save")),1)],8,FO)])):f("",!0)])])}const EO=T(gO,[["render",TO]]),LO={name:"SocketDriverRedis",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",connection:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Ts(this.$data);return t},getData(){this.loading=!0,L.get("api/get/socket-driver/redis").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"SocketDriverRedis")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onSubmit(){this.isValid()&&(this.pageLoad=!0,L.post("api/post/socket-driver",{default:this.driver,connection_redis:this.connection}).then(e=>{this.pageLoad=!1,N(e,"SocketDriverRedis"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(e=>{this.pageLoad=!1,I(e,"SocketDriverRedis")}))},onChange(e,t){this[t]=e}},components:{"text-field":oe}},IO={class:"col-sm-12"},AO={class:"card card-light"},qO={class:"card-header"},PO={class:"card-title"},VO={class:"card-body"},OO={key:0,class:"row"},NO={key:1,class:"row"},xO={key:0,class:"card-footer"},UO=["disabled"],RO=s("i",{class:"fas fa-save"},null,-1);function jO(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",IO,[d(u,{componentName:"SocketDriverRedis"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",AO,[s("div",qO,[s("h3",PO,h(e.trans("redis")),1)]),s("div",VO,[!o.hasDataPopulated||o.loading?(i(),l("div",OO,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",NO,[d(g,{label:e.trans("connection"),name:"connection",value:o.connection,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"default",hint:e.trans("redis_info")},null,8,["label","value","onChange","hint"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",xO,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[RO,F(" "+h(e.trans("save")),1)],8,UO)])):f("",!0)])])}const BO=T(LO,[["render",jO]]),HO={name:"SocketDriversAbly",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,key:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Es(this.$data);return t},getData(){this.loading=!0,L.get("api/get/socket-driver/ably").then(e=>{this.driver=e.data.data.driver,this.fillFieldsInfo(e.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"SocketDriversAbly")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.default=this.driver,e.ably_key=this.key,L.post("api/post/socket-driver",e).then(t=>{this.pageLoad=!1,N(t,"SocketDriversAbly"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(t=>{this.pageLoad=!1,I(t,"SocketDriversAbly")})}},onChange(e,t){this[t]=e}},components:{"text-field":oe}},zO={class:"col-sm-12"},WO={class:"card card-light"},GO={class:"card-header"},YO={class:"card-title"},KO={class:"card-body"},JO={key:0,class:"row"},QO={key:1,class:"row"},XO={key:0,class:"card-footer"},ZO=["disabled"],eN=s("i",{class:"fas fa-save"},null,-1);function tN(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",zO,[d(u,{componentName:"SocketDriversAbly"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",WO,[s("div",GO,[s("h3",YO,h(e.trans("Ably")),1)]),s("div",KO,[!o.hasDataPopulated||o.loading?(i(),l("div",JO,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",QO,[d(g,{id:"key",label:e.trans("ably_key"),type:"text",name:"key",value:o.key,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"id",hint:e.trans("ably_key_info")},null,8,["label","value","onChange","hint"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",XO,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[eN,F(" "+h(e.trans("save")),1)],8,ZO)])):f("",!0)])])}const aN=T(HO,[["render",tN]]);function sN(e){let{websocket_server_host:t,websocket_server_port:a,pusher_app_id:r,pusher_app_key:o,pusher_app_secret:n,pusher_app_cluster:u}=e,m={websocket_server_host:[t,"isRequired"],websocket_server_port:[a,"isRequired"],pusher_app_id:[r,"isRequired"],pusher_app_key:[o,"isRequired"],pusher_app_secret:[n,"isRequired"],pusher_app_cluster:[u,"isRequired"]};const p=new he(O),{errors:g,isValid:v}=p.validate(m);return de.dispatch("setValidationError",g),{errors:g,isValid:v}}const oN={name:"SocketDriversPusher",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",websocket_server_host:"",websocket_server_port:"",pusher_app_id:"",pusher_app_key:"",pusher_app_secret:"",pusher_app_cluster:"",ssl_crt_path:"",ssl_prvt_key:"",ssl_passphrase:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=sN(this.$data);return t},getData(){this.loading=!0,L.get("api/get/socket-driver/pusher").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,I(e,"pusher")})},fillFieldsInfo(e){const{driver:t,websocket_server_host:a,websocket_server_port:r,pusher_app_id:o,pusher_app_key:n,pusher_app_secret:u,pusher_app_cluster:m,ssl_crt_path:p,ssl_prvt_key:g,ssl_passphrase:v}=e;this.driver=t,this.websocket_server_host=a,this.websocket_server_port=r,this.pusher_app_id=o,this.pusher_app_key=n,this.pusher_app_secret=u,this.pusher_app_cluster=m,this.ssl_crt_path=p,this.ssl_prvt_key=g,this.ssl_passphrase=v},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={default:this.driver,websocket_server_host:this.websocket_server_host,websocket_server_port:this.websocket_server_port,pusher_app_id:this.pusher_app_id,pusher_app_key:this.pusher_app_key,pusher_app_secret:this.pusher_app_secret,pusher_app_cluster:this.pusher_app_cluster,ssl_crt_path:this.ssl_crt_path,ssl_prvt_key:this.ssl_prvt_key,scheme:"https"},t={ssl_passphrase:this.ssl_passphrase};for(const[a,r]of Object.entries(t))r!==""&&(e[a]=r);L.post("api/post/socket-driver",e).then(a=>{this.pageLoad=!1,N(a,"pusher"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(a=>{this.pageLoad=!1,I(a,"pusher")})}},onChange(e,t){console.log(`Changing ${t} to ${e}`),this[t]=e,console.log(this[t])}},components:{"text-field":oe}},nN={class:"col-sm-12"},iN={class:"card card-light"},lN={class:"card-header"},rN={class:"card-title"},dN={class:"card-body"},cN={key:0,class:"row"},uN={key:1,class:"row"},hN={key:0,class:"card-footer"},_N=["disabled"],mN=s("i",{class:"fas fa-save"},null,-1);function pN(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=P("focus-first-input");return i(),l("div",nN,[d(u,{componentName:"pusher"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",iN,[s("div",lN,[s("h3",rN,h(e.trans("Pusher")),1)]),s("div",dN,[!o.hasDataPopulated||o.loading?(i(),l("div",cN,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",uN,[d(g,{label:e.trans("websocket_server_host"),type:"text",name:"websocket_server_host",value:o.websocket_server_host,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"127.0.0.1",hint:e.trans("pusher_host")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("websocket_server_port"),type:"text",name:"websocket_server_port",value:o.websocket_server_port,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"",hint:e.trans("pusher_port")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("pusher_app_id"),type:"text",name:"pusher_app_id",value:o.pusher_app_id,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_id_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("pusher_app_key"),type:"text",name:"pusher_app_key",value:o.pusher_app_key,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_key_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("pusher_app_secret"),type:"text",name:"pusher_app_secret",value:o.pusher_app_secret,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_secret_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("pusher_app_cluster"),type:"text",name:"pusher_app_cluster",value:o.pusher_app_cluster,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_cluster_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("ssl_crt_path"),type:"text",name:"ssl_crt_path",value:o.ssl_crt_path,classname:"col-sm-6",onChange:n.onChange,placehold:"",hint:e.trans("ssl_crt_path_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("ssl_prvt_key"),type:"text",name:"ssl_prvt_key",value:o.ssl_prvt_key,classname:"col-sm-6",onChange:n.onChange,placehold:"",hint:e.trans("ssl_prvt_key_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.trans("ssl_passphrase"),type:"text",name:"ssl_passphrase",value:o.ssl_passphrase,classname:"col-sm-6",onChange:n.onChange,required:!1,placehold:"",hint:e.trans("ssl_passphrase_info")},null,8,["label","value","onChange","hint"])])),[[v]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",hN,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...b)=>n.onSubmit&&n.onSubmit(...b)),disabled:o.pageLoad},[mN,F(" "+h(e.trans("save")),1)],8,_N)])):f("",!0)])])}const fN=T(oN,[["render",pN]]);const gN={id:"tokens-index",class:"col-sm-12"},vN={class:"card-tools"},bN=s("i",{class:"glyphicon glyphicon-plus"},null,-1),yN="/get-api-applications",kN={__name:"TokensIndex",setup(e){const{basePath:t}=je.methods,a=ce(),r=q(["name","author","expiry_token","actions"]),o=q({});return Ie(()=>{o.value={headings:{name:O("name"),author:O("author"),expiry_token:O("expiration_date"),actions:O("actions")},columnsClasses:{name:"token-name",author:"token-author",expiry_token:"token-expiry",actions:"token-actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{actions:(n,u)=>ze(Se,{data:u}),author:(n,u)=>ze("a",{href:t()+"/panel/user/"+u.author.id},u.author.full_name),expiry_token:(n,u)=>u.expiry_token==="never"?"Never":a.getters.formattedTime(u.expiry_token)},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"scroll"},requestAdapter(n){return{"sort-field":n.orderBy?n.orderBy:"id","sort-order":n.ascending?"desc":"asc","search-query":n.query.trim(),page:n.page,limit:n.limit}},responseAdapter({data:n}){return{data:n.data.data.map(u=>(u.edit_url="/personal-access-token/"+u.id+"/edit",u.delete_url=t()+"/delete-api-application/"+u.id,u.deleteMessage="are_you_sure_you_want_to_delete",u)),count:n.data.total}}}}),(n,u)=>{const m=c("router-link"),p=P("tooltip");return i(),l("div",gN,[d(Ye,{"component-name":"dataTableModal"}),d(rt,{title:n.trans("lists_of_personal_access_tokens")},{customActions:k(()=>[s("div",vN,[S((i(),D(m,{class:"btn btn-tool pointer-cursor",to:"/personal-access-token/create"},{default:k(()=>[bN]),_:1})),[[p,n.trans("create_personal_access_token")]])])]),default:k(()=>[d(Mt,{url:yN,dataColumns:r.value,option:o.value,scroll_to:"tokens-index"},null,8,["dataColumns","option"])]),_:1},8,["title"])])}}};function wN(e){const{name:t,expiry:a,start_date:r,end_date:o}=e;let n={name:[t,"isRequired"],expiry:[a,"isRequired"]};e.expiry==="custom"&&(n.end_date=[o,"isRequired"]);const u=new he(O),{errors:m,isValid:p}=u.validate(n);return de.dispatch("setValidationError",m),{errors:m,isValid:p}}function CN(e){const{expiry:t,end_date:a}=e;let r={expiry:[t,"isRequired"]};e.expiry==="custom"&&(r.end_date=[a,"isRequired"]);const o=new he(O),{errors:n,isValid:u}=o.validate(r);return de.dispatch("setValidationError",n),{errors:n,isValid:u}}const DN=e=>(ee("data-v-57c418d2"),e=e(),te(),e),SN={class:"col-sm-12"},$N={key:0,class:"row"},FN={class:"row"},MN={key:0,class:"col-sm-4 mt-4"},TN={key:0,class:"re-token"},EN={class:"row mt-2"},LN={class:"col-sm-3"},IN={class:"form-group"},AN={class:"custom-control custom-radio"},qN={for:"full_access",class:"custom-control-label"},PN={class:"col-sm-3"},VN={class:"form-group"},ON={class:"custom-control custom-radio"},NN={for:"restricted-access",class:"custom-control-label"},xN={class:"card-tools"},UN={class:"form-check"},RN={class:"form-check-label",for:"select-all"},jN={class:"row"},BN={id:"permission-list-box"},HN={class:"card-footer justify-content-end"},zN={class:"modal-title"},WN={key:0,class:"row"},GN={key:1,class:"row"},YN=["disabled"],KN=DN(()=>s("i",{class:"fas fa-sync-alt"},null,-1)),JN={class:"modal-title"},QN={class:"row"},XN={class:"col-sm-12"},ZN={class:"input-group mb-3"},ex=["value"],tx=["disabled"],ax={__name:"TokenForm",setup(e){const t=Ke(),a=Ze(),r=ce(),o=q(!1),n=q(!1),u=q(!1);let m=q("");const p=q(!1),g=q(!1),v=q(!1);let b=q({name:"",expiry:"",end_date:"",full_access:1});const y=q(""),w=q(""),M=q([]);let C=new Date;const E=q(!1),R=q(!1),z=q(!1),J=q({width:"600px"}),we=q(!1);Ie(()=>{Te(),_e(),window.emitter.on("selected-permission-list",V=>{w.value=V.permissions,we.value=V.all_selected})});const _e=()=>{L.get("/get/application-expiry").then(V=>{m.value=V.data.data}).catch(V=>{I(V,"token-form")})},ue=()=>{u.value=!0,L.get("/get-api-application-id/"+t.params.id).then(V=>{y.value=V.data.data,b.value.name=y.value.name,b.value.expiry=y.value.expiry_id,b.value.expiry==="custom"&&(p.value=!0,b.value.end_date=y.value.end_date),b.value.full_access=y.value.full_access;let j=0,pe;y.value.permission.forEach(function(Ce,bt,Nt){j++,(Ce.key==="global_access"||Ce.key==="restricted_access")&&(pe=Ce.key),se(!0,Ce.key),j===Nt.length&&pe&&W(!0,pe)}),v.value=!!y.value.all_permission_selected,we.value=!!y.value.all_sd_permission_selected,Ue(y.value.permission),n.value=!0,u.value=!1}).catch(V=>{I(V,"token-form")})},Q=(V,j)=>{b.value[j]=V,j==="expiry"&&(V==="custom"?p.value=!0:(p.value=!1,b.value.end_date=""))},Te=()=>{L.get("api/dependency/permissions?limit=all",{}).then(V=>{M.value=bo(V.data.data),Ee(),t.name==="personal_access_token.edit"?(o.value=!0,ue()):(n.value=!0,u.value=!1)}).catch(V=>{I(V,"token-form")})},Ee=()=>{M.value.forEach(function(V){V.checked=!1,V.disabled=!1,V.title="",V.key==="global_access"?V.title="Restricted access will be disabled if global access is checked.":V.key==="restricted_access"?V.title="Global access will be disabled if restricted access is checked.":V.key==="edit_articles_created_by_others"&&(V.disabled=!0)})},Ue=V=>{window.emitter.emit("permission-list-box-mounted",{data:V,all_sd_permission_selected:we.value})},se=(V,j)=>{V||(v.value=!1),M.value.forEach(function(pe){if(pe.key===j){pe.checked=V;return}W(V,j)})},W=(V,j)=>{b.value.full_access||setTimeout(()=>{if(j==="global_access"||j==="restricted_access"){let pe=j==="global_access"?"restricted_access":"global_access";M.value.find(Ce=>Ce.key===j).checked&&M.value.find(Ce=>Ce.key===pe).checked&&(M.value.find(Ce=>Ce.key===pe).checked=!1,M.value.find(Ce=>Ce.key===pe).disabled=!0),document.getElementById(pe).checked=!1,document.getElementById(pe).disabled=V,document.getElementById("view_all_tickets").checked=!1,document.getElementById("view_all_tickets").disabled=V}else j==="access_kb"&&(M.value.find(pe=>pe.key==="access_kb").checked?document.getElementById("edit_articles_created_by_others").disabled=!1:(document.getElementById("edit_articles_created_by_others").disabled=!0,document.getElementById("edit_articles_created_by_others").checked=!1))},500)},X=()=>{const{errors:V,isValid:j}=wN(b.value);return j},Y=()=>{if(X()){u.value=!0;let V={};if(V.name=b.value.name,V.expiry=b.value.expiry,b.value.expiry==="custom"&&(V.end_date=kt(b.value.end_date).format("YYYY-MM-DD HH:mm:ss")),V.full_access=b.value.full_access,b.value.full_access?V.permission=[]:(V.permission=M.value.filter(j=>j.checked).map(j=>j.key),V.all_permission_selected=v.value,w.value&&(V.all_sd_permission_selected=we.value,V.permission=V.permission.concat(w.value))),t.name==="personal_access_token.edit"&&(V.id=t.params.id),!b.value.full_access&&!V.permission.length){u.value=!1,r.dispatch("setAlert",{type:"danger",message:"Permissions are required",component_name:"token-form"});return}L.post("/post-api-application",V).then(j=>{u.value=!1,j.data.data&&j.data.data.access_token?(ve.value=j.data.data.access_token,Z.value=!0,N(j,"token-modal-form")):N(j,"token-form")}).catch(j=>{I(j,"token-form"),u.value=!1})}},H=()=>{Xe(ve.value),g.value=!0,setTimeout(()=>{g.value=!1,Z.value=!1,t.name==="personal_access_token.edit"?ue():a.push({name:"personal_access_token.index"})},3e3)},ie=()=>{v.value?M.value.forEach(function(V){V.key!=="restricted_access"&&(V.checked=!0),W(!0,"global_access")}):Ee()},me=()=>{(!o.value||y.value&&!y.value.permission.length)&&(v.value=!1,Ee(),w.value="")},Ve=()=>{E.value=!1},qe=()=>{const{errors:V,isValid:j}=CN(b.value);return j},B=()=>{if(qe()){R.value=!0;let V={};if(V.expiry=b.value.expiry,b.value.expiry==="custom"&&(V.end_date=kt(b.value.end_date).format("YYYY-MM-DD HH:mm:ss")),V.full_access=b.value.full_access,b.value.full_access?V.permission=[]:(V.permission=M.value.filter(j=>j.checked).map(j=>j.key),V.all_permission_selected=v.value,w.value&&(V.all_sd_permission_selected=we.value,V.permission=V.permission.concat(w.value))),t.name==="personal_access_token.edit"&&(V.id=t.params.id),!b.value.full_access&&!V.permission.length){R.value=!1,r.dispatch("setAlert",{type:"danger",message:"Permissions are required",component_name:"token-form"}),Ve();return}L.post("application/regenerate-token",V).then(j=>{R.value=!1,Ve(),j.data.data&&j.data.data.access_token?(ve.value=j.data.data.access_token,Z.value=!0,N(j,"token-modal-form")):N(j,"token-form")}).catch(j=>{I(j,"token-form"),R.value=!1,Ve()})}},Z=q(!1),ve=q("");return(V,j)=>{const pe=P("focus-first-input");return i(),l("div",SN,[!n.value||u.value?(i(),l("div",$N,[d($t)])):f("",!0),d(Ye,{"component-name":"token-form"}),n.value?(i(),D(rt,{key:1,title:o.value?V.trans("edit"):V.trans("create")},{actions:k(()=>[s("div",HN,[s("button",{type:"button",class:"btn btn-primary",onClick:Y},[s("i",{class:x(o.value?"fas fa-sync-alt":"fas fa-save")},null,2),F(" "+h(o.value?V.trans("update"):V.trans("save")),1)])])]),default:k(()=>[S((i(),l("div",FN,[d(oe,{name:"name",value:ne(b).name,label:V.trans("application_name"),classname:o.value?"col-sm-4":"col-sm-6",onChange:Q,required:!0},null,8,["value","label","classname"]),o.value?(i(),l("div",MN,[o.value?(i(),l("span",TN,[F(h(V.trans("to-set-new-expiration-date-you-must"))+" ",1),s("a",{href:"javascript:;",onClick:j[0]||(j[0]=Ce=>E.value=!0)},h(V.trans("regenerate-the-token"))+".",1)])):f("",!0)])):f("",!0),o.value?f("",!0):(i(),l(A,{key:1},[d(xe,{label:V.trans("expiry_date"),elements:ne(m),name:"expiry",value:ne(b).expiry,classname:p.value?"col-sm-3":"col-sm-6",onChange:Q,required:!0},null,8,["label","elements","value","classname"]),p.value?(i(),D(Qe,{key:0,label:V.trans("end_date"),value:ne(b).end_date,required:!0,name:"end_date",type:"date",onChange:Q,format:"DD-MM-YYYY",classname:"col-sm-3","not-before":ne(C),exactDisabledDate:!0},null,8,["label","value","not-before"])):f("",!0)],64))])),[[pe]]),s("div",EN,[s("div",LN,[s("div",IN,[s("div",AN,[S(s("input",{"onUpdate:modelValue":j[1]||(j[1]=Ce=>ne(b).full_access=Ce),class:"custom-control-input custom-control-input-primary custom-control-input-outline",type:"radio",id:"full_access",value:1,name:"full_access",onChange:me},null,544),[[Bt,ne(b).full_access]]),s("label",qN,h(V.trans("full_access")),1)])])]),s("div",PN,[s("div",VN,[s("div",ON,[S(s("input",{"onUpdate:modelValue":j[2]||(j[2]=Ce=>ne(b).full_access=Ce),class:"custom-control-input custom-control-input-primary custom-control-input-outline",type:"radio",id:"restricted-access",value:0,name:"restricted-access",onChange:me},null,544),[[Bt,ne(b).full_access]]),s("label",NN,h(V.trans("restricted_access")),1)])])])]),ne(b).full_access?f("",!0):(i(),l(A,{key:0},[d(rt,{title:V.trans("access-permissions"),boxClass:"card-light"},{customActions:k(()=>[s("div",xN,[s("div",UN,[S(s("input",{type:"checkbox",class:"form-check-input",id:"select-all","onUpdate:modelValue":j[3]||(j[3]=Ce=>v.value=Ce),onChange:ie},null,544),[[$e,v.value]]),s("label",RN,h(V.trans("select_all")),1)])])]),default:k(()=>[s("div",jN,[(i(!0),l(A,null,G(M.value,Ce=>(i(),l("div",{class:"col-sm-4",id:"assign_groups",key:Ce.id},[d(et,{name:Ce.key,value:Ce.checked,disabled:Ce.disabled,label:Ce.key,title:Ce.name,onChange:se,id:Ce.key},null,8,["name","value","disabled","label","title","id"])]))),128))])]),_:1},8,["title"]),s("div",BN,h(Ue(y.value&&y.value.permission?y.value.permission:[])),1)],64))]),_:1},8,["title"])):f("",!0),E.value?(i(),D(Ge,{key:2,"show-modal":E.value,onClose:Ve,containerStyle:J.value},{title:k(()=>[s("h4",zN,h(V.trans("regenerate-token")),1)]),fields:k(()=>[R.value?f("",!0):(i(),l("div",WN,[d(xe,{label:V.trans("expiry_date"),elements:ne(m),name:"expiry",value:ne(b).expiry,classname:p.value?"col-sm-6":"col-sm-12",onChange:Q,required:!0},null,8,["label","elements","value","classname"]),p.value?(i(),D(Qe,{key:0,label:V.trans("end_date"),value:ne(b).end_date,required:!0,name:"end_date",type:"date",onChange:Q,format:"DD-MM-YYYY",classname:"col-sm-6","not-before":ne(C),exactDisabledDate:!0},null,8,["label","value","not-before"])):f("",!0)])),R.value?(i(),l("div",GN,[d(ot)])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:B,class:"btn btn-primary",disabled:z.value},[KN,F(" "+h(V.trans("update")),1)],8,YN)]),_:1},8,["show-modal","containerStyle"])):f("",!0),Z.value?(i(),D(Ge,{key:3,"show-modal":Z.value,showCloseBtn:!1,containerStyle:J.value},{title:k(()=>[s("h4",JN,h(V.trans("access_token")),1)]),alert:k(()=>[d(Ye,{"component-name":"token-modal-form"})]),fields:k(()=>[s("div",QN,[s("div",XN,[s("div",ZN,[s("input",{type:"password",class:"form-control",value:ve.value,disabled:""},null,8,ex)])])])]),controls:k(()=>[s("button",{type:"button",onClick:H,class:"btn btn-primary",disabled:g.value},[s("i",{class:x(g.value?"fas fa-check":"fa fa-clipboard")},null,2),F(" "+h(g.value?V.trans("clipboard-copy-message"):V.trans("copy")),1)],8,tx)]),_:1},8,["show-modal","containerStyle"])):f("",!0)])}}},Oa=T(ax,[["__scopeId","data-v-57c418d2"]]);function sx(e){let t={name:[e.name,"isRequired",{"isValidWithRegex(^[a-zA-Z0-9 ]*$)":O("ticket-category-validation-error-message")}]};const a=new he(O),{errors:r,isValid:o}=a.validate(t);return de.dispatch("setValidationError",r),{errors:r,isValid:o}}const ox={class:"form-table-actions"},nx=s("i",{class:"fas fa-edit"},null,-1),ix=s("i",{class:"fas fa-cog"},null,-1),lx=[ix],rx=s("i",{class:"far fa-clone"},null,-1),dx=[rx],cx=["disabled"],ux=s("i",{class:"fas fa-trash"},null,-1),hx=[ux],_x={__name:"FormTableActions",props:{data:{type:Object,required:!0},onUpdate:{type:Function,default:()=>{}},onClone:{type:Function,default:()=>{}}},setup(e){const t=ce(),a=e,r=q(!1),o=()=>{r.value=!a.data.is_default},n=()=>{r.value=!1,t.dispatch("unsetValidationError")},u=()=>{a.onUpdate(a.data)},m=()=>{a.onClone(a.data)};return(p,g)=>{const v=c("router-link"),b=P("tooltip");return i(),l("div",ox,[e.data.view_api?S((i(),D(v,{key:0,class:"btn btn-default table_btn",to:"/new/forms/"+e.data.category+"/"+e.data.id+"/edit"},{default:k(()=>[nx]),_:1},8,["to"])),[[b,p.trans("edit")]]):f("",!0),e.data.update_api?S((i(),l("button",{key:1,type:"button",class:"btn btn-default table_btn",onClick:u},lx)),[[b,p.trans("settings")]]):f("",!0),e.data.clone_api?S((i(),l("button",{key:2,type:"button",class:"btn btn-default table_btn",onClick:m},dx)),[[b,p.trans("clone")]]):f("",!0),S((i(),l("span",null,[e.data.delete_api?(i(),l("button",{key:0,class:"btn btn-default table_btn",onClick:o,disabled:e.data.is_default},hx,8,cx)):f("",!0)])),[[b,e.data.is_default?p.trans("default_field_is_not_deletable"):p.trans("delete")]]),d(ye,{name:"modal"},{default:k(()=>[r.value?(i(),D(ko,{key:0,onClose:n,showModal:r.value,deleteUrl:e.data.delete_api,alertComponentName:"form-builder-index","modal-message":"are_you_sure_you_want_to_delete",replace:!0,"replace-endpoint":"/from/forms/"+e.data.category+"?&ids[0]="+e.data.id,title:"assign_to_form"},null,8,["showModal","deleteUrl","replace-endpoint"])):f("",!0)]),_:1})])}}};const mx={class:"col-sm-12"},px={class:"card card-light"},fx={class:"card-header"},gx={class:"card-title"},vx={class:"card-tools"},bx=s("i",{class:"glyphicon glyphicon-plus"},null,-1),yx=[bx],kx={class:"card-body",id:"forms-list"},wx={class:"modal-title"},Cx={key:0,class:"row"},Dx={key:0,class:"form-check col-sm-12 ml-2 mb-3"},Sx={class:"form-check-label",for:"is_user_form"},$x={key:1,class:"row"},Fx=["disabled"],Mx={__name:"FormsIndex",setup(e){const t=ce(),a=Ke(),r=Ze(),o=q("/ticket/forms/"+a.params.type),n=q(["name","is_active","created_at","actions"]),u=q({}),m=q(!1);Ie(()=>{t.dispatch("updateCloneableFormData",""),u.value={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},columnsClasses:{title:"form-name",created_at:"form-created",is_active:"form-active",actions:"form-actions"},headings:{is_active:O("status")},texts:{filter:"",limit:""},sortable:["name","created_at","is_active"],filterable:["name","created_at","is_active"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(se){return{paginate:1,"sort-field":se.orderBy?se.orderBy:"id","sort-order":se.ascending?"asc":"desc","search-query":se.query.trim(),page:se.page,limit:se.limit}},responseAdapter({data:se}){return m.value=!!se.data.show_org,{data:se.data.data.map(W=>(W.edit_url="/new/forms/"+W.category+"/edit",W.componentTitle="dataTableTittle",W.alertComponentName="form-builder-index",W)),count:se.data.total}},templates:{name:(se,W)=>ze(jt,{to:"/new/forms/"+W.category+"/"+W.id+"/edit"},W.name),created_at:(se,W)=>t.getters.formattedTime(W.created_at),is_active:(se,W)=>{let X=ze("span",{style:"cursor:auto",class:W.is_active?"btn btn-success btn-xs":"btn btn-danger btn-xs"},W.is_active?"Active":"Inactive");return ze("a",{},[X])},actions:(se,W)=>ze(_x,{data:W,onUpdate:w,onClone:y})}}});const p=q(!1),g=q(""),v=q(!1),b=q(""),y=se=>{M.value=!0,C.name="Copy of "+se.name,C.is_user_form=se.is_user_form,v.value=!0,b.value=se},w=se=>{M.value=!0,C.name=se.name,C.organizations=se.organizations,C.is_user_form=se.is_user_form,p.value=!0,g.value=se},M=q(!1),C=Ws({name:"",organizations:[],is_user_form:!1}),E=q(!1),R=q(!1),z=function(se,W){C[W]=se},J=()=>{t.dispatch("unsetValidationError"),M.value=!1,C.name="",C.organizations=[],C.is_user_form=!1,R.value=!1,p.value=!1,g.value="",v.value=!1,b.value=""},we=()=>{const{errors:se,isValid:W}=sx(C);return W},_e=()=>{if(we()){E.value=!0,R.value=!0;let se={};se.name=C.name,p.value&&(se.id=g.value.id),v.value&&(se.id=b.value.id),C.organizations&&C.organizations.length&&(se.org_ids=C.organizations.map(X=>X.id)),Ue.value&&(se.is_user_form=C.is_user_form);let W=p.value?"/"+g.value.update_api:v.value?"/clone-forms":"/add/custom/form/"+a.params.type;L.post(W,se).then(X=>{E.value=!1,v.value||N(X,"form-builder-index"),p.value?window.emitter.emit("refreshData"):r.push({path:`/new/forms/${X.data.data.category}/${X.data.data.id}/edit`}),v.value&&t.dispatch("updateCloneableFormData",b.value),J()}).catch(X=>{E.value=!1,R.value=!1,I(X,"form-builder-index")})}},ue=ae(()=>p.value?"edit_form":v.value?"clone_form":"create_new_form_category"),Q=ae(()=>p.value?"update":v.value?"clone":"save"),Te=ae(()=>p.value?"fas fa-sync-alt":v.value?"far fa-clone":"fas fa-save"),Ee=ae(()=>m.value?!p.value&&!v.value?!0:v.value?!1:!!(p.value&&!g.value.is_default):!1),Ue=ae(()=>a.params.type==="ticket"?(console.log(b.value,"popUpForClone.value"),!p.value&&!v.value||v.value&&!b.value.is_default?!0:!!(p.value&&!g.value.is_default)):!1);return(se,W)=>{const X=P("tooltip"),Y=P("focus-first-input");return i(),l("div",mx,[d(Ye,{"component-name":"form-builder-index"}),s("div",px,[s("div",fx,[s("h3",gx,h(se.trans("list_of_form_categories")),1),s("div",vx,[S((i(),l("a",{href:"javascript:;",class:"btn-tool",onClick:W[0]||(W[0]=H=>M.value=!0)},yx)),[[X,se.trans("create_form")]])])]),s("div",kx,[d(Mt,{url:o.value,"data-columns":n.value,option:u.value,scroll_to:"forms-list"},null,8,["url","data-columns","option"])])]),M.value?(i(),D(Ge,{key:0,showModal:M.value,onClose:J},{title:k(()=>[s("h4",wx,h(se.trans(ue.value)),1)]),fields:k(()=>[E.value?f("",!0):S((i(),l("div",Cx,[d(oe,{label:se.trans("name"),value:C.name,type:"text",name:"name",hint:se.trans("ticket-form-info"),onChange:z,required:!0,classname:"col-sm-12",onKeyup:W[1]||(W[1]=ct(H=>_e(),["enter"]))},null,8,["label","value","hint"]),Ue.value?(i(),l("div",Dx,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":W[2]||(W[2]=H=>C.is_user_form=H),id:"is_user_form"},null,512),[[$e,C.is_user_form]]),s("label",Sx,h(se.trans("enable_user_form")),1)])):f("",!0),Ee.value&&C.is_user_form?(i(),D(Me,{key:1,label:se.trans("organizations"),multiple:!0,name:"organizations",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations",value:C.organizations,onChange:z},null,8,["label","value"])):f("",!0)])),[[Y]]),E.value?(i(),l("div",$x,[d(ot)])):f("",!0)]),controls:k(()=>[s("button",{type:"button",onClick:W[3]||(W[3]=H=>_e()),class:"btn btn-primary",disabled:R.value},[s("i",{class:x(Te.value),"aria-hidden":"true"},null,2),F(" "+h(se.trans(Q.value)),1)],8,Fx)]),_:1},8,["showModal"])):f("",!0)])}}};const Tx=e=>(ee("data-v-209a18e3"),e=e(),te(),e),Ex={class:"menu mt-3"},Lx={key:0,class:"overlay"},Ix={key:1,class:"info-box-icon menu-icon"},Ax={class:"info-box-content"},qx={class:"info-box-text"},Px={class:"badge badge-count"},Vx={key:0,class:"overlay"},Ox={class:"info-box-content"},Nx={class:"info-box-text"},xx={class:"badge badge-count"},Ux={key:1,class:"text-center"},Rx={class:"info-box-content"},jx={class:"info-box-text"},Bx={key:1,class:"search-container"},Hx=Tx(()=>s("i",{class:"fas fa-search text-muted"},null,-1)),zx=["innerHTML"],Wx={class:"text-capitalize"},Gx={class:"badge badge-count mb-1"},Yx={key:0,class:"overlay"},Kx={class:"info-box-content text-center"},Jx={class:"info-box-text"},Qx={key:3},Xx={__name:"Menu",props:{type:{type:String,default:"fields"},from:{type:String,default:""},isDefaultForm:{type:Boolean,default:!1}},setup(e){const t=ce();Ze();const a=Ke(),r=e,o=t.getters.getFormMenus;t.getters.getFormCategoryType;const n=q(window.innerWidth);window.addEventListener("resize",()=>{n.value=window.innerWidth});const u=ae(()=>o.filter(Y=>Y.data_type==="section")),m=ae(()=>o.filter(Y=>Y.data_type!=="section")),p=Y=>{let H=JSON.parse(JSON.stringify(Y));const ie=g();return H.data_type==="group"?H.groupid=ie:H.id=ie,H.form_identifier=ie,H},g=()=>new Date().getTime(),v=q(""),b=q(!1),y=q([]);let w=1;const M=q(!1);let C=!0;const E=q([]),R=q(!1),z=()=>{if(r.isDefaultForm)return;let Y={id:a.params.id};R.value=!0,L.get("/default/form-fields/"+a.params.type+"?time="+Date.now(),{params:Y}).then(H=>{E.value=H.data.data}).catch(H=>{console.error("Error in getting default fields list ",H)}).finally(()=>{R.value=!1})},J=()=>{R.value=!0,E.value=[],setTimeout(()=>{z()},1e3)},we=async()=>{try{b.value=!0;const Y=await L.get(`/get/shared-fields/ticket?page=${w}`,{params:{id:a.params.id}});Y.data.data.length>0?(y.value=[...y.value,...Y.data.data],w++):C=!1}catch(Y){console.error("Error fetching data:",Y)}finally{b.value=!1}};r.type==="shared_fields"&&we(),r.type==="default_fields"&&z();const _e=ae(()=>y.value.filter(Y=>Y.label.toLowerCase().includes(v.value.toLowerCase()))),ue=ae(()=>_e.value.reduce((Y,H)=>(Y[H.data_type]||(Y[H.data_type]=[]),Y[H.data_type].push(H),Y),{})),Q=()=>{const Y=document.getElementById("card-container"),H=Y.scrollHeight,ie=Y.scrollTop,me=Y.clientHeight;ie+me>=H-100&&!M.value&&C&&we()},Te=Y=>Y==="section"?{name:"faveo-form-sections",pull:"clone",put:!1}:{name:"faveo-form-builder",pull:"clone",put:!1};function Ee(Y){if(Y.to!=Y.from){let H=o.find(ie=>ie.id===Y.item.__draggable_context.element.id);H&&(H.count-=1,window.emitter.emit("formBuilderModified"))}}function Ue(Y){let H=o.find(ie=>ie.id===Y.id);H&&(H.count-=1,window.emitter.emit("formBuilderModified"))}const se=Y=>{let H=y.value.find(ie=>ie.data_type===Y.type);H&&(y.value.filter(ie=>ie.data_type===H.data_type).forEach(ie=>{ie.count+=1,ie.count&&(ie.disabled=!1)}),Y.from==="local"&&window.emitter.emit("formBuilderModified"))},W=Y=>{if(r.type==="shared_fields"){se(Y);return}let H=o.find(ie=>ie.data_type===Y.type);H&&(H.count+=1,Y.from==="local"&&window.emitter.emit("formBuilderModified"))};function X(Y){if(Y.to!=Y.from){let H=y.value.find(ie=>ie.identifier===Y.item.__draggable_context.element.identifier);H&&y.value.filter(ie=>ie.data_type===H.data_type).forEach(ie=>{ie.count-=1,ie.count||(ie.disabled=!0)}),window.emitter.emit("formBuilderModified")}}return window.emitter.on("removeElementFromDB",J),window.emitter.on("updateMenuCount",W),window.emitter.on("updateMenuOnChildSelect",Ue),(Y,H)=>{const ie=P("tooltip");return i(),l("div",Ex,[e.type==="fields"?(i(),D(ne(He),{key:0,class:"form__menulist row",list:m.value,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:p,itemKey:"id",sort:!1,onEnd:Ee},{item:k(({element:me,index:Ve})=>[s("div",{class:x([n.value<1220?"col-sm-12":"col-sm-6",me.count?"":"pe-none"])},[S((i(),l("div",{class:"info-box menu-info-box bg-light",key:me.id},[me.count?f("",!0):(i(),l("div",Lx)),me.icon_class?(i(),l("span",Ix,[s("i",{class:x(["fas",me.icon_class])},null,2)])):f("",!0),s("div",Ax,[s("span",qx,[F(h(me.title)+"  ",1),s("small",Px,h(me.count?me.count:0),1)])])])),[[ie,me.title]])],2)]),_:1},8,["list"])):f("",!0),e.type==="fields"&&!e.from?(i(),D(ne(He),{key:1,class:"form__menulist row",list:u.value,group:{name:"faveo-form-sections",pull:"clone",put:!1},clone:p,itemKey:"id",onEnd:Ee},{item:k(({element:me,index:Ve})=>[s("div",{class:x(["col-sm-12 text-center",me.count?"":"pe-none"])},[S((i(),l("div",{class:"info-box menu-info-box bg-light",key:me.id},[me.count?f("",!0):(i(),l("div",Vx)),s("div",Ox,[s("span",Nx,[F(h(me.title)+"  ",1),s("small",xx,h(me.count?me.count:0),1)])])])),[[ie,me.title]])],2)]),_:1},8,["list"])):f("",!0),e.type==="default_fields"?(i(),l(A,{key:2},[R.value?(i(),D(ot,{key:0})):f("",!0),!R.value&&!E.value.length?(i(),l("p",Ux,h(Y.trans("no-records")),1)):f("",!0),R.value?f("",!0):(i(),D(ne(He),{key:2,class:"form__menulist row",list:E.value,group:{name:"faveo-form-builder",put:!1},clone:p,itemKey:"id",sort:!1},{item:k(({element:me,index:Ve})=>[s("div",{class:x(n.value<1220?"col-sm-12":"col-sm-6")},[S((i(),l("div",{class:"info-box menu-info-box bg-light",key:me.id},[s("div",Rx,[s("span",jx,h(me.label),1)])])),[[ie,me.name]])],2)]),_:1},8,["list"]))],64)):f("",!0),e.type==="shared_fields"?(i(),l(A,{key:3},[b.value?(i(),D(ot,{key:0})):f("",!0),!b.value&&y.value.length?(i(),l("div",Bx,[S(s("input",{type:"text",placeholder:"Search...",class:"form-control","onUpdate:modelValue":H[0]||(H[0]=me=>v.value=me)},null,512),[[Fe,v.value]]),Hx])):f("",!0),!b.value&&!_e.value.length?(i(),l("p",{key:2,class:"text-center pt-2",innerHTML:Y.trans("create_ticket_fields")},null,8,zx)):f("",!0),s("div",{id:"card-container",class:"card-container mt-3",ref:"cardContainer",onScroll:Q},[(i(!0),l(A,null,G(ue.value,(me,Ve)=>(i(),l("div",{key:Ve,class:"group-card"},[s("span",Wx,[s("b",null,h(Ve),1),F("  "),s("small",Gx,h(me[0].count),1)]),d(ne(He),{class:"form__menulist row",list:me,group:Te(Ve),clone:p,itemKey:"id",sort:!1,onEnd:X},{item:k(({element:qe,index:B})=>[s("div",{class:x(["col-sm-12",qe.count?"":"pe-none"])},[S((i(),l("div",{class:"info-box share-menu-info-box bg-light",key:qe.id},[qe.count?f("",!0):(i(),l("div",Yx)),s("div",Kx,[s("span",Jx,h(qe.label?qe.label:qe.title),1)])])),[[ie,qe.name]])],2)]),_:2},1032,["list","group"])]))),128))],544),M.value?(i(),l("div",Qx,"Loading...")):f("",!0)],64)):f("",!0)])}}},As=T(Xx,[["__scopeId","data-v-209a18e3"]]);const Zx=["src"],eU=["name"],tU={class:"error-block is-danger"},aU={__name:"FormElementLabel",props:{elementData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1},isSection:{type:Boolean,default:!1},auth:{type:Object,default:()=>{}},labelFieldClass:{type:String,default:""}},setup(e){const{basePathVersion:t}=je.methods,a=e,r=q("/themes/default/client/images/enterarrow.png"),o=ae(()=>a.elementData.key+"_"+a.elementData.id),n=()=>{},u=q("");Ie(()=>{u.value=a.auth&&a.auth.user_data&&a.auth.user_data.user_language?a.auth.user_data.user_language:"en"});const m=p=>p.findIndex(g=>g.language===u.value)===-1?0:p.findIndex(g=>g.language===u.value);return(p,g)=>{const v=c("ValidationProvider"),b=P("tooltip");return i(),l("div",{class:x(e.isSection?"card-title card-form-label":"form-field-label")},[e.isChild?(i(),l("img",{key:0,id:"enter-arrow",width:"16",height:"16",src:ne(t)()+r.value,alt:""},null,8,Zx)):f("",!0),d(v,{name:o.value,rules:"required",modelValue:e.elementData.labels[m(e.elementData.labels)].label,"onUpdate:modelValue":g[2]||(g[2]=y=>e.elementData.labels[m(e.elementData.labels)].label=y),modelModifiers:{trim:!0}},{default:k(({field:y,errorMessage:w,meta:M,classes:C})=>[S(s("input",{type:"text",name:o.value,"onUpdate:modelValue":g[0]||(g[0]=E=>e.elementData.labels[m(e.elementData.labels)].label=E),class:x(w?"field-danger "+e.labelFieldClass:""+e.labelFieldClass),onKeyup:g[1]||(g[1]=ct(E=>n(),["enter"]))},null,42,eU),[[Fe,e.elementData.labels[m(e.elementData.labels)].label,void 0,{trim:!0}],[b,e.elementData.labels[m(e.elementData.labels)].label.length>25?e.elementData.labels[m(e.elementData.labels)].label:""]]),s("div",{class:x(e.isChild?"ml_28":"ml_13")},[S(s("small",null,[s("span",tU,h(w),1)],512),[[We,w]])],2)]),_:1},8,["name","modelValue"])],2)}}},it=T(aU,[["__scopeId","data-v-fe44bd6b"]]);const vt=e=>(ee("data-v-7f74f916"),e=e(),te(),e),sU={key:0,class:"btn-group"},oU={type:"button",class:"btn btn-tool dropdown-toggle","data-toggle":"dropdown","data-offset":"-52","aria-expanded":"false"},nU=vt(()=>s("i",{class:"fas fa-cog"},null,-1)),iU=[nU],lU={class:"dropdown-menu",role:"menu"},rU=vt(()=>s("i",{class:"fas fa-pencil-alt text-gray text-md","aria-hidden":"true"},null,-1)),dU=[rU],cU=vt(()=>s("i",{class:"fas fa-cog text-gray text-md","aria-hidden":"true"},null,-1)),uU=[cU],hU={key:1,class:"dropdown btn btn-sm form_elem_btn","data-toggle":"dropdown"},_U=vt(()=>s("i",{class:"fas fa-plus text-md","aria-hidden":"true"},null,-1)),mU=[_U],pU={class:"dropdown-menu form-drop",role:"menu","aria-labelledby":"dropdownMenu"},fU=["onClick"],gU={class:"nav-link text-dark",href:"javascript:void(0);"},vU=vt(()=>s("i",{class:"far fa-trash-alt text-md","aria-hidden":"true"},null,-1)),bU=[vU],yU={__name:"FormElementActions",props:{elementData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!1},onColumnClick:{type:Function,required:!1},selectedOption:{type:[String,Object],required:!1},isSection:{type:Boolean,default:!1}},setup(e){const t=ce(),a=Ze(),r=ae(()=>t.getters.getFormMenus),o=ae(()=>t.getters.getFormCategoryType),n=e,u=y=>{let w=["requester","status_id","priority_id","location_id","asset_type_id","product_id","source_id","help_topic_id","department_id","team_id","type_id","assigned_id","asset_ids"];return o.value==="change"&&(w=w.filter(M=>M!=="status_id"&&M!=="priority_id")),w.includes(y.unique)},m=y=>{const M={requester:"panel/user/list",status_id:o.value==="asset"?"Asset Status":"Status",priority_id:"Ticket Priority",location_id:"Locations",source_id:"Source",help_topic_id:"Helptopic",department_id:"Departments",team_id:"Teams",type_id:"Ticket Types",assigned_id:"Agents",asset_type_id:"Asset Type",product_id:"Products",asset_ids:"panel/service-desk/assets"}[y.unique];M&&(y.unique==="requester"||y.unique==="asset_ids"?window.location.href=M:a.push({name:M}))},p=y=>{window.emitter.emit("updateColumnSize",y),n.onColumnClick(y,n.elementData)},g=()=>{window.emitter.emit("onRemoveElement",{fieldData:n.elementData,reference_id:n.elementData.reference_id,reference_type:n.elementData.reference_type})},v=()=>o.value!=="ticket"&&o.value!=="requester"&&n.elementData.label==="Department"?!1:typeof n.selectedOption!="string"&&re(n.selectedOption)&&!n.selectedOption.hasOwnProperty("extraKey"),b=(y,w,M)=>{n.onChildClick(w,M),window.emitter.emit("updateMenuOnChildSelect",y)};return(y,w)=>{const M=P("tooltip");return i(),l("div",{class:x(e.isSection?"card-tools":"btn-group")},[e.isSection?(i(),l("div",sU,[S((i(),l("button",oU,iU)),[[M,y.trans("settings")]]),s("div",lU,[s("a",{onClick:w[0]||(w[0]=C=>p("single",e.elementData)),href:"javascript:;",class:"dropdown-item"},h(y.trans("single-column")),1),s("a",{onClick:w[1]||(w[1]=C=>p("double",e.elementData)),href:"javascript:;",class:"dropdown-item"},h(y.trans("double-column")),1),s("a",{href:"javascript:;",class:"dropdown-item",onClick:w[2]||(w[2]=C=>e.onEditFormField(e.elementData))},h(y.trans("edit")),1),e.elementData.is_deletable?(i(),l("a",{key:0,class:"dropdown-item text-danger",onClick:w[3]||(w[3]=C=>g()),href:"javascript:;"},h(y.trans("delete")),1)):f("",!0)])])):(i(),l(A,{key:1},[u(e.elementData)?S((i(),l("span",{key:0,class:"btn btn-sm form_elem_btn",onClick:w[4]||(w[4]=C=>m(e.elementData))},dU)),[[M,y.trans("edit")]]):f("",!0),S((i(),l("span",{class:"btn btn-sm form_elem_btn",onClick:w[5]||(w[5]=C=>e.onEditFormField(e.elementData))},uU)),[[M,y.trans("settings")]]),v()?(i(),l("span",hU,[S((i(),l("span",null,mU)),[[M,y.trans("add_child")]]),s("ul",pU,[(i(!0),l(A,null,G(r.value.filter(C=>C.data_type!=="section"),(C,E)=>(i(),l("li",{key:C.id,onClick:R=>b(C,E,e.selectedOption),class:"nav-item"},[s("a",gU,h(C.title),1)],8,fU))),128))])])):f("",!0),e.elementData.is_deletable?S((i(),l("span",{key:2,class:"btn btn-sm form_elem_btn",onClick:w[6]||(w[6]=C=>g())},bU)),[[M,y.trans("delete")]]):f("",!0)],64))],2)}}},tt=T(yU,[["__scopeId","data-v-7f74f916"]]);const kU={class:"row form-field"},wU={class:"col-md-4 mt_5 drag-handle"},CU={class:"col-sm-5 drag-handle"},DU=["id","placeholder"],SU=["id","placeholder"],$U={class:"col-sm-3 mt_3"},FU={__name:"FESimpleFields",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=q(""),r=ae(()=>{let u;switch(t.fieldData.labels[0].place_holder?u=t.fieldData.labels[0].place_holder:t.fieldData.data_type==="number"?u="integer":t.fieldData.data_type==="decimal"?u="decimal_number":t.fieldData.data_type==="date"?u="date":u="short_text",t.fieldData.title){case"Attachments":u="attach files";break;case"Asset Image":u="asset_image";break;case"Api":u="api_endpoint";break}return["email"].includes(t.fieldData.data_type)?u="email@example.com":["textarea","htmltextarea"].includes(t.fieldData.data_type)&&(u="long_text"),u}),o=u=>{a.value=u.id},n=()=>["text","number","decimal","date","email","file","image","taggable"].indexOf(t.fieldData.data_type)>-1;return(u,m)=>(i(),l("div",{class:"item-group form-field-element pr-2",onMouseenter:m[0]||(m[0]=p=>o(e.fieldData)),onMouseleave:m[1]||(m[1]=p=>a.value="")},[s("div",kU,[s("div",wU,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth,labelFieldClass:a.value===e.fieldData.id?"field_label":""},null,8,["element-data","is-child","auth","labelFieldClass"])]),s("div",CU,[n()||e.fieldData.title==="Api"?(i(),l("input",{key:0,id:"short-text-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:u.lang(r.value),disabled:""},null,8,DU)):f("",!0),e.fieldData.data_type==="textarea"||e.fieldData.data_type==="htmltextarea"?(i(),l("textarea",{key:1,id:"long-text-input"+e.fieldData.id,class:"form-control drag-handle",rows:"1",placeholder:u.lang(r.value),disabled:""},null,8,SU)):f("",!0)]),s("div",$U,[a.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData},null,8,["on-edit-form-field","element-data"])):f("",!0)])])],32))}},MU=T(FU,[["__scopeId","data-v-664d190f"]]);const TU=e=>(ee("data-v-86fc03a5"),e=e(),te(),e),EU={class:"row form-field"},LU={class:"col-md-4 mt_5 drag-handle"},IU={class:"col-sm-5 drag-handle"},AU=["disabled"],qU=TU(()=>s("option",{selected:""},"Select option",-1)),PU=["value"],VU={class:"col-sm-3 mt_3"},OU={__name:"FESelect",props:{fieldData:{type:Object,required:!0},isDisabled:{type:Boolean,default:()=>!1},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=q("Select option"),r=q(""),o=q("");Ie(()=>{o.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en",u()});const n=M=>{r.value=M.id},u=()=>{if(t.fieldData.title==="Help Topic"||t.fieldData.title==="Department"||t.fieldData.title==="Change Type"){a.value="Select option";const M=m(),C={meta:!0,limit:"all","sort-order":"asc","sort-field":"id",config:!0,mode:"config"};axios.get(M.apiUrl,{params:C}).then(E=>{if(M.dataKay==="data"){t.fieldData.options=E.data.data[M.dataKay];return}t.fieldData.options=[],E.data.data[M.dataKay].map(z=>{const J={id:z.id,value:z.id,labels:[{id:null,language:"en",label:M.dataKay==="data"?z.label:z.name}],nodes:z.nodes?z.nodes:[],sort_order:0};t.fieldData.options.push(J)})})}},m=()=>{let M={},C=st.convertStringOfPropertiesToObject(t.fieldData.api_info).url;return C?M.apiUrl=C:!C&&t.fieldData.api_info&&(M.apiUrl=t.fieldData.api_info),t.fieldData.title==="Help Topic"?M.dataKay="help_topics":t.fieldData.title==="Department"?M.dataKay="departments":t.fieldData.title==="Change Type"?M.dataKay="change_types":M.dataKay="data",M},p=q(!1),g=(M,C)=>(typeof C>"u"&&(C=a.value),C&&C.id===M.id&&M.nodes&&M.nodes.length&&(p.value=!0),C&&C.id===M.id);Ga(()=>t.fieldData,(M,C)=>{t.fieldData.options&&t.fieldData.options.length===0&&u()});const v=M=>M.findIndex(C=>C.language===o.value)===-1?0:M.findIndex(C=>C.language===o.value),b=t.fieldData;function y(M,C=1){M.forEach(E=>{C>=3&&E.options&&E.options.forEach(R=>{R.extraKey="extraValue"}),E.options&&E.options.length>0&&E.options.forEach(R=>{R.nodes&&R.nodes.length>0&&y(R.nodes,C+1)})})}const w=()=>{b.options&&b.options.forEach(M=>{M.nodes&&M.nodes.length>0&&y(M.nodes)})};return window.emitter.on("updateNestedObjects",w),Ie(()=>{w()}),(M,C)=>(i(),l("div",{class:x(["fe-select",p.value?"parent_field":""])},[s("div",{class:"item-group form-field-element pr-2",onMouseenter:C[1]||(C[1]=E=>n(e.fieldData)),onMouseleave:C[2]||(C[2]=E=>r.value="")},[s("div",EU,[s("div",LU,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth,labelFieldClass:r.value===e.fieldData.id?"field_label":""},null,8,["element-data","is-child","auth","labelFieldClass"])]),s("div",IU,[S(s("select",{id:"select-field-id",class:x(["form-control",e.isDisabled?"drag-handle":""]),"onUpdate:modelValue":C[0]||(C[0]=E=>a.value=E),disabled:e.isDisabled},[qU,(i(!0),l(A,null,G(e.fieldData.options,E=>(i(),l("option",{key:E.id,value:E},h(E.labels[v(E.labels)].label),9,PU))),128))],10,AU),[[_t,a.value]])]),s("div",VU,[r.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","element-data"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),l(A,{key:0},G(e.fieldData.options,E=>(i(),l(A,{key:E.id},[g(E)?(i(),D(at,{key:0,list:E.nodes,isChild:!0,keyVal:E.id},null,8,["list","keyVal"])):f("",!0)],64))),128)):f("",!0)],2))}},NU=T(OU,[["__scopeId","data-v-86fc03a5"]]);const xU=e=>(ee("data-v-99df4992"),e=e(),te(),e),UU={class:"row form-field"},RU={class:"col-md-4 drag-handle"},jU={class:"col-sm-5 drag-handle"},BU={key:0},HU=["for"],zU=["id","name","value","disabled"],WU={key:1},GU=xU(()=>s("label",{for:"checkbox_preview",style:{color:"#9a9a9a"}},[s("input",{disabled:"",type:"checkbox",name:"checkbox_preview",id:"checkbox_preview",class:"check-align"}),F(" Add option ")],-1)),YU=[GU],KU={class:"col-sm-3"},JU={__name:"FECheckbox",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=q([]),r=q(""),o=q("");Ie(()=>{y(),o.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en"});const n=w=>{r.value=w.id},u=q(!1),m=(w,M)=>(typeof M>"u"&&(M=a.value),M&&M.id===w.id&&w.nodes&&w.nodes.length&&(u.value=!0),!!(M&&M.id===w.id)),p=()=>{r.value="",n(t.fieldData)},g=w=>w.findIndex(M=>M.language===o.value)===-1?0:w.findIndex(M=>M.language===o.value),v=t.fieldData;function b(w,M=1){w.forEach(C=>{M>=3&&C.options&&C.options.forEach(E=>{E.extraKey="extraValue"}),C.options&&C.options.length>0&&C.options.forEach(E=>{E.nodes&&E.nodes.length>0&&b(E.nodes,M+1)})})}const y=()=>{v.options&&v.options.forEach(w=>{w.nodes&&w.nodes.length>0&&b(w.nodes)})};return window.emitter.on("updateNestedObjects",y),(w,M)=>(i(),l("div",{class:x(["fe-checkbox",u.value?"parent_field":""])},[s("div",{class:"fe-checkbox item-group form-field-element pr-2",onMouseenter:M[1]||(M[1]=C=>n(e.fieldData)),onMouseleave:M[2]||(M[2]=C=>r.value="")},[s("div",UU,[s("div",RU,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",jU,[e.fieldData.options.length>0?(i(),l("div",BU,[(i(!0),l(A,null,G(e.fieldData.options,(C,E)=>(i(),l("div",{class:"checkbox",key:E},[s("label",{for:"checkbox_"+C.id+e.fieldData.id},[S(s("input",{type:"checkbox",id:"checkbox_"+C.id+e.fieldData.id,name:e.fieldData.id,value:C,"onUpdate:modelValue":M[0]||(M[0]=R=>a.value=R),class:"check-align",onChange:p,disabled:e.fieldData.default},null,40,zU),[[$e,a.value]]),F(" "+h(C.labels[g(C.labels)].label),1)],8,HU)]))),128))])):(i(),l("div",WU,YU))]),s("div",KU,[r.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","element-data"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),l(A,{key:0},G(a.value,(C,E)=>(i(),l(A,{key:E},[(i(!0),l(A,null,G(e.fieldData.options,R=>(i(),l(A,{key:R.id},[m(R,C)?(i(),D(at,{key:0,list:R.nodes,isChild:!0,keyVal:R.id},null,8,["list","keyVal"])):f("",!0)],64))),128))],64))),128)):f("",!0)],2))}},QU=T(JU,[["__scopeId","data-v-99df4992"]]);const XU=e=>(ee("data-v-0ea1344e"),e=e(),te(),e),ZU={class:"row form-field"},eR={class:"col-md-4 drag-handle"},tR={class:"col-sm-5 drag-handle"},aR={key:0},sR=["for"],oR=["name","id","value"],nR={key:1},iR=XU(()=>s("label",{for:"radio_preview",style:{color:"#9a9a9a"}},[s("input",{disabled:"",type:"radio",name:"radio_preview",id:"radio_preview",class:"radio-align"}),F(" Add option ")],-1)),lR=[iR],rR={class:"col-sm-3"},dR={__name:"FERadio",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=q(null),r=q(""),o=q(""),n=w=>{r.value=w.id};Ie(()=>{y(),o.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en"});const u=w=>w.findIndex(M=>M.language===o.value)===-1?0:w.findIndex(M=>M.language===o.value),m=w=>{w.target.checked=!0},p=q(!1),g=(w,M)=>(typeof M>"u"&&(M=a.value),M&&M.id===w.id&&w.nodes&&w.nodes.length&&(p.value=!0),M&&M.id===w.id),v=t.fieldData;function b(w,M=1){w.forEach(C=>{M>=3&&C.options&&C.options.forEach(E=>{E.extraKey="extraValue"}),C.options&&C.options.length>0&&C.options.forEach(E=>{E.nodes&&E.nodes.length>0&&b(E.nodes,M+1)})})}const y=()=>{v.options&&v.options.forEach(w=>{w.nodes&&w.nodes.length>0&&b(w.nodes)})};return window.emitter.on("updateNestedObjects",y),(w,M)=>(i(),l("div",{class:x(["fe-radio",p.value?"parent_field":""])},[s("div",{class:"fe-radio item-group form-field-element pr-2",onMouseenter:M[1]||(M[1]=C=>n(e.fieldData)),onMouseleave:M[2]||(M[2]=C=>r.value="")},[s("div",ZU,[s("div",eR,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",tR,[e.fieldData.options.length>0?(i(),l("div",aR,[(i(!0),l(A,null,G(e.fieldData.options,C=>(i(),l("div",{class:"radio",key:C.id},[s("label",{for:"radio_"+C.id+e.fieldData.id},[S(s("input",{type:"radio",name:e.fieldData.id,id:"radio_"+C.id+e.fieldData.id,"onUpdate:modelValue":M[0]||(M[0]=E=>a.value=E),value:C,class:"radio-align",onChange:m},null,40,oR),[[Bt,a.value]]),F(" "+h(C.labels[u(C.labels)].label),1)],8,sR)]))),128))])):(i(),l("div",nR,lR))]),s("div",rR,[r.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","element-data"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),l(A,{key:0},G(e.fieldData.options,C=>(i(),l(A,{key:C.id},[g(C)?(i(),D(at,{key:0,list:C.nodes,isChild:!0,keyVal:C.id},null,8,["list","keyVal"])):f("",!0)],64))),128)):f("",!0)],2))}},cR=T(dR,[["__scopeId","data-v-0ea1344e"]]);const uR=e=>(ee("data-v-a9726f2e"),e=e(),te(),e),hR={class:"col-md-4 form-field-label"},_R=["src"],mR=["value"],pR={class:"col-sm-8"},fR=["placeholder"],gR={key:0,class:"form-action-btn-div",style:{display:"flex"}},vR=uR(()=>s("span",{class:"space-filler"},null,-1)),bR={class:"form-field-actions-btn"},yR={__name:"FEGroupField",props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=Ze(),{basePathVersion:a}=je.methods,r=q("/themes/default/client/images/enterarrow.png"),o=q(""),n=m=>{o.value=m.id},u=()=>{t.push({path:this.fieldData.edit_url})};return(m,p)=>(i(),l("div",{class:"row form-field",onMouseenter:p[0]||(p[0]=g=>n(e.fieldData)),onMouseleave:p[1]||(p[1]=g=>o.value="")},[s("div",hR,[e.isChild?(i(),l("img",{key:0,width:"16",height:"16",id:"enter-arrow",src:ne(a)()+r.value,alt:""},null,8,_R)):f("",!0),s("input",{type:"text",readonly:"",value:e.fieldData.name},null,8,mR)]),s("div",pR,[s("input",{class:"form-control",type:"text",placeholder:m.lang("this_is_form_group"),disabled:""},null,8,fR)]),o.value===e.fieldData.id?(i(),l("div",gR,[vR,s("div",bR,[d(tt,{"on-edit-form-field":u,"element-data":e.fieldData},null,8,["element-data"])])])):f("",!0)],32))}},kR=T(yR,[["__scopeId","data-v-a9726f2e"]]);const wR={class:"row form-field"},CR={class:"col-md-4 mt_5 drag-handle"},DR={class:"col-sm-5 drag-handle"},SR=["id","placeholder"],$R={class:"col-sm-3 mt_3"},FR={__name:"FECustom",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=q(""),a=r=>{t.value=r.id};return(r,o)=>(i(),l("div",{class:"item-group form-field-element pr-2",onMouseenter:o[0]||(o[0]=n=>a(e.fieldData)),onMouseleave:o[1]||(o[1]=n=>t.value="")},[s("div",wR,[s("div",CR,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",DR,[s("input",{id:"short-text-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:e.fieldData.description,disabled:""},null,8,SR)]),s("div",$R,[t.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData},null,8,["on-edit-form-field","element-data"])):f("",!0)])])],32))}},MR=T(FR,[["__scopeId","data-v-8aae647c"]]);const TR={class:"row form-field"},ER={class:"col-md-4 mt_5 drag-handle"},LR={class:"col-sm-5 drag-handle"},IR=["id","placeholder"],AR={class:"col-sm-3 mt_3"},qR={__name:"FEMobile",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=q(""),a=r=>{t.value=r.id};return(r,o)=>(i(),l("div",{class:"fe-mobile item-group form-field-element pr-2",onMouseenter:o[0]||(o[0]=n=>a(e.fieldData)),onMouseleave:o[1]||(o[1]=n=>t.value="")},[s("div",TR,[s("div",ER,[d(it,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",LR,[s("input",{id:"mobile-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:r.lang(e.fieldData.labels[0].place_holder||"9876543210"),disabled:""},null,8,IR)]),s("div",AR,[t.value===e.fieldData.id?(i(),D(tt,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData},null,8,["on-edit-form-field","element-data"])):f("",!0)])])],32))}},PR=T(qR,[["__scopeId","data-v-7e3117c2"]]);const VR={class:"main-div__formbuilder"},OR={__name:"Fields",props:{list:{type:Array,default:null},isChild:{type:Boolean,default:()=>!1},keyVal:{type:[String,Number],default:""},dragGroupId:{type:[String,Number],default:""},onFieldEdit:{type:Function,default:()=>{}},onEditClose:{type:Function,default:()=>{}},auth:{type:Object,default:()=>{}},isFormGroup:{type:Boolean,default:!1},formType:{type:String,default:""}},emits:["input"],setup(e,{emit:t}){const a=ce(),r=e,o=ae(()=>a.getters.isDisableDraging),n=q(!1),u=q(null),m=q(null),p=q(!1);Ie(()=>{u.value=a.getters.getFormMenus}),za(()=>{window.emitter.on("formFieldSettingsApplied",J),window.emitter.on("formFieldSettingsClosed",J)});const g=ae(()=>({animation:200,group:{put:r.isChild?["faveo-form-builder-"+(r.keyVal?r.keyVal:Math.random())]:r.dragGroupId?["faveo-form-builder",r.dragGroupId]:["faveo-form-builder"],name:r.isChild?"faveo-form-builder-"+(r.keyVal?r.keyVal:Math.random()):r.dragGroupId?r.dragGroupId:"faveo-form-builder"},disabled:!1,ghostClass:"ghost"})),v=ae(()=>r.value?r.value:r.list),b=()=>{n.value=!1},y=(_e="")=>{let ue="";return m.value&&_e.id===m.value.id&&(ue+=" field-active "),ue},w=t,M=_e=>{w("input",_e)},C=_e=>["text","number","decimal","date","email","file","image","textarea","htmltextarea","taggable"].indexOf(_e.data_type)>-1,E=_e=>r.formType!=="helpdesk"?_e.default===1&&_e.title!=="Change Type":_e.default===1&&_e.title!=="Help Topic"&&_e.title!=="Department",R=(_e,ue)=>{let Q=JSON.parse(JSON.stringify(u.value));const Te=we();if(Q[_e].form_identifier=Te,Q[_e].id=Te,Array.isArray(ue))for(let Ee=0;Ee<ue.length;Ee++)ue[Ee].nodes.push(Q[_e]);else ue.nodes.push(Q[_e]);window.emitter.emit("updateNestedObjects")},z=_e=>{m.value=_e,window.emitter.emit("onEditElement",{data:_e})},J=()=>{m.value=null,p.value=!1,r.onEditClose(),y(),window.emitter.emit("updateNestedObjects")},we=()=>new Date().getTime();return(_e,ue)=>(i(),l("div",VR,[d(ne(He),Ya(g.value,{onEnd:b,"component-data":{tag:"div",type:"transition-group",name:n.value?null:"flip-list"},class:"item-container",list:v.value,onStart:ue[0]||(ue[0]=Q=>n.value=!0),handle:".drag-handle",onInput:M,"empty-insert-threshold":230,disabled:o.value,itemKey:"id"}),{item:k(({element:Q,index:Te})=>[Q.data_type==="section"?(i(),D(qs,{"section-data":Q,key:Te,auth:e.auth,"on-edit-form-field":z},null,8,["section-data","auth"])):(i(),l("div",{key:Q.groupid||Q.id,class:x(["mb-1",y(Q)])},[C(Q)||Q.title==="Api"?(i(),D(MU,{key:0,"field-data":Q,"on-edit-form-field":z,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0),Q.data_type==="mobile"?(i(),D(PR,{key:1,"field-data":Q,"on-edit-form-field":z,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0),Q.title!=="Api"&&(Q.data_type==="api"||Q.data_type==="select"||Q.data_type==="select2"||Q.data_type==="multiselect"||Q.data_type==="taggable-api")?(i(),D(NU,{key:2,"field-data":Q,isDisabled:E(Q),"on-edit-form-field":z,"on-child-click":R,isChild:e.isChild,auth:e.auth},null,8,["field-data","isDisabled","isChild","auth"])):f("",!0),Q.data_type==="checkbox"?(i(),D(QU,{key:3,"field-data":Q,"on-edit-form-field":z,"on-child-click":R,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0),Q.data_type==="radio"?(i(),D(cR,{key:4,"field-data":Q,"on-edit-form-field":z,"on-child-click":R,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0),Q.data_type==="group"?(i(),D(kR,{key:5,"field-data":Q,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0),Q.data_type==="custom"?(i(),D(MR,{key:6,"field-data":Q,"on-edit-form-field":z,isChild:e.isChild,auth:e.auth},null,8,["field-data","isChild","auth"])):f("",!0)],2))]),_:1},16,["component-data","list","disabled"])]))}},at=T(OR,[["__scopeId","data-v-cb67ee65"]]);const NR={class:"card-header"},xR={class:"row"},UR={class:"col-sm-4 drag-handle"},RR={class:"col-sm-8 text-right drag-handle"},jR={class:"card-body pt-2 pr-2 pl-2 min-h-100"},BR={key:0,class:"text-center no-drag-fields"},HR=["src"],zR={class:"row pl-1 pr-1"},WR={class:"col-sm-6"},GR={class:"col-sm-6"},YR={key:1,class:"col-sm-6"},KR={key:2,class:"col-sm-6"},JR={__name:"FESection",props:{sectionData:{type:Object,required:!0},auth:{type:Object,default:()=>{}},onEditFormField:{type:Function,default:()=>{}},formType:{type:String,default:""}},setup(e){const{basePathVersion:t}=je.methods,a=e,r=q(""),o=ae(()=>{const m=a.sectionData.form_fields&&a.sectionData.form_fields.first?a.sectionData.form_fields.first.length===0:!1,p=a.sectionData.form_fields&&a.sectionData.form_fields.second?a.sectionData.form_fields.second.length===0:!1;switch(!0){case(m&&p):return"both";case(m&&!a.sectionData.form_fields.second):return"first";case(!a.sectionData.form_fields.first&&p):return"second";default:return null}}),n=(m,p)=>{m==="single"&&(p.form_fields.first&&p.form_fields.second?(p.form_fields.first=[...p.form_fields.first,...p.form_fields.second],p.form_fields.first.forEach(g=>{g.column="first"}),delete p.form_fields.second):!p.form_fields.first&&p.form_fields.second&&p.form_fields.second.forEach(g=>{g.column="first"})),m==="double"&&(p.form_fields.second||(p.form_fields.second=[]))},u=m=>{r.value=m.id};return(m,p)=>(i(),l("div",{class:"card mt-2 mb-2 section-card",onMouseenter:p[0]||(p[0]=g=>u(e.sectionData)),onMouseleave:p[1]||(p[1]=g=>r.value="")},[s("div",NR,[s("div",xR,[s("div",UR,[d(it,{"element-data":e.sectionData,isSection:!0,auth:e.auth,labelFieldClass:r.value===e.sectionData.id?"section_label":""},null,8,["element-data","auth","labelFieldClass"])]),s("div",RR,[d(tt,{isSection:!0,"element-data":e.sectionData,"on-column-click":n,"on-edit-form-field":e.onEditFormField},null,8,["element-data","on-edit-form-field"])])])]),s("div",jR,[o.value?(i(),l("div",BR,[s("img",{src:ne(t)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,HR),s("p",null,h(m.trans("grab_an_element_from_the_left")),1)])):f("",!0),s("div",zR,[a.sectionData.form_fields.first&&a.sectionData.form_fields.second?(i(),l(A,{key:0},[s("div",WR,[d(at,{list:e.sectionData.form_fields.first,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType},null,8,["list","keyVal","dragGroupId","auth","formType"])]),s("div",GR,[d(at,{list:e.sectionData.form_fields.second,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType},null,8,["list","keyVal","dragGroupId","auth","formType"])])],64)):f("",!0),a.sectionData.form_fields.first&&!a.sectionData.form_fields.second?(i(),l("div",YR,[d(at,{list:e.sectionData.form_fields.first,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType},null,8,["list","keyVal","dragGroupId","auth","formType"])])):f("",!0),a.sectionData.form_fields.second&&!a.sectionData.form_fields.first?(i(),l("div",KR,[d(at,{list:e.sectionData.form_fields.second,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType},null,8,["list","keyVal","dragGroupId","auth","formType"])])):f("",!0)])])],32))}},qs=T(JR,[["__scopeId","data-v-654f0726"]]),QR={class:"main-div__formbuilder"},Ps={__name:"Sections",props:{sections:{type:Array,default:null},auth:{type:Object,default:()=>{}},isFormGroup:{type:Boolean,default:!1},formType:{type:String,default:""}},setup(e){const t=ce(),a=e,r=ae(()=>t.getters.isDisableDraging),o=q(!1),n=ae(()=>({animation:200,group:"faveo-form-sections",disabled:!1,ghostClass:"ghost"})),u=ae(()=>a.sections),m=()=>{o.value=!1},p=g=>{window.emitter.emit("onEditElement",{data:g})};return(g,v)=>(i(),l("div",QR,[d(ne(He),Ya(n.value,{onEnd:m,"component-data":{tag:"div",type:"transition-group",name:o.value?null:"flip-list"},class:"item-container",list:u.value,onStart:v[0]||(v[0]=b=>o.value=!0),"empty-insert-threshold":230,disabled:r.value,itemKey:"id",handle:".drag-handle"}),{item:k(({element:b,index:y})=>[(i(),D(qs,{"section-data":b,key:y,auth:e.auth,"on-edit-form-field":p,formType:e.formType},null,8,["section-data","auth","formType"]))]),_:1},16,["component-data","list","disabled"])]))}},XR={class:"row"},ZR={class:"col-md-12 form-group"},e7={for:"apiendpoint"},t7={class:"input-group",style:{width:"100%"}},a7={class:"col-md-12 form-group"},s7={for:"apiendpoint"},o7={class:"input-group",style:{width:"100%"}},n7={__name:"APIInfoBlock",props:{formFieldData:{type:Object,required:!0},updateApiInfo:{type:Function,required:!0}},setup(e){const t=e,a=q(null);Ie(()=>{a.value=st.convertStringOfPropertiesToObject(t.formFieldData.api_info)});const r=Ne.debounce(()=>{t.updateApiInfo(st.convertObjectOfPropertiesToString(a.value))},350);return(o,n)=>(i(),l("div",XR,[s("div",ZR,[s("label",e7,h(o.lang("api_endpoint")),1),d(Ae,{message:o.lang("api_endpoint"),size:"small"},null,8,["message"]),s("div",t7,[S(s("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":n[0]||(n[0]=u=>a.value.url=u),onInput:n[1]||(n[1]=u=>ne(r)()),placeholder:"https://testapi.com/my/api/path"},null,544),[[Fe,a.value.url,void 0,{trim:!0}]])])]),s("div",a7,[s("label",s7,h(o.lang("property_to_map")),1),d(Ae,{message:o.lang("this_property_will_get_saved_when_user_submit_the_form"),size:"small"},null,8,["message"]),s("div",o7,[S(s("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":n[2]||(n[2]=u=>a.value.key=u),onInput:n[3]||(n[3]=u=>ne(r)()),placeholder:"id"},null,544),[[Fe,a.value.key,void 0,{trim:!0}]])])])]))}};const i7={class:"pt-2 pl-2 pr-2 pb-0"},l7={key:0,class:"row"},r7={key:0,class:"col-md-12 form-group"},d7={class:"form-check"},c7=["disabled"],u7={class:"form-check-label",for:"display-for-agent"},h7={key:0,class:"form-check"},_7=["disabled"],m7={class:"form-check-label",for:"required-for-agent"},p7={key:1,class:"col-md-12 form-group"},f7={class:"form-check"},g7=["disabled"],v7={class:"form-check-label",for:"display-for-client"},b7={key:0,class:"form-check"},y7=["disabled"],k7={class:"form-check-label",for:"required-for-client"},w7={class:"row"},C7={key:0,class:"col-md-12 form-group"},D7={for:"shortcode"},S7={class:"fas fa-question-circle text-primary"},$7={key:1,class:"col-md-12 form-group",style:{"padding-top":"10px"}},F7=["href"],M7={key:0,class:"row"},T7={class:"col-md-12 form-group"},E7={class:"form-check"},L7={for:"add-media-cb"},I7={key:3,class:"row"},A7={class:"col-md-12 form-group"},q7={class:"form-check"},P7={class:"form-check-label",for:"mobile-ext"},V7={key:4,class:"row"},O7={class:"col-md-12 form-group"},N7={class:"form-check"},x7={class:"form-check-label",for:"date-time"},U7={__name:"FEConfigSettings",props:{formFieldData:{type:Object,required:!0},from:{type:String,default:""}},setup(e){const t=ce();Ke();const{basePath:a}=je.methods,r=e,o=ae(()=>t.getters.getFormCategoryType),n=m=>{r.formFieldData[m]=!1},u=m=>{r.formFieldData.api_info=m};return(m,p)=>{const g=P("tooltip");return i(),l("div",i7,[e.formFieldData.is_configurable?(i(),l("div",l7,[e.formFieldData.is_agent_config?(i(),l("div",r7,[s("label",null,h(m.trans("agent")),1),s("div",d7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[0]||(p[0]=v=>e.formFieldData.display_for_agent=v),id:"display-for-agent",onClick:p[1]||(p[1]=v=>n("required")),disabled:e.formFieldData.default&&e.formFieldData.data_type==="section"},null,8,c7),[[$e,e.formFieldData.display_for_agent]]),s("label",u7,h(m.trans("display_in_form")),1)]),e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"?(i(),l("div",h7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[2]||(p[2]=v=>e.formFieldData.required_for_agent=v),disabled:!e.formFieldData.display_for_agent&&e.formFieldData.title!=="Captcha",id:"required-for-agent"},null,8,_7),[[$e,e.formFieldData.required_for_agent]]),s("label",m7,h(m.trans("required_when_submitting_the_form")),1)])):f("",!0)])):f("",!0),e.formFieldData.is_user_config?(i(),l("div",p7,[s("label",null,h(m.trans("client")),1),s("div",f7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[3]||(p[3]=v=>e.formFieldData.display_for_user=v),id:"display-for-client",onClick:p[4]||(p[4]=v=>n("required_for_user")),disabled:e.formFieldData.default&&e.formFieldData.data_type==="section"},null,8,g7),[[$e,e.formFieldData.display_for_user]]),s("label",v7,h(m.trans("display_in_form")),1)]),e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"?(i(),l("div",b7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[5]||(p[5]=v=>e.formFieldData.required_for_user=v),disabled:!e.formFieldData.display_for_user&&e.formFieldData.title!=="Captcha",id:"required-for-client"},null,8,y7),[[$e,e.formFieldData.required_for_user]]),s("label",k7,h(m.trans("required_when_submitting_the_form")),1)])):f("",!0)])):f("",!0)])):f("",!0),e.formFieldData.title==="Api"?(i(),D(n7,{key:1,"form-field-data":e.formFieldData,"update-api-info":u},null,8,["form-field-data"])):f("",!0),s("div",w7,[!e.formFieldData.default&&e.formFieldData.data_type!=="section"&&e.from!=="ticket-fields-form"?(i(),l("div",C7,[s("label",D7,h(m.trans("shortcode")),1),F(),S(s("i",S7,null,512),[[g,{content:m.trans("ticket_custom_field_shortcode_value"),html:!0}]]),S(s("input",{type:"text",name:"shortcode",id:"shortcode",onKeydown:p[6]||(p[6]=ct(lt(()=>{},["prevent"]),["space"])),class:"form-control","onUpdate:modelValue":p[7]||(p[7]=v=>e.formFieldData.shortcode=v)},null,544),[[Fe,e.formFieldData.shortcode]])])):f("",!0),e.formFieldData.title==="Captcha"?(i(),l("div",$7,[s("p",null,[s("strong",null,[F(h(m.trans("captcha_config_message"))+" ",1),s("a",{href:ne(a)()+"/recaptcha",target:"_new",style:{"text-decoration":"underline"}},h(m.trans("here")),9,F7)])])])):f("",!0)]),e.formFieldData.title==="Description"&&e.formFieldData.title!=="Captcha"?(i(),l(A,{key:2},[o.value==="ticket"?(i(),l("div",M7,[s("div",T7,[s("div",E7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"add-media-cb","onUpdate:modelValue":p[8]||(p[8]=v=>e.formFieldData.media_option=v)},null,512),[[$e,e.formFieldData.media_option]]),s("label",L7,h(m.trans("can_agent_add_media")),1)])])])):f("",!0)],64)):f("",!0),e.formFieldData.data_type==="mobile"?(i(),l("div",I7,[s("div",A7,[s("div",q7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[9]||(p[9]=v=>e.formFieldData.enable_extension=v),id:"mobile-ext"},null,512),[[$e,e.formFieldData.enable_extension]]),s("label",P7,h(m.trans("enable_extension")),1)])])])):f("",!0),e.formFieldData.data_type==="date"?(i(),l("div",V7,[s("div",O7,[s("div",N7,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":p[10]||(p[10]=v=>e.formFieldData.request_time_information=v),id:"date-time"},null,512),[[$e,e.formFieldData.request_time_information]]),s("label",x7,h(m.trans("request_time_information")),1)])])])):f("",!0)])}}},Na=T(U7,[["__scopeId","data-v-6bf9125b"]]);const R7={class:"pt-0 pl-2 pr-2 pb-2"},j7={class:"row"},B7={class:"col-sm-12 form-group"},H7=["placeholder"],z7={class:"col-sm-12 form-group"},W7={__name:"FEFieldValidation",props:{formFieldData:{type:Object,required:!0}},setup(e){return(t,a)=>(i(),l("div",R7,[s("div",j7,[s("div",B7,[s("label",null,h(t.lang("pattern_regex")),1),S(s("input",{type:"text",class:"form-input-box","onUpdate:modelValue":a[0]||(a[0]=r=>e.formFieldData.pattern=r),placeholder:t.lang("pattern_help_message")},null,8,H7),[[Fe,e.formFieldData.pattern]])]),s("div",z7,[s("label",null,h(t.lang("validation_message")),1),S(s("input",{type:"text",class:"form-input-box","onUpdate:modelValue":a[1]||(a[1]=r=>e.formFieldData.validation_message=r)},null,512),[[Fe,e.formFieldData.validation_message]])])])]))}},xa=T(W7,[["__scopeId","data-v-fec2ae5c"]]);const la=e=>(ee("data-v-9d88e9a8"),e=e(),te(),e),G7={class:"language-menu"},Y7={class:"form-group"},K7={class:"btn btn-default dropdown-toggle",type:"button",id:"language-list-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},J7=["src"],Q7=la(()=>s("span",{class:"caret"},null,-1)),X7={class:"dropdown-menu dropdown-menu-lg language-dropdown right-auto","aria-labelledby":"language-list-dropdown"},Z7={key:0,class:"nav-item mt-2"},ej={key:0,class:"dropdown-item dropdown-header"},tj=["onMouseenter"],aj=["onClick"],sj=["src"],oj={key:0,class:"float-right text-muted text-sm"},nj=la(()=>s("i",{class:"fas fa-pencil-alt"},null,-1)),ij=[nj],lj={key:1,class:"dropdown-item dropdown-header"},rj=["onMouseenter"],dj=["onClick"],cj=["src"],uj={key:0,class:"float-right text-muted text-sm"},hj=la(()=>s("i",{class:"fas fa-plus"},null,-1)),_j=[hj],mj={__name:"LanguageDropdown",props:{auth:{type:Object,default:()=>{}},addedLanguages:{type:Array,default:()=>[]}},emits:["getflag"],setup(e,{emit:t}){const a=ce(),{basePathVersion:r}=je.methods,o=ae(()=>a.getters.getAllLangs),n=e,u=t,m=q([]),p=q([]),g=q(!1),v=q(""),b=q("");Ie(()=>{let E=n.auth&&n.auth.user_data&&n.auth.user_data.user_language?n.auth.user_data.user_language:"en";v.value={locale:E,name:o.value.find(R=>R.locale===E).name},w()});const y=E=>{b.value=E.locale},w=()=>{g.value=!0,axios.get("api/dependency/languages?meta=true").then(E=>{let R=E.data.data.languages.sort((z,J)=>z.name<J.name?-1:J.name<z.name?1:0);m.value=R.filter(z=>!n.addedLanguages.some(J=>z.locale===J)),p.value=R.filter(z=>n.addedLanguages.some(J=>z.locale===J))}).catch(E=>{m.value=[]}).finally(()=>{g.value=!1})},M=E=>r()+"/themes/default/common/images/flags/"+E+".png",C=E=>{v.value=E;let R={};R.language=E.locale,u("getflag",R)};return(E,R)=>(i(),l("div",G7,[s("div",Y7,[s("button",K7,[v.value?(i(),l(A,{key:0},[s("img",{src:M(v.value.locale),alt:"Img"},null,8,J7),F("  "+h(v.value.name),1)],64)):(i(),l(A,{key:1},[F(h(E.trans("add_new_language")),1)],64)),Q7]),s("ul",X7,[g.value?(i(),l("li",Z7,[d($t,{size:30})])):(i(),l(A,{key:1},[p.value.length?(i(),l("span",ej,h(E.trans("select_language")),1)):f("",!0),(i(!0),l(A,null,G(p.value,z=>(i(),l("li",{key:z.id,class:"nav-item bg-light",onMouseenter:J=>y(z),onMouseleave:R[0]||(R[0]=J=>b.value="")},[s("a",{href:"javascript:void(0)",onClick:J=>C(z),class:"nav-link text-dark"},[s("img",{src:M(z.locale)},null,8,sj),F(" "+h(z.name)+" ",1),b.value===z.locale?(i(),l("span",oj,ij)):f("",!0)],8,aj)],40,tj))),128)),m.value.length?(i(),l("span",lj,h(E.trans("add_new_language")),1)):f("",!0),(i(!0),l(A,null,G(m.value,z=>(i(),l("li",{key:z.id,class:"nav-item",onMouseenter:J=>y(z),onMouseleave:R[1]||(R[1]=J=>b.value="")},[s("a",{href:"javascript:void(0)",onClick:J=>C(z),class:"nav-link text-dark"},[s("img",{src:M(z.locale)},null,8,cj),F(" "+h(z.name)+" ",1),b.value===z.locale?(i(),l("span",uj,_j)):f("",!0)],8,dj)],40,rj))),128))],64))])])]))}},pj=T(mj,[["__scopeId","data-v-9d88e9a8"]]);const fj={class:"fe-add-lang"},gj={class:"language-menu-dropdown"},vj={key:0,class:"add-language-box"},bj={key:0,class:"form-group"},yj=["value"],kj={class:"form-group"},wj=["name","onUpdate:modelValue"],Cj={key:1,class:"form-group"},Dj=["name","onUpdate:modelValue"],Sj={key:2,class:"fe-lang-tooltip"},$j=["name","onUpdate:modelValue"],Fj={key:0,class:"form-check"},Mj={class:"form-check-label",for:"form-tooltip-lang"},Tj={__name:"FEAddLanguage",props:{formFieldData:{type:Object,required:!0},auth:{type:Object,default:()=>{}},selectedLanguage:{type:Function,default:()=>{}}},setup(e){const t=e;let a=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en";const r=q([]),o=["Department","Help Topic"],n=ae(()=>!o.includes(t.formFieldData.title));Ie(()=>{r.value=t.formFieldData.labels.map(b=>b.language),p({language:a})});const u=()=>["text","number","decimal","mobile","date","email","textarea"].indexOf(t.formFieldData.data_type)>-1,m=q(!1),p=b=>{m.value=!0,a=b.language,t.selectedLanguage(b.language);const y=v();b.form_identifier=y,b.id=y,t.formFieldData.options&&n.value&&t.formFieldData.data_type!=="section"&&t.formFieldData.options.forEach(w=>{b.label=w.labels[0].label,g(w.labels,b.language)||w.labels.push(new Object(Object.assign({},b)))}),g(t.formFieldData.labels,b.language)||(b.label=t.formFieldData.labels[0].label,b.description=t.formFieldData.labels[0].description,t.formFieldData.labels.push(new Object(Object.assign({},b))),r.value=t.formFieldData.labels.map(w=>w.language)),t.formFieldData.data_type==="mobile"&&t.formFieldData.union&&t.formFieldData.union.length&&!g(t.formFieldData.union[0].labels,b.language)&&(b.label=t.formFieldData.union[0].labels[0].label,b.description=t.formFieldData.union[0].labels[0].description,t.formFieldData.union[0].labels.push(new Object(Object.assign({},b))),r.value=t.formFieldData.labels.map(w=>w.language)),m.value=!1},g=(b,y)=>Ne.findIndex(b,w=>w.language===y)>-1,v=()=>new Date().getTime();return(b,y)=>(i(),l("div",fj,[s("div",gj,[d(pj,{onGetflag:p,auth:e.auth,addedLanguages:r.value},null,8,["auth","addedLanguages"])]),m.value?f("",!0):(i(),l("div",vj,[(i(!0),l(A,null,G(e.formFieldData.labels,(w,M)=>(i(),l(A,null,[w.language===ne(a)?(i(),l(A,{key:0},[e.formFieldData.default?(i(),l("div",bj,[s("label",null,[F(h(b.trans("default_label"))+" ",1),d(Ae,{message:b.lang("default_label_hint"),size:"small"},null,8,["message"])]),s("input",{type:"text",class:"form-control",disabled:"",value:e.formFieldData.title},null,8,yj)])):f("",!0),s("div",kj,[s("label",null,h(b.trans("label")),1),S(s("input",{type:"text",class:"form-control",placeholder:"Label",name:w.label+"_"+M,"onUpdate:modelValue":C=>w.label=C},null,8,wj),[[Fe,w.label]])]),u()?(i(),l("div",Cj,[s("label",null,h(b.trans("placeholder")),1),S(s("input",{type:"text",class:"form-control",placeholder:"Placeholder",name:w.place_holder+"_"+M,"onUpdate:modelValue":C=>w.place_holder=C},null,8,Dj),[[Fe,w.place_holder]])])):f("",!0),e.formFieldData.data_type!=="section"?(i(),l("div",Sj,[s("label",null,h(b.trans("tooltip")),1),S(s("textarea",{class:"form-control col-md-12 textarea",placeholder:"Description (Tooltip)",name:w.description+"_"+M,"onUpdate:modelValue":C=>w.description=C},`

						`,8,$j),[[Fe,w.description]]),e.formFieldData.title!=="Captcha"?(i(),l("div",Fj,[S(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":y[0]||(y[0]=C=>e.formFieldData.show_description=C),id:"form-tooltip-lang"},null,512),[[$e,e.formFieldData.show_description]]),s("label",Mj,h(b.lang("show_description_under_form_field")),1)])):f("",!0)])):f("",!0)],64)):f("",!0)],64))),256))]))]))}},Ua=T(Tj,[["__scopeId","data-v-57a1c1ce"]]);const Ej=e=>(ee("data-v-2119ea39"),e=e(),te(),e),Lj={class:"option-box"},Ij=Ej(()=>s("span",{class:"handle ui-sortable-handle drag-handle"},[s("i",{class:"fas fa-ellipsis-v"}),s("i",{class:"fas fa-ellipsis-v"})],-1)),Aj={class:"tools"},qj={__name:"NestedFieldOptions",props:{optionIndex:{type:Number,required:!0},value:{type:String,required:!0}},emits:["on-delete","on-update"],setup(e,{emit:t}){const a=e,r=q(!1),o=q(a.value),n=q(null);Ga(()=>a.value,y=>{o.value=y});const u=t,m=y=>{n.value=y},p=()=>{r.value=!0,Gs(()=>{n.value.focus()})},g=()=>{u("on-delete",a.optionIndex)},v=()=>{r.value=!1},b=()=>{r.value=!1,o.value===""&&(o.value=a.value),u("on-update",{newValue:o.value,index:a.optionIndex})};return(y,w)=>{const M=P("tooltip");return i(),l(A,null,[s("div",Lj,[Ij,S(s("span",{class:"text",onDblclick:w[0]||(w[0]=C=>p())},h(e.value),545),[[We,!r.value]]),S(s("input",{ref:m,"onUpdate:modelValue":w[1]||(w[1]=C=>o.value=C),onKeyup:w[2]||(w[2]=ct(C=>b(),["enter"]))},null,544),[[We,r.value],[Fe,o.value,void 0,{trim:!0}]]),s("div",Aj,[S(s("i",{class:"fa fa-times fa__fb text-danger",id:"delete-option","aria-hidden":"true",onClick:w[3]||(w[3]=C=>r.value?v():g())},null,512),[[M,r.value?y.lang("cancel"):y.lang("delete")]])])]),S(s("small",{class:"option_help"},"("+h(y.trans("press_enter_to_update"))+")",513),[[We,r.value]])],64)}}},Ra=T(qj,[["__scopeId","data-v-2119ea39"]]);const Pj={draggable:"false"},Vj={class:"pb-2 pr-2 pl-2 pt-0"},Oj={key:0,class:"nav nav-tabs",role:"tablist"},Nj=["id"],xj=["onClick"],Uj={key:1,class:"mt-2"},Rj={key:1,class:"pt-0 pb-2"},jj={key:0,class:"row"},Bj={class:"col-sm-12 form-group mt-2"},Hj={key:0,style:{color:"orangered"}},zj=["placeholder"],Wj={key:2,class:"mt-2"},Gj={class:"alert alert-info",role:"alert"},Yj={key:0,class:"pr-2"},Kj={class:"modal-title"},Jj={class:"setting_scroll_div"},Qj={key:0,class:"nav nav-tabs",role:"tablist"},Xj=["id"],Zj=["onClick"],eB={key:1,class:"mt-2"},tB={key:1,class:"pt-0 pb-2"},aB={key:0,class:"row"},sB={class:"col-sm-12 form-group mt-2"},oB={key:0,style:{color:"orangered"}},nB=["placeholder"],iB={key:2,class:"mt-2"},lB={class:"alert alert-info",role:"alert"},rB={__name:"FieldSettings",props:{fieldData:{type:Object,required:!0},isShowSettingModal:{type:Boolean,default:!1},onCloseSettingModal:{type:Function},title:{type:String,default:""},auth:{type:Object,default:()=>{}},showCloseBtn:{type:Boolean,default:!0},fieldUpdate:{type:Function,default:()=>{}},from:{type:String,default:""},settingBtnName:{type:String,default:"apply"},showInModal:{type:Boolean,default:!0}},setup(e){const t=ce();je.methods;const a=e,r=q(!1),o=q({width:"800px"}),n=q(null),u=q(""),m=q(""),p=q(""),g=q("");Ie(()=>{g.value=a.auth&&a.auth.user_data&&a.auth.user_data.user_language?a.auth.user_data.user_language:"en",n.value=a.fieldData});const v=W=>W.findIndex(X=>X.language===g.value)===-1?0:W.findIndex(X=>X.language===g.value),b=W=>{g.value=W},y=ae(()=>{const W=[{id:0,value:"configuration",show:!0,label:"settings"},{id:1,value:"addOption",show:!0,label:"addOption"},{id:2,value:"validation",show:!0,label:"validation"},{id:3,value:"language",show:!0,label:"configuration"}];C()&&(W[0].show=!1),R()&&(W[1].show=!1),E()&&(W[2].show=!1),M()&&(W[3].show=!1);const X=W.filter(Y=>Y.show);return m.value=X.length!==0?X[0].value:"",X}),w=W=>y.value.some(X=>X.value===W),M=()=>n.value.title==="Captcha",C=()=>n.value.is_configurable?["First Name","Last Name","Requester"].includes(n.value.title):!0,E=()=>!((n.value.data_type==="text"||n.value.data_type==="textarea"||n.value.data_type==="htmltextarea")&&!n.value.default),R=()=>!["select","radio","select2","checkbox","multiselect"].includes(n.value.data_type)||n.value.default||n.value.title==="Api",z=W=>{Q(W.newValue)||(n.value.options[W.index].labels[v(n.value.options[W.index].labels)].label=W.newValue)},J=W=>{if(n.value.options.length===1){t.dispatch("setAlert",{type:"danger",message:O("option_can_not_be_empty_alert_msg"),component_name:"form-builder-setting-modal"});return}const X=n.value.options[W].id,Y=n.value.data_type;X&&X.toString().length<13?confirm("Are you sure you want to delete?")&&(r.value=!0,axios.delete("/remove/form-options/"+X+"/"+Y).then(ie=>{n.value.options.splice(W,1),N(ie,"form-builder-setting-modal")}).catch(ie=>{I(ie,"form-builder-setting-modal")}).finally(()=>{r.value=!1})):n.value.options.splice(W,1)},we=W=>{if(!u.value){p.value="";return}if(p.value="Press enter to add",W.keyCode===13){if(p.value="",Q(u.value)){u.value="";return}const X=_e();a.fieldData.data_type==="checkbox"&&(X.checked=!1),Array.isArray(X)?X.forEach(Y=>{setTimeout(()=>{Y.id=new Date().getTime(),Y.form_identifier=new Date().getTime(),n.value.options.push(Y)},1)}):n.value.options.push(X),u.value=""}},_e=()=>{if(u.value.indexOf(",")>-1){let W=u.value.split(","),X=[];for(let Y in W)X.push(ue(W[Y]));return X}else return ue(u.value)},ue=W=>{const X=Ue();return{id:X,form_identifier:X,labels:[{id:null,language:g.value,label:W}],nodes:[],sort_order:0}},Q=W=>{for(let X=0;X<n.value.options.length;X++){const Y=n.value.options[X].labels;for(let H=0;H<Y.length;H++)if(Y[H].language===g.value&&Y[H].label.toLowerCase()===W.toLowerCase())return t.dispatch("setAlert",{type:"danger",message:`Option [${W}] already present.`,component_name:"form-builder-setting-modal"}),!0}return!1},Te=W=>{t.dispatch("unsetAlert"),m.value=W},Ee=()=>{a.from==="ticket-fields-form"?a.fieldUpdate(n.value):window.emitter.emit("formFieldSettingsApplied",n.value)},Ue=()=>new Date().getTime(),se=()=>{a.onCloseSettingModal(),window.emitter.emit("formFieldSettingsClosed",n.value)};return Ys(()=>{t.dispatch("unsetAlert")}),(W,X)=>{const Y=c("loader");return i(),l("div",Pj,[e.from==="ticket-fields-form"&&!e.showInModal?(i(),l(A,{key:0},[s("div",Vj,[y.value.length?(i(),l("ul",Oj,[(i(!0),l(A,null,G(y.value,H=>(i(),l(A,null,[H.id!==1&&H.id!==2?(i(),l("li",{class:"nav-item",key:H.id,id:H.id},[s("a",{class:x(["nav-link",m.value===H.value?"active font-weight-bold":""]),href:"javascript:;",onClick:ie=>Te(H.value),"data-toggle":"pill",role:"tab"},h(W.trans(H.label)),11,xj)],8,Nj)):f("",!0)],64))),256))])):f("",!0),y.value.length?(i(),l("div",Uj,[m.value==="configuration"?(i(),l(A,{key:0},[d(Na,{"form-field-data":n.value,from:e.from},null,8,["form-field-data","from"]),w("validation")?(i(),D(xa,{key:0,"form-field-data":n.value},null,8,["form-field-data"])):f("",!0)],64)):f("",!0),m.value==="language"?(i(),l("div",Rj,[d(Ua,{"form-field-data":n.value,auth:e.auth,selectedLanguage:b},null,8,["form-field-data","auth"]),w("addOption")?(i(),l("div",jj,[s("div",Bj,[s("label",null,[F(h(ne(O)("options")),1),p.value?(i(),l("small",Hj,"("+h(p.value)+")",1)):f("",!0)]),S(s("input",{ref:"addOptionInput",type:"text",placeholder:ne(O)("add_new_option"),class:"form-control","onUpdate:modelValue":X[0]||(X[0]=H=>u.value=H),onKeyup:X[1]||(X[1]=H=>we(H))},null,40,zj),[[Fe,u.value,void 0,{trim:!0}]]),r.value?(i(),D(Y,{key:0,size:20})):f("",!0),d(ne(He),{modelValue:n.value.options,"onUpdate:modelValue":X[2]||(X[2]=H=>n.value.options=H),class:"todo-list ui-sortable mt-2 h-200",handle:".drag-handle"},{item:k(({element:H,index:ie})=>[(i(),l("li",{key:H.id},[d(Ra,{"option-index":ie,value:H.labels[v(H.labels)].label,onOnDelete:J,onOnUpdate:z},null,8,["option-index","value"])]))]),_:1},8,["modelValue"])])])):f("",!0)])):f("",!0)])):(i(),l("div",Wj,[s("div",Gj,h(W.trans("this_field_is_not_editable")),1)]))]),y.value.length?(i(),l("div",Yj,[s("button",{class:"btn btn-default float-right",onClick:X[3]||(X[3]=H=>Ee())},[s("i",{class:x(e.settingBtnName==="save"?"fas fa-save":"fas fa-check")},null,2),F(" "+h(ne(O)(e.settingBtnName)),1)])])):f("",!0)],64)):(i(),l(A,{key:1},[e.isShowSettingModal?(i(),D(Ge,{key:0,showModal:e.isShowSettingModal,onClose:se,containerStyle:o.value,showCloseBtn:e.showCloseBtn},{title:k(()=>[s("h4",Kj,h(W.trans("settings")+" ("+n.value.labels[v(n.value.labels)].label+")"),1)]),alert:k(()=>[d(Ye,{componentName:"form-builder-setting-modal"})]),fields:k(()=>[s("div",Jj,[y.value.length?(i(),l("ul",Qj,[(i(!0),l(A,null,G(y.value,H=>(i(),l(A,null,[H.id!==1&&H.id!==2?(i(),l("li",{class:"nav-item",key:H.id,id:H.id},[s("a",{class:x(["nav-link",m.value===H.value?"active font-weight-bold":""]),href:"javascript:;",onClick:ie=>Te(H.value),"data-toggle":"pill",role:"tab"},h(W.trans(H.label)),11,Zj)],8,Xj)):f("",!0)],64))),256))])):f("",!0),y.value.length?(i(),l("div",eB,[m.value==="configuration"?(i(),l(A,{key:0},[d(Na,{"form-field-data":n.value,from:e.from},null,8,["form-field-data","from"]),w("validation")?(i(),D(xa,{key:0,"form-field-data":n.value},null,8,["form-field-data"])):f("",!0)],64)):f("",!0),m.value==="language"?(i(),l("div",tB,[d(Ua,{"form-field-data":n.value,auth:e.auth,selectedLanguage:b},null,8,["form-field-data","auth"]),w("addOption")?(i(),l("div",aB,[s("div",sB,[s("label",null,[F(h(ne(O)("options")),1),p.value?(i(),l("small",oB,"("+h(p.value)+")",1)):f("",!0)]),S(s("input",{ref:"addOptionInput",type:"text",placeholder:ne(O)("add_new_option"),class:"form-control","onUpdate:modelValue":X[4]||(X[4]=H=>u.value=H),onKeyup:X[5]||(X[5]=H=>we(H))},null,40,nB),[[Fe,u.value,void 0,{trim:!0}]]),r.value?(i(),D(Y,{key:0,size:20})):f("",!0),d(ne(He),{modelValue:n.value.options,"onUpdate:modelValue":X[6]||(X[6]=H=>n.value.options=H),class:"todo-list ui-sortable mt-2 h-200",handle:".drag-handle"},{item:k(({element:H,index:ie})=>[(i(),l("li",{key:H.id},[d(Ra,{"option-index":ie,value:H.labels[v(H.labels)].label,onOnDelete:J,onOnUpdate:z},null,8,["option-index","value"])]))]),_:1},8,["modelValue"])])])):f("",!0)])):f("",!0)])):(i(),l("div",iB,[s("div",lB,h(W.trans("this_field_is_not_editable")),1)]))])]),controls:k(()=>[y.value.length?(i(),l("button",{key:0,class:"btn btn-default float-right",onClick:X[7]||(X[7]=H=>Ee())},[s("i",{class:x(e.settingBtnName==="save"?"fas fa-save":"fas fa-check")},null,2),F(" "+h(ne(O)(e.settingBtnName)),1)])):f("",!0)]),_:1},8,["showModal","containerStyle","showCloseBtn"])):f("",!0)],64))])}}},ra=T(rB,[["__scopeId","data-v-0d0a6326"]]);const Ot=e=>(ee("data-v-d0c0b94e"),e=e(),te(),e),dB={class:"col-sm-12"},cB={class:"card card-light shadow-none mb-0"},uB={key:1,class:"card-header sticky-top menu-border sticky-top-menu"},hB={class:"card-title"},_B={class:"card-tools"},mB=Ot(()=>s("i",{class:"fas fa-save"},null,-1)),pB={class:"card-body p-0 pt-2 bg-light"},fB={class:"row"},gB={key:0,class:"col-sm-3"},vB={class:"card sticky-top sticky-fields mb-1"},bB={class:"card-body p-2"},yB={class:"row"},kB={class:"col-12"},wB={class:"nav nav-tabs",role:"tablist"},CB={class:"nav-item"},DB={key:0,class:"nav-item"},SB={key:1,class:"nav-item"},$B={class:"col-sm-9"},FB={class:"card"},MB={class:"card-body p-2"},TB={key:0,class:"row no-drag-form-card"},EB={class:"text-center pt-4 no-drag-fields"},LB=["src"],IB={class:"modal-title"},AB=Ot(()=>s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),qB={class:"modal-title"},PB=Ot(()=>s("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)),VB=Ot(()=>s("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)),OB={__name:"FormBuilder",props:{auth:{type:Object,default:()=>({})},formCategoryType:{type:String,default:""}},setup(e){const t=ce();Ze();const a=Ke(),{basePathVersion:r}=je.methods,o=q(""),n=q(!0),u=q(!1),m=q(!1),p=q("form"),g=q("fields"),v=q(!1),b=q(""),y=q(""),w=q(""),M=q(!1),C=q(!1),E=q(""),R=q(""),z=q(!1);Ie(()=>{R.value=t.getters.getClonedForm,E.value=R.value?R.value.id:a.params.id,R.value?Q().then(U=>{m.value=!0,u.value=!0,setTimeout(()=>{Te()},1e3)}):J()});const J=()=>{o.value=a.params.type,we(),_e()},we=()=>{L.get("api/get-form-menu/"+o.value).then(U=>{t.commit("updateFormMenu",U.data.data),u.value=!0})},_e=()=>{Q().then(U=>{m.value=!0})},ue=q(""),Q=()=>{n.value=!0,t.commit("updateFormCategoryType",o.value);let U="render/form",K={category:a.params.type,id:E.value,mode:"config"};return L.get(U,{params:K}).then(le=>(p.value=le.data.data.name,M.value=le.data.data.is_default,C.value=le.data.data.is_active,z.value=le.data.data.is_multiple,ue.value=le.data.data.type,t.commit("updateFormSections",le.data.data.form_sections),n.value=!1,le)).catch(le=>{n.value=!1,I(le,"form-builder-main")})},Te=async()=>{const U=t.getters.getFormSections;Ee(U),await Ue(U)},Ee=U=>{for(let K=0;K<U.length;K++){const le=U[K];le.sort_order=K,le.form_fields&&typeof le.form_fields=="object"?Object.keys(le.form_fields).forEach(ke=>{const be=le.form_fields[ke];for(let Pe=0;Pe<be.length;Pe++)be[Pe].sort_order=Pe;Ee(be)}):Object.keys(U[K]).forEach(ke=>{re(U[K][ke])&&Array.isArray(U[K][ke])&&Ee(U[K][ke])})}},Ue=async U=>{qe.value=!1;try{n.value=!0;const K=U.filter(ke=>{if(ke.data_type==="section"){const be=ke.form_fields.first?ke.form_fields.first.length===0:!1,Pe=ke.form_fields.second?ke.form_fields.second.length===0:!1;return!(be&&Pe||be&&!ke.form_fields.second||!ke.form_fields.first&&Pe)}return!0}),le=await se("/post/form-fields",K);Y(le)}catch(K){ie(K)}},se=async(U,K)=>{let le=W(K);return V(),await L.post(U,X(le))},W=U=>{for(let K=0;K<U.length;K++)if(U[K].form_fields&&typeof U[K].form_fields=="object"&&!Array.isArray(U[K].form_fields)){const le=U[K].form_fields.first||[],ke=U[K].form_fields.second||[];le.forEach(be=>{be.column="first"}),ke.forEach(be=>{be.column="second"}),U[K].form_fields=le.concat(ke),U[K].form_fields.forEach(be=>{re(be.options)&&be.options.forEach(Pe=>{W(Pe.nodes?Pe.nodes:[])})})}else re(U[K].options)&&U[K].options.forEach(le=>{W(le.nodes?le.nodes:[])});return U},X=U=>{let K={};return K.category=a.params.type,K.id=a.params.id,K.is_clone=1,K.is_delete=0,K.is_active=C.value?1:0,K.is_default=R.value?0:M.value?1:0,K.form_sections=U,K},Y=U=>{if(R.value){E.value=a.params.id,t.dispatch("updateCloneableFormData",""),J(),N(U,"form-builder-main");return}N(U,"form-builder-main"),H()},H=()=>{Q().then(()=>{n.value=!1})},ie=U=>{n.value=!1,Q(),I(U,"form-builder-main")},me=q(!1),Ve=q(""),qe=q(!1),B=U=>{if(window.emitter.off("updateMenuOnChildSelect"),U==="fields"&&(u.value=!1,we()),qe.value){me.value=!0,Ve.value=U;return}g.value=U};let Z=q(!1),ve=q(null);const V=()=>{Z.value=!1,ve.value=null},j=({data:U})=>{Z.value=!1,ve.value=U,setTimeout(()=>{Z.value=!0},0)},pe=ae({get(){return t.getters.getFormSections},set(U){t.dispatch("updateFormSections",U)}}),Ce=async U=>{const K=t.getters.getFormSections;await bt(K,U.form_identifier,U)&&await t.dispatch("updateFormSections",K),V(),window.emitter.emit("updateNestedObjects")},bt=(U,K,le)=>{let ke=Ne.findIndex(U,be=>be.form_identifier===K);if(ke!==-1)U[ke]=le;else for(let be=0;be<U.length;be++)U[be].form_fields&&typeof U[be].form_fields=="object"?Object.keys(U[be].form_fields).forEach(Pe=>{bt(U[be].form_fields[Pe],K,le)}):re(U[be].options)&&U[be].options.forEach(Pe=>{bt(Pe.nodes?Pe.nodes:[],K,le)});return new Promise(be=>{be(!0)})},Nt=U=>{v.value=!0,b.value=U.reference_type,y.value=U.fieldData,w.value=U.reference_id},Ns=()=>{v.value=!1,Rs(y.value)?Us(y.value.id,w.value,b.value,y.value.data_type):xs(y.value.form_identifier,y.value.data_type)},xs=(U,K)=>{const le=t.getters.getFormSections;xt(le,U)&&(t.dispatch("updateFormFields",le),window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{type:K,from:"local"}),V())},Us=(U,K,le,ke)=>{n.value=!0;let be=y.value.data_type==="section"?"/remove/form-sections/"+U:"/remove/form-fields/"+U;K&&(be="api/unlink-form-group/"+le+"/"+K),L.delete(be).then(Pe=>{N(Pe,"form-builder-main"),m.value=!1,Q().then(()=>{m.value=!0}),n.value=!1,window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{type:ke,from:"db"}),V(),g.value==="default_fields"&&window.emitter.emit("removeElementFromDB")}).catch(Pe=>{n.value=!1,I(Pe,"form-builder-main")})},Rs=U=>U.type==="group"?typeof U.groupid>"u":U.id.toString().length<13,xt=(U,K)=>{let le=Ne.findIndex(U,ke=>ke.form_identifier===K);if(le!==-1)U.splice(le,1);else for(let ke=0;ke<U.length;ke++)U[ke].form_fields&&typeof U[ke].form_fields=="object"?Object.keys(U[ke].form_fields).forEach(be=>{xt(U[ke].form_fields[be],K)}):re(U[ke].options)&&U[ke].options.forEach(be=>{xt(be.nodes?be.nodes:[],K)});return Promise.resolve(!0)},js=()=>{m.value=!1,u.value=!1,we(),Q().then(()=>{g.value=Ve.value,me.value=!1,m.value=!0,qe.value=!1})},Bs=()=>{Te(),g.value=Ve.value,me.value=!1,qe.value=!1,we()};return window.emitter.on("formFieldSettingsApplied",Ce),window.emitter.on("onRemoveElement",Nt),window.emitter.on("getFormDataFromServer",Q),window.emitter.on("onEditElement",j),window.emitter.on("formBuilderModified",()=>{qe.value=!0}),(U,K)=>(i(),l("div",dB,[d(Ye,{"component-name":"form-builder-main"}),s("div",cB,[n.value?(i(),D($t,{key:0})):f("",!0),m.value&&u.value?(i(),l("div",uB,[s("h3",hB,h(p.value),1),s("div",_B,[s("button",{class:"btn btn-tool btn-default form-save-btn float-right form_save_btn",onClick:K[0]||(K[0]=le=>Te())},[mB,F(" "+h(U.trans("save")),1)]),M.value?f("",!0):(i(),D(Oe,{key:0,name:"is_active",value:C.value,onChange:le=>C.value=le,classname:"float-right",bold:!0},null,8,["value","onChange"]))])])):f("",!0),s("div",pB,[s("div",fB,[u.value?(i(),l("div",gB,[s("div",vB,[s("div",bB,[s("div",yB,[s("div",kB,[s("ul",wB,[s("li",CB,[s("a",{class:x(["nav-link",g.value==="fields"?"active font-weight-bold":""]),href:"javascript:;",onClick:K[1]||(K[1]=le=>B("fields")),"data-toggle":"pill",role:"tab"},h(U.trans("form_fields")),3)]),M.value?f("",!0):(i(),l("li",DB,[s("a",{class:x(["nav-link",g.value==="default_fields"?"active font-weight-bold":""]),href:"javascript:;",onClick:K[2]||(K[2]=le=>B("default_fields")),"data-toggle":"pill",role:"tab"},h(U.trans("default_fields")),3)])),z.value?(i(),l("li",SB,[s("a",{class:x(["nav-link",g.value==="shared_fields"?"active font-weight-bold":""]),href:"javascript:;",onClick:K[3]||(K[3]=le=>B("shared_fields")),"data-toggle":"pill",role:"tab"},h(U.trans("shared_fields")),3)])):f("",!0)]),(i(),D(As,{key:g.value,type:g.value,isDefaultForm:M.value},null,8,["type","isDefaultForm"]))])])])])])):f("",!0),m.value&&u.value?(i(),l(A,{key:1},[s("div",$B,[s("div",FB,[s("div",MB,[d(Ps,{sections:pe.value,auth:e.auth,formType:ue.value},null,8,["sections","auth","formType"]),pe.value.length?f("",!0):(i(),l("div",TB,[s("div",EB,[s("img",{src:ne(r)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,LB),s("h5",null,h(U.trans("drag_elements_here")),1),s("p",null,h(U.trans("grab_an_element_from_the_left")),1)])]))])])]),ne(Z)?(i(),D(ra,{key:0,fieldData:ne(ve),isShowSettingModal:ne(Z),onCloseSettingModal:V,auth:e.auth},null,8,["fieldData","isShowSettingModal","auth"])):f("",!0)],64)):f("",!0)])])]),d(ye,{name:"modal"},{default:k(()=>[v.value?(i(),D(Ge,{key:0,showModal:!0,onClose:()=>v.value=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",IB,h(U.trans("delete")),1)]),fields:k(()=>[s("span",null,h(U.trans("are_you_sure_you_want_to_delete")),1)]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:K[4]||(K[4]=le=>Ns()),class:"btn btn-danger"},[AB,F(" "+h(U.trans("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1}),d(ye,{name:"modal"},{default:k(()=>[me.value?(i(),D(Ge,{key:0,showModal:!0,"show-close-btn":!1,containerStyle:{width:"400px"},footerClass:"justify-content-between"},{title:k(()=>[s("h4",qB,h(U.trans("confirm")),1)]),fields:k(()=>[s("span",null,h(U.trans("do_you_want_to_save_these_changes")),1)]),controls:k(()=>[s("button",{type:"button",onClick:K[5]||(K[5]=le=>js()),class:"btn btn btn-default btn-light"},[PB,F(" "+h(U.trans("no_discard")),1)]),s("button",{type:"button",onClick:K[6]||(K[6]=le=>Bs()),class:"btn btn-primary"},[VB,F(" "+h(U.trans("yes_keep")),1)])]),_:1})):f("",!0)]),_:1})]))}},NB=T(OB,[["__scopeId","data-v-d0c0b94e"]]),xB={class:"col-sm-12"},UB={class:"card card-light"},RB={class:"card-header"},jB={class:"card-title text-capitalize"},BB={class:"card-body"},HB={key:0,class:"row"},zB={class:"settingiconblue"},WB={class:"settingdivblue"},GB={class:"fa-stack fa-2x"},YB={class:"text-center text-sm fw_400"},KB={__name:"FormsEntry",setup(e){const t=q([]),a=q(!0),r=()=>{a.value=!0,axios.get("/admin/manage/forms").then(n=>{t.value=n.data.data,a.value=!1}).catch(n=>{a.value=!1,I(n,"forms-entry-page")})},o=ae(()=>t.value.reduce((n,u)=>(n[u.type]||(n[u.type]=[]),n[u.type].push(u),n),{}));return Ie(()=>{r()}),(n,u)=>{const m=c("router-link"),p=P("tooltip");return i(),l("div",xB,[d(Ye,{"component-name":"forms-entry"}),a.value?(i(),D(ot,{key:0})):f("",!0),(i(!0),l(A,null,G(o.value,(g,v)=>(i(),l("div",UB,[s("div",RB,[s("h3",jB,h(n.trans(v)),1)]),s("div",BB,[a.value?f("",!0):(i(),l("div",HB,[(i(!0),l(A,null,G(g,(b,y)=>(i(),l("div",{class:"col-md-2 col-sm-6",key:y},[s("div",zB,[s("div",WB,[S((i(),D(m,{to:b.is_multiple?"/new/forms/"+b.category+"/list":"/new/forms/"+b.category+"/"+b.id+"/edit"},{default:k(()=>[s("span",GB,[s("i",{class:x(["fas "+b.icon_class,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"])),[[p,n.trans(b.title)]])]),s("div",YB,h(n.trans(b.title)),1)])]))),128))]))])]))),256))])}}};const JB=e=>(ee("data-v-d6bad248"),e=e(),te(),e),QB={class:"col-sm-12"},XB={class:"card card-light card-tabs"},ZB={class:"card-header p-0 pt-1"},e9={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},t9=["onClick"],a9={class:"nav-item ml-auto mt-1 mr-2"},s9=JB(()=>s("i",{class:"glyphicon glyphicon-plus"},null,-1)),o9={class:"card-body",id:"fields-list"},n9={class:"tab-content"},i9={class:"tab-pane fade active show",role:"tabpanel"},l9={__name:"TicketFieldsIndex",setup(e){const t=ce(),a=Ke(),r=q("formFields"),o=q([{id:"formFields",title:"fields"},{id:"sections",title:"sections"}]),n=q("/get/field-managers/ticket?relation=formFields"),u=q(["label","data_type","created_at","actions"]),m=q({}),p=q(!1),g=v=>{if(r.value!==v){const b=window.location.origin+window.location.pathname;history.replaceState({},document.title,b),p.value=!0,r.value=v,n.value="/get/field-managers/ticket?relation="+v,setTimeout(()=>{p.value=!1},1)}};return Ie(()=>{a.query&&a.query.page&&(r.value=a.query.page,n.value="/get/field-managers/ticket?relation="+r.value),m.value={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},columnsClasses:{data_type:"field-data-type"},headings:{label:O("label"),data_type:O("data_type"),created_at:O("created_at"),actions:O("actions")},sortable:["label","created_at","data_type"],filterable:["label","created_at","data_type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(v){return{paginate:1,"sort-field":v.orderBy?v.orderBy:"id","sort-order":v.ascending?"asc":"desc","search-query":v.query.trim(),page:v.page,limit:v.limit}},responseAdapter({data:v}){return{data:v.data.data.map(b=>(b.edit_url="/ticket-fields/edit/"+r.value+"/"+b.data_type+"/"+b.id,b.delete_url=b.delete_api,b.alertComponentName="ticket-fields-index",b)),count:v.data.total}},templates:{created_at:(v,b)=>t.getters.formattedTime(b.created_at),actions:(v,b)=>ze(Se,{data:b})}}}),(v,b)=>{const y=c("router-link"),w=P("tooltip");return i(),l("div",QB,[d(Ye,{componentName:"ticket-fields-index"}),s("div",XB,[s("div",ZB,[s("ul",e9,[(i(!0),l(A,null,G(o.value,(M,C)=>(i(),l("li",{class:"nav-item",key:C},[s("a",{class:x(["nav-link",{active:r.value===M.id}]),"data-toggle":"pill",href:"javascript:;",role:"tab","aria-selected":"true",onClick:E=>g(M.id)},h(v.trans(M.title)),11,t9)]))),128)),s("li",a9,[S((i(),D(y,{to:"/ticket-fields/"+r.value+"/create",class:"btn btn-tool",href:"javascript:;"},{default:k(()=>[s9]),_:1},8,["to"])),[[w,v.trans("create")]])])])]),s("div",o9,[s("div",n9,[s("div",i9,[d(Mt,{url:n.value,"data-columns":u.value,option:m.value,scroll_to:"fields-list"},null,8,["url","data-columns","option"])])])])])])}}},r9=T(l9,[["__scopeId","data-v-d6bad248"]]);const d9=e=>(ee("data-v-6eea4024"),e=e(),te(),e),c9={class:"col-sm-12"},u9={class:"card card-light"},h9={class:"card-header"},_9={class:"card-title"},m9={class:"card-body"},p9={key:1,class:"row"},f9={class:"col-sm-4"},g9={class:"row"},v9=["onClick","onMouseenter","onMouseleave"],b9={key:0,class:"overlay"},y9={key:1,class:"info-box-icon menu-icon"},k9={class:"info-box-text"},w9={class:"badge badge-count-right"},C9={key:1,class:"fas fa-plus fa-2x text-muted"},D9={class:"col-sm-8"},S9={key:1,class:"row"},$9={class:"col-sm-12"},F9={key:1,class:"row no-drag-form-card"},M9={class:"text-center pt-4 no-drag-fields"},T9=d9(()=>s("i",{class:"fas fa-mouse-pointer"},null,-1)),E9=["src"],L9={__name:"TicketFieldsForm",props:{auth:{type:Object,default:()=>{}}},setup(e){const{basePathVersion:t}=je.methods,a=Ze(),r=Ke();ce();const o=q([]),n=q(!1),u=q(!0),m=q(!1),p=q(""),g=()=>{axios.get("api/get-form-menu/ticket").then(E=>{o.value=E.data.data.map(R=>({...R,showOnlyIcon:!1})).filter(R=>R.data_type!=="section"),n.value=!0})},v=E=>{E.showOnlyIcon=!0},b=E=>{E.showOnlyIcon=!1},y=E=>{u.value=!1,setTimeout(()=>{u.value=!0},1e3),p.value=E},w=()=>{if(p.value.options&&p.value.options.length)for(let E=0;E<p.value.options.length;E++)p.value.options[E].sort_order=E;m.value=!0,axios.post("/post/field-managers/ticket",p.value).then(E=>{m.value=!1,N(E,"ticket-fields-form"),r.name==="ticket.fields.edit"?M(r.params.id,r.params.type):setTimeout(()=>{a.push({name:"ticket.fields.index"})},3e3)}).catch(E=>{m.value=!1,I(E,"ticket-fields-form")})};Ie(()=>{g(),r.name==="ticket.fields.edit"&&M(r.params.id,r.params.type)});const M=(E,R)=>{m.value=!0,axios.get("/field-manager/ticket?data_type="+R+"&id="+E).then(z=>{m.value=!1,p.value=z.data.data}).catch(z=>{m.value=!1,I(z,"ticket-fields-form")})},C=E=>E.count?r.name==="ticket.fields.edit"?p.value.title===E.title?"bg-primary pe-none":"bg-light pe-none":p.value.title===E.title?"bg-primary pe-none":"bg-light":"bg-light pe-none";return(E,R)=>(i(),l("div",c9,[d(Ye,{"component-name":"ticket-fields-form"}),s("div",u9,[s("div",h9,[s("h3",_9,h(E.trans("add_field")),1)]),s("div",m9,[!n.value||m.value?(i(),D(ot,{key:0})):f("",!0),n.value&&!m.value?(i(),l("div",p9,[s("div",f9,[s("div",g9,[(i(!0),l(A,null,G(o.value,(z,J)=>(i(),l("div",{class:"col-sm-6",key:J},[(i(),l("div",{class:x(["info-box menu-info-box",C(z)]),key:z.id,onClick:we=>y(z),onMouseenter:we=>v(z),onMouseleave:we=>b(z)},[ne(r).name==="ticket.fields.edit"&&p.value.title!==z.title||!z.count?(i(),l("div",b9)):f("",!0),z.icon_class&&!z.showOnlyIcon?(i(),l("span",y9,[s("i",{class:x(["fas",z.icon_class])},null,2)])):f("",!0),s("div",{class:x(["info-box-content",z.showOnlyIcon&&p.value.title!==z.title?"text-center":""])},[s("span",k9,[z.showOnlyIcon?f("",!0):(i(),l(A,{key:0},[F(h(z.title)+"  ",1),s("small",w9,h(z.count?z.count:0),1)],64)),z.showOnlyIcon&&z.count?(i(),l("i",C9)):f("",!0)])],2)],42,v9))]))),128))])]),s("div",D9,[u.value?(i(),l("div",S9,[s("div",$9,[p.value?(i(),D(ra,{key:0,"field-data":p.value,auth:e.auth,showCloseBtn:!1,from:"ticket-fields-form",fieldUpdate:w,settingBtnName:"save",showInModal:!1},null,8,["field-data","auth"])):(i(),l("div",F9,[s("div",M9,[T9,s("img",{src:ne(t)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-select-img"},null,8,E9),s("h5",null,h(E.trans("select_an_element_from_the_left")),1)])]))])])):(i(),D(ot,{key:0}))])])):f("",!0)])])]))}},ja=T(L9,[["__scopeId","data-v-6eea4024"]]);const Vs=e=>(ee("data-v-63f005de"),e=e(),te(),e),I9={class:"col-sm-12"},A9={class:"card card-light shadow-none"},q9={class:"card-header sticky-top menu-border sticky-top-menu"},P9={class:"card-title"},V9={key:1,class:"card-tools"},O9=Vs(()=>s("i",{class:"fas fa-save"},null,-1)),N9={class:"card-body p-0 pt-2 bg-light"},x9={class:"row"},U9={class:"col-sm-3"},R9={class:"card sticky-top sticky-fields"},j9={class:"card-body p-2"},B9={class:"row"},H9={key:0,class:"col-12"},z9={class:"btn-group w-100"},W9={class:"btn btn-default field-btn active",href:"javascript:;"},G9={class:"card"},Y9={class:"card-body p-2"},K9={key:0,class:"row no-drag-form-card"},J9={class:"text-center pt-4 no-drag-fields"},Q9=["src"],X9={key:0,class:"col-sm-3"},Z9={class:"modal-title"},eH=Vs(()=>s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),tH={__name:"TicketSectionsForm",props:{auth:{type:Object,default:()=>({})}},setup(e){const t=ce(),a=Ze(),r=Ke(),{basePathVersion:o}=je.methods,n=q(!0),u=q(!1),m=q(!1),p=q(!1),g=q(""),v=q(""),b=q("");Ie(()=>{y(),w()});const y=()=>{L.get("api/get-form-menu/ticket").then(B=>{t.commit("updateFormMenu",B.data.data),u.value=!0})},w=()=>{M().then(B=>{m.value=!0})},M=()=>{n.value=!0;let B=r.name==="ticket.sections.edit"?"/field-manager/ticket?data_type="+r.params.type+"&id="+r.params.id:"/field-manager-section";return L.get(B).then(Z=>(t.commit("updateFormSections",r.name==="ticket.sections.edit"?[Z.data.data]:Z.data.data),n.value=!1,Z)).catch(Z=>{n.value=!1,I(Z,"ticket-section")})},C=async()=>{const B=t.getters.getFormSections;E(B),await R(B)},E=B=>{for(let Z=0;Z<B.length;Z++){const ve=B[Z];ve.sort_order=Z,ve.form_fields&&typeof ve.form_fields=="object"?Object.keys(ve.form_fields).forEach(V=>{const j=ve.form_fields[V];for(let pe=0;pe<j.length;pe++)j[pe].sort_order=pe;E(j)}):Object.keys(B[Z]).forEach(V=>{re(B[Z][V])&&Array.isArray(B[Z][V])&&E(B[Z][V])})}},R=async B=>{try{n.value=!0;const Z=B.filter(j=>{if(j.data_type==="section"){const pe=j.form_fields.first?j.form_fields.first.length===0:!1,Ce=j.form_fields.second?j.form_fields.second.length===0:!1;return!(pe&&Ce||pe&&!j.form_fields.second||!j.form_fields.first&&Ce)}return!0}),V=await z("/post/field-managers/ticket",Z);we(V)}catch(Z){ue(Z)}},z=async(B,Z)=>{let ve=J(Z);return Ee(),await L.post(B,ve[0])},J=B=>{for(let Z=0;Z<B.length;Z++)if(B[Z].form_fields&&typeof B[Z].form_fields=="object"&&!Array.isArray(B[Z].form_fields)){const ve=B[Z].form_fields.first||[],V=B[Z].form_fields.second||[];ve.forEach(j=>{j.column="first"}),V.forEach(j=>{j.column="second"}),B[Z].form_fields=ve.concat(V),B[Z].form_fields.forEach(j=>{re(j.options)&&j.options.forEach(pe=>{J(pe.nodes)})})}else re(B[Z].options)&&B[Z].options.forEach(ve=>{J(ve.nodes)});return B},we=B=>{N(B,"ticket-section"),r.name==="ticket.sections.create"?a.push({path:"/ticket-fields/list",query:{page:"sections"}}):_e()},_e=()=>{M().then(()=>{n.value=!1})},ue=B=>{n.value=!1,I(B,"ticket-section")};let Q=q(!1),Te=q(null);const Ee=()=>{Q.value=!1,Te.value=null},Ue=({data:B})=>{Q.value=!1,Te.value=B,setTimeout(()=>{Q.value=!0},0)},se=ae({get(){return t.getters.getFormSections},set(B){t.dispatch("updateFormSections",B)}}),W=async B=>{const Z=t.getters.getFormSections;await X(Z,B.form_identifier,B)&&await t.dispatch("updateFormSections",Z),Ee(),window.emitter.emit("updateNestedObjects")},X=(B,Z,ve)=>{let V=Ne.findIndex(B,j=>j.form_identifier===Z);if(V!==-1)B[V]=ve;else for(let j=0;j<B.length;j++)B[j].form_fields&&typeof B[j].form_fields=="object"?Object.keys(B[j].form_fields).forEach(pe=>{X(B[j].form_fields[pe],Z,ve)}):re(B[j].options)&&B[j].options.forEach(pe=>{X(pe.nodes,Z,ve)});return new Promise(j=>{j(!0)})},Y=B=>{p.value=!0,g.value=B.reference_type,v.value=B.fieldData,b.value=B.reference_id},H=()=>{p.value=!1,Ve(v.value)?me(v.value.id,b.value,g.value,v.value.data_type):ie(v.value.form_identifier,v.value.data_type)},ie=(B,Z)=>{const ve=t.getters.getFormSections;qe(ve,B)&&(Ee(),window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{type:Z,from:"local"}),t.dispatch("updateFormFields",ve))},me=(B,Z,ve,V)=>{n.value=!0;let j=v.value.data_type==="section"?"/remove/form-sections/"+B:"/remove/form-fields/"+B;L.delete(j).then(pe=>{N(pe,"ticket-section"),m.value=!1,M().then(()=>{m.value=!0}),n.value=!1,window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{type:V,from:"db"}),Ee()}).catch(pe=>{n.value=!1,I(pe,"ticket-section")})},Ve=B=>B.type==="group"?typeof B.groupid>"u":B.id.toString().length<13,qe=(B,Z)=>{let ve=Ne.findIndex(B,V=>V.form_identifier===Z);if(ve!==-1)B.splice(ve,1);else for(let V=0;V<B.length;V++)B[V].form_fields&&typeof B[V].form_fields=="object"?Object.keys(B[V].form_fields).forEach(j=>{qe(B[V].form_fields[j],Z)}):re(B[V].options)&&B[V].options.forEach(j=>{qe(j.nodes,Z)});return Promise.resolve(!0)};return window.emitter.on("formFieldSettingsApplied",W),window.emitter.on("onRemoveElement",Y),window.emitter.on("getFormDataFromServer",M),window.emitter.on("onEditElement",Ue),(B,Z)=>(i(),l("div",I9,[d(Ye,{"component-name":"ticket-section"}),s("div",A9,[s("div",q9,[n.value?(i(),D($t,{key:0})):f("",!0),s("h3",P9,h(B.trans("ticket_section")),1),m.value&&u.value?(i(),l("div",V9,[s("button",{class:"btn btn-tool btn-default form-save-btn",onClick:Z[0]||(Z[0]=ve=>C())},[O9,F(" "+h(B.trans("save")),1)])])):f("",!0)]),s("div",N9,[s("div",x9,[s("div",U9,[s("div",R9,[s("div",j9,[s("div",B9,[u.value?(i(),l("div",H9,[s("div",z9,[s("a",W9,h(B.trans("form_fields")),1)]),d(As,{from:"ticket-sections"})])):f("",!0)])])])]),m.value&&u.value?(i(),l(A,{key:0},[s("div",{class:x(ne(Q)?"col-sm-6":"col-sm-9")},[s("div",G9,[s("div",Y9,[d(Ps,{sections:se.value,auth:e.auth},null,8,["sections","auth"]),se.value.length?f("",!0):(i(),l("div",K9,[s("div",J9,[s("img",{src:ne(o)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,Q9),s("h5",null,h(B.trans("drag_elements_here")),1),s("p",null,h(B.trans("grab_an_element_from_the_left")),1)])]))])])],2),ne(Q)?(i(),l("div",X9,[d(ra,{fieldData:ne(Te),isShowSettingModal:ne(Q),onCloseSettingModal:Ee,auth:e.auth,from:"ticket-fields-form",fieldUpdate:W,settingBtnName:"apply"},null,8,["fieldData","isShowSettingModal","auth"])])):f("",!0)],64)):f("",!0)])])]),d(ye,{name:"modal"},{default:k(()=>[p.value?(i(),D(Ge,{key:0,showModal:!0,onClose:()=>p.value=!1,containerStyle:{width:"400px"}},{title:k(()=>[s("h4",Z9,h(B.trans("delete")),1)]),fields:k(()=>[s("span",null,h(B.trans("are_you_sure_you_want_to_delete")),1)]),controls:k(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:Z[1]||(Z[1]=ve=>H()),class:"btn btn-danger"},[eH,F(" "+h(B.trans("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})]))}},Ba=T(tH,[["__scopeId","data-v-63f005de"]]),aH={components:{"status-switch":Oe},props:["data"],methods:{onChange(e,t){this.statusChange(t,e)},statusChange(e,t){let a=t?1:0;axios.get("edit/oauth/status/"+e+"/"+a).then(r=>{N(r,"dataTableModal"),window.emitter.emit("refreshData")}).catch(r=>{I(r,"dataTableModal")})}}},sH={class:"btn-group"};function oH(e,t,a,r,o,n){const u=c("status-switch");return i(),l("div",sH,[(i(),D(u,{name:a.data.id,value:!a.data.revoked,key:Math.random(),onChange:n.onChange},null,8,["name","value","onChange"]))])}const nH=T(aH,[["render",oH]]);const iH={id:"tokens-index",class:"col-sm-12"},lH={class:"card-tools"},rH=s("i",{class:"glyphicon glyphicon-plus"},null,-1),dH="/get/oauth/clients",cH={__name:"OauthIndex",setup(e){const{basePath:t}=je.methods;ce();const a=q(["name","redirect","revoked","actions"]),r=q({});return Ie(()=>{r.value={headings:{revoked:"App status",redirect:"Callback URL",name:"App"},columnsClasses:{name:"name",redirect:"redirect",revoked:"revoked",actions:"token-actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{actions:(o,n)=>ze(Se,{data:n}),revoked:(o,n)=>ze(nH,{data:n})},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"scroll"},requestAdapter(o){return{"sort-field":o.orderBy?o.orderBy:"id","sort-order":o.ascending?"desc":"asc","search-query":o.query.trim(),page:o.page,limit:o.limit}},responseAdapter({data:o}){return{data:o.data.data.map(n=>(n.edit_url="/oauth/"+n.id+"/edit",n.delete_url=t()+"/revoke/oauth/delete/client/"+n.id,n.deleteMessage="are_you_sure_delete_oauth_app",n)),count:o.data.total}}}}),(o,n)=>{const u=c("router-link"),m=P("tooltip");return i(),l("div",iH,[d(Ye,{"component-name":"dataTableModal"}),d(rt,{title:o.trans("lists_of_oauth_clients")},{customActions:k(()=>[s("div",lH,[S((i(),D(u,{class:"btn btn-tool pointer-cursor",to:"/oauth/create"},{default:k(()=>[rH]),_:1})),[[m,o.trans("create_oauth_apps")]])])]),default:k(()=>[d(Mt,{url:dH,dataColumns:a.value,option:r.value,scroll_to:"tokens-index"},null,8,["dataColumns","option"])]),_:1},8,["title"])])}}};function Os(e){const{app_name:t,callback_url:a,homepage_url:r}=e;let o={app_name:[t,"isRequired"],callback_url:[a,"isRequired"],homepage_url:[r,"isRequired"]};const n=new he(O),{errors:u,isValid:m}=n.validate(o);return de.dispatch("setValidationError",u),{errors:u,isValid:m}}const uH={mixins:[je],name:"oauth-form",data(){return{loading:!1,pageLoad:!1,app_name:"",callback_url:"",homepage_url:"",showTokenModal:!1,onClose:{type:Function},client_id:"",client_secret:"",description:"",copied:!1,containerStyle:{width:"600px"}}},methods:{isValid(){const{errors:e,isValid:t}=Os(this.$data);return t},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.app_name=this.app_name,e.callback_url=this.callback_url,e.homepage_url=this.homepage_url,e.description=this.description,L.post("generate/oauth/client",e).then(t=>{this.pageLoad=!1,this.client_id=t.data.data.client_id,this.client_secret=t.data.data.client_secret,this.showTokenModal=!0,N(t,"oauth-modal-form")}).catch(t=>{this.pageLoad=!1,I(t,"oauth-form")})}},onChange(e,t){this[t]=e},copyToken(){let e="Client-Id: "+this.client_id+`
Client-Secret: `+this.client_secret;Xe(e),this.copied=!0,setTimeout(()=>(this.copied=!1,this.showTokenModal=!1,this.$router.push({name:"oauth.index"})),3e3)}},components:{Modal:Ge,"text-field":oe}},hH={class:"col-sm-12"},_H={class:"card card-light"},mH={class:"card-header"},pH={class:"card-title"},fH={class:"card-body"},gH={key:0,class:"row"},vH={key:1,class:"row"},bH={class:"card-footer"},yH=["disabled"],kH=s("i",{class:"fas fa-save"},null,-1),wH={class:"modal-title"},CH={class:"row"},DH={class:"col-sm-3"},SH={class:"input-group mb-3"},$H=["value"],FH={class:"col-sm-9"},MH={class:"input-group mb-3"},TH=["value"],EH=["disabled"];function LH(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("text-field"),v=c("lable"),b=c("modal"),y=P("focus-first-input");return i(),l("div",hH,[d(u,{componentName:"oauth-form"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",_H,[s("div",mH,[s("h3",pH,h(e.trans("oauth-clients-create")),1)]),s("div",fH,[o.loading?(i(),l("div",gH,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.loading?f("",!0):S((i(),l("div",vH,[d(g,{id:"app_name",label:e.trans("app_name"),type:"text",name:"app_name",value:o.app_name,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"app_name",hint:e.trans("app_name_info")},null,8,["label","value","onChange","hint"]),d(g,{id:"callback",label:e.trans("callback_url"),type:"text",name:"callback_url",value:o.callback_url,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"callback_url",hint:e.trans("callback_url_info")},null,8,["label","value","onChange","hint"]),d(g,{id:"homepage_url",label:e.trans("homepage_url"),type:"text",name:"homepage_url",value:o.homepage_url,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"homepage_url",hint:e.trans("homepage_url_info")},null,8,["label","value","onChange","hint"]),d(g,{label:e.lang("description"),placehold:e.lang("enter_a_value"),value:o.description,type:"textarea",name:"description",classname:"col-sm-6 ",onChange:n.onChange,hint:e.lang("description_info"),id:"description",disabled:!1},null,8,["label","placehold","value","onChange","hint"])])),[[y]])]),s("div",bH,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>n.onSubmit&&n.onSubmit(...w)),disabled:o.pageLoad},[kH,F(" "+h(e.trans("save")),1)],8,yH)])]),o.showTokenModal?(i(),D(b,{key:1,showModal:o.showTokenModal,onClose:o.onClose,containerStyle:o.containerStyle,class:"scrollable-area"},{alert:k(()=>[d(u,{componentName:"oauth-modal-form"})]),title:k(()=>[s("h4",wH,h(e.trans("oauth-client-id-secret")),1)]),fields:k(()=>[s("div",CH,[s("div",DH,[d(v,null,{default:k(()=>[F(h(e.trans("client_id")),1)]),_:1}),s("div",SH,[s("input",{type:"number",class:"form-control",value:o.client_id,disabled:""},null,8,$H)])]),s("div",FH,[d(v,null,{default:k(()=>[F(h(e.trans("client_secret")),1)]),_:1}),s("div",MH,[s("input",{type:"password",class:"form-control",value:o.client_secret,disabled:""},null,8,TH)])])])]),controls:k(()=>[s("button",{type:"button",onClick:t[1]||(t[1]=(...w)=>n.copyToken&&n.copyToken(...w)),class:"btn btn-primary",disabled:o.copied},[s("i",{class:x(o.copied?"fas fa-check":"fa fa-clipboard")},null,2),F(" "+h(o.copied?e.trans("clipboard-copy-message"):e.trans("copy")),1)],8,EH)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const IH=T(uH,[["render",LH]]);Ze();const AH={mixins:[je],name:"oauth-form",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,app_name:"",callback_url:"",id:"",showModal:!1,containerStyle:{width:"600px"},modalLoading:!1,showTokenModal:!1,onClose:{type:Function},client_id:"",client_secret:"",copied:!1,labelStyle:{display:"none"},labelCss:{visibility:"hidden",margin:"auto"},profile_pic:"",selectedImage:"",homepage_url:"",description:"",revokingTokens:!1}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Os(this.$data);return t},getData(){this.loading=!0;const e=Ke();L.get("edit/oauth/"+e.params.id).then(t=>{this.id=t.data.data.id,this.app_name=t.data.data.name,this.callback_url=t.data.data.redirect,this.homepage_url=t.data.data.homepage_url,this.description=t.data.data.description,this.profile_pic=t.data.data.profile_pic,this.fillFieldsInfo(t.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.hasDataPopulated=!0,this.loading=!1,I(t,"oauth-form")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;var e=new FormData;e.append("id",this.id),e.append("app_name",this.app_name),e.append("callback_url",this.callback_url),e.append("homepage_url",this.homepage_url),e.append("description",this.description),this.selectedImage&&e.append("profile_pic",this.selectedImage.file,this.selectedImage.name),e.append("_method","POST"),L.post("update/oauth/app-name/callback-url",e).then(t=>{this.pageLoad=!1,N(t,"oauth-form"),setTimeout(()=>this.$router.push({name:"oauth.index"}),3e3)}).catch(t=>{this.pageLoad=!1,I(t,"oauth-form")})}},onUpdate(){this.showModal=!0,this.modalLoading=!0;let e={};e.id=this.id,L.post("re-generate/oauth/client-secret",e).then(t=>{this.modalLoading=!1,this.showModal=!1,t.data.data&&t.data.data.client_secret?(this.client_id=t.data.data.client_id,this.client_secret=t.data.data.client_secret,this.showTokenModal=!0,N(t,"oauth-modal-form")):N(t,"oauth-form")}).catch(t=>{I(t,"oauth-form"),this.modalLoading=!1,this.showModal=!1})},onRevokeIt(){this.showModal=!0,this.modalLoading=!0;let e={};e.id=this.id,L.post("revoke/oauth/client-tokens",e).then(t=>{this.modalLoading=!1,this.showModal=!1,N(t,"oauth-form"),setTimeout(()=>this.$router.push({name:"oauth.index"}),3e3)}).catch(t=>{I(t,"oauth-form"),this.modalLoading=!1,this.showModal=!1})},onChange(e,t){this[t]=e},copyToken(){let e="Client-Id: "+this.client_id+`
Client-Secret: `+this.client_secret;Xe(e),this.copied=!0,setTimeout(()=>(this.copied=!1,this.showTokenModal=!1,this.$router.push({name:"oauth.index"})),3e3)},onProfile(e,t){t==="profile_pic"?(this.profile_pic=e.image,this.selectedImage=e):this[t]=e},onClose(){this.showModal=!1}},components:{"text-field":oe,"image-upload":Ka}},qH={class:"col-sm-12"},PH={class:"card card-light"},VH={class:"card-header"},OH={class:"card-title"},NH={class:"card-tools"},xH=s("i",{class:"glyphicon glyphicon-refresh"},null,-1),UH=[xH],RH=s("i",{class:"glyphicon glyphicon-ban-circle"},null,-1),jH=[RH],BH={class:"card-body"},HH={key:0,class:"row"},zH={key:1,class:"row"},WH={class:"text-center col-sm-6"},GH={key:0,class:"card-footer"},YH=["disabled"],KH=s("i",{class:"fas fa-save"},null,-1),JH={key:0,class:"modal-title"},QH={key:1,class:"modal-title"},XH={key:0,class:"row modal-body"},ZH={key:0},ez={key:1,class:"row modal-body"},tz={key:0},az={key:2,class:"row"},sz=s("i",{class:"fas fa-sync-alt"},null,-1),oz=s("i",{class:"fas fa-sync-alt"},null,-1),nz={class:"modal-title"},iz={class:"row"},lz={class:"col-sm-3"},rz={class:"input-group mb-3"},dz=["value"],cz={class:"col-sm-9"},uz={class:"input-group mb-3"},hz=["value"],_z=["disabled"];function mz(e,t,a,r,o,n){const u=c("alert"),m=c("custom-loader"),p=c("reuse-loader"),g=c("image-upload"),v=c("text-field"),b=c("Loader"),y=c("modal"),w=c("lable"),M=P("tooltip"),C=P("focus-first-input");return i(),l("div",qH,[d(u,{componentName:"oauth-form"}),o.pageLoad?(i(),D(m,{key:0,loadingSpeed:4e3})):f("",!0),s("div",PH,[s("div",VH,[s("h3",OH,h(e.trans("oauth-edit-form")),1),s("div",NH,[S((i(),l("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=E=>{o.showModal=!0,o.revokingTokens=!1})},UH)),[[M,e.trans("regenerate-client-secret")]]),S((i(),l("button",{class:"btn btn-tool",onClick:t[1]||(t[1]=E=>{o.showModal=!0,o.revokingTokens=!0})},jH)),[[M,e.trans("revoke-tokens")]])])]),s("div",BH,[!o.hasDataPopulated||o.loading?(i(),l("div",HH,[d(p,{"animation-duration":4e3,size:60})])):f("",!0),o.hasDataPopulated&&!o.loading?S((i(),l("div",zH,[s("div",WH,[d(g,{label:e.lang("profile_pic"),value:o.profile_pic,name:"profile_pic",onChange:n.onProfile,labelStyle:o.labelStyle,labelCss:o.labelCss,buttonName:"Change"},null,8,["label","value","onChange","labelStyle","labelCss"])]),d(v,{label:e.lang("description"),placehold:e.lang("enter_a_value"),value:o.description,type:"textarea",name:"description",classname:"col-sm-6 ",onChange:n.onChange,hint:e.lang("description_info"),id:"description",disabled:!1,rows:"5",cols:"40"},null,8,["label","placehold","value","onChange","hint"]),d(v,{id:"app_name",label:e.trans("app_name"),type:"text",name:"app_name",value:o.app_name,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"app_name",hint:e.trans("app_name_info")},null,8,["label","value","onChange","hint"]),d(v,{id:"callback",label:e.trans("callback_url"),type:"text",name:"callback_url",value:o.callback_url,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"callback_url",hint:e.trans("callback_url_info")},null,8,["label","value","onChange","hint"]),d(v,{id:"id",label:e.trans("homepage_url"),type:"text",name:"homepage_url",value:o.homepage_url,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"homepage_url",hint:e.trans("homepage_url_info")},null,8,["label","value","onChange","hint"]),d(v,{id:"id",label:e.trans("client_id"),type:"text",name:"id",value:o.id,classname:"col-sm-6",onChange:n.onChange,required:!0,placehold:"id",hint:e.trans("client_id_info"),disabled:""},null,8,["label","value","onChange","hint"])])),[[C]]):f("",!0)]),o.hasDataPopulated?(i(),l("div",GH,[s("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...E)=>n.onSubmit&&n.onSubmit(...E)),disabled:o.pageLoad},[KH,F(" "+h(e.trans("update")),1)],8,YH)])):f("",!0)]),o.showModal?(i(),D(y,{key:1,"show-modal":o.showModal,onClose:n.onClose,containerStyle:o.containerStyle},{title:k(()=>[o.revokingTokens?(i(),l("h4",JH,h(e.trans("revoke-tokens")),1)):(i(),l("h4",QH,h(e.trans("regenerate-client-secret")),1))]),fields:k(()=>[o.revokingTokens?(i(),l("div",XH,[s("div",null,[o.modalLoading?f("",!0):(i(),l("p",ZH,h(e.trans("do-you-want-to-revoke-all-tokens")),1))])])):(i(),l("div",ez,[s("div",null,[o.modalLoading?f("",!0):(i(),l("p",tz,h(e.trans("do-you-want-to-regenrate-client-secret")),1))])])),o.modalLoading?(i(),l("div",az,[d(b),d(p,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:k(()=>[o.revokingTokens?(i(),l("button",{key:0,type:"button",onClick:t[3]||(t[3]=(...E)=>n.onRevokeIt&&n.onRevokeIt(...E)),class:"btn btn-danger"},[sz,F(" "+h(e.trans("Revoke")),1)])):(i(),l("button",{key:1,type:"button",onClick:t[4]||(t[4]=(...E)=>n.onUpdate&&n.onUpdate(...E)),class:"btn btn-danger"},[oz,F(" "+h(e.trans("Generate")),1)]))]),_:1},8,["show-modal","onClose","containerStyle"])):f("",!0),o.showTokenModal?(i(),D(y,{key:2,showModal:o.showTokenModal,onClose:n.onClose,containerStyle:o.containerStyle,class:"scrollable-area"},{alert:k(()=>[d(u,{componentName:"oauth-modal-form"})]),title:k(()=>[s("h4",nz,h(e.trans("oauth-client-id-secret")),1)]),fields:k(()=>[s("div",iz,[s("div",lz,[d(w,null,{default:k(()=>[F(h(e.trans("client_id")),1)]),_:1}),s("div",rz,[s("input",{type:"number",class:"form-control",value:o.client_id,disabled:""},null,8,dz)])]),s("div",cz,[d(w,null,{default:k(()=>[F(h(e.trans("client_secret")),1)]),_:1}),s("div",uz,[s("input",{type:"password",class:"form-control",value:o.client_secret,disabled:""},null,8,hz)])])])]),controls:k(()=>[s("button",{type:"button",onClick:t[5]||(t[5]=(...E)=>n.copyToken&&n.copyToken(...E)),class:"btn btn-primary",disabled:o.copied},[s("i",{class:x(o.copied?"fas fa-check":"fa fa-clipboard")},null,2),F(" "+h(o.copied?e.trans("clipboard-copy-message"):e.trans("copy")),1)],8,_z)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const pz=T(AH,[["render",mz]]);let fz={path:"/agent",component:ge,name:"Agents",redirect:"/agent/list",children:[{path:"list",name:"Agents Index",component:Ny,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},active:"agents"}}},{path:"create",name:"Agents Create",component:da,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"agents",to:"/agent"},active:"create"}}},{path:":id/edit",name:"Agent Edit",component:da,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"agents",to:"/agent"},active:"edit"}}}]},gz={path:"/department",component:ge,name:"Departments",redirect:"/department/list",children:[{path:"list",name:"Departments Index",component:a1,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},active:"departments"}}},{path:"create",name:"Department Create",component:ga,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"create"}}},{path:":id/edit",name:"Department Edit",component:ga,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"edit"}}},{path:":id",name:"Department View",component:yw,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"view"}}}]},vz={path:"/team",component:ge,name:"Teams",redirect:"/team/list",children:[{path:"list",name:"Teams Index",component:Ew,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},active:"team"}}},{path:"create",name:"Team Create",component:va,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"create"}}},{path:":id/edit",name:"Team Edit",component:va,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"edit"}}},{path:":id",name:"Team View",component:D0,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"view"}}}]},bz={path:"/email",component:ge,name:"Emails",redirect:"/email/list",children:[{path:"list",name:"Emails Index",component:W0,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},active:"emails"}}},{path:"getdiagno",name:"EmailDiagnostics",component:U2,meta:{title:"email_diagnostic",crumb:{link:{name:"admin_panel",to:"/"},active:"email_diagnostic"}}},{path:"oauth",name:"EmailAuth",component:Y2,meta:{title:"oauth_integration",crumb:{link:{name:"admin_panel",to:"/"},active:"oauth_integration"}}},{path:"oauth/:id",name:"EmailAuthSettings",component:hD,meta:{title:"oauth_integration_settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_integration",to:"/email/oauth"},active:"oauth_integration_settings"}}},{path:"create",name:"Email Create",component:ya,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"emails",to:"/email"},active:"create"}}},{path:":id/edit",name:"Email Edit",component:ya,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"emails",to:"/email"},active:"edit"}}}]},yz={path:"/breakline",component:ge,name:"Breaklines",redirect:"/breakline/list",children:[{path:"list",name:"Breaklines Index",component:BD,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},active:"breaklines"}}},{path:"create",name:"Breakline Create",component:ka,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"breaklines",to:"/breakline"},active:"create"}}},{path:":id/edit",name:"Breakline Edit",component:ka,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"breaklines",to:"/breakline"},active:"edit"}}}]},kz={path:"/helptopic",component:ge,name:"Helptopic",redirect:"/helptopic/list",children:[{path:"list",name:"Helptopic Index",component:cS,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},active:"help_topics"}}},{path:"create",name:"Helptopic Create",component:wa,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"help_topics",to:"/helptopic"},active:"create"}}},{path:":id/edit",name:"Helptopic Edit",component:wa,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"help_topics",to:"/helptopic"},active:"edit"}}}]},wz={path:"/sla",component:ge,name:"SLA",redirect:"/sla/list",children:[{path:"list",name:"SLA Index",component:PS,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},active:"sla-plans"}}},{path:"create",name:"SLA Create",component:Ca,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"sla-plans",to:"/sla"},active:"create"}}},{path:":id/edit",name:"SLA Edit",component:Ca,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"sla-plans",to:"/sla"},active:"edit"}}}]},Cz={path:"/business-hour",component:ge,name:"BusinessHours",redirect:"/business-hour/list",children:[{path:"list",name:"BusinessHours Index",component:$F,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},active:"business_hours"}}},{path:"create",name:"BusinessHour Create",component:Da,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"business_hours",to:"/business-hour"},active:"create"}}},{path:":id/edit",name:"BusinessHour Edit",component:Da,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"business_hours",to:"/business-hour"},active:"edit"}}}]},Dz={path:"/form-group",component:ge,name:"FormGroups",redirect:"/form-group/list",children:[{path:"list",name:"FormGroups Index",component:b8,meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},active:"form-groups"}}},{path:"create",name:"FormGroup Create",component:ha,props:{"form-name-obj":{id:"name",className:"col-md-4",label:"form_group_name",placeholder:"name_your_form_group",value:"",submitFormParamKey:"name"},"form-linker":[{id:"departments",className:"col-md-4",apiEndpoint:"/api/dependency/departments?config=true",label:"department",value:[],submitFormParamKey:"department_ids"},{id:"help_topics",className:"col-md-4",apiEndpoint:"/api/dependency/help-topics?config=true",label:"helptopic",value:[],submitFormParamKey:"help_topic_ids"}],"post-from-group-api":"api/post-form-group","edit-form-group-api":"api/get-form-group","form-category-type":"group"},meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"form-groups",to:"/form-group"},active:"create"}}},{path:"edit/:id",name:"FormGroup Edit",component:ha,props:{"form-name-obj":{id:"name",className:"col-md-4",label:"form_group_name",placeholder:"name_your_form_group",value:"",submitFormParamKey:"name"},"form-linker":[{id:"departments",className:"col-md-4",apiEndpoint:"/api/dependency/departments?config=true",label:"department",value:[],submitFormParamKey:"department_ids"},{id:"help_topics",className:"col-md-4",apiEndpoint:"/api/dependency/help-topics?config=true",label:"helptopic",value:[],submitFormParamKey:"help_topic_ids"}],"post-from-group-api":"api/post-form-group","edit-form-group-api":"api/get-form-group","form-category-type":"group"},meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"form-groups",to:"/form-group"},active:"edit"}}}]},Sz={path:"/workflow",component:ge,name:"Workflow",redirect:"/automator?type=workflow",children:[{path:"create",name:"Workflow Create",component:dt,props:{category:"workflow"},meta:{title:"workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"workflow",to:"/automator?type=workflow"},active:"create"}}},{path:":id/edit",name:"Workflow Edit",component:dt,props:{category:"workflow"},meta:{title:"workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"workflow",to:"/automator?type=workflow"},active:"edit"}}}]},$z={path:"/approval-workflow",component:ge,name:"Approval Workflow",redirect:"/approval-workflow/list",children:[{path:"list",name:"Approval Workflow Index",component:FT,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},active:"approval_workflow"}}},{path:"create",name:"Approval Workflow Create",component:Sa,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"approval_workflow",to:"/approval-workflow"},active:"create"}}},{path:":id/edit",name:"Approval Workflow Edit",component:Sa,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"approval_workflow",to:"/approval-workflow"},active:"edit"}}}]},Fz={path:"/ticket/priority",component:ge,name:"Ticket Priority",redirect:"/ticket/priority/list",children:[{path:"list",name:"Priority Index",component:c3,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},active:"priority"}}},{path:"create",name:"Priority Create",component:$a,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"priority",to:"/ticket/priority"},active:"create"}}},{path:":id/edit",name:"Priority Edit",component:$a,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"priority",to:"/ticket/priority"},active:"edit"}}}]},Mz={path:"/ticket-type",component:ge,name:"Ticket Types",redirect:"/ticket-type/list",children:[{path:"list",name:"Ticket Type Index",component:L3,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_type"}}},{path:"create",name:"Ticket Type Create",component:Fa,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_type",to:"/ticket-type"},active:"create"}}},{path:":id/edit",name:"Ticket Type Edit",component:Fa,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_type",to:"/ticket-type"},active:"edit"}}}]},Tz={path:"/listener",component:ge,name:"Listener",redirect:"/automator?type=listener",children:[{path:"create",name:"Listener Create",component:dt,props:{category:"listener"},meta:{title:"listeners",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"listeners",to:"/automator?type=listener"},active:"create"}}},{path:":id/edit",name:"Listener Edit",component:dt,props:{category:"listener"},meta:{title:"listeners",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"listeners",to:"/automator?type=listener"},active:"edit"}}}]},Ez={path:"/status",component:ge,name:"Status",redirect:"/status/list",children:[{path:"list",name:"Status Index",component:K3,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},active:"status"}}},{path:"create",name:"Status Create",component:Ma,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"status",to:"/status"},active:"create"}}},{path:":id/edit",name:"Status Edit",component:Ma,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"status",to:"/status"},active:"edit"}}}]},Lz={path:"/rating",component:ge,name:"Rating",redirect:"/rating/list",children:[{path:"list",name:"Rating Index",component:OE,meta:{title:"ratings_settings",crumb:{link:{name:"admin_panel",to:"/"},active:"ratings_settings"}}},{path:"create",name:"Rating Create",component:Ta,meta:{title:"create_rating",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ratings_settings",to:"/rating"},active:"create"}}},{path:":id/edit",name:"Rating Edit",component:Ta,meta:{title:"edit_rating",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ratings_settings",to:"/rating"},active:"edit"}}}]},Iz={path:"/label",component:ge,name:"Labels",redirect:"/label/list",children:[{path:"list",name:"Labels Index",component:wL,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},active:"labels"}}},{path:"create",name:"Label Create",component:Ea,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"labels",to:"/label"},active:"create"}}},{path:":id/edit",name:"Label Edit",component:Ea,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"labels",to:"/label"},active:"edit"}}}]},Az={path:"/tag",component:ge,name:"Tags",redirect:"/tag/list",children:[{path:"list",name:"Tags Index",component:RL,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},active:"tags"}}},{path:"create",name:"Tag Create",component:La,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"tags",to:"/tag"},active:"create"}}},{path:":id/edit",name:"Tag Edit",component:La,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"tags",to:"/tag"},active:"edit"}}}]},qz={path:"/source",component:ge,name:"Source",redirect:"/source/list",children:[{path:"list",name:"Source Index",component:t4,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},active:"source"}}},{path:"create",name:"Source Create",component:Ia,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"source",to:"/source"},active:"create"}}},{path:":id/edit",name:"Source Edit",component:Ia,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"source",to:"/source"},active:"edit"}}}]},Pz={path:"/recur",component:ge,name:"Recurring",redirect:"/recur/list",children:[{path:"list",name:"Recurring Tickets",component:ro,props:{from:"admin"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_recurring"}}},{path:"create",name:"Recurring Create",component:wt,props:{category:"ticket",panel:"admin",scenario:"recur",recur_mode:"create"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_recurring",to:"/recur"},active:"create"}}},{path:":id/edit",name:"Recurring Edit",component:wt,props:{category:"ticket",panel:"admin",scenario:"recur",recur_mode:"edit"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_recurring",to:"/recur"},active:"edit"}}}]},Vz={path:"/ticket-template",component:ge,name:"Ticket Templates",redirect:"/ticket-template/list",children:[{path:"list",name:"Ticket Templates Index",component:b4,meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_template"}}},{path:"create",name:"Ticket Template Create",component:wt,props:{category:"ticket",panel:"admin",scenario:"template",template_mode:"create"},meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_template",to:"/ticket-template"},active:"create"}}},{path:":id/edit",name:"Ticket Template Edit",component:wt,props:{category:"ticket",panel:"admin",scenario:"template",template_mode:"edit"},meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_template",to:"/ticket-template"},active:"edit"}}}]},Oz={path:"/ticket-pdf-template",component:ge,name:"Ticket PDF Templates",redirect:"/ticket-pdf-template/list",children:[{path:"list",name:"Ticket PDF Templates Index",component:T4,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_pdf_template"}}},{path:"create",name:"Ticket PDF Template Create",component:Aa,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_pdf_template",to:"/ticket-pdf-template"},active:"create"}}},{path:":id/edit",name:"Ticket PDF Template Edit",component:Aa,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_pdf_template",to:"/ticket-pdf-template"},active:"edit"}}}]},Nz={path:"/social/media",component:ge,name:"Social Login",redirect:"/social/media/list",children:[{path:"list",name:"Social Login Index",component:cI,meta:{title:"social-login",crumb:{link:{name:"admin_panel",to:"/"},active:"social-login"}}},{path:":provider",name:"Social Login Provider",component:DI,meta:{title:"social-login",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"social-login",to:"/social/media"},active:"settings"}}}]},xz={path:"/queue",component:ge,name:"Queue",redirect:"/queue/list",children:[{path:"list",name:"Queue Index",component:yA,meta:{title:"queues",crumb:{link:{name:"admin_panel",to:"/"},active:"queues"}}},{path:":id",name:"Queue Settings",component:qA,meta:{title:"queues",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"queues",to:"/queue"},active:"settings"}}}]},Uz={path:"/third-party-app",component:ge,name:"ThirdPartyApps",redirect:"/third-party-app/list",children:[{path:"list",name:"ThirdPartyApps Index",component:WA,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},active:"third_party_apps"}}},{path:"create",name:"ThirdPartyApp Create",component:qa,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"third_party_apps",to:"/third-party-app"},active:"create"}}},{path:":id/edit",name:"ThirdPartyApp Edit",component:qa,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"third_party_apps",to:"/third-party-app"},active:"edit"}}}]},Rz={path:"/single-sign-on/settings",component:ge,name:"SAML 2.0 Integration",redirect:"/single-sign-on/settings/index",children:[{path:"index",name:"SAML index",component:v6,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},active:"SAML_Integration"}}},{path:"add",name:"SAML Add",component:Pa,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"Add"}}},{path:":id",name:"SAML View",component:A6,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"View"}}},{path:":id/edit",name:"SAML Edit",component:Pa,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"edit"}}}]},jz={path:"/cache-driver",component:ge,name:"Cache Drivers",redirect:"/cache-driver/list",children:[{path:"list",name:"Cache Driver Index",component:mP,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},active:"cache-driver"}}},{path:"redis",name:"Redis Configs",component:FP,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"redis_config"}}},{path:"memcached",name:"Memcached Config",component:RP,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"Memcached Config"}}},{path:"dynamodb",name:"Dynamodb Config",component:e5,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"Dynamodb Config"}}}]},Bz={path:"/forms",component:ge,name:"forms",redirect:"/forms",children:[{path:"",name:"Forms Index",component:Q5,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},active:"forms"}}},{path:":type/edit",name:"form-builder-ui",component:wV,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms",to:"/forms"},active:"edit"}}}]},Hz={path:"/view/import-tracking-details",component:ge,name:"User Import Progress",redirect:"/view/import-tracking-details",children:[{path:":id",component:VV,name:"User Import Progress Page",props:{},meta:{title:"user_import",crumb:{link:{name:"admin_panel",to:"/"},active:"user_import"}}}]},zz={path:"/search-driver/settings",component:ge,name:"search-drivers",redirect:"/search-driver/settings/list",children:[{path:"list",name:"Drivers Index",component:fO,meta:{title:"search-drivers",crumb:{link:{name:"admin_panel",to:"/"},active:"search-drivers"}}},{path:":id",name:"Drivers Settings",component:EO,meta:{title:"search-drivers",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"search-drivers",to:"/search-driver/settings/list"},active:"settings"}}}]},Wz={path:"/websockets",component:ge,name:"Socket Drivers",redirect:"/websockets/settings",children:[{path:"settings",name:"WebSocket Settings",component:k_,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},active:"websockets"}}},{path:"redis",name:"Redis Config",component:BO,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"redis_config"}}},{path:"ably",name:"Ably Config",component:aN,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"Ably Config"}}},{path:"pusher",name:"Pusher Config",component:fN,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"Pusher Config"}}}]},Gz={path:"/personal-access-token",component:ge,name:"personal_access_token",redirect:"/personal-access-token/list",children:[{path:"list",name:"personal_access_token.index",component:kN,meta:{title:"personal_access_token",crumb:{link:{name:"admin_panel",to:"/"},active:"personal_access_token"}}},{path:"create",name:"personal_access_token.create",component:Oa,meta:{title:"personal-access-token",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"personal_access_token",to:"/personal-access-token"},active:"create"}}},{path:":id/edit",name:"personal_access_token.edit",component:Oa,meta:{title:"personal-access-token",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"personal_access_token",to:"/personal-access-token"},active:"edit"}}}]},Yz={path:"/trigger",component:ge,name:"Trigger",redirect:"/trigger/list",children:[{path:"create",name:"Trigger Create",component:dt,props:{category:"trigger"},meta:{title:"trigger",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"trigger",to:"/automator?type=trigger"},active:"create"}}},{path:":id/edit",name:"Trigger Edit",component:dt,props:{category:"trigger"},meta:{title:"trigger",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"trigger",to:"/automator?type=trigger"},active:"edit"}}}]},Kz={path:"/new/forms",component:ge,name:"new.forms.index",redirect:"/new/forms/index",children:[{path:"index",name:"forms.index",component:KB,meta:{title:"forms_index",crumb:{link:{name:"admin_panel",to:"/"},active:"forms_index"}}},{path:":type/list",name:"forms.list",component:Mx,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms_index",to:"/new/forms/index"},active:"forms"}}},{path:":type/:id/edit",name:"forms.builder",component:NB,beforeEnter:(e,t,a)=>{const r=e.params.type;e.meta.crumb.root_link.to=r==="ticket"?`/new/forms/${r}/list`:"/new/forms/index",a()},meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms",to:""},active:"edit"}}}]},Jz={path:"/ticket-fields",component:ge,name:"ticket.fields",redirect:"/ticket-fields/list",children:[{path:"/ticket-fields/list",name:"ticket.fields.index",component:r9,meta:{title:"tickets",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket-fields"}}},{path:"/ticket-fields/formFields/create",name:"ticket.fields.create",component:ja,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"create"}}},{path:"/ticket-fields/edit/formFields/:type/:id",name:"ticket.fields.edit",component:ja,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"edit"}}},{path:"/ticket-fields/sections/create",name:"ticket.sections.create",component:Ba,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"create"}}},{path:"/ticket-fields/edit/sections/:type/:id",name:"ticket.sections.edit",component:Ba,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"edit"}}}]},Qz={path:"/oauth",component:ge,name:"oauth_2_0",redirect:"/oauth/list",children:[{path:"list",name:"oauth.index",component:cH,meta:{title:"oauth_2_0",crumb:{link:{name:"admin_panel",to:"/"},active:"oauth_2_0"}}},{path:"create",name:"oauth.create",component:IH,meta:{title:"oauth-client",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_2_0",to:"/oauth/list"},active:"create"}}},{path:":id/edit",name:"oauth.edit",component:pz,meta:{title:"oauth-client",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_2_0",to:"/oauth/list"},active:"edit"}}}]},Xz=[{path:"/",component:ge,redirect:"/home",name:"Admin Layout",children:[{path:"home",name:"Admin Index",component:Ut,meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"dashboard",name:"Admin Dashboard",component:Ut,redirect:"home",meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"admin",name:"Admin Index Page",component:Ut,redirect:"home",meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"widgets",name:"Widgets",component:rl,meta:{title:"widgets",crumb:{link:{name:"admin_panel",to:"/"},active:"widgets"}}},{path:"/getticket",name:"TicketSettings",component:jl,meta:{title:"ticket_settings",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_settings"}}},{path:"/close-workflow",name:"Close Ticket Workflow",component:rr,meta:{title:"close_ticket_workflow",crumb:{link:{name:"admin_panel",to:"/"},active:"close_ticket_workflow"}}},{path:"/getcompany",name:"CompanySettings",component:ld,meta:{title:"company",crumb:{link:{name:"admin_panel",to:"/"},active:"company"}}},{path:"/getsystem",name:"SystemSettings",component:Cd,meta:{title:"system",crumb:{link:{name:"admin_panel",to:"/"},active:"system"}}},{path:"/user-options",name:"UserOptions",component:Yd,meta:{title:"user-options",crumb:{link:{name:"admin_panel",to:"/"},active:"user-options"}}},{path:"/languages",name:"Languages",component:cc,meta:{title:"language",crumb:{link:{name:"admin_panel",to:"/"},active:"language"}}},{path:"/job-scheduler",name:"CRONSettings",component:iu,meta:{title:"cron",crumb:{link:{name:"admin_panel",to:"/"},active:"cron"}}},{path:"/security",name:"SecuritySettings",component:ku,meta:{title:"security",crumb:{link:{name:"admin_panel",to:"/"},active:"security"}}},{path:"/file-system-settings",name:"FileSystem",component:Ou,meta:{title:"settings_file_system",crumb:{link:{name:"admin_panel",to:"/"},active:"settings_file_system"}}},{path:"/system-backup",name:"SystemBackup",component:th,meta:{title:"system-backup",crumb:{link:{name:"admin_panel",to:"/"},active:"system-backup"}}},{path:"social-icon",name:"Widgets Social Icon",component:wh,meta:{title:"social-icon-links",crumb:{link:{name:"admin_panel",to:"/"},active:"social-icon-links"}}},{path:"settings-api",name:"API Settings",component:Vh,meta:{title:"api",crumb:{link:{name:"admin_panel",to:"/"},active:"api"}}},{path:"webhook",name:"Webhook Settings",component:q_,meta:{title:"webhook",crumb:{link:{name:"admin_panel",to:"/"},active:"webhook"}}},{path:"importer",name:"Import Upload",component:dm,meta:{title:"importer_user_import",crumb:{link:{name:"admin_panel",to:"/"},active:"importer_user_import"}}},{path:"recaptcha",name:"Recaptcha",component:Dm,meta:{title:"recaptcha",crumb:{link:{name:"admin_panel",to:"/"},active:"recaptcha"}}},{path:"login-log-setting",name:"LoginLogs",component:Nm,meta:{title:"login-log-setting",crumb:{link:{name:"admin_panel",to:"/"},active:"login-log-setting"}}},{path:"client/ticket-filter",name:"ClientFilter",component:Km,meta:{title:"client-filter",crumb:{link:{name:"admin_panel",to:"/"},active:"client-filter"}}},{path:"plugins",name:"Plugins",component:lp,meta:{title:"plugins",crumb:{link:{name:"admin_panel",to:"/"},active:"plugins"}}},{path:"modules",name:"Modules",component:wp,meta:{title:"modules",crumb:{link:{name:"admin_panel",to:"/"},active:"modules"}}},{path:"error-and-debugging-options",name:"ErrorDebug",component:Pp,meta:{title:"error-debug-settings",crumb:{link:{name:"admin_panel",to:"/"},active:"error-debug-settings"}}},{path:"system-level-activity-logs",name:"System Level Activity Logs",component:Qg,meta:{title:"system-level-activity-logs",crumb:{link:{name:"admin_panel",to:"/"},active:"system-level-activity-logs"}}},{path:"check-updates",name:"System Updates",component:Xv,meta:{title:"application_updates",crumb:{link:{name:"admin_panel",to:"/"},active:"application_updates"}}},{path:"clean-dummy-data",name:"DummyData",component:_b,meta:{title:"delete_dummy_data",crumb:{link:{name:"admin_panel",to:"/"},active:"delete_dummy_data"}}},{path:"automator",name:"TriggerAutomator",component:Ty,meta:{title:"automator",crumb:{link:{name:"admin_panel",to:"/"},active:"automator"}}}]},fz,gz,vz,bz,yz,kz,wz,Cz,Dz,Sz,$z,Fz,Mz,Tz,Ez,Iz,Az,qz,Pz,Nz,xz,Uz,Lz,Vz,Oz,Rz,Hz,jz,Bz,zz,Wz,Gz,Qz,Yz,Kz,Jz,{path:"/:pathMatch(.*)*",name:"404",component:lo}];const oW=Ks({history:Js(),inkActiveClass:"",linkExactActiveClass:"active exact-active",routes:Xz,scrollBehavior(e,t,a){return{top:0}}});export{ge as A,as as F,Ea as L,As as M,dt as S,Va as T,em as U,Ps as _,f5 as a,D5 as b,Mg as c,ra as d,ha as e,oW as r,os as v};
