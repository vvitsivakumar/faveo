import{V as G,l as D,c as K,_ as N,s as R,e as O,j as U,T as Q}from"./bootstrap.js";import{a as P,r as b,q as A,b as C,w as y,d as r,o as n,f as i,t as a,c as l,i as x,e as w,n as g,g as v,G as q,u as J,a1 as M,as as X,m as j,a2 as T,p as W,j as H,F as E,h as V,T as z}from"./vendor.js";function at(e){const{old_password:t,new_password:o,confirm_password:c}=e;let s={old_password:[t,"isRequired"],new_password:[o,"isRequired","min(6)","max(20)"],confirm_password:[c,"isRequired","min(6)","max(20)"]};const d=new G(D),{errors:m,isValid:p}=d.validate(s);return K.dispatch("setValidationError",m),{errors:m,isValid:p}}const Y={name:"remove-authenticator-modal",description:"Remove Authenticator Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},alertName:{type:String,default:"edit_agent_profile"},id:{type:[String,Number],default:""},color:{type:String,default:"#1d78ff"},removedFA:{type:Function,default:()=>{}},from:{type:String,default:""},buttonStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,showPasswordRequiredFrom:!1,password:""}},methods:{validatePass(){this.verifyLoader=!0;const e={};e.password=this.password,P.post("/verify/password",e).then(t=>{this.loading=!1,this.onRemove()}).catch(t=>{this.loading=!1,this.$store.dispatch("setValidationError",{password:"Incorrect password."})})},onRemove(){this.loading=!0,this.isDisabled=!0,P.post("/2fa/disable/"+this.id).then(e=>{window.emitter.emit("updateEditData",this.from=="user_view"),this.onClose(),this.removedFA(),R(e,this.alertName),this.loading=!1,this.isDisabled=!1}).catch(e=>{e.response.data.message==="password_confirmation_required"?this.showPasswordRequiredFrom=!0:(this.onClose(),O(e,this.alertName)),this.isDisabled=!1,this.loading=!1})},onChange(e,t){this[t]=e},submit(){this.showPasswordRequiredFrom?this.validatePass():this.onRemove()},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.validatePass()}},components:{"text-field":U}},Z={key:0},$={key:1},ee={key:2,class:"row"};function se(e,t,o,c,s,d){const m=b("text-field"),p=b("custom-loader"),k=b("modal"),I=A("focus-first-input");return o.showModal?(n(),C(k,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:s.containerStyle},{title:y(()=>[i("h4",null,a(e.lang("turn_off_authenticator")),1)]),fields:y(()=>[s.showPasswordRequiredFrom?x((n(),l("div",$,[w(m,{label:e.lang("to_continue_first_verify"),value:s.password,type:"password",name:"password",placehold:"Enter Password...",keyupListener:d.triggerEvent,inputStyle:o.inputStyle,onChange:d.onChange,classname:"col-sm-12"},null,8,["label","value","keyupListener","inputStyle","onChange"])])),[[I]]):(n(),l("span",Z,a(e.lang("turn_off_authenticator_setup")),1)),s.loading?(n(),l("div",ee,[w(p,{duration:4e3,color:o.color},null,8,["color"])])):r("",!0)]),controls:y(()=>[i("button",{class:g(["btn pull-right float-right",s.showPasswordRequiredFrom?o.from==="client"?"btn-custom":"btn-primary":"btn-danger"]),onClick:t[0]||(t[0]=L=>d.submit()),style:q(s.showPasswordRequiredFrom?o.buttonStyle:"")},[i("i",{class:g(["fas",s.showPasswordRequiredFrom?"fa-check":"fa-power-off"])},null,2),v(" "+a(s.showPasswordRequiredFrom?e.lang("validate"):e.lang("turn_off")),1)],6)]),_:1},8,["showModal","onClose","containerStyle"])):r("",!0)}const dt=N(Y,[["render",se]]),te={name:"logout-modal",description:"Logout Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},userId:{type:[String,Number],default:""},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,password:""}},methods:{onChange(e,t){this[t]=e},onSubmit(){if(this.password){this.loading=!0;let e={};e.password=this.password,P.post("/api/logoutFromAllDevice/"+this.userId,e).then(t=>{this.loading=!1,R(t,this.alertName),this.onClose()}).catch(t=>{this.loading=!1,O(t,"logout-modal"),this.$store.dispatch("unsetValidationError")})}else this.$store.dispatch("setValidationError",{password:"This field is required"})}},components:{"text-field":U}},oe={class:"modal-title"},ie={key:0,class:"row"},ne=i("i",{class:"fas fa-check"},null,-1);function le(e,t,o,c,s,d){const m=b("alert"),p=b("text-field"),k=b("reuse-loader"),I=b("modal"),L=A("focus-first-input");return o.showModal?(n(),C(I,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:s.containerStyle},{title:y(()=>[i("h4",oe,a(e.trans("logout-from-all-devices")),1)]),alert:y(()=>[w(m,{componentName:"logout-modal"})]),fields:y(()=>[x((n(),l("div",null,[s.loading?r("",!0):(n(),C(p,{key:0,label:e.trans("password"),value:s.password,type:"password",name:"password",required:!0,placehold:e.lang("enter_password"),onChange:d.onChange,inputStyle:o.inputStyle},null,8,["label","value","placehold","onChange","inputStyle"]))])),[[L]]),s.loading?(n(),l("div",ie,[w(k,{"animation-duration":4e3,size:60})])):r("",!0)]),controls:y(()=>[i("button",{class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary"]]),onClick:t[0]||(t[0]=F=>d.onSubmit()),style:q(o.btnStyle)},[ne,v(" "+a(e.trans("proceed")),1)],6)]),_:1},8,["showModal","onClose","containerStyle"])):r("",!0)}const ae=N(te,[["render",le]]),de={name:"login-logs-toggle",props:{userId:{type:[String,Number],default:""},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{isEnabled:!1,updating:!1,loading:!1}},beforeMount(){this.getStatus()},methods:{getStatus(){this.loading=!0,P.get("/api/login/info/"+this.userId).then(e=>{this.loading=!1,this.isEnabled=e.data.data.allow_unrecognized_login}).catch(e=>{this.loading=!1,this.isEnabled=!1})},toggleSwitch(e){this.updating=!0,P.post("/api/allow-login-logs/"+this.userId+"/"+e).then(t=>{this.isEnabled=e,this.updating=!1,R(t,this.alertName)}).catch(t=>{this.updating=!1,O(t,this.alertName)})}}},ce={class:"card card-light"},re={class:"card-header"},ue={class:"card-title"},fe={key:0,class:"card-body"},he={class:"row"},_e={class:"col-md-9"},me=i("i",{class:"fas fa-bell"},null,-1),ge={class:"col-md-3"},ve=i("i",{class:"fas fa-toggle-on"},null,-1),pe=i("i",{class:"fas fa-power-off"},null,-1);function be(e,t,o,c,s,d){return n(),l("div",ce,[i("div",re,[i("h3",ue,a(e.trans("allow-login-logs")),1)]),s.loading?r("",!0):(n(),l("div",fe,[i("div",he,[i("div",_e,[i("span",null,[me,v("  "+a(e.trans("get_alert_unrecognized_logins")),1)])]),i("div",ge,[!s.isEnabled&&!s.updating?(n(),l("button",{key:0,type:"button",class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary","float-right"]]),style:q(o.btnStyle),onClick:t[0]||(t[0]=m=>d.toggleSwitch(1))},[ve,v(" "+a(e.trans("turn_on")),1)],6)):r("",!0),s.isEnabled&&!s.updating?(n(),l("button",{key:1,type:"button",class:"btn btn-danger float-right",onClick:t[1]||(t[1]=m=>d.toggleSwitch(0))},[pe,v(" "+a(e.trans("turn_off")),1)])):r("",!0),s.updating?(n(),l("button",{key:2,type:"button",class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary","float-right disabled"]]),style:q(o.btnStyle)},a(e.trans("updating")),7)):r("",!0)])])]))])}const ye=N(de,[["render",be]]);const we=e=>(W("data-v-57072973"),e=e(),H(),e),ke={class:"modal-title"},Ie={class:"pl-3"},Se={class:"row"},xe={class:"col-sm-12"},Ce={class:"row pb-4"},Le={class:"col-sm-8"},De={class:"row pt-2"},Pe={class:"col-sm-2 pr-0"},Me={class:"icon-container"},Te={key:0,class:"col-sm-9"},Ne={class:"mb-0 text-muted"},Fe={key:0,class:"pl-1"},Ee=we(()=>i("i",{class:"fas fa-circle-check indicator"},null,-1)),qe=[Ee],je={key:1,class:"pl-1"},Oe={key:2},Re={key:1,class:"pt-4"},Ae={class:"row"},Be={class:"col-sm-6 pb-4"},Ve={class:"text-muted"},ze={key:0,class:"col-sm-6 pb-4"},Ue={class:"text-muted"},Je={key:1,class:"col-sm-6 pb-4"},We={class:"text-muted"},He={class:"col-sm-6 pb-4"},Ge={class:"text-muted"},Ke={class:"col-sm-6 pb-4"},Qe={class:"text-muted"},Xe={key:0},Ye={key:1},Ze={__name:"LoginLogsInfo",props:{loginLogsInfo:{type:Object,default:()=>{}},showModal:{type:Boolean,default:!1},onClose:{type:Function}},setup(e){const t=e,o=J(),c=M(""),s=M(""),d=M(""),m=M({});X(()=>{I(t.loginLogsInfo),L(t.loginLogsInfo),F(t.loginLogsInfo);let _=t.loginLogsInfo.location;m.value=JSON.parse(_)});const p=j(()=>o.getters.formattedTime),k=j(()=>o.getters.timeDiffForPast),I=_=>{const f=_.device_family;let u;if(f!==null)switch(!0){case f.includes("PC"):u="fa-solid fa-desktop fa-4x text-muted";break;case(f.includes("Device")||f.includes("faveomobileapp")):u="fa-solid fa-mobile fa-4x text-muted";break;case f.includes("Postman"):u="fa-solid fa-rocket fa-3x text-muted";break;default:u="fa-question-circle-o fa-3x text-muted"}else u="fa-regular fa-circle-question fa-3x";return c.value=u},L=_=>{const f=_.browser;let u;switch(!0){case f.includes("Chrome"):u="fa-brands fa-chrome fa-2x text-muted";break;case f.includes("Opera"):u="fa-brands fa-opera fa-2x text-muted";break;case(f.includes("Edge")||f.includes("Edge")):u="fa-brands fa-edge fa-2x text-muted";break;case f.includes("Firefox"):u="fa-brands fa-firefox text-muted";break;case f.includes("Mobile Safari"):u="fa-brands fa-safari fa-2x text-muted";break;case f.includes("Postman"):u="fa-solid fa-rocket fa-2x text-muted";break;default:u="fa-brands fa-chrome fa-2x text-muted"}return s.value=u},F=_=>{const f=_.platform;let u;switch(!0){case(f.includes("Linux")||f.includes("Ubuntu")):u="fa-brands fa-ubuntu fa-2x text-muted";break;case f.includes("Android"):u="fa-brands fa-android fa-2x text-muted";break;case(f.includes("iOS")||f.includes("Mac")):u="fa-brands fa-apple fa-2x text-muted";break;case f.includes("Window"):u="fa-brands fa-windows fa-2x text-muted";break;case f.includes("Postman"):u="fa-solid fa-rocket fa-2x text-muted";break;default:u="fa-brands fa-windows fa-2x text-muted"}return d.value=u},S=_=>{const f=_.device_family;let u;return f===null?u=this.lang("unknown_device"):f.includes("faveomobileapp")?u=_.device.replace("-faveomobileapp",""):u=_.device_family,u},h=M({width:"800px"});return(_,f)=>{const u=b("modal");return e.showModal?(n(),C(u,{key:0,showModal:e.showModal,onClose:e.onClose,containerStyle:h.value},{title:y(()=>[i("h4",ke,a(_.trans("log_session_detail")),1)]),fields:y(()=>[i("section",Ie,[i("div",Se,[i("div",xe,[i("div",Ce,[i("div",Le,[i("div",De,[i("div",Pe,[i("div",Me,[i("i",{class:g([c.value,e.loginLogsInfo.device_family.includes("Device")||e.loginLogsInfo.device_family.includes("faveomobileapp")?"fa-3x":"device-session"])},null,2),e.loginLogsInfo.device_family!=="Postman"?(n(),l("i",{key:0,class:g([e.loginLogsInfo.device_family.includes("Device")||e.loginLogsInfo.device_family.includes("faveomobileapp")?"device-icons":"device-icon",d.value])},null,2)):r("",!0)])]),e.loginLogsInfo.device_family?(n(),l("div",Te,[i("b",Ne,a(S(e.loginLogsInfo)),1),e.loginLogsInfo.current_session?(n(),l("span",Fe,qe)):r("",!0),e.loginLogsInfo.current_session?(n(),l("div",je,a(_.trans("active_session")),1)):(n(),l("div",Oe,a(k.value(e.loginLogsInfo.login_at)),1))])):(n(),l("div",Re,[i("h6",null,a(_.trans("unknown_device")),1)]))])])])])]),i("div",Ae,[i("div",Be,[i("h6",Ve,a(T(D)("login_at")),1),v(" "+a(e.loginLogsInfo.login_at?p.value(e.loginLogsInfo.login_at):"---"),1)]),e.loginLogsInfo.device_family!=="Postman"?(n(),l("div",ze,[i("h6",Ue,a(T(D)("operating_system")),1),i("div",null,[e.loginLogsInfo.platform?(n(),l("i",{key:0,class:g(d.value)},null,2)):r("",!0),v("  "+a(e.loginLogsInfo.platform?e.loginLogsInfo.platform:"---"),1)])])):r("",!0),e.loginLogsInfo.device_family!=="Postman"&&!e.loginLogsInfo.device_family.includes("faveomobileapp")?(n(),l("div",Je,[i("h6",We,a(T(D)("browser")),1),i("div",null,[e.loginLogsInfo.browser?(n(),l("i",{key:0,class:g(s.value)},null,2)):r("",!0),v("  "+a(e.loginLogsInfo.browser?e.loginLogsInfo.browser:"---"),1)])])):r("",!0),i("div",He,[i("h6",Ge,a(T(D)("ip_address")),1),v(" "+a(e.loginLogsInfo.ip_address!=="::1"?e.loginLogsInfo.ip_address:"---"),1)]),i("div",Ke,[i("h6",Qe,a(T(D)("location")),1),m.value?(n(),l("div",Xe,a(m.value.city)+", "+a(m.value.state_name)+", "+a(m.value.country),1)):(n(),l("div",Ye,a("---")))])])])]),_:1},8,["showModal","onClose","containerStyle"])):r("",!0)}}},$e=N(Ze,[["__scopeId","data-v-57072973"]]);const es={name:"login-logs",setup(){const e=J();return{formattedTime:j(()=>e.getters.formattedTime),timeDiffForPast:j(()=>e.getters.timeDiffForPast)}},props:{userId:{type:[String,Number],default:""},showBtn:{type:Boolean,default:!1},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{columns:["device_family","platform","browser","location","login_at","info"],apiUrl:"/api/login/info/"+this.userId,options:{},showModal:!1,showSwitch:!1,componentTitle:"loginLogs",loading:!0,showInfoModal:!1,infoData:{},show_pagination:!0,sessions:[],singleCard:!1,profilePage:!1,sessionsData:{web_session:[],mobile_web_session:[],mobile_app_session:[],third_party_session:[]},showIndividualDetails:!1,showDetails:!0,individualInfo:[],tableUrl:{web_session:"",mobile_web_session:"",mobile_app_session:"",third_party_session:""},ShowDeviceList:!1,individualInfoLocation:{},category:"web_session",categoryData:[]}},beforeMount(){window.location.pathname.includes("profile")?this.profilePage=!0:this.profilePage=!1;const t=this;this.options={headings:{device_family:t.lang("device"),platform:t.lang("platform_OS"),browser:t.lang("browser"),location:t.lang("location"),login_at:t.lang("login_at"),info:t.lang("info")},texts:{filter:"",limit:""},columnsClasses:{device_family:"login-device",platform:"login-plat",browser:"login-browser",location:"login-location",login_at:"login-at",info:"login-info"},templates:{login_at(o,c){return t.formattedTime(c.login_at)},device_family(o,c){const s=t.iconProvider(c,"device"),d=t.deviceType(c,"info"),m=t.h("i",{class:[s,"fa-2x"]}),p=t.h("span",{class:"ml-2"},d);return t.h("div",[m,p])},platform(o,c){if(c.device_family==="Postman")return"--";{let s=t.h("i",{class:[t.iconProvider(c,"platform"),"fa-2x"]}),d={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:c.platform};return t.h("div",d,[s])}},browser(o,c){if(c.device_family==="Postman"||c.device_family.includes("faveomobileapp"))return"--";{let s=t.h("i",{class:[t.iconProvider(c,"browser"),"fa-2x"]}),d={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:c.browser};return t.h("div",d,[s])}},location(o,c){let s,d,m,p;try{s=c.location?JSON.parse(c.location):null,d=s==null?void 0:s.city,m=s==null?void 0:s.state_name,p=s==null?void 0:s.country}catch{return"--"}return s?t.h("p",{},`${d}, ${m}, ${p}`):"--"},info(o,c){let s=t.h("i",{class:"fas fa-info-circle fa-1x text-muted"}),d={class:"btn btn-tool","data-bs-toggle":"v-tooltip","data-bs-placement":"top",title:t.lang("info")};return c.browser===null&&c.device===null&&c.device_family===null?d.class+=" disabled":d.onClick=()=>{t.openInfo(c)},t.h("button",d,[s])}},sortable:["login_at"],filterable:["device_family","platform","browser","login_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(o){return{"sort-field":o.orderBy?o.orderBy:"id","sort-order":o.ascending?"desc":"asc","search-query":o.query.trim(),limit:o.limit}},responseAdapter({data:o}){return{data:o.data.data,count:o.data.total}}},this.getInitialSessions()},mounted(){this.adjustCardSize(),window.addEventListener("resize",this.adjustCardSize)},beforeDestroy(){window.removeEventListener("resize",this.adjustCardSize)},methods:{async getInitialSessions(){try{this.loading=!0;const e=await P.get(this.apiUrl+"?need_all=0");this.loading=!1,this.sessions=e.data.data,this.sessionsData={web_session:[],mobile_web_session:[],mobile_app_session:[],third_party_session:[]},Object.values(this.sessions).forEach(o=>{let c;o.device_family!==null&&o.device_family!==void 0&&(o.device_family.includes("PC")?c="web_session":o.device_family.includes("Device")?c="mobile_web_session":o.device_family.includes("faveomobileapp")?c="mobile_app_session":c="third_party_session",this.sessionsData[c].push(o)),this.callSession(this.sessionsData.web_session,"web_session")})}catch(e){this.loading=!1,O(e)}},callSession(e,t){this.category=t,this.categoryData=e,this.showDetails=!0,this.showIndividualDetails=!1,this.ShowDeviceList=!1},onClose(){this.showModal=!1},refreshTable(){this.getInitialSessions(),window.emitter.emit("loginLogsrefreshData")},handelLoader(e){this.loading=e},openInfo(e){this.infoData=e,this.showInfoModal=!0},onInfoClose(){this.showInfoModal=!1},deviceType(e,t=""){const o=e.device_family;let c;return o===null?c=this.lang("unknown_device"):o.includes("faveomobileapp")&&t!=="table"?c=t==="info"?e.device.replace("-faveomobileapp",""):o.replace("-faveomobileapp",""):c=e.device_family,c},iconProvider(e,t){switch(t){case"device":return this.deviceIcon(e,t);case"browser":return this.browserIcon(e);case"platform":return this.platformIcon(e)}},deviceIcon(e){const t=e.device_family;let o;if(t!==null)switch(!0){case t.includes("PC"):o="fa-solid fa-desktop text-muted";break;case(t.includes("Device")||t.includes("faveomobileapp")):o="fa-solid fa-mobile text-muted";break;case t.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-solid fa-desktop text-muted"}else o="fa-regular fa-circle-question text-muted";return o},browserIcon(e){const t=e.browser;let o;if(t!==null){switch(!0){case t.includes("Chrome"):o="fa-brands fa-chrome text-muted";break;case t.includes("Opera"):o="fa-brands fa-opera text-muted";break;case(t.includes("Edge")||t.includes("Edge")):o="fa-brands fa-edge text-muted";break;case t.includes("Firefox"):o="fa-brands fa-firefox text-muted";break;case t.includes("Mobile Safari"):o="fa-brands fa-safari text-muted";break;case t.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-brands fa-chrome text-muted"}return o}},platformIcon(e){const t=e.platform;let o;if(t!==null){switch(!0){case(t.includes("Linux")||t.includes("Ubuntu")):o="fa-brands fa-ubuntu text-muted";break;case t.includes("Android"):o="fa-brands fa-android text-muted";break;case(t.includes("iOS")||t.includes("Mac")):o="fa-brands fa-apple text-muted";break;case t.includes("Window"):o="fa-brands fa-windows text-muted";break;case t.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-brands fa-windows text-muted"}return o}},showIndividualInfo(e){this.showDetails=!1,this.showIndividualDetails=!0,this.individualInfo=e,e.location!==void 0?this.individualInfoLocation=JSON.parse(e.location):this.individualInfoLocation={}},showAllSession(){this.showDetails=!0,this.showIndividualDetails=!1,this.ShowDeviceList=!1},showTablesInfo(e){this.tableUrl=this.apiUrl+"?deviceFilter="+e.trim(),this.showDetails=!1,this.showIndividualDetails=!1,this.loading=!0,this.ShowDeviceList=!0},SessionTooltip(e){if(e==="web_session")return"web_session_tooltip";if(e==="mobile_web_session")return"mobile_web_session_tooltip";if(e==="mobile_app_session")return"mobile_app_session_tooltip";if(e==="third_party_session")return"third_party_session_tooltip"},adjustCardSize(){const e=document.querySelector("#login-logs");e&&(e.offsetWidth>400?this.singleCard=!1:this.singleCard=!0)}},components:{"logout-modal":ae,"logs-switch":ye,"login-logs-info":$e,"tool-tip":Q}},B=e=>(W("data-v-71d67d84"),e=e(),H(),e),ss={id:"login-logs"},ts={key:1},os={class:"card-tools"},is=B(()=>i("i",{class:"fas fa-power-off"},null,-1)),ns=["disabled"],ls=B(()=>i("i",{class:"fas fa-sync-alt"},null,-1)),as=[ls],ds={class:"nav nav-tabs"},cs={key:0,class:"nav-item cursor-pointer"},rs=["onClick"],us={class:"nav-item ml-auto mt-04"},fs={href:"javascript:;",class:"float-right"},hs={class:"card-body pl-0 pr-0"},_s={key:0,class:"row"},ms={class:"card sessions-card"},gs={class:"card-body"},vs={class:"row"},ps={class:"col-12"},bs={class:"row"},ys={class:"col-3 pr-0"},ws={class:"icon-container"},ks={class:"col-9 pl-0"},Is=["onClick"],Ss=["onClick"],xs={class:"fas fa-info-circle fa-1x text-muted"},Cs={key:0,class:"login-info-text"},Ls={key:1,class:"login-info-text"},Ds={key:1},Ps={class:"pl-3"},Ms={class:"row"},Ts={class:"row pb-4"},Ns={class:"row pt-2"},Fs={class:"col-sm-2 pl-0"},Es={class:"icon-container pr-0"},qs={class:"mb-0 text-muted"},js={key:0,class:"pl-1"},Os=B(()=>i("i",{class:"fas fa-circle-check indicator"},null,-1)),Rs=[Os],As={class:"fas fa-info-circle fa-1x text-muted"},Bs={key:1},Vs={key:2},zs={key:1,class:"pt-4"},Us={class:"row"},Js={class:"col-sm-6 pb-4"},Ws={class:"text-muted"},Hs={key:0,class:"col-sm-6 pb-4"},Gs={class:"text-muted"},Ks={key:1,class:"col-sm-6 pb-4"},Qs={class:"text-muted"},Xs={class:"col-sm-6 pb-4"},Ys={class:"text-muted"},Zs={class:"col-sm-6 pb-4"},$s={class:"text-muted"},et={key:0},st={key:1},tt={key:2,id:"login_logs_index"},ot={key:1,class:"no-data-section"};function it(e,t,o,c,s,d){const m=b("logs-switch"),p=b("alert"),k=b("data-table"),I=b("faveo-box"),L=b("logout-modal"),F=b("login-logs-info"),S=A("tooltip");return n(),l("div",ss,[o.showBtn?(n(),C(m,{key:0,userId:o.userId,btnStyle:o.btnStyle,panel:o.panel,alertName:o.alertName},null,8,["userId","btnStyle","panel","alertName"])):r("",!0),v(),o.alertName!="edit_agent_profile"?(n(),l("br",ts)):r("",!0),w(p,{componentName:"dataTableModal"}),w(I,{title:e.trans("login-logs")},{customActions:y(()=>[i("div",os,[o.showBtn?(n(),l("button",{key:0,class:"btn btn-sm btn-danger",onClick:t[0]||(t[0]=h=>s.showModal=!0)},[is,v(" "+a(e.trans("logout-from-all-devices")),1)])):r("",!0),v("   "),i("span",null,[x((n(),l("button",{type:"button",class:g(["btn btn-tool",s.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[1]||(t[1]=h=>d.refreshTable()),disabled:s.loading||s.sessions.length===0},as,10,ns)),[[S,e.lang("refresh")]])])])]),default:y(()=>[s.sessions.length!==0?(n(),l(E,{key:0},[i("ul",ds,[(n(!0),l(E,null,V(s.sessionsData,(h,_)=>(n(),l(E,null,[h.length>0?(n(),l("li",cs,[x((n(),l("a",{id:"sessions_tab",class:g(["nav-link",{active:s.category===_}]),"data-toggle":"pill",onClick:f=>d.callSession(h,_)},[i("b",null,a(e.trans(_)),1)],10,rs)),[[S,e.trans(d.SessionTooltip(_))]])])):r("",!0)],64))),256)),i("li",us,[s.showDetails?r("",!0):(n(),l("div",{key:0,onClick:t[2]||(t[2]=h=>d.showAllSession()),class:"float-left pt-2"},[i("a",fs,[i("b",null,a(e.trans("view_all_sessions")),1)])]))])]),i("div",hs,[s.showDetails?(n(),l("div",_s,[(n(!0),l(E,null,V(s.categoryData,h=>(n(),l("div",{key:h,class:g(o.panel==="agent"&&s.profilePage?s.singleCard?"col-sm-12":"col-sm-6":"col-lg-4 col-md-6 col-sm-12 mb-3")},[i("div",ms,[i("div",gs,[i("div",vs,[i("div",ps,[i("div",bs,[i("div",ys,[i("div",ws,[i("i",{class:g([d.iconProvider(h,"device"),h.device_family.includes("Device")?"fa-3x":"device-session"])},null,2),h.device_family!=="Postman"?(n(),l("i",{key:0,class:g([h.device_family.includes("Device")||h.device_family.includes("faveomobileapp")?"device-icons":"device-icon",d.iconProvider(h,"platform")])},null,2)):r("",!0)])]),i("div",ks,[i("a",{href:"javascript:;",onClick:_=>d.showIndividualInfo(h),class:"text-muted device-style pr-1"},[i("b",null,a(d.deviceType(h)),1)],8,Is),i("a",{href:"javascript:;",onClick:_=>d.showTablesInfo(d.deviceType(h,"table"))},[x(i("i",xs,null,512),[[S,e.trans("login_device_info")]])],8,Ss),h.current_session?(n(),l("div",Cs,a(e.trans("current_session")),1)):x((n(),l("div",Ls,[v(a(e.trans("last_accessed_on"))+a(c.timeDiffForPast(h.login_at)),1)])),[[S,c.formattedTime(h.login_at)]])])])])])])])],2))),128))])):r("",!0),s.showIndividualDetails?(n(),l("div",Ds,[i("section",Ps,[i("div",Ms,[i("div",{class:g(["col-sm-12",o.panel==="agent"&&!s.profilePage?"pl-0":""])},[i("div",Ts,[i("div",{class:g(["col-sm-8",o.panel==="agent"&&!s.profilePage?"pl-0":""])},[i("div",Ns,[i("div",Fs,[i("div",Es,[i("i",{class:g([d.iconProvider(s.individualInfo,"device"),"fa-4x"])},null,2),s.individualInfo.device_family!=="Postman"||s.individualInfo.platform?(n(),l("i",{key:0,class:g([s.individualInfo.device_family.includes("Device")||s.individualInfo.device_family.includes("faveomobileapp")?"pc-icons":"pc-icon",d.iconProvider(s.individualInfo,"platform")])},null,2)):r("",!0)])]),s.individualInfo.device_family?(n(),l("div",{key:0,class:g(["col-sm-9",s.profilePage&&o.panel!=="client"&&!s.individualInfo.device_family.includes("Device")?"pl-3":"pl-0"])},[i("b",qs,a(d.deviceType(s.individualInfo,"info")),1),s.individualInfo.current_session?(n(),l("span",js,Rs)):r("",!0),i("span",null,[i("a",{href:"javascript:;",class:"pl-1",onClick:t[3]||(t[3]=h=>d.showTablesInfo(d.deviceType(s.individualInfo,"table")))},[x(i("i",As,null,512),[[S,e.trans("login_device_info")]])])]),s.individualInfo.current_session?(n(),l("div",Bs,a(e.trans("active_session")),1)):(n(),l("div",Vs,a(c.timeDiffForPast(s.individualInfo.login_at)),1))],2)):(n(),l("div",zs,[i("h6",null,a(e.trans("unknown_device")),1)]))])],2)])],2)]),i("div",Us,[i("div",Js,[i("h6",Ws,a(e.lang("login_at")),1),v(" "+a(s.individualInfo.login_at?c.formattedTime(s.individualInfo.login_at):"---"),1)]),s.individualInfo.device_family!=="Postman"?(n(),l("div",Hs,[i("h6",Gs,a(e.lang("operating_system")),1),i("div",null,[s.individualInfo.platform?(n(),l("i",{key:0,class:g([d.iconProvider(s.individualInfo,"platform"),"fa-2x"])},null,2)):r("",!0),v("  "+a(s.individualInfo.platform?s.individualInfo.platform:"---"),1)])])):r("",!0),s.individualInfo.device_family!=="Postman"&&!s.individualInfo.device_family.includes("faveomobileapp")?(n(),l("div",Ks,[i("h6",Qs,a(e.lang("browser")),1),i("div",null,[s.individualInfo.browser?(n(),l("i",{key:0,class:g(["fa-2x",d.iconProvider(s.individualInfo,"browser")])},null,2)):r("",!0),v("  "+a(s.individualInfo.browser?s.individualInfo.browser:"---"),1)])])):r("",!0),i("div",Xs,[i("h6",Ys,a(e.lang("ip_address")),1),v(" "+a(s.individualInfo.ip_address!=="::1"?s.individualInfo.ip_address:"---"),1)]),i("div",Zs,[i("h6",$s,a(e.lang("location")),1),s.individualInfoLocation?(n(),l("div",et,a(s.individualInfoLocation.city)+", "+a(s.individualInfoLocation.state_name)+", "+a(s.individualInfoLocation.country),1)):(n(),l("div",st,a("---")))])])])])):r("",!0),s.ShowDeviceList?(n(),l("div",tt,[w(k,{url:s.tableUrl,panel:o.panel,dataColumns:s.columns,btnStyle:o.btnStyle,inputStyle:o.inputStyle,disableLoader:"true",show_pagination:s.show_pagination,onLoaderState:d.handelLoader,option:s.options,scroll_to:"login-logs",componentTitle:s.componentTitle},null,8,["url","panel","dataColumns","btnStyle","inputStyle","show_pagination","onLoaderState","option","componentTitle"])])):r("",!0)])],64)):r("",!0),s.sessions.length===0&&!s.loading?(n(),l("div",ot,a(e.trans("no_data_available")),1)):r("",!0)]),_:1},8,["title"]),w(z,{name:"modal"},{default:y(()=>[s.showModal?(n(),C(L,{key:0,onClose:d.onClose,inputStyle:o.inputStyle,btnStyle:o.btnStyle,showModal:s.showModal,panel:o.panel,userId:o.userId,alertName:o.alertName},null,8,["onClose","inputStyle","btnStyle","showModal","panel","userId","alertName"])):r("",!0)]),_:1}),w(z,{name:"modal"},{default:y(()=>[s.showInfoModal?(n(),C(F,{key:0,onClose:d.onInfoClose,showModal:s.showInfoModal,loginLogsInfo:s.infoData},null,8,["onClose","showModal","loginLogsInfo"])):r("",!0)]),_:1})])}const ct=N(es,[["render",it],["__scopeId","data-v-71d67d84"]]);export{ct as L,dt as R,at as v};
