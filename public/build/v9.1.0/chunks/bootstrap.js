import{V as E,a as U,aB as mt,aC as ft,q as Y,i as T,c as d,f as o,G as M,o as s,$ as X,r as f,g as x,t as p,d as m,b as y,ax as K,n as F,p as ee,j as te,aD as Ue,e as S,w as I,h as N,F as L,_ as qe,Y as ht,a4 as yt,s as se,v as re,a0 as ne,z as Re,y as Be,aE as Ke,u as Ne,m as we,T as Ie,k as Oe,aF as gt,aG as pt,aH as B,C as _t,az as bt,x as vt,N as ze,aI as Ft,aJ as St,aK as kt,aL as Ct,aM as wt,aN as It,aO as At,aa as je,aP as Vt,aQ as Me,aR as qt,aS as Dt,aT as xt,aU as Tt,aV as Lt,aW as Pt,aX as Ce,E as Mt}from"./vendor.js";const Et=e=>{if(!e)return"---";var a=E(),t=E.utc(e);const l=ie(a.diff(t,"year"),"year"),i=ie(a.diff(t,"month"),"month"),n=ie(a.diff(t,"day"),"day"),r=ie(a.diff(t,"hour"),"hour"),u=ie(a.diff(t,"minute"),"minute"),c=ie(a.diff(t,"second"),"second");if(l)return l;if(i)return i;if(n)return n;if(r)return r;if(u)return u;if(c)return c},ie=(e,a)=>{const t=e<1?"from now":"ago",l=Math.abs(e);if(l>0){const i=l>1?a+"s":a;return`${l} ${i} ${t}`}return!1},Ut=e=>{if(!e)return"---";let a=E(),t=E.utc(e);t.diff(a,"years"),t.diff(a,"months");const l=t.diff(a,"days"),i=t.diff(a,"hours"),n=t.diff(a,"minutes"),r=t.diff(a,"seconds");if(r<1)return 0;if(l>0){const c=l>1?"days":"day";return l+" "+c}return i+" hr "+n%60+" min "+r%60+"sec"},le=(e,a,t)=>{for(var l=0;l<e.length;l++)if(e[l][a]==t)return e[l];return null},J=e=>typeof translator<"u"&&translator.lang[e]?translator.lang[e]:e,He=e=>Object.keys(e).reduce(function(t,l){return t.concat(e[l])},[]),Br=e=>e.length>0?e.map(a=>String(a.id)):[],be=e=>{let t=e.split("/").filter(function(l){return parseInt(l)==l});return t[t.length-1]},Kr=e=>e.filter((a,t,l)=>t==l.indexOf(a)),P=e=>{if(Array.isArray(e)&&e.length===0)return!1;switch(e){case 0:return!1;case"0":return!1;case null:return!1;case"":return!1;case void 0:return!1;case!1:return!1;default:return!0}},de=(e,a)=>{if(e)return e.length>a?e.substring(0,a)+"...":e},Nr=e=>{var a=0;return e.length===0?"null":e.length<=7?"too_short":(a+=1,e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(a+=1),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(a+=1),e.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(a+=1),e.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/)&&(a+=1),e.match(/^(?=\S*[a-z])(?=\S*[A-Z])(?=\S*\d)(?=\S*[^\w\s])\S{8,}/)&&(a+=1),a<=2?"your_password_must_be_8_character":a<5?"weak":"strong")},Or=(e,a,t="en")=>{(typeof a>"u"||a==="")&&(a="USD");try{return new Intl.NumberFormat(t,{style:"currency",currency:a}).format(e)}catch{return new Intl.NumberFormat("en",{style:"currency",currency:"USD"}).format(e)}},zr=function(){var e=0;return function(a,t){clearTimeout(e),e=setTimeout(a,t)}}(),Ye=()=>fetch("https://ip2c.org/s").then(e=>e.text()).then(e=>{const a=(e||"").toString();if(!a||a[0]!=="1")throw new Error("unable to fetch the country");return a.substr(2,2)}),Rt=e=>e?e.replace("m","MM").replace("d","DD").replace("i","mm").replace("s","ss").replace("H","HH").replace("F","MMMM").replace("g","hh").replace("j","DD").replace("S",""):"LLL",jr=e=>E(new Date).format(e),Hr=(e=1)=>{const a=["rgba(128, 217, 241, 0.6)","rgba(127, 200, 216, 0.6)","rgba(89, 180, 195, 0.6)","rgba(95, 183, 255, 0.6)","rgba(103, 169, 255, 0.6)","rgba(0, 141, 218, 0.6)","rgba(55, 140, 231, 0.6)","rgba(56, 122, 223, 0.6)","rgba(18, 64, 118, 0.6)","rgba(65, 201, 226, 0.6)","rgba(105, 158, 255, 0.6)","rgba(165, 195, 205, 0.6)","rgba(181, 187, 255, 0.6)","rgba(225, 194, 241, 0.6)","rgba(212, 148, 238, 0.6)","rgba(121, 128, 255, 0.6)","rgba(74, 107, 150, 0.6)","rgba(83, 86, 255, 0.6)","rgba(118, 171, 174, 0.6)","rgba(143, 213, 229, 0.6)","rgba(196, 239, 244, 0.6)","rgba(145, 149, 246, 0.6)","rgba(172, 226, 225, 0.6)","rgba(103, 198, 227, 0.6)","rgba(204, 238, 255, 0.6)","rgba(204, 238, 187, 0.6)","rgba(255, 230, 204, 0.6)","rgba(255, 204, 229, 0.6)","rgba(204, 229, 255, 0.6)","rgba(255, 204, 204, 0.6)","rgba(229, 204, 255, 0.6)","rgba(255, 255, 204, 0.6)","rgba(204, 255, 255, 0.6)","rgba(242, 255, 204, 0.6)"];let t=[];for(let l=0;l<e;l++){const i=l%a.length;let n=a[i];t.push(n)}return t},Yr=(e=1)=>{const a=["rgba(128, 217, 241, 0.9)","rgba(127, 200, 216, 0.9)","rgba(89, 180, 195, 0.9)","rgba(95, 183, 255, 0.9)","rgba(103, 169, 255, 0.9)","rgba(0, 141, 218, 0.9)","rgba(55, 140, 231, 0.9)","rgba(56, 122, 223, 0.9)","rgba(18, 64, 118, 0.9)","rgba(65, 201, 226, 0.9)","rgba(105, 158, 255, 0.9)","rgba(165, 195, 205, 0.9)","rgba(181, 187, 255, 0.9)","rgba(225, 194, 241, 0.9)","rgba(212, 148, 238, 0.9)","rgba(121, 128, 255, 0.9)","rgba(74, 107, 150, 0.9)","rgba(83, 86, 255, 0.9)","rgba(118, 171, 174, 0.9)","rgba(143, 213, 229, 0.9)","rgba(196, 239, 244, 0.9)","rgba(145, 149, 246, 0.9)","rgba(172, 226, 225, 0.9)","rgba(103, 198, 227, 0.9)","rgba(204, 238, 255, 0.9)","rgba(204, 238, 187, 0.9)","rgba(255, 230, 204, 0.9)","rgba(255, 204, 229, 0.9)","rgba(204, 229, 255, 0.9)","rgba(255, 204, 204, 0.9)","rgba(229, 204, 255, 0.9)","rgba(255, 255, 204, 0.9)","rgba(204, 255, 255, 0.9)","rgba(242, 255, 204, 0.9)"];let t=[];for(let l=0;l<e;l++){const i=l%a.length;let n=a[i];t.push(n)}return t},Wr=(e,a)=>{let t="";for(var l in e)for(var i in e[l].section)if(a[e[l].section[i].name]){e[l].section[i].value=a[e[l].section[i].name];let n=a[e[l].section[i].name],r=e[l].section[i].name,u=e[l].section[i].type;if(e[l].section[i].isCustom)t+=r+"="+a[e[l].section[i].name]+"&";else if(u==="date")if(n.includes("last::"))t+=e[l].section[i].name+"="+n+"&";else{let c="date::"+n.map(g=>E(g).format("YYYY-MM-DD+HH:mm:ss")).join("~");t+=e[l].section[i].name+"="+c+"&"}else u==="number"?t+=r+"_begin="+a[e[l].section[i].name].min+"&"+r+"_end="+a[e[l].section[i].name].max+"&":u==="time"||u==="text"?t+=r+"="+a[e[l].section[i].name]+"&":u==="static-select"?t+=r+"="+a[e[l].section[i].name].id+"&":a[e[l].section[i].name].forEach(function(c,g){if(c.api_end_point?c.api_end_point:c.id,c.api_end_point){let A=c.api_end_point.split("?"),w=A[A.length-1];t+=w+"&"}else t+=e[l].section[i].name+"["+g+"]="+c.id+"&"})}return t},Jr=(e,a)=>{let t={};for(var l in e)for(var i in e[l].section)if(a[e[l].section[i].name]){e[l].section[i].value=a[e[l].section[i].name];let n=a[e[l].section[i].name],r=e[l].section[i].name,u=e[l].section[i].type;if(e[l].section[i].isCustom)t[r]=a[e[l].section[i].name].toString();else if(u==="date")if(n.includes("last::"))t[e[l].section[i].name]=n;else{let c="date::"+n.map(g=>E(g).format("YYYY-MM-DD+HH:mm:ss")).join("~");t[e[l].section[i].name]=c}else u==="number"?(t[r+"_begin"]=a[e[l].section[i].name].min,t[r+"_end"]=a[e[l].section[i].name].max):u==="text"?t[r]=a[e[l].section[i].name]:t[e[l].section[i].name]=a[e[l].section[i].name].map(c=>c.id)}return t},ye={convertStringOfPropertiesToObject:e=>{if(!e)return{};const a={},t=e.split(";;");for(const l of t){const i=l.split(":=");a[i[0]]=i[1]}return a},convertObjectOfPropertiesToString:e=>{if(!e)return"";let a=[];for(const t in e)a.push(t+":="+e[t]);return a.join(";;")}},Gr=e=>{let a=[],t={};e.forEach(i=>{const n=`<b>${i.label}: </b><em>`;if(P(i.value)&&Array.isArray(i.value)){let r=[];i.value.forEach((u,c)=>{t[i.key+`[${c}]`]=u.id,r.push(u.name)}),a.push(n+r.join(", ")+"</em>")}else P(i.value)&&(t[i.key+"[0]"]=i.value.id,a.push(n+i.value.name+"</em>"))});let l=a.join(" | ");return l=l?"<em>Filter(s): </em>"+l:"",{formatedText:l,apiParams:t}},Qr=(e,a=0)=>{$("html, body").animate({scrollTop:$("#"+e).offset().top-200},"slow")},Zr=e=>e.split("/").includes("tickets-archive"),W={isRtlLayout:sessionStorage.getItem("is_rtl"),headerColor:sessionStorage.getItem("header_color"),recaptchaSiteKey:sessionStorage.getItem("siteKey"),recaptchaVersion:sessionStorage.getItem("version"),recaptchaApplyfor:sessionStorage.getItem("applyfor"),isUserLoggedIn:sessionStorage.getItem("userLoggedIn"),loggedUserName:sessionStorage.getItem("full_name"),loggedUserMail:sessionStorage.getItem("logged_in_user_mail"),loggedUserRole:sessionStorage.getItem("user_role"),appVersion:sessionStorage.getItem("app_version")},Xr=()=>{const e=location.search.substring(1);let a={};if(e.length!==0)try{a=JSON.parse('{"'+decodeURIComponent(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}')}catch(t){console.error("Error parsing URL parameters:",t)}return a},$r=(e,a,t,l,i)=>{axios.get(e,{params:a}).then(n=>{const r={};n.data.data.forEach(u=>{const{key:c,value_meta:g}=u;r[c]=g}),l(r)}).catch(n=>{i(n)})};window.axios=U;const Bt={data(){return{lang:J,isRtlLayout:P(W.isRtlLayout),headerColor:W.headerColor,recaptchaSiteKey:W.recaptchaSiteKey,recaptchaVersion:W.recaptchaVersion,recaptchaApplyfor:W.recaptchaApplyfor,isUserLoggedIn:W.isUserLoggedIn,loggedUserName:W.loggedUserName,loggedUserMail:W.loggedUserMail,loggedUserRole:W.loggedUserRole,appVersion:W.appVersion}},methods:{basePath:()=>window.axios.defaults.baseURL,basePathVersion(){return window.axios.defaults.baseURL+"/"+W.appVersion},trans:e=>J(e),boolean:e=>P(e),currentPath:()=>window.location.pathname,redirect:e=>{window.axios&&window.axios.defaults&&window.axios.defaults.baseURL?window.location.assign(window.axios.defaults.baseURL+e):console.error("Error: axios defaults not set")},sleep:e=>new Promise(a=>setTimeout(a,e)),getSubString(e,a){if(e)return e.length>a?e.substring(0,a)+"...":e}}},Kt={bind(e,a,t){var l=$(e)[0];$(e).bind("scroll",function(){l.scrollTop+l.offsetHeight>=l.scrollHeight&&t.context[a.expression]()})}};const R=(e,a="")=>{if(!e.duplicateRequestRejection){if([400,422,401,500].includes(e.response.status)&&(e.response.data.message!==void 0&&Z.dispatch("setAlert",{type:"danger",message:e.response.data.message,component_name:a}),e.response.data.result!==void 0&&e.response.data.result.fails!==void 0&&Z.dispatch("setAlert",{type:"danger",message:e.response.data.result.fails,component_name:a})),e.response.status===412&&e.response.data.message!==void 0){const t=e.response.data.message;t.attachment?Z.dispatch("setAlert",{type:"danger",message:t.attachment,component_name:a}):Z.dispatch("setValidationError",t)}e.response.status===404&&(window.location=window.axios.defaults.baseURL+"/404")}},ge=(e,a="")=>{e.status===200&&e.data.message!==void 0&&Z.dispatch("setAlert",{type:"success",message:e.data.message,component_name:a,data:e.data.data})},Nt={user:"",userLoadStatus:0,allLanguages:[]},Ot={getUserData(e){return e.user},getAllLangs(e){return e.allLanguages},getUserLoadStatus(e){return e.user!==""},timezone(e){let a=sessionStorage.getItem("timezone");return a||E.tz.guess()},timeFormat(e){const a=sessionStorage.getItem("data_time_format");return a==="human-read"?"Y-MM-dd hh:mm:ss":Ee(a)},dateFormat(e,a){let t=sessionStorage.getItem("date_format");return Ee(t)},timeDiffForFuture(e){return function(a){return Ut(a)}},timeDiffForPast(e){return function(a){return Et(a)}},formattedTime(e,a){return function(t,l="LLL"){return t?E.utc(t).tz(a.timezone).format(a.timeFormat):"--"}},customFormattedTime(e,a){return function(t,l="LLL"){return t?E.utc(t).tz(a.timezone).format(l):"--"}},formattedDate(e,a){return function(t){return t?E.utc(t).tz(E.tz.guess()).format(a.dateFormat):"---"}}},zt={getUserDataFromBackend(e,a){e.user=a},updateAllLangs(e,a){e.allLanguages=a},setUserLoadStatus(e,a){e.userLoadStatus=a}},jt={setAllLangs({commit:e},a){e("updateAllLangs",a)},updateUser({commit:e}){this.state.auth.user===""&&axios.get("/api/get-auth-info").then(a=>{e("getUserDataFromBackend",a.data.data)}).catch(a=>{e("getUserDataFromBackend",""),a.response&&R(a)})},updateUserData({commit:e},a){e("getUserDataFromBackend",a)},deleteUser({commit:e}){e("getUserDataFromBackend","")}};function Ee(e){return e?e.replace("m","MM").replace("d","DD").replace("i","mm").replace("s","ss").replace("H","HH").replace("F","MMMM").replace("g","hh").replace("j","DD").replace("S",""):"LLL"}const Ht={state:Nt,getters:Ot,mutations:zt,actions:jt},Yt={message:"",type:"",component_name:"",validation_errors:{},duration:""},Wt={getAlertType:e=>e.type,getAlertMessage:e=>e.message,getAlertComponentName:e=>e.component_name,getAlertDuration:e=>e.duration,getValidationErrors:e=>e.validation_errors},Jt={alert(e,a){e.message=a.message,e.type=a.type,e.duration=a.duration,e.component_name=a.component_name},validationErrors(e,a){e.validation_errors=a}},Gt={setAlert({commit:e},a){e("alert",a)},unsetAlert({commit:e}){e("alert",{message:"",type:""})},setValidationError({commit:e},a){e("validationErrors",a)},unsetValidationError({commit:e}){e("validationErrors",{})}},Qt={state:Yt,getters:Wt,mutations:Jt,actions:Gt},Zt={ticket_actions:"",selected_ticket_id:"",assigned_user_id:"",tickets_per_page:"",table_bar_color:"#3c8dbc",selected_category:"Inbox",reply_time_track:"",time_track_status:"",selected_form_values:{help_topic:"",department:""},ticket_id:0},Xt={getTicketActions(e){return e.ticket_actions!==""?e.ticket_actions:!1},ticketActions(e){return e.ticket_actions},getSeletedTicketId(e){return e.selected_ticket_id},getTicketsPerPage(e){return e.tickets_per_page},getTimetrackReplySettings(e){return e.reply_time_track},getTimetrackStatus(e){return e.time_track_status},getApprovalWorkflowProgessVisibility(e){return!!e.ticket_actions.view_approval_progress},getEnforceApprovalWorkflowVisibility(e){return!!e.ticket_actions.allowed_enforce_approval_workflow},getApprovalActionVisibility(e){return!!e.ticket_actions.allowed_approval_action},getTableBarColor(e){return e.table_bar_color},getLinkedFormValues(e){return e.selected_form_values},getSelected_nodeObject(e){return e.selected_nodeObject},getStoredTicketId(e){return e.ticket_id}},$t={updateTicketsActionData(e,a){e.ticket_actions=a,e.time_track_status=a.time_track_enabled,e.reply_time_track=a.show_thread_worktime},updateTicketId(e,a){e.selected_ticket_id=a},updateId(e,a){e.ticket_id=a},ticketSettings(e,a){e.tickets_per_page=a.ticket_per_page,e.table_bar_color=a.table_bar_color},assignedUserId(e,a){e.assigned_user_id=a},assignSelectedDepartment(e,a){e.selected_form_values.department=a},assignSelectedHelptopic(e,a){e.selected_form_values.help_topic=a}},ea={updateTicketActions({commit:e},a){a&&U.get("/api/agent/action-list",{params:{ticket_id:a}}).then(t=>{e("updateTicketsActionData",t.data.data.actions)}).catch(t=>{e("updateTicketsActionData",""),R(t)})},setTicketIdEmpty({commit:e},a){e("updateTicketId",a)},setTicketId({commit:e},a){e("updateId",a)},updateTicketSettings({commit:e}){this.state.ticketSettings.tickets_per_page===""&&U.get("/api/ticket/settings").then(a=>{e("ticketSettings",a.data.data)}).catch(a=>{e("ticketSettings",""),R(a)})},setAssignedUserId({commit:e},a){e("assignedUserId",a)},setSelectedDepartment({commit:e},a){let t="";P(a)&&(t=a.id),e("assignSelectedDepartment",t)},setSelectedHelptopic({commit:e},a){let t="";P(a)&&(t=a.id),e("assignSelectedHelptopic",t)},resetLinkingObject({commit:e}){e("assignSelectedHelptopic",""),e("assignSelectedDepartment","")}},ta={state:Zt,getters:Xt,mutations:$t,actions:ea},aa={ticketForm:[],batchTicketEnabled:!1,ticketFormFields:[],userFormFields:[],organisationFormFields:[],formMode:"create-ticket",captchaKey:"",post_max_size:0,upload_max_filesize:0,max_file_uploads:0,dependency:{}},ia={getTicketForm(e){return e.ticketForm},getBatchTicketEnabled(e){return e.formMode=="create-ticket"?e.batchTicketEnabled:!1},getTicketFormFields(e){return e.ticketFormFields},getUserFormFields(e){return e.userFormFields},getOrganisationFormFields(e){return e.organisationFormFields},getFormMode(e){return e.formMode},getCaptchaKey(e){return e.captchaKey==""?"wrong_captcha_key":e.captchaKey},getPostMaxSize(e){return Math.round(e.post_max_size/1e3)},getUploadMaxFilesize(e){return e.post_max_size<e.upload_max_filesize?Math.round(e.post_max_size/1e3):Math.round(e.upload_max_filesize/1e3)},getMaxFileUploads(e){return e.max_file_uploads},getDependency(e){return function(a){let t=a.replace("-","_");return e.dependency[t]}}},na={UpdateTicketForm(e,a){e.ticketForm=a},updateBatchTicketEnabled(e,a){e.batchTicketEnabled=a},updateTicketFormFields(e,a){e.ticketFormFields=a},updateUserFormFields(e,a){e.userFormFields=a},updateOrganisationFormFields(e,a){e.organisationFormFields=a},updateFormMode(e,a){e.formMode=a},updateCaptchaKey(e,a){e.captchaKey=a},updateMetaFormData(e,a){e.captchaKey=a.captcha_key,e.post_max_size=a.post_max_size,e.upload_max_filesize=a.upload_max_filesize,e.max_file_uploads=a.max_file_uploads},appendDependency(e,{key:a,value:t}){e.dependency[a]=t}},la={initTicketFormBuilder({commit:e},a){console.log(a,"OPTIONS"),axios.get("api/get-form-data?category="+a).then(t=>{e("UpdateTicketForm",t.data.data.form_fields)}).catch(function(t){})},setTicketForm({commit:e},a){e("UpdateTicketForm",a)},setBatchTicketEnabled({commit:e},a){e("updateBatchTicketEnabled",a)},setTicketFormFields({commit:e},a){e("updateTicketFormFields",a)},setUserFormFields({commit:e},a){e("updateUserFormFields",a)},setOrganisationFormFields({commit:e},a){e("updateOrganisationFormFields",a)},setFormMode({commit:e},a){e("updateFormMode",a)},setCaptchaKey({commit:e},a){e("updateCaptchaKey",a)},setMetaFormData({commit:e},a){e("updateMetaFormData",a)},setDependency({commit:e},{key:a,value:t}){e("appendDependency",{key:a,value:t})}},sa={state:aa,getters:ia,mutations:na,actions:la},We={layout_details:{},user_data:"",reset_email:"",check_ticket:"",rating_types:"",country_codes:"",locale:"",category_list:[],comment_filter:{},verifyEmail:"",push_menu:!0,defaultRating:null},oa={getLayoutData(e){return e.layout_details},getRatingTypes(e){return e.rating_types},getCountryCodes(e){return e.country_codes},getLocale(e){return e.locale},getResetEmail(e){return e.reset_email},getVerifyEmail(e){return e.verifyEmail},getCheckTicketId(e){return e.check_ticket},getButtonStyle(e){return{borderColor:e.layout_details.portal.client_button_border_color,backgroundColor:e.layout_details.portal.client_button_color}},getLinkStyle(e){return{color:e.layout_details.portal.client_header_color}},getCategoryList(){return We.category_list},getCommentFilterData(e){return e.comment_filter},getPushMenu(e){return e.push_menu},getDefaultRatings(e){return e.defaultRating}},ra={updateLayoutData(e,a){e.layout_details=a},updateCommentFilterData(e,a){e.comment_filter=a},updateRatingTypes(e,a){e.rating_types=a},updateCountryCodes(e,a){e.country_codes=a},updateLoale(e,a){e.locale=a},updateResetEmail(e,a){e.reset_email=a},updateCheckTicketId(e,a){e.check_ticket=a},setCategoryList(e,a){e.category_list=a},setVerifyEmail(e,a){e.verifyEmail=a},updatePushMenu(e,a){e.push_menu=a},setDefaultRatings(e,a){e.defaultRating=a}},da={clientLayoutActions({commit:e},a){e("updateLayoutData",a)},commentFilterData({commit:e},a){e("updateCommentFilterData",a)},setRatingTypes({commit:e},a){a&&axios.get(`api/rating?ticket_id=${a}`).then(t=>{e("setDefaultRatings",t.data)}).catch(t=>{e("setDefaultRatings",""),R(t)})},setCountryCodes({commit:e}){axios.get("api/dependency/country-codes?meta=true").then(a=>{e("updateCountryCodes",a.data.data.country_codes)}).catch(a=>{e("updateCountryCodes",""),R(a)})},setLanguage({commit:e},a){e("updateLoale",a)},setLocaleEmpty({commit:e},a){e("updateLoale","")},setUserDataEmpty({commit:e},a){e("updateUserData","")},resetEmail({commit:e},a){e("updateResetEmail",a)},setResetEmailEmpty({commit:e},a){e("updateResetEmail","")},setCheckTicketId({commit:e},a){e("updateCheckTicketId",a)},setCheckTicketIdEmpty({commit:e},a){e("updateCheckTicketId","")},categoryForBreadcrumb({commit:e},a){e("setCategoryList",a)},setEmail({commit:e},a){e("setVerifyEmail",a)},setPushMenu({commit:e},a){e("updatePushMenu",a)}},ua={state:We,getters:oa,mutations:ra,actions:da},ca={axiosCallsStack:[]},ma={showLoader:e=>e.axiosCallsStack.length>0},fa={startLoader(e,a){e.axiosCallsStack.push(a)},stopLoader(e,a){e.axiosCallsStack.splice(e.axiosCallsStack.indexOf(a),1)},forceStopLoader(e){e.axiosCallsStack=[]}},ha={startLoader({commit:e,state:a},t){if(t){if(a.axiosCallsStack.includes(t))throw new Error("Can't start loader with the same instance!");e("startLoader",t)}else throw new Error("Loader instance is required!")},stopLoader({commit:e,state:a},t){if(t)if(a.axiosCallsStack.includes(t))e("stopLoader",t);else throw new Error(`There is no loader started with this ${t} instance!`);else throw new Error("Loader instance is required!")},forceStopLoader({commit:e}){e("forceStopLoader")}},ya={state:ca,getters:ma,mutations:fa,actions:ha},ga={agentHeaderColor:"",adminHeaderColor:"",language:"en",isRtl:!1},pa={getAgentHeaderColor(e){return e.agentHeaderColor},getAdminHeaderColor(e){return e.adminHeaderColor},getLanguage(e){return e.language},getIsRtl(e){return e.isRtl}},_a={updateSystemSettings(e,a){e.agentHeaderColor=a.agent_header_color,e.adminHeaderColor=a.admin_header_color,e.language=a.language,e.isRtl=a.is_rtl}},ba={setSystemSettings({commit:e}){U.get("api/system-settings").then(a=>{e("updateSystemSettings",a.data.data)}).catch(a=>{R(a)})}},va={state:ga,getters:pa,mutations:_a,actions:ba},Fa={ticket:"api/agent/edit-mode-ticket-details/",requester:"/user/edit/api/",organisation:"/organisation/edit/api/",recur:"/api/ticket/recur/",template:"/api/ticket/ticket-template/edit/"},Je=(e,a)=>Fa[e]+a,Sa=(e,a,t,l="",i="")=>l==="file"?Ia(e):l==="mobile"&&e&&e.includes(" ")?e.split(" ")[1]:Array.isArray(e)?t&&i!="reassignable"?e:a.filter(n=>e.includes(n.label)):P(a)?a.find(n=>n.label===e):e||"",De=(e="faveoform")=>e+"__"+Date.now(),ka=(e,a)=>{P(e)&&setTimeout(()=>{let t=document.getElementById(e);if(t)t.scrollIntoView({behavior:"smooth",block:"end"});else{let l=document.querySelectorAll('.error-block:not([style*="display: none"])')[0];l&&l.scrollIntoView({behavior:"smooth",block:"center"})}},1)},Ca=async e=>{const{errors:a,valid:t}=await e.validate();if(!t){const l=Object.entries(a).find(i=>i[1].length>0);ka(l[0]),console.debug(l[0]+" is not valid!")}return t},wa=(e,a,t="label",l="",i="")=>{if(e!==void 0)return e instanceof Date||e instanceof File||Array.isArray(e)&&e[0]instanceof File||Array.isArray(e)&&typeof e[0]!="object"?e:Array.isArray(e)?e.map(n=>n instanceof File?n:a&&l!="reassignable"?n.id:n[t]):typeof e=="object"&&e!==null?a&&!e.custom_form_api?e.id:e[t]:i&&e?i+" "+e:e},Ge=e=>{let a={};if(P(e)&&e.size>0)for(let[t,l]of e)Array.isArray(l)&&l.length?l.forEach((i,n)=>{if(t==="attachments"||t==="attachment"){let r=i instanceof File?t:"attachment_ids";a[`${r}[${n}]`]=i;return}a[`${t}[${n}]`]=i}):t==="asset_image"?a.asset_image_id=l:a[t]=l=="0"||P(l)?l:"";return a};function Ia(e){if(!P(e))return[];let a=[],t=Array.isArray(e)?e:[e];for(let l=0;l<t.length;l++){if(t[l].id){a.push(t[l]);continue}if(t[l].hasOwnProperty("file")&&t[l].hasOwnProperty("filename")){let i=t[l].file.match(/:(.*?);/)[1];fetch(t[l].file).then(n=>n.blob()).then(n=>{a.push(new File([n],t[l].filename,{type:i}))})}}return a}const Qe={id:null,name:"",interval:"",delivery_on:"",start_date:"",end_date:"",execution_time:""},Ze={id:null,name:""};class Aa{constructor(a="create"){this.formDataMap=new Map,this.formDataMap.set("scenario",a),this.submitApiEndpoint=""}}const Va={category:null,isBatchTicketMode:!1,recurAdditionalInfo:Qe,templateAdditionalInfo:Ze,formAdditionalInfo:"",recaptchaKey:"",editorAttachments:[],faveoFormData:{},childFormLoading:!1,selectedReporter:0,selectedValues:[],selectedOrgRelatedDept:[],isSetAttachmentsData:[],sourceId:"",apiKey:""},qa={getCategory:e=>e.category,getAttachmentsData:e=>e.isSetAttachmentsData,getBatchTicketMode:e=>e.isBatchTicketMode,getRecurAdditionalInfo:e=>e.recurAdditionalInfo,getTemplateAdditionalInfo:e=>e.templateAdditionalInfo,getFormAdditionalInfo:e=>e.formAdditionalInfo,getFaveoFormData:e=>e.faveoFormData,getEditorAttachments:e=>e.editorAttachments,getRecaptchaKey:e=>e.recaptchaKey,getChildFormLoading:e=>e.childFormLoading,getReporter:e=>e.selectedReporter,getSelectedValues:e=>e.selectedValues,getSelectedOrgRelatedDept:e=>e.selectedOrgRelatedDept,getSource:e=>e.sourceId,getApiKey:e=>e.apiKey},Da={setCategory:(e,a)=>e.category=a,setAttachmentsData:(e,a)=>e.isSetAttachmentsData=a,setSelectedValues:(e,a)=>e.selectedValues=a,setBatchTicketMode:(e,a)=>e.isBatchTicketMode=a,updateRecurProperties:(e,{key:a,value:t})=>e.recurAdditionalInfo[a]=t,updateTemplateProperties:(e,{key:a,value:t})=>e.templateAdditionalInfo[a]=t,updateFormAdditionalProperties:(e,a)=>{e.formAdditionalInfo=a},setEditorAttachments:(e,a)=>e.editorAttachments=a,setRecaptchaKey:(e,a)=>e.recaptchaKey=a,setSource:(e,a)=>e.sourceId=a,setApiKey:(e,a)=>e.apiKey=a,setChildFormLoader:(e,a)=>e.childFormLoading=a,createNewFormInstance:(e,{formUniqueKey:a,scenario:t})=>{e.faveoFormData[a]=new Aa(t),e.recurAdditionalInfo=Qe,e.templateAdditionalInfo=Ze,e.recaptchaKey="",e.editorAttachments=[]},setFormData:(e,{id:a,formUniqueKey:t,isDefault:l,selectedValue:i,optionLabel:n,appendValue:r})=>{const u=wa(i,l,n,a,r);if(a=="organisation_department"&&(e.selectedOrgRelatedDept=i),a=="requester"&&(e.selectedReporter=u),a=="asset_ids"){let c=[];for(let g in i)c.push(i[g]);e.selectedValues=c}e.faveoFormData[t]&&e.faveoFormData[t].formDataMap.set(a,u)},deleteFormDataByKey:(e,a)=>{let t=e.faveoFormData[a.formUniqueKey];t&&t.formDataMap.delete(a.key)},destroyFormInsatnce:(e,a)=>delete e.faveoFormData[a],updateSubmitApiEndpoint:(e,{formUniqueKey:a,submitApiEndpoint:t})=>e.faveoFormData[a].submitApiEndpoint=t},xa={updateCategory:({commit:e},a)=>e("setCategory",a),setAttachmentsData:({commit:e},a)=>e("setAttachmentsData",a),setSelectedValues:({commit:e},a)=>e("setSelectedValues",a),setBatchTicketMode:({commit:e},a)=>e("setBatchTicketMode",a),updateRecurProperties:({commit:e},a)=>e("updateRecurProperties",a),updateTemplateProperties:({commit:e},a)=>e("updateTemplateProperties",a),updateFormAdditionalProperties:({commit:e},a)=>{e("updateFormAdditionalProperties",a)},setRecaptchaKey:({commit:e},a)=>e("setRecaptchaKey",a),setSource:({commit:e},a)=>e("setSource",a),setApiKey:({commit:e},a)=>e("setApiKey",a),setEditorAttachments:({commit:e},a)=>e("setEditorAttachments",a),setFormData:({commit:e},a)=>e("setFormData",a),deleteFormDataByKey:({commit:e},a)=>e("deleteFormDataByKey",a),createNewFormInstance:({commit:e},a)=>e("createNewFormInstance",a),destroyFormInsatnce:({commit:e},a)=>e("destroyFormInsatnce",a),updateSubmitApiEndpoint:({commit:e},a)=>e("updateSubmitApiEndpoint",a),startChildFormLoader:({commit:e})=>e("setChildFormLoader",!0),stopChildFormLoader:({commit:e})=>e("setChildFormLoader",!1)},Ta={state:Va,getters:qa,mutations:Da,actions:xa},La={problemAssociateCategory:"",changeAssociateCategory:"",releaseAssociateCategory:"",assetAssociateCategory:"",contractAssociateCategory:"",licenseAssociateCategory:"",taskAssociateCategory:""},Pa={getProblemAssociateCategory:e=>e.problemAssociateCategory,getChangeAssociateCategory:e=>e.changeAssociateCategory,getReleaseAssociateCategory:e=>e.releaseAssociateCategory,getAssetAssociateCategory:e=>e.assetAssociateCategory,getContractAssociateCategory:e=>e.contractAssociateCategory,getLicenseAssociateCategory:e=>e.licenseAssociateCategory,getTaskAssociateCategory:e=>e.taskAssociateCategory},Ma={updateProblemAssociateCategory(e,a){e.problemAssociateCategory=a},updateChangeAssociateCategory(e,a){e.changeAssociateCategory=a},updateReleaseAssociateCategory(e,a){e.releaseAssociateCategory=a},updateAssetAssociateCategory(e,a){e.assetAssociateCategory=a},updateContractAssociateCategory(e,a){e.contractAssociateCategory=a},updateLicenseAssociateCategory(e,a){e.licenseAssociateCategory=a},updateTaskAssociateCategory(e,a){e.taskAssociateCategory=a}},Ea={setProblemAssociateCategory({commit:e},a){e("updateProblemAssociateCategory",a)},setChangeAssociateCategory({commit:e},a){e("updateChangeAssociateCategory",a)},setReleaseAssociateCategory({commit:e},a){e("updateReleaseAssociateCategory",a)},setAssetAssociateCategory({commit:e},a){e("updateAssetAssociateCategory",a)},setContractAssociateCategory({commit:e},a){e("updateContractAssociateCategory",a)},setLicenseAssociateCategory({commit:e},a){e("updateLicenseAssociateCategory",a)},setTaskAssociateCategory({commit:e},a){e("updateTaskAssociateCategory",a)}},Ua={state:La,getters:Pa,mutations:Ma,actions:Ea},Ra=new mt({reducer:e=>({clientSettings:e.clientSettings})}),Z=ft({modules:{auth:Ht,ticketSettings:ta,clientSettings:ua,alert:Qt,formBuilder:sa,systemSettings:va,axiosLoader:ya,formRender:Ta,sdAssociates:Ua},plugins:[Ra.plugin]}),pe=["preview","importcss","searchreplace","autolink","autosave","save","directionality","code","visualblocks","visualchars","image","link","media","codesample","table","charmap","pagebreak","nonbreaking","insertdatetime","advlist","lists","wordcount","help","charmap","emoticons"],Xe={height:{type:Number,default:400},showMenubar:{type:Boolean,default:!0},toolbarSticky:{type:Boolean,default:!1},imageAdvancedTab:{type:Boolean,default:!0},imageCaption:{type:Boolean,default:!0},toolbarMode:{type:String,default:"sliding"},contentStyle:{type:String,default:'p { margin: 0; } body { font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size:.875rem; }'},draggableModal:{type:Boolean,default:!0},elementPath:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},branding:{type:Boolean,default:!1},browserSpellcheck:{type:Boolean,default:!0},customUndoRedoLevels:{type:Number,default:10},pasteDataImages:{type:Boolean,default:!0},statusbar:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},automaticUploads:{type:Boolean,default:!0},relativeUrls:{type:Boolean,default:!1},removeScriptHost:{type:Boolean,default:!1},width:{type:[Number,String],default:"100%"},textpattern_patterns:{type:Array,default:()=>[{start:"#",format:""},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}}]}};const V=(e,a)=>{const t=e.__vccOpts||e;for(const[l,i]of a)t[l]=i;return t},Ba={name:"tool-tip",description:"It handles tooltip message on hover",props:{placement:{type:String,default:"top"},message:{type:String,required:!0},size:{type:String,default:"medium"}}},Ka={style:{"margin-left":"2px",position:"relative",top:"0px",color:"#337ab7"}};function Na(e,a,t,l,i,n){const r=Y("tooltip");return T((s(),d("span",Ka,[o("i",{class:"fas fa-question-circle",style:M([{fontSize:t.size},{cursor:"help"}])},null,4)])),[[r,{content:t.message,html:!0,placement:t.placement}]])}const xe=V(Ba,[["render",Na]]);const Oa={name:"form-field-template",description:"This component handles the error block by reading validation errors directly for vuex store and hint tooltip message",props:{label:{type:String,required:!0},name:{type:[String,Number],required:!0},labelStyle:{type:Object,default:function(){return{}}},classname:{type:String,default:""},hint:{type:String,default:""},required:{type:[Boolean,Number],default:!1},isClearField:{type:Boolean,default:!1},clearField:{type:Function},value:{type:[String,Date,Object,Array],default:""},showNewButton:{type:Boolean,default:!1},onClickEvent:{type:Function},isInlineForm:{type:Boolean,default:!1},isRequester:{type:Boolean,default:!1},actionBtn:{type:Object,default:()=>null},showPreview:{type:[String,Object],default:""},tipRule:{type:[Number,Boolean],default:!1},labelLength:{type:[Number,String],default:500},showTooltipOnLabel:{type:Boolean,default:!0}},computed:{...X(["getValidationErrors"]),errors:{cache:!1,get(){return this.getValidationErrors}}},watch:{errors(e){this.newValue=this.errors,setTimeout(()=>{let a=document.querySelectorAll('.error-block:not([style*="display: none"])')[0];a&&a.scrollIntoView({behavior:"smooth",block:"center"})},1)}},methods:{clickEvent(e){this.onClickEvent(e)},getHint(e){return e&&e.replace(/\n/g,"<br>")}},components:{"tool-tip":xe}},Te=e=>(ee("data-v-fceb1174"),e=e(),te(),e),za=["id"],ja=["for"],Ha=Te(()=>o("i",{class:"glyphicon glyphicon-plus"},null,-1)),Ya={key:4,class:"float-right"},Wa={class:"slot-container"},Ja={key:0,class:"text-small"},Ga=Te(()=>o("i",{class:"fas fa-question-circle text-primary"},null,-1)),Qa=["innerHTML"],Za={key:1,class:"error-block is-danger"},Xa=Te(()=>o("i",{class:"glyphicon glyphicon-plus"},null,-1));function $a(e,a,t,l,i,n){const r=f("tool-tip"),u=Y("tooltip");return s(),d("div",{class:F([t.classname,"form-group","form-field-template",{"has-error":t.name in n.errors},{row:t.isInlineForm}]),id:t.label},[o("div",{class:F({"col-md-2 flex break-all":t.isInlineForm})},[T((s(),d("label",{for:t.label,style:M(t.labelStyle)},[x(p(e.getSubString(t.label,t.labelLength)),1)],12,ja)),[[u,t.showTooltipOnLabel?t.label:""]]),t.required?(s(),d("label",{key:0,class:"is-danger",style:M(t.labelStyle)},"*",4)):m("",!0),t.hint&&t.hint!==""&&!t.tipRule?(s(),y(r,{key:1,message:n.getHint(t.hint),size:"small"},null,8,["message"])):m("",!0),K(e.$slots,"word-limit-counter",{},void 0,!0),t.isClearField&&t.value&&typeof t.value=="object"?(s(),d("i",{key:2,onClick:a[0]||(a[0]=(...c)=>t.clearField&&t.clearField(...c)),class:"fas fa-times clear-btn",title:"Clear","aria-hidden":"true"})):m("",!0),t.showNewButton&&!t.isInlineForm?(s(),d("a",{key:3,class:"btn btn-default btn-xs btn-sm mb2 float-right",href:"javascript:;",onClick:a[1]||(a[1]=c=>n.clickEvent(t.name))},[Ha,x(" "+p(e.lang("new")),1)])):m("",!0),t.showPreview?(s(),d("i",Ya,"(e.g "+p(t.showPreview)+")",1)):m("",!0)],2),o("div",{class:F([t.isInlineForm?"col-md-10 flex":t.actionBtn&&t.actionBtn.isFor==="requester"?"flex-100":""])},[o("div",Wa,[K(e.$slots,"default",{},void 0,!0),t.hint&&t.hint!=""&&t.tipRule?(s(),d("div",Ja,[Ga,x(),o("em",{innerHTML:n.getHint(t.hint)},null,8,Qa)])):m("",!0),t.name in n.errors?(s(),d("div",Za,p(n.errors[t.name]),1)):m("",!0)]),t.actionBtn?(s(),d("button",{key:0,type:"button",class:F([t.isRequester?"req-btn":"","btn btn-default form-field-action-button"]),onClick:a[2]||(a[2]=()=>t.actionBtn.action())},[o("span",null,p(e.trans(t.actionBtn.text)),1)],2)):m("",!0),t.showNewButton&&t.isInlineForm?(s(),d("a",{key:1,class:"req-btn btn btn-default form-field-action-button new_entry_btn",href:"javascript:;",onClick:a[3]||(a[3]=c=>n.clickEvent(t.name))},[Xa,x(" "+p(e.lang("new")),1)])):m("",!0)],2)],10,za)}const H=V(Oa,[["render",$a],["__scopeId","data-v-fceb1174"]]);const ei={name:"TinyMCE",components:{editor:Ue,"form-field-template":H},props:{...Xe,name:{type:String,Required:!0},onChange:{type:Function,Required:!0},label:{type:String,default:""},labelStyle:{type:Object,default:function(){return{}}},classname:{type:String,default:""},hint:{type:String,default:""},required:{type:Boolean,default:!1},value:{type:String,default:""},page:{type:String,default:""},id:{type:String,default:"tiny_editor"}},data(){return{editorValue:this.value,options:{}}},beforeMount(){const e=this;this.options={width:e.width,menubar:e.showMenubar?"file view edit insert format tools table help":!1,menu:{view:{title:"View",items:"code | visualchars visualblocks | preview"}},toolbar_sticky:e.toolbarSticky,autosave_ask_before_unload:e.autoSaveAskBeforeUnload,autosave_interval:e.autoSaveInterval,autosave_prefix:"tinymce-autosave-{path}{query}-{id}-",autosave_restore_when_empty:e.autoSaveRestoreWhenEmpty,autosave_retention:e.autoSaveRetention,image_advtab:e.imageAdvancedTab,template_cdate_format:"[Date Created (CDATE): %m/%d/%Y : %H:%M:%S]",template_mdate_format:"[Date Modified (MDATE): %m/%d/%Y : %H:%M:%S]",image_caption:e.imageCaption,quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote quickimage quicktable",extended_valid_elements:"div[onclick|style]",noneditable_noneditable_class:"mceNonEditable",toolbar_mode:e.toolbarMode,contextmenu:!1,content_style:e.contentStyle,draggable_modal:e.draggableModal,elementpath:e.elementPath,height:e.height,resize:e.resize,branding:e.branding,browser_spellcheck:e.browserSpellcheck,custom_undo_redo_levels:e.customUndoRedoLevels,paste_data_images:e.pasteDataImages,statusbar:e.statusbar,auto_focus:e.id=="focus_editor"?"focus_editor":"",automatic_uploads:e.automaticUploads,relative_urls:e.relativeUrls,remove_script_host:e.removeScriptHost,document_base_url:e.basePath(),images_upload_url:e.basePath()+"/api/tiny-image-uploader?_token="+document.querySelector('meta[name="csrf-token"]').getAttribute("content")+"&auth=false",plugins:e.page!=="kb"?pe.filter(a=>a!=="media"):pe,external_plugins:{mention:e.basePathVersion()+"/themes/default/common/js/tinymce-mention.js"},mentions:{delimiter:["@","#","$"],source:function(a,t,l){l==="@"&&axios.get("/api/dependency/agents?limit=all").then(i=>{i.data.data.agents.map(function(n){n.name=n.meta_name?n.meta_name.replaceAll("<","(").replaceAll(">",")"):n.name,n.route_path=e.basePath()+"/panel/user/"+n.id}),t(i.data.data.agents)}),l==="#"&&axios.get("/api/dependency/departments?limit=all").then(i=>{i.data.data.departments.map(function(n){n.route_path=e.basePath()+"/department/"+n.id}),t(i.data.data.departments)}),l==="$"&&axios.get("/api/dependency/teams?meta=true&limit=all").then(i=>{i.data.data.teams.map(function(n){n.route_path=e.basePath()+"/team/"+n.id}),t(i.data.data.teams)})}},setup:function(a){a.on("focus",function(){a.selection.select(a.getBody(),!0),a.selection.collapse(!1)}),a.on("Keyup",function(){e.onChange(a.getContent(),e.name)}),a.on("Change",function(){e.onChange(a.getContent(),e.name)})},toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"}},watch:{value:{immediate:!0,handler(e,a){this.editorValue=e}}}};function ti(e,a,t,l,i,n){const r=f("editor"),u=f("form-field-template");return s(),d("div",null,[S(u,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required},{default:I(()=>[S(r,{id:t.id,init:i.options,modelValue:i.editorValue,"onUpdate:modelValue":a[0]||(a[0]=c=>i.editorValue=c),onOnChange:a[1]||(a[1]=c=>t.onChange(i.editorValue,t.name))},null,8,["id","init","modelValue"])]),_:1},8,["label","labelStyle","name","classname","hint","required"])])}const ai=V(ei,[["render",ti]]);const ii={name:"FileManagerContainer",components:{"tool-tip":xe},props:{page:{type:String,default:"others"},showModal:{type:Boolean,default:!1}},data(){return{responseMessage:"",toolTipMessage:null,selectedFiles:[],selectedDisk:null,displayModal:this.showModal,loading:!1,containerStyle:{width:"80vw"}}},computed:{settings(){return{baseUrl:this.basePath()+"/file-manager/",page:this.page,maxFileUploadCount:null,maxSingleFileSize:null,maxPostSize:null}},fileSelected(){return this.$store.state.fm.left.selected.files},folderSelected(){return this.$store.state.fm.left.selectedDirectory},diskSelected(){return this.$store.state.fm.left.selectedDisk},buttonDisabled(){return!this.selectedFiles.length},filesInClipboard(){return this.$store.state.fm.clipboard.files}},watch:{fileSelected(){this.selectedFiles=this.fileSelected},folderSelected(){this.folderSelected.length&&(this.selectedFiles=[])},diskSelected(){this.selectedFiles=[],this.selectedDisk=this.diskSelected},filesInClipboard(){this.filesInClipboard.length&&(this.selectedFiles=[])}},beforeMount(){this.getFileUploadRules()},methods:{bytesToHuman(e){const a=["Bytes","KB","MB","GB","TB"];if(e===0)return"0 Bytes";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return t===0?`${e} ${a[t]}`:`${(e/1024**t).toFixed(1)} ${a[t]}`},formatBytes(e,a){if(e==0)return"0 Bytes";var t=1024,l=a||2,i=["Bytes","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(l))+" "+i[n]},showModalDialog(){this.displayModal=!this.displayModal,window.emitter.emit("fileModal",this.displayModal),this.$store.dispatch("unsetAlert"),this.$store.dispatch("unsetValidationError")},onSubmit(){if(this.selectedFiles.forEach(e=>{e.split(".").pop()}),this.selectedFiles.length){let e=this.$store.state.fm.left.selectedDisk;["page","kb"].includes(this.page)?this.$emit("fileChosenInlinePdf",{files:this.selectedFiles,disk:e}):this.$emit("filesChosen",{files:this.selectedFiles,disk:e}),this.onClose()}else this.$store.dispatch("setAlert",{type:"danger",message:this.lang("file-manager-select-atleast-one-file"),component_name:"fileManagerModal"})},onClose(){this.displayModal=!1,window.emitter.emit("fileModal",this.displayModal)},async getFileUploadRules(){try{let e=await U.get("file-manager/upload-info"),a=e.data.data;this.responseMessage=this.trans("max_upload_size")+this.formatBytes(e.data.data.maxPostSize),this.settings.maxSingleFileSize=a.maxSingleFileSize,this.settings.maxFileUploadCount=a.maxFileUploadCount,this.settings.maxPostSize=a.maxPostSize,this.toolTipMessage=this.trans("max_upload_size")+this.bytesToHuman(a.maxPostSize)+","+this.trans("single_file_size")+this.bytesToHuman(a.maxSingleFileSize)+this.trans("max_number_of_files")+a.maxFileUploadCount}catch{this.settings.maxSingleFileSize=null,this.settings.maxFileUploadCount=null,this.settings.maxPostSize=null,this.toolTipMessage=null}},onChange(e,a){this[a]=e}}},ni={id:"file-manager-container"},li=o("i",{class:"far fa-caret-square-right"},null,-1),si={class:"response-message"},oi={key:0,style:{height:"100%"}},ri={key:1,class:"row"},di=["disabled"],ui=o("i",{class:"fas fa-paperclip"},null,-1);function ci(e,a,t,l,i,n){const r=f("tool-tip"),u=f("alert"),c=f("file-manager"),g=f("reuse-loader"),A=f("modal");return s(),d("div",ni,[o("button",{onClick:a[0]||(a[0]=w=>n.showModalDialog()),type:"button",class:"btn btn-default",id:"add-media-button-with-margin"},[li,x(" "+p(t.page=="widget"?e.lang("gallery"):e.lang("add-media")),1)]),K(e.$slots,"templateBtn"),o("span",si,p(i.responseMessage),1),i.displayModal?(s(),y(A,{key:0,showModal:i.displayModal,onClose:n.onClose,containerStyle:i.containerStyle,modalBodyClass:"fm_modal_body"},{title:I(()=>[o("h4",null,[x(p(e.lang("file-manager-modal-title"))+" ",1),i.toolTipMessage?(s(),y(r,{key:0,message:i.toolTipMessage,size:"large"},null,8,["message"])):m("",!0)])]),fields:I(()=>[i.loading?m("",!0):(s(),d("div",oi,[S(u,{componentName:"fileManagerModal"}),S(c,{settings:n.settings},null,8,["settings"])])),i.loading?(s(),d("div",ri,[S(g,{duration:4e3,size:60})])):m("",!0)]),controls:I(()=>[o("button",{slot:"controls",type:"button",onClick:a[1]||(a[1]=(...w)=>n.onSubmit&&n.onSubmit(...w)),class:"btn btn-primary",disabled:n.buttonDisabled},[ui,x(" "+p(e.lang("file-manager-insert-media")),1)],8,di)]),_:1},8,["showModal","onClose","containerStyle"])):m("",!0)])}const mi=V(ii,[["render",ci]]);const fi={name:"tiny-editor-with-validation",description:"TinyMCE Editor With Validations",props:{...Xe,label:{type:String,default:""},name:{type:String,required:!1},value:{type:String,required:!1},isInlineForm:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:String,default:""},hint:{type:String,default:""},labelStyle:{type:Object},classname:{type:String,default:""},onChange:{type:Function,Required:!0},mediaOption:{type:[Boolean,Number],default:!1},attachments:{type:Array,default:()=>[]},getAttach:{type:Function},panel:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},convertURLs:{type:Boolean,default:!0},labelLength:{type:[Number,String],default:500}},created(){this.getCsrfToken()},data(){return{loading:!1,attachmentsArr:this.attachments,editorValue:this.value,options:{}}},beforeMount(){this.attachmentsArr=this.getAttachmentsData!=null?this.getAttachmentsData:this.attachments;const e=this;this.options={max_height:e.height,min_height:e.height,menubar:e.showMenubar?"file edit view insert format tools table help":!1,menu:{view:{title:"View",items:"code | visualchars visualblocks | preview"}},toolbar_sticky:e.toolbarSticky,autosave_ask_before_unload:e.autoSaveAskBeforeUnload,autosave_interval:e.autoSaveInterval,autosave_prefix:"tinymce-autosave-{path}{query}-{id}-",autosave_restore_when_empty:e.autoSaveRestoreWhenEmpty,autosave_retention:e.autoSaveRetention,image_advtab:e.imageAdvancedTab,template_cdate_format:"[Date Created (CDATE): %m/%d/%Y : %H:%M:%S]",template_mdate_format:"[Date Modified (MDATE): %m/%d/%Y : %H:%M:%S]",image_caption:e.imageCaption,quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote quickimage quicktable",extended_valid_elements:"div[onclick|style]",noneditable_noneditable_class:"mceNonEditable",toolbar_mode:e.toolbarMode,contextmenu:!1,content_style:e.contentStyle,draggable_modal:e.draggableModal,elementpath:e.elementPath,height:e.height,resize:e.resize,branding:e.branding,browser_spellcheck:e.browserSpellcheck,custom_undo_redo_levels:e.customUndoRedoLevels,paste_data_images:e.pasteDataImages,statusbar:e.statusbar,auto_focus:e.autoFocus,automatic_uploads:e.automaticUploads,relative_urls:e.relativeUrls,remove_script_host:e.removeScriptHost,document_base_url:e.basePath(),images_upload_url:e.basePath()+"/api/tiny-image-uploader?_token="+document.querySelector('meta[name="csrf-token"]').getAttribute("content")+"&auth=false&api_key="+this.getApiKey,convert_urls:e.convertURLs,plugins:e.page!=="kb"?pe.filter(a=>a!=="media"):pe,text_patterns:e.textpattern_patterns,setup:function(a){a.on("Keyup",function(){e.onChange(a.getContent(),e.name)}),a.on("Change",function(){e.onChange(a.getContent(),e.name)})},toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link codesample | ltr rtl"}},watch:{value:{immediate:!0,handler(e,a){this.editorValue=e}}},computed:{...X(["getAttachmentsData","getApiKey"])},methods:{getCsrfToken(){this.getApiKey?this.options.images_upload_url=this.basePath()+"/api/tiny-image-uploader?_token="+document.querySelector('meta[name="csrf-token"]').getAttribute("content")+"&api_key="+this.getApiKey:this.options.images_upload_url=this.basePath()+"/api/tiny-image-uploader?_token="+document.querySelector('meta[name="csrf-token"]').getAttribute("content")},removeAttachment(e){this.attachmentsArr.splice(e,1),this.getAttach(this.attachmentsArr)},async getAttachmentInfo(e){let a=JSON.stringify(e.files);this.loading=!0;try{(await axios.get("file-manager/files-info",{params:{names:a,disk:e.disk}})).data.data.forEach(i=>{this.attachmentsArr.push(i)}),this.getAttach(this.attachmentsArr)}catch{await this.$store.dispatch("setAlert",{type:"danger",message:this.lang("file-manager-modal-error-message"),component_name:"faveo-form"})}finally{this.loading=!1}}},components:{editor:Ue,"form-field-template":H,"file-manager-container":mi}},hi={key:0,class:"error-block is-danger"},yi={key:0,id:"hidden-attach",contenteditable:"false"},gi=["onClick"];function pi(e,a,t,l,i,n){const r=f("file-manager-container"),u=f("editor"),c=f("ValidationProvider"),g=f("custom-loader"),A=f("form-field-template");return s(),y(A,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[t.mediaOption&&t.panel!="client"?(s(),y(r,{key:0,onFilesChosen:n.getAttachmentInfo},null,8,["onFilesChosen"])):m("",!0),S(c,{name:t.name,rules:t.rules,modelValue:i.editorValue,"onUpdate:modelValue":a[2]||(a[2]=w=>i.editorValue=w)},{default:I(({field:w,errorMessage:h,meta:C,classes:k})=>[S(u,{init:i.options,modelValue:i.editorValue,"onUpdate:modelValue":a[0]||(a[0]=b=>i.editorValue=b),onOnChange:a[1]||(a[1]=b=>t.onChange(i.editorValue,t.name)),name:t.name,class:F(h?"field-danger":"")},null,8,["init","modelValue","name","class"]),h?(s(),d("span",hi,p(h),1)):m("",!0)]),_:1},8,["name","rules","modelValue"]),i.loading?(s(),y(g,{key:1,duration:"4000"})):m("",!0),(s(!0),d(L,null,N(i.attachmentsArr,(w,h)=>(s(),d(L,null,[w.disposition!=="inline"?(s(),d("div",yi,[x(p(w.name)+"("+p(w.size?w.size:w.file_size)+" bytes) ",1),o("i",{class:"fa fa-times close-icon","aria-hidden":"true",onClick:C=>n.removeAttachment(h)},null,8,gi)])):m("",!0)],64))),256))]),_:1},8,["label","labelStyle","name","classname","hint","required","isInlineForm","tipRule","labelLength"])}const $e=V(fi,[["render",pi],["__scopeId","data-v-cdf46b64"]]);const _i={name:"dynamic-select",props:{name:{type:[String,Number],Required:!0},hint:{type:String,default:""},required:{type:[Boolean,Number],default:!1},classname:{type:String,default:""},id:{type:[String,Number],default:"dynamic-select"},labelStyle:{type:Object,default:function(){return{}}},onChange:{type:Function,required:!0},autoscroll:{type:Boolean,default:!0},value:{type:[Object,String],default:null},elements:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},apiEndpoint:{type:String,default:null},apiParameters:{type:[Object,Map],default:()=>{}},placeholder:{type:String,default:"Search or Select"},transition:{type:String,default:"fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},optionLabel:{type:String,default:"name"},label:{type:String,default:""},taggable:{type:Boolean,default:!1},pushTags:{type:Boolean,default:!1},strlength:{type:[Number,String],default:40},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},showNewButton:{type:Boolean,default:!1},onClickEvent:{type:Function},onButtonClick:{type:Function},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},actionBtn:{type:Object,default:()=>null},showPreview:{type:[String,Object],default:""},tipRule:{type:[Number,Boolean],default:!1},removeVal:{type:Boolean,default:!0},data_key:{type:String,default:"data"},formIsFor:{type:String,default:""},fieldUniqueName:{type:String,default:""},inputStyle:{type:Object,default:()=>{}},showIcon:{type:Boolean,default:!0},labelLength:{type:[Number,String],default:500},showTooltipOnLabel:{type:Boolean,default:!0}},data:()=>({listElements:[],page:0,observer:null,nextPageUrl:"",searchQuery:void 0,isLoading:!1,selectedValue:null,allParams:"",showField:!1}),beforeMount(){this.listElements=this.elements?this.elements:[]},mounted(){this.apiEndpoint&&this.flushAndRestart(),this.selectedValue=this.value,setTimeout(()=>{this.showField=!0},1)},created(){window.emitter.on("updateDynamicSelect",this.updateProperties)},computed:{hasNextPage(){return!!(this.nextPageUrl!==null&&this.apiEndpoint)}},methods:{onDeselect(){const e=this.$refs.faveoDynamicSelect.searchEl;e&&e.blur()},updateProperties(){this.flushAndRestart("update")},getFieldName(e){this.onButtonClick(e)},subString(e){return de(e,parseInt(this.strlength))},flushAndRestart(e=""){this.disconnectObserver(),this.resetProperties(e),this.observer=new IntersectionObserver(this.infiniteScroll)},onSearch(e){this.searchQuery=e,this.page=1,this.search()},onValueChange(e){this.onChange(e,this.name)},search:qe.debounce(function(){this.apiEndpoint?this.getListFromServer(!0):this.filterListElements()},350),filterListElements(){this.listElements=this.elements.filter(e=>e[this.optionLabel].toLowerCase().includes(this.searchQuery.toLowerCase()))},getListFromServer(e,a){P(this.apiEndpoint)&&(this.isLoading=!0,U.get(this.apiEndpoint,{params:this.getApiParams()}).then(t=>{this.postApiResponseOperations(t.data.data,e,a),this.$nextTick(()=>{this.connectObserver()})}).catch(t=>{this.nextPageUrl=null,R(t)}).finally(()=>{this.isLoading=!1}))},async postApiResponseOperations(e,a,t){try{if(this.formIsFor==="requester"&&this.fieldUniqueName=="organisation_department"&&!this.allParams.hasOwnProperty("organisation[0]")){this.isLoading=!1,this.listElements=[],this.nextPageUrl=null;return}if(this.nextPageUrl=e.next_page_url,a)this.listElements=e[this.data_key];else{if(t){var l=t.offsetParent;if(l)var i=t.offsetParent.scrollTop}this.listElements.push(...e[this.data_key]),await this.$nextTick(),t&&l&&(l.scrollTop=i)}}catch(n){console.error(n)}},getApiParams(){let e=P(this.apiParameters)?this.apiParameters:{};e instanceof Map&&(e=Ge(e),e.description&&delete e.description),this.allParams=e;let a=JSON.parse(JSON.stringify(e));return a["search-query"]=this.searchQuery,a.page=this.page||void 0,a.paginate=1,a},clearSearchQuery(){this.$refs.faveoDynamicSelect.onEscape()},infiniteScroll([{isIntersecting:e,target:a}]){e&&(this.page+=1,this.getListFromServer(!1,a))},async connectObserver(){this.hasNextPage&&(await this.$nextTick(),this.observer.observe(this.$refs.dynamicSelectLoader))},disconnectObserver(){this.observer&&(this.observer.disconnect(),this.isLoading=!1)},resetProperties(e=""){this.listElements=this.elements.length?this.listElements:[],this.page=0,this.observer=null,this.nextPageUrl="",this.searchQuery=void 0,this.isLoading=!1,e!="update"&&this.removeVal&&(this.selectedValue=null)}},watch:{elements(e,a){e&&(this.listElements=e)},apiEndpoint(e,a){P(e)&&this.flushAndRestart()},apiParameters(e,a){P(e)&&this.flushAndRestart()},value(e,a){if(this.selectedValue=e,this.taggable){if(e===null)return;let t=e.map(l=>{let i;return typeof l=="string"&&(i={},i.id=l,i[this.optionLabel]=l),i||l});JSON.stringify(t)!==JSON.stringify(e)&&this.onChange(t,this.name)}}},components:{"v-select":ht,"form-field-template":H}},bi=e=>(ee("data-v-e8d560fb"),e=e(),te(),e),vi={class:"dynamic-select"},Fi=bi(()=>o("span",null,null,-1)),Si={key:0},ki=["title"],Ci=["innerHTML"],wi=["title"],Ii=["title"],Ai=["innerHTML"],Vi=["title"],qi={ref:"dynamicSelectLoader"};function Di(e,a,t,l,i,n){const r=f("loader"),u=f("faveo-image-element"),c=f("v-select"),g=f("ValidationProvider"),A=f("form-field-template");return e.showField?(s(),y(A,{key:0,labelLength:t.labelLength,showTooltipOnLabel:t.showTooltipOnLabel,name:t.name,classname:t.classname,label:t.label,hint:t.hint,required:t.required,labelStyle:t.labelStyle,showNewButton:t.showNewButton,onClickEvent:n.getFieldName,actionBtn:t.actionBtn,isInlineForm:t.isInlineForm,showPreview:t.showPreview,tipRule:t.tipRule},{default:I(()=>[S(g,{name:t.name,rules:t.rules,modelValue:e.selectedValue,"onUpdate:modelValue":a[1]||(a[1]=w=>e.selectedValue=w)},{default:I(({field:w,errorMessage:h,meta:C,classes:k})=>[o("div",vi,[S(c,{name:t.name,class:F(["faveo-dynamic-select",k,h?"field-danger":""]),ref:"faveoDynamicSelect",options:e.listElements,modelValue:e.selectedValue,"onUpdate:modelValue":[a[0]||(a[0]=b=>e.selectedValue=b),n.onValueChange],label:t.optionLabel,multiple:t.multiple,placeholder:e.lang("search_or_select"),autoscroll:t.autoscroll,disabled:t.disabled,clearable:t.clearable,searchable:t.searchable,transition:t.transition,closeOnSelect:t.closeOnSelect,taggable:t.taggable,pushTags:t.pushTags,filterable:!1,noDrop:t.noDrop,inputId:t.id,dir:t.dir,onSearch:n.onSearch,onOpen:n.connectObserver,onClose:n.disconnectObserver,"onSearch:blur":n.clearSearchQuery,"onOption:deselected":n.onDeselect,"select-on-key-codes":[188,13],style:M(t.inputStyle)},yt({spinner:I(({loader:b})=>[e.isLoading?(s(),y(r,{key:0,class:"loader-area",duration:4e3,size:20})):m("",!0)]),"no-options":I(({search:b,searching:z})=>[Fi,z?(s(),d(L,{key:0},[x(p(e.lang("no_results_found_for"))+" ",1),o("em",null,p(b),1),x(". ")],64)):(s(),d(L,{key:1},[!e.isLoading&&!n.hasNextPage?(s(),d("span",Si,p(e.lang("no_options_found")),1)):m("",!0)],64))]),option:I(b=>[t.optionLabel==="format"?(s(),d("div",{key:0,class:"d-center",title:b.identifier+" "+b.name},[b.profile_pic?(s(),y(u,{key:0,id:"faveo-dynamic-select-img","source-url":b.profile_pic,"img-height":"20","img-width":"20"},null,8,["source-url"])):m("",!0),t.showIcon&&b.icon_class?(s(),d("i",{key:1,class:F(b.icon_class),"aria-hidden":"true"},null,2)):m("",!0),t.optionLabel==="format"?(s(),d("span",{key:2,innerHTML:b[t.optionLabel]},null,8,Ci)):m("",!0)],8,ki)):(s(),d("div",{key:1,class:"d-center",title:b.hover?b.hover:b[t.optionLabel]},[b.profile_pic?(s(),y(u,{key:0,id:"faveo-dynamic-select-img","source-url":b.profile_pic,"img-height":"20","img-width":"20"},null,8,["source-url"])):m("",!0),t.showIcon&&b.icon_class?(s(),d("i",{key:1,class:F(b.icon_class),"aria-hidden":"true"},null,2)):m("",!0),x(" "+p(n.subString(b[t.optionLabel])),1)],8,wi))]),"selected-option":I(b=>[t.optionLabel==="format"?(s(),d("div",{key:0,class:"selected d-center",title:b.identifier+" "+b.name},[b.profile_pic?(s(),y(u,{key:0,id:"faveo-dynamic-select-img","source-url":b.profile_pic,"img-height":"20","img-width":"20"},null,8,["source-url"])):m("",!0),t.showIcon&&b.icon_class?(s(),d("i",{key:1,class:F(b.icon_class),"aria-hidden":"true"},null,2)):m("",!0),o("span",{innerHTML:b[t.optionLabel]?b[t.optionLabel]:b.name},null,8,Ai)],8,Ii)):(s(),d("div",{key:1,class:"selected d-center",title:b.hover?b.hover:b[t.optionLabel]},[b.profile_pic?(s(),y(u,{key:0,id:"faveo-dynamic-select-img","source-url":b.profile_pic,"img-height":"20","img-width":"20"},null,8,["source-url"])):m("",!0),t.showIcon&&b.icon_class?(s(),d("i",{key:1,class:F(b.icon_class),"aria-hidden":"true"},null,2)):m("",!0),x(" "+p(b[t.optionLabel]?n.subString(b[t.optionLabel]):b.meta_name),1)],8,Vi))]),_:2},[n.hasNextPage?{name:"list-footer",fn:I(()=>[o("li",qi,null,512)]),key:"0"}:void 0]),1032,["name","class","options","modelValue","label","multiple","placeholder","autoscroll","disabled","clearable","searchable","transition","closeOnSelect","taggable","pushTags","noDrop","inputId","dir","onUpdate:modelValue","onSearch","onOpen","onClose","onSearch:blur","onOption:deselected","style"])]),T(o("span",{class:"error-block is-danger"},p(h),513),[[se,h]])]),_:1},8,["name","rules","modelValue"]),K(e.$slots,"dsHelpText",{},void 0,!0)]),_:3},8,["labelLength","showTooltipOnLabel","name","classname","label","hint","required","labelStyle","showNewButton","onClickEvent","actionBtn","isInlineForm","showPreview","tipRule"])):m("",!0)}const ve=V(_i,[["render",Di],["__scopeId","data-v-e8d560fb"]]);const xi={name:"text-field",description:"text field component along with error block",props:{label:{type:String,required:!0},hint:{type:String,default:""},value:{type:[String,null],required:!0},name:{type:String,required:!0},type:{type:String,default:"text"},onChange:{type:Function,Required:!0},classname:{type:String,default:""},required:{type:Boolean,default:!1},length:{type:[Number,String],default:2e3},keyupListener:{type:Function,default:()=>{}},keydownListener:{type:Function,default:()=>{}},keypressEvt:{type:Function,default:()=>{}},pasteEvt:{type:Function,default:()=>{}},labelStyle:{type:Object},placehold:{type:String,default:"enter_a_value"},id:{type:[String,Number],default:"text-field"},disabled:{type:Boolean,default:!1},columns:{type:[String,Number],default:""},inputStyle:{type:Object,default:()=>{}},max:{type:[Number,String],default:""},rows:{type:[Number,String],default:""},cols:{type:[Number,String],default:""},inputClass:{type:String,default:""},showWordLimit:{type:Boolean,default:!1},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},pattern:{type:String,default:null},validationMessage:{type:String,default:""},actionBtn:{type:Object,default:()=>null},from:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},autofocus:{type:[Number,Boolean],default:!1},isRequester:{type:Boolean,default:!1},page:{type:String,default:""},labelLength:{type:[Number,String],default:500},isEXT:{type:Boolean,default:!1}},data(){return{changedValue:this.value,showPassword:!1}},mounted(){this.changedValue=this.value,this.$nextTick(()=>{this.autofocus&&setTimeout(()=>{this.$refs.textField.focus()},1)})},watch:{value(e){this.changedValue=this.id==="seats"&&e<=0&&e!==""?0:e}},methods:{togglePassword(){this.showPassword=!this.showPassword}},components:{"form-field-template":H}},et=e=>(ee("data-v-e4c2deb9"),e=e(),te(),e),Ti={key:0},Li=["id","name","maxlength","type","cols","rows","pattern","placeholder","disabled"],Pi=["id","name","type","disabled","placeholder","maxlength","pattern"],Mi={key:0},Ei={key:0,slot:"word-limit-counter"},Ui=["id","name","maxlength","type","cols","rows","pattern","placeholder","disabled"],Ri={key:1,class:"input-group"},Bi={key:0,class:"input-group-append"},Ki=et(()=>o("span",{class:"input-group-text oauth-login-icon"},[o("i",{class:"fa fa-lock"})],-1)),Ni=[Ki],Oi=["id","name","type","disabled","placeholder","maxlength","pattern"],zi={key:1,class:"input-group-append"},ji={class:"input-group-text"},Hi={key:2,class:"input-group"},Yi=et(()=>o("div",{class:"input-group-append"},[o("span",{class:"input-group-text oauth-login-icon"},[o("i",{class:"fa fa-user"})])],-1)),Wi=["id","name","type","disabled","placeholder","maxlength","pattern"],Ji=["id","name","type","disabled","placeholder","maxlength","pattern"],Gi={key:4,class:"error-block is-danger"},Qi={key:0};function Zi(e,a,t,l,i,n){const r=f("ValidationProvider"),u=f("form-field-template");return s(),y(u,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,actionBtn:t.actionBtn,tipRule:t.tipRule,isRequester:t.isRequester,labelLength:t.labelLength},{default:I(()=>[t.from?(s(),d(L,{key:0},[t.type==="textarea"?(s(),d("div",Ti,[T(o("textarea",{id:t.id,name:t.name,class:F(["form-control",t.inputClass]),maxlength:t.length,type:t.type,"onUpdate:modelValue":a[0]||(a[0]=c=>i.changedValue=c),onInput:a[1]||(a[1]=c=>t.onChange(i.changedValue,t.name)),onKeyup:a[2]||(a[2]=c=>t.keyupListener(c,t.name)),onKeydown:a[3]||(a[3]=c=>t.keydownListener(c,t.name)),onKeypress:a[4]||(a[4]=c=>t.keypressEvt(c,t.name,t.type)),onPaste:a[5]||(a[5]=c=>t.pasteEvt(c,t.name,t.type)),cols:t.columns,rows:t.rows,style:M(t.inputStyle),pattern:t.pattern?t.pattern:null,placeholder:e.trans(t.placehold),ref:t.autofocus?"textField":"",disabled:t.disabled},`

              `,46,Li),[[re,i.changedValue]])])):T((s(),d("input",{key:1,id:t.id,name:t.name,class:F(["form-control",t.inputClass]),type:t.type,disabled:t.disabled,style:M(t.inputStyle),"onUpdate:modelValue":a[6]||(a[6]=c=>i.changedValue=c),onInput:a[7]||(a[7]=c=>t.onChange(i.changedValue,t.name)),onKeyup:a[8]||(a[8]=c=>t.keyupListener(c,t.name)),onKeydown:a[9]||(a[9]=c=>t.keydownListener(c,t.name)),onKeypress:a[10]||(a[10]=c=>t.keypressEvt(c,t.name,t.type)),onPaste:a[11]||(a[11]=c=>t.pasteEvt(c,t.name,t.type)),placeholder:e.trans(t.placehold),maxlength:t.max?t.max:void 0,pattern:t.pattern?t.pattern:null,ref:t.autofocus?"textField":""},null,46,Pi)),[[ne,i.changedValue]])],64)):(s(),y(r,{key:1,name:t.name,rules:t.rules,modelValue:i.changedValue,"onUpdate:modelValue":a[33]||(a[33]=c=>i.changedValue=c)},{default:I(({field:c,errorMessage:g,meta:A,classes:w})=>[t.type==="textarea"?(s(),d("div",Mi,[t.showWordLimit?(s(),d("small",Ei,p("("+(i.changedValue.length||0)+"/"+t.length+")"),1)):m("",!0),T(o("textarea",{id:t.id,name:t.name,class:F(["form-control",t.inputClass,w,g?"field-danger":""]),maxlength:t.length,type:t.type,"onUpdate:modelValue":a[12]||(a[12]=h=>i.changedValue=h),onInput:a[13]||(a[13]=h=>t.onChange(i.changedValue,t.name)),cols:t.columns,rows:t.rows,style:M(t.inputStyle),pattern:t.pattern?t.pattern:null,placeholder:e.trans(t.placehold),ref:t.autofocus?"textField":"",disabled:t.disabled},null,46,Ui),[[re,i.changedValue]])])):t.type==="password"?(s(),d("div",Ri,[t.page==="oauth-login"&&t.type==="password"?(s(),d("div",Bi,Ni)):m("",!0),T(o("input",{autocomplete:"off",id:t.id,name:t.name,class:F(["form-control",t.inputClass]),type:i.showPassword?"text":"password",disabled:t.disabled,style:M(t.inputStyle),"onUpdate:modelValue":a[14]||(a[14]=h=>i.changedValue=h),onInput:a[15]||(a[15]=h=>t.onChange(i.changedValue,t.name)),onKeyup:a[16]||(a[16]=h=>t.keyupListener(h,t.name)),onKeydown:a[17]||(a[17]=h=>t.keydownListener(h,t.name)),onKeypress:a[18]||(a[18]=h=>t.keypressEvt(h,t.name,t.type)),onPaste:a[19]||(a[19]=h=>t.pasteEvt(h,t.name,t.type)),placeholder:e.trans(t.placehold),maxlength:t.max?t.max:void 0,pattern:t.pattern?t.pattern:null,ref:t.autofocus?"textField":""},null,46,Oi),[[ne,i.changedValue]]),t.type==="password"?(s(),d("div",zi,[o("span",ji,[o("i",{class:F(["fa",i.showPassword?"fa-eye":"fa-eye-slash"]),onClick:a[20]||(a[20]=(...h)=>n.togglePassword&&n.togglePassword(...h))},null,2)])])):m("",!0)])):t.type==="text"&&t.page==="oauth-login"?(s(),d("div",Hi,[Yi,T(o("input",{id:t.id,name:t.name,class:F(["form-control",t.inputClass,w,g?"field-danger":""]),type:t.type,disabled:t.disabled,style:M(t.inputStyle),"onUpdate:modelValue":a[21]||(a[21]=h=>i.changedValue=h),onInput:a[22]||(a[22]=h=>t.onChange(i.changedValue,t.name)),onKeyup:a[23]||(a[23]=h=>t.keyupListener(h,t.name)),onKeydown:a[24]||(a[24]=h=>t.keydownListener(h,t.name)),onKeypress:a[25]||(a[25]=h=>t.keypressEvt(h,t.name,t.type)),onPaste:a[26]||(a[26]=h=>t.pasteEvt(h,t.name,t.type)),placeholder:e.trans(t.placehold),maxlength:t.max?t.max:void 0,pattern:t.pattern?t.pattern:null,ref:t.autofocus?"textField":""},null,46,Wi),[[ne,i.changedValue]])])):T((s(),d("input",{key:3,autocomplete:"off",id:t.id,name:t.name,class:F(["form-control",t.inputClass,w,g?"field-danger":""]),type:t.type,disabled:t.disabled,style:M(t.inputStyle),"onUpdate:modelValue":a[27]||(a[27]=h=>i.changedValue=h),onInput:a[28]||(a[28]=h=>t.onChange(i.changedValue,t.name)),onKeyup:a[29]||(a[29]=h=>t.keyupListener(h,t.name)),onKeydown:a[30]||(a[30]=h=>t.keydownListener(h,t.name)),onKeypress:a[31]||(a[31]=h=>t.keypressEvt(h,t.name,t.isEXT?"number":t.type)),onPaste:a[32]||(a[32]=h=>t.pasteEvt(h,t.name,t.isEXT?"number":t.type)),placeholder:e.trans(t.placehold),maxlength:t.max?t.max:void 0,pattern:t.pattern?t.pattern:null,ref:t.autofocus?"textField":""},null,46,Ji)),[[ne,i.changedValue]]),g?(s(),d("span",Gi,[x(p(g)+" ",1),t.pattern?m("",!0):(s(),d("span",Qi,p(t.validationMessage?"("+t.validationMessage+")":""),1))])):m("",!0)]),_:1},8,["name","rules","modelValue"]))]),_:1},8,["label","labelStyle","name","classname","hint","required","isInlineForm","actionBtn","tipRule","isRequester","labelLength"])}const oe=V(xi,[["render",Zi],["__scopeId","data-v-e4c2deb9"]]);const Xi={name:"radio-field",props:{name:{type:String,required:!0},label:{type:String,required:!0},hint:{type:String,default:""},options:{type:Array,required:!0},required:{type:Boolean,default:!1},onChange:{type:Function,Required:!0},value:{type:[String,Object],default:""},labelStyle:{type:Object,default:()=>{}},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},from:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},labelLength:{type:[Number,String],default:500}},data:()=>({selectedValue:""}),mounted(){this.selectedValue=P(this.value)?this.value:""},watch:{value(e){this.selectedValue=P(e)?e:""}},methods:{getUniqueName(e=""){return e+"__"+Math.floor(Math.random()*1e5)},onInput(e){this.from?this.onChange(e,this.name):this.onChange(e,this.label)}},components:{"form-field-template":H}},$i={class:"row"},en={class:"control-label"},tn=["value","name"];function an(e,a,t,l,i,n){const r=f("ValidationProvider"),u=f("form-field-template");return s(),y(u,{name:t.name,label:t.label,hint:t.hint,required:t.required,labelStyle:t.labelStyle,isInlineForm:t.isInlineForm,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[o("div",$i,[S(r,{name:t.name,rules:t.rules,class:"row",tag:"div",modelValue:e.selectedValue,"onUpdate:modelValue":a[2]||(a[2]=c=>e.selectedValue=c)},{default:I(({field:c,errorMessage:g,meta:A,classes:w})=>[(s(!0),d(L,null,N(t.options,h=>(s(),d("div",{class:"col-md-4 pl-4 c-form-radio",key:h.id},[o("label",en,[T(o("input",{type:"radio",class:F(["form-check-input",g?"field-danger":""]),"onUpdate:modelValue":a[0]||(a[0]=C=>e.selectedValue=C),value:h,name:n.getUniqueName(h.form_identifier),onChange:a[1]||(a[1]=C=>n.onInput(e.selectedValue))},null,42,tn),[[Re,e.selectedValue]]),x(" "+p(h.label),1)])]))),128)),T(o("div",{class:"error-block is-danger col-md-12"},p(g),513),[[se,g]])]),_:1},8,["name","rules","modelValue"])])]),_:1},8,["name","label","hint","required","labelStyle","isInlineForm","tipRule","labelLength"])}const nn=V(Xi,[["render",an],["__scopeId","data-v-e38972a5"]]);const ln={name:"checkbox-field",props:{name:{type:String,required:!0},label:{type:String,required:!0},hint:{type:String,default:""},options:{type:Array,required:!0},required:{type:Boolean,default:!1},onChange:{type:Function,Required:!0},value:{type:[Array,String],default:""},labelStyle:{type:Object,default:()=>{}},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},from:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},labelLength:{type:[Number,String],default:500}},data:()=>({selectedValue:[]}),mounted(){this.selectedValue=P(this.value)?this.value:[]},watch:{value(e){this.selectedValue=P(e)?e:[]}},methods:{getUniqueName(e=""){return e+"__"+Math.floor(Math.random()*1e5)},onInput(e){this.from?this.onChange(e,this.name):this.onChange(e,this.label)}},components:{"form-field-template":H}},sn={class:"row"},on={class:"control-label"},rn=["id","value","name"];function dn(e,a,t,l,i,n){const r=f("ValidationProvider"),u=f("form-field-template");return s(),y(u,{name:t.name,label:t.label,hint:t.hint,required:t.required,labelStyle:t.labelStyle,isInlineForm:t.isInlineForm,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[o("div",sn,[S(r,{name:t.name,rules:t.rules,class:"row",tag:"div",modelValue:e.selectedValue,"onUpdate:modelValue":a[2]||(a[2]=c=>e.selectedValue=c)},{default:I(({field:c,errorMessage:g,meta:A,classes:w})=>[(s(!0),d(L,null,N(t.options,h=>(s(),d("div",{class:"col-md-4 pl-4 c-form-checkbox",key:h.id},[o("label",on,[T(o("input",{type:"checkbox",class:F(["form-check-input",g?"field-danger":""]),id:h.form_identifier,"onUpdate:modelValue":a[0]||(a[0]=C=>e.selectedValue=C),value:h,name:n.getUniqueName(h.form_identifier),onChange:a[1]||(a[1]=C=>n.onInput(e.selectedValue))},null,42,rn),[[Be,e.selectedValue]]),x(" "+p(h.label),1)])]))),128)),T(o("div",{class:"error-block is-danger col-md-12"},p(g),513),[[se,g]])]),_:1},8,["name","rules","modelValue"])])]),_:1},8,["name","label","hint","required","labelStyle","isInlineForm","tipRule","labelLength"])}const un=V(ln,[["render",dn],["__scopeId","data-v-d910d47b"]]),cn={name:"faveo-image-element",description:"Common element for image tag",props:{id:{type:String,required:!0},sourceUrl:{type:String,required:!0},styleObject:{type:Object,default:()=>{}},classes:{type:Array,default:()=>[]},alternativeText:{type:String,default:""},imgWidth:{type:[Number,String],default:"auto"},imgHeight:{type:[Number,String],default:"auto"},defaultImage:{type:String,default:"contacthead.png"}},data:()=>({}),computed:{getSrc:function(){return this.sourceUrl?this.sourceUrl:this.basePathVersion()+"/themes/default/common/images/"+this.defaultImage}},methods:{onImageLoadError(e){e.target.onerror=null,e.target.src=this.basePathVersion()+"/themes/default/common/images/"+this.defaultImage}}},mn=["id","src","alt","width","height"];function fn(e,a,t,l,i,n){return s(),d("img",{id:t.id,src:n.getSrc,class:F(t.classes),alt:t.alternativeText,width:t.imgWidth,height:t.imgHeight,style:M(t.styleObject),onError:a[0]||(a[0]=r=>n.onImageLoadError(r))},null,46,mn)}const hn=V(cn,[["render",fn]]);const yn={name:"file-upload",description:"file upload component along with error block",props:{label:{type:String,required:!0},hint:{type:String,default:""},name:{type:String,required:!0},onChange:{type:Function,Required:!0},classname:{type:String,default:""},required:{type:Boolean,default:!1},labelStyle:{type:Object},id:{type:[String,Number],default:"file-upload"},value:{type:[Object,String,Array],default:""},accept:{type:String,default:""},multiple:{type:Boolean,default:!1},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},sizeModules:{type:String,default:""},formType:{type:String,default:""},labelLength:{type:[Number,String],default:500}},data(){return{files:[],totalSize:null,previewImgSrc:"",showPreview:!1,max_size:0,file_size:0,max_file:0,str:"",str1:"",changedValue:this.value,counter:0}},async beforeMount(){await axios.get("file-manager/upload-info").then(e=>{this.sizeModules.post_max_size||(this.totalSize=e.data.data.maxPostSize,this.str1=this.lang("max_upload_size")+this.formatBytes(this.totalSize))}).catch(e=>{})},mounted(){this.max_size=this.sizeModules.post_max_size,this.file_size=this.sizeModules.upload_max_filesize,this.max_file=this.sizeModules.max_file_uploads,this.max_size!==void 0||this.file_size!==void 0||this.max_file!==void 0?this.str=this.lang("max_upload_size")+this.formatBytes(this.max_size):this.str="",this.updatefiles(this.value)},watch:{value(e){this.updatefiles(e),this.changedValue=e}},methods:{formatBytes(e,a){if(e==0)return"0 Bytes";var t=1024,l=a||2,i=["Bytes","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(l))+" "+i[n]},isImageTypeFile(e){return/\.(jpe?g|png|gif)$/i.test(e)},updatefiles(e){e?Array.isArray(e)?this.files=e:this.files=[e]:this.files=[]},async onFileSelected(e){this.counter++;const a=e.target.files,t=this.max_file;if(a.length+this.files.length>t){let i=this.trans("file_upload_limit"),n=this.trans("files");this.$store.dispatch("setAlert",{type:"danger",message:`${i} ${t} ${n}`,component_name:"faveo-form"});return}else for(var l=0;l<a.length;l++)if(this.multiple){const i=a[l].name;this.files.some(r=>r.name===i)||this.files.push(a[l])}else this.files.splice(0,this.files.length),this.files.push(a[l]);this.$refs.fileUpload.validate(this.files),this.updateParent(this.files,this.name,!1)},displayPreviewImageIfAny(e){this.showPreview=!0,this.files[e].path?this.previewImgSrc=this.files[e].path:(this.previewImgSrc="",setTimeout(()=>{let a=new FileReader;a.addEventListener("load",(function(){this.previewImgSrc=a.result}).bind(this),!1),a.readAsDataURL(this.files[e])},1))},distroyPreviewImageBlock(){this.previewImgSrc="",this.showPreview=!1},updateParent(e,a,t){this.onChange(e,a,t)},removeFile(e){this.files.splice(e,1),this.distroyPreviewImageBlock(),this.updateParent(this.files,this.name,!0),this.$refs.fileUpload.validate(this.files),this.counter++}},components:{"form-field-template":H,"faveo-image-element":hn}},gn=e=>(ee("data-v-bc035898"),e=e(),te(),e),pn=["id","name","accept","onBlur","multiple"],_n=gn(()=>o("i",{class:"far fa-file"},null,-1)),bn={key:0},vn={class:"file-details"},Fn={class:"float-right"},Sn=["onClick","title"],kn={key:0,class:"card m_4"},Cn={class:"card-header"},wn={class:"card-title"},In={key:0,class:"card-body pb-0"},An={key:1,class:"card-body pb-0"},Vn={key:1,class:"row",id:"load_margin"},qn=["onClick","title"],Dn=["href"],xn={key:1,class:"error-block is-danger"};function Tn(e,a,t,l,i,n){const r=f("faveo-image-element"),u=f("resue-loader"),c=f("popover"),g=f("ValidationProvider"),A=f("form-field-template");return s(),y(A,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,key:i.counter,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[o("div",null,[S(g,{name:t.name,rules:t.rules,ref:"fileUpload",modelValue:i.changedValue,"onUpdate:modelValue":a[4]||(a[4]=w=>i.changedValue=w)},{default:I(({errorMessage:w,handleBlur:h,classes:C})=>[o("input",{id:"file-upload-"+t.name,name:t.name,ref:"files",type:"file",accept:t.accept,onInput:a[0]||(a[0]=(...k)=>e.handleChange&&e.handleChange(...k)),onChange:a[1]||(a[1]=(...k)=>n.onFileSelected&&n.onFileSelected(...k)),onBlur:h,multiple:t.multiple},null,40,pn),o("button",{type:"button",onClick:a[2]||(a[2]=k=>e.$refs.files.click()),class:"btn-bs-file btn btn-sm btn-default btn-block"},[o("span",null,[_n,x(" "+p(e.trans("choose_file")),1)])]),i.files&&i.files.length?(s(),d("div",bn,[(s(!0),d(L,null,N(i.files,(k,b)=>(s(),d("div",{class:"file-detail-box",key:b},[o("div",vn,[x(p((k.name||k.value)+" ("+k.size+(k.view_url?"":" KB")+")")+" ",1),o("div",Fn,[S(c,{arrow:"",placement:"left"},{content:I(()=>[i.previewImgSrc||k.view_url?(s(),d("div",kn,[o("div",Cn,[o("h3",wn,p(e.trans("preview")),1)]),t.name==="package_pic"&&k.view_url?(s(),d("div",In,[S(r,{id:"attach-img","source-url":k.view_url,classes:["preview_img"]},null,8,["source-url"])])):(s(),d("div",An,[S(r,{id:"attach-img","source-url":i.previewImgSrc,classes:["preview_img"]},null,8,["source-url"])]))])):(s(),d("div",Vn,[S(u,{"animation-duration":4e3,size:30})]))]),default:I(()=>[!k.download_url&&n.isImageTypeFile(k.name)||t.name==="package_pic"?(s(),d("i",{key:0,class:"fas fa-eye pointer",onClick:z=>n.displayPreviewImageIfAny(b),title:e.trans("preview")},null,8,Sn)):m("",!0)]),_:2},1024),x("  "),o("a",{href:"javascript:;",onClick:a[3]||(a[3]=(...z)=>e.handleChange&&e.handleChange(...z))},[o("i",{class:"fas fa-times pointer",onClick:z=>n.removeFile(b),title:e.trans("remove")},null,8,qn)]),(k.link||k.download_url)&&t.name!=="package_pic"?(s(),d("a",{key:0,class:"fas fa-download ml-1",style:{color:"inherit"},href:this.formType==="asset"||this.formType==="change"||this.formType==="service_desk"||this.formType==="license"?k.download_url:e.basePath()+k.link},null,8,Dn)):m("",!0)])])]))),128))])):m("",!0),w?(s(),d("span",xn,p(w)+p(e.lang(i.str)||e.lang(i.str1)?".":"")+" ",1)):m("",!0),o("i",null,p(e.lang(i.str)),1),o("i",null,p(e.lang(i.str1)),1)]),_:1},8,["name","rules","modelValue"])])]),_:1},8,["label","labelStyle","name","classname","hint","required","isInlineForm","tipRule","labelLength"])}const Ln=V(yn,[["render",Tn],["__scopeId","data-v-bc035898"]]);const Pn=Ke.Calendar,Mn={name:"date-time-field",description:"date time field component along with error block",setup(){const e=Ne();return{formattedTime:we(()=>e.getters.formattedTime),getUserData:we(()=>e.getters.getUserData)}},props:{label:{type:String,default:""},hint:{type:String,default:""},value:{type:[String,Date,null],required:!0},name:{type:[String,Number],required:!0},type:{type:String,default:"datetime"},onChange:{type:Function,Required:!0},classname:{type:String,default:""},labelStyle:{type:Object},required:{type:Boolean,default:!0},timePickerOptions:{type:Object,default:()=>{}},format:{type:String,default:""},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},range:{type:Boolean},place:{type:String,default:"select_date"},notBefore:{type:[String,Date]},notAfter:{type:[String,Date]},currentYearDate:{type:Boolean,default:!1},confirm:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},pickers:{type:[Boolean,Array],default:!1},rules:{type:String,default:""},isInlineForm:{type:Boolean,default:!1},outputFormat:{type:String,default:""},from:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},titleFormat:{type:String,default:"MMMM DD YYYY"},checkManual:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},timePeriod:{type:String,default:""},exactDisabledDate:{type:Boolean,default:!1},labelLength:{type:[Number,String],default:500}},data(){return{changedValue:this.value,selectedValue:"",moment:E,count:0}},beforeMount(){this.getUserData&&(this.newFormat=this.getUserData.date_format),this.range?this.changedValue=this.value?this.value:"":this.changedValue=this.value?new Date(this.value):""},methods:{preventPaste(e){e.preventDefault()},onDateTimeClear(e){this.onChange(null,this.name),this.changedValue=null},disabledDateMethod(e){const a=new Date().setHours(0,0,0,0),t=new Date(this.notBefore).setHours(0,0,0,0),l=new Date(this.notAfter).setHours(0,0,0,0);return this.timePeriod==="recur"?e<=new Date(this.notBefore)||e>=new Date(this.notAfter):this.exactDisabledDate?e<=t||e>=l:(e<t||e>l)&&e.getTime()!==a},onEventChange(e){this.checkManual&&(this.onChange(e,this.name),this.changedValue=e)},onDateTimeChange(e){this.count++,this.outputFormat?this.onChange(e?E(e).format(this.outputFormat):null,this.name):this.onChange(e,this.name),this.changedValue=e}},watch:{changedValue(e,a){this.inline&&this.onEventChange(e)},value(e,a){this.changedValue=e===""?null:e,!this.count&&this.changedValue&&this.from?(this.count++,this.changedValue=E(e,Rt(this.newFormat)).toDate(),this.onChange(E(this.changedValue).format(this.outputFormat),this.name)):this.range?this.changedValue=e||"":this.changedValue=e?new Date(e):""}},components:{DatePicker:Ke,CalendarComponent:Pn,"form-field-template":H}};function En(e,a,t,l,i,n){const r=f("calendar-component"),u=f("date-picker"),c=f("ValidationProvider"),g=f("form-field-template");return s(),y(g,{label:t.label,name:t.name,labelStyle:t.labelStyle,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[S(c,{name:t.name,rules:t.rules,modelValue:i.changedValue,"onUpdate:modelValue":a[4]||(a[4]=A=>i.changedValue=A)},{default:I(({field:A,errorMessage:w,meta:h,classes:C})=>[t.inline?(s(),y(r,{key:0,"popup-style":{top:"100%",left:0},"append-to-body":!1,value:i.changedValue,"onUpdate:value":a[0]||(a[0]=k=>i.changedValue=k),lang:"en",type:t.type,"time-picker-options":t.timePickerOptions,format:t.format,placeholder:e.lang(t.place),disabled:t.disabled,range:t.range,"input-class":["form-control",w?"field-danger":""],onConfirm:n.onDateTimeChange,onClear:n.onDateTimeClear,"onUpdate:changedValue":n.onEventChange,clearable:t.clearable,confirm:!1,editable:t.editable,shortcuts:t.pickers,"disabled-date":n.disabledDateMethod,"time-title-format":t.titleFormat},null,8,["value","type","time-picker-options","format","placeholder","disabled","range","input-class","onConfirm","onClear","onUpdate:changedValue","clearable","editable","shortcuts","disabled-date","time-title-format"])):(s(),d(L,{key:1},[t.label==="Publish immediately"?(s(),y(u,{key:0,"popup-style":{top:"100%",left:0},"append-to-body":!1,value:i.changedValue,"onUpdate:value":a[1]||(a[1]=k=>i.changedValue=k),lang:"en",type:t.type,"time-picker-options":t.timePickerOptions,format:t.format,placeholder:e.lang(t.place),disabled:t.disabled,range:t.range,"input-class":["form-control",w?"field-danger":""],onConfirm:n.onDateTimeChange,onClear:n.onDateTimeClear,clearable:t.clearable,shortcuts:t.pickers,confirm:t.confirm,"disabled-date":n.disabledDateMethod,"time-title-format":t.titleFormat},null,8,["value","type","time-picker-options","format","placeholder","disabled","range","input-class","onConfirm","onClear","clearable","shortcuts","confirm","disabled-date","time-title-format"])):m("",!0),!t.currentYearDate&&t.label!=="Publish immediately"?(s(),y(u,{key:1,"popup-style":{top:"100%",left:0},"append-to-body":!1,value:i.changedValue,"onUpdate:value":a[2]||(a[2]=k=>i.changedValue=k),lang:"en",type:t.type,"time-picker-options":t.timePickerOptions,format:t.format,placeholder:e.lang(t.place),disabled:t.disabled,range:t.range,"input-class":["form-control",w?"field-danger":""],onConfirm:n.onDateTimeChange,onClear:n.onDateTimeClear,onChange:n.onEventChange,clearable:t.clearable,confirm:t.confirm,editable:t.editable,shortcuts:t.pickers,onPaste:n.preventPaste,"disabled-date":n.disabledDateMethod,"time-title-format":t.titleFormat},null,8,["value","type","time-picker-options","format","placeholder","disabled","range","input-class","onConfirm","onClear","onChange","clearable","confirm","editable","shortcuts","onPaste","disabled-date","time-title-format"])):m("",!0),t.currentYearDate?(s(),y(u,{key:2,"popup-style":{top:"100%",left:0},"append-to-body":!1,value:i.changedValue,"onUpdate:value":a[3]||(a[3]=k=>i.changedValue=k),lang:"en",type:t.type,"time-picker-options":t.timePickerOptions,format:t.format,placeholder:e.lang(t.place),disabled:t.disabled,editable:t.editable,range:t.range,"input-class":["form-control",w?"field-danger":""],onConfirm:n.onDateTimeChange,onClear:n.onDateTimeClear,clearable:t.clearable,"disabled-date":n.disabledDateMethod,"not-before":i.moment(i.moment().year()+"-01-01").format("YYYY-MM-DD"),"not-after":i.moment(i.moment().year()+"-12-31").format("YYYY-MM-DD"),shortcuts:t.pickers,confirm:t.confirm,"time-title-format":t.titleFormat},null,8,["value","type","time-picker-options","format","placeholder","disabled","editable","range","input-class","onConfirm","onClear","clearable","disabled-date","not-before","not-after","shortcuts","confirm","time-title-format"])):m("",!0)],64)),T(o("span",{class:"error-block is-danger"},p(w),513),[[se,w]])]),_:1},8,["name","rules","modelValue"])]),_:1},8,["label","name","labelStyle","classname","hint","required","isInlineForm","tipRule","labelLength"])}const tt=V(Mn,[["render",En]]),Le={beforeMount(){this.formUniqueKey=De(this.category),this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario||this.mode})},computed:{...X({getFaveoFormData:"getFaveoFormData",getRecurAdditionalInfo:"getRecurAdditionalInfo",getTemplateAdditionalInfo:"getTemplateAdditionalInfo",showLoader:"showLoader",getEditorAttachments:"getEditorAttachments",getRecaptchaKey:"getRecaptchaKey",isChildFormLoading:"getChildFormLoading",getStoredTicketId:"getStoredTicketId",getSelectedOrgRelatedDept:"getSelectedOrgRelatedDept",getSource:"getSource",getApiKey:"getApiKey",getFormAdditionalInfo:"getFormAdditionalInfo"})},created(){window.emitter.on("storeCategoryId",e=>{this.formCategoryId=e})},methods:{async onSubmit(e=null){await Ca(this.$refs.faveoFormObserver)&&this.submitFormToServer(e)},submitFormToServer(e=null){this.$store.dispatch("unsetValidationError"),this.submitFormInProgress=!0;const{submitApiEndpoint:a,formDataMap:t}=this.getFaveoFormData[this.formUniqueKey];let l=new FormData;l.append("panel",this.panel),l.append("form_category_id",this.formCategoryId),l.append("g-recaptcha-response",this.getRecaptchaKey),this.getSource&&l.append("source_id",this.getSource),this.getApiKey&&l.append("api_key",this.getApiKey),this.getEditorAttachments.length&&(this.scenario==="recur"?l.append("attachments",JSON.stringify(this.getEditorAttachments.filter(r=>!r.id))):l.append("attachments",JSON.stringify(this.getEditorAttachments)));const i=Ge(t);for(const[r,u]of Object.entries(i))l.append(r,u);if(e&&Object.keys(e).forEach(r=>{l.append(r,e[r])}),this.scenario==="recur")for(const[r,u]of Object.entries(this.getRecurAdditionalInfo))if(r==="attach"&&Array.isArray(u)&&u.length){const c=this.getEditorAttachments.map(A=>A.id);u.filter(A=>c.includes(A.id)).forEach((A,w)=>{l.append(`recur[attachment_ids][${w}]`,A.id)})}else l.append("recur["+r+"]",u);this.scenario==="template"&&(l.append("id",this.getTemplateAdditionalInfo.id),l.append("name",this.getTemplateAdditionalInfo.name)),this.page&&this.page==="add_ticket_with_form"&&l.append("ticket_id",this.getStoredTicketId),this.page&&this.page==="add_id_with_form"&&l.append("problem_id",this.form_id),(this.page||this.panel==="client"&&this.category==="requester")&&(this.page==="requester_create_agent"||this.page==="requester_edit_agent"||this.panel==="client"&&this.category==="requester")&&this.getSelectedOrgRelatedDept&&this.getSelectedOrgRelatedDept.forEach((r,u)=>{l.append("related["+u+"]",JSON.stringify({org_dept:r.id,org_id:r.org_id}))}),this.getFormAdditionalInfo&&Object.entries(this.getFormAdditionalInfo).forEach(([r,u])=>{l.append(r,u)});let n={"Content-Type":"multipart/form-data"};U.post(a,l,{headers:n}).then(r=>{if(this.panel==="client"&&this.category==="ticket"&&this.formId==="chat-widget"){r.data.message="Ticket created successfully",ge(r,"faveo-form"),this.afterSubmit(r);return}ge(r,"faveo-form"),this.afterSubmit(r)}).catch(r=>{R(r,"faveo-form"),r.response.status===400&&this.afterError()}).finally(()=>{this.submitFormInProgress=!1})}},beforeDestroy(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey)}};const Un={name:"modal",description:"Modal popup Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},containerStyle:{type:Object},classname:{type:String,default:"modal-md"},language:{type:String,default:""},modalBodyClass:{type:String,default:""},showCloseBtn:{type:Boolean,default:!0},footerClass:{type:String,default:""}},data(){return{currentStatus:this.showModal,lang_locale:""}},created(){this.lang_locale=localStorage.getItem("LANGUAGE")}},Rn={class:"modal-header"},Bn=o("span",{"aria-hidden":"true",id:"modal_close"},"×",-1),Kn=[Bn],Nn=o("i",{class:"fas fa-times"}," ",-1);function On(e,a,t,l,i,n){return i.currentStatus?(s(),y(Ie,{key:0,name:"modal"},{default:I(()=>[o("div",{class:F(["modal-mask",{rtl:t.language==="ar"}])},[o("div",{class:F(["modal-wrapper",t.classname])},[o("div",{class:"modal-container",style:M(t.containerStyle)},[o("div",Rn,[K(e.$slots,"title"),t.showCloseBtn?(s(),d("button",{key:0,class:F([{left:i.lang_locale=="ar"},"close"]),type:"button",onClick:a[0]||(a[0]=r=>t.onClose())},Kn,2)):m("",!0)]),o("div",{class:F(["modal-body",t.modalBodyClass])},[K(e.$slots,"alert"),K(e.$slots,"fields")],2),o("div",{class:F(["modal-footer",[t.showCloseBtn?"justify-content-between":"",t.footerClass]])},[t.showCloseBtn?(s(),d("button",{key:0,type:"button",id:"clos",class:F([{right:i.lang_locale=="ar"},"btn btn-default btn-light"]),onClick:a[1]||(a[1]=r=>t.onClose())},[Nn,x(p(e.lang("close")),1)],2)):m("",!0),K(e.$slots,"controls")],2)],4)],2)],2)]),_:3})):m("",!0)}const at=V(Un,[["render",On]]),zn={props:{data:{type:String,default:""}},beforeMount(){app.component("parsed-data",{props:["dataValue"],template:'<div v-html="loadData()"></div>',methods:{loadData(){var e=new DOMParser,a=e.parseFromString(this.dataValue,"text/html");const t=a.getElementsByTagName("body")[0];return t.querySelectorAll("a").forEach(i=>{if(i.href.includes(this.basePath())){let r=i.href.replace(this.basePath(),"").split("/").filter(u=>u);if(r[0]=="check-ticket")i.setAttribute("target","_blank"),i=i;else if(r[0]=="department"||r[0]=="team"||r[0]=="service-desk"&&r[1]=="products"||r[0]=="service-desk"&&r[1]=="vendor"||r[0]=="service-desk"&&r[1]=="manufacturers"||r[0]=="service-desk"&&r[1]=="deprication")i.setAttribute("target","_blank"),i.setAttribute("href",i.href.replace(this.basePath(),this.basePath()+"/admin")),i.title=="mention_link"&&(i.setAttribute("data-id","mention_link"),i.setAttribute("title","")),i=i;else{const u=a.createElement("a");!i.href.includes(this.basePath()+"/panel/")&&!i.href.includes(this.basePath()+"/show/")&&!i.href.includes(this.basePath()+"/category-list/")?u.setAttribute("href",i.href.replace(this.basePath(),this.basePath()+"/panel")):u.setAttribute("href",i.href),u.setAttribute("target","_blank"),u.innerText=i.innerText,i.title=="mention_link"&&(u.setAttribute("data-id","mention_link"),u.setAttribute("title","")),i.parentNode&&i.parentNode.replaceChild(u,i)}}i.setAttribute("target","_blank")}),t.innerHTML}}})}};function jn(e,a,t,l,i,n){const r=f("parsed-data");return s(),y(r,{dataValue:t.data},null,8,["dataValue"])}const Hn=V(zn,[["render",jn]]);const Yn={name:"alert",desciption:"It is the alert bar which comes into view as soon as there is an error message in vuex alert store",props:{componentName:{type:String,default:""}},computed:{...X(["getAlertType","getAlertMessage","getAlertComponentName","getAlertDuration"]),type:{get(){return this.getAlertType}},message:{get(){return this.getAlertMessage}},classname:{get(){return"alert-"+this.getAlertType}}},methods:{dismiss(){this.$store.dispatch("unsetAlert")},shallDisplay(){return this.type!==""&&this.getAlertComponentName===this.componentName||this.getAlertComponentName==="root-alert-container"},getData(e){return"<span>"+e+"</span>"}},watch:{message(){if(this.message!==""){let e=this;const a=this.getAlertDuration?this.getAlertDuration:(this.type==="success",7e3);setTimeout(function(){e.dismiss()},a),setTimeout(()=>{let t=document.getElementsByClassName("alert-container")[0];t!==void 0&&t.scrollIntoView({behavior:"smooth",block:"start"})},50)}}},components:{"alert-parser":Hn}},Wn={key:0,class:"alert-container",id:"alert"},Jn={id:"alert-message"},Gn={key:0,class:"fa fa-check-circle alert-icon"},Qn={key:1,class:"fa fa-warning alert-icon"};function Zn(e,a,t,l,i,n){const r=f("alert-parser");return n.shallDisplay()?(s(),d("div",Wn,[o("div",{class:F(["alert",n.classname])},[o("button",{type:"button",onClick:a[0]||(a[0]=(...u)=>n.dismiss&&n.dismiss(...u)),class:"close",id:"alert_close"},"×"),o("div",Jn,[n.classname=="alert-success"?(s(),d("i",Gn)):m("",!0),n.classname=="alert-danger"?(s(),d("i",Qn)):m("",!0),x("    "),S(r,{data:n.getData(n.message)},null,8,["data"])])],2)])):m("",!0)}const Fe=V(Yn,[["render",Zn]]);const Xn={components:{spinner:Oe},props:{duration:{type:Number,default:4e3},color:{type:String,default:"#1d78ff"}}},$n={class:"center-of-page"},el=o("div",{class:"full-page"},null,-1);function tl(e,a,t,l,i,n){const r=f("spinner");return s(),d("div",null,[o("div",$n,[S(r,{"animation-duration":t.duration,size:60,color:t.color},null,8,["animation-duration","color"])]),el])}const ue=V(Xn,[["render",tl]]);const al={name:"recaptcha-field",description:"Recaptcha Field component",props:{siteKeyValue:{type:String,default:""},captchaVersion:{type:String,default:""},from:{type:String,default:""},node:{type:Object,default:()=>{}},category:{type:String,default:"ticket"},verifyCaptcha:{type:Function,default:()=>{}}},data(){return{recaptchaVerified:""}},components:{VueRecaptcha:gt},created(){window.emitter.on(this.category+"FormSubmitted",()=>{this.$emit("assignToModel","value",""),window.grecaptcha.reset()})},mounted(){this.$refs.recaptcha&&this.$refs.recaptcha.reset(),this.$refs.invisibleRecaptcha&&this.$refs.invisibleRecaptcha.reset(),this.version!="v2"&&this.siteKey&&this.$refs.invisibleRecaptcha.execute()},computed:{siteKey(){return this.siteKeyValue?this.siteKeyValue:this.recaptchaSiteKey},version(){return this.captchaVersion?this.captchaVersion:this.recaptchaVersion}},methods:{markRecaptchaAsVerified(e){this.recaptchaVerified=e,this.$emit("assignToModel","value",this.recaptchaVerified),this.verifyCaptcha(e),window.emitter.emit("recaptcha-validated")},onExpired(){this.verifyCaptcha("")}}},il={key:0,id:"cap_cha"};function nl(e,a,t,l,i,n){const r=f("vue-recaptcha"),u=f("ValidationProvider");return n.siteKey?(s(),d("div",il,[S(u,{name:"form-recaptcha",rules:n.version=="v2"?"required":""},{default:I(()=>[S(r,{ref:n.version=="v2"?"recaptcha":"invisibleRecaptcha",name:"form-recaptcha",modelValue:i.recaptchaVerified,"onUpdate:modelValue":a[0]||(a[0]=c=>i.recaptchaVerified=c),onVerify:n.markRecaptchaAsVerified,onExpired:n.onExpired,sitekey:n.siteKey?n.siteKey:"",size:n.version=="v2"?"normal":"invisible"},null,8,["modelValue","onVerify","onExpired","sitekey","size"])]),_:1},8,["rules"])])):m("",!0)}const it=V(al,[["render",nl]]);const ll={name:"form-with-captcha",description:"Form with Recaptcha Component",props:{btn_id:{type:String,default:""},btnClass:{type:String,default:"btn btn-custom"},btnName:{type:String,default:"save"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},layout:{type:Object,default:()=>{}},iconClass:{type:String,default:"fa fa-save"},formSubmit:{type:Function},page:{type:String,default:""},componentName:{type:String,default:""},recaptchaContainerClass:{type:String,default:""},disableSubmit:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},data(){return{captchaKey:"",counter:0}},created(){window.emitter.on("login-failure",this.updateCaptcha),window.emitter.on("reset-captcha",this.updateCaptcha),window.emitter.on("forComment",this.updateCaptcha)},methods:{updateCaptcha(){this.counter+=1,this.captchaKey=""},getCaptcha(e){this.captchaKey=e},onSubmit(){this.page&&this.recaptchaApplyfor.includes(this.page)?this.captchaKey?this.formSubmit("g-recaptcha-response",this.captchaKey):this.$store.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:this.componentName}):this.formSubmit()}},components:{RecaptchaField:it}},sl={id:"form-with-recaptcha"},ol={key:1,class:"row mt-3"},rl={class:"col-sm-12"},dl=["id","disabled"];function ul(e,a,t,l,i,n){const r=f("RecaptchaField"),u=Y("captcha");return s(),d("div",sl,[K(e.$slots,"fields"),t.loading?(s(),d("div",{key:0,class:F(t.recaptchaContainerClass)},[T((s(),y(r,{key:"captcha"+i.counter,verifyCaptcha:n.getCaptcha,name:"captcha"},null,8,["verifyCaptcha"])),[[u,t.page]])],2)):m("",!0),t.loading?(s(),d("div",ol,[o("div",rl,[o("button",{type:"button",id:t.btn_id,class:F(t.btnClass),onClick:a[0]||(a[0]=c=>n.onSubmit()),style:M(t.btnStyle),disabled:t.disableSubmit},[o("i",{class:F(t.iconClass)},null,2),x(" "+p(e.trans(t.btnName)),1)],14,dl)])])):m("",!0),K(e.$slots,"actions")])}const nt=V(ll,[["render",ul]]);const cl={name:"user-form-modal",props:{show:{type:Boolean,default:!1},closeModal:{type:Function,required:!0},updateNewRequester:{type:Function,required:!0},panel:{type:String,default:"agent"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},formId:{type:String,default:""},apiKey:{type:String,default:""}},data:()=>({fetchFormFieldApi:"",formUniqueKey:"",submitFormInProgress:!1,formSelected:!1,selectedForm:""}),beforeMount(){this.getDefaultFormValue()},mixins:[Le],methods:{getDefaultFormValue(){U.get("/from/forms/requester?api_key="+this.apiKey).then(e=>{this.selectedForm=e.data.data.data[0],this.updateFetchApi()}).catch(e=>{R(e,"faveo-form")})},updateFetchApi(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey),this.$store.dispatch("unsetValidationError"),this.fetchFormFieldApi="/render/form?id="+this.selectedForm.id+"&mode=render",setTimeout(()=>{this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario||"create"}),this.formSelected=!0},1)},popUpSubmit(){document.getElementById("user-submit").click()},formSubmit(e,a){this.$store.dispatch("setRecaptchaKey",a),this.onSubmit()},afterSubmit(e){window.emitter.emit("reset-captcha");let a=e.data.data;a.email||(a.name=a.full_name),this.updateNewRequester(a),this.closeModal(),window.emitter.emit("updateTicketCategory","ticket")},afterError(){this.closeModal()}},components:{modal:at,alert:Fe,loader:ue,"form-with-captcha":nt}},ml=e=>(ee("data-v-1b94fc4a"),e=e(),te(),e),fl=["disabled"],hl=ml(()=>o("span",null,[o("i",{class:"fas fa-save"})],-1));function yl(e,a,t,l,i,n){const r=f("loader"),u=f("alert"),c=f("form-renderer"),g=f("ValidationObserver"),A=f("form-with-captcha"),w=f("modal");return s(),d("div",null,[e.submitFormInProgress||e.isChildFormLoading?(s(),y(r,{key:0})):m("",!0),S(w,{showModal:t.show,onClose:t.closeModal},{title:I(()=>[o("h4",null,p(t.panel==="client"?e.lang("register"):e.lang("create_user")),1)]),fields:I(()=>[T(o("div",{id:"user-form-modal-body",class:F(t.formId==="chat-widget"?"pl-2":"")},[S(u,{componentName:"user-form-modal"}),e.formUniqueKey&&e.formSelected?(s(),y(A,{key:0,loading:!e.isChildFormLoading,btnClass:"btn btn-custom pull-right text-white",btnName:"submit",componentName:"user-form-modal",btnStyle:t.btnStyle,btn_id:"user-submit",formSubmit:n.formSubmit,page:t.formId==="chat-widget"?"":t.panel==="client"?"requester_create_client":"requester_create_agent",recaptchaContainerClass:"mt-2",inputStyle:t.inputStyle,disableSubmit:e.submitFormInProgress},{fields:I(()=>[S(g,{ref:"faveoFormObserver"},{default:I(({values:h,errors:C,validate:k})=>[(s(),y(c,{key:e.formUniqueKey,fetchFormFieldApi:e.fetchFormFieldApi,category:"requester",scenario:"create",panel:t.panel,formUniqueKey:e.formUniqueKey,isChildForm:!0,inputStyle:t.inputStyle,btnStyle:t.btnStyle,apiKey:t.apiKey,isInlineForm:!1,formId:t.formId,callingFrom:"popup"},null,8,["fetchFormFieldApi","panel","formUniqueKey","inputStyle","btnStyle","apiKey","formId"]))]),_:1},512)]),_:1},8,["loading","btnStyle","formSubmit","page","inputStyle","disableSubmit"])):m("",!0)],2),[[se,!e.isChildFormLoading]])]),controls:I(()=>[o("button",{type:"button",class:F(["btn",[(t.panel,"btn-primary"),"pull-right"]]),disabled:e.submitFormInProgress,onClick:a[0]||(a[0]=h=>n.popUpSubmit()),style:M(t.btnStyle)},[hl,x(" "+p(e.trans("submit")),1)],14,fl)]),_:1},8,["showModal","onClose"])])}const gl=V(cl,[["render",yl],["__scopeId","data-v-1b94fc4a"]]);const pl={props:{label:{type:String,required:!0},hint:{type:String,default:""},value:{type:[String,null],required:!0},name:{type:String,required:!0},onChange:{type:Function,Required:!0},required:{type:Boolean,default:!1},id:{type:[String,Number],default:"text-field"},rules:{type:String,default:""},actionBtn:{type:Object,default:()=>null},inputStyle:{type:Object,default:()=>{}},autofocus:{type:[Boolean,Number],default:!1},isInlineForm:{type:Boolean,default:!0},labelLength:{type:[Number,String],default:500}},data(){return{requesterValue:this.value,isLoggedIn:!1}},mounted(){this.$nextTick(()=>{P(this.userData.user_data)&&(this.onChange(this.userData.user_data,this.name),this.isLoggedIn=!0)})},computed:{...X({userData:"getUserData"})},watch:{value(e){typeof e=="object"?(this.requesterValue=e.meta_name?e.meta_name:"",this.onChange(e,this.name)):this.requesterValue=e}},components:{"text-field":oe}};function _l(e,a,t,l,i,n){const r=f("text-field");return i.isLoggedIn?(s(),y(r,{key:0,id:t.id,label:t.label,type:"text",name:t.name,value:i.requesterValue,onChange:t.onChange,required:t.required,rules:t.rules,hint:t.hint,isInlineForm:t.isInlineForm,placehold:e.trans("form_requester_placeholder"),inputStyle:t.inputStyle,autofocus:"autofocus",isRequester:!0,disabled:!0,labelLength:t.labelLength},null,8,["id","label","name","value","onChange","required","rules","hint","isInlineForm","placehold","inputStyle","labelLength"])):(s(),y(r,{key:1,id:t.id,label:t.label,type:"text",name:t.name,value:i.requesterValue,onChange:t.onChange,required:t.required,isInlineForm:t.isInlineForm,rules:t.rules,hint:t.hint,placehold:e.trans("form_requester_placeholder"),actionBtn:t.actionBtn,autofocus:t.autofocus,isRequester:!0,inputStyle:t.inputStyle,labelLength:t.labelLength},null,8,["id","label","name","value","onChange","required","isInlineForm","rules","hint","placehold","actionBtn","autofocus","inputStyle","labelLength"]))}const bl=V(pl,[["render",_l]]);const vl={name:"assetimage-upload",description:"file upload component along with error block",props:{label:{type:String,required:!0},hint:{type:String,default:""},name:{type:String,required:!0},onChange:{type:Function,Required:!0},classname:{type:String,default:""},required:{type:Boolean,default:!1},labelStyle:{type:Object},id:{type:[String,Number],default:"file-uploaded"},value:{type:[Object,String,Array],default:""},accept:{type:String,default:""},multiple:{type:Boolean,default:!1},fileMaxSize:{type:Number,default:2},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},labelLength:{type:[Number,String],default:500}},data(){return{files:[],previewImgSrc:"",showPreview:!1,changedValue:this.value,counter:0}},mounted(){this.updatefiles(this.value)},watch:{value(e){this.changedValue=e}},methods:{isImageTypeFile(e){return/\.(jpe?g|png|gif)$/i.test(e)},updatefiles(e){e?Array.isArray(e)?this.files=e:this.files=[e]:this.files=[]},async onFileSelected(e){const a=e.target.files,t=this.max_file;if(a.length+this.files.length>t){alert(`File upload limit: ${t}`);return}for(var l=0;l<a.length;l++)this.multiple?this.files.push(a[l]):(this.files.splice(0,this.files.length),this.files.push(a[l]));this.$refs.fileUpload.validate(this.files),this.updateParent(this.files,this.name,!1)},displayPreviewImageIfAny(e){this.showPreview=!0,this.files[e].path?this.previewImgSrc=this.files[e].path:(this.previewImgSrc="",setTimeout(()=>{let a=new FileReader;a.addEventListener("load",(function(){this.previewImgSrc=a.result}).bind(this),!1),a.readAsDataURL(this.files[e])},1))},distroyPreviewImageBlock(){this.previewImgSrc="",this.showPreview=!1},updateParent(e,a,t){this.onChange(e,a,t)},removeFile(e){this.files.splice(e,1),this.distroyPreviewImageBlock(),this.updateParent(this.files,this.name,!0),this.$refs.fileUpload.validate(this.files),this.counter++}},components:{"form-field-template":H}},Fl=e=>(ee("data-v-f1bbdf38"),e=e(),te(),e),Sl=["id","name","accept","onBlur"],kl=Fl(()=>o("i",{class:"far fa-image"},null,-1)),Cl={key:0},wl={class:"float-right"},Il=["onClick","title"],Al={key:0,class:"card m_4"},Vl={class:"card-header"},ql={class:"card-title"},Dl={class:"card-body pb-0"},xl={key:1,class:"row",id:"load_margin"},Tl=["onClick","title"],Ll={key:1,class:"error-block is-danger"};function Pl(e,a,t,l,i,n){const r=f("faveo-image-element"),u=f("resue-loader"),c=f("popover"),g=f("ValidationProvider"),A=f("form-field-template");return s(),y(A,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,key:i.counter,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[o("div",null,[S(g,{name:t.name,rules:t.rules,ref:"fileUpload",modelValue:i.changedValue,"onUpdate:modelValue":a[4]||(a[4]=w=>i.changedValue=w)},{default:I(({errorMessage:w,handleBlur:h,classes:C})=>[o("input",{id:"file-uploaded-"+t.name,name:t.name,ref:"files",type:"file",accept:t.accept,onInput:a[0]||(a[0]=(...k)=>e.handleChange&&e.handleChange(...k)),onChange:a[1]||(a[1]=(...k)=>n.onFileSelected&&n.onFileSelected(...k)),onBlur:h},null,40,Sl),o("button",{type:"button",onClick:a[2]||(a[2]=k=>e.$refs.files.click()),class:"btn-bs-file btn btn-sm btn-default btn-block"},[o("span",null,[kl,x(" "+p(e.trans("choose_image")),1)])]),i.files&&i.files.length?(s(),d("div",Cl,[(s(!0),d(L,null,N(i.files,(k,b)=>(s(),d("div",{class:"file-detail-box",key:b},[o("div",null,[x(p(k.name||k.value?k.name||k.value+" ("+k.size+" KB)":k.includes("/")?k.split("/").pop():k)+" ",1),o("div",wl,[S(c,{arrow:"",placement:"left"},{content:I(()=>[i.previewImgSrc||k.view_url?(s(),d("div",Al,[o("div",Vl,[o("h3",ql,p(e.trans("preview")),1)]),o("div",Dl,[S(r,{id:"attach-img","source-url":i.previewImgSrc||k.view_url,classes:["preview_img"]},null,8,["source-url"])])])):(s(),d("div",xl,[S(u,{"animation-duration":4e3,size:30})]))]),default:I(()=>[n.isImageTypeFile(k.name)?(s(),d("i",{key:0,class:"fas fa-eye pointer",onClick:z=>n.displayPreviewImageIfAny(b),title:e.trans("preview")},null,8,Il)):m("",!0)]),_:2},1024),x("  "),o("a",{href:"javascript:;",onClick:a[3]||(a[3]=(...z)=>e.handleChange&&e.handleChange(...z))},[o("i",{class:"fas fa-times pointer",onClick:z=>n.removeFile(b),title:e.trans("remove")},null,8,Tl)])])])]))),128))])):m("",!0),w?(s(),d("span",Ll,p(w),1)):m("",!0)]),_:1},8,["name","rules","modelValue"])])]),_:1},8,["label","labelStyle","name","classname","hint","required","isInlineForm","tipRule","labelLength"])}const Ml=V(vl,[["render",Pl],["__scopeId","data-v-f1bbdf38"]]),El={name:"mobile-field",description:"mobile field component along with ext block",props:{label:{type:String,required:!0},hint:{type:String,default:""},value:{type:[String,null],required:!0},name:{type:String,required:!0},type:{type:String,default:"text"},onChange:{type:Function,Required:!0},classname:{type:String,default:""},required:{type:Boolean,default:!1},keyupListener:{type:Function,default:()=>{}},keydownListener:{type:Function,default:()=>{}},keypressEvt:{type:Function,default:()=>{}},pasteEvt:{type:Function,default:()=>{}},labelStyle:{type:Object},placehold:{type:String,default:"enter_a_value"},id:{type:[String,Number],default:"mobile-field"},disabled:{type:Boolean,default:!1},inputStyle:{type:Object,default:()=>{}},max:{type:[Number,String],default:""},inputClass:{type:String,default:""},isInlineForm:{type:Boolean,default:!1},rules:{type:String,default:""},pattern:{type:String,default:null},validationMessage:{type:String,default:""},from:{type:String,default:""},tipRule:{type:[Number,Boolean],default:!1},autofocus:{type:[Number,Boolean],default:!1},countryCode:{type:[Number,null],Required:!0},extensionEnabled:{type:[Number,Boolean],default:!1},ext:{type:Array,default:()=>[]},onExtChange:{type:Function,default:()=>{}},extValue:{type:String,default:""},labelLength:{type:[Number,String],default:500},apiKey:{type:String,default:""},fieldFor:{type:String,default:""}},data(){return{country_codes:[],phone_code:this.countryCode,showList:!1,country:{},iso:"in",contryData:null,changedValue:this.value,example:"99876 54321",changedExtValue:this.extValue}},mounted(){this.changedValue=this.value,this.changedExtValue=this.extValue,this.$nextTick(()=>{this.autofocus&&setTimeout(()=>{this.$refs.mobileField.focus()},1)})},watch:{value(e){this.changedValue=this.id==="seats"&&e<=0&&e!==""?0:e},extValue(e){this.changedExtValue=e},countryCode(e,a){this.phone_code=e}},beforeMount(){this.countryCode?this.getCountryCodes():Ye().then(e=>{this.iso=e,this.getCountryCodes()}).catch(e=>{console.warn(e),this.iso="in",this.phone_code=91,this.getCountryCodes()}),this.changedValue=this.value,this.changedExtValue=this.extValue},methods:{onClickOutside(){this.showList=!1},onInputChange(e,a){if(e=e.replace(/[^0-9]/g,""),this.changedValue=e,this.fieldFor==="automator"&&this.extensionEnabled){let t={value:this.changedValue,nodes:this.ext};this.onChange(t,a)}else this.onChange(this.changedValue,a)},onExtInputChange(e,a){e=e.replace(/[^0-9]/g,""),this.changedExtValue=e,this.onExtChange(this.changedExtValue,a)},countryDetails(e){this.country_codes=e,this.countryCode?this.country=le(e,"phonecode",this.phone_code):this.country=le(e,"iso",this.iso.toUpperCase()),this.selectCountry(this.country,!1)},toggleList(){this.showList=!this.showList},getMaxLength(e){return(""+e).replace(/\s/g,"").length},getClassByISO(e){if(e)return"iti-flag "+e.toLowerCase()},selectCountry(e){this.iso=e.iso,this.phone_code=e.phonecode,this.example=e.example,this.$emit("countryCode",this.phone_code),this.fieldFor!=="automator"&&this.onChange(this.changedValue,this.name)},getCountryCodes(){U.get("/api/dependency/country-codes?time="+Date.now(),{params:{meta:!0,limit:"all",api_key:this.apiKey}}).then(e=>{this.contryData=He(e.data.data),this.countryDetails(this.contryData)}).catch(e=>{R(e,"contryCode")})}},components:{"form-field-template":H}},Ul={class:"row"},Rl={class:"intl-tel-input allow-dropdown separate-dial-code iti-sdc-3",style:{width:"100%"}},Bl=["id","name","disabled","placeholder","maxlength","pattern"],Kl={class:"selected-flag",tabindex:"0"},Nl={class:"selected-dial-code"},Ol=o("div",{class:"iti-arrow"},null,-1),zl={key:0,class:"country-list"},jl=["onClick"],Hl={class:"flag-box"},Yl={class:"country-name"},Wl={class:"dial-code"},Jl=o("li",{class:"divider"},null,-1),Gl=["onClick"],Ql={class:"flag-box"},Zl={class:"country-name"},Xl={class:"dial-code"},$l={key:0,class:"col-sm-4"},es=["id","name"],ts={key:1,class:"error-block is-danger col-sm-12"},as={key:0};function is(e,a,t,l,i,n){const r=f("ValidationProvider"),u=f("form-field-template"),c=Y("click-outside");return s(),y(u,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required,isInlineForm:t.isInlineForm,tipRule:t.tipRule,labelLength:t.labelLength},{default:I(()=>[S(r,{name:t.name,rules:t.rules,modelValue:i.changedValue,"onUpdate:modelValue":a[13]||(a[13]=g=>i.changedValue=g)},{default:I(({field:g,errorMessage:A,meta:w,classes:h})=>[o("div",Ul,[o("div",{class:F(t.extensionEnabled&&t.fieldFor!=="automator"?"col-sm-8":"col-sm-12")},[o("div",Rl,[T(o("input",{class:F(["form-control",["form-control",t.inputClass,h,A?"field-danger":""]]),autocomplete:"off",id:t.id,name:t.name,type:"text",disabled:t.disabled,style:M(t.inputStyle),"onUpdate:modelValue":a[0]||(a[0]=C=>i.changedValue=C),onInput:a[1]||(a[1]=C=>n.onInputChange(i.changedValue,t.name)),onKeyup:a[2]||(a[2]=C=>t.keyupListener(C,t.name)),onKeydown:a[3]||(a[3]=C=>t.keydownListener(C,t.name)),onKeypress:a[4]||(a[4]=C=>t.keypressEvt(C,t.name,t.type)),onPaste:a[5]||(a[5]=C=>t.pasteEvt(C,t.name,t.type)),placeholder:e.trans(t.placehold),maxlength:n.getMaxLength(i.example),pattern:t.pattern?t.pattern:null,ref:t.autofocus?"mobileField":""},null,46,Bl),[[re,i.changedValue]]),T((s(),d("div",{onClick:a[6]||(a[6]=(...C)=>n.toggleList&&n.toggleList(...C)),class:"flag-container",style:{width:"5pc"}},[o("div",Kl,[o("div",{id:"flag",class:F(n.getClassByISO(i.iso))},null,2),o("div",Nl,p(i.phone_code),1),Ol]),i.showList?(s(),d("ul",zl,[(s(!0),d(L,null,N(i.country_codes.slice(224,226),C=>(s(),d("li",{class:"country preferred",onClick:k=>n.selectCountry(C)},[o("div",Hl,[o("div",{class:F(n.getClassByISO(C.iso))},null,2)]),o("span",Yl,p(C.name),1),o("span",Wl,"+"+p(C.phonecode),1)],8,jl))),256)),Jl,(s(!0),d(L,null,N(i.country_codes,C=>(s(),d("li",{class:"country preferred",onClick:k=>n.selectCountry(C)},[o("div",Ql,[o("div",{class:F(n.getClassByISO(C.iso))},null,2)]),o("span",Zl,p(C.name),1),o("span",Xl,"+"+p(C.phonecode),1)],8,Gl))),256))])):m("",!0)])),[[c,n.onClickOutside]])])],2),t.extensionEnabled&&t.fieldFor!=="automator"?(s(),d("div",$l,[T(o("input",{class:"form-control",autocomplete:"off",type:"text",id:t.ext[0].id,name:t.ext[0].key,"onUpdate:modelValue":a[7]||(a[7]=C=>i.changedExtValue=C),onInput:a[8]||(a[8]=C=>n.onExtInputChange(i.changedExtValue,t.ext[0].key)),onKeyup:a[9]||(a[9]=C=>t.keyupListener(C,t.ext[0].key)),onKeydown:a[10]||(a[10]=C=>t.keydownListener(C,t.ext[0].key)),onKeypress:a[11]||(a[11]=C=>t.keypressEvt(C,t.ext[0].key,"number")),onPaste:a[12]||(a[12]=C=>t.pasteEvt(C,t.ext[0].key,"number")),maxlength:8,placeholder:"EXT"},null,40,es),[[re,i.changedExtValue]])])):m("",!0),A?(s(),d("span",ts,[x(p(A)+" ",1),t.pattern?m("",!0):(s(),d("span",as,p(t.validationMessage?"("+t.validationMessage+")":""),1))])):m("",!0)])]),_:1},8,["name","rules","modelValue"])]),_:1},8,["label","labelStyle","name","classname","hint","required","isInlineForm","tipRule","labelLength"])}const ns=V(El,[["render",is]]);const ls={name:"phone-n-country-code",description:"",components:{"form-field-template":H},props:{labelName:{type:String,default:"mobile_number"},language:{type:String,default:""},classname:{type:String,default:""},value:{type:[String,null],required:!0},name:{type:String,Required:!0},onChange:{type:Function,Required:!0},countryCode:{type:[Number,null],Required:!0},countryIso:{type:String,default:""},inputStyle:{type:Object,default:()=>{}},apiUrl:{type:String,default:"/api/dependency/country-codes"}},data(){return{country_codes:[],phone_code:this.countryCode,showList:!1,country:{},iso:this.countryIso,example:"99876 54321",lang_locale:"",contryData:null,changedValue:this.value}},watch:{value(e){this.changedValue=e}},beforeMount(){!this.countryCode&&!this.countryIso?Ye().then(e=>{this.iso=e,this.getCountryCodes()}).catch(e=>{console.warn(e),this.iso="in",this.phone_code=91,this.getCountryCodes()}):this.getCountryCodes(),this.changedValue=this.value},created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{countryDetails(e){this.country_codes=e,this.countryIso?this.country=le(e,"iso",this.iso):this.countryCode?this.country=le(e,"phonecode",this.phone_code):this.country=le(e,"iso",this.iso.toUpperCase()),this.selectCountry(this.country,!1)},isNumber(e){e=e||window.event;var a=e.which?e.which:e.keyCode;if(a>31&&(a<48||a>57))e.preventDefault();else return!0},toggleList(){this.showList=!this.showList},getMaxLength(e){return(""+e).replace(/\s/g,"").length},getClassByISO(e){if(e)return"iti-flag "+e.toLowerCase()},selectCountry(e,a=!0){this.iso=e.iso,this.phone_code=e.phonecode,this.example=e.example,this.$emit("countCode",this.phone_code),this.$emit("countIso",this.iso),a&&(this.changedValue="")},getCountryCodes(){U.get(this.apiUrl,{params:{meta:!0,limit:"all"}}).then(e=>{this.contryData=He(e.data.data),this.countryDetails(this.contryData)}).catch(e=>{R(e,"contryCode")})}}},ss=e=>(ee("data-v-d263105a"),e=e(),te(),e),os={class:"intl-tel-input allow-dropdown separate-dial-code iti-sdc-3",style:{width:"100%"}},rs=["placeholder","maxlength"],ds={class:"selected-flag",tabindex:"0"},us=["onClick"],cs=ss(()=>o("li",{class:"divider"},null,-1)),ms=["onClick"];function fs(e,a,t,l,i,n){const r=f("form-field-template");return s(),y(r,{classname:t.classname,label:e.lang(t.labelName),name:t.name},{default:I(()=>[o("div",os,[T(o("input",{class:F(["form-control",{mob_align:t.language==="ar"}]),type:"text",placeholder:i.example,"onUpdate:modelValue":a[0]||(a[0]=u=>i.changedValue=u),onInput:a[1]||(a[1]=u=>t.onChange(i.changedValue,t.name)),onKeypress:a[2]||(a[2]=(...u)=>n.isNumber&&n.isNumber(...u)),maxlength:n.getMaxLength(i.example),style:M(t.inputStyle),id:"id"},null,46,rs),[[re,i.changedValue]]),o("div",{onClick:a[3]||(a[3]=(...u)=>n.toggleList&&n.toggleList(...u)),class:F([{tel:i.lang_locale=="ar"},"flag-container"]),style:{width:"5pc"}},[o("div",ds,[o("div",{id:"flag",class:F(n.getClassByISO(i.iso))},null,2),o("div",{class:F([{code:i.lang_locale=="ar"},"selected-dial-code"])},p(i.phone_code),3),o("div",{class:F([{arrow:i.lang_locale=="ar"},"iti-arrow"])},null,2)]),i.showList?(s(),d("ul",{key:0,class:F([{coun_list:i.lang_locale=="ar"},"country-list"])},[(s(!0),d(L,null,N(i.country_codes.slice(224,226),u=>(s(),d("li",{class:"country preferred",onClick:c=>n.selectCountry(u)},[o("div",{class:F([{flag:i.lang_locale=="ar"},"flag-box"])},[o("div",{class:F(n.getClassByISO(u.iso))},null,2)],2),o("span",{class:F([{coun_name:i.lang_locale=="ar"},"country-name"])},p(u.name),3),o("span",{class:F([{country:i.lang_locale=="ar"},"dial-code"])},"+"+p(u.phonecode),3)],8,us))),256)),cs,(s(!0),d(L,null,N(i.country_codes,u=>(s(),d("li",{class:"country preferred",onClick:c=>n.selectCountry(u)},[o("div",{class:F([{flag:i.lang_locale=="ar"},"flag-box"])},[o("div",{class:F(n.getClassByISO(u.iso))},null,2)],2),o("span",{class:F([{coun_name:i.lang_locale=="ar"},"country-name"])},p(u.name),3),o("span",{class:F([{country:i.lang_locale=="ar"},"dial-code"])},"+"+p(u.phonecode),3)],8,ms))),256))],2)):m("",!0)],2)])]),_:1},8,["classname","label","name"])}const lt=V(ls,[["render",fs],["__scopeId","data-v-d263105a"]]),hs={this_field_is_required:"this field is required",max_length_exceeded:"maximum length exceeded",not_enough_length:"too short",invalid_email:"invalid email",not_alpha:"input should only consist of alphabets",not_alphanumeric:"input should only consist of alphabets and numbers",invalid_number:"input should only consist of numbers",more_than_max_value:"Maximum value exceeded",less_than_min_value:"too small",password_is_same:"new password is same as old. Please choose a different password",password_does_not_match:"Password does not match",invalid_date:"not a valid date",invalid_mobile:"invalid mobile number",invalid_string:"passed string does not match the valid pattern",invalid_url:"not a valid url",invalid_username:"invalid username"};function st(e){e===void 0&&(e=function(v){return hs[v]}),this.validate=function(v){const _={};return Object.keys(v).forEach(function(D){const j=v[D][0]+"";v[D].shift(),v[D].every(me=>{if(typeof me=="object"){const fe=Object.keys(me)[0],ct=Object.values(me)[0];if(l(j,fe)!==void 0)return _[D]=ct,!1}else{const fe=l(j,me);if(fe!==void 0)return _[D]=fe,!1}return!0})}),{errors:_,isValid:pt(_)}};function a(v){let _=encodeURIComponent(v);return _=_.replace(new RegExp("'","g"),"%27"),_}function t(v){let _=v.replace(new RegExp("%27","g"),"'");return _=decodeURIComponent(_),_}function l(v,_){const D=a(v);if(_.indexOf("(")>-1){let j=_.replace(")",",'"+D+"')").match(/\(([^)]+)\)/)[1].split(",")[0];switch(_.split("(")[0]){case"max":return n(j,D);case"min":return r(j,D);case"isAlpha":return c(j,D);case"isAlphaNumeric":return g(j,D);case"maxValue":return w(j,D);case"minValue":return h(j,D);case"passwordMatch":return C(j,D);case"shouldNotMatch":return k(j,D);case"isMobile":return z(j,D);case"isValidWithRegex":return ce(j,D)}}switch(_){case"isRequired":return i(D);case"isEmail":return u(D);case"isNumber":return A(D);case"isDate":return b(D);case"isUrl":return Se(D);case"isValidUserName":return ke(D)}}function i(v){if(v=t(v),B.isEmpty(v))return e("this_field_is_required")}function n(v,_){if(_=t(_),!B.isLength(_,0,v))return e("max_length_exceeded",v)}function r(v,_){if(_=t(_),!B.isLength(_,v,100))return e("not_enough_length",v)}function u(v){if(v=t(v),!B.isEmail(v))return e("invalid_email")}function c(v=!1,_){if(_=t(_),!B.isEmpty(_)){let D=_.slice(0);if(v!==!0&&(D=D.replace(/ /g,"")),!B.isAlpha(D))return e("not_alpha")}}function g(v=!1,_){if(_=t(_),!B.isEmpty(_)){let D=_.slice(0);if(v!==!0&&(D=D.replace(/ /g,"")),!B.isAlphanumeric(D))return e("not_alphanumeric")}}function A(v){if(v=t(v),!B.isEmpty(v)&&!B.isInt(v))return e("invalid_number")}function w(v,_){_=t(_);const D=`${_}`;if(!B.isEmpty(D)&&parseInt(_)>parseInt(v))return e("more_than_max_value")}function h(v,_){_=t(_);const D=`${_}`;if(!B.isEmpty(D)&&parseInt(_)<parseInt(v))return e("not_enough_length")}function C(v,_){if(!B.equals(v,_))return e("password_does_not_match")}function k(v,_){if(B.equals(v,_))return e("password_is_same")}function b(v){if(v=t(v),!B.isISO8601(v)&&!B.isRFC3339(v))return e("invalid_date")}function z(v,_){if(_=t(_),v!=="true")return e("invalid_mobile")}function ce(v,_){if(v=new RegExp(v),_=t(_),_.search(v)===-1)return e("invalid_string")}function Se(v){v=t(v);var _="^(https?://)?(www\\.)?([-a-z0-9]{1,63}\\.)*?[a-z0-9][-a-z0-9]{0,61}[a-z0-9]\\.[a-z]{2,6}(/[-\\w@\\+\\.~#\\?&/=%]*)?$",D=new RegExp(_,"i");if(!D.test(v)&&!B.isEmpty(v))return e("invalid_url")}function ke(v){var _=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){1,49}$/i;if(!B.isEmpty(v)&&!v.match(_))return e("invalid_username")}}function ys(e){const{name:a,email:t,description:l,primary_contact:i,address:n}=e;var r={name:[a,"isRequired"],email:[t,"isRequired","isEmail"],description:[l,"isRequired"],primary_contact:[i,"isRequired"],address:[n,"isRequired"]};const u=new st(J),{errors:c,isValid:g}=u.validate(r);return Z.dispatch("setValidationError",c),{errors:c,isValid:g}}const gs={name:"time-field",description:"time field component along with error block",props:{label:{type:String,required:!0},hint:{type:String,default:""},value:{required:!0},name:{type:String,required:!0},type:{type:String,default:"text"},onChange:{type:Function,Required:!0},keyupListener:{type:Function,default:()=>{}},classname:{type:String,default:""},required:{type:Boolean,default:!1},labelStyle:{type:Object},formStyle:{type:Object},max:{type:[String,Number],default:""},placeholder:{type:String,default:"Enter a value"},from:{type:String,default:""},rules:{type:String,default:""},pattern:{type:String,default:null},validationMessage:{type:String,default:""},showMinutes:{type:Boolean,default:!1}},data(){return{changedValue:this.value}},created(){window.emitter.on("removeVal",this.initialState)},mounted(){this.changedValue=this.value},watch:{value(e){this.changedValue=e}},methods:{checkValue(e){e=e||window.event;var a=e.which?e.which:e.keyCode;if(a>31&&(a<48||a>57))e.preventDefault();else return!0},onPaste(e){e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault()},initialState(){this.changedValue=0}},components:{"form-field-template":H}},ps={class:"inline"},_s=["type","placeholder"],bs={key:0,class:"error-block is-danger"},vs={key:1,class:"input-group"},Fs=["type","placeholder"],Ss={key:0,class:"input-group-text customText"};function ks(e,a,t,l,i,n){const r=f("ValidationProvider"),u=f("form-field-template");return s(),y(u,{label:t.label,labelStyle:t.labelStyle,name:t.name,classname:t.classname,hint:t.hint,required:t.required},{default:I(()=>[o("span",ps,[t.from?(s(),y(r,{key:0,name:t.name,rules:t.rules,modelValue:i.changedValue,"onUpdate:modelValue":a[5]||(a[5]=c=>i.changedValue=c)},{default:I(({field:c,errorMessage:g,meta:A,classes:w})=>[T(o("input",{class:"form-control",style:M(t.formStyle),type:t.type,id:"number","onUpdate:modelValue":a[0]||(a[0]=h=>i.changedValue=h),onInput:a[1]||(a[1]=h=>t.onChange(i.changedValue,t.name)),onKeypress:a[2]||(a[2]=(...h)=>n.checkValue&&n.checkValue(...h)),onPaste:a[3]||(a[3]=(...h)=>n.onPaste&&n.onPaste(...h)),min:"0",placeholder:t.placeholder,onKeyup:a[4]||(a[4]=h=>t.keyupListener(h,t.name))},null,44,_s),[[ne,i.changedValue]]),g?(s(),d("span",bs,p(g)+" "+p(t.validationMessage?"("+t.validationMessage+")":""),1)):m("",!0)]),_:1},8,["name","rules","modelValue"])):(s(),d("span",vs,[T(o("input",{class:"form-control",style:M(t.formStyle),type:t.type,id:"number","onUpdate:modelValue":a[6]||(a[6]=c=>i.changedValue=c),onInput:a[7]||(a[7]=c=>t.onChange(i.changedValue,t.name)),onKeypress:a[8]||(a[8]=(...c)=>n.checkValue&&n.checkValue(...c)),onPaste:a[9]||(a[9]=(...c)=>n.onPaste&&n.onPaste(...c)),onKeyup:a[10]||(a[10]=c=>t.keyupListener(c,t.name)),min:"0",placeholder:t.placeholder},null,44,Fs),[[ne,i.changedValue]]),t.showMinutes?(s(),d("span",Ss," Minutes ")):m("",!0)]))])]),_:1},8,["label","labelStyle","name","classname","hint","required"])}const Cs=V(gs,[["render",ks],["__scopeId","data-v-f34110c0"]]);const ws={name:"checkbox",description:"Checkbox with default css class and other required props to be used throughout the project",props:{required:{type:[Boolean,Number],default:!1},options:{type:Array,default:()=>{}},value:{type:[Number,String],default:0},name:{type:String,default:"radio"},label:{type:String,default:"label"},classname:{type:String,default:"col-sm-4"},spanClass:{type:String,default:""},optionClass:{type:String,default:"col-sm-4"},keyupListener:{type:Function,default:()=>{}},onChange:{type:Function,Required:!0},labelStyle:{type:Object,default:()=>{}},hint:{type:String,default:""},disabled:{type:Boolean,default:!1}},data(){return{checked:this.value}},watch:{value(e,a){this.checked=e},checked(e){this.onChange(e,this.name)}},components:{"tool-tip":xe}},Is={style:{display:"inline"}},As=["name","value","disabled"];function Vs(e,a,t,l,i,n){const r=f("tool-tip");return s(),d("div",{class:F(t.classname)},[o("label",{for:"HOurs",style:M(t.labelStyle)},p(t.label),5),t.required?(s(),d("label",{key:0,class:"is-danger",style:M(t.labelStyle)},"*",4)):m("",!0),t.hint?(s(),y(r,{key:1,message:e.lang(t.hint),size:"small"},null,8,["message"])):m("",!0),o("div",null,[o("span",Is,[(s(!0),d(L,null,N(t.options,(u,c)=>(s(),d("span",{class:F(t.spanClass)},[T(o("input",{class:"radio_align mt-3",name:t.name,"onUpdate:modelValue":a[0]||(a[0]=g=>i.checked=g),type:"radio",value:u.value,disabled:!!(t.disabled||u.disabled)},null,8,As),[[Re,i.checked]]),x(" "+p(e.lang(u.name))+"  ",1),u.hint?(s(),y(r,{key:0,message:e.lang(u.hint),size:"small"},null,8,["message"])):m("",!0),x("  ")],2))),256))])])],2)}const qs=V(ws,[["render",Vs]]),Ds={props:{from:{type:String,default:""},product_id:{type:[String,Number],default:""},onComplete:{type:Function},alertName:{type:String,default:"vendor"},tinyMceWidth:{type:String,default:"103%"}},data(){return{title:"create_vendors",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,vendor_id:"",vendor_name:"",description:"",email:"",primary_contact:"",address:"",status:1,radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],phone_country_code:null,phone_iso:"",ext:"",country_code:null,mobile:"",iso:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const a=be(e);e.indexOf("edit")>=0?this.from?(this.loading=!1,this.hasDataPopulated=!0):(this.title="edit-vendor",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(a)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,U.get("/service-desk/api/vendor/"+e).then(a=>{this.loading=!1,this.hasDataPopulated=!0,this.updateStatesWithData(a.data.data.vendor),this.vendor_id=a.data.data.vendor.id,this.status=a.data.data.vendor.status.id,this.vendor_name=a.data.data.vendor.name,this.phone_country_code=a.data.data.vendor.phone_country_code?a.data.data.vendor.phone_country_code:null,this.phone_iso=a.data.data.vendor.phone_iso?a.data.data.vendor.phone_iso:null,this.ext=a.data.data.vendor.ext?a.data.data.vendor.ext:"",this.mobile=a.data.data.vendor.mobile&&a.data.data.vendor.mobile!=="Not available"?a.data.data.vendor.mobile:"",this.country_code=a.data.data.vendor.country_code?a.data.data.vendor.country_code:null,this.iso=a.data.data.vendor.iso?a.data.data.vendor.iso:null}).catch(a=>{this.loading=!1,R(a,"vendor"),this.hasDataPopulated=!0})},updateStatesWithData(e){const a=this,t=this.$data;Object.keys(e).map(l=>{t.hasOwnProperty(l)&&(a[l]=e[l])})},isValid(){const{errors:e,isValid:a}=ys(this.$data);return!!a},onChange(e,a){this[a]=e},onSubmit(){if(this.isValid()){this.loading=!0;var e=new FormData;this.vendor_id!=""&&e.append("id",this.vendor_id),this.from&&e.append("product_id",this.product_id),e.append("name",this.vendor_name),e.append("description",this.description),e.append("email",this.email),e.append("address",this.address),e.append("primary_contact",this.primary_contact),e.append("status_id",this.status),e.append("phone_country_code",this.phone_country_code),e.append("phone_iso",this.phone_iso),e.append("ext",this.ext),e.append("mobile",this.mobile),e.append("country_code",this.country_code),e.append("iso",this.iso);const a={headers:{"Content-Type":"multipart/form-data"}};U.post("/service-desk/api/vendor",e,a).then(t=>{this.loading=!1,ge(t,this.alertName),this.from?this.onComplete(this.vendor_name,"vendors"):this.vendor_id?this.getInitialValues(this.vendor_id):setTimeout(()=>{let l=t.data.data.id;this.$router.push("/service-desk/vendor/"+l+"/show")},3e3)}).catch(t=>{var l,i,n;this.loading=!1,((l=t==null?void 0:t.response)==null?void 0:l.status)===412&&(n=(i=t.response)==null?void 0:i.data)!=null&&n.message&&t.response.data.message.hasOwnProperty("name")&&(t.response.data.message.vendor_name=t.response.data.message.name,delete t.response.data.message.name),R(t,"vendor")})}},onPhoneFieldUpdate(e,a){this[a]=e}},components:{"text-field":oe,"number-field":Cs,"radio-button":qs,phoneWithCountryCode:lt}},xs={class:"col-sm-12"},Ts={key:0,class:"row"},Ls={key:0,class:"card-header"},Ps={class:"card-title"},Ms={class:"card-tools"},Es=o("span",{class:"fas fa-eye"},null,-1),Us={class:"row"},Rs={class:"row"},Bs={class:"row"},Ks={class:"row"},Ns={key:1,class:"card-footer"};function Os(e,a,t,l,i,n){const r=f("custom-loader"),u=f("alert"),c=f("router-link"),g=f("text-field"),A=f("phoneWithCountryCode"),w=f("radio-button"),h=f("tiny-editor"),C=Y("tooltip"),k=Y("focus-first-input");return s(),d("div",xs,[!i.hasDataPopulated||i.loading?(s(),d("div",Ts,[S(r,{duration:4e3})])):m("",!0),S(u,{componentName:"vendor"}),i.hasDataPopulated?(s(),d("div",{key:1,class:F([{"card card-light":!t.from}])},[t.from?m("",!0):(s(),d("div",Ls,[o("h3",Ps,p(e.lang(i.title)),1),o("div",Ms,[i.vendor_id?T((s(),y(c,{key:0,id:"view_vendor",class:"btn btn-tool m-unset",to:"/service-desk/vendor/"+i.vendor_id+"/show"},{default:I(()=>[Es]),_:1},8,["to"])),[[C,e.lang("view")]]):m("",!0)])])),o("div",{class:F([{"card-body":!t.from}])},[T((s(),d("div",Us,[S(g,{label:e.lang("name"),value:i.vendor_name,type:"text",name:"vendor_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),S(g,{label:e.lang("email"),value:i.email,type:"email",name:"email",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[k]]),o("div",Rs,[S(A,{id:"primary_contact",classname:"col-sm-4",name:"primary_contact",onChange:n.onChange,value:i.primary_contact,required:!0,countryCode:i.phone_country_code,countryIso:i.phone_iso,onCountCode:a[0]||(a[0]=b=>n.onPhoneFieldUpdate(b,"phone_country_code")),onCountIso:a[1]||(a[1]=b=>n.onPhoneFieldUpdate(b,"phone_iso")),label:e.lang("primary_contact"),apiUrl:"/api/dependency/country-codes?time="+Date.now()},null,8,["onChange","value","countryCode","countryIso","label","apiUrl"]),S(g,{id:"ext",label:e.lang("ext"),type:"number",name:"ext",class:"col-sm-1",value:i.ext,onChange:n.onChange},null,8,["label","value","onChange"]),S(A,{id:"mobile",label:e.lang("mobile"),classname:"col-sm-4",name:"mobile",onChange:n.onChange,value:i.mobile,countryCode:i.country_code,countryIso:i.iso,onCountCode:a[2]||(a[2]=b=>n.onPhoneFieldUpdate(b,"country_code")),onCountIso:a[3]||(a[3]=b=>n.onPhoneFieldUpdate(b,"iso"))},null,8,["label","onChange","value","countryCode","countryIso"]),S(g,{label:e.lang("address"),value:i.address,type:"textarea",name:"address",onChange:n.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])]),o("div",Bs,[S(w,{options:i.radioOptions,label:e.lang("status"),name:"status",value:i.status,onChange:n.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),o("div",Ks,[S(h,{value:i.description,type:"text",onChange:n.onChange,name:"description",label:e.lang("description"),classname:"col-sm-12",required:!0,lang:"en",width:t.tinyMceWidth,id:t.from==="modal"?"vendor_editor":"tiny_editor"},null,8,["value","onChange","label","width","id"])])],2),t.from?m("",!0):(s(),d("div",Ns,[o("button",{id:"submit_btn",class:"btn btn-primary",onClick:a[4]||(a[4]=b=>n.onSubmit())},[o("i",{class:F(i.iconClass)},null,2),x(" "+p(e.lang(i.btnName)),1)])]))],2)):m("",!0)])}const zs=V(Ds,[["render",Os]]);function js(e){const{contract_type_name:a}=e;var t={contract_type_name:[a,"isRequired"]};const l=new st(J),{errors:i,isValid:n}=l.validate(t);return Z.dispatch("setValidationError",i),{errors:i,isValid:n}}const Hs={props:{from:{type:String,default:""},onComplete:{type:Function},alertName:{type:String,default:"contractType"}},data(){return{title:"new_contracts",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,contract_type_id:"",contract_type_name:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const a=be(e);e.indexOf("edit")>=0?this.from?(this.loading=!1,this.hasDataPopulated=!0):(this.title="edit_contract_type",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(a)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,U.get("/service-desk/api/contract-type/"+e).then(a=>{this.loading=!1,this.hasDataPopulated=!0,this.contract_type_name=a.data.data.contract_type.name,this.contract_type_id=a.data.data.contract_type.id}).catch(a=>{this.loading=!1,this.hasDataPopulated=!0,R(a,"contractType")})},isValid(){const{errors:e,isValid:a}=js(this.$data);return!!a},onChange(e,a){this[a]=e},onSubmit(){if(this.isValid()){this.loading=!0;var e=new FormData;this.contract_type_id!=""&&e.append("id",this.contract_type_id),e.append("name",this.contract_type_name);const a={headers:{"Content-Type":"multipart/form-data"}};U.post("/service-desk/api/contract-type",e,a).then(t=>{this.loading=!1,ge(t,this.alertName),this.from?this.onComplete(this.contract_type_name,"contract_types"):this.contract_type_id?this.getInitialValues(this.contract_type_id):setTimeout(()=>{this.$router.push({name:"Contract Types Index"})},3e3)}).catch(t=>{var l,i,n;this.loading=!1,((l=t==null?void 0:t.response)==null?void 0:l.status)===412&&(n=(i=t.response)==null?void 0:i.data)!=null&&n.message&&t.response.data.message.hasOwnProperty("name")&&(t.response.data.message.contract_type_name=t.response.data.message.name,delete t.response.data.message.name),R(t,this.alertName)})}},triggerEvent(e){var a=e.which||e.keyCode;a===13&&this.onSubmit()}},components:{"text-field":oe}},Ys={class:"col-sm-12"},Ws={key:0,class:"row"},Js={key:0,class:"card-header"},Gs={class:"card-title"},Qs={class:"row"},Zs={key:1,class:"card-footer"};function Xs(e,a,t,l,i,n){const r=f("custom-loader"),u=f("alert"),c=f("text-field"),g=Y("focus-first-input");return s(),d("div",Ys,[!i.hasDataPopulated||i.loading?(s(),d("div",Ws,[S(r,{duration:4e3})])):m("",!0),S(u,{componentName:"contractType"}),i.hasDataPopulated?(s(),d("div",{key:1,class:F([{"card card-light":!t.from}])},[t.from?m("",!0):(s(),d("div",Js,[o("h3",Gs,p(e.lang(i.title)),1)])),o("div",{class:F([{"card-body":!t.from}])},[T((s(),d("div",Qs,[S(c,{label:e.lang("name"),value:i.contract_type_name,type:"text",name:"contract_type_name",onChange:n.onChange,placehold:e.lang("enter_a_value"),keyupListener:n.triggerEvent,classname:t.from?"col-sm-12":"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener","classname"])])),[[g]])],2),t.from?m("",!0):(s(),d("div",Zs,[o("button",{id:"submit_btn",class:"btn btn-primary",onClick:a[0]||(a[0]=A=>n.onSubmit())},[o("i",{class:F(i.iconClass)},null,2),x(" "+p(e.lang(i.btnName)),1)])]))],2)):m("",!0)])}const $s=V(Hs,[["render",Xs]]);const eo={props:{duration:{type:Number,default:4e3},size:{type:[Number,String],default:60},color:{type:String,default:"#1d78ff"}},components:{"fulfilling-bouncing-circle-spinner":Oe}};function to(e,a,t,l,i,n){const r=f("fulfilling-bouncing-circle-spinner");return s(),y(r,{"animation-duration":t.duration,size:t.size,color:t.color},null,8,["animation-duration","size","color"])}const ao=V(eo,[["render",to],["__scopeId","data-v-7033ec91"]]);const io={name:"add-new-modal",description:"Add new Vendor, ContractType Modal component",props:{showModal:{type:Boolean,default:!1},field:{type:Object,default:()=>{}},onClose:{type:Function},createdValue:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"900px"},loading:!1}},methods:{onSubmit(){this.field.apply_model_category==="vendor"?this.$refs.addVendor.onSubmit():this.field.apply_model_category==="contract_type"&&this.$refs.addContractType.onSubmit()},onCompleted(e,a){this.getNewValue(e,a),this.onClose()},getNewValue(e,a){let t=ye.convertStringOfPropertiesToObject(this.field.api_info).url;t&&U.get(t+"?search-query="+e).then(l=>{let i=le(l.data.data[a],"name",e);this.createdValue(i,this.field.key)})}},components:{VendorCreateEdit:zs,ContractTypeCreateEdit:$s,Modal:at,ReuseLoader:ao}},no={class:"modal-title"},lo={key:0},so={key:1,class:"row"},oo=["disabled"],ro=o("i",{class:"fa fa-check"},null,-1);function uo(e,a,t,l,i,n){const r=f("VendorCreateEdit"),u=f("ContractTypeCreateEdit"),c=f("ReuseLoader"),g=f("Modal");return t.showModal?(s(),y(g,{key:0,showModal:t.showModal,onClose:t.onClose,containerStyle:i.containerStyle,modalBodyClass:t.field.apply_model_category==="vendor"?"vendor_fields":""},{title:I(()=>[o("h4",no,p(e.lang("add"))+" "+p(e.lang(t.field.title)),1)]),fields:I(()=>[i.loading?m("",!0):(s(),d("div",lo,[t.field.apply_model_category==="vendor"?(s(),y(r,{key:0,from:"modal",ref:"addVendor",onComplete:n.onCompleted,alertName:"contract-create-edit"},null,8,["onComplete"])):m("",!0),t.field.apply_model_category==="contract_type"?(s(),y(u,{key:1,from:"modal",ref:"addContractType",onComplete:n.onCompleted,alertName:"contract-create-edit"},null,8,["onComplete"])):m("",!0)])),i.loading?(s(),d("div",so,[S(c,{"animation-duration":4e3,color:"#1d78ff",size:60})])):m("",!0)]),controls:I(()=>[o("button",{type:"button",id:"submit_btn",onClick:a[0]||(a[0]=A=>n.onSubmit()),class:"btn btn-primary",disabled:i.isDisabled},[ro,x(" "+p(e.lang("proceed")),1)],8,oo)]),_:1},8,["showModal","onClose","containerStyle","modalBodyClass"])):m("",!0)}const co=V(io,[["render",uo]]);const mo={name:"form-field-renderer",props:{formUniqueKey:{type:String,required:!0},formField:{type:Object,required:!0},panel:{type:String,default:"agent"},scenario:{type:String,require:!0},formType:{type:String,default:""},inputStyle:{type:Object,default:()=>{}},btnStyle:{type:Object,default:()=>{}},sizeModules:{type:String,default:""},isInlineForm:{type:Boolean,default:!0},formId:{type:String,default:""},apiKey:{type:String,default:""},selectDependencyId:{type:[String,Number],default:""},selectDependencyKey:{type:String,default:"id"},recur_mode:{type:String,default:""}},components:{phoneWithCountryCode:lt,MobileField:ns,TinyMCEWithValidation:$e,DynamicSelect:ve,TextField:oe,RadioField:nn,CheckboxField:un,FileUpload:Ln,DateTimePicker:tt,UserFormModal:gl,ClientRequester:bl,AssetImageUpload:Ml,CustomLoader:ue,CreateNewEntry:co},data(){return{childNodes:[],dropdownOptions:[],isMultipleRequester:!1,selectedValue:"",showCreateUserModal:!1,attachments:[],taggableApiDynamicSelectRules:"",showFileField:!1,showSelectField:!1,country_code:null,showMobileField:!1,extValue:"",entryFor:"",showModal:!1}},beforeMount(){this.formField.key==="approver_id"&&this.formField.value&&window.emitter.emit("disableSpecificFormField",{identifier:"status_id",disabled:!0,setValue:!1}),this.formField.data_type==="select"&&this.formField.value&&(this.scenario==="edit"||this.scenario==="fork"||this.scenario==="recur"&&this.recur_mode==="edit"||this.formField.title!=="Api")?this.getSelectFieldOptions():this.formField.data_type==="select"&&this.formField.title==="Api"?this.getSelectFieldOptions():this.showSelectField=!0,this.formField.data_type==="mobile"?(this.formField.value&&this.formField.value.includes(" ")&&(this.country_code=this.formField.value.split(" ")[0]),this.formField.enable_extension&&this.formField.union&&this.formField.union.length&&(this.extValue=this.formField.union[0].value?this.formField.union[0].value:"",this.onExtChange(this.extValue,this.formField.union[0].key)),this.showMobileField=!0):this.showMobileField=!0,this.formField.apply_form&&this.formField.value&&this.formField.value.id&&this.getAppliedForm(this.formField.value,this.formField.apply_model_category)},created(){window.emitter.on("updateSpecificFormField",e=>{e.name===this.formField.key&&this.onChange(e.value,e.name)})},mounted(){this.selectedValue=Sa(this.formField.value,this.formField.options,this.formField.default,this.formField.data_type,this.formField.key),setTimeout(()=>{this.showFileField=!0},2e3),this.bindValuesFromUrl(),this.renderNestedFormFieldsIfAny(this.selectedValue),this.updateFormValuesToStore()},computed:{...X({getFaveoFormData:"getFaveoFormData",isBatchTicketMode:"getBatchTicketMode"}),apiInfoUrl(){let e=ye.convertStringOfPropertiesToObject(this.formField.api_info).url;return!e&&this.formField.api_info?e=this.formField.api_info+"?mode=render":(e==="/api/dependency/departments?meta=true"||e==="/api/dependency/help-topics?meta=true")&&(e=e+"&panel="+this.panel),e},optionLabel(){return ye.convertStringOfPropertiesToObject(this.formField.api_info).key||"label"},isRequiredField(){return!!this.formField.required},validationRules(){let e=[];return this.isRequiredField&&e.push("required"),this.formField.data_type==="email"&&e.push("email"),e.join("|")},getActionButtonObj(){if(this.formField.key==="requester"){let e=this.panel==="client"?"Register":"Create User";return window.emitter.emit("cropModalChanged",""),{text:e,isFor:"requester",action:()=>this.showCreateUserModal=!0}}else return null},showMultiRequesterCheckbox(){return this.formField.key==="requester"&&this.isBatchTicketMode&&this.panel==="agent"}},methods:{onUserPopupClose(){this.showCreateUserModal=!1,window.emitter.emit("updateTicketCategory","ticket")},getField(e){this.entryFor=this.formField,this.showModal=!0},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},createdValue(e,a){this.onChange(e,a)},getPlaceholder(e){return this.formField.place_holder?this.formField.place_holder:this.lang(e)},getSimplePlaceholder(e){let a="short_text";return this.formField.place_holder?(a=this.formField.place_holder,a):(e==="email"?a="email@example.com":e==="textarea"?a="long_text":e==="mobile"&&(a="9876543210"),this.lang(a))},onCountryCodeUpdate(e,a){this[a]=e},onExtChange(e="",a){this.extValue=e;const t={id:a,isDefault:0,formUniqueKey:this.formUniqueKey,selectedValue:this.extValue||"",optionLabel:this.optionLabel};this.$store.dispatch("setFormData",t)},getAppliedForm(e,a){let t=this.$route.params&&this.$route.params.id?this.$route.params.id:"";U.get("/fetch/default-custom-fields/"+e.id+"/"+a,{params:{id:t,category:this.formType,mode:"render",scenario:this.scenario}}).then(l=>{window.emitter.emit("modelFormFieldFetched",{nodes:l.data.data.nodes,identifier:this.formField.form_identifier})}).catch(l=>{console.error(l)})},apiParams(){return this.getFaveoFormData[this.formUniqueKey]?(this.getFaveoFormData[this.formUniqueKey].formDataMap.set("category",this.formType),this.apiKey&&this.getFaveoFormData[this.formUniqueKey].formDataMap.set("api_key",this.apiKey),this.selectDependencyId&&this.getFaveoFormData[this.formUniqueKey].formDataMap.set("id",this.selectDependencyId),this.getFaveoFormData[this.formUniqueKey].formDataMap):this.apiKey?{api_key:this.apiKey}:{}},keypressEvent(e,a,t){if(t==="number"||t==="mobile"){e=e||window.event;var l=e.which?e.which:e.keyCode;if(l>31&&(l<48||l>57))e.preventDefault();else return!0}else if(t==="float"||t==="decimal"){e=e||window.event;var l=e.which?e.which:e.keyCode,i=e.target.value;if(l==46&&i.indexOf(".")!==-1||l==46&&i.length===0)e.preventDefault();else{if(l>=48&&l<=57||l==46)return!0;e.preventDefault()}}},pasteEvent(e,a,t){if(t==="number"||t==="mobile")e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault();else if(t==="float"||t==="decimal"){e=e||window.event;var l=e.clipboardData||window.clipboardData,i=l.getData("Text");/^[-]?\d*\.?\d*$/.test(i)||e.preventDefault()}},getAttachments(e){this.attachments=e,this.$store.dispatch("setEditorAttachments",this.attachments)},isMail(e,a,t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,20}$/.test(e.email?e.email:e.name)},onChange(e,a){if(a==="approver_id"&&window.emitter.emit("disableSpecificFormField",{identifier:"status_id",disabled:!!e,setValue:!!e}),this.formField.data_type==="decimal"&&typeof e=="string"&&e.endsWith(".")&&(e+="0"),this.formField.apply_form&&e&&e.id&&this.getAppliedForm(e,this.formField.apply_model_category),a==="requester"&&(this.selectedValue=e.user_name),(a==="help_topic_id"||a==="department_id"||a==="team_id")&&window.emitter.emit("updateDynamicSelect"),this.formType==="requester"&&(a==="organisation"||a==="organisation_department")&&window.emitter.emit("updateDynamicSelect"),a==="adhoc_approvers_agent"&&(e.length?this.taggableApiDynamicSelectRules=e.every(this.isMail)?"":"email":this.taggableApiDynamicSelectRules=""),this.selectedValue=e||"",this.updateFormValuesToStore(),this.renderNestedFormFieldsIfAny(e),this.formField.value&&this.formField.value!==this.selectedValue&&this.formField.options&&this.formField.options.length){let t=this.formField.options.find(l=>l.label===this.formField.value);t&&this.removeField(t.nodes)}},removeField(e){for(let a=0;a<e.length;a++)e[a].key?this.$store.dispatch("deleteFormDataByKey",{formUniqueKey:this.formUniqueKey,key:e[a].key}):e[a].form_fields&&typeof e[a].form_fields=="object"?Object.keys(e[a].form_fields).forEach(t=>{this.removeField(e[a].form_fields[t])}):P(e[a].options)&&e[a].options.forEach(t=>{this.removeField(t.nodes?t.nodes:[])})},updateFormValuesToStore(){const e={id:this.formField.key,isDefault:!!this.formField.default,formUniqueKey:this.formUniqueKey,selectedValue:this.selectedValue||"",optionLabel:this.optionLabel};this.formField.data_type==="mobile"&&(e.appendValue=this.country_code),this.$store.dispatch("setFormData",e)},renderNestedFormFieldsIfAny(e){this.childNodes=[],e&&(Array.isArray(e)?e.forEach(a=>{P(a.nodes)&&this.childNodes.push(...a.nodes)}):P(e.nodes)&&(this.childNodes=e.nodes))},getSelectFieldOptions(){P(this.apiInfoUrl)?this.formField.title==="Api"?U.get(this.apiInfoUrl).then(e=>{this.dropdownOptions=e.data}).catch(e=>{console.error(e)}):this.fetchOptionListForApiField():this.dropdownOptions=this.formField.options},fetchOptionListForApiField(){U.get(this.apiInfoUrl,{params:{id:this.selectDependencyId,category:this.formType,scenario:this.scenario,choose_from:this.formField.value}}).then(e=>{this.formField.options.push(e.data.data.data[0]),this.renderNestedFormFieldsIfAny(e.data.data.data[0]),this.showSelectField=!0}).catch(e=>{console.error(e)})},clearSelectedValue(){this.selectedValue=""},customTypeFormFieldMounted(){const e={node:this.formField,showFilter:this.panel==="agent"||this.panel==="admin",formUniqueKey:this.formUniqueKey,scenario:this.scenario,category:this.formType,isInlineForm:this.isInlineForm,showDivClass:!1};window.emitter.emit("custom-type-form-field-mounted",e)},bindValuesFromUrl(){let e=new URLSearchParams(window.location.search);if(!this.formField.key)return;let a=this.formField.key.replace("_id","");e.get(a)&&!this.selectedValue&&(this.formField.title==="Api"&&U.get(this.apiInfoUrl,{params:{"strict-search":1,"search-query":e.get(a),paginate:1}}).then(t=>{t.data.data.data[0]&&(this.selectedValue=t.data.data.data[0])}),this.formField.data_type==="client-panel-requester"&&(this.selectedValue=e.get(a)))}},beforeDestroy(){this.$store.dispatch("deleteFormDataByKey",{formUniqueKey:this.formUniqueKey,key:this.formField.key})}},fo={class:"pl-3 pr-3 pt-2"},ho={key:6,class:"form-check checkbox multi-requester-checkbox text-end mr-1"},yo={class:"control-label"},go={key:16,id:"faveo-app-extra-form-field"};function po(e,a,t,l,i,n){const r=f("TinyMCEWithValidation"),u=f("DateTimePicker"),c=f("DynamicSelect"),g=f("FileUpload"),A=f("TextField"),w=f("ClientRequester"),h=f("RadioField"),C=f("CheckboxField"),k=f("MobileField"),b=f("CustomLoader"),z=f("AssetImageUpload"),ce=f("UserFormModal"),Se=f("CreateNewEntry"),ke=f("FormFieldRenderer",!0),v=f("FormSectionRenderer");return s(),d(L,null,[o("div",fo,[t.formField.data_type==="htmltextarea"?(s(),y(r,{key:0,id:t.formField.key,name:t.formField.key,label:t.formField.label,value:i.selectedValue||"",hint:t.formField.description,isInlineForm:t.isInlineForm,onChange:n.onChange,rules:n.validationRules,required:n.isRequiredField,mediaOption:t.formField.media_option,attachments:i.attachments,getAttach:n.getAttachments,panel:t.panel,"tip-rule":t.formField.show_description,place_holder:n.getPlaceholder("long_text"),labelLength:25},null,8,["id","name","label","value","hint","isInlineForm","onChange","rules","required","mediaOption","attachments","getAttach","panel","tip-rule","place_holder"])):m("",!0),t.formField.data_type==="date"?(s(),y(u,{key:1,type:t.formField.request_time_information?"datetime":"date",label:t.formField.label,value:i.selectedValue,id:t.formField.key,name:t.formField.key,onChange:n.onChange,required:n.isRequiredField,format:t.formField.request_time_information?"MMMM DD YYYY HH:mm:ss":"MMMM DD YYYY",clearable:!0,hint:t.formField.description,isInlineForm:t.isInlineForm,rules:n.validationRules,outputFormat:"YYYY-MM-DD HH:mm:ss",from:"form","tip-rule":t.formField.show_description,place:n.getPlaceholder("select_date"),labelLength:25},null,8,["type","label","value","id","name","onChange","required","format","hint","isInlineForm","rules","tip-rule","place"])):m("",!0),(t.formField.data_type==="api"||t.formField.data_type==="multiselect")&&!i.isMultipleRequester?(s(),y(c,{key:2,id:t.formField.key,label:t.formField.label,multiple:t.formField.data_type==="multiselect",name:t.formField.key,apiEndpoint:n.apiInfoUrl,value:i.selectedValue,onChange:n.onChange,optionLabel:"name",required:n.isRequiredField,actionBtn:n.getActionButtonObj,apiParameters:n.apiParams(),isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,strlength:75,"tip-rule":t.formField.show_description,formIsFor:t.formType,fieldUniqueName:t.formField.key,"show-new-button":t.formField.create_button,onButtonClick:n.getField,labelLength:25,disabled:t.formField.disabled||!1},null,8,["id","label","multiple","name","apiEndpoint","value","onChange","required","actionBtn","apiParameters","isInlineForm","rules","hint","tip-rule","formIsFor","fieldUniqueName","show-new-button","onButtonClick","disabled"])):m("",!0),t.formField.data_type==="select"&&t.formField.title!=="Api"&&i.showSelectField?(s(),y(c,{key:3,id:t.formField.key,label:t.formField.label,multiple:!1,name:t.formField.key,apiEndpoint:n.apiInfoUrl,value:i.selectedValue,onChange:n.onChange,optionLabel:"label",required:n.isRequiredField,actionBtn:n.getActionButtonObj,apiParameters:n.apiParams(),isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,strlength:75,"tip-rule":t.formField.show_description,formIsFor:t.formType,fieldUniqueName:t.formField.key,labelLength:25,disabled:t.formField.disabled||!1},null,8,["id","label","name","apiEndpoint","value","onChange","required","actionBtn","apiParameters","isInlineForm","rules","hint","tip-rule","formIsFor","fieldUniqueName","disabled"])):m("",!0),t.formField.data_type==="select"&&t.formField.title==="Api"?(s(),y(c,{key:4,id:t.formField.key,label:t.formField.label,multiple:!1,name:t.formField.key,elements:i.dropdownOptions,value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,optionLabel:n.optionLabel,isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,strlength:75,"tip-rule":t.formField.show_description,fieldUniqueName:t.formField.key,labelLength:25},null,8,["id","label","name","elements","value","onChange","required","optionLabel","isInlineForm","rules","hint","tip-rule","fieldUniqueName"])):m("",!0),t.formField.key==="requester"&&i.isMultipleRequester&&t.panel!=="client"?(s(),y(g,{key:5,label:t.formField.label,value:i.selectedValue,id:t.formField.key,name:t.formField.key,onChange:n.onChange,required:n.isRequiredField,accept:".csv,.xlxs",isInlineForm:t.isInlineForm,rules:"required","tip-rule":t.formField.show_description,labelLength:25},null,8,["label","value","id","name","onChange","required","isInlineForm","tip-rule"])):m("",!0),n.showMultiRequesterCheckbox?(s(),d("div",ho,[T(o("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":a[0]||(a[0]=_=>i.isMultipleRequester=_),name:"isMultipleRequester",onChange:a[1]||(a[1]=_=>n.clearSelectedValue())},null,544),[[Be,i.isMultipleRequester]]),o("label",yo,p(e.trans("upload_multi_requester")),1)])):m("",!0),t.formField.data_type==="taggable"?(s(),y(c,{key:7,id:t.formField.key,label:t.formField.label,multiple:!0,taggable:!0,name:t.formField.key,elements:[],value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,optionLabel:n.optionLabel,isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,strlength:75,"tip-rule":t.formField.show_description,labelLength:25},null,8,["id","label","name","value","onChange","required","optionLabel","isInlineForm","rules","hint","tip-rule"])):m("",!0),t.formField.data_type==="taggable-api"?(s(),y(c,{key:8,id:t.formField.key,label:t.formField.label,multiple:!0,taggable:!0,name:t.formField.key,value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,optionLabel:n.optionLabel,isInlineForm:t.isInlineForm,rules:i.taggableApiDynamicSelectRules,hint:t.formField.description,strlength:75,"tip-rule":t.formField.show_description,apiEndpoint:n.apiInfoUrl,labelLength:25},null,8,["id","label","name","value","onChange","required","optionLabel","isInlineForm","rules","hint","tip-rule","apiEndpoint"])):m("",!0),t.formField.data_type==="text"||t.formField.data_type==="textarea"||t.formField.data_type==="number"||t.formField.data_type==="decimal"||t.formField.data_type==="email"||t.formField.data_type==="float"?(s(),y(A,{key:9,id:t.formField.key,label:t.formField.label,type:t.formField.data_type,name:t.formField.key,value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,isInlineForm:t.isInlineForm,rules:n.validationRules,pattern:t.formField.pattern,hint:t.formField.description,"validation-message":t.formField.validation_message,placehold:n.getSimplePlaceholder(t.formField.data_type),"tip-rule":t.formField.show_description,autofocus:t.formField.auto_focus,disabled:t.formField.disabled,keypressEvt:n.keypressEvent,pasteEvt:n.pasteEvent,inputStyle:t.inputStyle,labelLength:25},null,8,["id","label","type","name","value","onChange","required","isInlineForm","rules","pattern","hint","validation-message","placehold","tip-rule","autofocus","disabled","keypressEvt","pasteEvt","inputStyle"])):m("",!0),t.formField.data_type==="client-panel-requester"?(s(),y(w,{key:10,id:t.formField.key,label:t.formField.label,name:t.formField.key,value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,isInlineForm:t.isInlineForm,hint:t.formField.description,rules:n.validationRules,actionBtn:n.getActionButtonObj,autofocus:t.formField.auto_focus,"tip-rule":t.formField.show_description,inputStyle:t.inputStyle,labelLength:25},null,8,["id","label","name","value","onChange","required","isInlineForm","hint","rules","actionBtn","autofocus","tip-rule","inputStyle"])):m("",!0),t.formField.data_type==="radio"?(s(),y(h,{key:11,name:t.formField.key,label:t.formField.label,hint:t.formField.description,required:n.isRequiredField,options:t.formField.options,value:i.selectedValue,onChange:n.onChange,isInlineForm:t.isInlineForm,rules:n.validationRules,"tip-rule":t.formField.show_description,labelLength:25},null,8,["name","label","hint","required","options","value","onChange","isInlineForm","rules","tip-rule"])):m("",!0),t.formField.data_type==="checkbox"?(s(),y(C,{key:12,name:t.formField.key,label:t.formField.label,hint:t.formField.description,required:n.isRequiredField,options:t.formField.options,value:i.selectedValue,onChange:n.onChange,isInlineForm:t.isInlineForm,rules:n.validationRules,"tip-rule":t.formField.show_description,labelLength:25},null,8,["name","label","hint","required","options","value","onChange","isInlineForm","rules","tip-rule"])):m("",!0),i.showMobileField&&t.formField.data_type==="mobile"?(s(),y(k,{key:13,id:t.formField.key,label:t.formField.label,type:t.formField.data_type,name:t.formField.key,value:i.selectedValue,onChange:n.onChange,required:n.isRequiredField,isInlineForm:t.isInlineForm,rules:n.validationRules,pattern:t.formField.pattern,hint:t.formField.description,"validation-message":t.formField.validation_message,"tip-rule":t.formField.show_description,autofocus:t.formField.auto_focus,disabled:t.formField.disabled,keypressEvt:n.keypressEvent,pasteEvt:n.pasteEvent,inputStyle:t.inputStyle,placehold:n.getSimplePlaceholder(t.formField.data_type),countryCode:i.country_code,onCountryCode:a[2]||(a[2]=_=>n.onCountryCodeUpdate(_,"country_code")),extensionEnabled:t.formField.enable_extension,ext:t.formField.enable_extension?t.formField.union:[],extValue:i.extValue,onExtChange:n.onExtChange,labelLength:25,apiKey:t.apiKey},null,8,["id","label","type","name","value","onChange","required","isInlineForm","rules","pattern","hint","validation-message","tip-rule","autofocus","disabled","keypressEvt","pasteEvt","inputStyle","placehold","countryCode","extensionEnabled","ext","extValue","onExtChange","apiKey"])):m("",!0),t.formField.data_type==="file"?(s(),d(L,{key:14},[i.showFileField?(s(),y(g,_t({key:0,label:t.formField.label,value:i.selectedValue,name:t.formField.key,onChange:n.onChange,required:n.isRequiredField,id:t.formField.key,accept:"",isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,multiple:t.formField.key!=="organisation_logo","tip-rule":t.formField.show_description,labelLength:25},t.formField.key!=="organisation_logo"?{sizeModules:t.sizeModules}:{},{formType:t.formType}),null,16,["label","value","name","onChange","required","id","isInlineForm","rules","hint","multiple","tip-rule","formType"])):m("",!0),i.showFileField?m("",!0):(s(),y(b,{key:1}))],64)):m("",!0),t.formField.data_type==="image"?(s(),d(L,{key:15},[i.showFileField?(s(),y(z,{key:0,label:t.formField.label,value:i.selectedValue,name:t.formField.key,onChange:n.onChange,required:n.isRequiredField,id:t.formField.key,accept:"image/*",isInlineForm:t.isInlineForm,rules:n.validationRules,hint:t.formField.description,"tip-rule":t.formField.show_description,labelLength:25},null,8,["label","value","name","onChange","required","id","isInlineForm","rules","hint","tip-rule"])):m("",!0),i.showFileField?m("",!0):(s(),y(b,{key:1}))],64)):m("",!0),t.formField.data_type==="custom"?(s(),d("div",go,p(n.customTypeFormFieldMounted()),1)):m("",!0),S(Ie,{name:"modal"},{default:I(()=>[i.showCreateUserModal?(s(),y(ce,{key:0,show:i.showCreateUserModal,isInlineForm:t.isInlineForm,closeModal:n.onUserPopupClose,updateNewRequester:n.onChange,labelLength:25,panel:t.panel,inputStyle:t.inputStyle,btnStyle:t.btnStyle,formId:t.formId,apiKey:t.apiKey},null,8,["show","isInlineForm","closeModal","updateNewRequester","panel","inputStyle","btnStyle","formId","apiKey"])):m("",!0)]),_:1}),S(Ie,{name:"modal"},{default:I(()=>[i.showModal?(s(),y(Se,{key:0,onClose:n.onClose,showModal:i.showModal,field:i.entryFor,createdValue:n.createdValue},null,8,["onClose","showModal","field","createdValue"])):m("",!0)]),_:1})]),(s(!0),d(L,null,N(i.childNodes,_=>(s(),d("div",{key:_.id,class:"form-field-wrapper"},[_.data_type!=="section"?(s(),y(ke,{key:0,formId:t.formId,"form-field":_,formUniqueKey:t.formUniqueKey,"input-style":t.inputStyle,"btn-style":t.btnStyle,panel:t.panel,scenario:t.scenario,formType:t.formType,isInlineForm:t.isInlineForm,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey},null,8,["formId","form-field","formUniqueKey","input-style","btn-style","panel","scenario","formType","isInlineForm","apiKey","selectDependencyId","selectDependencyKey"])):m("",!0),_.data_type==="section"?(s(),y(v,{key:1,formSection:_,isChildNodes:!0,formId:t.formId,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.formType,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:!1,sizeModules:t.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey},null,8,["formSection","formId","formUniqueKey","panel","scenario","formType","btn-style","input-style","sizeModules","apiKey","selectDependencyId","selectDependencyKey"])):m("",!0)]))),128))],64)}const ot=V(mo,[["render",po],["__scopeId","data-v-76225e55"]]);const _o={props:{recur_mode:{type:String,default:""}},data(){return{name:"",interval:"",delivery_on:"",start_date:"",startDateBefore:"",end_date:"",endDateAfter:"",execution_time:"",intervals:[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"},{id:"yearly",name:"Yearly"}],every:[],weekly:[{id:"sunday",name:"Sunday"},{id:"monday",name:"Monday"},{id:"tuesday",name:"Tuesday"},{id:"wednesday",name:"Wednesday"},{id:"thursday",name:"Thursday"},{id:"friday",name:"Friday"},{id:"saturday",name:"Saturday"}],monthly:[],yearly:[{id:"january",name:"January"},{id:"february",name:"February"},{id:"march",name:"March"},{id:"april",name:"April"},{id:"may",name:"May"},{id:"june",name:"June"},{id:"july",name:"July"},{id:"august",name:"August"},{id:"september",name:"September"},{id:"october",name:"October"},{id:"november",name:"November"},{id:"december",name:"December"}]}},components:{"date-time-field":tt,"text-field":oe,"dynamic-select":ve},beforeMount(){this.recur_mode=="edit"&&this.formatState(this.getRecurAdditionalInfo);for(var e=1;e<=31;e++)this.monthly.push({id:e,name:e})},computed:{...X({getRecurAdditionalInfo:"getRecurAdditionalInfo"})},methods:{onChange(e,a){this[a]=e,this.setFormattedStaticFields(a,e),this[a]&&this[a].id?this.$store.dispatch("updateRecurProperties",{key:a,value:this[a].id}):this.$store.dispatch("updateRecurProperties",{key:a,value:this[a]})},setFormattedStaticFields(e,a){a&&!a.id&&(e==="interval"?(this.interval=this.intervals.find(t=>t.id==a),a&&(a==="monthly"||a==="yearly"||a==="weekly")?this.every=this[a]:this.every=[]):e==="delivery_on"?this.delivery_on=this.every.find(t=>t.id==a):e==="start_date"?(this.start_date=E(a).format("YYYY-MM-DD"),this.endDateAfter=a):e==="end_date"?(this.end_date=E(a).format("YYYY-MM-DD"),this.startDateBefore=a):e==="execution_time"&&(this.execution_time=this.getExecutionTime(a),this.$store.dispatch("updateRecurProperties",{key:"execution_time",value:E(this.execution_time).format("HH:mm:ss")})))},formatState(e){for(const[a,t]of Object.entries(e))this[a]=t,this.setFormattedStaticFields(a,t)},getExecutionTime(e){return E(e).format("YYYY-MM-DD HH:mm:ss")=="Invalid date"?E(e,"HH:mm:ss").format("YYYY-MM-DD HH:mm:ss"):E(e).format("YYYY-MM-DD HH:mm:ss")}},watch:{getRecurAdditionalInfo:{handler(e){this.formatState(e)},deep:!0}}},bo={id:"recur-details"},vo={class:"row"},Fo={class:"col-sm-3"},So={class:"col-sm-3"},ko={class:"row"},Co={class:"col-sm-3"};function wo(e,a,t,l,i,n){const r=f("text-field"),u=f("dynamic-select"),c=f("date-time-field"),g=Y("focus-first-input");return s(),d("div",bo,[T((s(),d("div",vo,[S(r,{label:e.trans("name"),type:"text",name:"name",value:i.name,onChange:n.onChange,required:!0,classname:"col-sm-2",rules:"required"},null,8,["label","value","onChange"]),S(u,{label:e.trans("interval"),multiple:!1,name:"interval",elements:i.intervals,value:i.interval,onChange:n.onChange,required:!0,classname:"col-sm-2",rules:"required"},null,8,["label","elements","value","onChange"]),i.interval&&(i.interval.id==="weekly"||i.interval.id==="monthly"||i.interval.id==="yearly")?(s(),y(u,{key:0,label:e.trans("every"),multiple:!1,name:"delivery_on",elements:i.every,value:i.delivery_on,onChange:n.onChange,required:!0,classname:"col-sm-2",rules:"required"},null,8,["label","elements","value","onChange"])):m("",!0),o("div",Fo,[S(c,{label:e.lang("start_with"),value:i.start_date,type:"date",name:"start_date",onChange:n.onChange,place:e.lang("select_date"),required:!0,format:"YYYY-MM-DD",clearable:!0,disabled:!1,timePeriod:"recur","not-after":i.startDateBefore,rules:"required"},null,8,["label","value","onChange","place","not-after"])]),o("div",So,[S(c,{label:e.lang("end_date"),value:i.end_date,type:"date",name:"end_date",onChange:n.onChange,place:e.lang("select_date"),required:!1,format:"YYYY-MM-DD",clearable:!0,timePeriod:"recur",disabled:!1,"not-before":i.endDateAfter},null,8,["label","value","onChange","place","not-before"])])])),[[g]]),o("div",ko,[o("div",Co,[S(c,{label:e.lang("execution_time"),value:i.execution_time,type:"time",name:"execution_time",onChange:n.onChange,place:e.lang("select_date"),format:"HH:mm:ss",required:!1,clearable:!0,disabled:!1},null,8,["label","value","onChange","place"])])])])}const Io=V(_o,[["render",wo],["__scopeId","data-v-0a85542a"]]);const Ao={setup(){const e=Ne();return{getTemplateAdditionalInfo:we(()=>e.getters.getTemplateAdditionalInfo)}},props:{template_mode:{type:String,default:""}},data(){return{name:""}},components:{"text-field":oe},beforeMount(){this.template_mode=="edit"&&this.formatState(this.getTemplateAdditionalInfo)},methods:{onChange(e,a){this[a]=e,this.$store.dispatch("updateTemplateProperties",{key:a,value:this[a]})},formatState(e){for(const[a,t]of Object.entries(e))this[a]=t}},watch:{getTemplateAdditionalInfo:{handler(e){this.formatState(e)},deep:!0}}},Vo={id:"ticket-template-details"},qo={class:"row"};function Do(e,a,t,l,i,n){const r=f("text-field"),u=Y("focus-first-input");return s(),d("div",Vo,[T((s(),d("div",qo,[S(r,{label:e.trans("name"),type:"text",name:"name",value:i.name,onChange:n.onChange,placehold:e.lang("enter_a_value"),required:!0,classname:"col-sm-6",rules:"required",autofocus:!0},null,8,["label","value","onChange","placehold"])])),[[u]])])}const xo=V(Ao,[["render",Do],["__scopeId","data-v-5a4fff0b"]]),To={components:{FormFieldRenderer:ot},props:{formSection:{type:Object,default:()=>{}},formUniqueKey:{type:String,required:!0},panel:{type:String,default:"agent"},scenario:{type:String,require:!0},formType:{type:String,default:""},inputStyle:{type:Object,default:()=>{}},btnStyle:{type:Object,default:()=>{}},sizeModules:{type:String,default:""},isInlineForm:{type:Boolean,default:!0},formId:{type:String,default:""},apiKey:{type:String,default:""},selectDependencyId:{type:[String,Number],default:""},selectDependencyKey:{type:String,default:""},recur_mode:{type:String,default:""}},methods:{subString(e,a=50){return de(e,a)}}},Lo={class:"card card-light mb-0 rounded-0"},Po={class:"card-header"},Mo={class:"card-title"},Eo={class:"card-body p-0 pt-2"},Uo={class:"row"},Ro={class:"col-md-6 mb-2"},Bo={class:"col-md-6 mb-2"},Ko={key:1,class:"col-md-12"},No={key:2,class:"col-md-12"};function Oo(e,a,t,l,i,n){const r=f("FormFieldRenderer"),u=Y("tooltip");return s(),d("div",Lo,[o("div",Po,[T((s(),d("h3",Mo,[x(p(t.formSection.label?n.subString(t.formSection.label):n.subString(t.formSection.title)),1)])),[[u,t.formSection.label?t.formSection.label:t.formSection.title]])]),o("div",Eo,[o("div",Uo,[t.formSection.form_fields.first&&t.formSection.form_fields.second?(s(),d(L,{key:0},[o("div",Ro,[(s(!0),d(L,null,N(t.formSection.form_fields.first,c=>(s(),y(r,{key:c.key,id:c.key,formId:t.formId,"form-field":c,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.formType,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:!1,sizeModules:t.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey,recur_mode:t.recur_mode},null,8,["id","formId","form-field","formUniqueKey","panel","scenario","formType","btn-style","input-style","sizeModules","apiKey","selectDependencyId","selectDependencyKey","recur_mode"]))),128))]),o("div",Bo,[(s(!0),d(L,null,N(t.formSection.form_fields.second,c=>(s(),y(r,{key:c.key,id:c.key,formId:t.formId,"form-field":c,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.formType,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:!1,sizeModules:t.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey,recur_mode:t.recur_mode},null,8,["id","formId","form-field","formUniqueKey","panel","scenario","formType","btn-style","input-style","sizeModules","apiKey","selectDependencyId","selectDependencyKey","recur_mode"]))),128))])],64)):m("",!0),t.formSection.form_fields.first&&!t.formSection.form_fields.second?(s(),d("div",Ko,[(s(!0),d(L,null,N(t.formSection.form_fields.first,c=>(s(),y(r,{key:c.key,id:c.key,formId:t.formId,"form-field":c,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.formType,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:t.isInlineForm,sizeModules:t.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey,recur_mode:t.recur_mode},null,8,["id","formId","form-field","formUniqueKey","panel","scenario","formType","btn-style","input-style","isInlineForm","sizeModules","apiKey","selectDependencyId","selectDependencyKey","recur_mode"]))),128))])):m("",!0),t.formSection.form_fields.second&&!t.formSection.form_fields.first?(s(),d("div",No,[(s(!0),d(L,null,N(t.formSection.form_fields.second,c=>(s(),y(r,{key:c.key,id:c.key,formId:t.formId,"form-field":c,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.formType,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:t.isInlineForm,sizeModules:t.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey,recur_mode:t.recur_mode},null,8,["id","formId","form-field","formUniqueKey","panel","scenario","formType","btn-style","input-style","isInlineForm","sizeModules","apiKey","selectDependencyId","selectDependencyKey","recur_mode"]))),128))])):m("",!0)])])])}const rt=V(To,[["render",Oo]]),zo={name:"form-renderer",props:{recur_mode:{type:String,default:""},template_mode:{type:String,default:""},fetchFormFieldApi:{type:String,required:!0},formUniqueKey:{type:String,required:!0},category:{type:String,required:!0},scenario:{type:String,required:!0},panel:{type:String,required:!0},isChildForm:{type:Boolean,default:!1},disableEmail:{type:Boolean,default:!1},inputStyle:{type:Object,default:()=>{}},btnStyle:{type:Object,default:()=>{}},isInlineForm:{type:Boolean,default:!0},formId:{type:String,default:""},apiKey:{type:String,default:""},selectDependencyId:{type:[String,Number],default:""},selectDependencyKey:{type:String,default:""},callingFrom:{type:String,default:""}},data:()=>({formSections:[],sizeModules:""}),computed:{...bt(["setAttachmentsData"]),...X(["getCategory"]),getApiParams(){return{category:this.category,scenario:this.scenario,panel:this.panel,api_key:this.apiKey}}},created(){this.getFormSections(this.getCategory),window.emitter.on("modelFormFieldFetched",e=>{this.formSections=this.formSections.filter(a=>"node_identifier"in a?a.node_identifier!==e.identifier:!0),this.formSections=[...this.formSections,...e.nodes]}),window.emitter.on("disableSpecificFormField",e=>{this.disableAt(this.formSections,e.identifier,e.disabled,e.setValue)})},watch:{getCategory(e){this.getFormSections(e)}},methods:{getFormSections(e=null){let a=this.getApiParams;e&&(a.category=e,this.formSections=[]),this.isChildForm?this.$store.dispatch("startChildFormLoader"):this.$store.dispatch("startLoader","getFormSections"),axios.get(this.fetchFormFieldApi,{params:a}).then(t=>{this.formSections=t.data.data.form_sections,this.sizeModules=t.data.data;let l=t.data.data.attachments;if(this.$store.dispatch("setAttachmentsData",l),this.scenario!=="recur"&&this.scenario!=="template"&&(this.formSections[0].form_fields.first[0].auto_focus=!0),window.emitter.emit("storeCategoryId",t.data.data.form_category_id?t.data.data.form_category_id:t.data.data.id),window.emitter.emit("updateOrgUserFormOrg",t.data.data.selectedorg?t.data.data.selectedorg:""),(this.scenario==="recur"&&this.recur_mode==="edit"&&t.data.data.form||this.scenario==="template"&&this.template_mode==="edit"&&t.data.data.form)&&window.emitter.emit("updateSelectedForm",t.data.data.form),this.disableEmail&&this.disableAt(this.formSections,"email"),this.$store.dispatch("updateSubmitApiEndpoint",{formUniqueKey:this.formUniqueKey,submitApiEndpoint:t.data.data.submit_endpoint}),this.callingFrom!=="popup"){const i=t.data.data.recur??{id:null,name:"",interval:"",delivery_on:"",start_date:"",end_date:"",execution_time:""};if(i){this.$store.dispatch("setEditorAttachments",t.data.data.attachments??[]);for(const[r,u]of Object.entries(i))this.$store.dispatch("updateRecurProperties",{key:r,value:u})}const n=t.data.data.template??{id:null,name:""};if(n)for(const[r,u]of Object.entries(n))this.$store.dispatch("updateTemplateProperties",{key:r,value:u});this.$store.dispatch("setBatchTicketMode",t.data.data.batch_ticket_status)}}).catch(t=>{R(t,"form-renderer")}).finally(()=>{this.isChildForm?this.$store.dispatch("stopChildFormLoader"):this.$store.dispatch("stopLoader","getFormSections")})},disableAt(e,a,t=!0,l=!1){let i=qe.findIndex(e,n=>n.key===a);if(i!==-1)if(e[i].disabled=t,!l)window.emitter.emit("updateSpecificFormField",{name:a,value:e[i].value});else{let n=ye.convertStringOfPropertiesToObject(e[i].api_info).url;axios.get(n).then(r=>{let c=r.data.data.data.find(g=>g.name==="Draft");window.emitter.emit("updateSpecificFormField",{name:a,value:c})}).catch(r=>{R(r,"form-renderer")})}else for(let n=0;n<e.length;n++)e[n].form_fields&&typeof e[n].form_fields=="object"?Object.keys(e[n].form_fields).forEach(r=>{this.disableAt(e[n].form_fields[r],a,t,l)}):P(e[n].options)&&e[n].options.forEach(r=>{this.disableAt(r.nodes,a,t,l)})}},components:{FormSectionRenderer:rt,FormFieldRenderer:ot,Loader:ue,TimePeriod:Io,TicketTemplateName:xo}},jo={class:"row"},Ho=["id"];function Yo(e,a,t,l,i,n){const r=f("TimePeriod"),u=f("TicketTemplateName"),c=f("FormSectionRenderer");return s(),d("div",null,[t.scenario==="recur"?(s(),y(r,{key:0,recur_mode:t.recur_mode},null,8,["recur_mode"])):m("",!0),t.scenario==="template"?(s(),y(u,{key:1,template_mode:t.template_mode},null,8,["template_mode"])):m("",!0),o("div",jo,[(s(!0),d(L,null,N(e.formSections,g=>(s(),d("div",{key:g.id,id:g.id,class:"col-md-12"},[S(c,{formSection:g,formId:t.formId,formUniqueKey:t.formUniqueKey,panel:t.panel,scenario:t.scenario,formType:t.category,"btn-style":t.btnStyle,"input-style":t.inputStyle,isInlineForm:t.isInlineForm,sizeModules:e.sizeModules,apiKey:t.apiKey,selectDependencyId:t.selectDependencyId,selectDependencyKey:t.selectDependencyKey,recur_mode:t.recur_mode},null,8,["formSection","formId","formUniqueKey","panel","scenario","formType","btn-style","input-style","isInlineForm","sizeModules","apiKey","selectDependencyId","selectDependencyKey","recur_mode"])],8,Ho))),128))])])}const dt=V(zo,[["render",Yo]]),Wo={name:"static-select",description:"select field with static options and only single select feature",props:{label:{type:String,required:!0},elements:{type:Array,required:!0},name:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},classname:{type:String,default:""},onChange:{type:Function,Required:!0},hint:{type:String,default:""},required:{type:Boolean,default:!1},hideEmptySelect:{type:Boolean,default:!1},id:{type:[String,Number],default:"static-select"},inputStyle:{type:Object,default:()=>{}},labelStyle:{type:Object,default:function(){return{}}},strlength:{type:[String,Number],default:100},disabled:{type:Boolean,required:!1,default:!1},isInlineForm:{type:Boolean,default:!1},bindValueKey:{type:String,default:"id"},bindNameKey:{type:String,default:"name"}},data:()=>({selectedValue:""}),watch:{value(e){this.selectedValue=e}},mounted(){this.selectedValue=this.value},methods:{subString(e){return de(e,parseInt(this.strlength))}},components:{"form-field-template":H}},Jo=["name","id","disabled"],Go={key:0,value:""},Qo=["value"];function Zo(e,a,t,l,i,n){const r=f("form-field-template");return s(),y(r,{label:t.label,name:t.name,classname:t.classname,hint:t.hint,required:t.required,labelStyle:t.labelStyle,isInlineForm:t.isInlineForm},{default:I(()=>[T(o("select",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=u=>e.selectedValue=u),name:t.name,onChange:a[1]||(a[1]=u=>t.onChange(e.selectedValue,t.name)),id:t.id,style:M(t.inputStyle),disabled:t.disabled},[t.hideEmptySelect?m("",!0):(s(),d("option",Go,"Select")),(s(!0),d(L,null,N(t.elements,u=>(s(),d("option",{value:u[t.bindValueKey],key:u[t.bindValueKey]},p(n.subString(u[t.bindNameKey])),9,Qo))),128))],44,Jo),[[vt,e.selectedValue]])]),_:1},8,["label","name","classname","hint","required","labelStyle","isInlineForm"])}const Xo=V(Wo,[["render",Zo]]);const $o={name:"faveo-form-client-panel",props:{category:{type:String,required:!0},panel:{type:String,default:"agent"},scenario:{type:String,default:""},updateCount:{type:Function,default:()=>{}},editApiEndpoint:{type:String,default:""},disableEmail:{type:Boolean,default:!1},layout:{type:Object,default:()=>{}},isInlineForm:{type:Boolean,default:!0},formId:{type:String,default:"faveo-form-client-panel"},apiKey:{type:String,default:""},editId:{type:[String,Number],default:""},form_category:{type:Object,default:()=>{}},showOrgField:{type:Boolean,default:!1},auth:{type:Object,default:()=>{}},loginType:{type:String,default:""}},data(){return{fetchFormFieldApi:"",formUniqueKey:null,submitFormInProgress:!1,btnStyle:{borderColor:this.layout.portal.client_button_border_color,backgroundColor:this.layout.portal.client_button_color},inputStyle:{borderColor:this.layout.portal.client_input_field_color},selectedForm:"",formSelected:!1,organizations:this.layout.organization,organization:""}},mixins:[Le],beforeMount(){if(this.editApiEndpoint)this.fetchFormFieldApi=this.editApiEndpoint,this.formSelected=!0;else{this.fetchFormFieldApi="api/form/render/";const e=be(this.currentPath());this.mode==="edit"?(this.fetchFormFieldApi=Je(this.category,e),this.formSelected=!0):this.formId==="chat-widget"?(this.selectedForm=this.form_category,this.updateFetchApi()):this.getDefaultFormValue()}},created(){window.emitter.on("updateTicketCategory",this.updateTicketCategory),window.emitter.on("updateOrgUserFormOrg",e=>{this.organization=e})},computed:{mode(){return this.currentPath().indexOf("edit")!==-1?"edit":"create"},fetchFormApi(){return this.fetchFormFieldApi}},methods:{updateTicketCategory(){window.emitter.emit("storeCategoryId",this.selectedForm.id)},onChange(e,a){this[a]=e,this.formSelected=!1,this.updateFetchApi()},onOrgChange(e,a){this[a]=e;const t={id:"org_id",isDefault:!1,formUniqueKey:this.formUniqueKey,selectedValue:e};this.$store.dispatch("setFormData",t)},getDefaultFormValue(){this.showLoader=!0,U.get("/from/forms/"+this.category+"?panel=client").then(e=>{this.selectedForm=e.data.data.data[0],this.showLoader=!1,this.updateFetchApi()}).catch(e=>{this.showLoader=!1,R(e,"faveo-form")})},updateFetchApi(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey),this.$store.dispatch("unsetValidationError"),this.fetchFormFieldApi="/render/form?id="+this.selectedForm.id+"&mode=render",setTimeout(()=>{this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario||this.mode}),this.formSelected=!0},1)},popUpSubmit(){this.organization||!this.showOrgField?(this.$store.dispatch("unsetValidationError"),document.getElementById("client-ticket-submit-button").click()):this.$store.dispatch("setValidationError",{organization:this.lang("this_field_is_required")})},formSubmit(e,a){this.$store.dispatch("setRecaptchaKey",a),this.onSubmit()},afterSubmit(e){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey);let a=De(this.category);this.$store.dispatch("createNewFormInstance",{formUniqueKey:a,scenario:this.mode}),this.formUniqueKey=a,this.updateCount(),window.emitter.emit("clientFormSubmitted"),this.organization="",this.mode==="create"&&this.category==="ticket"&&this.auth.user_data.length!==0&&setTimeout(()=>{let t=e.data.data.encrypted_id;return this.$router.push("/check-ticket/"+t)},3e3)}},components:{StaticSelect:Xo,DynamicSelect:ve,Loader:ue,FormWithCaptcha:nt,Alert:Fe,FormRenderer:dt}},er=e=>(ee("data-v-03333a35"),e=e(),te(),e),tr=["id"],ar={key:2,class:"row mb-3"},ir={key:3,class:"row"},nr={class:"form-div"},lr={class:"form-group row mt-3"},sr={class:"col-md-12"},or=["disabled"],rr=er(()=>o("span",null,[o("i",{class:"fas fa-save"})],-1));function dr(e,a,t,l,i,n){const r=f("Alert"),u=f("Loader"),c=f("DynamicSelect"),g=f("StaticSelect"),A=f("FormRenderer"),w=f("ValidationObserver"),h=f("FormWithCaptcha");return s(),d("div",{id:t.formId},[t.disableEmail?m("",!0):(s(),y(r,{key:0,componentName:"faveo-form"})),e.showLoader||i.submitFormInProgress?(s(),y(u,{key:1,duration:4e3})):m("",!0),t.formId!=="chat-widget"&&n.mode!=="edit"&&t.category==="ticket"?(s(),d("div",ar,[S(c,{label:e.trans("select_form"),multiple:!1,name:"selectedForm",classname:"col-sm-12",apiEndpoint:"/from/forms/"+t.category+"?panel=client",value:i.selectedForm,onChange:n.onChange,clearable:!1,"label-style":{display:"none"}},null,8,["label","apiEndpoint","value","onChange"])])):m("",!0),t.showOrgField?(s(),d("div",ir,[S(g,{label:e.lang("organization"),elements:i.organizations,name:"organization",value:i.organization,classname:"col-sm-12",onChange:n.onOrgChange,required:!0,inputStyle:i.inputStyle},null,8,["label","elements","value","onChange","inputStyle"])])):m("",!0),i.formUniqueKey&&i.formSelected?(s(),y(h,{key:4,btnClass:"btn btn-custom pull-right text-white",btnName:"submit",componentName:"faveo-form",loading:!e.showLoader,btn_id:"client-ticket-submit-button",formSubmit:n.formSubmit,page:t.formId=="chat-widget"?"":t.category+"_create_client",recaptchaContainerClass:"mt-2","input-style":i.inputStyle,"btn-style":i.btnStyle,disableSubmit:i.submitFormInProgress},{fields:I(()=>[o("div",nr,[S(w,{ref:"faveoFormObserver"},{default:I(({values:C,errors:k,validate:b})=>[(s(),y(A,{key:i.formUniqueKey,fetchFormFieldApi:i.fetchFormFieldApi,disableEmail:t.disableEmail,formUniqueKey:i.formUniqueKey,scenario:t.scenario||n.mode,category:t.category,panel:t.panel,afterSubmit:n.afterSubmit,btnStyle:i.btnStyle,isInlineForm:!1,inputStyle:i.inputStyle,formId:t.formId,apiKey:t.apiKey,selectDependencyId:t.editId},null,8,["fetchFormFieldApi","disableEmail","formUniqueKey","scenario","category","panel","afterSubmit","btnStyle","inputStyle","formId","apiKey","selectDependencyId"]))]),_:1},512)])]),_:1},8,["loading","formSubmit","page","input-style","btn-style","disableSubmit"])):m("",!0),T(o("div",lr,[o("div",sr,[o("button",{type:"submit",class:"btn btn-custom pull-right text-white",disabled:i.submitFormInProgress,onClick:a[0]||(a[0]=C=>n.popUpSubmit()),style:M(i.btnStyle),id:"client_form_submit"},[rr,x(" "+p(e.trans("submit")),1)],12,or)])],512),[[se,!e.showLoader&&i.formUniqueKey&&i.formSelected]])],8,tr)}const ur=V($o,[["render",dr],["__scopeId","data-v-03333a35"]]),cr={name:"faveo-box",description:"Bootstrap box -- theme AdminLTE",props:{title:{type:String,default:""},boxClass:{type:String,default:"card-light"}},computed:{hasFooterSlot(){return!!this.$slots.actions}}},mr={class:"card-header"},fr={key:0,class:"card-title"},hr={class:"card-body"};function yr(e,a,t,l,i,n){return s(),d("div",{class:F(["card",t.boxClass])},[o("div",mr,[t.title?(s(),d("h3",fr,p(t.title),1)):m("",!0),K(e.$slots,"customActions"),K(e.$slots,"headerTooltip"),t.title?K(e.$slots,"headerMenu",{key:1}):m("",!0)]),o("div",hr,[K(e.$slots,"default")]),K(e.$slots,"actions")],2)}const gr=V(cr,[["render",yr]]);const pr={name:"form-with-captcha",description:"Form with Recaptcha Component",props:{btn_id:{type:String,default:""},btnClass:{type:String,default:"btn btn-custom"},btnName:{type:String,default:"save"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},layout:{type:Object,default:()=>{}},iconClass:{type:String,default:"fa fa-save"},formSubmit:{type:Function},page:{type:String,default:""},componentName:{type:String,default:""},recaptchaContainerClass:{type:String,default:""},disableSubmit:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},data(){return{captchaKey:"",counter:0}},created(){window.emitter.on("login-failure",this.updateCaptcha),window.emitter.on("reset-captcha",this.updateCaptcha),window.emitter.on("forComment",this.updateCaptcha)},methods:{updateCaptcha(){this.counter+=1},getCaptcha(e){this.captchaKey=e},onSubmit(){this.page&&this.recaptchaApplyfor.includes(this.page)?this.captchaKey?this.formSubmit("g-recaptcha-response",this.captchaKey):this.$store.dispatch("setAlert",{type:"danger",message:"Invalid ReCaptcha",component_name:this.componentName}):this.formSubmit()}},components:{"recaptcha-field":it}},_r={id:"form-with-recaptcha"},br={key:1,class:"row"},vr={class:"col-sm-12"},Fr=["id","disabled"];function Sr(e,a,t,l,i,n){const r=f("recaptcha-field"),u=Y("captcha");return s(),d("div",_r,[K(e.$slots,"fields"),t.loading?(s(),d("div",{key:0,class:F(t.recaptchaContainerClass)},[T((s(),y(r,{key:"captcha"+i.counter,verifyCaptcha:n.getCaptcha,name:"captcha"},null,8,["verifyCaptcha"])),[[u,t.page]])],2)):m("",!0),t.loading?(s(),d("div",br,[o("div",vr,[o("button",{id:t.btn_id,class:F(t.btnClass),onClick:a[0]||(a[0]=c=>n.onSubmit()),style:M(t.btnStyle),disabled:t.disableSubmit,type:"button"},[o("i",{class:F(t.iconClass)},null,2),x(" "+p(e.trans(t.btnName)),1)],14,Fr)])])):m("",!0),K(e.$slots,"actions")])}const kr=V(pr,[["render",Sr]]),Cr={name:"faveo-form",props:{recur_mode:{type:String,default:""},template_mode:{type:String,default:""},category:{type:String,required:!0},panel:{type:String,default:"agent"},scenario:{type:String,default:""},showViewButton:{type:Boolean,default:!1}},data(){return{fetchFormFieldApi:"",formUniqueKey:null,submitFormInProgress:!1,editId:"",selectedForm:"",formSelected:!1}},mixins:[Le],beforeMount(){if(this.getDefaultFormValue(),this.fetchFormFieldApi="render/form",this.editId=be(this.currentPath()),this.mode==="edit"){let e=this.scenario||this.category;this.fetchFormFieldApi=Je(e,this.editId)}},computed:{mode(){return this.currentPath().indexOf("edit")!==-1?"edit":"create"},viewId(){return this.category==="organisation"?"organizations":this.category},page(){return this.scenario?this.category+"_"+this.scenario+"_"+this.panel:this.category+"_"+this.mode+"_"+this.panel},fetchFormApi(){return this.fetchFormFieldApi}},methods:{onChange(e,a){this[a]=e,this.formSelected=!1,this.updateFetchApi()},getDefaultFormValue(){this.showLoader=!0,axios.get("/from/forms/"+this.category).then(e=>{this.selectedForm=e.data.data.data[0],this.showLoader=!1,this.updateFetchApi()}).catch(e=>{this.showLoader=!1,R(e,"faveo-form")})},updateFetchApi(){this.fetchFormFieldApi="/render/form?id="+this.selectedForm.id+"&mode=render",this.formSelected=!0},afterSubmit(e){if((this.scenario==="recur"||this.scenario==="template")&&this.mode==="create")setTimeout(()=>this.scenario==="recur"?this.$router.push({name:"Recurring Tickets"}):this.$router.push({name:"Ticket Templates Index"}),3e3);else{window.emitter.emit("updateAgentSidebar"),this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey);let a=De(this.category);this.$store.dispatch("createNewFormInstance",{formUniqueKey:a,scenario:this.scenario||this.mode}),this.formUniqueKey=a,window.emitter.emit("reset-captcha");let t=e.data.data.id;if(this.mode==="create"){const l={user:"/user/",organisation:"/organizations/",ticket:"/thread/"};setTimeout(()=>{const i=l[this.category];i&&this.$router.push(i+t)},3e3)}}},formSubmit(e,a){this.$store.dispatch("setRecaptchaKey",a),this.onSubmit()}},components:{"faveo-box":gr,alert:Fe,loader:ue,"form-with-captcha":kr,DynamicSelect:ve}},wr={class:"col-sm-12"},Ir={id:"faveo-form"},Ar={key:0,class:"pull-right"},Vr=o("span",null,[o("i",{class:"fas fa-eye"})],-1);function qr(e,a,t,l,i,n){const r=f("alert"),u=f("custom-loader"),c=f("router-link"),g=f("DynamicSelect"),A=f("form-renderer"),w=f("ValidationObserver"),h=f("form-with-captcha"),C=f("faveo-box"),k=Y("tooltip");return s(),d("div",wr,[o("div",Ir,[S(C,{title:e.trans(n.mode),cardBodyClass:"p-2"},{headerMenu:I(()=>[t.showViewButton?(s(),d("span",Ar,[T((s(),y(c,{to:"/"+n.viewId+"/"+i.editId,class:"btn btn-tool has-tooltip"},{default:I(()=>[Vr]),_:1},8,["to"])),[[k,e.trans("view")]])])):m("",!0)]),default:I(()=>[S(r,{componentName:"faveo-form"}),e.showLoader||i.submitFormInProgress?(s(),y(u,{key:0,duration:4e3})):m("",!0),S(g,{label:e.trans("select_form"),multiple:!1,name:"selectedForm",classname:"col-sm-4",apiEndpoint:"/from/forms/"+t.category,value:i.selectedForm,onChange:n.onChange,clearable:!1,"label-style":{display:"none"}},null,8,["label","apiEndpoint","value","onChange"]),x(" "+p(n.fetchFormApi)+" ",1),i.formUniqueKey&&i.formSelected?(s(),y(h,{key:1,loading:!e.showLoader,btnClass:"btn btn-primary pull-right",btnName:"submit",componentName:"faveo-form",btn_id:"form-submit",formSubmit:n.formSubmit,page:n.page,recaptchaContainerClass:"col offset-md-2 col-md-10",disableSubmit:i.submitFormInProgress},{fields:I(()=>[S(w,{ref:"faveoFormObserver"},{default:I(({values:b,errors:z,validate:ce})=>[(s(),y(A,{key:i.formUniqueKey,fetchFormFieldApi:n.fetchFormApi,formUniqueKey:i.formUniqueKey,scenario:t.scenario||n.mode,category:t.category,panel:t.panel,recur_mode:t.recur_mode,template_mode:t.template_mode},null,8,["fetchFormFieldApi","formUniqueKey","scenario","category","panel","recur_mode","template_mode"]))]),_:1},512)]),_:1},8,["loading","formSubmit","page","disableSubmit"])):m("",!0)]),_:1},8,["title"])])])}const Dr=V(Cr,[["render",qr]]);window._=qe;const q=ze({});window.app=q;q.mixin(Bt);q.directive("scroll-ajax",Kt);q.directive("tooltip",Ft);q.directive("scroll-to",St);const Pe=Mt();q.config.globalProperties.emitter=Pe;window.emitter=Pe;Pe.on("*",console.info.bind(console,"event: "));q.component("uib-pagination",kt);q.component("infinite-loading",Ct);q.component("popover",wt);q.component("toggle",It);try{window.$=window.jQuery=jQuery}catch{}const xr={color:"rgb(0, 154, 186)",failedColor:"red",thickness:"3px",transition:{speed:"2s",opacity:"0.6s"},autoRevert:!0,location:"top",inverse:!1,autoFinish:!1};q.use(At,xr);window.axios=U;let he=null,O=0,G=0,ae=!1,Ae=!1,_e=0,Q=!0,Ve=!1,Tr=function(){setTimeout(()=>{he=null},500)},Lr=()=>{Q=!0,setTimeout(()=>{Q&&(_e=q.config.globalProperties.$Progress.get(),_e!==0&&(q.config.globalProperties.$Progress.finish(),Q=!1,O=0,G=0,ae=!1))},9e4)};const ut=()=>{ae||(q.config.globalProperties.$Progress.start(),Ve||(G=0),ae=!0,Ae=!0,Ve=!1,Lr())};window.axios.interceptors.request.use(e=>he===null||JSON.stringify(e)!==he||e.url.includes("http://")||e.url.includes("https://")?(he=JSON.stringify(e),Tr(),O++,ut(),e):Promise.reject({duplicateRequestRejection:!0,message:"Request rejected because of duplicate API call"}));window.axios.interceptors.response.use(e=>{if(O!==0&&G++,G===O&&e.status===200)G===1&&O===1?q.config.globalProperties.$Progress.finish():setTimeout(()=>q.config.globalProperties.$Progress.finish(),500),Q&&(Q=!1),G=0,O=0,ae=!1;else if(Ae){const a=O<=3?60:O<=6?50:30;q.config.globalProperties.$Progress.set(a),Ae=!1}else if(G>O)setTimeout(()=>q.config.globalProperties.$Progress.finish(),100),Q&&(Q=!1),G=0,O=0,ae=!1;else{_e=q.config.globalProperties.$Progress.get(),_e===0&&(ae=!1,Ve=!0,ut());const a=O<=3?5:O<=6?4:3;q.config.globalProperties.$Progress.increase(a)}return e},function(e){return q.config.globalProperties.$Progress.finish(),Q&&(Q=!1),G=0,O=0,ae=!1,e.response.status===401?(Z.dispatch("setAlert",{type:"danger",message:"Unauthorized!",component_name:"layout"}),setTimeout(()=>{window.location=window.axios.defaults.baseURL},2e3),O--,Promise.reject(e)):(e.response.status!==200&&O--,Promise.reject(e))});window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios.defaults.baseURL=document.head.querySelector('meta[name="api-base-url"]').content;setInterval(Pr,30*60*1e3);function Pr(){U.post("/keep-page-alive")}const ed=(e,a,t,l,i="agent")=>{window.emitter.on(t,n=>{setTimeout(()=>{let r=document.getElementById(l);if(r!==null&&document.getElementById(e)===null){let u=document.createElement("div");u.setAttribute("id",e);let c=document.createElement(e);c.setAttribute("data",JSON.stringify(n)),u.appendChild(c),r.appendChild(u);const g=ze({render:()=>je(a,{data:JSON.stringify(n)})});Object.assign(g._context,q._context),g.mount("#"+e)}},100)})};q.config.globalProperties.h=je;q.config.globalProperties.$filters={checkValue(e,a){return e?e.name?de(e.name,a):de(e,a):"---"}};q.directive("captcha",function(e,a,t){let l=a.value;l?sessionStorage.getItem("applyfor").includes(l)?e.style.display="block":e.style.display="none":e.style.display="block"});const{bind:Mr,unbind:Er}=Vt.directive;q.directive("click-outside",{mounted(e,a){Mr(e,{value:a.value})},beforeUnmount(e){Er(e)}});q.directive("focus-first-input",{mounted(e){const a=e.querySelector("input, textarea, select");a&&a.focus()}});Object.keys(Me).forEach(e=>{qt(e,Me[e])});Dt({generateMessage:xt({en:{messages:{required:()=>J("this_field_is_required"),email:()=>J("invalid_email"),numeric:()=>J("invalid_number"),date_format:()=>J("invalid_date_format"),max:()=>J("max_length_exceeded"),regex:()=>J("invalid_field_format")}}})});q.component("ValidationObserver",Tt);q.component("ValidationProvider",Lt);q.component("ErrorMessage",Pt);q.component("tiny-editor",ai);q.component("tiny-editor-with-validation",$e);q.component("form-renderer",dt);q.component("alert",Fe);q.directive("observe-visibility",{beforeMount:(e,a,t)=>{t.context=a.instance,Ce.bind(e,a,t)},update:Ce.update,unmounted:Ce.unbind});q.component("faveo-form-client-panel",ur);q.component("FormGenerator",Dr);q.component("FormSectionRenderer",rt);export{Ge as $,Fe as A,Xr as B,ue as C,ve as D,$r as E,hn as F,Wr as G,De as H,zs as I,Bt as J,$s as K,ao as L,at as M,Cs as N,jr as O,Rt as P,Hr as Q,qs as R,Xo as S,xe as T,Yr as U,st as V,Jr as W,lt as X,Nr as Y,Kr as Z,V as _,gr as a,le as a0,kr as a1,zr as a2,Qr as a3,Sa as a4,wa as a5,it as a6,ka as a7,Ca as a8,Je as a9,dt as b,Z as c,mi as d,R as e,P as f,ye as g,ur as h,Br as i,oe as j,be as k,J as l,ed as m,Zr as n,Hn as o,de as p,tt as q,H as r,ge as s,Or as t,Ln as u,Le as v,nt as w,He as x,Gr as y,ns as z};
